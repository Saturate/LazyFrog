var MC=Object.defineProperty;var LC=(R,t,c)=>t in R?MC(R,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):R[t]=c;var G=(R,t,c)=>LC(R,typeof t!="symbol"?t+"":t,c);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))v(x);new MutationObserver(x=>{for(const b of x)if(b.type==="childList")for(const h of b.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&v(h)}).observe(document,{childList:!0,subtree:!0});function c(x){const b={};return x.integrity&&(b.integrity=x.integrity),x.referrerPolicy&&(b.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?b.credentials="include":x.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function v(x){if(x.ep)return;x.ep=!0;const b=c(x);fetch(x.href,b)}})();function gc(R){return R&&R.__esModule&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R}function RC(R){if(R.__esModule)return R;var t=R.default;if(typeof t=="function"){var c=function v(){return this instanceof v?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};c.prototype=t.prototype}else c={};return Object.defineProperty(c,"__esModule",{value:!0}),Object.keys(R).forEach(function(v){var x=Object.getOwnPropertyDescriptor(R,v);Object.defineProperty(c,v,x.get?x:{enumerable:!0,get:function(){return R[v]}})}),c}var Vm={exports:{}},Ah={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx;function PC(){if(gx)return Ah;gx=1;var R=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function c(v,x,b){var h=null;if(b!==void 0&&(h=""+b),x.key!==void 0&&(h=""+x.key),"key"in x){b={};for(var w in x)w!=="key"&&(b[w]=x[w])}else b=x;return x=b.ref,{$$typeof:R,type:v,key:h,ref:x!==void 0?x:null,props:b}}return Ah.Fragment=t,Ah.jsx=c,Ah.jsxs=c,Ah}var px;function BC(){return px||(px=1,Vm.exports=PC()),Vm.exports}var V=BC(),Ym={exports:{}},Ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vx;function DC(){if(vx)return Ut;vx=1;var R=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),h=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),e=Symbol.for("react.suspense"),i=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),n=Symbol.for("react.activity"),r=Symbol.iterator;function a(K){return K===null||typeof K!="object"?null:(K=r&&K[r]||K["@@iterator"],typeof K=="function"?K:null)}var s={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o=Object.assign,d={};function l(K,Z,X){this.props=K,this.context=Z,this.refs=d,this.updater=X||s}l.prototype.isReactComponent={},l.prototype.setState=function(K,Z){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,Z,"setState")},l.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function f(){}f.prototype=l.prototype;function m(K,Z,X){this.props=K,this.context=Z,this.refs=d,this.updater=X||s}var g=m.prototype=new f;g.constructor=m,o(g,l.prototype),g.isPureReactComponent=!0;var p=Array.isArray;function y(){}var S={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function A(K,Z,X){var j=X.ref;return{$$typeof:R,type:K,key:Z,ref:j!==void 0?j:null,props:X}}function M(K,Z){return A(K.type,Z,K.props)}function L(K){return typeof K=="object"&&K!==null&&K.$$typeof===R}function P(K){var Z={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(X){return Z[X]})}var O=/\/+/g;function D(K,Z){return typeof K=="object"&&K!==null&&K.key!=null?P(""+K.key):Z.toString(36)}function I(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(y,y):(K.status="pending",K.then(function(Z){K.status==="pending"&&(K.status="fulfilled",K.value=Z)},function(Z){K.status==="pending"&&(K.status="rejected",K.reason=Z)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function F(K,Z,X,j,Y){var U=typeof K;(U==="undefined"||U==="boolean")&&(K=null);var J=!1;if(K===null)J=!0;else switch(U){case"bigint":case"string":case"number":J=!0;break;case"object":switch(K.$$typeof){case R:case t:J=!0;break;case u:return J=K._init,F(J(K._payload),Z,X,j,Y)}}if(J)return Y=Y(K),J=j===""?"."+D(K,0):j,p(Y)?(X="",J!=null&&(X=J.replace(O,"$&/")+"/"),F(Y,Z,X,"",function(te){return te})):Y!=null&&(L(Y)&&(Y=M(Y,X+(Y.key==null||K&&K.key===Y.key?"":(""+Y.key).replace(O,"$&/")+"/")+J)),Z.push(Y)),1;J=0;var q=j===""?".":j+":";if(p(K))for(var _=0;_<K.length;_++)j=K[_],U=q+D(j,_),J+=F(j,Z,X,U,Y);else if(_=a(K),typeof _=="function")for(K=_.call(K),_=0;!(j=K.next()).done;)j=j.value,U=q+D(j,_++),J+=F(j,Z,X,U,Y);else if(U==="object"){if(typeof K.then=="function")return F(I(K),Z,X,j,Y);throw Z=String(K),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return J}function H(K,Z,X){if(K==null)return K;var j=[],Y=0;return F(K,j,"","",function(U){return Z.call(X,U,Y++)}),j}function k(K){if(K._status===-1){var Z=K._result;Z=Z(),Z.then(function(X){(K._status===0||K._status===-1)&&(K._status=1,K._result=X)},function(X){(K._status===0||K._status===-1)&&(K._status=2,K._result=X)}),K._status===-1&&(K._status=0,K._result=Z)}if(K._status===1)return K._result.default;throw K._result}var W=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},$={map:H,forEach:function(K,Z,X){H(K,function(){Z.apply(this,arguments)},X)},count:function(K){var Z=0;return H(K,function(){Z++}),Z},toArray:function(K){return H(K,function(Z){return Z})||[]},only:function(K){if(!L(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Ut.Activity=n,Ut.Children=$,Ut.Component=l,Ut.Fragment=c,Ut.Profiler=x,Ut.PureComponent=m,Ut.StrictMode=v,Ut.Suspense=e,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(K){return S.H.useMemoCache(K)}},Ut.cache=function(K){return function(){return K.apply(null,arguments)}},Ut.cacheSignal=function(){return null},Ut.cloneElement=function(K,Z,X){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var j=o({},K.props),Y=K.key;if(Z!=null)for(U in Z.key!==void 0&&(Y=""+Z.key),Z)!C.call(Z,U)||U==="key"||U==="__self"||U==="__source"||U==="ref"&&Z.ref===void 0||(j[U]=Z[U]);var U=arguments.length-2;if(U===1)j.children=X;else if(1<U){for(var J=Array(U),q=0;q<U;q++)J[q]=arguments[q+2];j.children=J}return A(K.type,Y,j)},Ut.createContext=function(K){return K={$$typeof:h,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:b,_context:K},K},Ut.createElement=function(K,Z,X){var j,Y={},U=null;if(Z!=null)for(j in Z.key!==void 0&&(U=""+Z.key),Z)C.call(Z,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(Y[j]=Z[j]);var J=arguments.length-2;if(J===1)Y.children=X;else if(1<J){for(var q=Array(J),_=0;_<J;_++)q[_]=arguments[_+2];Y.children=q}if(K&&K.defaultProps)for(j in J=K.defaultProps,J)Y[j]===void 0&&(Y[j]=J[j]);return A(K,U,Y)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(K){return{$$typeof:w,render:K}},Ut.isValidElement=L,Ut.lazy=function(K){return{$$typeof:u,_payload:{_status:-1,_result:K},_init:k}},Ut.memo=function(K,Z){return{$$typeof:i,type:K,compare:Z===void 0?null:Z}},Ut.startTransition=function(K){var Z=S.T,X={};S.T=X;try{var j=K(),Y=S.S;Y!==null&&Y(X,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(y,W)}catch(U){W(U)}finally{Z!==null&&X.types!==null&&(Z.types=X.types),S.T=Z}},Ut.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Ut.use=function(K){return S.H.use(K)},Ut.useActionState=function(K,Z,X){return S.H.useActionState(K,Z,X)},Ut.useCallback=function(K,Z){return S.H.useCallback(K,Z)},Ut.useContext=function(K){return S.H.useContext(K)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(K,Z){return S.H.useDeferredValue(K,Z)},Ut.useEffect=function(K,Z){return S.H.useEffect(K,Z)},Ut.useEffectEvent=function(K){return S.H.useEffectEvent(K)},Ut.useId=function(){return S.H.useId()},Ut.useImperativeHandle=function(K,Z,X){return S.H.useImperativeHandle(K,Z,X)},Ut.useInsertionEffect=function(K,Z){return S.H.useInsertionEffect(K,Z)},Ut.useLayoutEffect=function(K,Z){return S.H.useLayoutEffect(K,Z)},Ut.useMemo=function(K,Z){return S.H.useMemo(K,Z)},Ut.useOptimistic=function(K,Z){return S.H.useOptimistic(K,Z)},Ut.useReducer=function(K,Z,X){return S.H.useReducer(K,Z,X)},Ut.useRef=function(K){return S.H.useRef(K)},Ut.useState=function(K){return S.H.useState(K)},Ut.useSyncExternalStore=function(K,Z,X){return S.H.useSyncExternalStore(K,Z,X)},Ut.useTransition=function(){return S.H.useTransition()},Ut.version="19.2.0",Ut}var yx;function ap(){return yx||(yx=1,Ym.exports=DC()),Ym.exports}var ve=ap();const fi=gc(ve);var Xm={exports:{}},bh={},zm={exports:{}},Wm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx;function FC(){return xx||(xx=1,function(R){function t(F,H){var k=F.length;F.push(H);e:for(;0<k;){var W=k-1>>>1,$=F[W];if(0<x($,H))F[W]=H,F[k]=$,k=W;else break e}}function c(F){return F.length===0?null:F[0]}function v(F){if(F.length===0)return null;var H=F[0],k=F.pop();if(k!==H){F[0]=k;e:for(var W=0,$=F.length,K=$>>>1;W<K;){var Z=2*(W+1)-1,X=F[Z],j=Z+1,Y=F[j];if(0>x(X,k))j<$&&0>x(Y,X)?(F[W]=Y,F[j]=k,W=j):(F[W]=X,F[Z]=k,W=Z);else if(j<$&&0>x(Y,k))F[W]=Y,F[j]=k,W=j;else break e}}return H}function x(F,H){var k=F.sortIndex-H.sortIndex;return k!==0?k:F.id-H.id}if(R.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var b=performance;R.unstable_now=function(){return b.now()}}else{var h=Date,w=h.now();R.unstable_now=function(){return h.now()-w}}var e=[],i=[],u=1,n=null,r=3,a=!1,s=!1,o=!1,d=!1,l=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;function g(F){for(var H=c(i);H!==null;){if(H.callback===null)v(i);else if(H.startTime<=F)v(i),H.sortIndex=H.expirationTime,t(e,H);else break;H=c(i)}}function p(F){if(o=!1,g(F),!s)if(c(e)!==null)s=!0,y||(y=!0,P());else{var H=c(i);H!==null&&I(p,H.startTime-F)}}var y=!1,S=-1,C=5,A=-1;function M(){return d?!0:!(R.unstable_now()-A<C)}function L(){if(d=!1,y){var F=R.unstable_now();A=F;var H=!0;try{e:{s=!1,o&&(o=!1,f(S),S=-1),a=!0;var k=r;try{t:{for(g(F),n=c(e);n!==null&&!(n.expirationTime>F&&M());){var W=n.callback;if(typeof W=="function"){n.callback=null,r=n.priorityLevel;var $=W(n.expirationTime<=F);if(F=R.unstable_now(),typeof $=="function"){n.callback=$,g(F),H=!0;break t}n===c(e)&&v(e),g(F)}else v(e);n=c(e)}if(n!==null)H=!0;else{var K=c(i);K!==null&&I(p,K.startTime-F),H=!1}}break e}finally{n=null,r=k,a=!1}H=void 0}}finally{H?P():y=!1}}}var P;if(typeof m=="function")P=function(){m(L)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,D=O.port2;O.port1.onmessage=L,P=function(){D.postMessage(null)}}else P=function(){l(L,0)};function I(F,H){S=l(function(){F(R.unstable_now())},H)}R.unstable_IdlePriority=5,R.unstable_ImmediatePriority=1,R.unstable_LowPriority=4,R.unstable_NormalPriority=3,R.unstable_Profiling=null,R.unstable_UserBlockingPriority=2,R.unstable_cancelCallback=function(F){F.callback=null},R.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<F?Math.floor(1e3/F):5},R.unstable_getCurrentPriorityLevel=function(){return r},R.unstable_next=function(F){switch(r){case 1:case 2:case 3:var H=3;break;default:H=r}var k=r;r=H;try{return F()}finally{r=k}},R.unstable_requestPaint=function(){d=!0},R.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var k=r;r=F;try{return H()}finally{r=k}},R.unstable_scheduleCallback=function(F,H,k){var W=R.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?W+k:W):k=W,F){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=k+$,F={id:u++,callback:H,priorityLevel:F,startTime:k,expirationTime:$,sortIndex:-1},k>W?(F.sortIndex=k,t(i,F),c(e)===null&&F===c(i)&&(o?(f(S),S=-1):o=!0,I(p,k-W))):(F.sortIndex=$,t(e,F),s||a||(s=!0,y||(y=!0,P()))),F},R.unstable_shouldYield=M,R.unstable_wrapCallback=function(F){var H=r;return function(){var k=r;r=H;try{return F.apply(this,arguments)}finally{r=k}}}}(Wm)),Wm}var wx;function IC(){return wx||(wx=1,zm.exports=FC()),zm.exports}var jm={exports:{}},fs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function OC(){if(Sx)return fs;Sx=1;var R=ap();function t(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)i+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var v={d:{f:c,r:function(){throw Error(t(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},x=Symbol.for("react.portal");function b(e,i,u){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:n==null?null:""+n,children:e,containerInfo:i,implementation:u}}var h=R.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function w(e,i){if(e==="font")return"";if(typeof i=="string")return i==="use-credentials"?i:""}return fs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=v,fs.createPortal=function(e,i){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)throw Error(t(299));return b(e,i,null,u)},fs.flushSync=function(e){var i=h.T,u=v.p;try{if(h.T=null,v.p=2,e)return e()}finally{h.T=i,v.p=u,v.d.f()}},fs.preconnect=function(e,i){typeof e=="string"&&(i?(i=i.crossOrigin,i=typeof i=="string"?i==="use-credentials"?i:"":void 0):i=null,v.d.C(e,i))},fs.prefetchDNS=function(e){typeof e=="string"&&v.d.D(e)},fs.preinit=function(e,i){if(typeof e=="string"&&i&&typeof i.as=="string"){var u=i.as,n=w(u,i.crossOrigin),r=typeof i.integrity=="string"?i.integrity:void 0,a=typeof i.fetchPriority=="string"?i.fetchPriority:void 0;u==="style"?v.d.S(e,typeof i.precedence=="string"?i.precedence:void 0,{crossOrigin:n,integrity:r,fetchPriority:a}):u==="script"&&v.d.X(e,{crossOrigin:n,integrity:r,fetchPriority:a,nonce:typeof i.nonce=="string"?i.nonce:void 0})}},fs.preinitModule=function(e,i){if(typeof e=="string")if(typeof i=="object"&&i!==null){if(i.as==null||i.as==="script"){var u=w(i.as,i.crossOrigin);v.d.M(e,{crossOrigin:u,integrity:typeof i.integrity=="string"?i.integrity:void 0,nonce:typeof i.nonce=="string"?i.nonce:void 0})}}else i==null&&v.d.M(e)},fs.preload=function(e,i){if(typeof e=="string"&&typeof i=="object"&&i!==null&&typeof i.as=="string"){var u=i.as,n=w(u,i.crossOrigin);v.d.L(e,u,{crossOrigin:n,integrity:typeof i.integrity=="string"?i.integrity:void 0,nonce:typeof i.nonce=="string"?i.nonce:void 0,type:typeof i.type=="string"?i.type:void 0,fetchPriority:typeof i.fetchPriority=="string"?i.fetchPriority:void 0,referrerPolicy:typeof i.referrerPolicy=="string"?i.referrerPolicy:void 0,imageSrcSet:typeof i.imageSrcSet=="string"?i.imageSrcSet:void 0,imageSizes:typeof i.imageSizes=="string"?i.imageSizes:void 0,media:typeof i.media=="string"?i.media:void 0})}},fs.preloadModule=function(e,i){if(typeof e=="string")if(i){var u=w(i.as,i.crossOrigin);v.d.m(e,{as:typeof i.as=="string"&&i.as!=="script"?i.as:void 0,crossOrigin:u,integrity:typeof i.integrity=="string"?i.integrity:void 0})}else v.d.m(e)},fs.requestFormReset=function(e){v.d.r(e)},fs.unstable_batchedUpdates=function(e,i){return e(i)},fs.useFormState=function(e,i,u){return h.H.useFormState(e,i,u)},fs.useFormStatus=function(){return h.H.useHostTransitionStatus()},fs.version="19.2.0",fs}var Tx;function sw(){if(Tx)return jm.exports;Tx=1;function R(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R)}catch(t){console.error(t)}}return R(),jm.exports=OC(),jm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cx;function NC(){if(Cx)return bh;Cx=1;var R=IC(),t=ap(),c=sw();function v(T){var E="https://react.dev/errors/"+T;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var B=2;B<arguments.length;B++)E+="&args[]="+encodeURIComponent(arguments[B])}return"Minified React error #"+T+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function x(T){return!(!T||T.nodeType!==1&&T.nodeType!==9&&T.nodeType!==11)}function b(T){var E=T,B=T;if(T.alternate)for(;E.return;)E=E.return;else{T=E;do E=T,E.flags&4098&&(B=E.return),T=E.return;while(T)}return E.tag===3?B:null}function h(T){if(T.tag===13){var E=T.memoizedState;if(E===null&&(T=T.alternate,T!==null&&(E=T.memoizedState)),E!==null)return E.dehydrated}return null}function w(T){if(T.tag===31){var E=T.memoizedState;if(E===null&&(T=T.alternate,T!==null&&(E=T.memoizedState)),E!==null)return E.dehydrated}return null}function e(T){if(b(T)!==T)throw Error(v(188))}function i(T){var E=T.alternate;if(!E){if(E=b(T),E===null)throw Error(v(188));return E!==T?null:T}for(var B=T,N=E;;){var z=B.return;if(z===null)break;var Q=z.alternate;if(Q===null){if(N=z.return,N!==null){B=N;continue}break}if(z.child===Q.child){for(Q=z.child;Q;){if(Q===B)return e(z),T;if(Q===N)return e(z),E;Q=Q.sibling}throw Error(v(188))}if(B.return!==N.return)B=z,N=Q;else{for(var ee=!1,ae=z.child;ae;){if(ae===B){ee=!0,B=z,N=Q;break}if(ae===N){ee=!0,N=z,B=Q;break}ae=ae.sibling}if(!ee){for(ae=Q.child;ae;){if(ae===B){ee=!0,B=Q,N=z;break}if(ae===N){ee=!0,N=Q,B=z;break}ae=ae.sibling}if(!ee)throw Error(v(189))}}if(B.alternate!==N)throw Error(v(190))}if(B.tag!==3)throw Error(v(188));return B.stateNode.current===B?T:E}function u(T){var E=T.tag;if(E===5||E===26||E===27||E===6)return T;for(T=T.child;T!==null;){if(E=u(T),E!==null)return E;T=T.sibling}return null}var n=Object.assign,r=Symbol.for("react.element"),a=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function P(T){return T===null||typeof T!="object"?null:(T=L&&T[L]||T["@@iterator"],typeof T=="function"?T:null)}var O=Symbol.for("react.client.reference");function D(T){if(T==null)return null;if(typeof T=="function")return T.$$typeof===O?null:T.displayName||T.name||null;if(typeof T=="string")return T;switch(T){case o:return"Fragment";case l:return"Profiler";case d:return"StrictMode";case p:return"Suspense";case y:return"SuspenseList";case A:return"Activity"}if(typeof T=="object")switch(T.$$typeof){case s:return"Portal";case m:return T.displayName||"Context";case f:return(T._context.displayName||"Context")+".Consumer";case g:var E=T.render;return T=T.displayName,T||(T=E.displayName||E.name||"",T=T!==""?"ForwardRef("+T+")":"ForwardRef"),T;case S:return E=T.displayName||null,E!==null?E:D(T.type)||"Memo";case C:E=T._payload,T=T._init;try{return D(T(E))}catch{}}return null}var I=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k={pending:!1,data:null,method:null,action:null},W=[],$=-1;function K(T){return{current:T}}function Z(T){0>$||(T.current=W[$],W[$]=null,$--)}function X(T,E){$++,W[$]=T.current,T.current=E}var j=K(null),Y=K(null),U=K(null),J=K(null);function q(T,E){switch(X(U,E),X(Y,T),X(j,null),E.nodeType){case 9:case 11:T=(T=E.documentElement)&&(T=T.namespaceURI)?Hy(T):0;break;default:if(T=E.tagName,E=E.namespaceURI)E=Hy(E),T=ky(E,T);else switch(T){case"svg":T=1;break;case"math":T=2;break;default:T=0}}Z(j),X(j,T)}function _(){Z(j),Z(Y),Z(U)}function te(T){T.memoizedState!==null&&X(J,T);var E=j.current,B=ky(E,T.type);E!==B&&(X(Y,T),X(j,B))}function se(T){Y.current===T&&(Z(j),Z(Y)),J.current===T&&(Z(J),wh._currentValue=k)}var ne,he;function le(T){if(ne===void 0)try{throw Error()}catch(B){var E=B.stack.trim().match(/\n( *(at )?)/);ne=E&&E[1]||"",he=-1<B.stack.indexOf(`
    at`)?" (<anonymous>)":-1<B.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+T+he}var ge=!1;function re(T,E){if(!T||ge)return"";ge=!0;var B=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(E){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(be){var Ce=be}Reflect.construct(T,[],Re)}else{try{Re.call()}catch(be){Ce=be}T.call(Re.prototype)}}else{try{throw Error()}catch(be){Ce=be}(Re=T())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(be){if(be&&Ce&&typeof be.stack=="string")return[be.stack,Ce.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var z=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");z&&z.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Q=N.DetermineComponentFrameRoot(),ee=Q[0],ae=Q[1];if(ee&&ae){var oe=ee.split(`
`),we=ae.split(`
`);for(z=N=0;N<oe.length&&!oe[N].includes("DetermineComponentFrameRoot");)N++;for(;z<we.length&&!we[z].includes("DetermineComponentFrameRoot");)z++;if(N===oe.length||z===we.length)for(N=oe.length-1,z=we.length-1;1<=N&&0<=z&&oe[N]!==we[z];)z--;for(;1<=N&&0<=z;N--,z--)if(oe[N]!==we[z]){if(N!==1||z!==1)do if(N--,z--,0>z||oe[N]!==we[z]){var Ee=`
`+oe[N].replace(" at new "," at ");return T.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",T.displayName)),Ee}while(1<=N&&0<=z);break}}}finally{ge=!1,Error.prepareStackTrace=B}return(B=T?T.displayName||T.name:"")?le(B):""}function fe(T,E){switch(T.tag){case 26:case 27:case 5:return le(T.type);case 16:return le("Lazy");case 13:return T.child!==E&&E!==null?le("Suspense Fallback"):le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return re(T.type,!1);case 11:return re(T.type.render,!1);case 1:return re(T.type,!0);case 31:return le("Activity");default:return""}}function Ae(T){try{var E="",B=null;do E+=fe(T,B),B=T,T=T.return;while(T);return E}catch(N){return`
Error generating stack: `+N.message+`
`+N.stack}}var Ie=Object.prototype.hasOwnProperty,Ne=R.unstable_scheduleCallback,Fe=R.unstable_cancelCallback,Se=R.unstable_shouldYield,Oe=R.unstable_requestPaint,Be=R.unstable_now,Pt=R.unstable_getCurrentPriorityLevel,Gt=R.unstable_ImmediatePriority,si=R.unstable_UserBlockingPriority,It=R.unstable_NormalPriority,Ht=R.unstable_LowPriority,hi=R.unstable_IdlePriority,Ai=R.log,Ot=R.unstable_setDisableYieldValue,qt=null,jt=null;function Si(T){if(typeof Ai=="function"&&Ot(T),jt&&typeof jt.setStrictMode=="function")try{jt.setStrictMode(qt,T)}catch{}}var Di=Math.clz32?Math.clz32:ta,ea=Math.log,es=Math.LN2;function ta(T){return T>>>=0,T===0?32:31-(ea(T)/es|0)|0}var cs=256,Bn=262144,lo=4194304;function ja(T){var E=T&42;if(E!==0)return E;switch(T&-T){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return T&261888;case 262144:case 524288:case 1048576:case 2097152:return T&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return T&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return T}}function ho(T,E,B){var N=T.pendingLanes;if(N===0)return 0;var z=0,Q=T.suspendedLanes,ee=T.pingedLanes;T=T.warmLanes;var ae=N&134217727;return ae!==0?(N=ae&~Q,N!==0?z=ja(N):(ee&=ae,ee!==0?z=ja(ee):B||(B=ae&~T,B!==0&&(z=ja(B))))):(ae=N&~Q,ae!==0?z=ja(ae):ee!==0?z=ja(ee):B||(B=N&~T,B!==0&&(z=ja(B)))),z===0?0:E!==0&&E!==z&&!(E&Q)&&(Q=z&-z,B=E&-E,Q>=B||Q===32&&(B&4194048)!==0)?E:z}function yr(T,E){return(T.pendingLanes&~(T.suspendedLanes&~T.pingedLanes)&E)===0}function Pl(T,E){switch(T){case 1:case 2:case 4:case 8:case 64:return E+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function td(){var T=lo;return lo<<=1,!(lo&62914560)&&(lo=4194304),T}function Bl(T){for(var E=[],B=0;31>B;B++)E.push(T);return E}function xr(T,E){T.pendingLanes|=E,E!==268435456&&(T.suspendedLanes=0,T.pingedLanes=0,T.warmLanes=0)}function Dc(T,E,B,N,z,Q){var ee=T.pendingLanes;T.pendingLanes=B,T.suspendedLanes=0,T.pingedLanes=0,T.warmLanes=0,T.expiredLanes&=B,T.entangledLanes&=B,T.errorRecoveryDisabledLanes&=B,T.shellSuspendCounter=0;var ae=T.entanglements,oe=T.expirationTimes,we=T.hiddenUpdates;for(B=ee&~B;0<B;){var Ee=31-Di(B),Re=1<<Ee;ae[Ee]=0,oe[Ee]=-1;var Ce=we[Ee];if(Ce!==null)for(we[Ee]=null,Ee=0;Ee<Ce.length;Ee++){var be=Ce[Ee];be!==null&&(be.lane&=-536870913)}B&=~Re}N!==0&&Dl(T,N,0),Q!==0&&z===0&&T.tag!==0&&(T.suspendedLanes|=Q&~(ee&~E))}function Dl(T,E,B){T.pendingLanes|=E,T.suspendedLanes&=~E;var N=31-Di(E);T.entangledLanes|=E,T.entanglements[N]=T.entanglements[N]|1073741824|B&261930}function id(T,E){var B=T.entangledLanes|=E;for(T=T.entanglements;B;){var N=31-Di(B),z=1<<N;z&E|T[N]&E&&(T[N]|=E),B&=~z}}function Fl(T,E){var B=E&-E;return B=B&42?1:uo(B),B&(T.suspendedLanes|E)?0:B}function uo(T){switch(T){case 2:T=1;break;case 8:T=4;break;case 32:T=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:T=128;break;case 268435456:T=134217728;break;default:T=0}return T}function co(T){return T&=-T,2<T?8<T?T&134217727?32:268435456:8:2}function Il(){var T=H.p;return T!==0?T:(T=window.event,T===void 0?32:lx(T.type))}function fo(T,E){var B=H.p;try{return H.p=T,E()}finally{H.p=B}}var ia=Math.random().toString(36).slice(2),ki="__reactFiber$"+ia,ye="__reactProps$"+ia,Qt="__reactContainer$"+ia,Ii="__reactEvents$"+ia,Pa="__reactListeners$"+ia,as="__reactHandles$"+ia,mo="__reactResources$"+ia,va="__reactMarker$"+ia;function Ol(T){delete T[ki],delete T[ye],delete T[Ii],delete T[Pa],delete T[as]}function Ba(T){var E=T[ki];if(E)return E;for(var B=T.parentNode;B;){if(E=B[Qt]||B[ki]){if(B=E.alternate,E.child!==null||B!==null&&B.child!==null)for(T=jy(T);T!==null;){if(B=T[ki])return B;T=jy(T)}return E}T=B,B=T.parentNode}return null}function go(T){if(T=T[ki]||T[Qt]){var E=T.tag;if(E===5||E===6||E===13||E===31||E===26||E===27||E===3)return T}return null}function Nl(T){var E=T.tag;if(E===5||E===26||E===27||E===6)return T.stateNode;throw Error(v(33))}function po(T){var E=T[mo];return E||(E=T[mo]={hoistableStyles:new Map,hoistableScripts:new Map}),E}function ts(T){T[va]=!0}var Ep=new Set,Mp={};function wr(T,E){vo(T,E),vo(T+"Capture",E)}function vo(T,E){for(Mp[T]=E,T=0;T<E.length;T++)Ep.add(E[T])}var y2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lp={},Rp={};function x2(T){return Ie.call(Rp,T)?!0:Ie.call(Lp,T)?!1:y2.test(T)?Rp[T]=!0:(Lp[T]=!0,!1)}function sd(T,E,B){if(x2(E))if(B===null)T.removeAttribute(E);else{switch(typeof B){case"undefined":case"function":case"symbol":T.removeAttribute(E);return;case"boolean":var N=E.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){T.removeAttribute(E);return}}T.setAttribute(E,""+B)}}function ad(T,E,B){if(B===null)T.removeAttribute(E);else{switch(typeof B){case"undefined":case"function":case"symbol":case"boolean":T.removeAttribute(E);return}T.setAttribute(E,""+B)}}function Ka(T,E,B,N){if(N===null)T.removeAttribute(B);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":T.removeAttribute(B);return}T.setAttributeNS(E,B,""+N)}}function sa(T){switch(typeof T){case"bigint":case"boolean":case"number":case"string":case"undefined":return T;case"object":return T;default:return""}}function Pp(T){var E=T.type;return(T=T.nodeName)&&T.toLowerCase()==="input"&&(E==="checkbox"||E==="radio")}function w2(T,E,B){var N=Object.getOwnPropertyDescriptor(T.constructor.prototype,E);if(!T.hasOwnProperty(E)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var z=N.get,Q=N.set;return Object.defineProperty(T,E,{configurable:!0,get:function(){return z.call(this)},set:function(ee){B=""+ee,Q.call(this,ee)}}),Object.defineProperty(T,E,{enumerable:N.enumerable}),{getValue:function(){return B},setValue:function(ee){B=""+ee},stopTracking:function(){T._valueTracker=null,delete T[E]}}}}function Fc(T){if(!T._valueTracker){var E=Pp(T)?"checked":"value";T._valueTracker=w2(T,E,""+T[E])}}function Bp(T){if(!T)return!1;var E=T._valueTracker;if(!E)return!0;var B=E.getValue(),N="";return T&&(N=Pp(T)?T.checked?"true":"false":T.value),T=N,T!==B?(E.setValue(T),!0):!1}function nd(T){if(T=T||(typeof document<"u"?document:void 0),typeof T>"u")return null;try{return T.activeElement||T.body}catch{return T.body}}var S2=/[\n"\\]/g;function aa(T){return T.replace(S2,function(E){return"\\"+E.charCodeAt(0).toString(16)+" "})}function Ic(T,E,B,N,z,Q,ee,ae){T.name="",ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?T.type=ee:T.removeAttribute("type"),E!=null?ee==="number"?(E===0&&T.value===""||T.value!=E)&&(T.value=""+sa(E)):T.value!==""+sa(E)&&(T.value=""+sa(E)):ee!=="submit"&&ee!=="reset"||T.removeAttribute("value"),E!=null?Oc(T,ee,sa(E)):B!=null?Oc(T,ee,sa(B)):N!=null&&T.removeAttribute("value"),z==null&&Q!=null&&(T.defaultChecked=!!Q),z!=null&&(T.checked=z&&typeof z!="function"&&typeof z!="symbol"),ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?T.name=""+sa(ae):T.removeAttribute("name")}function Dp(T,E,B,N,z,Q,ee,ae){if(Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(T.type=Q),E!=null||B!=null){if(!(Q!=="submit"&&Q!=="reset"||E!=null)){Fc(T);return}B=B!=null?""+sa(B):"",E=E!=null?""+sa(E):B,ae||E===T.value||(T.value=E),T.defaultValue=E}N=N??z,N=typeof N!="function"&&typeof N!="symbol"&&!!N,T.checked=ae?T.checked:!!N,T.defaultChecked=!!N,ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"&&(T.name=ee),Fc(T)}function Oc(T,E,B){E==="number"&&nd(T.ownerDocument)===T||T.defaultValue===""+B||(T.defaultValue=""+B)}function yo(T,E,B,N){if(T=T.options,E){E={};for(var z=0;z<B.length;z++)E["$"+B[z]]=!0;for(B=0;B<T.length;B++)z=E.hasOwnProperty("$"+T[B].value),T[B].selected!==z&&(T[B].selected=z),z&&N&&(T[B].defaultSelected=!0)}else{for(B=""+sa(B),E=null,z=0;z<T.length;z++){if(T[z].value===B){T[z].selected=!0,N&&(T[z].defaultSelected=!0);return}E!==null||T[z].disabled||(E=T[z])}E!==null&&(E.selected=!0)}}function Fp(T,E,B){if(E!=null&&(E=""+sa(E),E!==T.value&&(T.value=E),B==null)){T.defaultValue!==E&&(T.defaultValue=E);return}T.defaultValue=B!=null?""+sa(B):""}function Ip(T,E,B,N){if(E==null){if(N!=null){if(B!=null)throw Error(v(92));if(I(N)){if(1<N.length)throw Error(v(93));N=N[0]}B=N}B==null&&(B=""),E=B}B=sa(E),T.defaultValue=B,N=T.textContent,N===B&&N!==""&&N!==null&&(T.value=N),Fc(T)}function xo(T,E){if(E){var B=T.firstChild;if(B&&B===T.lastChild&&B.nodeType===3){B.nodeValue=E;return}}T.textContent=E}var T2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Op(T,E,B){var N=E.indexOf("--")===0;B==null||typeof B=="boolean"||B===""?N?T.setProperty(E,""):E==="float"?T.cssFloat="":T[E]="":N?T.setProperty(E,B):typeof B!="number"||B===0||T2.has(E)?E==="float"?T.cssFloat=B:T[E]=(""+B).trim():T[E]=B+"px"}function Np(T,E,B){if(E!=null&&typeof E!="object")throw Error(v(62));if(T=T.style,B!=null){for(var N in B)!B.hasOwnProperty(N)||E!=null&&E.hasOwnProperty(N)||(N.indexOf("--")===0?T.setProperty(N,""):N==="float"?T.cssFloat="":T[N]="");for(var z in E)N=E[z],E.hasOwnProperty(z)&&B[z]!==N&&Op(T,z,N)}else for(var Q in E)E.hasOwnProperty(Q)&&Op(T,Q,E[Q])}function Nc(T){if(T.indexOf("-")===-1)return!1;switch(T){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),A2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rd(T){return A2.test(""+T)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":T}function $a(){}var Gc=null;function Hc(T){return T=T.target||T.srcElement||window,T.correspondingUseElement&&(T=T.correspondingUseElement),T.nodeType===3?T.parentNode:T}var wo=null,So=null;function Gp(T){var E=go(T);if(E&&(T=E.stateNode)){var B=T[ye]||null;e:switch(T=E.stateNode,E.type){case"input":if(Ic(T,B.value,B.defaultValue,B.defaultValue,B.checked,B.defaultChecked,B.type,B.name),E=B.name,B.type==="radio"&&E!=null){for(B=T;B.parentNode;)B=B.parentNode;for(B=B.querySelectorAll('input[name="'+aa(""+E)+'"][type="radio"]'),E=0;E<B.length;E++){var N=B[E];if(N!==T&&N.form===T.form){var z=N[ye]||null;if(!z)throw Error(v(90));Ic(N,z.value,z.defaultValue,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name)}}for(E=0;E<B.length;E++)N=B[E],N.form===T.form&&Bp(N)}break e;case"textarea":Fp(T,B.value,B.defaultValue);break e;case"select":E=B.value,E!=null&&yo(T,!!B.multiple,E,!1)}}}var kc=!1;function Hp(T,E,B){if(kc)return T(E,B);kc=!0;try{var N=T(E);return N}finally{if(kc=!1,(wo!==null||So!==null)&&(Kd(),wo&&(E=wo,T=So,So=wo=null,Gp(E),T)))for(E=0;E<T.length;E++)Gp(T[E])}}function Gl(T,E){var B=T.stateNode;if(B===null)return null;var N=B[ye]||null;if(N===null)return null;B=N[E];e:switch(E){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(T=T.type,N=!(T==="button"||T==="input"||T==="select"||T==="textarea")),T=!N;break e;default:T=!1}if(T)return null;if(B&&typeof B!="function")throw Error(v(231,E,typeof B));return B}var Qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uc=!1;if(Qa)try{var Hl={};Object.defineProperty(Hl,"passive",{get:function(){Uc=!0}}),window.addEventListener("test",Hl,Hl),window.removeEventListener("test",Hl,Hl)}catch{Uc=!1}var Dn=null,Vc=null,od=null;function kp(){if(od)return od;var T,E=Vc,B=E.length,N,z="value"in Dn?Dn.value:Dn.textContent,Q=z.length;for(T=0;T<B&&E[T]===z[T];T++);var ee=B-T;for(N=1;N<=ee&&E[B-N]===z[Q-N];N++);return od=z.slice(T,1<N?1-N:void 0)}function ld(T){var E=T.keyCode;return"charCode"in T?(T=T.charCode,T===0&&E===13&&(T=13)):T=E,T===10&&(T=13),32<=T||T===13?T:0}function hd(){return!0}function Up(){return!1}function Ps(T){function E(B,N,z,Q,ee){this._reactName=B,this._targetInst=z,this.type=N,this.nativeEvent=Q,this.target=ee,this.currentTarget=null;for(var ae in T)T.hasOwnProperty(ae)&&(B=T[ae],this[ae]=B?B(Q):Q[ae]);return this.isDefaultPrevented=(Q.defaultPrevented!=null?Q.defaultPrevented:Q.returnValue===!1)?hd:Up,this.isPropagationStopped=Up,this}return n(E.prototype,{preventDefault:function(){this.defaultPrevented=!0;var B=this.nativeEvent;B&&(B.preventDefault?B.preventDefault():typeof B.returnValue!="unknown"&&(B.returnValue=!1),this.isDefaultPrevented=hd)},stopPropagation:function(){var B=this.nativeEvent;B&&(B.stopPropagation?B.stopPropagation():typeof B.cancelBubble!="unknown"&&(B.cancelBubble=!0),this.isPropagationStopped=hd)},persist:function(){},isPersistent:hd}),E}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(T){return T.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dd=Ps(Sr),kl=n({},Sr,{view:0,detail:0}),b2=Ps(kl),Yc,Xc,Ul,ud=n({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wc,button:0,buttons:0,relatedTarget:function(T){return T.relatedTarget===void 0?T.fromElement===T.srcElement?T.toElement:T.fromElement:T.relatedTarget},movementX:function(T){return"movementX"in T?T.movementX:(T!==Ul&&(Ul&&T.type==="mousemove"?(Yc=T.screenX-Ul.screenX,Xc=T.screenY-Ul.screenY):Xc=Yc=0,Ul=T),Yc)},movementY:function(T){return"movementY"in T?T.movementY:Xc}}),Vp=Ps(ud),E2=n({},ud,{dataTransfer:0}),M2=Ps(E2),L2=n({},kl,{relatedTarget:0}),zc=Ps(L2),R2=n({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),P2=Ps(R2),B2=n({},Sr,{clipboardData:function(T){return"clipboardData"in T?T.clipboardData:window.clipboardData}}),D2=Ps(B2),F2=n({},Sr,{data:0}),Yp=Ps(F2),I2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function G2(T){var E=this.nativeEvent;return E.getModifierState?E.getModifierState(T):(T=N2[T])?!!E[T]:!1}function Wc(){return G2}var H2=n({},kl,{key:function(T){if(T.key){var E=I2[T.key]||T.key;if(E!=="Unidentified")return E}return T.type==="keypress"?(T=ld(T),T===13?"Enter":String.fromCharCode(T)):T.type==="keydown"||T.type==="keyup"?O2[T.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wc,charCode:function(T){return T.type==="keypress"?ld(T):0},keyCode:function(T){return T.type==="keydown"||T.type==="keyup"?T.keyCode:0},which:function(T){return T.type==="keypress"?ld(T):T.type==="keydown"||T.type==="keyup"?T.keyCode:0}}),k2=Ps(H2),U2=n({},ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xp=Ps(U2),V2=n({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wc}),Y2=Ps(V2),X2=n({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),z2=Ps(X2),W2=n({},ud,{deltaX:function(T){return"deltaX"in T?T.deltaX:"wheelDeltaX"in T?-T.wheelDeltaX:0},deltaY:function(T){return"deltaY"in T?T.deltaY:"wheelDeltaY"in T?-T.wheelDeltaY:"wheelDelta"in T?-T.wheelDelta:0},deltaZ:0,deltaMode:0}),j2=Ps(W2),K2=n({},Sr,{newState:0,oldState:0}),$2=Ps(K2),Q2=[9,13,27,32],jc=Qa&&"CompositionEvent"in window,Vl=null;Qa&&"documentMode"in document&&(Vl=document.documentMode);var J2=Qa&&"TextEvent"in window&&!Vl,zp=Qa&&(!jc||Vl&&8<Vl&&11>=Vl),Wp=" ",jp=!1;function Kp(T,E){switch(T){case"keyup":return Q2.indexOf(E.keyCode)!==-1;case"keydown":return E.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $p(T){return T=T.detail,typeof T=="object"&&"data"in T?T.data:null}var To=!1;function Z2(T,E){switch(T){case"compositionend":return $p(E);case"keypress":return E.which!==32?null:(jp=!0,Wp);case"textInput":return T=E.data,T===Wp&&jp?null:T;default:return null}}function q2(T,E){if(To)return T==="compositionend"||!jc&&Kp(T,E)?(T=kp(),od=Vc=Dn=null,To=!1,T):null;switch(T){case"paste":return null;case"keypress":if(!(E.ctrlKey||E.altKey||E.metaKey)||E.ctrlKey&&E.altKey){if(E.char&&1<E.char.length)return E.char;if(E.which)return String.fromCharCode(E.which)}return null;case"compositionend":return zp&&E.locale!=="ko"?null:E.data;default:return null}}var _2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qp(T){var E=T&&T.nodeName&&T.nodeName.toLowerCase();return E==="input"?!!_2[T.type]:E==="textarea"}function Jp(T,E,B,N){wo?So?So.push(N):So=[N]:wo=N,E=eu(E,"onChange"),0<E.length&&(B=new dd("onChange","change",null,B,N),T.push({event:B,listeners:E}))}var Yl=null,Xl=null;function eT(T){Dy(T,0)}function cd(T){var E=Nl(T);if(Bp(E))return T}function Zp(T,E){if(T==="change")return E}var qp=!1;if(Qa){var Kc;if(Qa){var $c="oninput"in document;if(!$c){var _p=document.createElement("div");_p.setAttribute("oninput","return;"),$c=typeof _p.oninput=="function"}Kc=$c}else Kc=!1;qp=Kc&&(!document.documentMode||9<document.documentMode)}function ev(){Yl&&(Yl.detachEvent("onpropertychange",tv),Xl=Yl=null)}function tv(T){if(T.propertyName==="value"&&cd(Xl)){var E=[];Jp(E,Xl,T,Hc(T)),Hp(eT,E)}}function tT(T,E,B){T==="focusin"?(ev(),Yl=E,Xl=B,Yl.attachEvent("onpropertychange",tv)):T==="focusout"&&ev()}function iT(T){if(T==="selectionchange"||T==="keyup"||T==="keydown")return cd(Xl)}function sT(T,E){if(T==="click")return cd(E)}function aT(T,E){if(T==="input"||T==="change")return cd(E)}function nT(T,E){return T===E&&(T!==0||1/T===1/E)||T!==T&&E!==E}var Xs=typeof Object.is=="function"?Object.is:nT;function zl(T,E){if(Xs(T,E))return!0;if(typeof T!="object"||T===null||typeof E!="object"||E===null)return!1;var B=Object.keys(T),N=Object.keys(E);if(B.length!==N.length)return!1;for(N=0;N<B.length;N++){var z=B[N];if(!Ie.call(E,z)||!Xs(T[z],E[z]))return!1}return!0}function iv(T){for(;T&&T.firstChild;)T=T.firstChild;return T}function sv(T,E){var B=iv(T);T=0;for(var N;B;){if(B.nodeType===3){if(N=T+B.textContent.length,T<=E&&N>=E)return{node:B,offset:E-T};T=N}e:{for(;B;){if(B.nextSibling){B=B.nextSibling;break e}B=B.parentNode}B=void 0}B=iv(B)}}function av(T,E){return T&&E?T===E?!0:T&&T.nodeType===3?!1:E&&E.nodeType===3?av(T,E.parentNode):"contains"in T?T.contains(E):T.compareDocumentPosition?!!(T.compareDocumentPosition(E)&16):!1:!1}function nv(T){T=T!=null&&T.ownerDocument!=null&&T.ownerDocument.defaultView!=null?T.ownerDocument.defaultView:window;for(var E=nd(T.document);E instanceof T.HTMLIFrameElement;){try{var B=typeof E.contentWindow.location.href=="string"}catch{B=!1}if(B)T=E.contentWindow;else break;E=nd(T.document)}return E}function Qc(T){var E=T&&T.nodeName&&T.nodeName.toLowerCase();return E&&(E==="input"&&(T.type==="text"||T.type==="search"||T.type==="tel"||T.type==="url"||T.type==="password")||E==="textarea"||T.contentEditable==="true")}var rT=Qa&&"documentMode"in document&&11>=document.documentMode,Co=null,Jc=null,Wl=null,Zc=!1;function rv(T,E,B){var N=B.window===B?B.document:B.nodeType===9?B:B.ownerDocument;Zc||Co==null||Co!==nd(N)||(N=Co,"selectionStart"in N&&Qc(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),Wl&&zl(Wl,N)||(Wl=N,N=eu(Jc,"onSelect"),0<N.length&&(E=new dd("onSelect","select",null,E,B),T.push({event:E,listeners:N}),E.target=Co)))}function Tr(T,E){var B={};return B[T.toLowerCase()]=E.toLowerCase(),B["Webkit"+T]="webkit"+E,B["Moz"+T]="moz"+E,B}var Ao={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionrun:Tr("Transition","TransitionRun"),transitionstart:Tr("Transition","TransitionStart"),transitioncancel:Tr("Transition","TransitionCancel"),transitionend:Tr("Transition","TransitionEnd")},qc={},ov={};Qa&&(ov=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Cr(T){if(qc[T])return qc[T];if(!Ao[T])return T;var E=Ao[T],B;for(B in E)if(E.hasOwnProperty(B)&&B in ov)return qc[T]=E[B];return T}var lv=Cr("animationend"),hv=Cr("animationiteration"),dv=Cr("animationstart"),oT=Cr("transitionrun"),lT=Cr("transitionstart"),hT=Cr("transitioncancel"),uv=Cr("transitionend"),cv=new Map,_c="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_c.push("scrollEnd");function ya(T,E){cv.set(T,E),wr(E,[T])}var fd=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},na=[],bo=0,ef=0;function md(){for(var T=bo,E=ef=bo=0;E<T;){var B=na[E];na[E++]=null;var N=na[E];na[E++]=null;var z=na[E];na[E++]=null;var Q=na[E];if(na[E++]=null,N!==null&&z!==null){var ee=N.pending;ee===null?z.next=z:(z.next=ee.next,ee.next=z),N.pending=z}Q!==0&&fv(B,z,Q)}}function gd(T,E,B,N){na[bo++]=T,na[bo++]=E,na[bo++]=B,na[bo++]=N,ef|=N,T.lanes|=N,T=T.alternate,T!==null&&(T.lanes|=N)}function tf(T,E,B,N){return gd(T,E,B,N),pd(T)}function Ar(T,E){return gd(T,null,null,E),pd(T)}function fv(T,E,B){T.lanes|=B;var N=T.alternate;N!==null&&(N.lanes|=B);for(var z=!1,Q=T.return;Q!==null;)Q.childLanes|=B,N=Q.alternate,N!==null&&(N.childLanes|=B),Q.tag===22&&(T=Q.stateNode,T===null||T._visibility&1||(z=!0)),T=Q,Q=Q.return;return T.tag===3?(Q=T.stateNode,z&&E!==null&&(z=31-Di(B),T=Q.hiddenUpdates,N=T[z],N===null?T[z]=[E]:N.push(E),E.lane=B|536870912),Q):null}function pd(T){if(50<fh)throw fh=0,um=null,Error(v(185));for(var E=T.return;E!==null;)T=E,E=T.return;return T.tag===3?T.stateNode:null}var Eo={};function dT(T,E,B,N){this.tag=T,this.key=B,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(T,E,B,N){return new dT(T,E,B,N)}function sf(T){return T=T.prototype,!(!T||!T.isReactComponent)}function Ja(T,E){var B=T.alternate;return B===null?(B=zs(T.tag,E,T.key,T.mode),B.elementType=T.elementType,B.type=T.type,B.stateNode=T.stateNode,B.alternate=T,T.alternate=B):(B.pendingProps=E,B.type=T.type,B.flags=0,B.subtreeFlags=0,B.deletions=null),B.flags=T.flags&65011712,B.childLanes=T.childLanes,B.lanes=T.lanes,B.child=T.child,B.memoizedProps=T.memoizedProps,B.memoizedState=T.memoizedState,B.updateQueue=T.updateQueue,E=T.dependencies,B.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},B.sibling=T.sibling,B.index=T.index,B.ref=T.ref,B.refCleanup=T.refCleanup,B}function mv(T,E){T.flags&=65011714;var B=T.alternate;return B===null?(T.childLanes=0,T.lanes=E,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=B.childLanes,T.lanes=B.lanes,T.child=B.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=B.memoizedProps,T.memoizedState=B.memoizedState,T.updateQueue=B.updateQueue,T.type=B.type,E=B.dependencies,T.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),T}function vd(T,E,B,N,z,Q){var ee=0;if(N=T,typeof T=="function")sf(T)&&(ee=1);else if(typeof T=="string")ee=gC(T,B,j.current)?26:T==="html"||T==="head"||T==="body"?27:5;else e:switch(T){case A:return T=zs(31,B,E,z),T.elementType=A,T.lanes=Q,T;case o:return br(B.children,z,Q,E);case d:ee=8,z|=24;break;case l:return T=zs(12,B,E,z|2),T.elementType=l,T.lanes=Q,T;case p:return T=zs(13,B,E,z),T.elementType=p,T.lanes=Q,T;case y:return T=zs(19,B,E,z),T.elementType=y,T.lanes=Q,T;default:if(typeof T=="object"&&T!==null)switch(T.$$typeof){case m:ee=10;break e;case f:ee=9;break e;case g:ee=11;break e;case S:ee=14;break e;case C:ee=16,N=null;break e}ee=29,B=Error(v(130,T===null?"null":typeof T,"")),N=null}return E=zs(ee,B,E,z),E.elementType=T,E.type=N,E.lanes=Q,E}function br(T,E,B,N){return T=zs(7,T,N,E),T.lanes=B,T}function af(T,E,B){return T=zs(6,T,null,E),T.lanes=B,T}function gv(T){var E=zs(18,null,null,0);return E.stateNode=T,E}function nf(T,E,B){return E=zs(4,T.children!==null?T.children:[],T.key,E),E.lanes=B,E.stateNode={containerInfo:T.containerInfo,pendingChildren:null,implementation:T.implementation},E}var pv=new WeakMap;function ra(T,E){if(typeof T=="object"&&T!==null){var B=pv.get(T);return B!==void 0?B:(E={value:T,source:E,stack:Ae(E)},pv.set(T,E),E)}return{value:T,source:E,stack:Ae(E)}}var Mo=[],Lo=0,yd=null,jl=0,oa=[],la=0,Fn=null,Da=1,Fa="";function Za(T,E){Mo[Lo++]=jl,Mo[Lo++]=yd,yd=T,jl=E}function vv(T,E,B){oa[la++]=Da,oa[la++]=Fa,oa[la++]=Fn,Fn=T;var N=Da;T=Fa;var z=32-Di(N)-1;N&=~(1<<z),B+=1;var Q=32-Di(E)+z;if(30<Q){var ee=z-z%5;Q=(N&(1<<ee)-1).toString(32),N>>=ee,z-=ee,Da=1<<32-Di(E)+z|B<<z|N,Fa=Q+T}else Da=1<<Q|B<<z|N,Fa=T}function rf(T){T.return!==null&&(Za(T,1),vv(T,1,0))}function of(T){for(;T===yd;)yd=Mo[--Lo],Mo[Lo]=null,jl=Mo[--Lo],Mo[Lo]=null;for(;T===Fn;)Fn=oa[--la],oa[la]=null,Fa=oa[--la],oa[la]=null,Da=oa[--la],oa[la]=null}function yv(T,E){oa[la++]=Da,oa[la++]=Fa,oa[la++]=Fn,Da=E.id,Fa=E.overflow,Fn=T}var ns=null,Ei=null,ai=!1,In=null,ha=!1,lf=Error(v(519));function On(T){var E=Error(v(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kl(ra(E,T)),lf}function xv(T){var E=T.stateNode,B=T.type,N=T.memoizedProps;switch(E[ki]=T,E[ye]=N,B){case"dialog":Zt("cancel",E),Zt("close",E);break;case"iframe":case"object":case"embed":Zt("load",E);break;case"video":case"audio":for(B=0;B<gh.length;B++)Zt(gh[B],E);break;case"source":Zt("error",E);break;case"img":case"image":case"link":Zt("error",E),Zt("load",E);break;case"details":Zt("toggle",E);break;case"input":Zt("invalid",E),Dp(E,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0);break;case"select":Zt("invalid",E);break;case"textarea":Zt("invalid",E),Ip(E,N.value,N.defaultValue,N.children)}B=N.children,typeof B!="string"&&typeof B!="number"&&typeof B!="bigint"||E.textContent===""+B||N.suppressHydrationWarning===!0||Ny(E.textContent,B)?(N.popover!=null&&(Zt("beforetoggle",E),Zt("toggle",E)),N.onScroll!=null&&Zt("scroll",E),N.onScrollEnd!=null&&Zt("scrollend",E),N.onClick!=null&&(E.onclick=$a),E=!0):E=!1,E||On(T,!0)}function wv(T){for(ns=T.return;ns;)switch(ns.tag){case 5:case 31:case 13:ha=!1;return;case 27:case 3:ha=!0;return;default:ns=ns.return}}function Ro(T){if(T!==ns)return!1;if(!ai)return wv(T),ai=!0,!1;var E=T.tag,B;if((B=E!==3&&E!==27)&&((B=E===5)&&(B=T.type,B=!(B!=="form"&&B!=="button")||Em(T.type,T.memoizedProps)),B=!B),B&&Ei&&On(T),wv(T),E===13){if(T=T.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(v(317));Ei=Wy(T)}else if(E===31){if(T=T.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(v(317));Ei=Wy(T)}else E===27?(E=Ei,Qn(T.type)?(T=Bm,Bm=null,Ei=T):Ei=E):Ei=ns?ua(T.stateNode.nextSibling):null;return!0}function Er(){Ei=ns=null,ai=!1}function hf(){var T=In;return T!==null&&(Is===null?Is=T:Is.push.apply(Is,T),In=null),T}function Kl(T){In===null?In=[T]:In.push(T)}var df=K(null),Mr=null,qa=null;function Nn(T,E,B){X(df,E._currentValue),E._currentValue=B}function _a(T){T._currentValue=df.current,Z(df)}function uf(T,E,B){for(;T!==null;){var N=T.alternate;if((T.childLanes&E)!==E?(T.childLanes|=E,N!==null&&(N.childLanes|=E)):N!==null&&(N.childLanes&E)!==E&&(N.childLanes|=E),T===B)break;T=T.return}}function cf(T,E,B,N){var z=T.child;for(z!==null&&(z.return=T);z!==null;){var Q=z.dependencies;if(Q!==null){var ee=z.child;Q=Q.firstContext;e:for(;Q!==null;){var ae=Q;Q=z;for(var oe=0;oe<E.length;oe++)if(ae.context===E[oe]){Q.lanes|=B,ae=Q.alternate,ae!==null&&(ae.lanes|=B),uf(Q.return,B,T),N||(ee=null);break e}Q=ae.next}}else if(z.tag===18){if(ee=z.return,ee===null)throw Error(v(341));ee.lanes|=B,Q=ee.alternate,Q!==null&&(Q.lanes|=B),uf(ee,B,T),ee=null}else ee=z.child;if(ee!==null)ee.return=z;else for(ee=z;ee!==null;){if(ee===T){ee=null;break}if(z=ee.sibling,z!==null){z.return=ee.return,ee=z;break}ee=ee.return}z=ee}}function Po(T,E,B,N){T=null;for(var z=E,Q=!1;z!==null;){if(!Q){if(z.flags&524288)Q=!0;else if(z.flags&262144)break}if(z.tag===10){var ee=z.alternate;if(ee===null)throw Error(v(387));if(ee=ee.memoizedProps,ee!==null){var ae=z.type;Xs(z.pendingProps.value,ee.value)||(T!==null?T.push(ae):T=[ae])}}else if(z===J.current){if(ee=z.alternate,ee===null)throw Error(v(387));ee.memoizedState.memoizedState!==z.memoizedState.memoizedState&&(T!==null?T.push(wh):T=[wh])}z=z.return}T!==null&&cf(E,T,B,N),E.flags|=262144}function xd(T){for(T=T.firstContext;T!==null;){if(!Xs(T.context._currentValue,T.memoizedValue))return!0;T=T.next}return!1}function Lr(T){Mr=T,qa=null,T=T.dependencies,T!==null&&(T.firstContext=null)}function rs(T){return Sv(Mr,T)}function wd(T,E){return Mr===null&&Lr(T),Sv(T,E)}function Sv(T,E){var B=E._currentValue;if(E={context:E,memoizedValue:B,next:null},qa===null){if(T===null)throw Error(v(308));qa=E,T.dependencies={lanes:0,firstContext:E},T.flags|=524288}else qa=qa.next=E;return B}var uT=typeof AbortController<"u"?AbortController:function(){var T=[],E=this.signal={aborted:!1,addEventListener:function(B,N){T.push(N)}};this.abort=function(){E.aborted=!0,T.forEach(function(B){return B()})}},cT=R.unstable_scheduleCallback,fT=R.unstable_NormalPriority,zi={$$typeof:m,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ff(){return{controller:new uT,data:new Map,refCount:0}}function $l(T){T.refCount--,T.refCount===0&&cT(fT,function(){T.controller.abort()})}var Ql=null,mf=0,Bo=0,Do=null;function mT(T,E){if(Ql===null){var B=Ql=[];mf=0,Bo=vm(),Do={status:"pending",value:void 0,then:function(N){B.push(N)}}}return mf++,E.then(Tv,Tv),E}function Tv(){if(--mf===0&&Ql!==null){Do!==null&&(Do.status="fulfilled");var T=Ql;Ql=null,Bo=0,Do=null;for(var E=0;E<T.length;E++)(0,T[E])()}}function gT(T,E){var B=[],N={status:"pending",value:null,reason:null,then:function(z){B.push(z)}};return T.then(function(){N.status="fulfilled",N.value=E;for(var z=0;z<B.length;z++)(0,B[z])(E)},function(z){for(N.status="rejected",N.reason=z,z=0;z<B.length;z++)(0,B[z])(void 0)}),N}var Cv=F.S;F.S=function(T,E){ry=Be(),typeof E=="object"&&E!==null&&typeof E.then=="function"&&mT(T,E),Cv!==null&&Cv(T,E)};var Rr=K(null);function gf(){var T=Rr.current;return T!==null?T:Ti.pooledCache}function Sd(T,E){E===null?X(Rr,Rr.current):X(Rr,E.pool)}function Av(){var T=gf();return T===null?null:{parent:zi._currentValue,pool:T}}var Fo=Error(v(460)),pf=Error(v(474)),Td=Error(v(542)),Cd={then:function(){}};function bv(T){return T=T.status,T==="fulfilled"||T==="rejected"}function Ev(T,E,B){switch(B=T[B],B===void 0?T.push(E):B!==E&&(E.then($a,$a),E=B),E.status){case"fulfilled":return E.value;case"rejected":throw T=E.reason,Lv(T),T;default:if(typeof E.status=="string")E.then($a,$a);else{if(T=Ti,T!==null&&100<T.shellSuspendCounter)throw Error(v(482));T=E,T.status="pending",T.then(function(N){if(E.status==="pending"){var z=E;z.status="fulfilled",z.value=N}},function(N){if(E.status==="pending"){var z=E;z.status="rejected",z.reason=N}})}switch(E.status){case"fulfilled":return E.value;case"rejected":throw T=E.reason,Lv(T),T}throw Br=E,Fo}}function Pr(T){try{var E=T._init;return E(T._payload)}catch(B){throw B!==null&&typeof B=="object"&&typeof B.then=="function"?(Br=B,Fo):B}}var Br=null;function Mv(){if(Br===null)throw Error(v(459));var T=Br;return Br=null,T}function Lv(T){if(T===Fo||T===Td)throw Error(v(483))}var Io=null,Jl=0;function Ad(T){var E=Jl;return Jl+=1,Io===null&&(Io=[]),Ev(Io,T,E)}function Zl(T,E){E=E.props.ref,T.ref=E!==void 0?E:null}function bd(T,E){throw E.$$typeof===r?Error(v(525)):(T=Object.prototype.toString.call(E),Error(v(31,T==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":T)))}function Rv(T){function E(pe,de){if(T){var xe=pe.deletions;xe===null?(pe.deletions=[de],pe.flags|=16):xe.push(de)}}function B(pe,de){if(!T)return null;for(;de!==null;)E(pe,de),de=de.sibling;return null}function N(pe){for(var de=new Map;pe!==null;)pe.key!==null?de.set(pe.key,pe):de.set(pe.index,pe),pe=pe.sibling;return de}function z(pe,de){return pe=Ja(pe,de),pe.index=0,pe.sibling=null,pe}function Q(pe,de,xe){return pe.index=xe,T?(xe=pe.alternate,xe!==null?(xe=xe.index,xe<de?(pe.flags|=67108866,de):xe):(pe.flags|=67108866,de)):(pe.flags|=1048576,de)}function ee(pe){return T&&pe.alternate===null&&(pe.flags|=67108866),pe}function ae(pe,de,xe,Le){return de===null||de.tag!==6?(de=af(xe,pe.mode,Le),de.return=pe,de):(de=z(de,xe),de.return=pe,de)}function oe(pe,de,xe,Le){var Mt=xe.type;return Mt===o?Ee(pe,de,xe.props.children,Le,xe.key):de!==null&&(de.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===C&&Pr(Mt)===de.type)?(de=z(de,xe.props),Zl(de,xe),de.return=pe,de):(de=vd(xe.type,xe.key,xe.props,null,pe.mode,Le),Zl(de,xe),de.return=pe,de)}function we(pe,de,xe,Le){return de===null||de.tag!==4||de.stateNode.containerInfo!==xe.containerInfo||de.stateNode.implementation!==xe.implementation?(de=nf(xe,pe.mode,Le),de.return=pe,de):(de=z(de,xe.children||[]),de.return=pe,de)}function Ee(pe,de,xe,Le,Mt){return de===null||de.tag!==7?(de=br(xe,pe.mode,Le,Mt),de.return=pe,de):(de=z(de,xe),de.return=pe,de)}function Re(pe,de,xe){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return de=af(""+de,pe.mode,xe),de.return=pe,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case a:return xe=vd(de.type,de.key,de.props,null,pe.mode,xe),Zl(xe,de),xe.return=pe,xe;case s:return de=nf(de,pe.mode,xe),de.return=pe,de;case C:return de=Pr(de),Re(pe,de,xe)}if(I(de)||P(de))return de=br(de,pe.mode,xe,null),de.return=pe,de;if(typeof de.then=="function")return Re(pe,Ad(de),xe);if(de.$$typeof===m)return Re(pe,wd(pe,de),xe);bd(pe,de)}return null}function Ce(pe,de,xe,Le){var Mt=de!==null?de.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return Mt!==null?null:ae(pe,de,""+xe,Le);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case a:return xe.key===Mt?oe(pe,de,xe,Le):null;case s:return xe.key===Mt?we(pe,de,xe,Le):null;case C:return xe=Pr(xe),Ce(pe,de,xe,Le)}if(I(xe)||P(xe))return Mt!==null?null:Ee(pe,de,xe,Le,null);if(typeof xe.then=="function")return Ce(pe,de,Ad(xe),Le);if(xe.$$typeof===m)return Ce(pe,de,wd(pe,xe),Le);bd(pe,xe)}return null}function be(pe,de,xe,Le,Mt){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return pe=pe.get(xe)||null,ae(de,pe,""+Le,Mt);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case a:return pe=pe.get(Le.key===null?xe:Le.key)||null,oe(de,pe,Le,Mt);case s:return pe=pe.get(Le.key===null?xe:Le.key)||null,we(de,pe,Le,Mt);case C:return Le=Pr(Le),be(pe,de,xe,Le,Mt)}if(I(Le)||P(Le))return pe=pe.get(xe)||null,Ee(de,pe,Le,Mt,null);if(typeof Le.then=="function")return be(pe,de,xe,Ad(Le),Mt);if(Le.$$typeof===m)return be(pe,de,xe,wd(de,Le),Mt);bd(de,Le)}return null}function ze(pe,de,xe,Le){for(var Mt=null,di=null,We=de,Xt=de=0,ei=null;We!==null&&Xt<xe.length;Xt++){We.index>Xt?(ei=We,We=null):ei=We.sibling;var ui=Ce(pe,We,xe[Xt],Le);if(ui===null){We===null&&(We=ei);break}T&&We&&ui.alternate===null&&E(pe,We),de=Q(ui,de,Xt),di===null?Mt=ui:di.sibling=ui,di=ui,We=ei}if(Xt===xe.length)return B(pe,We),ai&&Za(pe,Xt),Mt;if(We===null){for(;Xt<xe.length;Xt++)We=Re(pe,xe[Xt],Le),We!==null&&(de=Q(We,de,Xt),di===null?Mt=We:di.sibling=We,di=We);return ai&&Za(pe,Xt),Mt}for(We=N(We);Xt<xe.length;Xt++)ei=be(We,pe,Xt,xe[Xt],Le),ei!==null&&(T&&ei.alternate!==null&&We.delete(ei.key===null?Xt:ei.key),de=Q(ei,de,Xt),di===null?Mt=ei:di.sibling=ei,di=ei);return T&&We.forEach(function(er){return E(pe,er)}),ai&&Za(pe,Xt),Mt}function Dt(pe,de,xe,Le){if(xe==null)throw Error(v(151));for(var Mt=null,di=null,We=de,Xt=de=0,ei=null,ui=xe.next();We!==null&&!ui.done;Xt++,ui=xe.next()){We.index>Xt?(ei=We,We=null):ei=We.sibling;var er=Ce(pe,We,ui.value,Le);if(er===null){We===null&&(We=ei);break}T&&We&&er.alternate===null&&E(pe,We),de=Q(er,de,Xt),di===null?Mt=er:di.sibling=er,di=er,We=ei}if(ui.done)return B(pe,We),ai&&Za(pe,Xt),Mt;if(We===null){for(;!ui.done;Xt++,ui=xe.next())ui=Re(pe,ui.value,Le),ui!==null&&(de=Q(ui,de,Xt),di===null?Mt=ui:di.sibling=ui,di=ui);return ai&&Za(pe,Xt),Mt}for(We=N(We);!ui.done;Xt++,ui=xe.next())ui=be(We,pe,Xt,ui.value,Le),ui!==null&&(T&&ui.alternate!==null&&We.delete(ui.key===null?Xt:ui.key),de=Q(ui,de,Xt),di===null?Mt=ui:di.sibling=ui,di=ui);return T&&We.forEach(function(EC){return E(pe,EC)}),ai&&Za(pe,Xt),Mt}function wi(pe,de,xe,Le){if(typeof xe=="object"&&xe!==null&&xe.type===o&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case a:e:{for(var Mt=xe.key;de!==null;){if(de.key===Mt){if(Mt=xe.type,Mt===o){if(de.tag===7){B(pe,de.sibling),Le=z(de,xe.props.children),Le.return=pe,pe=Le;break e}}else if(de.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===C&&Pr(Mt)===de.type){B(pe,de.sibling),Le=z(de,xe.props),Zl(Le,xe),Le.return=pe,pe=Le;break e}B(pe,de);break}else E(pe,de);de=de.sibling}xe.type===o?(Le=br(xe.props.children,pe.mode,Le,xe.key),Le.return=pe,pe=Le):(Le=vd(xe.type,xe.key,xe.props,null,pe.mode,Le),Zl(Le,xe),Le.return=pe,pe=Le)}return ee(pe);case s:e:{for(Mt=xe.key;de!==null;){if(de.key===Mt)if(de.tag===4&&de.stateNode.containerInfo===xe.containerInfo&&de.stateNode.implementation===xe.implementation){B(pe,de.sibling),Le=z(de,xe.children||[]),Le.return=pe,pe=Le;break e}else{B(pe,de);break}else E(pe,de);de=de.sibling}Le=nf(xe,pe.mode,Le),Le.return=pe,pe=Le}return ee(pe);case C:return xe=Pr(xe),wi(pe,de,xe,Le)}if(I(xe))return ze(pe,de,xe,Le);if(P(xe)){if(Mt=P(xe),typeof Mt!="function")throw Error(v(150));return xe=Mt.call(xe),Dt(pe,de,xe,Le)}if(typeof xe.then=="function")return wi(pe,de,Ad(xe),Le);if(xe.$$typeof===m)return wi(pe,de,wd(pe,xe),Le);bd(pe,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint"?(xe=""+xe,de!==null&&de.tag===6?(B(pe,de.sibling),Le=z(de,xe),Le.return=pe,pe=Le):(B(pe,de),Le=af(xe,pe.mode,Le),Le.return=pe,pe=Le),ee(pe)):B(pe,de)}return function(pe,de,xe,Le){try{Jl=0;var Mt=wi(pe,de,xe,Le);return Io=null,Mt}catch(We){if(We===Fo||We===Td)throw We;var di=zs(29,We,null,pe.mode);return di.lanes=Le,di.return=pe,di}finally{}}}var Dr=Rv(!0),Pv=Rv(!1),Gn=!1;function vf(T){T.updateQueue={baseState:T.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yf(T,E){T=T.updateQueue,E.updateQueue===T&&(E.updateQueue={baseState:T.baseState,firstBaseUpdate:T.firstBaseUpdate,lastBaseUpdate:T.lastBaseUpdate,shared:T.shared,callbacks:null})}function Hn(T){return{lane:T,tag:0,payload:null,callback:null,next:null}}function kn(T,E,B){var N=T.updateQueue;if(N===null)return null;if(N=N.shared,mi&2){var z=N.pending;return z===null?E.next=E:(E.next=z.next,z.next=E),N.pending=E,E=pd(T),fv(T,null,B),E}return gd(T,N,E,B),pd(T)}function ql(T,E,B){if(E=E.updateQueue,E!==null&&(E=E.shared,(B&4194048)!==0)){var N=E.lanes;N&=T.pendingLanes,B|=N,E.lanes=B,id(T,B)}}function xf(T,E){var B=T.updateQueue,N=T.alternate;if(N!==null&&(N=N.updateQueue,B===N)){var z=null,Q=null;if(B=B.firstBaseUpdate,B!==null){do{var ee={lane:B.lane,tag:B.tag,payload:B.payload,callback:null,next:null};Q===null?z=Q=ee:Q=Q.next=ee,B=B.next}while(B!==null);Q===null?z=Q=E:Q=Q.next=E}else z=Q=E;B={baseState:N.baseState,firstBaseUpdate:z,lastBaseUpdate:Q,shared:N.shared,callbacks:N.callbacks},T.updateQueue=B;return}T=B.lastBaseUpdate,T===null?B.firstBaseUpdate=E:T.next=E,B.lastBaseUpdate=E}var wf=!1;function _l(){if(wf){var T=Do;if(T!==null)throw T}}function eh(T,E,B,N){wf=!1;var z=T.updateQueue;Gn=!1;var Q=z.firstBaseUpdate,ee=z.lastBaseUpdate,ae=z.shared.pending;if(ae!==null){z.shared.pending=null;var oe=ae,we=oe.next;oe.next=null,ee===null?Q=we:ee.next=we,ee=oe;var Ee=T.alternate;Ee!==null&&(Ee=Ee.updateQueue,ae=Ee.lastBaseUpdate,ae!==ee&&(ae===null?Ee.firstBaseUpdate=we:ae.next=we,Ee.lastBaseUpdate=oe))}if(Q!==null){var Re=z.baseState;ee=0,Ee=we=oe=null,ae=Q;do{var Ce=ae.lane&-536870913,be=Ce!==ae.lane;if(be?(_t&Ce)===Ce:(N&Ce)===Ce){Ce!==0&&Ce===Bo&&(wf=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:ae.tag,payload:ae.payload,callback:null,next:null});e:{var ze=T,Dt=ae;Ce=E;var wi=B;switch(Dt.tag){case 1:if(ze=Dt.payload,typeof ze=="function"){Re=ze.call(wi,Re,Ce);break e}Re=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Dt.payload,Ce=typeof ze=="function"?ze.call(wi,Re,Ce):ze,Ce==null)break e;Re=n({},Re,Ce);break e;case 2:Gn=!0}}Ce=ae.callback,Ce!==null&&(T.flags|=64,be&&(T.flags|=8192),be=z.callbacks,be===null?z.callbacks=[Ce]:be.push(Ce))}else be={lane:Ce,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},Ee===null?(we=Ee=be,oe=Re):Ee=Ee.next=be,ee|=Ce;if(ae=ae.next,ae===null){if(ae=z.shared.pending,ae===null)break;be=ae,ae=be.next,be.next=null,z.lastBaseUpdate=be,z.shared.pending=null}}while(!0);Ee===null&&(oe=Re),z.baseState=oe,z.firstBaseUpdate=we,z.lastBaseUpdate=Ee,Q===null&&(z.shared.lanes=0),zn|=ee,T.lanes=ee,T.memoizedState=Re}}function Bv(T,E){if(typeof T!="function")throw Error(v(191,T));T.call(E)}function Dv(T,E){var B=T.callbacks;if(B!==null)for(T.callbacks=null,T=0;T<B.length;T++)Bv(B[T],E)}var Oo=K(null),Ed=K(0);function Fv(T,E){T=hn,X(Ed,T),X(Oo,E),hn=T|E.baseLanes}function Sf(){X(Ed,hn),X(Oo,Oo.current)}function Tf(){hn=Ed.current,Z(Oo),Z(Ed)}var Ws=K(null),da=null;function Un(T){var E=T.alternate;X(Ui,Ui.current&1),X(Ws,T),da===null&&(E===null||Oo.current!==null||E.memoizedState!==null)&&(da=T)}function Cf(T){X(Ui,Ui.current),X(Ws,T),da===null&&(da=T)}function Iv(T){T.tag===22?(X(Ui,Ui.current),X(Ws,T),da===null&&(da=T)):Vn()}function Vn(){X(Ui,Ui.current),X(Ws,Ws.current)}function js(T){Z(Ws),da===T&&(da=null),Z(Ui)}var Ui=K(0);function Md(T){for(var E=T;E!==null;){if(E.tag===13){var B=E.memoizedState;if(B!==null&&(B=B.dehydrated,B===null||Rm(B)||Pm(B)))return E}else if(E.tag===19&&(E.memoizedProps.revealOrder==="forwards"||E.memoizedProps.revealOrder==="backwards"||E.memoizedProps.revealOrder==="unstable_legacy-backwards"||E.memoizedProps.revealOrder==="together")){if(E.flags&128)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===T)break;for(;E.sibling===null;){if(E.return===null||E.return===T)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var en=0,Yt=null,yi=null,Wi=null,Ld=!1,No=!1,Fr=!1,Rd=0,th=0,Go=null,pT=0;function Oi(){throw Error(v(321))}function Af(T,E){if(E===null)return!1;for(var B=0;B<E.length&&B<T.length;B++)if(!Xs(T[B],E[B]))return!1;return!0}function bf(T,E,B,N,z,Q){return en=Q,Yt=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,F.H=T===null||T.memoizedState===null?v0:Uf,Fr=!1,Q=B(N,z),Fr=!1,No&&(Q=Nv(E,B,N,z)),Ov(T),Q}function Ov(T){F.H=ah;var E=yi!==null&&yi.next!==null;if(en=0,Wi=yi=Yt=null,Ld=!1,th=0,Go=null,E)throw Error(v(300));T===null||ji||(T=T.dependencies,T!==null&&xd(T)&&(ji=!0))}function Nv(T,E,B,N){Yt=T;var z=0;do{if(No&&(Go=null),th=0,No=!1,25<=z)throw Error(v(301));if(z+=1,Wi=yi=null,T.updateQueue!=null){var Q=T.updateQueue;Q.lastEffect=null,Q.events=null,Q.stores=null,Q.memoCache!=null&&(Q.memoCache.index=0)}F.H=y0,Q=E(B,N)}while(No);return Q}function vT(){var T=F.H,E=T.useState()[0];return E=typeof E.then=="function"?ih(E):E,T=T.useState()[0],(yi!==null?yi.memoizedState:null)!==T&&(Yt.flags|=1024),E}function Ef(){var T=Rd!==0;return Rd=0,T}function Mf(T,E,B){E.updateQueue=T.updateQueue,E.flags&=-2053,T.lanes&=~B}function Lf(T){if(Ld){for(T=T.memoizedState;T!==null;){var E=T.queue;E!==null&&(E.pending=null),T=T.next}Ld=!1}en=0,Wi=yi=Yt=null,No=!1,th=Rd=0,Go=null}function Ts(){var T={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wi===null?Yt.memoizedState=Wi=T:Wi=Wi.next=T,Wi}function Vi(){if(yi===null){var T=Yt.alternate;T=T!==null?T.memoizedState:null}else T=yi.next;var E=Wi===null?Yt.memoizedState:Wi.next;if(E!==null)Wi=E,yi=T;else{if(T===null)throw Yt.alternate===null?Error(v(467)):Error(v(310));yi=T,T={memoizedState:yi.memoizedState,baseState:yi.baseState,baseQueue:yi.baseQueue,queue:yi.queue,next:null},Wi===null?Yt.memoizedState=Wi=T:Wi=Wi.next=T}return Wi}function Pd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ih(T){var E=th;return th+=1,Go===null&&(Go=[]),T=Ev(Go,T,E),E=Yt,(Wi===null?E.memoizedState:Wi.next)===null&&(E=E.alternate,F.H=E===null||E.memoizedState===null?v0:Uf),T}function Bd(T){if(T!==null&&typeof T=="object"){if(typeof T.then=="function")return ih(T);if(T.$$typeof===m)return rs(T)}throw Error(v(438,String(T)))}function Rf(T){var E=null,B=Yt.updateQueue;if(B!==null&&(E=B.memoCache),E==null){var N=Yt.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(E={data:N.data.map(function(z){return z.slice()}),index:0})))}if(E==null&&(E={data:[],index:0}),B===null&&(B=Pd(),Yt.updateQueue=B),B.memoCache=E,B=E.data[E.index],B===void 0)for(B=E.data[E.index]=Array(T),N=0;N<T;N++)B[N]=M;return E.index++,B}function tn(T,E){return typeof E=="function"?E(T):E}function Dd(T){var E=Vi();return Pf(E,yi,T)}function Pf(T,E,B){var N=T.queue;if(N===null)throw Error(v(311));N.lastRenderedReducer=B;var z=T.baseQueue,Q=N.pending;if(Q!==null){if(z!==null){var ee=z.next;z.next=Q.next,Q.next=ee}E.baseQueue=z=Q,N.pending=null}if(Q=T.baseState,z===null)T.memoizedState=Q;else{E=z.next;var ae=ee=null,oe=null,we=E,Ee=!1;do{var Re=we.lane&-536870913;if(Re!==we.lane?(_t&Re)===Re:(en&Re)===Re){var Ce=we.revertLane;if(Ce===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,gesture:null,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),Re===Bo&&(Ee=!0);else if((en&Ce)===Ce){we=we.next,Ce===Bo&&(Ee=!0);continue}else Re={lane:0,revertLane:we.revertLane,gesture:null,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},oe===null?(ae=oe=Re,ee=Q):oe=oe.next=Re,Yt.lanes|=Ce,zn|=Ce;Re=we.action,Fr&&B(Q,Re),Q=we.hasEagerState?we.eagerState:B(Q,Re)}else Ce={lane:Re,revertLane:we.revertLane,gesture:we.gesture,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},oe===null?(ae=oe=Ce,ee=Q):oe=oe.next=Ce,Yt.lanes|=Re,zn|=Re;we=we.next}while(we!==null&&we!==E);if(oe===null?ee=Q:oe.next=ae,!Xs(Q,T.memoizedState)&&(ji=!0,Ee&&(B=Do,B!==null)))throw B;T.memoizedState=Q,T.baseState=ee,T.baseQueue=oe,N.lastRenderedState=Q}return z===null&&(N.lanes=0),[T.memoizedState,N.dispatch]}function Bf(T){var E=Vi(),B=E.queue;if(B===null)throw Error(v(311));B.lastRenderedReducer=T;var N=B.dispatch,z=B.pending,Q=E.memoizedState;if(z!==null){B.pending=null;var ee=z=z.next;do Q=T(Q,ee.action),ee=ee.next;while(ee!==z);Xs(Q,E.memoizedState)||(ji=!0),E.memoizedState=Q,E.baseQueue===null&&(E.baseState=Q),B.lastRenderedState=Q}return[Q,N]}function Gv(T,E,B){var N=Yt,z=Vi(),Q=ai;if(Q){if(B===void 0)throw Error(v(407));B=B()}else B=E();var ee=!Xs((yi||z).memoizedState,B);if(ee&&(z.memoizedState=B,ji=!0),z=z.queue,If(Uv.bind(null,N,z,T),[T]),z.getSnapshot!==E||ee||Wi!==null&&Wi.memoizedState.tag&1){if(N.flags|=2048,Ho(9,{destroy:void 0},kv.bind(null,N,z,B,E),null),Ti===null)throw Error(v(349));Q||en&127||Hv(N,E,B)}return B}function Hv(T,E,B){T.flags|=16384,T={getSnapshot:E,value:B},E=Yt.updateQueue,E===null?(E=Pd(),Yt.updateQueue=E,E.stores=[T]):(B=E.stores,B===null?E.stores=[T]:B.push(T))}function kv(T,E,B,N){E.value=B,E.getSnapshot=N,Vv(E)&&Yv(T)}function Uv(T,E,B){return B(function(){Vv(E)&&Yv(T)})}function Vv(T){var E=T.getSnapshot;T=T.value;try{var B=E();return!Xs(T,B)}catch{return!0}}function Yv(T){var E=Ar(T,2);E!==null&&Os(E,T,2)}function Df(T){var E=Ts();if(typeof T=="function"){var B=T;if(T=B(),Fr){Si(!0);try{B()}finally{Si(!1)}}}return E.memoizedState=E.baseState=T,E.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tn,lastRenderedState:T},E}function Xv(T,E,B,N){return T.baseState=B,Pf(T,yi,typeof N=="function"?N:tn)}function yT(T,E,B,N,z){if(Od(T))throw Error(v(485));if(T=E.action,T!==null){var Q={payload:z,action:T,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ee){Q.listeners.push(ee)}};F.T!==null?B(!0):Q.isTransition=!1,N(Q),B=E.pending,B===null?(Q.next=E.pending=Q,zv(E,Q)):(Q.next=B.next,E.pending=B.next=Q)}}function zv(T,E){var B=E.action,N=E.payload,z=T.state;if(E.isTransition){var Q=F.T,ee={};F.T=ee;try{var ae=B(z,N),oe=F.S;oe!==null&&oe(ee,ae),Wv(T,E,ae)}catch(we){Ff(T,E,we)}finally{Q!==null&&ee.types!==null&&(Q.types=ee.types),F.T=Q}}else try{Q=B(z,N),Wv(T,E,Q)}catch(we){Ff(T,E,we)}}function Wv(T,E,B){B!==null&&typeof B=="object"&&typeof B.then=="function"?B.then(function(N){jv(T,E,N)},function(N){return Ff(T,E,N)}):jv(T,E,B)}function jv(T,E,B){E.status="fulfilled",E.value=B,Kv(E),T.state=B,E=T.pending,E!==null&&(B=E.next,B===E?T.pending=null:(B=B.next,E.next=B,zv(T,B)))}function Ff(T,E,B){var N=T.pending;if(T.pending=null,N!==null){N=N.next;do E.status="rejected",E.reason=B,Kv(E),E=E.next;while(E!==N)}T.action=null}function Kv(T){T=T.listeners;for(var E=0;E<T.length;E++)(0,T[E])()}function $v(T,E){return E}function Qv(T,E){if(ai){var B=Ti.formState;if(B!==null){e:{var N=Yt;if(ai){if(Ei){t:{for(var z=Ei,Q=ha;z.nodeType!==8;){if(!Q){z=null;break t}if(z=ua(z.nextSibling),z===null){z=null;break t}}Q=z.data,z=Q==="F!"||Q==="F"?z:null}if(z){Ei=ua(z.nextSibling),N=z.data==="F!";break e}}On(N)}N=!1}N&&(E=B[0])}}return B=Ts(),B.memoizedState=B.baseState=E,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$v,lastRenderedState:E},B.queue=N,B=m0.bind(null,Yt,N),N.dispatch=B,N=Df(!1),Q=kf.bind(null,Yt,!1,N.queue),N=Ts(),z={state:E,dispatch:null,action:T,pending:null},N.queue=z,B=yT.bind(null,Yt,z,Q,B),z.dispatch=B,N.memoizedState=T,[E,B,!1]}function Jv(T){var E=Vi();return Zv(E,yi,T)}function Zv(T,E,B){if(E=Pf(T,E,$v)[0],T=Dd(tn)[0],typeof E=="object"&&E!==null&&typeof E.then=="function")try{var N=ih(E)}catch(ee){throw ee===Fo?Td:ee}else N=E;E=Vi();var z=E.queue,Q=z.dispatch;return B!==E.memoizedState&&(Yt.flags|=2048,Ho(9,{destroy:void 0},xT.bind(null,z,B),null)),[N,Q,T]}function xT(T,E){T.action=E}function qv(T){var E=Vi(),B=yi;if(B!==null)return Zv(E,B,T);Vi(),E=E.memoizedState,B=Vi();var N=B.queue.dispatch;return B.memoizedState=T,[E,N,!1]}function Ho(T,E,B,N){return T={tag:T,create:B,deps:N,inst:E,next:null},E=Yt.updateQueue,E===null&&(E=Pd(),Yt.updateQueue=E),B=E.lastEffect,B===null?E.lastEffect=T.next=T:(N=B.next,B.next=T,T.next=N,E.lastEffect=T),T}function _v(){return Vi().memoizedState}function Fd(T,E,B,N){var z=Ts();Yt.flags|=T,z.memoizedState=Ho(1|E,{destroy:void 0},B,N===void 0?null:N)}function Id(T,E,B,N){var z=Vi();N=N===void 0?null:N;var Q=z.memoizedState.inst;yi!==null&&N!==null&&Af(N,yi.memoizedState.deps)?z.memoizedState=Ho(E,Q,B,N):(Yt.flags|=T,z.memoizedState=Ho(1|E,Q,B,N))}function e0(T,E){Fd(8390656,8,T,E)}function If(T,E){Id(2048,8,T,E)}function wT(T){Yt.flags|=4;var E=Yt.updateQueue;if(E===null)E=Pd(),Yt.updateQueue=E,E.events=[T];else{var B=E.events;B===null?E.events=[T]:B.push(T)}}function t0(T){var E=Vi().memoizedState;return wT({ref:E,nextImpl:T}),function(){if(mi&2)throw Error(v(440));return E.impl.apply(void 0,arguments)}}function i0(T,E){return Id(4,2,T,E)}function s0(T,E){return Id(4,4,T,E)}function a0(T,E){if(typeof E=="function"){T=T();var B=E(T);return function(){typeof B=="function"?B():E(null)}}if(E!=null)return T=T(),E.current=T,function(){E.current=null}}function n0(T,E,B){B=B!=null?B.concat([T]):null,Id(4,4,a0.bind(null,E,T),B)}function Of(){}function r0(T,E){var B=Vi();E=E===void 0?null:E;var N=B.memoizedState;return E!==null&&Af(E,N[1])?N[0]:(B.memoizedState=[T,E],T)}function o0(T,E){var B=Vi();E=E===void 0?null:E;var N=B.memoizedState;if(E!==null&&Af(E,N[1]))return N[0];if(N=T(),Fr){Si(!0);try{T()}finally{Si(!1)}}return B.memoizedState=[N,E],N}function Nf(T,E,B){return B===void 0||en&1073741824&&!(_t&261930)?T.memoizedState=E:(T.memoizedState=B,T=ly(),Yt.lanes|=T,zn|=T,B)}function l0(T,E,B,N){return Xs(B,E)?B:Oo.current!==null?(T=Nf(T,B,N),Xs(T,E)||(ji=!0),T):!(en&42)||en&1073741824&&!(_t&261930)?(ji=!0,T.memoizedState=B):(T=ly(),Yt.lanes|=T,zn|=T,E)}function h0(T,E,B,N,z){var Q=H.p;H.p=Q!==0&&8>Q?Q:8;var ee=F.T,ae={};F.T=ae,kf(T,!1,E,B);try{var oe=z(),we=F.S;if(we!==null&&we(ae,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Ee=gT(oe,N);sh(T,E,Ee,Qs(T))}else sh(T,E,N,Qs(T))}catch(Re){sh(T,E,{then:function(){},status:"rejected",reason:Re},Qs())}finally{H.p=Q,ee!==null&&ae.types!==null&&(ee.types=ae.types),F.T=ee}}function ST(){}function Gf(T,E,B,N){if(T.tag!==5)throw Error(v(476));var z=d0(T).queue;h0(T,z,E,k,B===null?ST:function(){return u0(T),B(N)})}function d0(T){var E=T.memoizedState;if(E!==null)return E;E={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tn,lastRenderedState:k},next:null};var B={};return E.next={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tn,lastRenderedState:B},next:null},T.memoizedState=E,T=T.alternate,T!==null&&(T.memoizedState=E),E}function u0(T){var E=d0(T);E.next===null&&(E=T.alternate.memoizedState),sh(T,E.next.queue,{},Qs())}function Hf(){return rs(wh)}function c0(){return Vi().memoizedState}function f0(){return Vi().memoizedState}function TT(T){for(var E=T.return;E!==null;){switch(E.tag){case 24:case 3:var B=Qs();T=Hn(B);var N=kn(E,T,B);N!==null&&(Os(N,E,B),ql(N,E,B)),E={cache:ff()},T.payload=E;return}E=E.return}}function CT(T,E,B){var N=Qs();B={lane:N,revertLane:0,gesture:null,action:B,hasEagerState:!1,eagerState:null,next:null},Od(T)?g0(E,B):(B=tf(T,E,B,N),B!==null&&(Os(B,T,N),p0(B,E,N)))}function m0(T,E,B){var N=Qs();sh(T,E,B,N)}function sh(T,E,B,N){var z={lane:N,revertLane:0,gesture:null,action:B,hasEagerState:!1,eagerState:null,next:null};if(Od(T))g0(E,z);else{var Q=T.alternate;if(T.lanes===0&&(Q===null||Q.lanes===0)&&(Q=E.lastRenderedReducer,Q!==null))try{var ee=E.lastRenderedState,ae=Q(ee,B);if(z.hasEagerState=!0,z.eagerState=ae,Xs(ae,ee))return gd(T,E,z,0),Ti===null&&md(),!1}catch{}finally{}if(B=tf(T,E,z,N),B!==null)return Os(B,T,N),p0(B,E,N),!0}return!1}function kf(T,E,B,N){if(N={lane:2,revertLane:vm(),gesture:null,action:N,hasEagerState:!1,eagerState:null,next:null},Od(T)){if(E)throw Error(v(479))}else E=tf(T,B,N,2),E!==null&&Os(E,T,2)}function Od(T){var E=T.alternate;return T===Yt||E!==null&&E===Yt}function g0(T,E){No=Ld=!0;var B=T.pending;B===null?E.next=E:(E.next=B.next,B.next=E),T.pending=E}function p0(T,E,B){if(B&4194048){var N=E.lanes;N&=T.pendingLanes,B|=N,E.lanes=B,id(T,B)}}var ah={readContext:rs,use:Bd,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useLayoutEffect:Oi,useInsertionEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useSyncExternalStore:Oi,useId:Oi,useHostTransitionStatus:Oi,useFormState:Oi,useActionState:Oi,useOptimistic:Oi,useMemoCache:Oi,useCacheRefresh:Oi};ah.useEffectEvent=Oi;var v0={readContext:rs,use:Bd,useCallback:function(T,E){return Ts().memoizedState=[T,E===void 0?null:E],T},useContext:rs,useEffect:e0,useImperativeHandle:function(T,E,B){B=B!=null?B.concat([T]):null,Fd(4194308,4,a0.bind(null,E,T),B)},useLayoutEffect:function(T,E){return Fd(4194308,4,T,E)},useInsertionEffect:function(T,E){Fd(4,2,T,E)},useMemo:function(T,E){var B=Ts();E=E===void 0?null:E;var N=T();if(Fr){Si(!0);try{T()}finally{Si(!1)}}return B.memoizedState=[N,E],N},useReducer:function(T,E,B){var N=Ts();if(B!==void 0){var z=B(E);if(Fr){Si(!0);try{B(E)}finally{Si(!1)}}}else z=E;return N.memoizedState=N.baseState=z,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:T,lastRenderedState:z},N.queue=T,T=T.dispatch=CT.bind(null,Yt,T),[N.memoizedState,T]},useRef:function(T){var E=Ts();return T={current:T},E.memoizedState=T},useState:function(T){T=Df(T);var E=T.queue,B=m0.bind(null,Yt,E);return E.dispatch=B,[T.memoizedState,B]},useDebugValue:Of,useDeferredValue:function(T,E){var B=Ts();return Nf(B,T,E)},useTransition:function(){var T=Df(!1);return T=h0.bind(null,Yt,T.queue,!0,!1),Ts().memoizedState=T,[!1,T]},useSyncExternalStore:function(T,E,B){var N=Yt,z=Ts();if(ai){if(B===void 0)throw Error(v(407));B=B()}else{if(B=E(),Ti===null)throw Error(v(349));_t&127||Hv(N,E,B)}z.memoizedState=B;var Q={value:B,getSnapshot:E};return z.queue=Q,e0(Uv.bind(null,N,Q,T),[T]),N.flags|=2048,Ho(9,{destroy:void 0},kv.bind(null,N,Q,B,E),null),B},useId:function(){var T=Ts(),E=Ti.identifierPrefix;if(ai){var B=Fa,N=Da;B=(N&~(1<<32-Di(N)-1)).toString(32)+B,E="_"+E+"R_"+B,B=Rd++,0<B&&(E+="H"+B.toString(32)),E+="_"}else B=pT++,E="_"+E+"r_"+B.toString(32)+"_";return T.memoizedState=E},useHostTransitionStatus:Hf,useFormState:Qv,useActionState:Qv,useOptimistic:function(T){var E=Ts();E.memoizedState=E.baseState=T;var B={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return E.queue=B,E=kf.bind(null,Yt,!0,B),B.dispatch=E,[T,E]},useMemoCache:Rf,useCacheRefresh:function(){return Ts().memoizedState=TT.bind(null,Yt)},useEffectEvent:function(T){var E=Ts(),B={impl:T};return E.memoizedState=B,function(){if(mi&2)throw Error(v(440));return B.impl.apply(void 0,arguments)}}},Uf={readContext:rs,use:Bd,useCallback:r0,useContext:rs,useEffect:If,useImperativeHandle:n0,useInsertionEffect:i0,useLayoutEffect:s0,useMemo:o0,useReducer:Dd,useRef:_v,useState:function(){return Dd(tn)},useDebugValue:Of,useDeferredValue:function(T,E){var B=Vi();return l0(B,yi.memoizedState,T,E)},useTransition:function(){var T=Dd(tn)[0],E=Vi().memoizedState;return[typeof T=="boolean"?T:ih(T),E]},useSyncExternalStore:Gv,useId:c0,useHostTransitionStatus:Hf,useFormState:Jv,useActionState:Jv,useOptimistic:function(T,E){var B=Vi();return Xv(B,yi,T,E)},useMemoCache:Rf,useCacheRefresh:f0};Uf.useEffectEvent=t0;var y0={readContext:rs,use:Bd,useCallback:r0,useContext:rs,useEffect:If,useImperativeHandle:n0,useInsertionEffect:i0,useLayoutEffect:s0,useMemo:o0,useReducer:Bf,useRef:_v,useState:function(){return Bf(tn)},useDebugValue:Of,useDeferredValue:function(T,E){var B=Vi();return yi===null?Nf(B,T,E):l0(B,yi.memoizedState,T,E)},useTransition:function(){var T=Bf(tn)[0],E=Vi().memoizedState;return[typeof T=="boolean"?T:ih(T),E]},useSyncExternalStore:Gv,useId:c0,useHostTransitionStatus:Hf,useFormState:qv,useActionState:qv,useOptimistic:function(T,E){var B=Vi();return yi!==null?Xv(B,yi,T,E):(B.baseState=T,[T,B.queue.dispatch])},useMemoCache:Rf,useCacheRefresh:f0};y0.useEffectEvent=t0;function Vf(T,E,B,N){E=T.memoizedState,B=B(N,E),B=B==null?E:n({},E,B),T.memoizedState=B,T.lanes===0&&(T.updateQueue.baseState=B)}var Yf={enqueueSetState:function(T,E,B){T=T._reactInternals;var N=Qs(),z=Hn(N);z.payload=E,B!=null&&(z.callback=B),E=kn(T,z,N),E!==null&&(Os(E,T,N),ql(E,T,N))},enqueueReplaceState:function(T,E,B){T=T._reactInternals;var N=Qs(),z=Hn(N);z.tag=1,z.payload=E,B!=null&&(z.callback=B),E=kn(T,z,N),E!==null&&(Os(E,T,N),ql(E,T,N))},enqueueForceUpdate:function(T,E){T=T._reactInternals;var B=Qs(),N=Hn(B);N.tag=2,E!=null&&(N.callback=E),E=kn(T,N,B),E!==null&&(Os(E,T,B),ql(E,T,B))}};function x0(T,E,B,N,z,Q,ee){return T=T.stateNode,typeof T.shouldComponentUpdate=="function"?T.shouldComponentUpdate(N,Q,ee):E.prototype&&E.prototype.isPureReactComponent?!zl(B,N)||!zl(z,Q):!0}function w0(T,E,B,N){T=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps(B,N),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps(B,N),E.state!==T&&Yf.enqueueReplaceState(E,E.state,null)}function Ir(T,E){var B=E;if("ref"in E){B={};for(var N in E)N!=="ref"&&(B[N]=E[N])}if(T=T.defaultProps){B===E&&(B=n({},B));for(var z in T)B[z]===void 0&&(B[z]=T[z])}return B}function S0(T){fd(T)}function T0(T){console.error(T)}function C0(T){fd(T)}function Nd(T,E){try{var B=T.onUncaughtError;B(E.value,{componentStack:E.stack})}catch(N){setTimeout(function(){throw N})}}function A0(T,E,B){try{var N=T.onCaughtError;N(B.value,{componentStack:B.stack,errorBoundary:E.tag===1?E.stateNode:null})}catch(z){setTimeout(function(){throw z})}}function Xf(T,E,B){return B=Hn(B),B.tag=3,B.payload={element:null},B.callback=function(){Nd(T,E)},B}function b0(T){return T=Hn(T),T.tag=3,T}function E0(T,E,B,N){var z=B.type.getDerivedStateFromError;if(typeof z=="function"){var Q=N.value;T.payload=function(){return z(Q)},T.callback=function(){A0(E,B,N)}}var ee=B.stateNode;ee!==null&&typeof ee.componentDidCatch=="function"&&(T.callback=function(){A0(E,B,N),typeof z!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var ae=N.stack;this.componentDidCatch(N.value,{componentStack:ae!==null?ae:""})})}function AT(T,E,B,N,z){if(B.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(E=B.alternate,E!==null&&Po(E,B,z,!0),B=Ws.current,B!==null){switch(B.tag){case 31:case 13:return da===null?$d():B.alternate===null&&Ni===0&&(Ni=3),B.flags&=-257,B.flags|=65536,B.lanes=z,N===Cd?B.flags|=16384:(E=B.updateQueue,E===null?B.updateQueue=new Set([N]):E.add(N),mm(T,N,z)),!1;case 22:return B.flags|=65536,N===Cd?B.flags|=16384:(E=B.updateQueue,E===null?(E={transitions:null,markerInstances:null,retryQueue:new Set([N])},B.updateQueue=E):(B=E.retryQueue,B===null?E.retryQueue=new Set([N]):B.add(N)),mm(T,N,z)),!1}throw Error(v(435,B.tag))}return mm(T,N,z),$d(),!1}if(ai)return E=Ws.current,E!==null?(!(E.flags&65536)&&(E.flags|=256),E.flags|=65536,E.lanes=z,N!==lf&&(T=Error(v(422),{cause:N}),Kl(ra(T,B)))):(N!==lf&&(E=Error(v(423),{cause:N}),Kl(ra(E,B))),T=T.current.alternate,T.flags|=65536,z&=-z,T.lanes|=z,N=ra(N,B),z=Xf(T.stateNode,N,z),xf(T,z),Ni!==4&&(Ni=2)),!1;var Q=Error(v(520),{cause:N});if(Q=ra(Q,B),ch===null?ch=[Q]:ch.push(Q),Ni!==4&&(Ni=2),E===null)return!0;N=ra(N,B),B=E;do{switch(B.tag){case 3:return B.flags|=65536,T=z&-z,B.lanes|=T,T=Xf(B.stateNode,N,T),xf(B,T),!1;case 1:if(E=B.type,Q=B.stateNode,(B.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Wn===null||!Wn.has(Q))))return B.flags|=65536,z&=-z,B.lanes|=z,z=b0(z),E0(z,T,B,N),xf(B,z),!1}B=B.return}while(B!==null);return!1}var zf=Error(v(461)),ji=!1;function os(T,E,B,N){E.child=T===null?Pv(E,null,B,N):Dr(E,T.child,B,N)}function M0(T,E,B,N,z){B=B.render;var Q=E.ref;if("ref"in N){var ee={};for(var ae in N)ae!=="ref"&&(ee[ae]=N[ae])}else ee=N;return Lr(E),N=bf(T,E,B,ee,Q,z),ae=Ef(),T!==null&&!ji?(Mf(T,E,z),sn(T,E,z)):(ai&&ae&&rf(E),E.flags|=1,os(T,E,N,z),E.child)}function L0(T,E,B,N,z){if(T===null){var Q=B.type;return typeof Q=="function"&&!sf(Q)&&Q.defaultProps===void 0&&B.compare===null?(E.tag=15,E.type=Q,R0(T,E,Q,N,z)):(T=vd(B.type,null,N,E,E.mode,z),T.ref=E.ref,T.return=E,E.child=T)}if(Q=T.child,!qf(T,z)){var ee=Q.memoizedProps;if(B=B.compare,B=B!==null?B:zl,B(ee,N)&&T.ref===E.ref)return sn(T,E,z)}return E.flags|=1,T=Ja(Q,N),T.ref=E.ref,T.return=E,E.child=T}function R0(T,E,B,N,z){if(T!==null){var Q=T.memoizedProps;if(zl(Q,N)&&T.ref===E.ref)if(ji=!1,E.pendingProps=N=Q,qf(T,z))T.flags&131072&&(ji=!0);else return E.lanes=T.lanes,sn(T,E,z)}return Wf(T,E,B,N,z)}function P0(T,E,B,N){var z=N.children,Q=T!==null?T.memoizedState:null;if(T===null&&E.stateNode===null&&(E.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),N.mode==="hidden"){if(E.flags&128){if(Q=Q!==null?Q.baseLanes|B:B,T!==null){for(N=E.child=T.child,z=0;N!==null;)z=z|N.lanes|N.childLanes,N=N.sibling;N=z&~Q}else N=0,E.child=null;return B0(T,E,Q,B,N)}if(B&536870912)E.memoizedState={baseLanes:0,cachePool:null},T!==null&&Sd(E,Q!==null?Q.cachePool:null),Q!==null?Fv(E,Q):Sf(),Iv(E);else return N=E.lanes=536870912,B0(T,E,Q!==null?Q.baseLanes|B:B,B,N)}else Q!==null?(Sd(E,Q.cachePool),Fv(E,Q),Vn(),E.memoizedState=null):(T!==null&&Sd(E,null),Sf(),Vn());return os(T,E,z,B),E.child}function nh(T,E){return T!==null&&T.tag===22||E.stateNode!==null||(E.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.sibling}function B0(T,E,B,N,z){var Q=gf();return Q=Q===null?null:{parent:zi._currentValue,pool:Q},E.memoizedState={baseLanes:B,cachePool:Q},T!==null&&Sd(E,null),Sf(),Iv(E),T!==null&&Po(T,E,N,!0),E.childLanes=z,null}function Gd(T,E){return E=kd({mode:E.mode,children:E.children},T.mode),E.ref=T.ref,T.child=E,E.return=T,E}function D0(T,E,B){return Dr(E,T.child,null,B),T=Gd(E,E.pendingProps),T.flags|=2,js(E),E.memoizedState=null,T}function bT(T,E,B){var N=E.pendingProps,z=(E.flags&128)!==0;if(E.flags&=-129,T===null){if(ai){if(N.mode==="hidden")return T=Gd(E,N),E.lanes=536870912,nh(null,T);if(Cf(E),(T=Ei)?(T=zy(T,ha),T=T!==null&&T.data==="&"?T:null,T!==null&&(E.memoizedState={dehydrated:T,treeContext:Fn!==null?{id:Da,overflow:Fa}:null,retryLane:536870912,hydrationErrors:null},B=gv(T),B.return=E,E.child=B,ns=E,Ei=null)):T=null,T===null)throw On(E);return E.lanes=536870912,null}return Gd(E,N)}var Q=T.memoizedState;if(Q!==null){var ee=Q.dehydrated;if(Cf(E),z)if(E.flags&256)E.flags&=-257,E=D0(T,E,B);else if(E.memoizedState!==null)E.child=T.child,E.flags|=128,E=null;else throw Error(v(558));else if(ji||Po(T,E,B,!1),z=(B&T.childLanes)!==0,ji||z){if(N=Ti,N!==null&&(ee=Fl(N,B),ee!==0&&ee!==Q.retryLane))throw Q.retryLane=ee,Ar(T,ee),Os(N,T,ee),zf;$d(),E=D0(T,E,B)}else T=Q.treeContext,Ei=ua(ee.nextSibling),ns=E,ai=!0,In=null,ha=!1,T!==null&&yv(E,T),E=Gd(E,N),E.flags|=4096;return E}return T=Ja(T.child,{mode:N.mode,children:N.children}),T.ref=E.ref,E.child=T,T.return=E,T}function Hd(T,E){var B=E.ref;if(B===null)T!==null&&T.ref!==null&&(E.flags|=4194816);else{if(typeof B!="function"&&typeof B!="object")throw Error(v(284));(T===null||T.ref!==B)&&(E.flags|=4194816)}}function Wf(T,E,B,N,z){return Lr(E),B=bf(T,E,B,N,void 0,z),N=Ef(),T!==null&&!ji?(Mf(T,E,z),sn(T,E,z)):(ai&&N&&rf(E),E.flags|=1,os(T,E,B,z),E.child)}function F0(T,E,B,N,z,Q){return Lr(E),E.updateQueue=null,B=Nv(E,N,B,z),Ov(T),N=Ef(),T!==null&&!ji?(Mf(T,E,Q),sn(T,E,Q)):(ai&&N&&rf(E),E.flags|=1,os(T,E,B,Q),E.child)}function I0(T,E,B,N,z){if(Lr(E),E.stateNode===null){var Q=Eo,ee=B.contextType;typeof ee=="object"&&ee!==null&&(Q=rs(ee)),Q=new B(N,Q),E.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,Q.updater=Yf,E.stateNode=Q,Q._reactInternals=E,Q=E.stateNode,Q.props=N,Q.state=E.memoizedState,Q.refs={},vf(E),ee=B.contextType,Q.context=typeof ee=="object"&&ee!==null?rs(ee):Eo,Q.state=E.memoizedState,ee=B.getDerivedStateFromProps,typeof ee=="function"&&(Vf(E,B,ee,N),Q.state=E.memoizedState),typeof B.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(ee=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),ee!==Q.state&&Yf.enqueueReplaceState(Q,Q.state,null),eh(E,N,Q,z),_l(),Q.state=E.memoizedState),typeof Q.componentDidMount=="function"&&(E.flags|=4194308),N=!0}else if(T===null){Q=E.stateNode;var ae=E.memoizedProps,oe=Ir(B,ae);Q.props=oe;var we=Q.context,Ee=B.contextType;ee=Eo,typeof Ee=="object"&&Ee!==null&&(ee=rs(Ee));var Re=B.getDerivedStateFromProps;Ee=typeof Re=="function"||typeof Q.getSnapshotBeforeUpdate=="function",ae=E.pendingProps!==ae,Ee||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ae||we!==ee)&&w0(E,Q,N,ee),Gn=!1;var Ce=E.memoizedState;Q.state=Ce,eh(E,N,Q,z),_l(),we=E.memoizedState,ae||Ce!==we||Gn?(typeof Re=="function"&&(Vf(E,B,Re,N),we=E.memoizedState),(oe=Gn||x0(E,B,oe,N,Ce,we,ee))?(Ee||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(E.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=N,E.memoizedState=we),Q.props=N,Q.state=we,Q.context=ee,N=oe):(typeof Q.componentDidMount=="function"&&(E.flags|=4194308),N=!1)}else{Q=E.stateNode,yf(T,E),ee=E.memoizedProps,Ee=Ir(B,ee),Q.props=Ee,Re=E.pendingProps,Ce=Q.context,we=B.contextType,oe=Eo,typeof we=="object"&&we!==null&&(oe=rs(we)),ae=B.getDerivedStateFromProps,(we=typeof ae=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ee!==Re||Ce!==oe)&&w0(E,Q,N,oe),Gn=!1,Ce=E.memoizedState,Q.state=Ce,eh(E,N,Q,z),_l();var be=E.memoizedState;ee!==Re||Ce!==be||Gn||T!==null&&T.dependencies!==null&&xd(T.dependencies)?(typeof ae=="function"&&(Vf(E,B,ae,N),be=E.memoizedState),(Ee=Gn||x0(E,B,Ee,N,Ce,be,oe)||T!==null&&T.dependencies!==null&&xd(T.dependencies))?(we||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(N,be,oe),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(N,be,oe)),typeof Q.componentDidUpdate=="function"&&(E.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof Q.componentDidUpdate!="function"||ee===T.memoizedProps&&Ce===T.memoizedState||(E.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ee===T.memoizedProps&&Ce===T.memoizedState||(E.flags|=1024),E.memoizedProps=N,E.memoizedState=be),Q.props=N,Q.state=be,Q.context=oe,N=Ee):(typeof Q.componentDidUpdate!="function"||ee===T.memoizedProps&&Ce===T.memoizedState||(E.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ee===T.memoizedProps&&Ce===T.memoizedState||(E.flags|=1024),N=!1)}return Q=N,Hd(T,E),N=(E.flags&128)!==0,Q||N?(Q=E.stateNode,B=N&&typeof B.getDerivedStateFromError!="function"?null:Q.render(),E.flags|=1,T!==null&&N?(E.child=Dr(E,T.child,null,z),E.child=Dr(E,null,B,z)):os(T,E,B,z),E.memoizedState=Q.state,T=E.child):T=sn(T,E,z),T}function O0(T,E,B,N){return Er(),E.flags|=256,os(T,E,B,N),E.child}var jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kf(T){return{baseLanes:T,cachePool:Av()}}function $f(T,E,B){return T=T!==null?T.childLanes&~B:0,E&&(T|=$s),T}function N0(T,E,B){var N=E.pendingProps,z=!1,Q=(E.flags&128)!==0,ee;if((ee=Q)||(ee=T!==null&&T.memoizedState===null?!1:(Ui.current&2)!==0),ee&&(z=!0,E.flags&=-129),ee=(E.flags&32)!==0,E.flags&=-33,T===null){if(ai){if(z?Un(E):Vn(),(T=Ei)?(T=zy(T,ha),T=T!==null&&T.data!=="&"?T:null,T!==null&&(E.memoizedState={dehydrated:T,treeContext:Fn!==null?{id:Da,overflow:Fa}:null,retryLane:536870912,hydrationErrors:null},B=gv(T),B.return=E,E.child=B,ns=E,Ei=null)):T=null,T===null)throw On(E);return Pm(T)?E.lanes=32:E.lanes=536870912,null}var ae=N.children;return N=N.fallback,z?(Vn(),z=E.mode,ae=kd({mode:"hidden",children:ae},z),N=br(N,z,B,null),ae.return=E,N.return=E,ae.sibling=N,E.child=ae,N=E.child,N.memoizedState=Kf(B),N.childLanes=$f(T,ee,B),E.memoizedState=jf,nh(null,N)):(Un(E),Qf(E,ae))}var oe=T.memoizedState;if(oe!==null&&(ae=oe.dehydrated,ae!==null)){if(Q)E.flags&256?(Un(E),E.flags&=-257,E=Jf(T,E,B)):E.memoizedState!==null?(Vn(),E.child=T.child,E.flags|=128,E=null):(Vn(),ae=N.fallback,z=E.mode,N=kd({mode:"visible",children:N.children},z),ae=br(ae,z,B,null),ae.flags|=2,N.return=E,ae.return=E,N.sibling=ae,E.child=N,Dr(E,T.child,null,B),N=E.child,N.memoizedState=Kf(B),N.childLanes=$f(T,ee,B),E.memoizedState=jf,E=nh(null,N));else if(Un(E),Pm(ae)){if(ee=ae.nextSibling&&ae.nextSibling.dataset,ee)var we=ee.dgst;ee=we,N=Error(v(419)),N.stack="",N.digest=ee,Kl({value:N,source:null,stack:null}),E=Jf(T,E,B)}else if(ji||Po(T,E,B,!1),ee=(B&T.childLanes)!==0,ji||ee){if(ee=Ti,ee!==null&&(N=Fl(ee,B),N!==0&&N!==oe.retryLane))throw oe.retryLane=N,Ar(T,N),Os(ee,T,N),zf;Rm(ae)||$d(),E=Jf(T,E,B)}else Rm(ae)?(E.flags|=192,E.child=T.child,E=null):(T=oe.treeContext,Ei=ua(ae.nextSibling),ns=E,ai=!0,In=null,ha=!1,T!==null&&yv(E,T),E=Qf(E,N.children),E.flags|=4096);return E}return z?(Vn(),ae=N.fallback,z=E.mode,oe=T.child,we=oe.sibling,N=Ja(oe,{mode:"hidden",children:N.children}),N.subtreeFlags=oe.subtreeFlags&65011712,we!==null?ae=Ja(we,ae):(ae=br(ae,z,B,null),ae.flags|=2),ae.return=E,N.return=E,N.sibling=ae,E.child=N,nh(null,N),N=E.child,ae=T.child.memoizedState,ae===null?ae=Kf(B):(z=ae.cachePool,z!==null?(oe=zi._currentValue,z=z.parent!==oe?{parent:oe,pool:oe}:z):z=Av(),ae={baseLanes:ae.baseLanes|B,cachePool:z}),N.memoizedState=ae,N.childLanes=$f(T,ee,B),E.memoizedState=jf,nh(T.child,N)):(Un(E),B=T.child,T=B.sibling,B=Ja(B,{mode:"visible",children:N.children}),B.return=E,B.sibling=null,T!==null&&(ee=E.deletions,ee===null?(E.deletions=[T],E.flags|=16):ee.push(T)),E.child=B,E.memoizedState=null,B)}function Qf(T,E){return E=kd({mode:"visible",children:E},T.mode),E.return=T,T.child=E}function kd(T,E){return T=zs(22,T,null,E),T.lanes=0,T}function Jf(T,E,B){return Dr(E,T.child,null,B),T=Qf(E,E.pendingProps.children),T.flags|=2,E.memoizedState=null,T}function G0(T,E,B){T.lanes|=E;var N=T.alternate;N!==null&&(N.lanes|=E),uf(T.return,E,B)}function Zf(T,E,B,N,z,Q){var ee=T.memoizedState;ee===null?T.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:N,tail:B,tailMode:z,treeForkCount:Q}:(ee.isBackwards=E,ee.rendering=null,ee.renderingStartTime=0,ee.last=N,ee.tail=B,ee.tailMode=z,ee.treeForkCount=Q)}function H0(T,E,B){var N=E.pendingProps,z=N.revealOrder,Q=N.tail;N=N.children;var ee=Ui.current,ae=(ee&2)!==0;if(ae?(ee=ee&1|2,E.flags|=128):ee&=1,X(Ui,ee),os(T,E,N,B),N=ai?jl:0,!ae&&T!==null&&T.flags&128)e:for(T=E.child;T!==null;){if(T.tag===13)T.memoizedState!==null&&G0(T,B,E);else if(T.tag===19)G0(T,B,E);else if(T.child!==null){T.child.return=T,T=T.child;continue}if(T===E)break e;for(;T.sibling===null;){if(T.return===null||T.return===E)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}switch(z){case"forwards":for(B=E.child,z=null;B!==null;)T=B.alternate,T!==null&&Md(T)===null&&(z=B),B=B.sibling;B=z,B===null?(z=E.child,E.child=null):(z=B.sibling,B.sibling=null),Zf(E,!1,z,B,Q,N);break;case"backwards":case"unstable_legacy-backwards":for(B=null,z=E.child,E.child=null;z!==null;){if(T=z.alternate,T!==null&&Md(T)===null){E.child=z;break}T=z.sibling,z.sibling=B,B=z,z=T}Zf(E,!0,B,null,Q,N);break;case"together":Zf(E,!1,null,null,void 0,N);break;default:E.memoizedState=null}return E.child}function sn(T,E,B){if(T!==null&&(E.dependencies=T.dependencies),zn|=E.lanes,!(B&E.childLanes))if(T!==null){if(Po(T,E,B,!1),(B&E.childLanes)===0)return null}else return null;if(T!==null&&E.child!==T.child)throw Error(v(153));if(E.child!==null){for(T=E.child,B=Ja(T,T.pendingProps),E.child=B,B.return=E;T.sibling!==null;)T=T.sibling,B=B.sibling=Ja(T,T.pendingProps),B.return=E;B.sibling=null}return E.child}function qf(T,E){return T.lanes&E?!0:(T=T.dependencies,!!(T!==null&&xd(T)))}function ET(T,E,B){switch(E.tag){case 3:q(E,E.stateNode.containerInfo),Nn(E,zi,T.memoizedState.cache),Er();break;case 27:case 5:te(E);break;case 4:q(E,E.stateNode.containerInfo);break;case 10:Nn(E,E.type,E.memoizedProps.value);break;case 31:if(E.memoizedState!==null)return E.flags|=128,Cf(E),null;break;case 13:var N=E.memoizedState;if(N!==null)return N.dehydrated!==null?(Un(E),E.flags|=128,null):B&E.child.childLanes?N0(T,E,B):(Un(E),T=sn(T,E,B),T!==null?T.sibling:null);Un(E);break;case 19:var z=(T.flags&128)!==0;if(N=(B&E.childLanes)!==0,N||(Po(T,E,B,!1),N=(B&E.childLanes)!==0),z){if(N)return H0(T,E,B);E.flags|=128}if(z=E.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),X(Ui,Ui.current),N)break;return null;case 22:return E.lanes=0,P0(T,E,B,E.pendingProps);case 24:Nn(E,zi,T.memoizedState.cache)}return sn(T,E,B)}function k0(T,E,B){if(T!==null)if(T.memoizedProps!==E.pendingProps)ji=!0;else{if(!qf(T,B)&&!(E.flags&128))return ji=!1,ET(T,E,B);ji=!!(T.flags&131072)}else ji=!1,ai&&E.flags&1048576&&vv(E,jl,E.index);switch(E.lanes=0,E.tag){case 16:e:{var N=E.pendingProps;if(T=Pr(E.elementType),E.type=T,typeof T=="function")sf(T)?(N=Ir(T,N),E.tag=1,E=I0(null,E,T,N,B)):(E.tag=0,E=Wf(null,E,T,N,B));else{if(T!=null){var z=T.$$typeof;if(z===g){E.tag=11,E=M0(null,E,T,N,B);break e}else if(z===S){E.tag=14,E=L0(null,E,T,N,B);break e}}throw E=D(T)||T,Error(v(306,E,""))}}return E;case 0:return Wf(T,E,E.type,E.pendingProps,B);case 1:return N=E.type,z=Ir(N,E.pendingProps),I0(T,E,N,z,B);case 3:e:{if(q(E,E.stateNode.containerInfo),T===null)throw Error(v(387));N=E.pendingProps;var Q=E.memoizedState;z=Q.element,yf(T,E),eh(E,N,null,B);var ee=E.memoizedState;if(N=ee.cache,Nn(E,zi,N),N!==Q.cache&&cf(E,[zi],B,!0),_l(),N=ee.element,Q.isDehydrated)if(Q={element:N,isDehydrated:!1,cache:ee.cache},E.updateQueue.baseState=Q,E.memoizedState=Q,E.flags&256){E=O0(T,E,N,B);break e}else if(N!==z){z=ra(Error(v(424)),E),Kl(z),E=O0(T,E,N,B);break e}else{switch(T=E.stateNode.containerInfo,T.nodeType){case 9:T=T.body;break;default:T=T.nodeName==="HTML"?T.ownerDocument.body:T}for(Ei=ua(T.firstChild),ns=E,ai=!0,In=null,ha=!0,B=Pv(E,null,N,B),E.child=B;B;)B.flags=B.flags&-3|4096,B=B.sibling}else{if(Er(),N===z){E=sn(T,E,B);break e}os(T,E,N,B)}E=E.child}return E;case 26:return Hd(T,E),T===null?(B=Jy(E.type,null,E.pendingProps,null))?E.memoizedState=B:ai||(B=E.type,T=E.pendingProps,N=tu(U.current).createElement(B),N[ki]=E,N[ye]=T,ls(N,B,T),ts(N),E.stateNode=N):E.memoizedState=Jy(E.type,T.memoizedProps,E.pendingProps,T.memoizedState),null;case 27:return te(E),T===null&&ai&&(N=E.stateNode=Ky(E.type,E.pendingProps,U.current),ns=E,ha=!0,z=Ei,Qn(E.type)?(Bm=z,Ei=ua(N.firstChild)):Ei=z),os(T,E,E.pendingProps.children,B),Hd(T,E),T===null&&(E.flags|=4194304),E.child;case 5:return T===null&&ai&&((z=N=Ei)&&(N=iC(N,E.type,E.pendingProps,ha),N!==null?(E.stateNode=N,ns=E,Ei=ua(N.firstChild),ha=!1,z=!0):z=!1),z||On(E)),te(E),z=E.type,Q=E.pendingProps,ee=T!==null?T.memoizedProps:null,N=Q.children,Em(z,Q)?N=null:ee!==null&&Em(z,ee)&&(E.flags|=32),E.memoizedState!==null&&(z=bf(T,E,vT,null,null,B),wh._currentValue=z),Hd(T,E),os(T,E,N,B),E.child;case 6:return T===null&&ai&&((T=B=Ei)&&(B=sC(B,E.pendingProps,ha),B!==null?(E.stateNode=B,ns=E,Ei=null,T=!0):T=!1),T||On(E)),null;case 13:return N0(T,E,B);case 4:return q(E,E.stateNode.containerInfo),N=E.pendingProps,T===null?E.child=Dr(E,null,N,B):os(T,E,N,B),E.child;case 11:return M0(T,E,E.type,E.pendingProps,B);case 7:return os(T,E,E.pendingProps,B),E.child;case 8:return os(T,E,E.pendingProps.children,B),E.child;case 12:return os(T,E,E.pendingProps.children,B),E.child;case 10:return N=E.pendingProps,Nn(E,E.type,N.value),os(T,E,N.children,B),E.child;case 9:return z=E.type._context,N=E.pendingProps.children,Lr(E),z=rs(z),N=N(z),E.flags|=1,os(T,E,N,B),E.child;case 14:return L0(T,E,E.type,E.pendingProps,B);case 15:return R0(T,E,E.type,E.pendingProps,B);case 19:return H0(T,E,B);case 31:return bT(T,E,B);case 22:return P0(T,E,B,E.pendingProps);case 24:return Lr(E),N=rs(zi),T===null?(z=gf(),z===null&&(z=Ti,Q=ff(),z.pooledCache=Q,Q.refCount++,Q!==null&&(z.pooledCacheLanes|=B),z=Q),E.memoizedState={parent:N,cache:z},vf(E),Nn(E,zi,z)):(T.lanes&B&&(yf(T,E),eh(E,null,null,B),_l()),z=T.memoizedState,Q=E.memoizedState,z.parent!==N?(z={parent:N,cache:N},E.memoizedState=z,E.lanes===0&&(E.memoizedState=E.updateQueue.baseState=z),Nn(E,zi,N)):(N=Q.cache,Nn(E,zi,N),N!==z.cache&&cf(E,[zi],B,!0))),os(T,E,E.pendingProps.children,B),E.child;case 29:throw E.pendingProps}throw Error(v(156,E.tag))}function an(T){T.flags|=4}function _f(T,E,B,N,z){if((E=(T.mode&32)!==0)&&(E=!1),E){if(T.flags|=16777216,(z&335544128)===z)if(T.stateNode.complete)T.flags|=8192;else if(cy())T.flags|=8192;else throw Br=Cd,pf}else T.flags&=-16777217}function U0(T,E){if(E.type!=="stylesheet"||E.state.loading&4)T.flags&=-16777217;else if(T.flags|=16777216,!tx(E))if(cy())T.flags|=8192;else throw Br=Cd,pf}function Ud(T,E){E!==null&&(T.flags|=4),T.flags&16384&&(E=T.tag!==22?td():536870912,T.lanes|=E,Yo|=E)}function rh(T,E){if(!ai)switch(T.tailMode){case"hidden":E=T.tail;for(var B=null;E!==null;)E.alternate!==null&&(B=E),E=E.sibling;B===null?T.tail=null:B.sibling=null;break;case"collapsed":B=T.tail;for(var N=null;B!==null;)B.alternate!==null&&(N=B),B=B.sibling;N===null?E||T.tail===null?T.tail=null:T.tail.sibling=null:N.sibling=null}}function Mi(T){var E=T.alternate!==null&&T.alternate.child===T.child,B=0,N=0;if(E)for(var z=T.child;z!==null;)B|=z.lanes|z.childLanes,N|=z.subtreeFlags&65011712,N|=z.flags&65011712,z.return=T,z=z.sibling;else for(z=T.child;z!==null;)B|=z.lanes|z.childLanes,N|=z.subtreeFlags,N|=z.flags,z.return=T,z=z.sibling;return T.subtreeFlags|=N,T.childLanes=B,E}function MT(T,E,B){var N=E.pendingProps;switch(of(E),E.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mi(E),null;case 1:return Mi(E),null;case 3:return B=E.stateNode,N=null,T!==null&&(N=T.memoizedState.cache),E.memoizedState.cache!==N&&(E.flags|=2048),_a(zi),_(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(T===null||T.child===null)&&(Ro(E)?an(E):T===null||T.memoizedState.isDehydrated&&!(E.flags&256)||(E.flags|=1024,hf())),Mi(E),null;case 26:var z=E.type,Q=E.memoizedState;return T===null?(an(E),Q!==null?(Mi(E),U0(E,Q)):(Mi(E),_f(E,z,null,N,B))):Q?Q!==T.memoizedState?(an(E),Mi(E),U0(E,Q)):(Mi(E),E.flags&=-16777217):(T=T.memoizedProps,T!==N&&an(E),Mi(E),_f(E,z,T,N,B)),null;case 27:if(se(E),B=U.current,z=E.type,T!==null&&E.stateNode!=null)T.memoizedProps!==N&&an(E);else{if(!N){if(E.stateNode===null)throw Error(v(166));return Mi(E),null}T=j.current,Ro(E)?xv(E):(T=Ky(z,N,B),E.stateNode=T,an(E))}return Mi(E),null;case 5:if(se(E),z=E.type,T!==null&&E.stateNode!=null)T.memoizedProps!==N&&an(E);else{if(!N){if(E.stateNode===null)throw Error(v(166));return Mi(E),null}if(Q=j.current,Ro(E))xv(E);else{var ee=tu(U.current);switch(Q){case 1:Q=ee.createElementNS("http://www.w3.org/2000/svg",z);break;case 2:Q=ee.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;default:switch(z){case"svg":Q=ee.createElementNS("http://www.w3.org/2000/svg",z);break;case"math":Q=ee.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;case"script":Q=ee.createElement("div"),Q.innerHTML="<script><\/script>",Q=Q.removeChild(Q.firstChild);break;case"select":Q=typeof N.is=="string"?ee.createElement("select",{is:N.is}):ee.createElement("select"),N.multiple?Q.multiple=!0:N.size&&(Q.size=N.size);break;default:Q=typeof N.is=="string"?ee.createElement(z,{is:N.is}):ee.createElement(z)}}Q[ki]=E,Q[ye]=N;e:for(ee=E.child;ee!==null;){if(ee.tag===5||ee.tag===6)Q.appendChild(ee.stateNode);else if(ee.tag!==4&&ee.tag!==27&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===E)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===E)break e;ee=ee.return}ee.sibling.return=ee.return,ee=ee.sibling}E.stateNode=Q;e:switch(ls(Q,z,N),z){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}N&&an(E)}}return Mi(E),_f(E,E.type,T===null?null:T.memoizedProps,E.pendingProps,B),null;case 6:if(T&&E.stateNode!=null)T.memoizedProps!==N&&an(E);else{if(typeof N!="string"&&E.stateNode===null)throw Error(v(166));if(T=U.current,Ro(E)){if(T=E.stateNode,B=E.memoizedProps,N=null,z=ns,z!==null)switch(z.tag){case 27:case 5:N=z.memoizedProps}T[ki]=E,T=!!(T.nodeValue===B||N!==null&&N.suppressHydrationWarning===!0||Ny(T.nodeValue,B)),T||On(E,!0)}else T=tu(T).createTextNode(N),T[ki]=E,E.stateNode=T}return Mi(E),null;case 31:if(B=E.memoizedState,T===null||T.memoizedState!==null){if(N=Ro(E),B!==null){if(T===null){if(!N)throw Error(v(318));if(T=E.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(v(557));T[ki]=E}else Er(),!(E.flags&128)&&(E.memoizedState=null),E.flags|=4;Mi(E),T=!1}else B=hf(),T!==null&&T.memoizedState!==null&&(T.memoizedState.hydrationErrors=B),T=!0;if(!T)return E.flags&256?(js(E),E):(js(E),null);if(E.flags&128)throw Error(v(558))}return Mi(E),null;case 13:if(N=E.memoizedState,T===null||T.memoizedState!==null&&T.memoizedState.dehydrated!==null){if(z=Ro(E),N!==null&&N.dehydrated!==null){if(T===null){if(!z)throw Error(v(318));if(z=E.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(v(317));z[ki]=E}else Er(),!(E.flags&128)&&(E.memoizedState=null),E.flags|=4;Mi(E),z=!1}else z=hf(),T!==null&&T.memoizedState!==null&&(T.memoizedState.hydrationErrors=z),z=!0;if(!z)return E.flags&256?(js(E),E):(js(E),null)}return js(E),E.flags&128?(E.lanes=B,E):(B=N!==null,T=T!==null&&T.memoizedState!==null,B&&(N=E.child,z=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(z=N.alternate.memoizedState.cachePool.pool),Q=null,N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(Q=N.memoizedState.cachePool.pool),Q!==z&&(N.flags|=2048)),B!==T&&B&&(E.child.flags|=8192),Ud(E,E.updateQueue),Mi(E),null);case 4:return _(),T===null&&Sm(E.stateNode.containerInfo),Mi(E),null;case 10:return _a(E.type),Mi(E),null;case 19:if(Z(Ui),N=E.memoizedState,N===null)return Mi(E),null;if(z=(E.flags&128)!==0,Q=N.rendering,Q===null)if(z)rh(N,!1);else{if(Ni!==0||T!==null&&T.flags&128)for(T=E.child;T!==null;){if(Q=Md(T),Q!==null){for(E.flags|=128,rh(N,!1),T=Q.updateQueue,E.updateQueue=T,Ud(E,T),E.subtreeFlags=0,T=B,B=E.child;B!==null;)mv(B,T),B=B.sibling;return X(Ui,Ui.current&1|2),ai&&Za(E,N.treeForkCount),E.child}T=T.sibling}N.tail!==null&&Be()>Wd&&(E.flags|=128,z=!0,rh(N,!1),E.lanes=4194304)}else{if(!z)if(T=Md(Q),T!==null){if(E.flags|=128,z=!0,T=T.updateQueue,E.updateQueue=T,Ud(E,T),rh(N,!0),N.tail===null&&N.tailMode==="hidden"&&!Q.alternate&&!ai)return Mi(E),null}else 2*Be()-N.renderingStartTime>Wd&&B!==536870912&&(E.flags|=128,z=!0,rh(N,!1),E.lanes=4194304);N.isBackwards?(Q.sibling=E.child,E.child=Q):(T=N.last,T!==null?T.sibling=Q:E.child=Q,N.last=Q)}return N.tail!==null?(T=N.tail,N.rendering=T,N.tail=T.sibling,N.renderingStartTime=Be(),T.sibling=null,B=Ui.current,X(Ui,z?B&1|2:B&1),ai&&Za(E,N.treeForkCount),T):(Mi(E),null);case 22:case 23:return js(E),Tf(),N=E.memoizedState!==null,T!==null?T.memoizedState!==null!==N&&(E.flags|=8192):N&&(E.flags|=8192),N?B&536870912&&!(E.flags&128)&&(Mi(E),E.subtreeFlags&6&&(E.flags|=8192)):Mi(E),B=E.updateQueue,B!==null&&Ud(E,B.retryQueue),B=null,T!==null&&T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(B=T.memoizedState.cachePool.pool),N=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(N=E.memoizedState.cachePool.pool),N!==B&&(E.flags|=2048),T!==null&&Z(Rr),null;case 24:return B=null,T!==null&&(B=T.memoizedState.cache),E.memoizedState.cache!==B&&(E.flags|=2048),_a(zi),Mi(E),null;case 25:return null;case 30:return null}throw Error(v(156,E.tag))}function LT(T,E){switch(of(E),E.tag){case 1:return T=E.flags,T&65536?(E.flags=T&-65537|128,E):null;case 3:return _a(zi),_(),T=E.flags,T&65536&&!(T&128)?(E.flags=T&-65537|128,E):null;case 26:case 27:case 5:return se(E),null;case 31:if(E.memoizedState!==null){if(js(E),E.alternate===null)throw Error(v(340));Er()}return T=E.flags,T&65536?(E.flags=T&-65537|128,E):null;case 13:if(js(E),T=E.memoizedState,T!==null&&T.dehydrated!==null){if(E.alternate===null)throw Error(v(340));Er()}return T=E.flags,T&65536?(E.flags=T&-65537|128,E):null;case 19:return Z(Ui),null;case 4:return _(),null;case 10:return _a(E.type),null;case 22:case 23:return js(E),Tf(),T!==null&&Z(Rr),T=E.flags,T&65536?(E.flags=T&-65537|128,E):null;case 24:return _a(zi),null;case 25:return null;default:return null}}function V0(T,E){switch(of(E),E.tag){case 3:_a(zi),_();break;case 26:case 27:case 5:se(E);break;case 4:_();break;case 31:E.memoizedState!==null&&js(E);break;case 13:js(E);break;case 19:Z(Ui);break;case 10:_a(E.type);break;case 22:case 23:js(E),Tf(),T!==null&&Z(Rr);break;case 24:_a(zi)}}function oh(T,E){try{var B=E.updateQueue,N=B!==null?B.lastEffect:null;if(N!==null){var z=N.next;B=z;do{if((B.tag&T)===T){N=void 0;var Q=B.create,ee=B.inst;N=Q(),ee.destroy=N}B=B.next}while(B!==z)}}catch(ae){vi(E,E.return,ae)}}function Yn(T,E,B){try{var N=E.updateQueue,z=N!==null?N.lastEffect:null;if(z!==null){var Q=z.next;N=Q;do{if((N.tag&T)===T){var ee=N.inst,ae=ee.destroy;if(ae!==void 0){ee.destroy=void 0,z=E;var oe=B,we=ae;try{we()}catch(Ee){vi(z,oe,Ee)}}}N=N.next}while(N!==Q)}}catch(Ee){vi(E,E.return,Ee)}}function Y0(T){var E=T.updateQueue;if(E!==null){var B=T.stateNode;try{Dv(E,B)}catch(N){vi(T,T.return,N)}}}function X0(T,E,B){B.props=Ir(T.type,T.memoizedProps),B.state=T.memoizedState;try{B.componentWillUnmount()}catch(N){vi(T,E,N)}}function lh(T,E){try{var B=T.ref;if(B!==null){switch(T.tag){case 26:case 27:case 5:var N=T.stateNode;break;case 30:N=T.stateNode;break;default:N=T.stateNode}typeof B=="function"?T.refCleanup=B(N):B.current=N}}catch(z){vi(T,E,z)}}function Ia(T,E){var B=T.ref,N=T.refCleanup;if(B!==null)if(typeof N=="function")try{N()}catch(z){vi(T,E,z)}finally{T.refCleanup=null,T=T.alternate,T!=null&&(T.refCleanup=null)}else if(typeof B=="function")try{B(null)}catch(z){vi(T,E,z)}else B.current=null}function z0(T){var E=T.type,B=T.memoizedProps,N=T.stateNode;try{e:switch(E){case"button":case"input":case"select":case"textarea":B.autoFocus&&N.focus();break e;case"img":B.src?N.src=B.src:B.srcSet&&(N.srcset=B.srcSet)}}catch(z){vi(T,T.return,z)}}function em(T,E,B){try{var N=T.stateNode;JT(N,T.type,B,E),N[ye]=E}catch(z){vi(T,T.return,z)}}function W0(T){return T.tag===5||T.tag===3||T.tag===26||T.tag===27&&Qn(T.type)||T.tag===4}function tm(T){e:for(;;){for(;T.sibling===null;){if(T.return===null||W0(T.return))return null;T=T.return}for(T.sibling.return=T.return,T=T.sibling;T.tag!==5&&T.tag!==6&&T.tag!==18;){if(T.tag===27&&Qn(T.type)||T.flags&2||T.child===null||T.tag===4)continue e;T.child.return=T,T=T.child}if(!(T.flags&2))return T.stateNode}}function im(T,E,B){var N=T.tag;if(N===5||N===6)T=T.stateNode,E?(B.nodeType===9?B.body:B.nodeName==="HTML"?B.ownerDocument.body:B).insertBefore(T,E):(E=B.nodeType===9?B.body:B.nodeName==="HTML"?B.ownerDocument.body:B,E.appendChild(T),B=B._reactRootContainer,B!=null||E.onclick!==null||(E.onclick=$a));else if(N!==4&&(N===27&&Qn(T.type)&&(B=T.stateNode,E=null),T=T.child,T!==null))for(im(T,E,B),T=T.sibling;T!==null;)im(T,E,B),T=T.sibling}function Vd(T,E,B){var N=T.tag;if(N===5||N===6)T=T.stateNode,E?B.insertBefore(T,E):B.appendChild(T);else if(N!==4&&(N===27&&Qn(T.type)&&(B=T.stateNode),T=T.child,T!==null))for(Vd(T,E,B),T=T.sibling;T!==null;)Vd(T,E,B),T=T.sibling}function j0(T){var E=T.stateNode,B=T.memoizedProps;try{for(var N=T.type,z=E.attributes;z.length;)E.removeAttributeNode(z[0]);ls(E,N,B),E[ki]=T,E[ye]=B}catch(Q){vi(T,T.return,Q)}}var nn=!1,Ki=!1,sm=!1,K0=typeof WeakSet=="function"?WeakSet:Set,is=null;function RT(T,E){if(T=T.containerInfo,Am=lu,T=nv(T),Qc(T)){if("selectionStart"in T)var B={start:T.selectionStart,end:T.selectionEnd};else e:{B=(B=T.ownerDocument)&&B.defaultView||window;var N=B.getSelection&&B.getSelection();if(N&&N.rangeCount!==0){B=N.anchorNode;var z=N.anchorOffset,Q=N.focusNode;N=N.focusOffset;try{B.nodeType,Q.nodeType}catch{B=null;break e}var ee=0,ae=-1,oe=-1,we=0,Ee=0,Re=T,Ce=null;t:for(;;){for(var be;Re!==B||z!==0&&Re.nodeType!==3||(ae=ee+z),Re!==Q||N!==0&&Re.nodeType!==3||(oe=ee+N),Re.nodeType===3&&(ee+=Re.nodeValue.length),(be=Re.firstChild)!==null;)Ce=Re,Re=be;for(;;){if(Re===T)break t;if(Ce===B&&++we===z&&(ae=ee),Ce===Q&&++Ee===N&&(oe=ee),(be=Re.nextSibling)!==null)break;Re=Ce,Ce=Re.parentNode}Re=be}B=ae===-1||oe===-1?null:{start:ae,end:oe}}else B=null}B=B||{start:0,end:0}}else B=null;for(bm={focusedElem:T,selectionRange:B},lu=!1,is=E;is!==null;)if(E=is,T=E.child,(E.subtreeFlags&1028)!==0&&T!==null)T.return=E,is=T;else for(;is!==null;){switch(E=is,Q=E.alternate,T=E.flags,E.tag){case 0:if(T&4&&(T=E.updateQueue,T=T!==null?T.events:null,T!==null))for(B=0;B<T.length;B++)z=T[B],z.ref.impl=z.nextImpl;break;case 11:case 15:break;case 1:if(T&1024&&Q!==null){T=void 0,B=E,z=Q.memoizedProps,Q=Q.memoizedState,N=B.stateNode;try{var ze=Ir(B.type,z);T=N.getSnapshotBeforeUpdate(ze,Q),N.__reactInternalSnapshotBeforeUpdate=T}catch(Dt){vi(B,B.return,Dt)}}break;case 3:if(T&1024){if(T=E.stateNode.containerInfo,B=T.nodeType,B===9)Lm(T);else if(B===1)switch(T.nodeName){case"HEAD":case"HTML":case"BODY":Lm(T);break;default:T.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(T&1024)throw Error(v(163))}if(T=E.sibling,T!==null){T.return=E.return,is=T;break}is=E.return}}function $0(T,E,B){var N=B.flags;switch(B.tag){case 0:case 11:case 15:on(T,B),N&4&&oh(5,B);break;case 1:if(on(T,B),N&4)if(T=B.stateNode,E===null)try{T.componentDidMount()}catch(ee){vi(B,B.return,ee)}else{var z=Ir(B.type,E.memoizedProps);E=E.memoizedState;try{T.componentDidUpdate(z,E,T.__reactInternalSnapshotBeforeUpdate)}catch(ee){vi(B,B.return,ee)}}N&64&&Y0(B),N&512&&lh(B,B.return);break;case 3:if(on(T,B),N&64&&(T=B.updateQueue,T!==null)){if(E=null,B.child!==null)switch(B.child.tag){case 27:case 5:E=B.child.stateNode;break;case 1:E=B.child.stateNode}try{Dv(T,E)}catch(ee){vi(B,B.return,ee)}}break;case 27:E===null&&N&4&&j0(B);case 26:case 5:on(T,B),E===null&&N&4&&z0(B),N&512&&lh(B,B.return);break;case 12:on(T,B);break;case 31:on(T,B),N&4&&Z0(T,B);break;case 13:on(T,B),N&4&&q0(T,B),N&64&&(T=B.memoizedState,T!==null&&(T=T.dehydrated,T!==null&&(B=HT.bind(null,B),aC(T,B))));break;case 22:if(N=B.memoizedState!==null||nn,!N){E=E!==null&&E.memoizedState!==null||Ki,z=nn;var Q=Ki;nn=N,(Ki=E)&&!Q?ln(T,B,(B.subtreeFlags&8772)!==0):on(T,B),nn=z,Ki=Q}break;case 30:break;default:on(T,B)}}function Q0(T){var E=T.alternate;E!==null&&(T.alternate=null,Q0(E)),T.child=null,T.deletions=null,T.sibling=null,T.tag===5&&(E=T.stateNode,E!==null&&Ol(E)),T.stateNode=null,T.return=null,T.dependencies=null,T.memoizedProps=null,T.memoizedState=null,T.pendingProps=null,T.stateNode=null,T.updateQueue=null}var Bi=null,Bs=!1;function rn(T,E,B){for(B=B.child;B!==null;)J0(T,E,B),B=B.sibling}function J0(T,E,B){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(qt,B)}catch{}switch(B.tag){case 26:Ki||Ia(B,E),rn(T,E,B),B.memoizedState?B.memoizedState.count--:B.stateNode&&(B=B.stateNode,B.parentNode.removeChild(B));break;case 27:Ki||Ia(B,E);var N=Bi,z=Bs;Qn(B.type)&&(Bi=B.stateNode,Bs=!1),rn(T,E,B),vh(B.stateNode),Bi=N,Bs=z;break;case 5:Ki||Ia(B,E);case 6:if(N=Bi,z=Bs,Bi=null,rn(T,E,B),Bi=N,Bs=z,Bi!==null)if(Bs)try{(Bi.nodeType===9?Bi.body:Bi.nodeName==="HTML"?Bi.ownerDocument.body:Bi).removeChild(B.stateNode)}catch(Q){vi(B,E,Q)}else try{Bi.removeChild(B.stateNode)}catch(Q){vi(B,E,Q)}break;case 18:Bi!==null&&(Bs?(T=Bi,Yy(T.nodeType===9?T.body:T.nodeName==="HTML"?T.ownerDocument.body:T,B.stateNode),Jo(T)):Yy(Bi,B.stateNode));break;case 4:N=Bi,z=Bs,Bi=B.stateNode.containerInfo,Bs=!0,rn(T,E,B),Bi=N,Bs=z;break;case 0:case 11:case 14:case 15:Yn(2,B,E),Ki||Yn(4,B,E),rn(T,E,B);break;case 1:Ki||(Ia(B,E),N=B.stateNode,typeof N.componentWillUnmount=="function"&&X0(B,E,N)),rn(T,E,B);break;case 21:rn(T,E,B);break;case 22:Ki=(N=Ki)||B.memoizedState!==null,rn(T,E,B),Ki=N;break;default:rn(T,E,B)}}function Z0(T,E){if(E.memoizedState===null&&(T=E.alternate,T!==null&&(T=T.memoizedState,T!==null))){T=T.dehydrated;try{Jo(T)}catch(B){vi(E,E.return,B)}}}function q0(T,E){if(E.memoizedState===null&&(T=E.alternate,T!==null&&(T=T.memoizedState,T!==null&&(T=T.dehydrated,T!==null))))try{Jo(T)}catch(B){vi(E,E.return,B)}}function PT(T){switch(T.tag){case 31:case 13:case 19:var E=T.stateNode;return E===null&&(E=T.stateNode=new K0),E;case 22:return T=T.stateNode,E=T._retryCache,E===null&&(E=T._retryCache=new K0),E;default:throw Error(v(435,T.tag))}}function Yd(T,E){var B=PT(T);E.forEach(function(N){if(!B.has(N)){B.add(N);var z=kT.bind(null,T,N);N.then(z,z)}})}function Ds(T,E){var B=E.deletions;if(B!==null)for(var N=0;N<B.length;N++){var z=B[N],Q=T,ee=E,ae=ee;e:for(;ae!==null;){switch(ae.tag){case 27:if(Qn(ae.type)){Bi=ae.stateNode,Bs=!1;break e}break;case 5:Bi=ae.stateNode,Bs=!1;break e;case 3:case 4:Bi=ae.stateNode.containerInfo,Bs=!0;break e}ae=ae.return}if(Bi===null)throw Error(v(160));J0(Q,ee,z),Bi=null,Bs=!1,Q=z.alternate,Q!==null&&(Q.return=null),z.return=null}if(E.subtreeFlags&13886)for(E=E.child;E!==null;)_0(E,T),E=E.sibling}var xa=null;function _0(T,E){var B=T.alternate,N=T.flags;switch(T.tag){case 0:case 11:case 14:case 15:Ds(E,T),Fs(T),N&4&&(Yn(3,T,T.return),oh(3,T),Yn(5,T,T.return));break;case 1:Ds(E,T),Fs(T),N&512&&(Ki||B===null||Ia(B,B.return)),N&64&&nn&&(T=T.updateQueue,T!==null&&(N=T.callbacks,N!==null&&(B=T.shared.hiddenCallbacks,T.shared.hiddenCallbacks=B===null?N:B.concat(N))));break;case 26:var z=xa;if(Ds(E,T),Fs(T),N&512&&(Ki||B===null||Ia(B,B.return)),N&4){var Q=B!==null?B.memoizedState:null;if(N=T.memoizedState,B===null)if(N===null)if(T.stateNode===null){e:{N=T.type,B=T.memoizedProps,z=z.ownerDocument||z;t:switch(N){case"title":Q=z.getElementsByTagName("title")[0],(!Q||Q[va]||Q[ki]||Q.namespaceURI==="http://www.w3.org/2000/svg"||Q.hasAttribute("itemprop"))&&(Q=z.createElement(N),z.head.insertBefore(Q,z.querySelector("head > title"))),ls(Q,N,B),Q[ki]=T,ts(Q),N=Q;break e;case"link":var ee=_y("link","href",z).get(N+(B.href||""));if(ee){for(var ae=0;ae<ee.length;ae++)if(Q=ee[ae],Q.getAttribute("href")===(B.href==null||B.href===""?null:B.href)&&Q.getAttribute("rel")===(B.rel==null?null:B.rel)&&Q.getAttribute("title")===(B.title==null?null:B.title)&&Q.getAttribute("crossorigin")===(B.crossOrigin==null?null:B.crossOrigin)){ee.splice(ae,1);break t}}Q=z.createElement(N),ls(Q,N,B),z.head.appendChild(Q);break;case"meta":if(ee=_y("meta","content",z).get(N+(B.content||""))){for(ae=0;ae<ee.length;ae++)if(Q=ee[ae],Q.getAttribute("content")===(B.content==null?null:""+B.content)&&Q.getAttribute("name")===(B.name==null?null:B.name)&&Q.getAttribute("property")===(B.property==null?null:B.property)&&Q.getAttribute("http-equiv")===(B.httpEquiv==null?null:B.httpEquiv)&&Q.getAttribute("charset")===(B.charSet==null?null:B.charSet)){ee.splice(ae,1);break t}}Q=z.createElement(N),ls(Q,N,B),z.head.appendChild(Q);break;default:throw Error(v(468,N))}Q[ki]=T,ts(Q),N=Q}T.stateNode=N}else ex(z,T.type,T.stateNode);else T.stateNode=qy(z,N,T.memoizedProps);else Q!==N?(Q===null?B.stateNode!==null&&(B=B.stateNode,B.parentNode.removeChild(B)):Q.count--,N===null?ex(z,T.type,T.stateNode):qy(z,N,T.memoizedProps)):N===null&&T.stateNode!==null&&em(T,T.memoizedProps,B.memoizedProps)}break;case 27:Ds(E,T),Fs(T),N&512&&(Ki||B===null||Ia(B,B.return)),B!==null&&N&4&&em(T,T.memoizedProps,B.memoizedProps);break;case 5:if(Ds(E,T),Fs(T),N&512&&(Ki||B===null||Ia(B,B.return)),T.flags&32){z=T.stateNode;try{xo(z,"")}catch(ze){vi(T,T.return,ze)}}N&4&&T.stateNode!=null&&(z=T.memoizedProps,em(T,z,B!==null?B.memoizedProps:z)),N&1024&&(sm=!0);break;case 6:if(Ds(E,T),Fs(T),N&4){if(T.stateNode===null)throw Error(v(162));N=T.memoizedProps,B=T.stateNode;try{B.nodeValue=N}catch(ze){vi(T,T.return,ze)}}break;case 3:if(au=null,z=xa,xa=iu(E.containerInfo),Ds(E,T),xa=z,Fs(T),N&4&&B!==null&&B.memoizedState.isDehydrated)try{Jo(E.containerInfo)}catch(ze){vi(T,T.return,ze)}sm&&(sm=!1,ey(T));break;case 4:N=xa,xa=iu(T.stateNode.containerInfo),Ds(E,T),Fs(T),xa=N;break;case 12:Ds(E,T),Fs(T);break;case 31:Ds(E,T),Fs(T),N&4&&(N=T.updateQueue,N!==null&&(T.updateQueue=null,Yd(T,N)));break;case 13:Ds(E,T),Fs(T),T.child.flags&8192&&T.memoizedState!==null!=(B!==null&&B.memoizedState!==null)&&(zd=Be()),N&4&&(N=T.updateQueue,N!==null&&(T.updateQueue=null,Yd(T,N)));break;case 22:z=T.memoizedState!==null;var oe=B!==null&&B.memoizedState!==null,we=nn,Ee=Ki;if(nn=we||z,Ki=Ee||oe,Ds(E,T),Ki=Ee,nn=we,Fs(T),N&8192)e:for(E=T.stateNode,E._visibility=z?E._visibility&-2:E._visibility|1,z&&(B===null||oe||nn||Ki||Or(T)),B=null,E=T;;){if(E.tag===5||E.tag===26){if(B===null){oe=B=E;try{if(Q=oe.stateNode,z)ee=Q.style,typeof ee.setProperty=="function"?ee.setProperty("display","none","important"):ee.display="none";else{ae=oe.stateNode;var Re=oe.memoizedProps.style,Ce=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;ae.style.display=Ce==null||typeof Ce=="boolean"?"":(""+Ce).trim()}}catch(ze){vi(oe,oe.return,ze)}}}else if(E.tag===6){if(B===null){oe=E;try{oe.stateNode.nodeValue=z?"":oe.memoizedProps}catch(ze){vi(oe,oe.return,ze)}}}else if(E.tag===18){if(B===null){oe=E;try{var be=oe.stateNode;z?Xy(be,!0):Xy(oe.stateNode,!1)}catch(ze){vi(oe,oe.return,ze)}}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===T)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===T)break e;for(;E.sibling===null;){if(E.return===null||E.return===T)break e;B===E&&(B=null),E=E.return}B===E&&(B=null),E.sibling.return=E.return,E=E.sibling}N&4&&(N=T.updateQueue,N!==null&&(B=N.retryQueue,B!==null&&(N.retryQueue=null,Yd(T,B))));break;case 19:Ds(E,T),Fs(T),N&4&&(N=T.updateQueue,N!==null&&(T.updateQueue=null,Yd(T,N)));break;case 30:break;case 21:break;default:Ds(E,T),Fs(T)}}function Fs(T){var E=T.flags;if(E&2){try{for(var B,N=T.return;N!==null;){if(W0(N)){B=N;break}N=N.return}if(B==null)throw Error(v(160));switch(B.tag){case 27:var z=B.stateNode,Q=tm(T);Vd(T,Q,z);break;case 5:var ee=B.stateNode;B.flags&32&&(xo(ee,""),B.flags&=-33);var ae=tm(T);Vd(T,ae,ee);break;case 3:case 4:var oe=B.stateNode.containerInfo,we=tm(T);im(T,we,oe);break;default:throw Error(v(161))}}catch(Ee){vi(T,T.return,Ee)}T.flags&=-3}E&4096&&(T.flags&=-4097)}function ey(T){if(T.subtreeFlags&1024)for(T=T.child;T!==null;){var E=T;ey(E),E.tag===5&&E.flags&1024&&E.stateNode.reset(),T=T.sibling}}function on(T,E){if(E.subtreeFlags&8772)for(E=E.child;E!==null;)$0(T,E.alternate,E),E=E.sibling}function Or(T){for(T=T.child;T!==null;){var E=T;switch(E.tag){case 0:case 11:case 14:case 15:Yn(4,E,E.return),Or(E);break;case 1:Ia(E,E.return);var B=E.stateNode;typeof B.componentWillUnmount=="function"&&X0(E,E.return,B),Or(E);break;case 27:vh(E.stateNode);case 26:case 5:Ia(E,E.return),Or(E);break;case 22:E.memoizedState===null&&Or(E);break;case 30:Or(E);break;default:Or(E)}T=T.sibling}}function ln(T,E,B){for(B=B&&(E.subtreeFlags&8772)!==0,E=E.child;E!==null;){var N=E.alternate,z=T,Q=E,ee=Q.flags;switch(Q.tag){case 0:case 11:case 15:ln(z,Q,B),oh(4,Q);break;case 1:if(ln(z,Q,B),N=Q,z=N.stateNode,typeof z.componentDidMount=="function")try{z.componentDidMount()}catch(we){vi(N,N.return,we)}if(N=Q,z=N.updateQueue,z!==null){var ae=N.stateNode;try{var oe=z.shared.hiddenCallbacks;if(oe!==null)for(z.shared.hiddenCallbacks=null,z=0;z<oe.length;z++)Bv(oe[z],ae)}catch(we){vi(N,N.return,we)}}B&&ee&64&&Y0(Q),lh(Q,Q.return);break;case 27:j0(Q);case 26:case 5:ln(z,Q,B),B&&N===null&&ee&4&&z0(Q),lh(Q,Q.return);break;case 12:ln(z,Q,B);break;case 31:ln(z,Q,B),B&&ee&4&&Z0(z,Q);break;case 13:ln(z,Q,B),B&&ee&4&&q0(z,Q);break;case 22:Q.memoizedState===null&&ln(z,Q,B),lh(Q,Q.return);break;case 30:break;default:ln(z,Q,B)}E=E.sibling}}function am(T,E){var B=null;T!==null&&T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(B=T.memoizedState.cachePool.pool),T=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(T=E.memoizedState.cachePool.pool),T!==B&&(T!=null&&T.refCount++,B!=null&&$l(B))}function nm(T,E){T=null,E.alternate!==null&&(T=E.alternate.memoizedState.cache),E=E.memoizedState.cache,E!==T&&(E.refCount++,T!=null&&$l(T))}function wa(T,E,B,N){if(E.subtreeFlags&10256)for(E=E.child;E!==null;)ty(T,E,B,N),E=E.sibling}function ty(T,E,B,N){var z=E.flags;switch(E.tag){case 0:case 11:case 15:wa(T,E,B,N),z&2048&&oh(9,E);break;case 1:wa(T,E,B,N);break;case 3:wa(T,E,B,N),z&2048&&(T=null,E.alternate!==null&&(T=E.alternate.memoizedState.cache),E=E.memoizedState.cache,E!==T&&(E.refCount++,T!=null&&$l(T)));break;case 12:if(z&2048){wa(T,E,B,N),T=E.stateNode;try{var Q=E.memoizedProps,ee=Q.id,ae=Q.onPostCommit;typeof ae=="function"&&ae(ee,E.alternate===null?"mount":"update",T.passiveEffectDuration,-0)}catch(oe){vi(E,E.return,oe)}}else wa(T,E,B,N);break;case 31:wa(T,E,B,N);break;case 13:wa(T,E,B,N);break;case 23:break;case 22:Q=E.stateNode,ee=E.alternate,E.memoizedState!==null?Q._visibility&2?wa(T,E,B,N):hh(T,E):Q._visibility&2?wa(T,E,B,N):(Q._visibility|=2,ko(T,E,B,N,(E.subtreeFlags&10256)!==0||!1)),z&2048&&am(ee,E);break;case 24:wa(T,E,B,N),z&2048&&nm(E.alternate,E);break;default:wa(T,E,B,N)}}function ko(T,E,B,N,z){for(z=z&&((E.subtreeFlags&10256)!==0||!1),E=E.child;E!==null;){var Q=T,ee=E,ae=B,oe=N,we=ee.flags;switch(ee.tag){case 0:case 11:case 15:ko(Q,ee,ae,oe,z),oh(8,ee);break;case 23:break;case 22:var Ee=ee.stateNode;ee.memoizedState!==null?Ee._visibility&2?ko(Q,ee,ae,oe,z):hh(Q,ee):(Ee._visibility|=2,ko(Q,ee,ae,oe,z)),z&&we&2048&&am(ee.alternate,ee);break;case 24:ko(Q,ee,ae,oe,z),z&&we&2048&&nm(ee.alternate,ee);break;default:ko(Q,ee,ae,oe,z)}E=E.sibling}}function hh(T,E){if(E.subtreeFlags&10256)for(E=E.child;E!==null;){var B=T,N=E,z=N.flags;switch(N.tag){case 22:hh(B,N),z&2048&&am(N.alternate,N);break;case 24:hh(B,N),z&2048&&nm(N.alternate,N);break;default:hh(B,N)}E=E.sibling}}var dh=8192;function Uo(T,E,B){if(T.subtreeFlags&dh)for(T=T.child;T!==null;)iy(T,E,B),T=T.sibling}function iy(T,E,B){switch(T.tag){case 26:Uo(T,E,B),T.flags&dh&&T.memoizedState!==null&&pC(B,xa,T.memoizedState,T.memoizedProps);break;case 5:Uo(T,E,B);break;case 3:case 4:var N=xa;xa=iu(T.stateNode.containerInfo),Uo(T,E,B),xa=N;break;case 22:T.memoizedState===null&&(N=T.alternate,N!==null&&N.memoizedState!==null?(N=dh,dh=16777216,Uo(T,E,B),dh=N):Uo(T,E,B));break;default:Uo(T,E,B)}}function sy(T){var E=T.alternate;if(E!==null&&(T=E.child,T!==null)){E.child=null;do E=T.sibling,T.sibling=null,T=E;while(T!==null)}}function uh(T){var E=T.deletions;if(T.flags&16){if(E!==null)for(var B=0;B<E.length;B++){var N=E[B];is=N,ny(N,T)}sy(T)}if(T.subtreeFlags&10256)for(T=T.child;T!==null;)ay(T),T=T.sibling}function ay(T){switch(T.tag){case 0:case 11:case 15:uh(T),T.flags&2048&&Yn(9,T,T.return);break;case 3:uh(T);break;case 12:uh(T);break;case 22:var E=T.stateNode;T.memoizedState!==null&&E._visibility&2&&(T.return===null||T.return.tag!==13)?(E._visibility&=-3,Xd(T)):uh(T);break;default:uh(T)}}function Xd(T){var E=T.deletions;if(T.flags&16){if(E!==null)for(var B=0;B<E.length;B++){var N=E[B];is=N,ny(N,T)}sy(T)}for(T=T.child;T!==null;){switch(E=T,E.tag){case 0:case 11:case 15:Yn(8,E,E.return),Xd(E);break;case 22:B=E.stateNode,B._visibility&2&&(B._visibility&=-3,Xd(E));break;default:Xd(E)}T=T.sibling}}function ny(T,E){for(;is!==null;){var B=is;switch(B.tag){case 0:case 11:case 15:Yn(8,B,E);break;case 23:case 22:if(B.memoizedState!==null&&B.memoizedState.cachePool!==null){var N=B.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:$l(B.memoizedState.cache)}if(N=B.child,N!==null)N.return=B,is=N;else e:for(B=T;is!==null;){N=is;var z=N.sibling,Q=N.return;if(Q0(N),N===B){is=null;break e}if(z!==null){z.return=Q,is=z;break e}is=Q}}}var BT={getCacheForType:function(T){var E=rs(zi),B=E.data.get(T);return B===void 0&&(B=T(),E.data.set(T,B)),B},cacheSignal:function(){return rs(zi).controller.signal}},DT=typeof WeakMap=="function"?WeakMap:Map,mi=0,Ti=null,Jt=null,_t=0,pi=0,Ks=null,Xn=!1,Vo=!1,rm=!1,hn=0,Ni=0,zn=0,Nr=0,om=0,$s=0,Yo=0,ch=null,Is=null,lm=!1,zd=0,ry=0,Wd=1/0,jd=null,Wn=null,$i=0,jn=null,Xo=null,dn=0,hm=0,dm=null,oy=null,fh=0,um=null;function Qs(){return mi&2&&_t!==0?_t&-_t:F.T!==null?vm():Il()}function ly(){if($s===0)if(!(_t&536870912)||ai){var T=Bn;Bn<<=1,!(Bn&3932160)&&(Bn=262144),$s=T}else $s=536870912;return T=Ws.current,T!==null&&(T.flags|=32),$s}function Os(T,E,B){(T===Ti&&(pi===2||pi===9)||T.cancelPendingCommit!==null)&&(zo(T,0),Kn(T,_t,$s,!1)),xr(T,B),(!(mi&2)||T!==Ti)&&(T===Ti&&(!(mi&2)&&(Nr|=B),Ni===4&&Kn(T,_t,$s,!1)),Oa(T))}function hy(T,E,B){if(mi&6)throw Error(v(327));var N=!B&&(E&127)===0&&(E&T.expiredLanes)===0||yr(T,E),z=N?OT(T,E):fm(T,E,!0),Q=N;do{if(z===0){Vo&&!N&&Kn(T,E,0,!1);break}else{if(B=T.current.alternate,Q&&!FT(B)){z=fm(T,E,!1),Q=!1;continue}if(z===2){if(Q=E,T.errorRecoveryDisabledLanes&Q)var ee=0;else ee=T.pendingLanes&-536870913,ee=ee!==0?ee:ee&536870912?536870912:0;if(ee!==0){E=ee;e:{var ae=T;z=ch;var oe=ae.current.memoizedState.isDehydrated;if(oe&&(zo(ae,ee).flags|=256),ee=fm(ae,ee,!1),ee!==2){if(rm&&!oe){ae.errorRecoveryDisabledLanes|=Q,Nr|=Q,z=4;break e}Q=Is,Is=z,Q!==null&&(Is===null?Is=Q:Is.push.apply(Is,Q))}z=ee}if(Q=!1,z!==2)continue}}if(z===1){zo(T,0),Kn(T,E,0,!0);break}e:{switch(N=T,Q=z,Q){case 0:case 1:throw Error(v(345));case 4:if((E&4194048)!==E)break;case 6:Kn(N,E,$s,!Xn);break e;case 2:Is=null;break;case 3:case 5:break;default:throw Error(v(329))}if((E&62914560)===E&&(z=zd+300-Be(),10<z)){if(Kn(N,E,$s,!Xn),ho(N,0,!0)!==0)break e;dn=E,N.timeoutHandle=Uy(dy.bind(null,N,B,Is,jd,lm,E,$s,Nr,Yo,Xn,Q,"Throttled",-0,0),z);break e}dy(N,B,Is,jd,lm,E,$s,Nr,Yo,Xn,Q,null,-0,0)}}break}while(!0);Oa(T)}function dy(T,E,B,N,z,Q,ee,ae,oe,we,Ee,Re,Ce,be){if(T.timeoutHandle=-1,Re=E.subtreeFlags,Re&8192||(Re&16785408)===16785408){Re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$a},iy(E,Q,Re);var ze=(Q&62914560)===Q?zd-Be():(Q&4194048)===Q?ry-Be():0;if(ze=vC(Re,ze),ze!==null){dn=Q,T.cancelPendingCommit=ze(yy.bind(null,T,E,Q,B,N,z,ee,ae,oe,Ee,Re,null,Ce,be)),Kn(T,Q,ee,!we);return}}yy(T,E,Q,B,N,z,ee,ae,oe)}function FT(T){for(var E=T;;){var B=E.tag;if((B===0||B===11||B===15)&&E.flags&16384&&(B=E.updateQueue,B!==null&&(B=B.stores,B!==null)))for(var N=0;N<B.length;N++){var z=B[N],Q=z.getSnapshot;z=z.value;try{if(!Xs(Q(),z))return!1}catch{return!1}}if(B=E.child,E.subtreeFlags&16384&&B!==null)B.return=E,E=B;else{if(E===T)break;for(;E.sibling===null;){if(E.return===null||E.return===T)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function Kn(T,E,B,N){E&=~om,E&=~Nr,T.suspendedLanes|=E,T.pingedLanes&=~E,N&&(T.warmLanes|=E),N=T.expirationTimes;for(var z=E;0<z;){var Q=31-Di(z),ee=1<<Q;N[Q]=-1,z&=~ee}B!==0&&Dl(T,B,E)}function Kd(){return mi&6?!0:(mh(0),!1)}function cm(){if(Jt!==null){if(pi===0)var T=Jt.return;else T=Jt,qa=Mr=null,Lf(T),Io=null,Jl=0,T=Jt;for(;T!==null;)V0(T.alternate,T),T=T.return;Jt=null}}function zo(T,E){var B=T.timeoutHandle;B!==-1&&(T.timeoutHandle=-1,_T(B)),B=T.cancelPendingCommit,B!==null&&(T.cancelPendingCommit=null,B()),dn=0,cm(),Ti=T,Jt=B=Ja(T.current,null),_t=E,pi=0,Ks=null,Xn=!1,Vo=yr(T,E),rm=!1,Yo=$s=om=Nr=zn=Ni=0,Is=ch=null,lm=!1,E&8&&(E|=E&32);var N=T.entangledLanes;if(N!==0)for(T=T.entanglements,N&=E;0<N;){var z=31-Di(N),Q=1<<z;E|=T[z],N&=~Q}return hn=E,md(),B}function uy(T,E){Yt=null,F.H=ah,E===Fo||E===Td?(E=Mv(),pi=3):E===pf?(E=Mv(),pi=4):pi=E===zf?8:E!==null&&typeof E=="object"&&typeof E.then=="function"?6:1,Ks=E,Jt===null&&(Ni=1,Nd(T,ra(E,T.current)))}function cy(){var T=Ws.current;return T===null?!0:(_t&4194048)===_t?da===null:(_t&62914560)===_t||_t&536870912?T===da:!1}function fy(){var T=F.H;return F.H=ah,T===null?ah:T}function my(){var T=F.A;return F.A=BT,T}function $d(){Ni=4,Xn||(_t&4194048)!==_t&&Ws.current!==null||(Vo=!0),!(zn&134217727)&&!(Nr&134217727)||Ti===null||Kn(Ti,_t,$s,!1)}function fm(T,E,B){var N=mi;mi|=2;var z=fy(),Q=my();(Ti!==T||_t!==E)&&(jd=null,zo(T,E)),E=!1;var ee=Ni;e:do try{if(pi!==0&&Jt!==null){var ae=Jt,oe=Ks;switch(pi){case 8:cm(),ee=6;break e;case 3:case 2:case 9:case 6:Ws.current===null&&(E=!0);var we=pi;if(pi=0,Ks=null,Wo(T,ae,oe,we),B&&Vo){ee=0;break e}break;default:we=pi,pi=0,Ks=null,Wo(T,ae,oe,we)}}IT(),ee=Ni;break}catch(Ee){uy(T,Ee)}while(!0);return E&&T.shellSuspendCounter++,qa=Mr=null,mi=N,F.H=z,F.A=Q,Jt===null&&(Ti=null,_t=0,md()),ee}function IT(){for(;Jt!==null;)gy(Jt)}function OT(T,E){var B=mi;mi|=2;var N=fy(),z=my();Ti!==T||_t!==E?(jd=null,Wd=Be()+500,zo(T,E)):Vo=yr(T,E);e:do try{if(pi!==0&&Jt!==null){E=Jt;var Q=Ks;t:switch(pi){case 1:pi=0,Ks=null,Wo(T,E,Q,1);break;case 2:case 9:if(bv(Q)){pi=0,Ks=null,py(E);break}E=function(){pi!==2&&pi!==9||Ti!==T||(pi=7),Oa(T)},Q.then(E,E);break e;case 3:pi=7;break e;case 4:pi=5;break e;case 7:bv(Q)?(pi=0,Ks=null,py(E)):(pi=0,Ks=null,Wo(T,E,Q,7));break;case 5:var ee=null;switch(Jt.tag){case 26:ee=Jt.memoizedState;case 5:case 27:var ae=Jt;if(ee?tx(ee):ae.stateNode.complete){pi=0,Ks=null;var oe=ae.sibling;if(oe!==null)Jt=oe;else{var we=ae.return;we!==null?(Jt=we,Qd(we)):Jt=null}break t}}pi=0,Ks=null,Wo(T,E,Q,5);break;case 6:pi=0,Ks=null,Wo(T,E,Q,6);break;case 8:cm(),Ni=6;break e;default:throw Error(v(462))}}NT();break}catch(Ee){uy(T,Ee)}while(!0);return qa=Mr=null,F.H=N,F.A=z,mi=B,Jt!==null?0:(Ti=null,_t=0,md(),Ni)}function NT(){for(;Jt!==null&&!Se();)gy(Jt)}function gy(T){var E=k0(T.alternate,T,hn);T.memoizedProps=T.pendingProps,E===null?Qd(T):Jt=E}function py(T){var E=T,B=E.alternate;switch(E.tag){case 15:case 0:E=F0(B,E,E.pendingProps,E.type,void 0,_t);break;case 11:E=F0(B,E,E.pendingProps,E.type.render,E.ref,_t);break;case 5:Lf(E);default:V0(B,E),E=Jt=mv(E,hn),E=k0(B,E,hn)}T.memoizedProps=T.pendingProps,E===null?Qd(T):Jt=E}function Wo(T,E,B,N){qa=Mr=null,Lf(E),Io=null,Jl=0;var z=E.return;try{if(AT(T,z,E,B,_t)){Ni=1,Nd(T,ra(B,T.current)),Jt=null;return}}catch(Q){if(z!==null)throw Jt=z,Q;Ni=1,Nd(T,ra(B,T.current)),Jt=null;return}E.flags&32768?(ai||N===1?T=!0:Vo||_t&536870912?T=!1:(Xn=T=!0,(N===2||N===9||N===3||N===6)&&(N=Ws.current,N!==null&&N.tag===13&&(N.flags|=16384))),vy(E,T)):Qd(E)}function Qd(T){var E=T;do{if(E.flags&32768){vy(E,Xn);return}T=E.return;var B=MT(E.alternate,E,hn);if(B!==null){Jt=B;return}if(E=E.sibling,E!==null){Jt=E;return}Jt=E=T}while(E!==null);Ni===0&&(Ni=5)}function vy(T,E){do{var B=LT(T.alternate,T);if(B!==null){B.flags&=32767,Jt=B;return}if(B=T.return,B!==null&&(B.flags|=32768,B.subtreeFlags=0,B.deletions=null),!E&&(T=T.sibling,T!==null)){Jt=T;return}Jt=T=B}while(T!==null);Ni=6,Jt=null}function yy(T,E,B,N,z,Q,ee,ae,oe){T.cancelPendingCommit=null;do Jd();while($i!==0);if(mi&6)throw Error(v(327));if(E!==null){if(E===T.current)throw Error(v(177));if(Q=E.lanes|E.childLanes,Q|=ef,Dc(T,B,Q,ee,ae,oe),T===Ti&&(Jt=Ti=null,_t=0),Xo=E,jn=T,dn=B,hm=Q,dm=z,oy=N,E.subtreeFlags&10256||E.flags&10256?(T.callbackNode=null,T.callbackPriority=0,UT(It,function(){return Cy(),null})):(T.callbackNode=null,T.callbackPriority=0),N=(E.flags&13878)!==0,E.subtreeFlags&13878||N){N=F.T,F.T=null,z=H.p,H.p=2,ee=mi,mi|=4;try{RT(T,E,B)}finally{mi=ee,H.p=z,F.T=N}}$i=1,xy(),wy(),Sy()}}function xy(){if($i===1){$i=0;var T=jn,E=Xo,B=(E.flags&13878)!==0;if(E.subtreeFlags&13878||B){B=F.T,F.T=null;var N=H.p;H.p=2;var z=mi;mi|=4;try{_0(E,T);var Q=bm,ee=nv(T.containerInfo),ae=Q.focusedElem,oe=Q.selectionRange;if(ee!==ae&&ae&&ae.ownerDocument&&av(ae.ownerDocument.documentElement,ae)){if(oe!==null&&Qc(ae)){var we=oe.start,Ee=oe.end;if(Ee===void 0&&(Ee=we),"selectionStart"in ae)ae.selectionStart=we,ae.selectionEnd=Math.min(Ee,ae.value.length);else{var Re=ae.ownerDocument||document,Ce=Re&&Re.defaultView||window;if(Ce.getSelection){var be=Ce.getSelection(),ze=ae.textContent.length,Dt=Math.min(oe.start,ze),wi=oe.end===void 0?Dt:Math.min(oe.end,ze);!be.extend&&Dt>wi&&(ee=wi,wi=Dt,Dt=ee);var pe=sv(ae,Dt),de=sv(ae,wi);if(pe&&de&&(be.rangeCount!==1||be.anchorNode!==pe.node||be.anchorOffset!==pe.offset||be.focusNode!==de.node||be.focusOffset!==de.offset)){var xe=Re.createRange();xe.setStart(pe.node,pe.offset),be.removeAllRanges(),Dt>wi?(be.addRange(xe),be.extend(de.node,de.offset)):(xe.setEnd(de.node,de.offset),be.addRange(xe))}}}}for(Re=[],be=ae;be=be.parentNode;)be.nodeType===1&&Re.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof ae.focus=="function"&&ae.focus(),ae=0;ae<Re.length;ae++){var Le=Re[ae];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}lu=!!Am,bm=Am=null}finally{mi=z,H.p=N,F.T=B}}T.current=E,$i=2}}function wy(){if($i===2){$i=0;var T=jn,E=Xo,B=(E.flags&8772)!==0;if(E.subtreeFlags&8772||B){B=F.T,F.T=null;var N=H.p;H.p=2;var z=mi;mi|=4;try{$0(T,E.alternate,E)}finally{mi=z,H.p=N,F.T=B}}$i=3}}function Sy(){if($i===4||$i===3){$i=0,Oe();var T=jn,E=Xo,B=dn,N=oy;E.subtreeFlags&10256||E.flags&10256?$i=5:($i=0,Xo=jn=null,Ty(T,T.pendingLanes));var z=T.pendingLanes;if(z===0&&(Wn=null),co(B),E=E.stateNode,jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(qt,E,void 0,(E.current.flags&128)===128)}catch{}if(N!==null){E=F.T,z=H.p,H.p=2,F.T=null;try{for(var Q=T.onRecoverableError,ee=0;ee<N.length;ee++){var ae=N[ee];Q(ae.value,{componentStack:ae.stack})}}finally{F.T=E,H.p=z}}dn&3&&Jd(),Oa(T),z=T.pendingLanes,B&261930&&z&42?T===um?fh++:(fh=0,um=T):fh=0,mh(0)}}function Ty(T,E){(T.pooledCacheLanes&=E)===0&&(E=T.pooledCache,E!=null&&(T.pooledCache=null,$l(E)))}function Jd(){return xy(),wy(),Sy(),Cy()}function Cy(){if($i!==5)return!1;var T=jn,E=hm;hm=0;var B=co(dn),N=F.T,z=H.p;try{H.p=32>B?32:B,F.T=null,B=dm,dm=null;var Q=jn,ee=dn;if($i=0,Xo=jn=null,dn=0,mi&6)throw Error(v(331));var ae=mi;if(mi|=4,ay(Q.current),ty(Q,Q.current,ee,B),mi=ae,mh(0,!1),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(qt,Q)}catch{}return!0}finally{H.p=z,F.T=N,Ty(T,E)}}function Ay(T,E,B){E=ra(B,E),E=Xf(T.stateNode,E,2),T=kn(T,E,2),T!==null&&(xr(T,2),Oa(T))}function vi(T,E,B){if(T.tag===3)Ay(T,T,B);else for(;E!==null;){if(E.tag===3){Ay(E,T,B);break}else if(E.tag===1){var N=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Wn===null||!Wn.has(N))){T=ra(B,T),B=b0(2),N=kn(E,B,2),N!==null&&(E0(B,N,E,T),xr(N,2),Oa(N));break}}E=E.return}}function mm(T,E,B){var N=T.pingCache;if(N===null){N=T.pingCache=new DT;var z=new Set;N.set(E,z)}else z=N.get(E),z===void 0&&(z=new Set,N.set(E,z));z.has(B)||(rm=!0,z.add(B),T=GT.bind(null,T,E,B),E.then(T,T))}function GT(T,E,B){var N=T.pingCache;N!==null&&N.delete(E),T.pingedLanes|=T.suspendedLanes&B,T.warmLanes&=~B,Ti===T&&(_t&B)===B&&(Ni===4||Ni===3&&(_t&62914560)===_t&&300>Be()-zd?!(mi&2)&&zo(T,0):om|=B,Yo===_t&&(Yo=0)),Oa(T)}function by(T,E){E===0&&(E=td()),T=Ar(T,E),T!==null&&(xr(T,E),Oa(T))}function HT(T){var E=T.memoizedState,B=0;E!==null&&(B=E.retryLane),by(T,B)}function kT(T,E){var B=0;switch(T.tag){case 31:case 13:var N=T.stateNode,z=T.memoizedState;z!==null&&(B=z.retryLane);break;case 19:N=T.stateNode;break;case 22:N=T.stateNode._retryCache;break;default:throw Error(v(314))}N!==null&&N.delete(E),by(T,B)}function UT(T,E){return Ne(T,E)}var Zd=null,jo=null,gm=!1,qd=!1,pm=!1,$n=0;function Oa(T){T!==jo&&T.next===null&&(jo===null?Zd=jo=T:jo=jo.next=T),qd=!0,gm||(gm=!0,YT())}function mh(T,E){if(!pm&&qd){pm=!0;do for(var B=!1,N=Zd;N!==null;){if(T!==0){var z=N.pendingLanes;if(z===0)var Q=0;else{var ee=N.suspendedLanes,ae=N.pingedLanes;Q=(1<<31-Di(42|T)+1)-1,Q&=z&~(ee&~ae),Q=Q&201326741?Q&201326741|1:Q?Q|2:0}Q!==0&&(B=!0,Ry(N,Q))}else Q=_t,Q=ho(N,N===Ti?Q:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),!(Q&3)||yr(N,Q)||(B=!0,Ry(N,Q));N=N.next}while(B);pm=!1}}function VT(){Ey()}function Ey(){qd=gm=!1;var T=0;$n!==0&&qT()&&(T=$n);for(var E=Be(),B=null,N=Zd;N!==null;){var z=N.next,Q=My(N,E);Q===0?(N.next=null,B===null?Zd=z:B.next=z,z===null&&(jo=B)):(B=N,(T!==0||Q&3)&&(qd=!0)),N=z}$i!==0&&$i!==5||mh(T),$n!==0&&($n=0)}function My(T,E){for(var B=T.suspendedLanes,N=T.pingedLanes,z=T.expirationTimes,Q=T.pendingLanes&-62914561;0<Q;){var ee=31-Di(Q),ae=1<<ee,oe=z[ee];oe===-1?(!(ae&B)||ae&N)&&(z[ee]=Pl(ae,E)):oe<=E&&(T.expiredLanes|=ae),Q&=~ae}if(E=Ti,B=_t,B=ho(T,T===E?B:0,T.cancelPendingCommit!==null||T.timeoutHandle!==-1),N=T.callbackNode,B===0||T===E&&(pi===2||pi===9)||T.cancelPendingCommit!==null)return N!==null&&N!==null&&Fe(N),T.callbackNode=null,T.callbackPriority=0;if(!(B&3)||yr(T,B)){if(E=B&-B,E===T.callbackPriority)return E;switch(N!==null&&Fe(N),co(B)){case 2:case 8:B=si;break;case 32:B=It;break;case 268435456:B=hi;break;default:B=It}return N=Ly.bind(null,T),B=Ne(B,N),T.callbackPriority=E,T.callbackNode=B,E}return N!==null&&N!==null&&Fe(N),T.callbackPriority=2,T.callbackNode=null,2}function Ly(T,E){if($i!==0&&$i!==5)return T.callbackNode=null,T.callbackPriority=0,null;var B=T.callbackNode;if(Jd()&&T.callbackNode!==B)return null;var N=_t;return N=ho(T,T===Ti?N:0,T.cancelPendingCommit!==null||T.timeoutHandle!==-1),N===0?null:(hy(T,N,E),My(T,Be()),T.callbackNode!=null&&T.callbackNode===B?Ly.bind(null,T):null)}function Ry(T,E){if(Jd())return null;hy(T,E,!0)}function YT(){eC(function(){mi&6?Ne(Gt,VT):Ey()})}function vm(){if($n===0){var T=Bo;T===0&&(T=cs,cs<<=1,!(cs&261888)&&(cs=256)),$n=T}return $n}function Py(T){return T==null||typeof T=="symbol"||typeof T=="boolean"?null:typeof T=="function"?T:rd(""+T)}function By(T,E){var B=E.ownerDocument.createElement("input");return B.name=E.name,B.value=E.value,T.id&&B.setAttribute("form",T.id),E.parentNode.insertBefore(B,E),T=new FormData(T),B.parentNode.removeChild(B),T}function XT(T,E,B,N,z){if(E==="submit"&&B&&B.stateNode===z){var Q=Py((z[ye]||null).action),ee=N.submitter;ee&&(E=(E=ee[ye]||null)?Py(E.formAction):ee.getAttribute("formAction"),E!==null&&(Q=E,ee=null));var ae=new dd("action","action",null,N,z);T.push({event:ae,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if($n!==0){var oe=ee?By(z,ee):new FormData(z);Gf(B,{pending:!0,data:oe,method:z.method,action:Q},null,oe)}}else typeof Q=="function"&&(ae.preventDefault(),oe=ee?By(z,ee):new FormData(z),Gf(B,{pending:!0,data:oe,method:z.method,action:Q},Q,oe))},currentTarget:z}]})}}for(var ym=0;ym<_c.length;ym++){var xm=_c[ym],zT=xm.toLowerCase(),WT=xm[0].toUpperCase()+xm.slice(1);ya(zT,"on"+WT)}ya(lv,"onAnimationEnd"),ya(hv,"onAnimationIteration"),ya(dv,"onAnimationStart"),ya("dblclick","onDoubleClick"),ya("focusin","onFocus"),ya("focusout","onBlur"),ya(oT,"onTransitionRun"),ya(lT,"onTransitionStart"),ya(hT,"onTransitionCancel"),ya(uv,"onTransitionEnd"),vo("onMouseEnter",["mouseout","mouseover"]),vo("onMouseLeave",["mouseout","mouseover"]),vo("onPointerEnter",["pointerout","pointerover"]),vo("onPointerLeave",["pointerout","pointerover"]),wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gh));function Dy(T,E){E=(E&4)!==0;for(var B=0;B<T.length;B++){var N=T[B],z=N.event;N=N.listeners;e:{var Q=void 0;if(E)for(var ee=N.length-1;0<=ee;ee--){var ae=N[ee],oe=ae.instance,we=ae.currentTarget;if(ae=ae.listener,oe!==Q&&z.isPropagationStopped())break e;Q=ae,z.currentTarget=we;try{Q(z)}catch(Ee){fd(Ee)}z.currentTarget=null,Q=oe}else for(ee=0;ee<N.length;ee++){if(ae=N[ee],oe=ae.instance,we=ae.currentTarget,ae=ae.listener,oe!==Q&&z.isPropagationStopped())break e;Q=ae,z.currentTarget=we;try{Q(z)}catch(Ee){fd(Ee)}z.currentTarget=null,Q=oe}}}}function Zt(T,E){var B=E[Ii];B===void 0&&(B=E[Ii]=new Set);var N=T+"__bubble";B.has(N)||(Fy(E,T,2,!1),B.add(N))}function wm(T,E,B){var N=0;E&&(N|=4),Fy(B,T,N,E)}var _d="_reactListening"+Math.random().toString(36).slice(2);function Sm(T){if(!T[_d]){T[_d]=!0,Ep.forEach(function(B){B!=="selectionchange"&&(jT.has(B)||wm(B,!1,T),wm(B,!0,T))});var E=T.nodeType===9?T:T.ownerDocument;E===null||E[_d]||(E[_d]=!0,wm("selectionchange",!1,E))}}function Fy(T,E,B,N){switch(lx(E)){case 2:var z=wC;break;case 8:z=SC;break;default:z=Nm}B=z.bind(null,E,B,T),z=void 0,!Uc||E!=="touchstart"&&E!=="touchmove"&&E!=="wheel"||(z=!0),N?z!==void 0?T.addEventListener(E,B,{capture:!0,passive:z}):T.addEventListener(E,B,!0):z!==void 0?T.addEventListener(E,B,{passive:z}):T.addEventListener(E,B,!1)}function Tm(T,E,B,N,z){var Q=N;if(!(E&1)&&!(E&2)&&N!==null)e:for(;;){if(N===null)return;var ee=N.tag;if(ee===3||ee===4){var ae=N.stateNode.containerInfo;if(ae===z)break;if(ee===4)for(ee=N.return;ee!==null;){var oe=ee.tag;if((oe===3||oe===4)&&ee.stateNode.containerInfo===z)return;ee=ee.return}for(;ae!==null;){if(ee=Ba(ae),ee===null)return;if(oe=ee.tag,oe===5||oe===6||oe===26||oe===27){N=Q=ee;continue e}ae=ae.parentNode}}N=N.return}Hp(function(){var we=Q,Ee=Hc(B),Re=[];e:{var Ce=cv.get(T);if(Ce!==void 0){var be=dd,ze=T;switch(T){case"keypress":if(ld(B)===0)break e;case"keydown":case"keyup":be=k2;break;case"focusin":ze="focus",be=zc;break;case"focusout":ze="blur",be=zc;break;case"beforeblur":case"afterblur":be=zc;break;case"click":if(B.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=Vp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=M2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=Y2;break;case lv:case hv:case dv:be=P2;break;case uv:be=z2;break;case"scroll":case"scrollend":be=b2;break;case"wheel":be=j2;break;case"copy":case"cut":case"paste":be=D2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=Xp;break;case"toggle":case"beforetoggle":be=$2}var Dt=(E&4)!==0,wi=!Dt&&(T==="scroll"||T==="scrollend"),pe=Dt?Ce!==null?Ce+"Capture":null:Ce;Dt=[];for(var de=we,xe;de!==null;){var Le=de;if(xe=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||xe===null||pe===null||(Le=Gl(de,pe),Le!=null&&Dt.push(ph(de,Le,xe))),wi)break;de=de.return}0<Dt.length&&(Ce=new be(Ce,ze,null,B,Ee),Re.push({event:Ce,listeners:Dt}))}}if(!(E&7)){e:{if(Ce=T==="mouseover"||T==="pointerover",be=T==="mouseout"||T==="pointerout",Ce&&B!==Gc&&(ze=B.relatedTarget||B.fromElement)&&(Ba(ze)||ze[Qt]))break e;if((be||Ce)&&(Ce=Ee.window===Ee?Ee:(Ce=Ee.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,be?(ze=B.relatedTarget||B.toElement,be=we,ze=ze?Ba(ze):null,ze!==null&&(wi=b(ze),Dt=ze.tag,ze!==wi||Dt!==5&&Dt!==27&&Dt!==6)&&(ze=null)):(be=null,ze=we),be!==ze)){if(Dt=Vp,Le="onMouseLeave",pe="onMouseEnter",de="mouse",(T==="pointerout"||T==="pointerover")&&(Dt=Xp,Le="onPointerLeave",pe="onPointerEnter",de="pointer"),wi=be==null?Ce:Nl(be),xe=ze==null?Ce:Nl(ze),Ce=new Dt(Le,de+"leave",be,B,Ee),Ce.target=wi,Ce.relatedTarget=xe,Le=null,Ba(Ee)===we&&(Dt=new Dt(pe,de+"enter",ze,B,Ee),Dt.target=xe,Dt.relatedTarget=wi,Le=Dt),wi=Le,be&&ze)t:{for(Dt=KT,pe=be,de=ze,xe=0,Le=pe;Le;Le=Dt(Le))xe++;Le=0;for(var Mt=de;Mt;Mt=Dt(Mt))Le++;for(;0<xe-Le;)pe=Dt(pe),xe--;for(;0<Le-xe;)de=Dt(de),Le--;for(;xe--;){if(pe===de||de!==null&&pe===de.alternate){Dt=pe;break t}pe=Dt(pe),de=Dt(de)}Dt=null}else Dt=null;be!==null&&Iy(Re,Ce,be,Dt,!1),ze!==null&&wi!==null&&Iy(Re,wi,ze,Dt,!0)}}e:{if(Ce=we?Nl(we):window,be=Ce.nodeName&&Ce.nodeName.toLowerCase(),be==="select"||be==="input"&&Ce.type==="file")var di=Zp;else if(Qp(Ce))if(qp)di=aT;else{di=iT;var We=tT}else be=Ce.nodeName,!be||be.toLowerCase()!=="input"||Ce.type!=="checkbox"&&Ce.type!=="radio"?we&&Nc(we.elementType)&&(di=Zp):di=sT;if(di&&(di=di(T,we))){Jp(Re,di,B,Ee);break e}We&&We(T,Ce,we),T==="focusout"&&we&&Ce.type==="number"&&we.memoizedProps.value!=null&&Oc(Ce,"number",Ce.value)}switch(We=we?Nl(we):window,T){case"focusin":(Qp(We)||We.contentEditable==="true")&&(Co=We,Jc=we,Wl=null);break;case"focusout":Wl=Jc=Co=null;break;case"mousedown":Zc=!0;break;case"contextmenu":case"mouseup":case"dragend":Zc=!1,rv(Re,B,Ee);break;case"selectionchange":if(rT)break;case"keydown":case"keyup":rv(Re,B,Ee)}var Xt;if(jc)e:{switch(T){case"compositionstart":var ei="onCompositionStart";break e;case"compositionend":ei="onCompositionEnd";break e;case"compositionupdate":ei="onCompositionUpdate";break e}ei=void 0}else To?Kp(T,B)&&(ei="onCompositionEnd"):T==="keydown"&&B.keyCode===229&&(ei="onCompositionStart");ei&&(zp&&B.locale!=="ko"&&(To||ei!=="onCompositionStart"?ei==="onCompositionEnd"&&To&&(Xt=kp()):(Dn=Ee,Vc="value"in Dn?Dn.value:Dn.textContent,To=!0)),We=eu(we,ei),0<We.length&&(ei=new Yp(ei,T,null,B,Ee),Re.push({event:ei,listeners:We}),Xt?ei.data=Xt:(Xt=$p(B),Xt!==null&&(ei.data=Xt)))),(Xt=J2?Z2(T,B):q2(T,B))&&(ei=eu(we,"onBeforeInput"),0<ei.length&&(We=new Yp("onBeforeInput","beforeinput",null,B,Ee),Re.push({event:We,listeners:ei}),We.data=Xt)),XT(Re,T,we,B,Ee)}Dy(Re,E)})}function ph(T,E,B){return{instance:T,listener:E,currentTarget:B}}function eu(T,E){for(var B=E+"Capture",N=[];T!==null;){var z=T,Q=z.stateNode;if(z=z.tag,z!==5&&z!==26&&z!==27||Q===null||(z=Gl(T,B),z!=null&&N.unshift(ph(T,z,Q)),z=Gl(T,E),z!=null&&N.push(ph(T,z,Q))),T.tag===3)return N;T=T.return}return[]}function KT(T){if(T===null)return null;do T=T.return;while(T&&T.tag!==5&&T.tag!==27);return T||null}function Iy(T,E,B,N,z){for(var Q=E._reactName,ee=[];B!==null&&B!==N;){var ae=B,oe=ae.alternate,we=ae.stateNode;if(ae=ae.tag,oe!==null&&oe===N)break;ae!==5&&ae!==26&&ae!==27||we===null||(oe=we,z?(we=Gl(B,Q),we!=null&&ee.unshift(ph(B,we,oe))):z||(we=Gl(B,Q),we!=null&&ee.push(ph(B,we,oe)))),B=B.return}ee.length!==0&&T.push({event:E,listeners:ee})}var $T=/\r\n?/g,QT=/\u0000|\uFFFD/g;function Oy(T){return(typeof T=="string"?T:""+T).replace($T,`
`).replace(QT,"")}function Ny(T,E){return E=Oy(E),Oy(T)===E}function xi(T,E,B,N,z,Q){switch(B){case"children":typeof N=="string"?E==="body"||E==="textarea"&&N===""||xo(T,N):(typeof N=="number"||typeof N=="bigint")&&E!=="body"&&xo(T,""+N);break;case"className":ad(T,"class",N);break;case"tabIndex":ad(T,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":ad(T,B,N);break;case"style":Np(T,N,Q);break;case"data":if(E!=="object"){ad(T,"data",N);break}case"src":case"href":if(N===""&&(E!=="a"||B!=="href")){T.removeAttribute(B);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){T.removeAttribute(B);break}N=rd(""+N),T.setAttribute(B,N);break;case"action":case"formAction":if(typeof N=="function"){T.setAttribute(B,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Q=="function"&&(B==="formAction"?(E!=="input"&&xi(T,E,"name",z.name,z,null),xi(T,E,"formEncType",z.formEncType,z,null),xi(T,E,"formMethod",z.formMethod,z,null),xi(T,E,"formTarget",z.formTarget,z,null)):(xi(T,E,"encType",z.encType,z,null),xi(T,E,"method",z.method,z,null),xi(T,E,"target",z.target,z,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){T.removeAttribute(B);break}N=rd(""+N),T.setAttribute(B,N);break;case"onClick":N!=null&&(T.onclick=$a);break;case"onScroll":N!=null&&Zt("scroll",T);break;case"onScrollEnd":N!=null&&Zt("scrollend",T);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(v(61));if(B=N.__html,B!=null){if(z.children!=null)throw Error(v(60));T.innerHTML=B}}break;case"multiple":T.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":T.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){T.removeAttribute("xlink:href");break}B=rd(""+N),T.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",B);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?T.setAttribute(B,""+N):T.removeAttribute(B);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?T.setAttribute(B,""):T.removeAttribute(B);break;case"capture":case"download":N===!0?T.setAttribute(B,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?T.setAttribute(B,N):T.removeAttribute(B);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?T.setAttribute(B,N):T.removeAttribute(B);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?T.removeAttribute(B):T.setAttribute(B,N);break;case"popover":Zt("beforetoggle",T),Zt("toggle",T),sd(T,"popover",N);break;case"xlinkActuate":Ka(T,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":Ka(T,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":Ka(T,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":Ka(T,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":Ka(T,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":Ka(T,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":Ka(T,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":Ka(T,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":Ka(T,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":sd(T,"is",N);break;case"innerText":case"textContent":break;default:(!(2<B.length)||B[0]!=="o"&&B[0]!=="O"||B[1]!=="n"&&B[1]!=="N")&&(B=C2.get(B)||B,sd(T,B,N))}}function Cm(T,E,B,N,z,Q){switch(B){case"style":Np(T,N,Q);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(v(61));if(B=N.__html,B!=null){if(z.children!=null)throw Error(v(60));T.innerHTML=B}}break;case"children":typeof N=="string"?xo(T,N):(typeof N=="number"||typeof N=="bigint")&&xo(T,""+N);break;case"onScroll":N!=null&&Zt("scroll",T);break;case"onScrollEnd":N!=null&&Zt("scrollend",T);break;case"onClick":N!=null&&(T.onclick=$a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mp.hasOwnProperty(B))e:{if(B[0]==="o"&&B[1]==="n"&&(z=B.endsWith("Capture"),E=B.slice(2,z?B.length-7:void 0),Q=T[ye]||null,Q=Q!=null?Q[B]:null,typeof Q=="function"&&T.removeEventListener(E,Q,z),typeof N=="function")){typeof Q!="function"&&Q!==null&&(B in T?T[B]=null:T.hasAttribute(B)&&T.removeAttribute(B)),T.addEventListener(E,N,z);break e}B in T?T[B]=N:N===!0?T.setAttribute(B,""):sd(T,B,N)}}}function ls(T,E,B){switch(E){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zt("error",T),Zt("load",T);var N=!1,z=!1,Q;for(Q in B)if(B.hasOwnProperty(Q)){var ee=B[Q];if(ee!=null)switch(Q){case"src":N=!0;break;case"srcSet":z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(v(137,E));default:xi(T,E,Q,ee,B,null)}}z&&xi(T,E,"srcSet",B.srcSet,B,null),N&&xi(T,E,"src",B.src,B,null);return;case"input":Zt("invalid",T);var ae=Q=ee=z=null,oe=null,we=null;for(N in B)if(B.hasOwnProperty(N)){var Ee=B[N];if(Ee!=null)switch(N){case"name":z=Ee;break;case"type":ee=Ee;break;case"checked":oe=Ee;break;case"defaultChecked":we=Ee;break;case"value":Q=Ee;break;case"defaultValue":ae=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(v(137,E));break;default:xi(T,E,N,Ee,B,null)}}Dp(T,Q,ae,oe,we,ee,z,!1);return;case"select":Zt("invalid",T),N=ee=Q=null;for(z in B)if(B.hasOwnProperty(z)&&(ae=B[z],ae!=null))switch(z){case"value":Q=ae;break;case"defaultValue":ee=ae;break;case"multiple":N=ae;default:xi(T,E,z,ae,B,null)}E=Q,B=ee,T.multiple=!!N,E!=null?yo(T,!!N,E,!1):B!=null&&yo(T,!!N,B,!0);return;case"textarea":Zt("invalid",T),Q=z=N=null;for(ee in B)if(B.hasOwnProperty(ee)&&(ae=B[ee],ae!=null))switch(ee){case"value":N=ae;break;case"defaultValue":z=ae;break;case"children":Q=ae;break;case"dangerouslySetInnerHTML":if(ae!=null)throw Error(v(91));break;default:xi(T,E,ee,ae,B,null)}Ip(T,N,z,Q);return;case"option":for(oe in B)if(B.hasOwnProperty(oe)&&(N=B[oe],N!=null))switch(oe){case"selected":T.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:xi(T,E,oe,N,B,null)}return;case"dialog":Zt("beforetoggle",T),Zt("toggle",T),Zt("cancel",T),Zt("close",T);break;case"iframe":case"object":Zt("load",T);break;case"video":case"audio":for(N=0;N<gh.length;N++)Zt(gh[N],T);break;case"image":Zt("error",T),Zt("load",T);break;case"details":Zt("toggle",T);break;case"embed":case"source":case"link":Zt("error",T),Zt("load",T);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(we in B)if(B.hasOwnProperty(we)&&(N=B[we],N!=null))switch(we){case"children":case"dangerouslySetInnerHTML":throw Error(v(137,E));default:xi(T,E,we,N,B,null)}return;default:if(Nc(E)){for(Ee in B)B.hasOwnProperty(Ee)&&(N=B[Ee],N!==void 0&&Cm(T,E,Ee,N,B,void 0));return}}for(ae in B)B.hasOwnProperty(ae)&&(N=B[ae],N!=null&&xi(T,E,ae,N,B,null))}function JT(T,E,B,N){switch(E){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var z=null,Q=null,ee=null,ae=null,oe=null,we=null,Ee=null;for(be in B){var Re=B[be];if(B.hasOwnProperty(be)&&Re!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":oe=Re;default:N.hasOwnProperty(be)||xi(T,E,be,null,N,Re)}}for(var Ce in N){var be=N[Ce];if(Re=B[Ce],N.hasOwnProperty(Ce)&&(be!=null||Re!=null))switch(Ce){case"type":Q=be;break;case"name":z=be;break;case"checked":we=be;break;case"defaultChecked":Ee=be;break;case"value":ee=be;break;case"defaultValue":ae=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(v(137,E));break;default:be!==Re&&xi(T,E,Ce,be,N,Re)}}Ic(T,ee,ae,oe,we,Ee,Q,z);return;case"select":be=ee=ae=Ce=null;for(Q in B)if(oe=B[Q],B.hasOwnProperty(Q)&&oe!=null)switch(Q){case"value":break;case"multiple":be=oe;default:N.hasOwnProperty(Q)||xi(T,E,Q,null,N,oe)}for(z in N)if(Q=N[z],oe=B[z],N.hasOwnProperty(z)&&(Q!=null||oe!=null))switch(z){case"value":Ce=Q;break;case"defaultValue":ae=Q;break;case"multiple":ee=Q;default:Q!==oe&&xi(T,E,z,Q,N,oe)}E=ae,B=ee,N=be,Ce!=null?yo(T,!!B,Ce,!1):!!N!=!!B&&(E!=null?yo(T,!!B,E,!0):yo(T,!!B,B?[]:"",!1));return;case"textarea":be=Ce=null;for(ae in B)if(z=B[ae],B.hasOwnProperty(ae)&&z!=null&&!N.hasOwnProperty(ae))switch(ae){case"value":break;case"children":break;default:xi(T,E,ae,null,N,z)}for(ee in N)if(z=N[ee],Q=B[ee],N.hasOwnProperty(ee)&&(z!=null||Q!=null))switch(ee){case"value":Ce=z;break;case"defaultValue":be=z;break;case"children":break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(v(91));break;default:z!==Q&&xi(T,E,ee,z,N,Q)}Fp(T,Ce,be);return;case"option":for(var ze in B)if(Ce=B[ze],B.hasOwnProperty(ze)&&Ce!=null&&!N.hasOwnProperty(ze))switch(ze){case"selected":T.selected=!1;break;default:xi(T,E,ze,null,N,Ce)}for(oe in N)if(Ce=N[oe],be=B[oe],N.hasOwnProperty(oe)&&Ce!==be&&(Ce!=null||be!=null))switch(oe){case"selected":T.selected=Ce&&typeof Ce!="function"&&typeof Ce!="symbol";break;default:xi(T,E,oe,Ce,N,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Dt in B)Ce=B[Dt],B.hasOwnProperty(Dt)&&Ce!=null&&!N.hasOwnProperty(Dt)&&xi(T,E,Dt,null,N,Ce);for(we in N)if(Ce=N[we],be=B[we],N.hasOwnProperty(we)&&Ce!==be&&(Ce!=null||be!=null))switch(we){case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(v(137,E));break;default:xi(T,E,we,Ce,N,be)}return;default:if(Nc(E)){for(var wi in B)Ce=B[wi],B.hasOwnProperty(wi)&&Ce!==void 0&&!N.hasOwnProperty(wi)&&Cm(T,E,wi,void 0,N,Ce);for(Ee in N)Ce=N[Ee],be=B[Ee],!N.hasOwnProperty(Ee)||Ce===be||Ce===void 0&&be===void 0||Cm(T,E,Ee,Ce,N,be);return}}for(var pe in B)Ce=B[pe],B.hasOwnProperty(pe)&&Ce!=null&&!N.hasOwnProperty(pe)&&xi(T,E,pe,null,N,Ce);for(Re in N)Ce=N[Re],be=B[Re],!N.hasOwnProperty(Re)||Ce===be||Ce==null&&be==null||xi(T,E,Re,Ce,N,be)}function Gy(T){switch(T){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZT(){if(typeof performance.getEntriesByType=="function"){for(var T=0,E=0,B=performance.getEntriesByType("resource"),N=0;N<B.length;N++){var z=B[N],Q=z.transferSize,ee=z.initiatorType,ae=z.duration;if(Q&&ae&&Gy(ee)){for(ee=0,ae=z.responseEnd,N+=1;N<B.length;N++){var oe=B[N],we=oe.startTime;if(we>ae)break;var Ee=oe.transferSize,Re=oe.initiatorType;Ee&&Gy(Re)&&(oe=oe.responseEnd,ee+=Ee*(oe<ae?1:(ae-we)/(oe-we)))}if(--N,E+=8*(Q+ee)/(z.duration/1e3),T++,10<T)break}}if(0<T)return E/T/1e6}return navigator.connection&&(T=navigator.connection.downlink,typeof T=="number")?T:5}var Am=null,bm=null;function tu(T){return T.nodeType===9?T:T.ownerDocument}function Hy(T){switch(T){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ky(T,E){if(T===0)switch(E){case"svg":return 1;case"math":return 2;default:return 0}return T===1&&E==="foreignObject"?0:T}function Em(T,E){return T==="textarea"||T==="noscript"||typeof E.children=="string"||typeof E.children=="number"||typeof E.children=="bigint"||typeof E.dangerouslySetInnerHTML=="object"&&E.dangerouslySetInnerHTML!==null&&E.dangerouslySetInnerHTML.__html!=null}var Mm=null;function qT(){var T=window.event;return T&&T.type==="popstate"?T===Mm?!1:(Mm=T,!0):(Mm=null,!1)}var Uy=typeof setTimeout=="function"?setTimeout:void 0,_T=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,eC=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(T){return Vy.resolve(null).then(T).catch(tC)}:Uy;function tC(T){setTimeout(function(){throw T})}function Qn(T){return T==="head"}function Yy(T,E){var B=E,N=0;do{var z=B.nextSibling;if(T.removeChild(B),z&&z.nodeType===8)if(B=z.data,B==="/$"||B==="/&"){if(N===0){T.removeChild(z),Jo(E);return}N--}else if(B==="$"||B==="$?"||B==="$~"||B==="$!"||B==="&")N++;else if(B==="html")vh(T.ownerDocument.documentElement);else if(B==="head"){B=T.ownerDocument.head,vh(B);for(var Q=B.firstChild;Q;){var ee=Q.nextSibling,ae=Q.nodeName;Q[va]||ae==="SCRIPT"||ae==="STYLE"||ae==="LINK"&&Q.rel.toLowerCase()==="stylesheet"||B.removeChild(Q),Q=ee}}else B==="body"&&vh(T.ownerDocument.body);B=z}while(B);Jo(E)}function Xy(T,E){var B=T;T=0;do{var N=B.nextSibling;if(B.nodeType===1?E?(B._stashedDisplay=B.style.display,B.style.display="none"):(B.style.display=B._stashedDisplay||"",B.getAttribute("style")===""&&B.removeAttribute("style")):B.nodeType===3&&(E?(B._stashedText=B.nodeValue,B.nodeValue=""):B.nodeValue=B._stashedText||""),N&&N.nodeType===8)if(B=N.data,B==="/$"){if(T===0)break;T--}else B!=="$"&&B!=="$?"&&B!=="$~"&&B!=="$!"||T++;B=N}while(B)}function Lm(T){var E=T.firstChild;for(E&&E.nodeType===10&&(E=E.nextSibling);E;){var B=E;switch(E=E.nextSibling,B.nodeName){case"HTML":case"HEAD":case"BODY":Lm(B),Ol(B);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(B.rel.toLowerCase()==="stylesheet")continue}T.removeChild(B)}}function iC(T,E,B,N){for(;T.nodeType===1;){var z=B;if(T.nodeName.toLowerCase()!==E.toLowerCase()){if(!N&&(T.nodeName!=="INPUT"||T.type!=="hidden"))break}else if(N){if(!T[va])switch(E){case"meta":if(!T.hasAttribute("itemprop"))break;return T;case"link":if(Q=T.getAttribute("rel"),Q==="stylesheet"&&T.hasAttribute("data-precedence"))break;if(Q!==z.rel||T.getAttribute("href")!==(z.href==null||z.href===""?null:z.href)||T.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin)||T.getAttribute("title")!==(z.title==null?null:z.title))break;return T;case"style":if(T.hasAttribute("data-precedence"))break;return T;case"script":if(Q=T.getAttribute("src"),(Q!==(z.src==null?null:z.src)||T.getAttribute("type")!==(z.type==null?null:z.type)||T.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin))&&Q&&T.hasAttribute("async")&&!T.hasAttribute("itemprop"))break;return T;default:return T}}else if(E==="input"&&T.type==="hidden"){var Q=z.name==null?null:""+z.name;if(z.type==="hidden"&&T.getAttribute("name")===Q)return T}else return T;if(T=ua(T.nextSibling),T===null)break}return null}function sC(T,E,B){if(E==="")return null;for(;T.nodeType!==3;)if((T.nodeType!==1||T.nodeName!=="INPUT"||T.type!=="hidden")&&!B||(T=ua(T.nextSibling),T===null))return null;return T}function zy(T,E){for(;T.nodeType!==8;)if((T.nodeType!==1||T.nodeName!=="INPUT"||T.type!=="hidden")&&!E||(T=ua(T.nextSibling),T===null))return null;return T}function Rm(T){return T.data==="$?"||T.data==="$~"}function Pm(T){return T.data==="$!"||T.data==="$?"&&T.ownerDocument.readyState!=="loading"}function aC(T,E){var B=T.ownerDocument;if(T.data==="$~")T._reactRetry=E;else if(T.data!=="$?"||B.readyState!=="loading")E();else{var N=function(){E(),B.removeEventListener("DOMContentLoaded",N)};B.addEventListener("DOMContentLoaded",N),T._reactRetry=N}}function ua(T){for(;T!=null;T=T.nextSibling){var E=T.nodeType;if(E===1||E===3)break;if(E===8){if(E=T.data,E==="$"||E==="$!"||E==="$?"||E==="$~"||E==="&"||E==="F!"||E==="F")break;if(E==="/$"||E==="/&")return null}}return T}var Bm=null;function Wy(T){T=T.nextSibling;for(var E=0;T;){if(T.nodeType===8){var B=T.data;if(B==="/$"||B==="/&"){if(E===0)return ua(T.nextSibling);E--}else B!=="$"&&B!=="$!"&&B!=="$?"&&B!=="$~"&&B!=="&"||E++}T=T.nextSibling}return null}function jy(T){T=T.previousSibling;for(var E=0;T;){if(T.nodeType===8){var B=T.data;if(B==="$"||B==="$!"||B==="$?"||B==="$~"||B==="&"){if(E===0)return T;E--}else B!=="/$"&&B!=="/&"||E++}T=T.previousSibling}return null}function Ky(T,E,B){switch(E=tu(B),T){case"html":if(T=E.documentElement,!T)throw Error(v(452));return T;case"head":if(T=E.head,!T)throw Error(v(453));return T;case"body":if(T=E.body,!T)throw Error(v(454));return T;default:throw Error(v(451))}}function vh(T){for(var E=T.attributes;E.length;)T.removeAttributeNode(E[0]);Ol(T)}var ca=new Map,$y=new Set;function iu(T){return typeof T.getRootNode=="function"?T.getRootNode():T.nodeType===9?T:T.ownerDocument}var un=H.d;H.d={f:nC,r:rC,D:oC,C:lC,L:hC,m:dC,X:cC,S:uC,M:fC};function nC(){var T=un.f(),E=Kd();return T||E}function rC(T){var E=go(T);E!==null&&E.tag===5&&E.type==="form"?u0(E):un.r(T)}var Ko=typeof document>"u"?null:document;function Qy(T,E,B){var N=Ko;if(N&&typeof E=="string"&&E){var z=aa(E);z='link[rel="'+T+'"][href="'+z+'"]',typeof B=="string"&&(z+='[crossorigin="'+B+'"]'),$y.has(z)||($y.add(z),T={rel:T,crossOrigin:B,href:E},N.querySelector(z)===null&&(E=N.createElement("link"),ls(E,"link",T),ts(E),N.head.appendChild(E)))}}function oC(T){un.D(T),Qy("dns-prefetch",T,null)}function lC(T,E){un.C(T,E),Qy("preconnect",T,E)}function hC(T,E,B){un.L(T,E,B);var N=Ko;if(N&&T&&E){var z='link[rel="preload"][as="'+aa(E)+'"]';E==="image"&&B&&B.imageSrcSet?(z+='[imagesrcset="'+aa(B.imageSrcSet)+'"]',typeof B.imageSizes=="string"&&(z+='[imagesizes="'+aa(B.imageSizes)+'"]')):z+='[href="'+aa(T)+'"]';var Q=z;switch(E){case"style":Q=$o(T);break;case"script":Q=Qo(T)}ca.has(Q)||(T=n({rel:"preload",href:E==="image"&&B&&B.imageSrcSet?void 0:T,as:E},B),ca.set(Q,T),N.querySelector(z)!==null||E==="style"&&N.querySelector(yh(Q))||E==="script"&&N.querySelector(xh(Q))||(E=N.createElement("link"),ls(E,"link",T),ts(E),N.head.appendChild(E)))}}function dC(T,E){un.m(T,E);var B=Ko;if(B&&T){var N=E&&typeof E.as=="string"?E.as:"script",z='link[rel="modulepreload"][as="'+aa(N)+'"][href="'+aa(T)+'"]',Q=z;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Q=Qo(T)}if(!ca.has(Q)&&(T=n({rel:"modulepreload",href:T},E),ca.set(Q,T),B.querySelector(z)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(B.querySelector(xh(Q)))return}N=B.createElement("link"),ls(N,"link",T),ts(N),B.head.appendChild(N)}}}function uC(T,E,B){un.S(T,E,B);var N=Ko;if(N&&T){var z=po(N).hoistableStyles,Q=$o(T);E=E||"default";var ee=z.get(Q);if(!ee){var ae={loading:0,preload:null};if(ee=N.querySelector(yh(Q)))ae.loading=5;else{T=n({rel:"stylesheet",href:T,"data-precedence":E},B),(B=ca.get(Q))&&Dm(T,B);var oe=ee=N.createElement("link");ts(oe),ls(oe,"link",T),oe._p=new Promise(function(we,Ee){oe.onload=we,oe.onerror=Ee}),oe.addEventListener("load",function(){ae.loading|=1}),oe.addEventListener("error",function(){ae.loading|=2}),ae.loading|=4,su(ee,E,N)}ee={type:"stylesheet",instance:ee,count:1,state:ae},z.set(Q,ee)}}}function cC(T,E){un.X(T,E);var B=Ko;if(B&&T){var N=po(B).hoistableScripts,z=Qo(T),Q=N.get(z);Q||(Q=B.querySelector(xh(z)),Q||(T=n({src:T,async:!0},E),(E=ca.get(z))&&Fm(T,E),Q=B.createElement("script"),ts(Q),ls(Q,"link",T),B.head.appendChild(Q)),Q={type:"script",instance:Q,count:1,state:null},N.set(z,Q))}}function fC(T,E){un.M(T,E);var B=Ko;if(B&&T){var N=po(B).hoistableScripts,z=Qo(T),Q=N.get(z);Q||(Q=B.querySelector(xh(z)),Q||(T=n({src:T,async:!0,type:"module"},E),(E=ca.get(z))&&Fm(T,E),Q=B.createElement("script"),ts(Q),ls(Q,"link",T),B.head.appendChild(Q)),Q={type:"script",instance:Q,count:1,state:null},N.set(z,Q))}}function Jy(T,E,B,N){var z=(z=U.current)?iu(z):null;if(!z)throw Error(v(446));switch(T){case"meta":case"title":return null;case"style":return typeof B.precedence=="string"&&typeof B.href=="string"?(E=$o(B.href),B=po(z).hoistableStyles,N=B.get(E),N||(N={type:"style",instance:null,count:0,state:null},B.set(E,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(B.rel==="stylesheet"&&typeof B.href=="string"&&typeof B.precedence=="string"){T=$o(B.href);var Q=po(z).hoistableStyles,ee=Q.get(T);if(ee||(z=z.ownerDocument||z,ee={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Q.set(T,ee),(Q=z.querySelector(yh(T)))&&!Q._p&&(ee.instance=Q,ee.state.loading=5),ca.has(T)||(B={rel:"preload",as:"style",href:B.href,crossOrigin:B.crossOrigin,integrity:B.integrity,media:B.media,hrefLang:B.hrefLang,referrerPolicy:B.referrerPolicy},ca.set(T,B),Q||mC(z,T,B,ee.state))),E&&N===null)throw Error(v(528,""));return ee}if(E&&N!==null)throw Error(v(529,""));return null;case"script":return E=B.async,B=B.src,typeof B=="string"&&E&&typeof E!="function"&&typeof E!="symbol"?(E=Qo(B),B=po(z).hoistableScripts,N=B.get(E),N||(N={type:"script",instance:null,count:0,state:null},B.set(E,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(v(444,T))}}function $o(T){return'href="'+aa(T)+'"'}function yh(T){return'link[rel="stylesheet"]['+T+"]"}function Zy(T){return n({},T,{"data-precedence":T.precedence,precedence:null})}function mC(T,E,B,N){T.querySelector('link[rel="preload"][as="style"]['+E+"]")?N.loading=1:(E=T.createElement("link"),N.preload=E,E.addEventListener("load",function(){return N.loading|=1}),E.addEventListener("error",function(){return N.loading|=2}),ls(E,"link",B),ts(E),T.head.appendChild(E))}function Qo(T){return'[src="'+aa(T)+'"]'}function xh(T){return"script[async]"+T}function qy(T,E,B){if(E.count++,E.instance===null)switch(E.type){case"style":var N=T.querySelector('style[data-href~="'+aa(B.href)+'"]');if(N)return E.instance=N,ts(N),N;var z=n({},B,{"data-href":B.href,"data-precedence":B.precedence,href:null,precedence:null});return N=(T.ownerDocument||T).createElement("style"),ts(N),ls(N,"style",z),su(N,B.precedence,T),E.instance=N;case"stylesheet":z=$o(B.href);var Q=T.querySelector(yh(z));if(Q)return E.state.loading|=4,E.instance=Q,ts(Q),Q;N=Zy(B),(z=ca.get(z))&&Dm(N,z),Q=(T.ownerDocument||T).createElement("link"),ts(Q);var ee=Q;return ee._p=new Promise(function(ae,oe){ee.onload=ae,ee.onerror=oe}),ls(Q,"link",N),E.state.loading|=4,su(Q,B.precedence,T),E.instance=Q;case"script":return Q=Qo(B.src),(z=T.querySelector(xh(Q)))?(E.instance=z,ts(z),z):(N=B,(z=ca.get(Q))&&(N=n({},B),Fm(N,z)),T=T.ownerDocument||T,z=T.createElement("script"),ts(z),ls(z,"link",N),T.head.appendChild(z),E.instance=z);case"void":return null;default:throw Error(v(443,E.type))}else E.type==="stylesheet"&&!(E.state.loading&4)&&(N=E.instance,E.state.loading|=4,su(N,B.precedence,T));return E.instance}function su(T,E,B){for(var N=B.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),z=N.length?N[N.length-1]:null,Q=z,ee=0;ee<N.length;ee++){var ae=N[ee];if(ae.dataset.precedence===E)Q=ae;else if(Q!==z)break}Q?Q.parentNode.insertBefore(T,Q.nextSibling):(E=B.nodeType===9?B.head:B,E.insertBefore(T,E.firstChild))}function Dm(T,E){T.crossOrigin==null&&(T.crossOrigin=E.crossOrigin),T.referrerPolicy==null&&(T.referrerPolicy=E.referrerPolicy),T.title==null&&(T.title=E.title)}function Fm(T,E){T.crossOrigin==null&&(T.crossOrigin=E.crossOrigin),T.referrerPolicy==null&&(T.referrerPolicy=E.referrerPolicy),T.integrity==null&&(T.integrity=E.integrity)}var au=null;function _y(T,E,B){if(au===null){var N=new Map,z=au=new Map;z.set(B,N)}else z=au,N=z.get(B),N||(N=new Map,z.set(B,N));if(N.has(T))return N;for(N.set(T,null),B=B.getElementsByTagName(T),z=0;z<B.length;z++){var Q=B[z];if(!(Q[va]||Q[ki]||T==="link"&&Q.getAttribute("rel")==="stylesheet")&&Q.namespaceURI!=="http://www.w3.org/2000/svg"){var ee=Q.getAttribute(E)||"";ee=T+ee;var ae=N.get(ee);ae?ae.push(Q):N.set(ee,[Q])}}return N}function ex(T,E,B){T=T.ownerDocument||T,T.head.insertBefore(B,E==="title"?T.querySelector("head > title"):null)}function gC(T,E,B){if(B===1||E.itemProp!=null)return!1;switch(T){case"meta":case"title":return!0;case"style":if(typeof E.precedence!="string"||typeof E.href!="string"||E.href==="")break;return!0;case"link":if(typeof E.rel!="string"||typeof E.href!="string"||E.href===""||E.onLoad||E.onError)break;switch(E.rel){case"stylesheet":return T=E.disabled,typeof E.precedence=="string"&&T==null;default:return!0}case"script":if(E.async&&typeof E.async!="function"&&typeof E.async!="symbol"&&!E.onLoad&&!E.onError&&E.src&&typeof E.src=="string")return!0}return!1}function tx(T){return!(T.type==="stylesheet"&&!(T.state.loading&3))}function pC(T,E,B,N){if(B.type==="stylesheet"&&(typeof N.media!="string"||matchMedia(N.media).matches!==!1)&&!(B.state.loading&4)){if(B.instance===null){var z=$o(N.href),Q=E.querySelector(yh(z));if(Q){E=Q._p,E!==null&&typeof E=="object"&&typeof E.then=="function"&&(T.count++,T=nu.bind(T),E.then(T,T)),B.state.loading|=4,B.instance=Q,ts(Q);return}Q=E.ownerDocument||E,N=Zy(N),(z=ca.get(z))&&Dm(N,z),Q=Q.createElement("link"),ts(Q);var ee=Q;ee._p=new Promise(function(ae,oe){ee.onload=ae,ee.onerror=oe}),ls(Q,"link",N),B.instance=Q}T.stylesheets===null&&(T.stylesheets=new Map),T.stylesheets.set(B,E),(E=B.state.preload)&&!(B.state.loading&3)&&(T.count++,B=nu.bind(T),E.addEventListener("load",B),E.addEventListener("error",B))}}var Im=0;function vC(T,E){return T.stylesheets&&T.count===0&&ou(T,T.stylesheets),0<T.count||0<T.imgCount?function(B){var N=setTimeout(function(){if(T.stylesheets&&ou(T,T.stylesheets),T.unsuspend){var Q=T.unsuspend;T.unsuspend=null,Q()}},6e4+E);0<T.imgBytes&&Im===0&&(Im=62500*ZT());var z=setTimeout(function(){if(T.waitingForImages=!1,T.count===0&&(T.stylesheets&&ou(T,T.stylesheets),T.unsuspend)){var Q=T.unsuspend;T.unsuspend=null,Q()}},(T.imgBytes>Im?50:800)+E);return T.unsuspend=B,function(){T.unsuspend=null,clearTimeout(N),clearTimeout(z)}}:null}function nu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ou(this,this.stylesheets);else if(this.unsuspend){var T=this.unsuspend;this.unsuspend=null,T()}}}var ru=null;function ou(T,E){T.stylesheets=null,T.unsuspend!==null&&(T.count++,ru=new Map,E.forEach(yC,T),ru=null,nu.call(T))}function yC(T,E){if(!(E.state.loading&4)){var B=ru.get(T);if(B)var N=B.get(null);else{B=new Map,ru.set(T,B);for(var z=T.querySelectorAll("link[data-precedence],style[data-precedence]"),Q=0;Q<z.length;Q++){var ee=z[Q];(ee.nodeName==="LINK"||ee.getAttribute("media")!=="not all")&&(B.set(ee.dataset.precedence,ee),N=ee)}N&&B.set(null,N)}z=E.instance,ee=z.getAttribute("data-precedence"),Q=B.get(ee)||N,Q===N&&B.set(null,z),B.set(ee,z),this.count++,N=nu.bind(this),z.addEventListener("load",N),z.addEventListener("error",N),Q?Q.parentNode.insertBefore(z,Q.nextSibling):(T=T.nodeType===9?T.head:T,T.insertBefore(z,T.firstChild)),E.state.loading|=4}}var wh={$$typeof:m,Provider:null,Consumer:null,_currentValue:k,_currentValue2:k,_threadCount:0};function xC(T,E,B,N,z,Q,ee,ae,oe){this.tag=1,this.containerInfo=T,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.hiddenUpdates=Bl(null),this.identifierPrefix=N,this.onUncaughtError=z,this.onCaughtError=Q,this.onRecoverableError=ee,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=oe,this.incompleteTransitions=new Map}function ix(T,E,B,N,z,Q,ee,ae,oe,we,Ee,Re){return T=new xC(T,E,B,ee,oe,we,Ee,Re,ae),E=1,Q===!0&&(E|=24),Q=zs(3,null,null,E),T.current=Q,Q.stateNode=T,E=ff(),E.refCount++,T.pooledCache=E,E.refCount++,Q.memoizedState={element:N,isDehydrated:B,cache:E},vf(Q),T}function sx(T){return T?(T=Eo,T):Eo}function ax(T,E,B,N,z,Q){z=sx(z),N.context===null?N.context=z:N.pendingContext=z,N=Hn(E),N.payload={element:B},Q=Q===void 0?null:Q,Q!==null&&(N.callback=Q),B=kn(T,N,E),B!==null&&(Os(B,T,E),ql(B,T,E))}function nx(T,E){if(T=T.memoizedState,T!==null&&T.dehydrated!==null){var B=T.retryLane;T.retryLane=B!==0&&B<E?B:E}}function Om(T,E){nx(T,E),(T=T.alternate)&&nx(T,E)}function rx(T){if(T.tag===13||T.tag===31){var E=Ar(T,67108864);E!==null&&Os(E,T,67108864),Om(T,67108864)}}function ox(T){if(T.tag===13||T.tag===31){var E=Qs();E=uo(E);var B=Ar(T,E);B!==null&&Os(B,T,E),Om(T,E)}}var lu=!0;function wC(T,E,B,N){var z=F.T;F.T=null;var Q=H.p;try{H.p=2,Nm(T,E,B,N)}finally{H.p=Q,F.T=z}}function SC(T,E,B,N){var z=F.T;F.T=null;var Q=H.p;try{H.p=8,Nm(T,E,B,N)}finally{H.p=Q,F.T=z}}function Nm(T,E,B,N){if(lu){var z=Gm(N);if(z===null)Tm(T,E,N,hu,B),hx(T,N);else if(CC(z,T,E,B,N))N.stopPropagation();else if(hx(T,N),E&4&&-1<TC.indexOf(T)){for(;z!==null;){var Q=go(z);if(Q!==null)switch(Q.tag){case 3:if(Q=Q.stateNode,Q.current.memoizedState.isDehydrated){var ee=ja(Q.pendingLanes);if(ee!==0){var ae=Q;for(ae.pendingLanes|=2,ae.entangledLanes|=2;ee;){var oe=1<<31-Di(ee);ae.entanglements[1]|=oe,ee&=~oe}Oa(Q),!(mi&6)&&(Wd=Be()+500,mh(0))}}break;case 31:case 13:ae=Ar(Q,2),ae!==null&&Os(ae,Q,2),Kd(),Om(Q,2)}if(Q=Gm(N),Q===null&&Tm(T,E,N,hu,B),Q===z)break;z=Q}z!==null&&N.stopPropagation()}else Tm(T,E,N,null,B)}}function Gm(T){return T=Hc(T),Hm(T)}var hu=null;function Hm(T){if(hu=null,T=Ba(T),T!==null){var E=b(T);if(E===null)T=null;else{var B=E.tag;if(B===13){if(T=h(E),T!==null)return T;T=null}else if(B===31){if(T=w(E),T!==null)return T;T=null}else if(B===3){if(E.stateNode.current.memoizedState.isDehydrated)return E.tag===3?E.stateNode.containerInfo:null;T=null}else E!==T&&(T=null)}}return hu=T,null}function lx(T){switch(T){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pt()){case Gt:return 2;case si:return 8;case It:case Ht:return 32;case hi:return 268435456;default:return 32}default:return 32}}var km=!1,Jn=null,Zn=null,qn=null,Sh=new Map,Th=new Map,_n=[],TC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hx(T,E){switch(T){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":Sh.delete(E.pointerId);break;case"gotpointercapture":case"lostpointercapture":Th.delete(E.pointerId)}}function Ch(T,E,B,N,z,Q){return T===null||T.nativeEvent!==Q?(T={blockedOn:E,domEventName:B,eventSystemFlags:N,nativeEvent:Q,targetContainers:[z]},E!==null&&(E=go(E),E!==null&&rx(E)),T):(T.eventSystemFlags|=N,E=T.targetContainers,z!==null&&E.indexOf(z)===-1&&E.push(z),T)}function CC(T,E,B,N,z){switch(E){case"focusin":return Jn=Ch(Jn,T,E,B,N,z),!0;case"dragenter":return Zn=Ch(Zn,T,E,B,N,z),!0;case"mouseover":return qn=Ch(qn,T,E,B,N,z),!0;case"pointerover":var Q=z.pointerId;return Sh.set(Q,Ch(Sh.get(Q)||null,T,E,B,N,z)),!0;case"gotpointercapture":return Q=z.pointerId,Th.set(Q,Ch(Th.get(Q)||null,T,E,B,N,z)),!0}return!1}function dx(T){var E=Ba(T.target);if(E!==null){var B=b(E);if(B!==null){if(E=B.tag,E===13){if(E=h(B),E!==null){T.blockedOn=E,fo(T.priority,function(){ox(B)});return}}else if(E===31){if(E=w(B),E!==null){T.blockedOn=E,fo(T.priority,function(){ox(B)});return}}else if(E===3&&B.stateNode.current.memoizedState.isDehydrated){T.blockedOn=B.tag===3?B.stateNode.containerInfo:null;return}}}T.blockedOn=null}function du(T){if(T.blockedOn!==null)return!1;for(var E=T.targetContainers;0<E.length;){var B=Gm(T.nativeEvent);if(B===null){B=T.nativeEvent;var N=new B.constructor(B.type,B);Gc=N,B.target.dispatchEvent(N),Gc=null}else return E=go(B),E!==null&&rx(E),T.blockedOn=B,!1;E.shift()}return!0}function ux(T,E,B){du(T)&&B.delete(E)}function AC(){km=!1,Jn!==null&&du(Jn)&&(Jn=null),Zn!==null&&du(Zn)&&(Zn=null),qn!==null&&du(qn)&&(qn=null),Sh.forEach(ux),Th.forEach(ux)}function uu(T,E){T.blockedOn===E&&(T.blockedOn=null,km||(km=!0,R.unstable_scheduleCallback(R.unstable_NormalPriority,AC)))}var cu=null;function cx(T){cu!==T&&(cu=T,R.unstable_scheduleCallback(R.unstable_NormalPriority,function(){cu===T&&(cu=null);for(var E=0;E<T.length;E+=3){var B=T[E],N=T[E+1],z=T[E+2];if(typeof N!="function"){if(Hm(N||B)===null)continue;break}var Q=go(B);Q!==null&&(T.splice(E,3),E-=3,Gf(Q,{pending:!0,data:z,method:B.method,action:N},N,z))}}))}function Jo(T){function E(oe){return uu(oe,T)}Jn!==null&&uu(Jn,T),Zn!==null&&uu(Zn,T),qn!==null&&uu(qn,T),Sh.forEach(E),Th.forEach(E);for(var B=0;B<_n.length;B++){var N=_n[B];N.blockedOn===T&&(N.blockedOn=null)}for(;0<_n.length&&(B=_n[0],B.blockedOn===null);)dx(B),B.blockedOn===null&&_n.shift();if(B=(T.ownerDocument||T).$$reactFormReplay,B!=null)for(N=0;N<B.length;N+=3){var z=B[N],Q=B[N+1],ee=z[ye]||null;if(typeof Q=="function")ee||cx(B);else if(ee){var ae=null;if(Q&&Q.hasAttribute("formAction")){if(z=Q,ee=Q[ye]||null)ae=ee.formAction;else if(Hm(z)!==null)continue}else ae=ee.action;typeof ae=="function"?B[N+1]=ae:(B.splice(N,3),N-=3),cx(B)}}}function fx(){function T(Q){Q.canIntercept&&Q.info==="react-transition"&&Q.intercept({handler:function(){return new Promise(function(ee){return z=ee})},focusReset:"manual",scroll:"manual"})}function E(){z!==null&&(z(),z=null),N||setTimeout(B,20)}function B(){if(!N&&!navigation.transition){var Q=navigation.currentEntry;Q&&Q.url!=null&&navigation.navigate(Q.url,{state:Q.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var N=!1,z=null;return navigation.addEventListener("navigate",T),navigation.addEventListener("navigatesuccess",E),navigation.addEventListener("navigateerror",E),setTimeout(B,100),function(){N=!0,navigation.removeEventListener("navigate",T),navigation.removeEventListener("navigatesuccess",E),navigation.removeEventListener("navigateerror",E),z!==null&&(z(),z=null)}}}function Um(T){this._internalRoot=T}fu.prototype.render=Um.prototype.render=function(T){var E=this._internalRoot;if(E===null)throw Error(v(409));var B=E.current,N=Qs();ax(B,N,T,E,null,null)},fu.prototype.unmount=Um.prototype.unmount=function(){var T=this._internalRoot;if(T!==null){this._internalRoot=null;var E=T.containerInfo;ax(T.current,2,null,T,null,null),Kd(),E[Qt]=null}};function fu(T){this._internalRoot=T}fu.prototype.unstable_scheduleHydration=function(T){if(T){var E=Il();T={blockedOn:null,target:T,priority:E};for(var B=0;B<_n.length&&E!==0&&E<_n[B].priority;B++);_n.splice(B,0,T),B===0&&dx(T)}};var mx=t.version;if(mx!=="19.2.0")throw Error(v(527,mx,"19.2.0"));H.findDOMNode=function(T){var E=T._reactInternals;if(E===void 0)throw typeof T.render=="function"?Error(v(188)):(T=Object.keys(T).join(","),Error(v(268,T)));return T=i(E),T=T!==null?u(T):null,T=T===null?null:T.stateNode,T};var bC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{qt=mu.inject(bC),jt=mu}catch{}}return bh.createRoot=function(T,E){if(!x(T))throw Error(v(299));var B=!1,N="",z=S0,Q=T0,ee=C0;return E!=null&&(E.unstable_strictMode===!0&&(B=!0),E.identifierPrefix!==void 0&&(N=E.identifierPrefix),E.onUncaughtError!==void 0&&(z=E.onUncaughtError),E.onCaughtError!==void 0&&(Q=E.onCaughtError),E.onRecoverableError!==void 0&&(ee=E.onRecoverableError)),E=ix(T,1,!1,null,null,B,N,null,z,Q,ee,fx),T[Qt]=E.current,Sm(T),new Um(E)},bh.hydrateRoot=function(T,E,B){if(!x(T))throw Error(v(299));var N=!1,z="",Q=S0,ee=T0,ae=C0,oe=null;return B!=null&&(B.unstable_strictMode===!0&&(N=!0),B.identifierPrefix!==void 0&&(z=B.identifierPrefix),B.onUncaughtError!==void 0&&(Q=B.onUncaughtError),B.onCaughtError!==void 0&&(ee=B.onCaughtError),B.onRecoverableError!==void 0&&(ae=B.onRecoverableError),B.formState!==void 0&&(oe=B.formState)),E=ix(T,1,!0,E,B??null,N,z,oe,Q,ee,ae,fx),E.context=sx(null),B=E.current,N=Qs(),N=uo(N),z=Hn(N),z.callback=null,kn(B,z,N),B=N,E.current.lanes=B,xr(E,B),Oa(E),T[Qt]=E.current,Sm(T),new fu(E)},bh.version="19.2.0",bh}var Ax;function GC(){if(Ax)return Xm.exports;Ax=1;function R(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R)}catch(t){console.error(t)}}return R(),Xm.exports=NC(),Xm.exports}var HC=GC(),Lu={exports:{}},kC=Lu.exports,bx;function UC(){return bx||(bx=1,function(R,t){(function(v,x){R.exports=x()})(kC,()=>(()=>{var c={50792:h=>{var w=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function u(s,o,d){this.fn=s,this.context=o,this.once=d||!1}function n(s,o,d,l,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new u(d,l||s,f),g=e?e+o:o;return s._events[g]?s._events[g].fn?s._events[g]=[s._events[g],m]:s._events[g].push(m):(s._events[g]=m,s._eventsCount++),s}function r(s,o){--s._eventsCount===0?s._events=new i:delete s._events[o]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var o=[],d,l;if(this._eventsCount===0)return o;for(l in d=this._events)w.call(d,l)&&o.push(e?l.slice(1):l);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(d)):o},a.prototype.listeners=function(o){var d=e?e+o:o,l=this._events[d];if(!l)return[];if(l.fn)return[l.fn];for(var f=0,m=l.length,g=new Array(m);f<m;f++)g[f]=l[f].fn;return g},a.prototype.listenerCount=function(o){var d=e?e+o:o,l=this._events[d];return l?l.fn?1:l.length:0},a.prototype.emit=function(o,d,l,f,m,g){var p=e?e+o:o;if(!this._events[p])return!1;var y=this._events[p],S=arguments.length,C,A;if(y.fn){switch(y.once&&this.removeListener(o,y.fn,void 0,!0),S){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,l),!0;case 4:return y.fn.call(y.context,d,l,f),!0;case 5:return y.fn.call(y.context,d,l,f,m),!0;case 6:return y.fn.call(y.context,d,l,f,m,g),!0}for(A=1,C=new Array(S-1);A<S;A++)C[A-1]=arguments[A];y.fn.apply(y.context,C)}else{var M=y.length,L;for(A=0;A<M;A++)switch(y[A].once&&this.removeListener(o,y[A].fn,void 0,!0),S){case 1:y[A].fn.call(y[A].context);break;case 2:y[A].fn.call(y[A].context,d);break;case 3:y[A].fn.call(y[A].context,d,l);break;case 4:y[A].fn.call(y[A].context,d,l,f);break;default:if(!C)for(L=1,C=new Array(S-1);L<S;L++)C[L-1]=arguments[L];y[A].fn.apply(y[A].context,C)}}return!0},a.prototype.on=function(o,d,l){return n(this,o,d,l,!1)},a.prototype.once=function(o,d,l){return n(this,o,d,l,!0)},a.prototype.removeListener=function(o,d,l,f){var m=e?e+o:o;if(!this._events[m])return this;if(!d)return r(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!f||g.once)&&(!l||g.context===l)&&r(this,m);else{for(var p=0,y=[],S=g.length;p<S;p++)(g[p].fn!==d||f&&!g[p].once||l&&g[p].context!==l)&&y.push(g[p]);y.length?this._events[m]=y.length===1?y[0]:y:r(this,m)}return this},a.prototype.removeAllListeners=function(o){var d;return o?(d=e?e+o:o,this._events[d]&&r(this,d)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,h.exports=a},11517:(h,w,e)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(38829),u=function(n,r,a,s){for(var o=n[0],d=1;d<n.length;d++){var l=n[d];i(l,o,r,a,s),o=l}return n};h.exports=u},80318:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66979),u=function(n,r,a,s,o){return i(n,"angle",r,a,s,o)};h.exports=u},60757:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){for(var n=0;n<e.length;n++){var r=e[n];i.call(u,r)}return e};h.exports=w},69927:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){u===void 0&&(u=0);for(var n=u;n<e.length;n++){var r=e[n],a=!0;for(var s in i)r[s]!==i[s]&&(a=!1);if(a)return r}return null};h.exports=w},32265:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){u===void 0&&(u=0);for(var n=e.length-1;n>=u;n--){var r=e[n],a=!0;for(var s in i)r[s]!==i[s]&&(a=!1);if(a)return r}return null};h.exports=w},94420:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(11879),u=e(60461),n=e(95540),r=e(29747),a=e(41481),s=new a({sys:{queueDepthSort:r,events:{once:r}}},0,0,1,1).setOrigin(0,0),o=function(d,l){l===void 0&&(l={});var f=l.hasOwnProperty("width"),m=l.hasOwnProperty("height"),g=n(l,"width",-1),p=n(l,"height",-1),y=n(l,"cellWidth",1),S=n(l,"cellHeight",y),C=n(l,"position",u.TOP_LEFT),A=n(l,"x",0),M=n(l,"y",0),L=0,P=0,O=g*y,D=p*S;s.setPosition(A,M),s.setSize(y,S);for(var I=0;I<d.length;I++)if(i(d[I],s,C),f&&g===-1)s.x+=y;else if(m&&p===-1)s.y+=S;else if(m&&!f){if(P+=S,s.y+=S,P===D&&(P=0,L+=y,s.y=M,s.x+=y,L===O))break}else if(L+=y,s.x+=y,L===O&&(L=0,P+=S,s.x=A,s.y+=S,P===D))break;return d};h.exports=o},41721:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66979),u=function(n,r,a,s,o){return i(n,"alpha",r,a,s,o)};h.exports=u},67285:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66979),u=function(n,r,a,s,o){return i(n,"x",r,a,s,o)};h.exports=u},9074:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66979),u=function(n,r,a,s,o,d,l){return a==null&&(a=r),i(n,"x",r,s,d,l),i(n,"y",a,o,d,l)};h.exports=u},75222:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66979),u=function(n,r,a,s,o){return i(n,"y",r,a,s,o)};h.exports=u},22983:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){u===void 0&&(u=0),n===void 0&&(n=6.28);for(var r=u,a=(n-u)/e.length,s=i.x,o=i.y,d=i.radius,l=0;l<e.length;l++)e[l].x=s+d*Math.cos(r),e[l].y=o+d*Math.sin(r),r+=a;return e};h.exports=w},95253:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){u===void 0&&(u=0),n===void 0&&(n=6.28);for(var r=u,a=(n-u)/e.length,s=i.width/2,o=i.height/2,d=0;d<e.length;d++)e[d].x=i.x+s*Math.cos(r),e[d].y=i.y+o*Math.sin(r),r+=a;return e};h.exports=w},88505:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(15258),u=e(26708),n=function(r,a,s){var o;s?o=u(a,s,r.length):o=i(a,r.length);for(var d=0;d<r.length;d++){var l=r[d],f=o[d];l.x=f.x,l.y=f.y}return r};h.exports=n},41346:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(14649),u=e(86003),n=e(49498),r=function(a,s,o){o===void 0&&(o=0);var d=i(s,!1,a.length);o>0?u(d,o):o<0&&n(d,Math.abs(o));for(var l=0;l<a.length;l++)a[l].x=d[l].x,a[l].y=d[l].y;return a};h.exports=r},11575:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(84993),u=function(n,r,a){var s=i({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},a),o=i({x1:r.x2,y1:r.y2,x2:r.x3,y2:r.y3},a),d=i({x1:r.x3,y1:r.y3,x2:r.x1,y2:r.y1},a);s.pop(),o.pop(),d.pop(),s=s.concat(o,d);for(var l=s.length/n.length,f=0,m=0;m<n.length;m++){var g=n[m],p=s[Math.floor(f)];g.x=p.x,g.y=p.y,f+=l}return n};h.exports=u},29953:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){for(var n=0;n<e.length;n++){var r=e[n];r.anims&&r.anims.play(i,u)}return e};h.exports=w},66979:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r,a){n===void 0&&(n=0),r===void 0&&(r=0),a===void 0&&(a=1);var s,o=0,d=e.length;if(a===1)for(s=r;s<d;s++)e[s][i]+=u+o*n,o++;else for(s=r;s>=0;s--)e[s][i]+=u+o*n,o++;return e};h.exports=w},43967:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r,a){n===void 0&&(n=0),r===void 0&&(r=0),a===void 0&&(a=1);var s,o=0,d=e.length;if(a===1)for(s=r;s<d;s++)e[s][i]=u+o*n,o++;else for(s=r;s>=0;s--)e[s][i]=u+o*n,o++;return e};h.exports=w},88926:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(28176),u=function(n,r){for(var a=0;a<n.length;a++)i(r,n[a]);return n};h.exports=u},33286:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(24820),u=function(n,r){for(var a=0;a<n.length;a++)i(r,n[a]);return n};h.exports=u},96e3:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(65822),u=function(n,r){for(var a=0;a<n.length;a++)i(r,n[a]);return n};h.exports=u},28789:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26597),u=function(n,r){for(var a=0;a<n.length;a++)i(r,n[a]);return n};h.exports=u},97154:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(90260),u=function(n,r){for(var a=0;a<n.length;a++)i(r,n[a]);return n};h.exports=u},20510:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66979),u=function(n,r,a,s,o){return i(n,"rotation",r,a,s,o)};h.exports=u},91051:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(1163),u=e(20339),n=function(r,a,s){for(var o=a.x,d=a.y,l=0;l<r.length;l++){var f=r[l];i(f,o,d,s,Math.max(1,u(f.x,f.y,o,d)))}return r};h.exports=n},76332:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(1163),u=function(n,r,a,s){var o=r.x,d=r.y;if(s===0)return n;for(var l=0;l<n.length;l++)i(n[l],o,d,a,s);return n};h.exports=u},61619:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66979),u=function(n,r,a,s,o){return i(n,"scaleX",r,a,s,o)};h.exports=u},94868:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66979),u=function(n,r,a,s,o,d,l){return a==null&&(a=r),i(n,"scaleX",r,s,d,l),i(n,"scaleY",a,o,d,l)};h.exports=u},95532:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66979),u=function(n,r,a,s,o){return i(n,"scaleY",r,a,s,o)};h.exports=u},8689:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o){return i(n,"alpha",r,a,s,o)};h.exports=u},2645:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s){return i(n,"blendMode",r,0,a,s)};h.exports=u},32372:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o){return i(n,"depth",r,a,s,o)};h.exports=u},85373:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){for(var n=0;n<e.length;n++)e[n].setInteractive(i,u);return e};h.exports=w},81583:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o,d,l){return a==null&&(a=r),i(n,"originX",r,s,d,l),i(n,"originY",a,o,d,l),n.forEach(function(f){f.updateDisplayOrigin()}),n};h.exports=u},79939:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o){return i(n,"rotation",r,a,s,o)};h.exports=u},2699:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o,d,l){return a==null&&(a=r),i(n,"scaleX",r,s,d,l),i(n,"scaleY",a,o,d,l)};h.exports=u},98739:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o){return i(n,"scaleX",r,a,s,o)};h.exports=u},98476:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o){return i(n,"scaleY",r,a,s,o)};h.exports=u},6207:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o,d,l){return a==null&&(a=r),i(n,"scrollFactorX",r,s,d,l),i(n,"scrollFactorY",a,o,d,l)};h.exports=u},6607:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o){return i(n,"scrollFactorX",r,a,s,o)};h.exports=u},72248:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o){return i(n,"scrollFactorY",r,a,s,o)};h.exports=u},14036:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r){for(var a=0;a<e.length;a++)e[a].setTint(i,u,n,r);return e};h.exports=w},50159:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s){return i(n,"visible",r,0,a,s)};h.exports=u},77597:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o){return i(n,"x",r,a,s,o)};h.exports=u},83194:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o,d,l){return a==null&&(a=r),i(n,"x",r,s,d,l),i(n,"y",a,o,d,l)};h.exports=u},67678:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43967),u=function(n,r,a,s,o){return i(n,"y",r,a,s,o)};h.exports=u},35850:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099),u=function(n,r,a,s,o){s===void 0&&(s=0),o===void 0&&(o=new i);var d,l,f=n.length;if(f===1)d=n[0].x,l=n[0].y,n[0].x=r,n[0].y=a;else{var m=1,g=0;s===0&&(g=f-1,m=f-2),d=n[g].x,l=n[g].y,n[g].x=r,n[g].y=a;for(var p=0;p<f;p++)if(!(m>=f||m===-1)){var y=n[m],S=y.x,C=y.y;y.x=d,y.y=l,d=S,l=C,s===0?m--:m++}}return o.x=d,o.y=l,o};h.exports=u},8628:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(33680),u=function(n){return i(n)};h.exports=u},21837:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7602),u=function(n,r,a,s,o){o===void 0&&(o=!1);var d=Math.abs(s-a)/n.length,l;if(o)for(l=0;l<n.length;l++)n[l][r]+=i(l*d,a,s);else for(l=0;l<n.length;l++)n[l][r]=i(l*d,a,s);return n};h.exports=u},21910:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(54261),u=function(n,r,a,s,o){o===void 0&&(o=!1);var d=Math.abs(s-a)/n.length,l;if(o)for(l=0;l<n.length;l++)n[l][r]+=i(l*d,a,s);else for(l=0;l<n.length;l++)n[l][r]=i(l*d,a,s);return n};h.exports=u},62054:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r){if(r===void 0&&(r=!1),e.length===0)return e;if(e.length===1)return r?e[0][i]+=(n+u)/2:e[0][i]=(n+u)/2,e;var a=Math.abs(n-u)/(e.length-1),s;if(r)for(s=0;s<e.length;s++)e[s][i]+=s*a+u;else for(s=0;s<e.length;s++)e[s][i]=s*a+u;return e};h.exports=w},79815:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){for(var i=0;i<e.length;i++)e[i].visible=!e[i].visible;return e};h.exports=w},39665:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(15994),u=function(n,r,a){a===void 0&&(a=0);for(var s=0;s<n.length;s++){var o=n[s];o.x=i(o.x,r.left-a,r.right+a),o.y=i(o.y,r.top-a,r.bottom+a)}return n};h.exports=u},61061:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AlignTo:e(11517),Angle:e(80318),Call:e(60757),GetFirst:e(69927),GetLast:e(32265),GridAlign:e(94420),IncAlpha:e(41721),IncX:e(67285),IncXY:e(9074),IncY:e(75222),PlaceOnCircle:e(22983),PlaceOnEllipse:e(95253),PlaceOnLine:e(88505),PlaceOnRectangle:e(41346),PlaceOnTriangle:e(11575),PlayAnimation:e(29953),PropertyValueInc:e(66979),PropertyValueSet:e(43967),RandomCircle:e(88926),RandomEllipse:e(33286),RandomLine:e(96e3),RandomRectangle:e(28789),RandomTriangle:e(97154),Rotate:e(20510),RotateAround:e(91051),RotateAroundDistance:e(76332),ScaleX:e(61619),ScaleXY:e(94868),ScaleY:e(95532),SetAlpha:e(8689),SetBlendMode:e(2645),SetDepth:e(32372),SetHitArea:e(85373),SetOrigin:e(81583),SetRotation:e(79939),SetScale:e(2699),SetScaleX:e(98739),SetScaleY:e(98476),SetScrollFactor:e(6207),SetScrollFactorX:e(6607),SetScrollFactorY:e(72248),SetTint:e(14036),SetVisible:e(50159),SetX:e(77597),SetXY:e(83194),SetY:e(67678),ShiftPosition:e(35850),Shuffle:e(8628),SmootherStep:e(21910),SmoothStep:e(21837),Spread:e(62054),ToggleVisible:e(79815),WrapInRectangle:e(39665)}},42099:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=e(83419),n=e(74943),r=e(81957),a=e(41138),s=e(35154),o=e(90126),d=new u({initialize:function(f,m,g){this.manager=f,this.key=m,this.type="frame",this.frames=this.getFrames(f.textureManager,s(g,"frames",[]),s(g,"defaultTextureKey",null),s(g,"sortFrames",!0)),this.frameRate=s(g,"frameRate",null),this.duration=s(g,"duration",null),this.msPerFrame,this.skipMissedFrames=s(g,"skipMissedFrames",!0),this.delay=s(g,"delay",0),this.repeat=s(g,"repeat",0),this.repeatDelay=s(g,"repeatDelay",0),this.yoyo=s(g,"yoyo",!1),this.showBeforeDelay=s(g,"showBeforeDelay",!1),this.showOnStart=s(g,"showOnStart",!1),this.hideOnComplete=s(g,"hideOnComplete",!1),this.randomFrame=s(g,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(n.PAUSE_ALL,this.pause,this),this.manager.on(n.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(l,f,m,g){m===null&&g===null?(l.frameRate=24,l.duration=24/f*1e3):m&&g===null?(l.duration=m,l.frameRate=f/(m/1e3)):(l.frameRate=g,l.duration=f/g*1e3),l.msPerFrame=1e3/l.frameRate},addFrame:function(l){return this.addFrameAt(this.frames.length,l)},addFrameAt:function(l,f){var m=this.getFrames(this.manager.textureManager,f);if(m.length>0){if(l===0)this.frames=m.concat(this.frames);else if(l===this.frames.length)this.frames=this.frames.concat(m);else{var g=this.frames.slice(0,l),p=this.frames.slice(l);this.frames=g.concat(m,p)}this.updateFrameSequence()}return this},checkFrame:function(l){return l>=0&&l<this.frames.length},getFirstTick:function(l){l.accumulator=0,l.nextTick=l.currentFrame.duration?l.currentFrame.duration:l.msPerFrame},getFrameAt:function(l){return this.frames[l]},getFrames:function(l,f,m,g){g===void 0&&(g=!0);var p=[],y,S,C=1,A,M;if(typeof f=="string"){if(M=f,!l.exists(M))return console.warn('Texture "%s" not found',M),p;var L=l.get(M),P=L.getFrameNames();g&&o(P),f=[],P.forEach(function(k){f.push({key:M,frame:k})})}if(!Array.isArray(f)||f.length===0)return p;for(A=0;A<f.length;A++){var O=f[A],D=s(O,"key",m);if(D){var I=s(O,"frame",0),F=l.getFrame(D,I);if(!F){console.warn('Texture "%s" not found',D);continue}S=new a(D,I,C,F),S.duration=s(O,"duration",0),S.isFirst=!y,y&&(y.nextFrame=S,S.prevFrame=y),p.push(S),y=S,C++}}if(p.length>0){S.isLast=!0,S.nextFrame=p[0],p[0].prevFrame=S;var H=1/(p.length-1);for(A=0;A<p.length;A++)p[A].progress=A*H}return p},getNextTick:function(l){l.accumulator-=l.nextTick,l.nextTick=l.currentFrame.duration?l.currentFrame.duration:l.msPerFrame},getFrameByProgress:function(l){return l=i(l,0,1),r(l,this.frames,"progress")},nextFrame:function(l){var f=l.currentFrame;f.isLast?l.yoyo?this.handleYoyoFrame(l,!1):l.repeatCounter>0?l.inReverse&&l.forward?l.forward=!1:this.repeatAnimation(l):l.complete():this.updateAndGetNextTick(l,f.nextFrame)},handleYoyoFrame:function(l,f){if(f||(f=!1),l.inReverse===!f&&l.repeatCounter>0){(l.repeatDelay===0||l.pendingRepeat)&&(l.forward=f),this.repeatAnimation(l);return}if(l.inReverse!==f&&l.repeatCounter===0){l.complete();return}l.forward=f;var m=f?l.currentFrame.nextFrame:l.currentFrame.prevFrame;this.updateAndGetNextTick(l,m)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(l){var f=l.currentFrame;f.isFirst?l.yoyo?this.handleYoyoFrame(l,!0):l.repeatCounter>0?l.inReverse&&!l.forward?this.repeatAnimation(l):(l.forward=!0,this.repeatAnimation(l)):l.complete():this.updateAndGetNextTick(l,f.prevFrame)},updateAndGetNextTick:function(l,f){l.setCurrentFrame(f),this.getNextTick(l)},removeFrame:function(l){var f=this.frames.indexOf(l);return f!==-1&&this.removeFrameAt(f),this},removeFrameAt:function(l){return this.frames.splice(l,1),this.updateFrameSequence(),this},repeatAnimation:function(l){if(l._pendingStop===2){if(l._pendingStopValue===0)return l.stop();l._pendingStopValue--}l.repeatDelay>0&&!l.pendingRepeat?(l.pendingRepeat=!0,l.accumulator-=l.nextTick,l.nextTick+=l.repeatDelay):(l.repeatCounter--,l.forward?l.setCurrentFrame(l.currentFrame.nextFrame):l.setCurrentFrame(l.currentFrame.prevFrame),l.isPlaying&&(this.getNextTick(l),l.handleRepeat()))},toJSON:function(){var l={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(f){l.frames.push(f.toJSON())}),l},updateFrameSequence:function(){for(var l=this.frames.length,f=1/(l-1),m,g=0;g<l;g++)m=this.frames[g],m.index=g+1,m.isFirst=!1,m.isLast=!1,m.progress=g*f,g===0?(m.isFirst=!0,l===1?(m.isLast=!0,m.nextFrame=m,m.prevFrame=m):(m.isLast=!1,m.prevFrame=this.frames[l-1],m.nextFrame=this.frames[g+1])):g===l-1&&l>1?(m.isLast=!0,m.prevFrame=this.frames[l-2],m.nextFrame=this.frames[0]):l>1&&(m.prevFrame=this.frames[g-1],m.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(n.PAUSE_ALL,this.pause,this),this.manager.off(n.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var l=0;l<this.frames.length;l++)this.frames[l].destroy();this.frames=[],this.manager=null}});h.exports=d},41138:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a,s,o,d){d===void 0&&(d=!1),this.textureKey=r,this.textureFrame=a,this.index=s,this.frame=o,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=d},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});h.exports=u},60848:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(42099),u=e(83419),n=e(90330),r=e(50792),a=e(74943),s=e(8443),o=e(95540),d=e(35154),l=e(36383),f=e(20283),m=e(41836),g=new u({Extends:r,initialize:function(y){r.call(this),this.game=y,this.textureManager=null,this.globalTimeScale=1,this.anims=new n,this.mixes=new n,this.paused=!1,this.name="AnimationManager",y.events.once(s.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(s.DESTROY,this.destroy,this)},addMix:function(p,y,S){var C=this.anims,A=this.mixes,M=typeof p=="string"?p:p.key,L=typeof y=="string"?y:y.key;if(C.has(M)&&C.has(L)){var P=A.get(M);P||(P={}),P[L]=S,A.set(M,P)}return this},removeMix:function(p,y){var S=this.mixes,C=typeof p=="string"?p:p.key,A=S.get(C);if(A)if(y){var M=typeof y=="string"?y:y.key;A.hasOwnProperty(M)&&delete A[M]}else y||S.delete(C);return this},getMix:function(p,y){var S=this.mixes,C=typeof p=="string"?p:p.key,A=typeof y=="string"?y:y.key,M=S.get(C);return M&&M.hasOwnProperty(A)?M[A]:0},add:function(p,y){return this.anims.has(p)?(console.warn("Animation key exists: "+p),this):(y.key=p,this.anims.set(p,y),this.emit(a.ADD_ANIMATION,p,y),this)},exists:function(p){return this.anims.has(p)},createFromAseprite:function(p,y,S){var C=[],A=this.game.cache.json.get(p);if(!A)return console.warn("No Aseprite data found for: "+p),C;var M=this,L=d(A,"meta",null),P=d(A,"frames",null);if(L&&P){var O=d(L,"frameTags",[]);O.forEach(function(D){var I=[],F=o(D,"name",null),H=o(D,"from",0),k=o(D,"to",0),W=o(D,"direction","forward");if(F&&(!y||y&&y.indexOf(F)>-1)){for(var $=0,K=H;K<=k;K++){var Z=K.toString(),X=P[Z];if(X){var j=o(X,"duration",l.MAX_SAFE_INTEGER);I.push({key:p,frame:Z,duration:j}),$+=j}}W==="reverse"&&(I=I.reverse());var Y={key:F,frames:I,duration:$,yoyo:W==="pingpong"},U;S?S.anims&&(U=S.anims.create(Y)):U=M.create(Y),U&&C.push(U)}})}return C},create:function(p){var y=p.key,S=!1;return y&&(S=this.get(y),S?console.warn("AnimationManager key already exists: "+y):(S=new i(this,y,p),this.anims.set(y,S),this.emit(a.ADD_ANIMATION,y,S))),S},fromJSON:function(p,y){y===void 0&&(y=!1),y&&this.anims.clear(),typeof p=="string"&&(p=JSON.parse(p));var S=[];if(p.hasOwnProperty("anims")&&Array.isArray(p.anims)){for(var C=0;C<p.anims.length;C++)S.push(this.create(p.anims[C]));p.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=p.globalTimeScale)}else p.hasOwnProperty("key")&&p.type==="frame"&&S.push(this.create(p));return S},generateFrameNames:function(p,y){var S=d(y,"prefix",""),C=d(y,"start",0),A=d(y,"end",0),M=d(y,"suffix",""),L=d(y,"zeroPad",0),P=d(y,"outputArray",[]),O=d(y,"frames",!1);if(!this.textureManager.exists(p))return console.warn('Texture "%s" not found',p),P;var D=this.textureManager.get(p);if(!D)return P;var I;if(y)for(O||(O=f(C,A)),I=0;I<O.length;I++){var F=S+m(O[I],L,"0",1)+M;D.has(F)?P.push({key:p,frame:F}):console.warn('Frame "%s" not found in texture "%s"',F,p)}else for(O=D.getFrameNames(),I=0;I<O.length;I++)P.push({key:p,frame:O[I]});return P},generateFrameNumbers:function(p,y){var S=d(y,"start",0),C=d(y,"end",-1),A=d(y,"first",!1),M=d(y,"outputArray",[]),L=d(y,"frames",!1);if(!this.textureManager.exists(p))return console.warn('Texture "%s" not found',p),M;var P=this.textureManager.get(p);if(!P)return M;A&&P.has(A)&&M.push({key:p,frame:A}),L||(C===-1&&(C=P.frameTotal-2),L=f(S,C));for(var O=0;O<L.length;O++){var D=L[O];P.has(D)?M.push({key:p,frame:D}):console.warn('Frame "%s" not found in texture "%s"',D,p)}return M},get:function(p){return this.anims.get(p)},getAnimsFromTexture:function(p){for(var y=this.textureManager.get(p),S=y.key,C=this.anims.getArray(),A=[],M=0;M<C.length;M++)for(var L=C[M],P=L.frames,O=0;O<P.length;O++)if(P[O].textureKey===S){A.push(L.key);break}return A},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(a.PAUSE_ALL)),this},play:function(p,y){Array.isArray(y)||(y=[y]);for(var S=0;S<y.length;S++)y[S].anims.play(p);return this},staggerPlay:function(p,y,S,C){S===void 0&&(S=0),C===void 0&&(C=!0),Array.isArray(y)||(y=[y]);var A=y.length;C||A--;for(var M=0;M<y.length;M++){var L=S<0?Math.abs(S)*(A-M):S*M;y[M].anims.playAfterDelay(p,L)}return this},remove:function(p){var y=this.get(p);return y&&(this.emit(a.REMOVE_ANIMATION,p,y),this.anims.delete(p),this.removeMix(p)),y},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(a.RESUME_ALL)),this},toJSON:function(p){var y={anims:[],globalTimeScale:this.globalTimeScale};return p!==void 0&&p!==""?y.anims.push(this.anims.get(p).toJSON()):this.anims.each(function(S,C){y.anims.push(C.toJSON())}),y},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});h.exports=g},9674:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(42099),u=e(30976),n=e(83419),r=e(90330),a=e(74943),s=e(95540),o=new n({initialize:function(l){this.parent=l,this.animationManager=l.scene.sys.anims,this.animationManager.on(a.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(d){var l=this.parent;if(d===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,l;Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++){var m=d[f];this.nextAnim?this.nextAnimsQueue.push(m):this.nextAnim=m}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(d){this.isPlaying&&this.stop();var l=this.animationManager,f=typeof d=="string"?d:s(d,"key",null),m=this.exists(f)?this.get(f):l.get(f);if(!m)console.warn("Missing animation: "+f);else{this.currentAnim=m;var g=m.getTotalFrames(),p=s(d,"frameRate",m.frameRate),y=s(d,"duration",m.duration);m.calculateDuration(this,g,y,p),this.delay=s(d,"delay",m.delay),this.repeat=s(d,"repeat",m.repeat),this.repeatDelay=s(d,"repeatDelay",m.repeatDelay),this.yoyo=s(d,"yoyo",m.yoyo),this.showBeforeDelay=s(d,"showBeforeDelay",m.showBeforeDelay),this.showOnStart=s(d,"showOnStart",m.showOnStart),this.hideOnComplete=s(d,"hideOnComplete",m.hideOnComplete),this.skipMissedFrames=s(d,"skipMissedFrames",m.skipMissedFrames),this.randomFrame=s(d,"randomFrame",m.randomFrame),this.timeScale=s(d,"timeScale",this.timeScale);var S=s(d,"startFrame",0);S>g&&(S=0),this.randomFrame&&(S=u(0,g-1));var C=m.frames[S];S===0&&!this.forward&&(C=m.getLastFrame()),this.currentFrame=C}return this.parent},pause:function(d){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),d!==void 0&&this.setCurrentFrame(d),this.parent},resume:function(d){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),d!==void 0&&this.setCurrentFrame(d),this.parent},playAfterDelay:function(d,l){if(!this.isPlaying)this.delayCounter=l,this.play(d,!0);else{var f=this.nextAnim,m=this.nextAnimsQueue;f&&m.unshift(f),this.nextAnim=d,this._pendingStop=1,this._pendingStopValue=l}return this.parent},playAfterRepeat:function(d,l){if(l===void 0&&(l=1),!this.isPlaying)this.play(d);else{var f=this.nextAnim,m=this.nextAnimsQueue;f&&m.unshift(f),this.repeatCounter!==-1&&l>this.repeatCounter&&(l=this.repeatCounter),this.nextAnim=d,this._pendingStop=2,this._pendingStopValue=l}return this.parent},play:function(d,l){l===void 0&&(l=!1);var f=this.currentAnim,m=this.parent,g=typeof d=="string"?d:d.key;if(l&&this.isPlaying&&f.key===g)return m;if(f&&this.isPlaying){var p=this.animationManager.getMix(f.key,d);if(p>0)return this.playAfterDelay(d,p)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(d)},playReverse:function(d,l){l===void 0&&(l=!1);var f=typeof d=="string"?d:d.key;return l&&this.isPlaying&&this.currentAnim.key===f?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(d))},startAnimation:function(d){this.load(d);var l=this.currentAnim,f=this.parent;return l&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,l.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),f},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(a.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(a.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(a.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(a.ANIMATION_COMPLETE,a.ANIMATION_COMPLETE_KEY)},emitEvents:function(d,l){var f=this.currentAnim;if(f){var m=this.currentFrame,g=this.parent,p=m.textureFrame;g.emit(d,f,m,g,p),l&&g.emit(l+f.key,f,m,g,p)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var d=this.currentFrame;if(!d)return 0;var l=d.progress;return this.inReverse&&(l*=-1),l},setProgress:function(d){return this.forward||(d=1-d),this.setCurrentFrame(this.currentAnim.getFrameByProgress(d)),this.parent},setRepeat:function(d){return this.repeatCounter=d===-1?Number.MAX_VALUE:d,this.parent},globalRemove:function(d,l){l===void 0&&(l=this.currentAnim),this.isPlaying&&l.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(d,l){d===void 0&&(d=!1),l===void 0&&(l=!1);var f=this.currentAnim,m=this.parent;return f?(l&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),f.getFirstTick(this),this.emitEvents(a.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!d,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(f.frames[0]),this.parent):m},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var d=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(d)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var d=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(d)}return this.parent},stopAfterDelay:function(d){return this._pendingStop=1,this._pendingStopValue=d,this.parent},stopAfterRepeat:function(d){return d===void 0&&(d=1),this.repeatCounter!==-1&&d>this.repeatCounter&&(d=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=d,this.parent},stopOnFrame:function(d){return this._pendingStop=3,this._pendingStopValue=d,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(d,l){var f=this.currentAnim;if(!(!this.isPlaying||!f||f.paused)){if(this.accumulator+=l*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=l,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?f.nextFrame(this):f.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var m=0;do this.forward?f.nextFrame(this):f.previousFrame(this),m++;while(this.isPlaying&&this.accumulator>this.nextTick&&m<60)}}},setCurrentFrame:function(d){var l=this.parent;return this.currentFrame=d,l.texture=d.frame.texture,l.frame=d.frame,l.isCropped&&l.frame.updateCropUVs(l._crop,l.flipX,l.flipY),d.setAlpha&&(l.alpha=d.alpha),l.setSizeToFrame(),l._originComponent&&(d.frame.customPivot?l.setOrigin(d.frame.pivotX,d.frame.pivotY):l.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(a.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===d&&this.stop()),l},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(d){return this.anims?this.anims.get(d):null},exists:function(d){return this.anims?this.anims.has(d):!1},create:function(d){var l=d.key,f=!1;return l&&(f=this.get(l),f?console.warn("Animation key already exists: "+l):(f=new i(this,l,d),this.anims||(this.anims=new r),this.anims.set(l,f))),f},createFromAseprite:function(d,l){return this.animationManager.createFromAseprite(d,l,this.parent)},generateFrameNames:function(d,l){return this.animationManager.generateFrameNames(d,l)},generateFrameNumbers:function(d,l){return this.animationManager.generateFrameNumbers(d,l)},remove:function(d){var l=this.get(d);return l&&(this.currentAnim===l&&this.stop(),this.anims.delete(d)),l},destroy:function(){this.animationManager.off(a.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});h.exports=o},57090:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="add"},25312:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationcomplete"},89580:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationcomplete-"},52860:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationrepeat"},63850:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationrestart"},99085:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationstart"},28087:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationstop"},1794:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationupdate"},52562:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pauseall"},57953:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="remove"},68339:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resumeall"},74943:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADD_ANIMATION:e(57090),ANIMATION_COMPLETE:e(25312),ANIMATION_COMPLETE_KEY:e(89580),ANIMATION_REPEAT:e(52860),ANIMATION_RESTART:e(63850),ANIMATION_START:e(99085),ANIMATION_STOP:e(28087),ANIMATION_UPDATE:e(1794),PAUSE_ALL:e(52562),REMOVE_ANIMATION:e(57953),RESUME_ALL:e(68339)}},60421:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Animation:e(42099),AnimationFrame:e(41138),AnimationManager:e(60848),AnimationState:e(9674),Events:e(74943)}},2161:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(90330),n=e(50792),r=e(24736),a=new i({initialize:function(){this.entries=new u,this.events=new n},add:function(s,o){return this.entries.set(s,o),this.events.emit(r.ADD,this,s,o),this},has:function(s){return this.entries.has(s)},exists:function(s){return this.entries.has(s)},get:function(s){return this.entries.get(s)},remove:function(s){var o=this.get(s);return o&&(this.entries.delete(s),this.events.emit(r.REMOVE,this,s,o.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});h.exports=a},24047:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2161),u=e(83419),n=e(8443),r=new u({initialize:function(s){this.game=s,this.binary=new i,this.bitmapFont=new i,this.json=new i,this.physics=new i,this.shader=new i,this.audio=new i,this.video=new i,this.text=new i,this.html=new i,this.obj=new i,this.tilemap=new i,this.xml=new i,this.custom={},this.game.events.once(n.DESTROY,this.destroy,this)},addCustom:function(a){return this.custom.hasOwnProperty(a)||(this.custom[a]=new i),this.custom[a]},destroy:function(){for(var a=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],s=0;s<a.length;s++)this[a[s]].destroy(),this[a[s]]=null;for(var o in this.custom)this.custom[o].destroy();this.custom=null,this.game=null}});h.exports=r},51464:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="add"},59261:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="remove"},24736:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADD:e(51464),REMOVE:e(59261)}},83388:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BaseCache:e(2161),CacheManager:e(24047),Events:e(24736)}},71911:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31401),n=e(39506),r=e(50792),a=e(19715),s=e(87841),o=e(61340),d=e(80333),l=e(26099),f=new i({Extends:r,Mixins:[u.AlphaSingle,u.Visible],initialize:function(g,p,y,S){g===void 0&&(g=0),p===void 0&&(p=0),y===void 0&&(y=0),S===void 0&&(S=0),r.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new s,this.dirty=!0,this._x=g,this._y=p,this._width=y,this._height=S,this._bounds=new s,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new o,this.transparent=!0,this.backgroundColor=d("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new l(y/2,S/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(m){this.renderList.push(m)},setOrigin:function(m,g){return m===void 0&&(m=.5),g===void 0&&(g=m),this.originX=m,this.originY=g,this},getScroll:function(m,g,p){p===void 0&&(p=new l);var y=this.width*.5,S=this.height*.5;return p.x=m-y,p.y=g-S,this.useBounds&&(p.x=this.clampX(p.x),p.y=this.clampY(p.y)),p},centerOnX:function(m){var g=this.width*.5;return this.midPoint.x=m,this.scrollX=m-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(m){var g=this.height*.5;return this.midPoint.y=m,this.scrollY=m-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(m,g){return this.centerOnX(m),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var m=this._bounds,g=this.width*.5,p=this.height*.5;this.midPoint.set(m.centerX,m.centerY),this.scrollX=m.centerX-g,this.scrollY=m.centerY-p}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(m){if(this.disableCull)return m;var g=this.matrix.matrix,p=g[0],y=g[1],S=g[2],C=g[3],A=p*C-y*S;if(!A)return m;var M=g[4],L=g[5],P=this.scrollX,O=this.scrollY,D=this.width,I=this.height,F=this.y,H=F+I,k=this.x,W=k+D,$=this.culledObjects,K=m.length;A=1/A,$.length=0;for(var Z=0;Z<K;++Z){var X=m[Z];if(!X.hasOwnProperty("width")||X.parentContainer){$.push(X);continue}var j=X.width,Y=X.height,U=X.x-P*X.scrollFactorX-j*X.originX,J=X.y-O*X.scrollFactorY-Y*X.originY,q=U*p+J*S+M,_=U*y+J*C+L,te=(U+j)*p+(J+Y)*S+M,se=(U+j)*y+(J+Y)*C+L;te>k&&q<W&&se>F&&_<H&&$.push(X)}return $},getWorldPoint:function(m,g,p){p===void 0&&(p=new l);var y=this.matrix.matrix,S=y[0],C=y[1],A=y[2],M=y[3],L=y[4],P=y[5],O=S*M-C*A;if(!O)return p.x=m,p.y=g,p;O=1/O;var D=M*O,I=-C*O,F=-A*O,H=S*O,k=(A*P-M*L)*O,W=(C*L-S*P)*O,$=Math.cos(this.rotation),K=Math.sin(this.rotation),Z=this.zoomX,X=this.zoomY,j=this.scrollX,Y=this.scrollY,U=m+(j*$-Y*K)*Z,J=g+(j*K+Y*$)*X;return p.x=U*D+J*F+k,p.y=U*I+J*H+W,p},ignore:function(m){var g=this.id;Array.isArray(m)||(m=[m]);for(var p=0;p<m.length;p++){var y=m[p];Array.isArray(y)?this.ignore(y):y.isParent?this.ignore(y.getChildren()):y.cameraFilter|=g}return this},clampX:function(m){var g=this._bounds,p=this.displayWidth,y=g.x+(p-this.width)/2,S=Math.max(y,y+g.width-p);return m<y?m=y:m>S&&(m=S),m},clampY:function(m){var g=this._bounds,p=this.displayHeight,y=g.y+(p-this.height)/2,S=Math.max(y,y+g.height-p);return m<y?m=y:m>S&&(m=S),m},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(m){return m===void 0&&(m=0),this.rotation=n(m),this},setBackgroundColor:function(m){return m===void 0&&(m="rgba(0,0,0,0)"),this.backgroundColor=d(m),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(m,g,p,y,S){return S===void 0&&(S=!1),this._bounds.setTo(m,g,p,y),this.dirty=!0,this.useBounds=!0,S?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(m){m===void 0&&(m=new s);var g=this._bounds;return m.setTo(g.x,g.y,g.width,g.height),m},setName:function(m){return m===void 0&&(m=""),this.name=m,this},setPosition:function(m,g){return g===void 0&&(g=m),this.x=m,this.y=g,this},setRotation:function(m){return m===void 0&&(m=0),this.rotation=m,this},setRoundPixels:function(m){return this.roundPixels=m,this},setScene:function(m,g){g===void 0&&(g=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=m,this.isSceneCamera=g;var p=m.sys;return this.sceneManager=p.game.scene,this.scaleManager=p.scale,this.cameraManager=p.cameras,this.updateSystem(),this},setScroll:function(m,g){return g===void 0&&(g=m),this.scrollX=m,this.scrollY=g,this},setSize:function(m,g){return g===void 0&&(g=m),this.width=m,this.height=g,this},setViewport:function(m,g,p,y){return this.x=m,this.y=g,this.width=p,this.height=y,this},setZoom:function(m,g){return m===void 0&&(m=1),g===void 0&&(g=m),m===0&&(m=.001),g===0&&(g=.001),this.zoomX=m,this.zoomY=g,this},setMask:function(m,g){return g===void 0&&(g=!0),this.mask=m,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(m){return m===void 0&&(m=!1),m&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var m={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(m.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),m},update:function(){},setIsSceneCamera:function(m){return this.isSceneCamera=m,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var m=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;m&&!this._customViewport?g.customViewports++:!m&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=m}},destroy:function(){this.emit(a.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(m){this._x=m,this.updateSystem()}},y:{get:function(){return this._y},set:function(m){this._y=m,this.updateSystem()}},width:{get:function(){return this._width},set:function(m){this._width=m,this.updateSystem()}},height:{get:function(){return this._height},set:function(m){this._height=m,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(m){m!==this._scrollX&&(this._scrollX=m,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(m){m!==this._scrollY&&(this._scrollY=m,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(m){this._zoomX=m,this._zoomY=m,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(m){this._zoomX=m,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(m){this._zoomY=m,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(m){this._rotation=m,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});h.exports=f},38058:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(71911),u=e(67502),n=e(45319),r=e(83419),a=e(31401),s=e(20052),o=e(19715),d=e(28915),l=e(87841),f=e(26099),m=new r({Extends:i,Mixins:[a.PostPipeline],initialize:function(p,y,S,C){i.call(this,p,y,S,C),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new s.Fade(this),this.flashEffect=new s.Flash(this),this.shakeEffect=new s.Shake(this),this.panEffect=new s.Pan(this),this.rotateToEffect=new s.RotateTo(this),this.zoomEffect=new s.Zoom(this),this.lerp=new f(1,1),this.followOffset=new f,this.deadzone=null,this._follow=null},setDeadzone:function(g,p){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=p):this.deadzone=new l(0,0,g,p),this._follow){var y=this.width/2,S=this.height/2,C=this._follow.x-this.followOffset.x,A=this._follow.y-this.followOffset.y;this.midPoint.set(C,A),this.scrollX=C-y,this.scrollY=A-S}u(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,p,y,S,C,A){return this.fadeEffect.start(!1,g,p,y,S,!0,C,A)},fadeOut:function(g,p,y,S,C,A){return this.fadeEffect.start(!0,g,p,y,S,!0,C,A)},fadeFrom:function(g,p,y,S,C,A,M){return this.fadeEffect.start(!1,g,p,y,S,C,A,M)},fade:function(g,p,y,S,C,A,M){return this.fadeEffect.start(!0,g,p,y,S,C,A,M)},flash:function(g,p,y,S,C,A,M){return this.flashEffect.start(g,p,y,S,C,A,M)},shake:function(g,p,y,S,C){return this.shakeEffect.start(g,p,y,S,C)},pan:function(g,p,y,S,C,A,M){return this.panEffect.start(g,p,y,S,C,A,M)},rotateTo:function(g,p,y,S,C,A,M){return this.rotateToEffect.start(g,p,y,S,C,A,M)},zoomTo:function(g,p,y,S,C,A){return this.zoomEffect.start(g,p,y,S,C,A)},preRender:function(){this.renderList.length=0;var g=this.width,p=this.height,y=g*.5,S=p*.5,C=this.zoomX,A=this.zoomY,M=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(C)&&Number.isInteger(A);var L=g*this.originX,P=p*this.originY,O=this._follow,D=this.deadzone,I=this.scrollX,F=this.scrollY;D&&u(D,this.midPoint.x,this.midPoint.y);var H=!1;if(O&&!this.panEffect.isRunning){var k=this.lerp,W=O.x-this.followOffset.x,$=O.y-this.followOffset.y;D?(W<D.x?I=d(I,I-(D.x-W),k.x):W>D.right&&(I=d(I,I+(W-D.right),k.x)),$<D.y?F=d(F,F-(D.y-$),k.y):$>D.bottom&&(F=d(F,F+($-D.bottom),k.y))):(I=d(I,W-L,k.x),F=d(F,$-P,k.y)),H=!0}this.roundPixels&&(I=Math.floor(I),F=Math.floor(F)),this.useBounds&&(I=this.clampX(I),F=this.clampY(F)),this.scrollX=I,this.scrollY=F;var K=I+y,Z=F+S;this.midPoint.set(K,Z);var X=Math.floor(g/C+.5),j=Math.floor(p/A+.5),Y=Math.floor(K-X/2+.5),U=Math.floor(Z-j/2+.5);this.worldView.setTo(Y,U,X,j),M.applyITRS(Math.floor(this.x+L+.5),Math.floor(this.y+P+.5),this.rotation,C,A),M.translate(-L,-P),this.shakeEffect.preRender(),H&&this.emit(o.FOLLOW_UPDATE,this,O)},setLerp:function(g,p){return g===void 0&&(g=1),p===void 0&&(p=g),this.lerp.set(g,p),this},setFollowOffset:function(g,p){return g===void 0&&(g=0),p===void 0&&(p=0),this.followOffset.set(g,p),this},startFollow:function(g,p,y,S,C,A){p===void 0&&(p=!1),y===void 0&&(y=1),S===void 0&&(S=y),C===void 0&&(C=0),A===void 0&&(A=C),this._follow=g,this.roundPixels=p,y=n(y,0,1),S=n(S,0,1),this.lerp.set(y,S),this.followOffset.set(C,A);var M=this.width/2,L=this.height/2,P=g.x-C,O=g.y-A;return this.midPoint.set(P,O),this.scrollX=P-M,this.scrollY=O-L,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,p){this.visible&&(this.rotateToEffect.update(g,p),this.panEffect.update(g,p),this.zoomEffect.update(g,p),this.shakeEffect.update(g,p),this.flashEffect.update(g,p),this.fadeEffect.update(g,p))},destroy:function(){this.resetFX(),i.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});h.exports=m},32743:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(38058),u=e(83419),n=e(95540),r=e(37277),a=e(37303),s=e(97480),o=e(44594),d=new u({initialize:function(f){this.scene=f,this.systems=f.sys,this.roundPixels=f.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,f.sys.events.once(o.BOOT,this.boot,this),f.sys.events.on(o.START,this.start,this)},boot:function(){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new i(0,0,l.scale.width,l.scale.height).setScene(this.scene),l.game.scale.on(s.RESIZE,this.onResize,this),this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){if(!this.main){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0]}var f=this.systems.events;f.on(o.UPDATE,this.update,this),f.once(o.SHUTDOWN,this.shutdown,this)},add:function(l,f,m,g,p,y){l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),p===void 0&&(p=!1),y===void 0&&(y="");var S=new i(l,f,m,g);return S.setName(y),S.setScene(this.scene),S.setRoundPixels(this.roundPixels),S.id=this.getNextID(),this.cameras.push(S),p&&(this.main=S),S},addExisting:function(l,f){f===void 0&&(f=!1);var m=this.cameras.indexOf(l);return m===-1?(l.id=this.getNextID(),l.setRoundPixels(this.roundPixels),this.cameras.push(l),f&&(this.main=l),l):null},getNextID:function(){for(var l=this.cameras,f=1,m=0;m<32;m++){for(var g=!1,p=0;p<l.length;p++){var y=l[p];if(y&&y.id===f){g=!0;continue}}if(g)f=f<<1;else return f}return 0},getTotal:function(l){l===void 0&&(l=!1);for(var f=0,m=this.cameras,g=0;g<m.length;g++){var p=m[g];(!l||l&&p.visible)&&f++}return f},fromJSON:function(l){Array.isArray(l)||(l=[l]);for(var f=this.scene.sys.scale.width,m=this.scene.sys.scale.height,g=0;g<l.length;g++){var p=l[g],y=n(p,"x",0),S=n(p,"y",0),C=n(p,"width",f),A=n(p,"height",m),M=this.add(y,S,C,A);M.name=n(p,"name",""),M.zoom=n(p,"zoom",1),M.rotation=n(p,"rotation",0),M.scrollX=n(p,"scrollX",0),M.scrollY=n(p,"scrollY",0),M.roundPixels=n(p,"roundPixels",!1),M.visible=n(p,"visible",!0);var L=n(p,"backgroundColor",!1);L&&M.setBackgroundColor(L);var P=n(p,"bounds",null);if(P){var O=n(P,"x",0),D=n(P,"y",0),I=n(P,"width",f),F=n(P,"height",m);M.setBounds(O,D,I,F)}}return this},getCamera:function(l){for(var f=this.cameras,m=0;m<f.length;m++)if(f[m].name===l)return f[m];return null},getCamerasBelowPointer:function(l){for(var f=this.cameras,m=l.x,g=l.y,p=[],y=0;y<f.length;y++){var S=f[y];S.visible&&S.inputEnabled&&a(S,m,g)&&p.unshift(S)}return p},remove:function(l,f){f===void 0&&(f=!0),Array.isArray(l)||(l=[l]);for(var m=0,g=this.cameras,p=0;p<l.length;p++){var y=g.indexOf(l[p]);y!==-1&&(f?g[y].destroy():g[y].renderList=[],g.splice(y,1),m++)}return!this.main&&g[0]&&(this.main=g[0]),m},render:function(l,f){for(var m=this.scene,g=this.cameras,p=0;p<g.length;p++){var y=g[p];if(y.visible&&y.alpha>0){y.preRender();var S=this.getVisibleChildren(f.getChildren(),y);l.render(m,S,y)}}},getVisibleChildren:function(l,f){return l.filter(function(m){return m.willRender(f)})},resetAll:function(){for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(l,f){for(var m=0;m<this.cameras.length;m++)this.cameras[m].update(l,f)},onResize:function(l,f,m,g,p){for(var y=0;y<this.cameras.length;y++){var S=this.cameras[y];S._x===0&&S._y===0&&S._width===g&&S._height===p&&S.setSize(f.width,f.height)}},resize:function(l,f){for(var m=0;m<this.cameras.length;m++)this.cameras[m].setSize(l,f)},shutdown:function(){this.main=void 0;for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();this.cameras=[];var f=this.systems.events;f.off(o.UPDATE,this.update,this),f.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(o.START,this.start,this),this.systems.events.off(o.DESTROY,this.destroy,this),this.systems.game.scale.off(s.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});r.register("CameraManager",d,"cameras"),h.exports=d},5020:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=e(83419),n=e(19715),r=new u({initialize:function(s){this.camera=s,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,s,o,d,l,f,m,g){if(a===void 0&&(a=!0),s===void 0&&(s=1e3),o===void 0&&(o=0),d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=!1),m===void 0&&(m=null),g===void 0&&(g=this.camera.scene),!f&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=s,this.direction=a,this.progress=0,this.red=o,this.green=d,this.blue=l,this.alpha=a?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=m,this._onUpdateScope=g;var p=a?n.FADE_OUT_START:n.FADE_IN_START;return this.camera.emit(p,this.camera,this,s,o,d,l),this.camera},update:function(a,s){this.isRunning&&(this._elapsed+=s,this.progress=i(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(a){if(!this.isRunning&&!this.isComplete)return!1;var s=this.camera;return a.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",a.fillRect(s.x,s.y,s.width,s.height),!0},postRenderWebGL:function(a,s){if(!this.isRunning&&!this.isComplete)return!1;var o=this.camera,d=this.red/255,l=this.green/255,f=this.blue/255;return a.drawFillRect(o.x,o.y,o.width,o.height,s(f,l,d,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var a=this.direction?n.FADE_OUT_COMPLETE:n.FADE_IN_COMPLETE;this.camera.emit(a,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});h.exports=r},10662:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=e(83419),n=e(19715),r=new u({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(a,s,o,d,l,f,m){return a===void 0&&(a=250),s===void 0&&(s=255),o===void 0&&(o=255),d===void 0&&(d=255),l===void 0&&(l=!1),f===void 0&&(f=null),m===void 0&&(m=this.camera.scene),!l&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=a,this.progress=0,this.red=s,this.green=o,this.blue=d,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=f,this._onUpdateScope=m,this.camera.emit(n.FLASH_START,this.camera,this,a,s,o,d),this.camera)},update:function(a,s){this.isRunning&&(this._elapsed+=s,this.progress=i(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(a){if(!this.isRunning)return!1;var s=this.camera;return a.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",a.fillRect(s.x,s.y,s.width,s.height),!0},postRenderWebGL:function(a,s){if(!this.isRunning)return!1;var o=this.camera,d=this.red/255,l=this.green/255,f=this.blue/255;return a.drawFillRect(o.x,o.y,o.width,o.height,s(f,l,d,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});h.exports=r},20359:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=e(83419),n=e(62640),r=e(19715),a=e(26099),s=new u({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=new a,this.current=new a,this.destination=new a,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,d,l,f,m,g,p){l===void 0&&(l=1e3),f===void 0&&(f=n.Linear),m===void 0&&(m=!1),g===void 0&&(g=null),p===void 0&&(p=this.camera.scene);var y=this.camera;return!m&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source.set(y.scrollX,y.scrollY),this.destination.set(o,d),y.getScroll(o,d,this.current),typeof f=="string"&&n.hasOwnProperty(f)?this.ease=n[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=p,this.camera.emit(r.PAN_START,this.camera,this,l,o,d)),y},update:function(o,d){if(this.isRunning){this._elapsed+=d;var l=i(this._elapsed/this.duration,0,1);this.progress=l;var f=this.camera;if(this._elapsed<this.duration){var m=this.ease(l);f.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*m,p=this.source.y+(this.current.y-this.source.y)*m;f.setScroll(g,p),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,l,g,p)}else f.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,l,f.scrollX,f.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});h.exports=s},34208:(h,w,e)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var i=e(45319),u=e(83419),n=e(19715),r=e(62640),a=new u({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(s,o,d,l,f,m,g){d===void 0&&(d=1e3),l===void 0&&(l=r.Linear),f===void 0&&(f=!1),m===void 0&&(m=null),g===void 0&&(g=this.camera.scene),o===void 0&&(o=!1),this.shortestPath=o;var p=s;s<0?(p=-1*s,this.clockwise=!1):this.clockwise=!0;var y=360*Math.PI/180;p=p-Math.floor(p/y)*y;var S=this.camera;if(!f&&this.isRunning)return S;if(this.isRunning=!0,this.duration=d,this.progress=0,this.source=S.rotation,this.destination=p,typeof l=="string"&&r.hasOwnProperty(l)?this.ease=r[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=m,this._onUpdateScope=g,this.shortestPath){var C=0,A=0;this.destination>this.source?C=Math.abs(this.destination-this.source):C=Math.abs(this.destination+y)-this.source,this.source>this.destination?A=Math.abs(this.source-this.destination):A=Math.abs(this.source+y)-this.destination,C<A?this.clockwise=!0:C>A&&(this.clockwise=!1)}return this.camera.emit(n.ROTATE_START,this.camera,this,d,p),S},update:function(s,o){if(this.isRunning){this._elapsed+=o;var d=i(this._elapsed/this.duration,0,1);this.progress=d;var l=this.camera;if(this._elapsed<this.duration){var f=this.ease(d);this.current=l.rotation;var m=0,g=360*Math.PI/180,p=this.destination,y=this.current;this.clockwise===!1&&(p=this.current,y=this.destination),p>=y?m=Math.abs(p-y):m=Math.abs(p+g)-y;var S=0;this.clockwise?S=l.rotation+m*f:S=l.rotation-m*f,l.rotation=S,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,d,S)}else l.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,d,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});h.exports=a},30330:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=e(83419),n=e(19715),r=e(26099),a=new u({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.intensity=new r,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(s,o,d,l,f){return s===void 0&&(s=100),o===void 0&&(o=.05),d===void 0&&(d=!1),l===void 0&&(l=null),f===void 0&&(f=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=s,this.progress=0,typeof o=="number"?this.intensity.set(o):this.intensity.set(o.x,o.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=l,this._onUpdateScope=f,this.camera.emit(n.SHAKE_START,this.camera,this,s,o),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(s,o){if(this.isRunning)if(this._elapsed+=o,this.progress=i(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var d=this.intensity,l=this.camera.width,f=this.camera.height,m=this.camera.zoom;this._offsetX=(Math.random()*d.x*l*2-d.x*l)*m,this._offsetY=(Math.random()*d.y*f*2-d.y*f)*m,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});h.exports=a},45641:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=e(83419),n=e(62640),r=e(19715),a=new u({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,o,d,l,f,m){o===void 0&&(o=1e3),d===void 0&&(d=n.Linear),l===void 0&&(l=!1),f===void 0&&(f=null),m===void 0&&(m=this.camera.scene);var g=this.camera;return!l&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source=g.zoom,this.destination=s,typeof d=="string"&&n.hasOwnProperty(d)?this.ease=n[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=m,this.camera.emit(r.ZOOM_START,this.camera,this,o,s)),g},update:function(s,o){this.isRunning&&(this._elapsed+=o,this.progress=i(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});h.exports=a},20052:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Fade:e(5020),Flash:e(10662),Pan:e(20359),Shake:e(30330),RotateTo:e(34208),Zoom:e(45641)}},16438:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="cameradestroy"},32726:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerafadeincomplete"},87807:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerafadeinstart"},45917:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerafadeoutcomplete"},95666:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerafadeoutstart"},47056:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="cameraflashcomplete"},91261:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="cameraflashstart"},45047:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="followupdate"},81927:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerapancomplete"},74264:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerapanstart"},54419:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postrender"},79330:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prerender"},93183:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerarotatecomplete"},80112:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerarotatestart"},62252:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerashakecomplete"},86017:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerashakestart"},539:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerazoomcomplete"},51892:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerazoomstart"},19715:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={DESTROY:e(16438),FADE_IN_COMPLETE:e(32726),FADE_IN_START:e(87807),FADE_OUT_COMPLETE:e(45917),FADE_OUT_START:e(95666),FLASH_COMPLETE:e(47056),FLASH_START:e(91261),FOLLOW_UPDATE:e(45047),PAN_COMPLETE:e(81927),PAN_START:e(74264),POST_RENDER:e(54419),PRE_RENDER:e(79330),ROTATE_COMPLETE:e(93183),ROTATE_START:e(80112),SHAKE_COMPLETE:e(62252),SHAKE_START:e(86017),ZOOM_COMPLETE:e(539),ZOOM_START:e(51892)}},87969:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Camera:e(38058),BaseCamera:e(71911),CameraManager:e(32743),Effects:e(20052),Events:e(19715)}},63091:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(35154),n=new i({initialize:function(a){this.camera=u(a,"camera",null),this.left=u(a,"left",null),this.right=u(a,"right",null),this.up=u(a,"up",null),this.down=u(a,"down",null),this.zoomIn=u(a,"zoomIn",null),this.zoomOut=u(a,"zoomOut",null),this.zoomSpeed=u(a,"zoomSpeed",.01),this.minZoom=u(a,"minZoom",.001),this.maxZoom=u(a,"maxZoom",1e3),this.speedX=0,this.speedY=0;var s=u(a,"speed",null);typeof s=="number"?(this.speedX=s,this.speedY=s):(this.speedX=u(a,"speed.x",0),this.speedY=u(a,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(r){return this.camera=r,this},update:function(r){if(this.active){r===void 0&&(r=1);var a=this.camera;this.up&&this.up.isDown?a.scrollY-=this.speedY*r|0:this.down&&this.down.isDown&&(a.scrollY+=this.speedY*r|0),this.left&&this.left.isDown?a.scrollX-=this.speedX*r|0:this.right&&this.right.isDown&&(a.scrollX+=this.speedX*r|0),this.zoomIn&&this.zoomIn.isDown?(a.zoom-=this.zoomSpeed,a.zoom<this.minZoom&&(a.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(a.zoom+=this.zoomSpeed,a.zoom>this.maxZoom&&(a.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});h.exports=n},58818:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(35154),n=new i({initialize:function(a){this.camera=u(a,"camera",null),this.left=u(a,"left",null),this.right=u(a,"right",null),this.up=u(a,"up",null),this.down=u(a,"down",null),this.zoomIn=u(a,"zoomIn",null),this.zoomOut=u(a,"zoomOut",null),this.zoomSpeed=u(a,"zoomSpeed",.01),this.minZoom=u(a,"minZoom",.001),this.maxZoom=u(a,"maxZoom",1e3),this.accelX=0,this.accelY=0;var s=u(a,"acceleration",null);typeof s=="number"?(this.accelX=s,this.accelY=s):(this.accelX=u(a,"acceleration.x",0),this.accelY=u(a,"acceleration.y",0)),this.dragX=0,this.dragY=0;var o=u(a,"drag",null);typeof o=="number"?(this.dragX=o,this.dragY=o):(this.dragX=u(a,"drag.x",0),this.dragY=u(a,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var d=u(a,"maxSpeed",null);typeof d=="number"?(this.maxSpeedX=d,this.maxSpeedY=d):(this.maxSpeedX=u(a,"maxSpeed.x",0),this.maxSpeedY=u(a,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(r){return this.camera=r,this},update:function(r){if(this.active){r===void 0&&(r=1);var a=this.camera;this._speedX>0?(this._speedX-=this.dragX*r,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*r,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*r,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*r,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(a.scrollX-=this._speedX*r|0),this._speedY!==0&&(a.scrollY-=this._speedY*r|0),this._zoom!==0&&(a.zoom+=this._zoom,a.zoom<this.minZoom?a.zoom=this.minZoom:a.zoom>this.maxZoom&&(a.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});h.exports=n},38865:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={FixedKeyControl:e(63091),SmoothedKeyControl:e(58818)}},26638:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Controls:e(38865),Scene2D:e(87969)}},8054:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={VERSION:"3.87",LOG_VERSION:"v387",BlendModes:e(10312),ScaleModes:e(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};h.exports=i},69547:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(8054),n=e(42363),r=e(82264),a=e(95540),s=e(35154),o=e(41212),d=e(29747),l=e(75508),f=e(36060),m=e(80333),g=new i({initialize:function(y){y===void 0&&(y={});var S=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],C="#ffffff",A=s(y,"scale",null);this.width=s(A,"width",1024,y),this.height=s(A,"height",768,y),this.zoom=s(A,"zoom",1,y),this.parent=s(A,"parent",void 0,y),this.scaleMode=s(A,A?"mode":"scaleMode",0,y),this.expandParent=s(A,"expandParent",!0,y),this.autoRound=s(A,"autoRound",!1,y),this.autoCenter=s(A,"autoCenter",0,y),this.resizeInterval=s(A,"resizeInterval",500,y),this.fullscreenTarget=s(A,"fullscreenTarget",null,y),this.minWidth=s(A,"min.width",0,y),this.maxWidth=s(A,"max.width",0,y),this.minHeight=s(A,"min.height",0,y),this.maxHeight=s(A,"max.height",0,y),this.snapWidth=s(A,"snap.width",0,y),this.snapHeight=s(A,"snap.height",0,y),this.renderType=s(y,"type",u.AUTO),this.canvas=s(y,"canvas",null),this.context=s(y,"context",null),this.canvasStyle=s(y,"canvasStyle",null),this.customEnvironment=s(y,"customEnvironment",!1),this.sceneConfig=s(y,"scene",null),this.seed=s(y,"seed",[(Date.now()*Math.random()).toString()]),l.RND=new l.RandomDataGenerator(this.seed),this.gameTitle=s(y,"title",""),this.gameURL=s(y,"url","https://phaser.io/"+u.LOG_VERSION),this.gameVersion=s(y,"version",""),this.autoFocus=s(y,"autoFocus",!0),this.stableSort=s(y,"stableSort",-1),this.stableSort===-1&&(this.stableSort=r.browser.es2019?1:0),r.features.stableSort=this.stableSort,this.domCreateContainer=s(y,"dom.createContainer",!1),this.domPointerEvents=s(y,"dom.pointerEvents","none"),this.inputKeyboard=s(y,"input.keyboard",!0),this.inputKeyboardEventTarget=s(y,"input.keyboard.target",window),this.inputKeyboardCapture=s(y,"input.keyboard.capture",[]),this.inputMouse=s(y,"input.mouse",!0),this.inputMouseEventTarget=s(y,"input.mouse.target",null),this.inputMousePreventDefaultDown=s(y,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=s(y,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=s(y,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=s(y,"input.mouse.preventDefaultWheel",!0),this.inputTouch=s(y,"input.touch",r.input.touch),this.inputTouchEventTarget=s(y,"input.touch.target",null),this.inputTouchCapture=s(y,"input.touch.capture",!0),this.inputActivePointers=s(y,"input.activePointers",1),this.inputSmoothFactor=s(y,"input.smoothFactor",0),this.inputWindowEvents=s(y,"input.windowEvents",!0),this.inputGamepad=s(y,"input.gamepad",!1),this.inputGamepadEventTarget=s(y,"input.gamepad.target",window),this.disableContextMenu=s(y,"disableContextMenu",!1),this.audio=s(y,"audio",{}),this.hideBanner=s(y,"banner",null)===!1,this.hidePhaser=s(y,"banner.hidePhaser",!1),this.bannerTextColor=s(y,"banner.text",C),this.bannerBackgroundColor=s(y,"banner.background",S),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=s(y,"fps",null),this.disablePreFX=s(y,"disablePreFX",!1),this.disablePostFX=s(y,"disablePostFX",!1);var M=s(y,"render",null);this.pipeline=s(M,"pipeline",null,y),this.autoMobilePipeline=s(M,"autoMobilePipeline",!0,y),this.defaultPipeline=s(M,"defaultPipeline",f.MULTI_PIPELINE,y),this.antialias=s(M,"antialias",!0,y),this.antialiasGL=s(M,"antialiasGL",!0,y),this.mipmapFilter=s(M,"mipmapFilter","",y),this.desynchronized=s(M,"desynchronized",!1,y),this.roundPixels=s(M,"roundPixels",!1,y),this.pixelArt=s(M,"pixelArt",this.zoom!==1,y),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=s(M,"transparent",!1,y),this.clearBeforeRender=s(M,"clearBeforeRender",!0,y),this.preserveDrawingBuffer=s(M,"preserveDrawingBuffer",!1,y),this.premultipliedAlpha=s(M,"premultipliedAlpha",!0,y),this.failIfMajorPerformanceCaveat=s(M,"failIfMajorPerformanceCaveat",!1,y),this.powerPreference=s(M,"powerPreference","default",y),this.batchSize=s(M,"batchSize",4096,y),this.maxTextures=s(M,"maxTextures",-1,y),this.maxLights=s(M,"maxLights",10,y);var L=s(y,"backgroundColor",0);this.backgroundColor=m(L),this.transparent&&(this.backgroundColor=m(0),this.backgroundColor.alpha=0),this.preBoot=s(y,"callbacks.preBoot",d),this.postBoot=s(y,"callbacks.postBoot",d),this.physics=s(y,"physics",{}),this.defaultPhysicsSystem=s(this.physics,"default",!1),this.loaderBaseURL=s(y,"loader.baseURL",""),this.loaderPath=s(y,"loader.path",""),this.loaderMaxParallelDownloads=s(y,"loader.maxParallelDownloads",r.os.android?6:32),this.loaderCrossOrigin=s(y,"loader.crossOrigin",void 0),this.loaderResponseType=s(y,"loader.responseType",""),this.loaderAsync=s(y,"loader.async",!0),this.loaderUser=s(y,"loader.user",""),this.loaderPassword=s(y,"loader.password",""),this.loaderTimeout=s(y,"loader.timeout",0),this.loaderMaxRetries=s(y,"loader.maxRetries",2),this.loaderWithCredentials=s(y,"loader.withCredentials",!1),this.loaderImageLoadType=s(y,"loader.imageLoadType","XHR"),this.loaderLocalScheme=s(y,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=s(y,"fx.glow.quality",.1),this.glowFXDistance=s(y,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=s(y,"plugins",null),O=n.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:o(P)&&(this.installGlobalPlugins=a(P,"global",[]),this.installScenePlugins=a(P,"scene",[]),Array.isArray(P.default)?O=P.default:Array.isArray(P.defaultMerge)&&(O=O.concat(P.defaultMerge)))),this.defaultPlugins=O;var D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=s(y,"images.default",D+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=s(y,"images.missing",D+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=s(y,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=u.WEBGL:window.FORCE_CANVAS&&(this.renderType=u.CANVAS))}});h.exports=g},86054:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(20623),u=e(27919),n=e(8054),r=e(89357),a=function(s){var o=s.config;if((o.customEnvironment||o.canvas)&&o.renderType===n.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!o.customEnvironment&&!o.canvas&&o.renderType!==n.HEADLESS)if(o.renderType===n.AUTO&&(o.renderType=r.webGL?n.WEBGL:n.CANVAS),o.renderType===n.WEBGL){if(!r.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(o.renderType===n.CANVAS){if(!r.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+o.renderType);o.antialias||u.disableSmoothing();var d=s.scale.baseSize,l=d.width,f=d.height;if(o.canvas?(s.canvas=o.canvas,s.canvas.width=l,s.canvas.height=f):s.canvas=u.create(s,l,f,o.renderType),o.canvasStyle&&(s.canvas.style=o.canvasStyle),o.antialias||i.setCrisp(s.canvas),o.renderType!==n.HEADLESS){var m,g;m=e(68627),g=e(74797),o.renderType===n.WEBGL?s.renderer=new g(s):(s.renderer=new m(s),s.context=s.renderer.gameContext)}};h.exports=a},96391:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(8054),u=function(n){var r=n.config;if(!r.hideBanner){var a="WebGL";r.renderType===i.CANVAS?a="Canvas":r.renderType===i.HEADLESS&&(a="Headless");var s=r.audio,o=n.device.audio,d;if(o.webAudio&&!s.disableWebAudio?d="Web Audio":s.noAudio||!o.webAudio&&!o.audioData?d="No Audio":d="HTML5 Audio",n.device.browser.ie)window.console&&console.log("Phaser v"+i.VERSION+" / https://phaser.io");else{var l="",f=[l];if(Array.isArray(r.bannerBackgroundColor)){var m;r.bannerBackgroundColor.forEach(function(p){l=l.concat("%c "),f.push("background: "+p),m=p}),f[f.length-1]="color: "+r.bannerTextColor+"; background: "+m}else l=l.concat("%c "),f.push("color: "+r.bannerTextColor+"; background: "+r.bannerBackgroundColor);f.push("background: transparent"),r.gameTitle&&(l=l.concat(r.gameTitle),r.gameVersion&&(l=l.concat(" v"+r.gameVersion)),r.hidePhaser||(l=l.concat(" / ")));var g="";r.hidePhaser||(l=l.concat("Phaser v"+i.VERSION+g+" ("+a+" | "+d+")")),l=l.concat(" %c "+r.gameURL),f[0]=l,console.log.apply(console,f)}}};h.exports=u},50127:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(40366),u=e(60848),n=e(24047),r=e(27919),a=e(83419),s=e(69547),o=e(83719),d=e(86054),l=e(45893),f=e(96391),m=e(82264),g=e(57264),p=e(50792),y=e(8443),S=e(7003),C=e(37277),A=e(77332),M=e(76531),L=e(60903),P=e(69442),O=e(17130),D=e(65898),I=e(51085),F=e(14747),H=new a({initialize:function(W){this.config=new s(W),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new p,this.anims=new u(this),this.textures=new O(this),this.cache=new n(this),this.registry=new l(this,new p),this.input=new S(this,this.config),this.scene=new L(this,this.config.sceneConfig),this.device=m,this.scale=new M(this,this.config),this.sound=null,this.sound=F.create(this),this.loop=new D(this,this.config.fps),this.plugins=new A(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,g(this.boot.bind(this))},boot:function(){if(!C.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),d(this),o(this),f(this),i(this.canvas,this.config.parent),this.textures.once(P.READY,this.texturesReady,this),this.events.emit(y.BOOT)},texturesReady:function(){this.events.emit(y.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),I(this);var k=this.events;k.on(y.HIDDEN,this.onHidden,this),k.on(y.VISIBLE,this.onVisible,this),k.on(y.BLUR,this.onBlur,this),k.on(y.FOCUS,this.onFocus,this)},step:function(k,W){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var $=this.events;$.emit(y.PRE_STEP,k,W),$.emit(y.STEP,k,W),this.scene.update(k,W),$.emit(y.POST_STEP,k,W);var K=this.renderer;K.preRender(),$.emit(y.PRE_RENDER,K,k,W),this.scene.render(K),K.postRender(),$.emit(y.POST_RENDER,K,k,W)}},headlessStep:function(k,W){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var $=this.events;$.emit(y.PRE_STEP,k,W),$.emit(y.STEP,k,W),this.scene.update(k,W),$.emit(y.POST_STEP,k,W),this.scene.isProcessing=!1,$.emit(y.PRE_RENDER,null,k,W),$.emit(y.POST_RENDER,null,k,W)}},onHidden:function(){this.loop.pause(),this.events.emit(y.PAUSE)},pause:function(){var k=this.isPaused;this.isPaused=!0,k||this.events.emit(y.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(y.RESUME,this.loop.pauseDuration)},resume:function(){var k=this.isPaused;this.isPaused=!1,k&&this.events.emit(y.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(k,W){W===void 0&&(W=!1),this.pendingDestroy=!0,this.removeCanvas=k,this.noReturn=W},runDestroy:function(){this.scene.destroy(),this.events.emit(y.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(r.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});h.exports=H},65898:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(35154),n=e(29747),r=e(43092),a=new i({initialize:function(o,d){this.game=o,this.raf=new r,this.started=!1,this.running=!1,this.minFps=u(d,"min",5),this.targetFps=u(d,"target",60),this.fpsLimit=u(d,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=n,this.forceSetTimeOut=u(d,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=u(d,"deltaHistory",10),this.panicMax=u(d,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=u(d,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var s=window.performance.now();this.time=s,this.lastTime=s,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=Math.min(this._target,this.deltaHistory[o]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(s){if(this.started)return this;this.started=!0,this.running=!0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=s;var d=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(d,this.forceSetTimeOut,this._target)},smoothDelta:function(s){var o=this.deltaIndex,d=this.deltaHistory,l=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,s=Math.min(s,this._target)),s>this._min&&(s=d[o],s=Math.min(s,this._min)),d[o]=s,this.deltaIndex++,this.deltaIndex>=l&&(this.deltaIndex=0);for(var f=0,m=0;m<l;m++)f+=d[m];return f/=l,f},updateFPS:function(s){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0},stepLimitFPS:function(s){this.now=s;var o=Math.max(0,s-this.lastTime);this.rawDelta=o,this.time+=this.rawDelta,this.smoothStep&&(o=this.smoothDelta(o)),this.delta+=o,s>=this.nextFpsUpdate&&this.updateFPS(s),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(s,this.delta),this.delta=0),this.lastTime=s,this.frame++},step:function(s){this.now=s;var o=Math.max(0,s-this.lastTime);this.rawDelta=o,this.time+=this.rawDelta,this.smoothStep&&(o=this.smoothDelta(o)),this.delta=o,s>=this.nextFpsUpdate&&this.updateFPS(s),this.framesThisSecond++,this.callback(s,o),this.lastTime=s,this.frame++},tick:function(){var s=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(s):this.step(s)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(s){s===void 0&&(s=!1);var o=window.performance.now();if(!this.running){s&&(this.startTime+=-this.lastTime+(this.lastTime+o));var d=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(d,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=o+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});h.exports=a},51085:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(8443),u=function(n){var r,a=n.events;if(document.hidden!==void 0)r="visibilitychange";else{var s=["webkit","moz","ms"];s.forEach(function(d){document[d+"Hidden"]!==void 0&&(document.hidden=function(){return document[d+"Hidden"]},r=d+"visibilitychange")})}var o=function(d){document.hidden||d.type==="pause"?a.emit(i.HIDDEN):a.emit(i.VISIBLE)};r&&document.addEventListener(r,o,!1),window.onblur=function(){a.emit(i.BLUR)},window.onfocus=function(){a.emit(i.FOCUS)},window.focus&&n.config.autoFocus&&window.focus()};h.exports=u},97217:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="blur"},47548:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="boot"},19814:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="contextlost"},68446:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},41700:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="focus"},25432:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="hidden"},65942:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},59211:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postrender"},47789:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="poststep"},39066:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prerender"},460:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prestep"},16175:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="ready"},42331:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},11966:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="step"},32969:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="systemready"},94830:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="visible"},8443:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BLUR:e(97217),BOOT:e(47548),CONTEXT_LOST:e(19814),DESTROY:e(68446),FOCUS:e(41700),HIDDEN:e(25432),PAUSE:e(65942),POST_RENDER:e(59211),POST_STEP:e(47789),PRE_RENDER:e(39066),PRE_STEP:e(460),READY:e(16175),RESUME:e(42331),STEP:e(11966),SYSTEM_READY:e(32969),VISIBLE:e(94830)}},42857:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Config:e(69547),CreateRenderer:e(86054),DebugHeader:e(96391),Events:e(8443),TimeStep:e(65898),VisibilityHandler:e(51085)}},99584:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(5290),u=e(27919),n=e(35154),r=function(a){var s=n(a,"data",[]),o=n(a,"canvas",null),d=n(a,"palette",i),l=n(a,"pixelWidth",1),f=n(a,"pixelHeight",l),m=n(a,"resizeCanvas",!0),g=n(a,"clearCanvas",!0),p=n(a,"preRender",null),y=n(a,"postRender",null),S=Math.floor(Math.abs(s[0].length*l)),C=Math.floor(Math.abs(s.length*f));o||(o=u.create2D(this,S,C),m=!1,g=!1),m&&(o.width=S,o.height=C);var A=o.getContext("2d",{willReadFrequently:!0});g&&A.clearRect(0,0,S,C),p&&p(o,A);for(var M=0;M<s.length;M++)for(var L=s[M],P=0;P<L.length;P++){var O=L[P];O!=="."&&O!==" "&&(A.fillStyle=d[O],A.fillRect(P*l,M*f,l,f))}return y&&y(o,A),o};h.exports=r},15822:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={GenerateTexture:e(99584),Palettes:e(57763)}},5290:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ARNE16:e(5290),C64:e(23816),CGA:e(9866),JMP:e(77552),MSX:e(92259)}},46728:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(36316),n=e(80021),r=e(26099),a=new i({Extends:n,initialize:function(o,d,l,f){n.call(this,"CubicBezierCurve"),Array.isArray(o)&&(f=new r(o[6],o[7]),l=new r(o[4],o[5]),d=new r(o[2],o[3]),o=new r(o[0],o[1])),this.p0=o,this.p1=d,this.p2=l,this.p3=f},getStartPoint:function(s){return s===void 0&&(s=new r),s.copy(this.p0)},getResolution:function(s){return s},getPoint:function(s,o){o===void 0&&(o=new r);var d=this.p0,l=this.p1,f=this.p2,m=this.p3;return o.set(u(s,d.x,l.x,f.x,m.x),u(s,d.y,l.y,f.y,m.y))},draw:function(s,o){o===void 0&&(o=32);var d=this.getPoints(o);s.beginPath(),s.moveTo(this.p0.x,this.p0.y);for(var l=1;l<d.length;l++)s.lineTo(d[l].x,d[l].y);return s.strokePath(),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});a.fromJSON=function(s){var o=s.points,d=new r(o[0],o[1]),l=new r(o[2],o[3]),f=new r(o[4],o[5]),m=new r(o[6],o[7]);return new a(d,l,f,m)},h.exports=a},80021:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(19217),n=e(87841),r=e(26099),a=new i({initialize:function(o){this.type=o,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new r,this._tmpVec2B=new r},draw:function(s,o){return o===void 0&&(o=32),s.strokePoints(this.getPoints(o))},getBounds:function(s,o){s||(s=new n),o===void 0&&(o=16);var d=this.getLength();o>d&&(o=d/2);var l=Math.max(1,Math.round(d/o));return u(this.getSpacedPoints(l),s)},getDistancePoints:function(s){var o=this.getLength(),d=Math.max(1,o/s);return this.getSpacedPoints(d)},getEndPoint:function(s){return s===void 0&&(s=new r),this.getPointAt(1,s)},getLength:function(){var s=this.getLengths();return s[s.length-1]},getLengths:function(s){if(s===void 0&&(s=this.arcLengthDivisions),this.cacheArcLengths.length===s+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var o=[],d,l=this.getPoint(0,this._tmpVec2A),f=0;o.push(0);for(var m=1;m<=s;m++)d=this.getPoint(m/s,this._tmpVec2B),f+=d.distance(l),o.push(f),l.copy(d);return this.cacheArcLengths=o,o},getPointAt:function(s,o){var d=this.getUtoTmapping(s);return this.getPoint(d,o)},getPoints:function(s,o,d){d===void 0&&(d=[]),s||(o?s=this.getLength()/o:s=this.defaultDivisions);for(var l=0;l<=s;l++)d.push(this.getPoint(l/s));return d},getRandomPoint:function(s){return s===void 0&&(s=new r),this.getPoint(Math.random(),s)},getSpacedPoints:function(s,o,d){d===void 0&&(d=[]),s||(o?s=this.getLength()/o:s=this.defaultDivisions);for(var l=0;l<=s;l++){var f=this.getUtoTmapping(l/s,null,s);d.push(this.getPoint(f))}return d},getStartPoint:function(s){return s===void 0&&(s=new r),this.getPointAt(0,s)},getTangent:function(s,o){o===void 0&&(o=new r);var d=1e-4,l=s-d,f=s+d;return l<0&&(l=0),f>1&&(f=1),this.getPoint(l,this._tmpVec2A),this.getPoint(f,o),o.subtract(this._tmpVec2A).normalize()},getTangentAt:function(s,o){var d=this.getUtoTmapping(s);return this.getTangent(d,o)},getTFromDistance:function(s,o){return s<=0?0:this.getUtoTmapping(0,s,o)},getUtoTmapping:function(s,o,d){var l=this.getLengths(d),f=0,m=l.length,g;o?g=Math.min(o,l[m-1]):g=s*l[m-1];for(var p=0,y=m-1,S;p<=y;)if(f=Math.floor(p+(y-p)/2),S=l[f]-g,S<0)p=f+1;else if(S>0)y=f-1;else{y=f;break}if(f=y,l[f]===g)return f/(m-1);var C=l[f],A=l[f+1],M=A-C,L=(g-C)/M;return(f+L)/(m-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});h.exports=a},73825:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(80021),n=e(39506),r=e(35154),a=e(43396),s=e(26099),o=new i({Extends:u,initialize:function(l,f,m,g,p,y,S,C){if(typeof l=="object"){var A=l;l=r(A,"x",0),f=r(A,"y",0),m=r(A,"xRadius",0),g=r(A,"yRadius",m),p=r(A,"startAngle",0),y=r(A,"endAngle",360),S=r(A,"clockwise",!1),C=r(A,"rotation",0)}else g===void 0&&(g=m),p===void 0&&(p=0),y===void 0&&(y=360),S===void 0&&(S=!1),C===void 0&&(C=0);u.call(this,"EllipseCurve"),this.p0=new s(l,f),this._xRadius=m,this._yRadius=g,this._startAngle=n(p),this._endAngle=n(y),this._clockwise=S,this._rotation=n(C)},getStartPoint:function(d){return d===void 0&&(d=new s),this.getPoint(0,d)},getResolution:function(d){return d*2},getPoint:function(d,l){l===void 0&&(l=new s);for(var f=Math.PI*2,m=this._endAngle-this._startAngle,g=Math.abs(m)<Number.EPSILON;m<0;)m+=f;for(;m>f;)m-=f;m<Number.EPSILON&&(g?m=0:m=f),this._clockwise&&!g&&(m===f?m=-f:m=m-f);var p=this._startAngle+d*m,y=this.p0.x+this._xRadius*Math.cos(p),S=this.p0.y+this._yRadius*Math.sin(p);if(this._rotation!==0){var C=Math.cos(this._rotation),A=Math.sin(this._rotation),M=y-this.p0.x,L=S-this.p0.y;y=M*C-L*A+this.p0.x,S=M*A+L*C+this.p0.y}return l.set(y,S)},setXRadius:function(d){return this.xRadius=d,this},setYRadius:function(d){return this.yRadius=d,this},setWidth:function(d){return this.xRadius=d/2,this},setHeight:function(d){return this.yRadius=d/2,this},setStartAngle:function(d){return this.startAngle=d,this},setEndAngle:function(d){return this.endAngle=d,this},setClockwise:function(d){return this.clockwise=d,this},setRotation:function(d){return this.rotation=d,this},x:{get:function(){return this.p0.x},set:function(d){this.p0.x=d}},y:{get:function(){return this.p0.y},set:function(d){this.p0.y=d}},xRadius:{get:function(){return this._xRadius},set:function(d){this._xRadius=d}},yRadius:{get:function(){return this._yRadius},set:function(d){this._yRadius=d}},startAngle:{get:function(){return a(this._startAngle)},set:function(d){this._startAngle=n(d)}},endAngle:{get:function(){return a(this._endAngle)},set:function(d){this._endAngle=n(d)}},clockwise:{get:function(){return this._clockwise},set:function(d){this._clockwise=d}},angle:{get:function(){return a(this._rotation)},set:function(d){this._rotation=n(d)}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=d}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:a(this._startAngle),endAngle:a(this._endAngle),clockwise:this._clockwise,rotation:a(this._rotation)}}});o.fromJSON=function(d){return new o(d)},h.exports=o},33951:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(80021),n=e(19217),r=e(87841),a=e(26099),s=new i({Extends:u,initialize:function(d,l){u.call(this,"LineCurve"),Array.isArray(d)&&(l=new a(d[2],d[3]),d=new a(d[0],d[1])),this.p0=d,this.p1=l,this.arcLengthDivisions=1},getBounds:function(o){return o===void 0&&(o=new r),n([this.p0,this.p1],o)},getStartPoint:function(o){return o===void 0&&(o=new a),o.copy(this.p0)},getResolution:function(o){return o===void 0&&(o=1),o},getPoint:function(o,d){return d===void 0&&(d=new a),o===1?d.copy(this.p1):(d.copy(this.p1).subtract(this.p0).scale(o).add(this.p0),d)},getPointAt:function(o,d){return this.getPoint(o,d)},getTangent:function(o,d){return d===void 0&&(d=new a),d.copy(this.p1).subtract(this.p0).normalize(),d},getUtoTmapping:function(o,d,l){var f;if(d){var m=this.getLengths(l),g=m[m.length-1],p=Math.min(d,g);f=p/g}else f=o;return f},draw:function(o){return o.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),o},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});s.fromJSON=function(o){var d=o.points,l=new a(d[0],d[1]),f=new a(d[2],d[3]);return new s(l,f)},h.exports=s},14744:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(80021),n=e(32112),r=e(26099),a=new i({Extends:u,initialize:function(o,d,l){u.call(this,"QuadraticBezierCurve"),Array.isArray(o)&&(l=new r(o[4],o[5]),d=new r(o[2],o[3]),o=new r(o[0],o[1])),this.p0=o,this.p1=d,this.p2=l},getStartPoint:function(s){return s===void 0&&(s=new r),s.copy(this.p0)},getResolution:function(s){return s},getPoint:function(s,o){o===void 0&&(o=new r);var d=this.p0,l=this.p1,f=this.p2;return o.set(n(s,d.x,l.x,f.x),n(s,d.y,l.y,f.y))},draw:function(s,o){o===void 0&&(o=32);var d=this.getPoints(o);s.beginPath(),s.moveTo(this.p0.x,this.p0.y);for(var l=1;l<d.length;l++)s.lineTo(d[l].x,d[l].y);return s.strokePath(),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});a.fromJSON=function(s){var o=s.points,d=new r(o[0],o[1]),l=new r(o[2],o[3]),f=new r(o[4],o[5]);return new a(d,l,f)},h.exports=a},42534:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87842),u=e(83419),n=e(80021),r=e(26099),a=new u({Extends:n,initialize:function(o){o===void 0&&(o=[]),n.call(this,"SplineCurve"),this.points=[],this.addPoints(o)},addPoints:function(s){for(var o=0;o<s.length;o++){var d=new r;typeof s[o]=="number"?(d.x=s[o],d.y=s[o+1],o++):Array.isArray(s[o])?(d.x=s[o][0],d.y=s[o][1]):(d.x=s[o].x,d.y=s[o].y),this.points.push(d)}return this},addPoint:function(s,o){var d=new r(s,o);return this.points.push(d),d},getStartPoint:function(s){return s===void 0&&(s=new r),s.copy(this.points[0])},getResolution:function(s){return s*this.points.length},getPoint:function(s,o){o===void 0&&(o=new r);var d=this.points,l=(d.length-1)*s,f=Math.floor(l),m=l-f,g=d[f===0?f:f-1],p=d[f],y=d[f>d.length-2?d.length-1:f+1],S=d[f>d.length-3?d.length-1:f+2];return o.set(i(m,g.x,p.x,y.x,S.x),i(m,g.y,p.y,y.y,S.y))},toJSON:function(){for(var s=[],o=0;o<this.points.length;o++)s.push(this.points[o].x),s.push(this.points[o].y);return{type:this.type,points:s}}});a.fromJSON=function(s){return new a(s.points)},h.exports=a},25410:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Path:e(46669),MoveTo:e(68618),CubicBezier:e(46728),Curve:e(80021),Ellipse:e(73825),Line:e(33951),QuadraticBezier:e(14744),Spline:e(42534)}},68618:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(26099),n=new i({initialize:function(a,s){this.active=!1,this.p0=new u(a,s)},getPoint:function(r,a){return a===void 0&&(a=new u),a.copy(this.p0)},getPointAt:function(r,a){return this.getPoint(r,a)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});h.exports=n},46669:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(46728),n=e(73825),r=e(39429),a=e(33951),s=e(68618),o=e(14744),d=e(87841),l=e(42534),f=e(26099),m=e(36383),g=new i({initialize:function(y,S){y===void 0&&(y=0),S===void 0&&(S=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new f,this._tmpVec2A=new f,this._tmpVec2B=new f,typeof y=="object"?this.fromJSON(y):this.startPoint.set(y,S)},add:function(p){return this.curves.push(p),this},circleTo:function(p,y,S){return y===void 0&&(y=!1),this.ellipseTo(p,p,0,360,y,S)},closePath:function(){var p=this.curves[0].getPoint(0),y=this.curves[this.curves.length-1].getPoint(1);return p.equals(y)||this.curves.push(new a(y,p)),this},cubicBezierTo:function(p,y,S,C,A,M){var L=this.getEndPoint(),P,O,D;return p instanceof f?(P=p,O=y,D=S):(P=new f(S,C),O=new f(A,M),D=new f(p,y)),this.add(new u(L,P,O,D))},quadraticBezierTo:function(p,y,S,C){var A=this.getEndPoint(),M,L;return p instanceof f?(M=p,L=y):(M=new f(S,C),L=new f(p,y)),this.add(new o(A,M,L))},draw:function(p,y){for(var S=0;S<this.curves.length;S++){var C=this.curves[S];C.active&&C.draw(p,y)}return p},ellipseTo:function(p,y,S,C,A,M){var L=new n(0,0,p,y,S,C,A,M),P=this.getEndPoint(this._tmpVec2A),O=L.getStartPoint(this._tmpVec2B);return P.subtract(O),L.x=P.x,L.y=P.y,this.add(L)},fromJSON:function(p){this.curves=[],this.cacheLengths=[],this.startPoint.set(p.x,p.y),this.autoClose=p.autoClose;for(var y=0;y<p.curves.length;y++){var S=p.curves[y];switch(S.type){case"LineCurve":this.add(a.fromJSON(S));break;case"EllipseCurve":this.add(n.fromJSON(S));break;case"SplineCurve":this.add(l.fromJSON(S));break;case"CubicBezierCurve":this.add(u.fromJSON(S));break;case"QuadraticBezierCurve":this.add(o.fromJSON(S));break}}return this},getBounds:function(p,y){p===void 0&&(p=new d),y===void 0&&(y=16),p.x=Number.MAX_VALUE,p.y=Number.MAX_VALUE;for(var S=new d,C=m.MIN_SAFE_INTEGER,A=m.MIN_SAFE_INTEGER,M=0;M<this.curves.length;M++){var L=this.curves[M];L.active&&(L.getBounds(S,y),p.x=Math.min(p.x,S.x),p.y=Math.min(p.y,S.y),C=Math.max(C,S.right),A=Math.max(A,S.bottom))}return p.right=C,p.bottom=A,p},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var p=[],y=0,S=0;S<this.curves.length;S++)y+=this.curves[S].getLength(),p.push(y);return this.cacheLengths=p,p},getCurveAt:function(p){for(var y=p*this.getLength(),S=this.getCurveLengths(),C=0;C<S.length;){if(S[C]>=y)return this.curves[C];C++}return null},getEndPoint:function(p){return p===void 0&&(p=new f),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,p):p.copy(this.startPoint),p},getLength:function(){var p=this.getCurveLengths();return p[p.length-1]},getPoint:function(p,y){y===void 0&&(y=new f);for(var S=p*this.getLength(),C=this.getCurveLengths(),A=0;A<C.length;){if(C[A]>=S){var M=C[A]-S,L=this.curves[A],P=L.getLength(),O=P===0?0:1-M/P;return L.getPointAt(O,y)}A++}return null},getPoints:function(p,y){!p&&!y&&(p=this.defaultDivisions);for(var S=[],C,A=0;A<this.curves.length;A++){var M=this.curves[A];if(M.active)for(var L=M.getResolution(p),P=M.getPoints(L,y),O=0;O<P.length;O++){var D=P[O];C&&C.equals(D)||(S.push(D),C=D)}}return this.autoClose&&S.length>1&&!S[S.length-1].equals(S[0])&&S.push(S[0]),S},getRandomPoint:function(p){return p===void 0&&(p=new f),this.getPoint(Math.random(),p)},getSpacedPoints:function(p){p===void 0&&(p=40);for(var y=[],S=0;S<=p;S++)y.push(this.getPoint(S/p));return this.autoClose&&y.push(y[0]),y},getStartPoint:function(p){return p===void 0&&(p=new f),p.copy(this.startPoint)},getTangent:function(p,y){y===void 0&&(y=new f);for(var S=p*this.getLength(),C=this.getCurveLengths(),A=0;A<C.length;){if(C[A]>=S){var M=C[A]-S,L=this.curves[A],P=L.getLength(),O=P===0?0:1-M/P;return L.getTangentAt(O,y)}A++}return null},lineTo:function(p,y){p instanceof f?this._tmpVec2B.copy(p):typeof p=="object"?this._tmpVec2B.setFromObject(p):this._tmpVec2B.set(p,y);var S=this.getEndPoint(this._tmpVec2A);return this.add(new a([S.x,S.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(p){return p.unshift(this.getEndPoint()),this.add(new l(p))},moveTo:function(p,y){return p instanceof f?this.add(new s(p.x,p.y)):this.add(new s(p,y))},toJSON:function(){for(var p=[],y=0;y<this.curves.length;y++)p.push(this.curves[y].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:p}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});r.register("path",function(p,y){return new g(p,y)}),h.exports=g},45893:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(24882),n=new i({initialize:function(a,s){this.parent=a,this.events=s,s||(this.events=a.events?a.events:a),this.list={},this.values={},this._frozen=!1,!a.hasOwnProperty("sys")&&this.events&&this.events.once(u.DESTROY,this.destroy,this)},get:function(r){var a=this.list;if(Array.isArray(r)){for(var s=[],o=0;o<r.length;o++)s.push(a[r[o]]);return s}else return a[r]},getAll:function(){var r={};for(var a in this.list)this.list.hasOwnProperty(a)&&(r[a]=this.list[a]);return r},query:function(r){var a={};for(var s in this.list)this.list.hasOwnProperty(s)&&s.match(r)&&(a[s]=this.list[s]);return a},set:function(r,a){if(this._frozen)return this;if(typeof r=="string")return this.setValue(r,a);for(var s in r)this.setValue(s,r[s]);return this},inc:function(r,a){if(this._frozen)return this;a===void 0&&(a=1);var s=this.get(r);return s===void 0&&(s=0),this.set(r,s+a),this},toggle:function(r){return this._frozen?this:(this.set(r,!this.get(r)),this)},setValue:function(r,a){if(this._frozen)return this;if(this.has(r))this.values[r]=a;else{var s=this,o=this.list,d=this.events,l=this.parent;Object.defineProperty(this.values,r,{enumerable:!0,configurable:!0,get:function(){return o[r]},set:function(f){if(!s._frozen){var m=o[r];o[r]=f,d.emit(u.CHANGE_DATA,l,r,f,m),d.emit(u.CHANGE_DATA_KEY+r,l,f,m)}}}),o[r]=a,d.emit(u.SET_DATA,l,r,a)}return this},each:function(r,a){for(var s=[this.parent,null,void 0],o=1;o<arguments.length;o++)s.push(arguments[o]);for(var d in this.list)s[1]=d,s[2]=this.list[d],r.apply(a,s);return this},merge:function(r,a){a===void 0&&(a=!0);for(var s in r)r.hasOwnProperty(s)&&(a||!a&&!this.has(s))&&this.setValue(s,r[s]);return this},remove:function(r){if(this._frozen)return this;if(Array.isArray(r))for(var a=0;a<r.length;a++)this.removeValue(r[a]);else return this.removeValue(r);return this},removeValue:function(r){if(this.has(r)){var a=this.list[r];delete this.list[r],delete this.values[r],this.events.emit(u.REMOVE_DATA,this.parent,r,a)}return this},pop:function(r){var a=void 0;return!this._frozen&&this.has(r)&&(a=this.list[r],delete this.list[r],delete this.values[r],this.events.emit(u.REMOVE_DATA,this.parent,r,a)),a},has:function(r){return this.list.hasOwnProperty(r)},setFreeze:function(r){return this._frozen=r,this},reset:function(){for(var r in this.list)delete this.list[r],delete this.values[r];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(u.CHANGE_DATA),this.events.off(u.SET_DATA),this.events.off(u.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(r){this._frozen=!!r}},count:{get:function(){var r=0;for(var a in this.list)this.list[a]!==void 0&&r++;return r}}});h.exports=n},63646:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(45893),n=e(37277),r=e(44594),a=new i({Extends:u,initialize:function(o){u.call(this,o,o.sys.events),this.scene=o,this.systems=o.sys,o.sys.events.once(r.BOOT,this.boot,this),o.sys.events.on(r.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){u.prototype.destroy.call(this),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});n.register("DataManagerPlugin",a,"data"),h.exports=a},10700:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="changedata"},93608:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="changedata-"},60883:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},69780:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removedata"},22166:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="setdata"},24882:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CHANGE_DATA:e(10700),CHANGE_DATA_KEY:e(93608),DESTROY:e(60883),REMOVE_DATA:e(69780),SET_DATA:e(22166)}},44965:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={DataManager:e(45893),DataManagerPlugin:e(63646),Events:e(24882)}},7098:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(84148),u={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function n(){if(typeof importScripts=="function")return u;u.audioData=!!window.Audio,u.webAudio=!!(window.AudioContext||window.webkitAudioContext);var r=document.createElement("audio"),a=!!r.canPlayType;try{if(a){var s=function(l,f){var m=r.canPlayType("audio/"+l).replace(/^no$/,"");return f?!!(m||r.canPlayType("audio/"+f).replace(/^no$/,"")):!!m};if(u.ogg=s('ogg; codecs="vorbis"'),u.opus=s('ogg; codecs="opus"',"opus"),u.mp3=s("mpeg"),u.wav=s("wav"),u.m4a=s("x-m4a"),u.aac=s("aac"),u.flac=s("flac","x-flac"),u.webm=s('webm; codecs="vorbis"'),r.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(i.edge)u.dolby=!0;else if(i.safari&&i.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var o=parseInt(RegExp.$1,10),d=parseInt(RegExp.$2,10);(o===10&&d>=11||o>10)&&(u.dolby=!0)}}}}catch{}return u}h.exports=n()},84148:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25892),u={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function n(){var r=navigator.userAgent;return/Edg\/\d+/.test(r)?(u.edge=!0,u.es2019=!0):/OPR/.test(r)?(u.opera=!0,u.es2019=!0):/Chrome\/(\d+)/.test(r)&&!i.windowsPhone?(u.chrome=!0,u.chromeVersion=parseInt(RegExp.$1,10),u.es2019=u.chromeVersion>69):/Firefox\D+(\d+)/.test(r)?(u.firefox=!0,u.firefoxVersion=parseInt(RegExp.$1,10),u.es2019=u.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(r)&&i.iOS?(u.mobileSafari=!0,u.es2019=!0):/MSIE (\d+\.\d+);/.test(r)?(u.ie=!0,u.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(r)&&!i.windowsPhone?(u.safari=!0,u.safariVersion=parseInt(RegExp.$1,10),u.es2019=u.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(r)&&(u.ie=!0,u.trident=!0,u.tridentVersion=parseInt(RegExp.$1,10),u.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(r)&&(u.silk=!0),u}h.exports=n()},89289:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(27919),u={supportInverseAlpha:!1,supportNewBlendModes:!1};function n(){var s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",o="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",d=new Image;return d.onload=function(){var l=new Image;l.onload=function(){var f=i.create2D(l,6),m=f.getContext("2d",{willReadFrequently:!0});if(m.globalCompositeOperation="multiply",m.drawImage(d,0,0),m.drawImage(l,2,0),!m.getImageData(2,0,1,1))return!1;var g=m.getImageData(2,0,1,1).data;i.remove(l),u.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},l.src=s+"/wCKxvRF"+o},d.src=s+"AP804Oa6"+o,!1}function r(){var s=i.create2D(this,2),o=s.getContext("2d",{willReadFrequently:!0});o.fillStyle="rgba(10, 20, 30, 0.5)",o.fillRect(0,0,1,1);var d=o.getImageData(0,0,1,1);if(d===null)return!1;o.putImageData(d,1,0);var l=o.getImageData(1,0,1,1),f=l.data[0]===d.data[0]&&l.data[1]===d.data[1]&&l.data[2]===d.data[2]&&l.data[3]===d.data[3];return i.remove(this),f}function a(){return typeof importScripts!="function"&&document!==void 0&&(u.supportNewBlendModes=n(),u.supportInverseAlpha=r()),u}h.exports=a()},89357:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25892),u=e(84148),n=e(27919),r={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function a(){var o=new ArrayBuffer(4),d=new Uint8Array(o),l=new Uint32Array(o);return d[0]=161,d[1]=178,d[2]=195,d[3]=212,l[0]===3569595041?!0:l[0]===2712847316?!1:null}function s(){if(typeof importScripts=="function")return r;r.canvas=!!window.CanvasRenderingContext2D;try{r.localStorage=!!localStorage.getItem}catch{r.localStorage=!1}r.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,r.fileSystem=!!window.requestFileSystem;var o=!1,d=function(){if(window.WebGLRenderingContext)try{var l=n.createWebGL(this),f=l.getContext("webgl")||l.getContext("experimental-webgl"),m=n.create2D(this),g=m.getContext("2d",{willReadFrequently:!0}),p=g.createImageData(1,1);return o=p.data instanceof Uint8ClampedArray,n.remove(l),n.remove(m),!!f}catch{return!1}return!1};return r.webGL=d(),r.worker=!!window.Worker,r.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.getUserMedia=r.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,u.firefox&&u.firefoxVersion<21&&(r.getUserMedia=!1),!i.iOS&&(u.ie||u.firefox||u.chrome)&&(r.canvasBitBltShift=!0),(u.safari||u.mobileSafari)&&(r.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(r.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(r.littleEndian=a()),r.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&r.littleEndian!==null&&o,r}h.exports=s()},91639:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return w;var i,u="Fullscreen",n="FullScreen",r=["request"+u,"request"+n,"webkitRequest"+u,"webkitRequest"+n,"msRequest"+u,"msRequest"+n,"mozRequest"+n,"mozRequest"+u];for(i=0;i<r.length;i++)if(document.documentElement[r[i]]){w.available=!0,w.request=r[i];break}var a=["cancel"+n,"exit"+u,"webkitCancel"+n,"webkitExit"+u,"msCancel"+n,"msExit"+u,"mozCancel"+n,"mozExit"+u];if(w.available){for(i=0;i<a.length;i++)if(document[a[i]]){w.cancel=a[i];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(w.keyboard=!0),Object.defineProperty(w,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),w}h.exports=e()},31784:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(84148),u={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function n(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(u.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(u.mspointer=!0),navigator.getGamepads&&(u.gamepads=!0),"onwheel"in window||i.ie&&"WheelEvent"in window?u.wheelEvent="wheel":"onmousewheel"in window?u.wheelEvent="mousewheel":i.firefox&&"MouseScrollEvent"in window&&(u.wheelEvent="DOMMouseScroll")),u}h.exports=n()},25892:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return w;var i=navigator.userAgent;/Windows/.test(i)?w.windows=!0:/Mac OS/.test(i)&&!/like Mac OS/.test(i)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(w.iOS=!0,w.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),w.iOSVersion=parseInt(RegExp.$1,10)):w.macOS=!0:/Android/.test(i)?w.android=!0:/Linux/.test(i)?w.linux=!0:/iP[ao]d|iPhone/i.test(i)?(w.iOS=!0,navigator.appVersion.match(/OS (\d+)/),w.iOSVersion=parseInt(RegExp.$1,10),w.iPhone=i.toLowerCase().indexOf("iphone")!==-1,w.iPad=i.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(i)||/\bKF[A-Z][A-Z]+/.test(i)||/Silk.*Mobile Safari/.test(i)?w.kindle=!0:/CrOS/.test(i)&&(w.chromeOS=!0),(/Windows Phone/i.test(i)||/IEMobile/i.test(i))&&(w.android=!1,w.iOS=!1,w.macOS=!1,w.windows=!0,w.windowsPhone=!0);var u=/Silk/.test(i);return(w.windows||w.macOS||w.linux&&!u||w.chromeOS)&&(w.desktop=!0),(w.windowsPhone||/Windows NT/i.test(i)&&/Touch/i.test(i))&&(w.desktop=!1),navigator.standalone&&(w.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(w.cordova=!0),window.ejecta!==void 0&&(w.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(w.node=!0),w.node&&typeof process.versions=="object"&&(w.nodeWebkit=!!process.versions["node-webkit"],w.electron=!!process.versions.electron),/Crosswalk/.test(i)&&(w.crosswalk=!0),w.pixelRatio=window.devicePixelRatio||1,w}h.exports=e()},43267:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(95540),u={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function n(){if(typeof importScripts=="function")return u;var r=document.createElement("video"),a=!!r.canPlayType,s=/^no$/;try{a&&(r.canPlayType('video/ogg; codecs="theora"').replace(s,"")&&(u.ogg=!0),r.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(s,"")&&(u.h264=!0,u.mp4=!0),r.canPlayType("video/x-m4v").replace(s,"")&&(u.m4v=!0),r.canPlayType('video/webm; codecs="vp8, vorbis"').replace(s,"")&&(u.webm=!0),r.canPlayType('video/webm; codecs="vp9"').replace(s,"")&&(u.vp9=!0),r.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(s,"")&&(u.hls=!0))}catch{}return r.parentNode&&r.parentNode.removeChild(r),u.getVideoURL=function(o){Array.isArray(o)||(o=[o]);for(var d=0;d<o.length;d++){var l=i(o[d],"url",o[d]);if(l.indexOf("blob:")===0)return{url:l,type:""};var f;if(l.indexOf("data:")===0?f=l.split(",")[0].match(/\/(.*?);/):f=l.match(/\.([a-zA-Z0-9]+)($|\?)/),f=i(o[d],"type",f?f[1]:"").toLowerCase(),u[f])return{url:l,type:f}}return null},u}h.exports=n()},82264:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={os:e(25892),browser:e(84148),features:e(89357),input:e(31784),audio:e(7098),video:e(43267),fullscreen:e(91639),canvasFeatures:e(89289)}},89422:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new Float32Array(20),n=new i({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(r){return this._matrix.set(r),this._dirty=!0,this},reset:function(){var r=this._matrix;return r.fill(0),r[0]=1,r[6]=1,r[12]=1,r[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var r=this._data;return this._dirty&&(r.set(this._matrix),r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,this._dirty=!1),r},brightness:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var s=r;return this.multiply([s,0,0,0,0,0,s,0,0,0,0,0,s,0,0,0,0,0,1,0],a)},saturate:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var s=r*2/3+1,o=(s-1)*-.5;return this.multiply([s,o,o,0,0,o,s,o,0,0,o,o,s,0,0,0,0,0,1,0],a)},desaturate:function(r){return r===void 0&&(r=!1),this.saturate(-1,r)},hue:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1),r=r/180*Math.PI;var s=Math.cos(r),o=Math.sin(r),d=.213,l=.715,f=.072;return this.multiply([d+s*(1-d)+o*-d,l+s*-l+o*-l,f+s*-f+o*(1-f),0,0,d+s*-d+o*.143,l+s*(1-l)+o*.14,f+s*-f+o*-.283,0,0,d+s*-d+o*-.787,l+s*-l+o*l,f+s*(1-f)+o*f,0,0,0,0,0,1,0],a)},grayscale:function(r,a){return r===void 0&&(r=1),a===void 0&&(a=!1),this.saturate(-r,a)},blackWhite:function(r){return r===void 0&&(r=!1),this.multiply(n.BLACK_WHITE,r)},contrast:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var s=r+1,o=-.5*(s-1);return this.multiply([s,0,0,0,o,0,s,0,0,o,0,0,s,0,o,0,0,0,1,0],a)},negative:function(r){return r===void 0&&(r=!1),this.multiply(n.NEGATIVE,r)},desaturateLuminance:function(r){return r===void 0&&(r=!1),this.multiply(n.DESATURATE_LUMINANCE,r)},sepia:function(r){return r===void 0&&(r=!1),this.multiply(n.SEPIA,r)},night:function(r,a){return r===void 0&&(r=.1),a===void 0&&(a=!1),this.multiply([r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0],a)},lsd:function(r){return r===void 0&&(r=!1),this.multiply(n.LSD,r)},brown:function(r){return r===void 0&&(r=!1),this.multiply(n.BROWN,r)},vintagePinhole:function(r){return r===void 0&&(r=!1),this.multiply(n.VINTAGE,r)},kodachrome:function(r){return r===void 0&&(r=!1),this.multiply(n.KODACHROME,r)},technicolor:function(r){return r===void 0&&(r=!1),this.multiply(n.TECHNICOLOR,r)},polaroid:function(r){return r===void 0&&(r=!1),this.multiply(n.POLAROID,r)},shiftToBGR:function(r){return r===void 0&&(r=!1),this.multiply(n.SHIFT_BGR,r)},multiply:function(r,a){a===void 0&&(a=!1),a||this.reset();var s=this._matrix,o=u;return o.set(s),s.set([o[0]*r[0]+o[1]*r[5]+o[2]*r[10]+o[3]*r[15],o[0]*r[1]+o[1]*r[6]+o[2]*r[11]+o[3]*r[16],o[0]*r[2]+o[1]*r[7]+o[2]*r[12]+o[3]*r[17],o[0]*r[3]+o[1]*r[8]+o[2]*r[13]+o[3]*r[18],o[0]*r[4]+o[1]*r[9]+o[2]*r[14]+o[3]*r[19]+o[4],o[5]*r[0]+o[6]*r[5]+o[7]*r[10]+o[8]*r[15],o[5]*r[1]+o[6]*r[6]+o[7]*r[11]+o[8]*r[16],o[5]*r[2]+o[6]*r[7]+o[7]*r[12]+o[8]*r[17],o[5]*r[3]+o[6]*r[8]+o[7]*r[13]+o[8]*r[18],o[5]*r[4]+o[6]*r[9]+o[7]*r[14]+o[8]*r[19]+o[9],o[10]*r[0]+o[11]*r[5]+o[12]*r[10]+o[13]*r[15],o[10]*r[1]+o[11]*r[6]+o[12]*r[11]+o[13]*r[16],o[10]*r[2]+o[11]*r[7]+o[12]*r[12]+o[13]*r[17],o[10]*r[3]+o[11]*r[8]+o[12]*r[13]+o[13]*r[18],o[10]*r[4]+o[11]*r[9]+o[12]*r[14]+o[13]*r[19]+o[14],o[15]*r[0]+o[16]*r[5]+o[17]*r[10]+o[18]*r[15],o[15]*r[1]+o[16]*r[6]+o[17]*r[11]+o[18]*r[16],o[15]*r[2]+o[16]*r[7]+o[17]*r[12]+o[18]*r[17],o[15]*r[3]+o[16]*r[8]+o[17]*r[13]+o[18]*r[18],o[15]*r[4]+o[16]*r[9]+o[17]*r[14]+o[18]*r[19]+o[19]]),this._dirty=!0,this}});n.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],n.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],n.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],n.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],n.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],n.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],n.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],n.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],n.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],n.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],n.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],h.exports=n},51767:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(29747),n=new i({initialize:function(a,s,o){this._rgb=[0,0,0],this.onChangeCallback=u,this.dirty=!1,this.set(a,s,o)},set:function(r,a,s){return r===void 0&&(r=0),a===void 0&&(a=0),s===void 0&&(s=0),this._rgb=[r,a,s],this.onChange(),this},equals:function(r,a,s){var o=this._rgb;return o[0]===r&&o[1]===a&&o[2]===s},onChange:function(){this.dirty=!0;var r=this._rgb;this.onChangeCallback.call(this,r[0],r[1],r[2])},r:{get:function(){return this._rgb[0]},set:function(r){this._rgb[0]=r,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(r){this._rgb[1]=r,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(r){this._rgb[2]=r,this.onChange()}},destroy:function(){this.onChangeCallback=null}});h.exports=n},60461:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};h.exports=w},54312:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62235),u=e(35893),n=e(86327),r=e(88417),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),r(s,u(o)+d),n(s,i(o)+l),s};h.exports=a},46768:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62235),u=e(26541),n=e(86327),r=e(385),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),r(s,u(o)-d),n(s,i(o)+l),s};h.exports=a},35827:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62235),u=e(54380),n=e(86327),r=e(40136),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),r(s,u(o)+d),n(s,i(o)+l),s};h.exports=a},46871:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66786),u=e(35893),n=e(7702),r=function(a,s,o,d){return o===void 0&&(o=0),d===void 0&&(d=0),i(a,u(s)+o,n(s)+d),a};h.exports=r},5198:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7702),u=e(26541),n=e(20786),r=e(385),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),r(s,u(o)-d),n(s,i(o)+l),s};h.exports=a},11879:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(60461),u=[];u[i.BOTTOM_CENTER]=e(54312),u[i.BOTTOM_LEFT]=e(46768),u[i.BOTTOM_RIGHT]=e(35827),u[i.CENTER]=e(46871),u[i.LEFT_CENTER]=e(5198),u[i.RIGHT_CENTER]=e(80503),u[i.TOP_CENTER]=e(89698),u[i.TOP_LEFT]=e(922),u[i.TOP_RIGHT]=e(21373),u[i.LEFT_BOTTOM]=u[i.BOTTOM_LEFT],u[i.LEFT_TOP]=u[i.TOP_LEFT],u[i.RIGHT_BOTTOM]=u[i.BOTTOM_RIGHT],u[i.RIGHT_TOP]=u[i.TOP_RIGHT];var n=function(r,a,s,o,d){return u[s](r,a,o,d)};h.exports=n},80503:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7702),u=e(54380),n=e(20786),r=e(40136),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),r(s,u(o)+d),n(s,i(o)+l),s};h.exports=a},89698:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35893),u=e(17717),n=e(88417),r=e(66737),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(s,i(o)+d),r(s,u(o)-l),s};h.exports=a},922:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26541),u=e(17717),n=e(385),r=e(66737),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(s,i(o)-d),r(s,u(o)-l),s};h.exports=a},21373:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(54380),u=e(17717),n=e(40136),r=e(66737),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(s,i(o)+d),r(s,u(o)-l),s};h.exports=a},91660:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BottomCenter:e(54312),BottomLeft:e(46768),BottomRight:e(35827),Center:e(46871),LeftCenter:e(5198),QuickSet:e(11879),RightCenter:e(80503),TopCenter:e(89698),TopLeft:e(922),TopRight:e(21373)}},71926:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(60461),u=e(79291),n={In:e(91660),To:e(16694)};n=u(!1,n,i),h.exports=n},21578:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62235),u=e(35893),n=e(88417),r=e(66737),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(s,u(o)+d),r(s,i(o)+l),s};h.exports=a},10210:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62235),u=e(26541),n=e(385),r=e(66737),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(s,u(o)-d),r(s,i(o)+l),s};h.exports=a},82341:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62235),u=e(54380),n=e(40136),r=e(66737),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(s,u(o)+d),r(s,i(o)+l),s};h.exports=a},87958:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62235),u=e(26541),n=e(86327),r=e(40136),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),r(s,u(o)-d),n(s,i(o)+l),s};h.exports=a},40080:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7702),u=e(26541),n=e(20786),r=e(40136),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),r(s,u(o)-d),n(s,i(o)+l),s};h.exports=a},88466:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26541),u=e(17717),n=e(40136),r=e(66737),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(s,i(o)-d),r(s,u(o)-l),s};h.exports=a},38829:(h,w,e)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(60461),u=[];u[i.BOTTOM_CENTER]=e(21578),u[i.BOTTOM_LEFT]=e(10210),u[i.BOTTOM_RIGHT]=e(82341),u[i.LEFT_BOTTOM]=e(87958),u[i.LEFT_CENTER]=e(40080),u[i.LEFT_TOP]=e(88466),u[i.RIGHT_BOTTOM]=e(19211),u[i.RIGHT_CENTER]=e(34609),u[i.RIGHT_TOP]=e(48741),u[i.TOP_CENTER]=e(49440),u[i.TOP_LEFT]=e(81288),u[i.TOP_RIGHT]=e(61323);var n=function(r,a,s,o,d){return u[s](r,a,o,d)};h.exports=n},19211:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62235),u=e(54380),n=e(86327),r=e(385),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),r(s,u(o)+d),n(s,i(o)+l),s};h.exports=a},34609:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7702),u=e(54380),n=e(20786),r=e(385),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),r(s,u(o)+d),n(s,i(o)+l),s};h.exports=a},48741:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(54380),u=e(17717),n=e(385),r=e(66737),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(s,i(o)+d),r(s,u(o)-l),s};h.exports=a},49440:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35893),u=e(17717),n=e(86327),r=e(88417),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),r(s,i(o)+d),n(s,u(o)-l),s};h.exports=a},81288:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26541),u=e(17717),n=e(86327),r=e(385),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),r(s,i(o)-d),n(s,u(o)-l),s};h.exports=a},61323:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(54380),u=e(17717),n=e(86327),r=e(40136),a=function(s,o,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),r(s,i(o)+d),n(s,u(o)-l),s};h.exports=a},16694:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BottomCenter:e(21578),BottomLeft:e(10210),BottomRight:e(82341),LeftBottom:e(87958),LeftCenter:e(40080),LeftTop:e(88466),QuickSet:e(38829),RightBottom:e(19211),RightCenter:e(34609),RightTop:e(48741),TopCenter:e(49440),TopLeft:e(81288),TopRight:e(61323)}},66786:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(88417),u=e(20786),n=function(r,a,s){return i(r,a),u(r,s)};h.exports=n},62235:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.y+e.height-e.height*e.originY};h.exports=w},72873:(h,w,e)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62235),u=e(26541),n=e(54380),r=e(17717),a=e(87841),s=function(o,d){d===void 0&&(d=new a);var l=u(o),f=r(o);return d.x=l,d.y=f,d.width=n(o)-l,d.height=i(o)-f,d};h.exports=s},35893:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.x-e.width*e.originX+e.width*.5};h.exports=w},7702:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.y-e.height*e.originY+e.height*.5};h.exports=w},26541:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.x-e.width*e.originX};h.exports=w},87431:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.width*e.originX};h.exports=w},46928:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.height*e.originY};h.exports=w},54380:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.x+e.width-e.width*e.originX};h.exports=w},17717:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.y-e.height*e.originY};h.exports=w},86327:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.y=i-e.height+e.height*e.originY,e};h.exports=w},88417:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.width*e.originX;return e.x=i+u-e.width*.5,e};h.exports=w},20786:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.height*e.originY;return e.y=i+u-e.height*.5,e};h.exports=w},385:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.x=i+e.width*e.originX,e};h.exports=w},40136:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.x=i-e.width+e.width*e.originX,e};h.exports=w},66737:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.y=i+e.height*e.originY,e};h.exports=w},58724:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CenterOn:e(66786),GetBottom:e(62235),GetBounds:e(72873),GetCenterX:e(35893),GetCenterY:e(7702),GetLeft:e(26541),GetOffsetX:e(87431),GetOffsetY:e(46928),GetRight:e(54380),GetTop:e(17717),SetBottom:e(86327),SetCenterX:e(88417),SetCenterY:e(20786),SetLeft:e(385),SetRight:e(40136),SetTop:e(66737)}},20623:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setCrisp:function(e){var i=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return i.forEach(function(u){e.style["image-rendering"]=u}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};h.exports=w},27919:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(8054),u=e(68703),n=[],r=!1,a=function(){var s=function(S,C,A,M,L){C===void 0&&(C=1),A===void 0&&(A=1),M===void 0&&(M=i.CANVAS),L===void 0&&(L=!1);var P,O=l(M);return O===null?(O={parent:S,canvas:document.createElement("canvas"),type:M},M===i.CANVAS&&n.push(O),P=O.canvas):(O.parent=S,P=O.canvas),L&&(O.parent=P),P.width=C,P.height=A,r&&M===i.CANVAS&&u.disable(P.getContext("2d",{willReadFrequently:!1})),P},o=function(S,C,A){return s(S,C,A,i.CANVAS)},d=function(S,C,A){return s(S,C,A,i.WEBGL)},l=function(S){if(S===void 0&&(S=i.CANVAS),S===i.WEBGL)return null;for(var C=0;C<n.length;C++){var A=n[C];if(!A.parent&&A.type===S)return A}return null},f=function(S){var C=S instanceof HTMLCanvasElement;n.forEach(function(A){(C&&A.canvas===S||!C&&A.parent===S)&&(A.parent=null,A.canvas.width=1,A.canvas.height=1)})},m=function(){var S=0;return n.forEach(function(C){C.parent&&S++}),S},g=function(){return n.length-m()},p=function(){r=!0},y=function(){r=!1};return{create2D:o,create:s,createWebGL:d,disableSmoothing:p,enableSmoothing:y,first:l,free:g,pool:n,remove:f,total:m}};h.exports=a()},68703:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w="",e=function(){var i=function(a){for(var s=["i","webkitI","msI","mozI","oI"],o=0;o<s.length;o++){var d=s[o]+"mageSmoothingEnabled";if(d in a)return d}return null},u=function(a){return w===""&&(w=i(a)),w&&(a[w]=!0),a},n=function(a){return w===""&&(w=i(a)),w&&(a[w]=!1),a},r=function(a){return w!==null?a[w]:null};return{disable:n,enable:u,getPrefix:i,isEnabled:r}};h.exports=e()},65208:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i===void 0&&(i="none"),e.style.msTouchAction=i,e.style["ms-touch-action"]=i,e.style["touch-action"]=i,e};h.exports=w},91610:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i===void 0&&(i="none");var u=["-webkit-","-khtml-","-moz-","-ms-",""];return u.forEach(function(n){e.style[n+"user-select"]=i}),e.style["-webkit-touch-callout"]=i,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};h.exports=w},26253:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CanvasInterpolation:e(20623),CanvasPool:e(27919),Smoothing:e(68703),TouchAction:e(65208),UserSelect:e(91610)}},40987:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(37589),n=e(1e3),r=e(7537),a=e(87837),s=new i({initialize:function(d,l,f,m){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(d,l,f,m)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(o,d,l,f,m){return f===void 0&&(f=255),m===void 0&&(m=!0),this._locked=!0,this.red=o,this.green=d,this.blue=l,this.alpha=f,this._locked=!1,this.update(m)},setGLTo:function(o,d,l,f){return f===void 0&&(f=1),this._locked=!0,this.redGL=o,this.greenGL=d,this.blueGL=l,this.alphaGL=f,this._locked=!1,this.update(!0)},setFromRGB:function(o){return this._locked=!0,this.red=o.r,this.green=o.g,this.blue=o.b,o.hasOwnProperty("a")&&(this.alpha=o.a),this._locked=!1,this.update(!0)},setFromHSV:function(o,d,l){return r(o,d,l,this)},update:function(o){if(o===void 0&&(o=!1),this._locked)return this;var d=this.r,l=this.g,f=this.b,m=this.a;return this._color=u(d,l,f),this._color32=n(d,l,f,m),this._rgba="rgba("+d+","+l+","+f+","+m/255+")",o&&a(d,l,f,this),this},updateHSV:function(){var o=this.r,d=this.g,l=this.b;return a(o,d,l,this),this},clone:function(){return new s(this.r,this.g,this.b,this.a)},gray:function(o){return this.setTo(o,o,o)},random:function(o,d){o===void 0&&(o=0),d===void 0&&(d=255);var l=Math.floor(o+Math.random()*(d-o)),f=Math.floor(o+Math.random()*(d-o)),m=Math.floor(o+Math.random()*(d-o));return this.setTo(l,f,m)},randomGray:function(o,d){o===void 0&&(o=0),d===void 0&&(d=255);var l=Math.floor(o+Math.random()*(d-o));return this.setTo(l,l,l)},saturate:function(o){return this.s+=o/100,this},desaturate:function(o){return this.s-=o/100,this},lighten:function(o){return this.v+=o/100,this},darken:function(o){return this.v-=o/100,this},brighten:function(o){var d=this.r,l=this.g,f=this.b;return d=Math.max(0,Math.min(255,d-Math.round(255*-(o/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(o/100)))),f=Math.max(0,Math.min(255,f-Math.round(255*-(o/100)))),this.setTo(d,l,f)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(o){this.gl[0]=Math.min(Math.abs(o),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(o){this.gl[1]=Math.min(Math.abs(o),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(o){this.gl[2]=Math.min(Math.abs(o),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(o){this.gl[3]=Math.min(Math.abs(o),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(o){o=Math.floor(Math.abs(o)),this.r=Math.min(o,255),this.gl[0]=o/255,this.update(!0)}},green:{get:function(){return this.g},set:function(o){o=Math.floor(Math.abs(o)),this.g=Math.min(o,255),this.gl[1]=o/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(o){o=Math.floor(Math.abs(o)),this.b=Math.min(o,255),this.gl[2]=o/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(o){o=Math.floor(Math.abs(o)),this.a=Math.min(o,255),this.gl[3]=o/255,this.update()}},h:{get:function(){return this._h},set:function(o){this._h=o,r(o,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(o){this._s=o,r(this._h,o,this._v,this)}},v:{get:function(){return this._v},set:function(o){this._v=o,r(this._h,this._s,o,this)}}});h.exports=s},92728:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37589),u=function(n){n===void 0&&(n=1024);var r=[],a=255,s,o=255,d=0,l=0;for(s=0;s<=a;s++)r.push({r:o,g:s,b:l,color:i(o,s,l)});for(d=255,s=a;s>=0;s--)r.push({r:s,g:d,b:l,color:i(s,d,l)});for(o=0,s=0;s<=a;s++,d--)r.push({r:o,g:d,b:s,color:i(o,d,s)});for(d=0,l=255,s=0;s<=a;s++,l--,o++)r.push({r:o,g:d,b:l,color:i(o,d,l)});if(n===1024)return r;var f=[],m=0,g=1024/n;for(s=0;s<n;s++)f.push(r[Math.floor(m)]),m+=g;return f};h.exports=u},91588:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(i.a=e>>>24),i};h.exports=w},62957:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i=e.toString(16);return i.length===1?"0"+i:i};h.exports=w},37589:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return e<<16|i<<8|u};h.exports=w},1e3:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){return n<<24|e<<16|i<<8|u};h.exports=w},62183:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(40987),u=e(89528),n=function(r,a,s){var o=s,d=s,l=s;if(a!==0){var f=s<.5?s*(1+a):s+a-s*a,m=2*s-f;o=u(m,f,r+1/3),d=u(m,f,r),l=u(m,f,r-1/3)}var g=new i;return g.setGLTo(o,d,l,1)};h.exports=n},27939:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7537),u=function(n,r){n===void 0&&(n=1),r===void 0&&(r=1);for(var a=[],s=0;s<=359;s++)a.push(i(s/359,n,r));return a};h.exports=u},7537:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37589);function u(r,a,s,o){var d=(r+a*6)%6,l=Math.min(d,4-d,1);return Math.round(255*(o-o*s*Math.max(0,l)))}var n=function(r,a,s,o){a===void 0&&(a=1),s===void 0&&(s=1);var d=u(5,r,a,s),l=u(3,r,a,s),f=u(1,r,a,s);return o?o.setTo?o.setTo(d,l,f,o.alpha,!0):(o.r=d,o.g=l,o.b=f,o.color=i(d,l,f),o):{r:d,g:l,b:f,color:i(d,l,f)}};h.exports=n},70238:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(40987),u=function(n){var r=new i;n=n.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(l,f,m,g){return f+f+m+m+g+g});var a=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(a){var s=parseInt(a[1],16),o=parseInt(a[2],16),d=parseInt(a[3],16);r.setTo(s,o,d)}return r};h.exports=u},89528:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?e+(i-e)*6*u:u<.5?i:u<.6666666666666666?e+(i-e)*(.6666666666666666-u)*6:e};h.exports=w},30100:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(40987),u=e(90664),n=function(r){var a=u(r);return new i(a.r,a.g,a.b,a.a)};h.exports=n},90664:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};h.exports=w},13699:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(28915),u=function(a,s,o,d,l,f,m,g){m===void 0&&(m=100),g===void 0&&(g=0);var p=g/m;return{r:i(a,d,p),g:i(s,l,p),b:i(o,f,p)}},n=function(a,s,o,d){return o===void 0&&(o=100),d===void 0&&(d=0),u(a.r,a.g,a.b,s.r,s.g,s.b,o,d)},r=function(a,s,o,d,l,f){return l===void 0&&(l=100),f===void 0&&(f=0),u(a.r,a.g,a.b,s,o,d,l,f)};h.exports={RGBWithRGB:u,ColorWithRGB:r,ColorWithColor:n}},68957:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(40987),u=function(n){return new i(n.r,n.g,n.b,n.a)};h.exports=u},87388:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(40987),u=function(n){var r=new i,a=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(n.toLowerCase());if(a){var s=parseInt(a[1],10),o=parseInt(a[2],10),d=parseInt(a[3],10),l=a[4]!==void 0?parseFloat(a[4]):1;r.setTo(s,o,d,l*255)}return r};h.exports=u},87837:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){n===void 0&&(n={h:0,s:0,v:0}),e/=255,i/=255,u/=255;var r=Math.min(e,i,u),a=Math.max(e,i,u),s=a-r,o=0,d=a===0?0:s/a,l=a;return a!==r&&(a===e?o=(i-u)/s+(i<u?6:0):a===i?o=(u-e)/s+2:a===u&&(o=(e-i)/s+4),o/=6),n.hasOwnProperty("_h")?(n._h=o,n._s=d,n._v=l):(n.h=o,n.s=d,n.v=l),n};h.exports=w},75723:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62957),u=function(n,r,a,s,o){return s===void 0&&(s=255),o===void 0&&(o="#"),o==="#"?"#"+((1<<24)+(n<<16)+(r<<8)+a).toString(16).slice(1,7):"0x"+i(s)+i(n)+i(r)+i(a)};h.exports=u},85386:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(30976),u=e(40987),n=function(r,a){return r===void 0&&(r=0),a===void 0&&(a=255),new u(i(r,a),i(r,a),i(r,a))};h.exports=n},80333:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(70238),u=e(30100),n=e(68957),r=e(87388),a=function(s){var o=typeof s;switch(o){case"string":return s.substr(0,3).toLowerCase()==="rgb"?r(s):i(s);case"number":return u(s);case"object":return n(s)}};h.exports=a},3956:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(40987);i.ColorSpectrum=e(92728),i.ColorToRGBA=e(91588),i.ComponentToHex=e(62957),i.GetColor=e(37589),i.GetColor32=e(1e3),i.HexStringToColor=e(70238),i.HSLToColor=e(62183),i.HSVColorWheel=e(27939),i.HSVToRGB=e(7537),i.HueToComponent=e(89528),i.IntegerToColor=e(30100),i.IntegerToRGB=e(90664),i.Interpolate=e(13699),i.ObjectToColor=e(68957),i.RandomRGB=e(85386),i.RGBStringToColor=e(87388),i.RGBToHSV=e(87837),i.RGBToString=e(75723),i.ValueToColor=e(80333),h.exports=i},27460:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Align:e(71926),BaseShader:e(73894),Bounds:e(58724),Canvas:e(26253),Color:e(3956),ColorMatrix:e(89422),Masks:e(69781),RGB:e(51767)}},6858:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(39429),n=new i({initialize:function(a,s,o,d,l,f){s||(s=a.sys.make.image({x:o,y:d,key:l,frame:f,add:!1})),this.bitmapMask=s,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(r){this.bitmapMask=r},preRenderWebGL:function(r,a,s){r.pipelines.BITMAPMASK_PIPELINE.beginMask(this,a,s)},postRenderWebGL:function(r,a,s){r.pipelines.BITMAPMASK_PIPELINE.endMask(this,a,s)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});u.register("bitmapMask",function(r,a,s,o,d){return new n(this.scene,r,a,s,o,d)}),h.exports=n},80661:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a){this.geometryMask=a,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(n){return this.geometryMask=n,this},setInvertAlpha:function(n){return n===void 0&&(n=!0),this.invertAlpha=n,this},preRenderWebGL:function(n,r,a){var s=n.gl;n.flush(),n.maskStack.length===0&&(s.enable(s.STENCIL_TEST),s.clear(s.STENCIL_BUFFER_BIT),n.maskCount=0),n.currentCameraMask.mask!==this&&(n.currentMask.mask=this),n.maskStack.push({mask:this,camera:a}),this.applyStencil(n,a,!0),n.maskCount++},applyStencil:function(n,r,a){var s=n.gl,o=this.geometryMask,d=n.maskCount,l=255;s.colorMask(!1,!1,!1,!1),a?(s.stencilFunc(s.EQUAL,d,l),s.stencilOp(s.KEEP,s.KEEP,s.INCR),d++):(s.stencilFunc(s.EQUAL,d+1,l),s.stencilOp(s.KEEP,s.KEEP,s.DECR)),this.level=d,o.renderWebGL(n,o,r),n.flush(),s.colorMask(!0,!0,!0,!0),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),this.invertAlpha?s.stencilFunc(s.NOTEQUAL,d,l):s.stencilFunc(s.EQUAL,d,l)},postRenderWebGL:function(n){var r=n.gl;n.maskStack.pop(),n.maskCount--,n.flush();var a=n.currentMask;if(n.maskStack.length===0)a.mask=null,r.disable(r.STENCIL_TEST);else{var s=n.maskStack[n.maskStack.length-1];s.mask.applyStencil(n,s.camera,!1),n.currentCameraMask.mask!==s.mask?(a.mask=s.mask,a.camera=s.camera):a.mask=null}},preRenderCanvas:function(n,r,a){var s=this.geometryMask;n.currentContext.save(),s.renderCanvas(n,s,a,null,null,!0),n.currentContext.clip()},postRenderCanvas:function(n){n.currentContext.restore()},destroy:function(){this.geometryMask=null}});h.exports=u},69781:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BitmapMask:e(6858),GeometryMask:e(80661)}},73894:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a,s,o){(!a||a==="")&&(a=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!s||s==="")&&(s=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),o===void 0&&(o=null),this.key=r,this.fragmentSrc=a,this.vertexSrc=s,this.uniforms=o}});h.exports=u},40366:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u;if(i)typeof i=="string"?u=document.getElementById(i):typeof i=="object"&&i.nodeType===1&&(u=i);else if(e.parentElement||i===null)return e;return u||(u=document.body),u.appendChild(e),e};h.exports=w},83719:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(40366),u=function(n){var r=n.config;if(!(!r.parent||!r.domCreateContainer)){var a=document.createElement("div");a.style.cssText=["display: block;","width: "+n.scale.width+"px;","height: "+n.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+r.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),n.domContainer=a,i(a,r.parent)}};h.exports=u},57264:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25892),u=function(n){if(document.readyState==="complete"||document.readyState==="interactive"){n();return}var r=function(){document.removeEventListener("deviceready",r,!0),document.removeEventListener("DOMContentLoaded",r,!0),window.removeEventListener("load",r,!0),n()};document.body?i.cordova?document.addEventListener("deviceready",r,!1):(document.addEventListener("DOMContentLoaded",r,!0),window.addEventListener("load",r,!0)):window.setTimeout(r,20)};h.exports=u},57811:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){if(!e)return window.innerHeight;var i=Math.abs(window.orientation),u={w:0,h:0},n=document.createElement("div");return n.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(n),u.w=i===90?n.offsetHeight:window.innerWidth,u.h=i===90?window.innerWidth:n.offsetHeight,document.documentElement.removeChild(n),n=null,Math.abs(window.orientation)!==90?u.h:u.w};h.exports=w},45818:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(13560),u=function(n,r){var a=window.screen,s=a?a.orientation||a.mozOrientation||a.msOrientation:!1;if(s&&typeof s.type=="string")return s.type;if(typeof s=="string")return s;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?i.ORIENTATION.PORTRAIT:i.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return i.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return i.ORIENTATION.LANDSCAPE}else return r>n?i.ORIENTATION.PORTRAIT:i.ORIENTATION.LANDSCAPE};h.exports=u},74403:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i;return e!==""&&(typeof e=="string"?i=document.getElementById(e):e&&e.nodeType===1&&(i=e)),i||(i=document.body),i};h.exports=w},56836:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i="";try{if(window.DOMParser){var u=new DOMParser;i=u.parseFromString(e,"text/xml")}else i=new ActiveXObject("Microsoft.XMLDOM"),i.loadXML(e)}catch{i=null}return!i||!i.documentElement||i.getElementsByTagName("parsererror").length?null:i};h.exports=w},35846:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){e.parentNode&&e.parentNode.removeChild(e)};h.exports=w},43092:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(29747),n=new i({initialize:function(){this.isRunning=!1,this.callback=u,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var a=this;this.step=function s(o){a.callback(o),a.isRunning&&(a.timeOutID=window.requestAnimationFrame(s))},this.stepTimeout=function s(){a.isRunning&&(a.timeOutID=window.setTimeout(s,a.delay)),a.callback(window.performance.now())}},start:function(r,a,s){this.isRunning||(this.callback=r,this.isSetTimeOut=a,this.delay=s,this.isRunning=!0,this.timeOutID=a?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=u}});h.exports=n},84902:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={AddToDOM:e(40366),DOMContentLoaded:e(57264),GetInnerHeight:e(57811),GetScreenOrientation:e(45818),GetTarget:e(74403),ParseXML:e(56836),RemoveFromDOM:e(35846),RequestAnimationFrame:e(43092)};h.exports=i},47565:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(50792),n=e(37277),r=new i({Extends:u,initialize:function(){u.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});n.register("EventEmitter",r,"events"),h.exports=r},93055:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={EventEmitter:e(47565)}},20122:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o){o===void 0&&(o=1),u.call(this,n.BARREL,s),this.amount=o}});h.exports=r},32251:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o,d,l,f,m,g){d===void 0&&(d=1),l===void 0&&(l=1),f===void 0&&(f=1),m===void 0&&(m=1),g===void 0&&(g=4),u.call(this,n.BLOOM,s),this.steps=g,this.offsetX=d,this.offsetY=l,this.blurStrength=f,this.strength=m,this.glcolor=[1,1,1],o!=null&&(this.color=o)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var s=this.glcolor;s[0]=(a>>16&255)/255,s[1]=(a>>8&255)/255,s[2]=(a&255)/255}}});h.exports=r},9047:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o,d,l,f,m,g){o===void 0&&(o=0),d===void 0&&(d=2),l===void 0&&(l=2),f===void 0&&(f=1),g===void 0&&(g=4),u.call(this,n.BLUR,s),this.quality=o,this.x=d,this.y=l,this.steps=g,this.strength=f,this.glcolor=[1,1,1],m!=null&&(this.color=m)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var s=this.glcolor;s[0]=(a>>16&255)/255,s[1]=(a>>8&255)/255,s[2]=(a&255)/255}}});h.exports=r},27885:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o,d,l,f,m,g,p){o===void 0&&(o=.5),d===void 0&&(d=1),l===void 0&&(l=.2),f===void 0&&(f=!1),m===void 0&&(m=1),g===void 0&&(g=1),p===void 0&&(p=1),u.call(this,n.BOKEH,s),this.radius=o,this.amount=d,this.contrast=l,this.isTiltShift=f,this.strength=p,this.blurX=m,this.blurY=g}});h.exports=r},12578:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o,d,l,f,m){o===void 0&&(o=8),f===void 0&&(f=1),m===void 0&&(m=.005),u.call(this,n.CIRCLE,s),this.scale=f,this.feather=m,this.thickness=o,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],d!=null&&(this.color=d),l!=null&&(this.backgroundColor=l)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var s=this.glcolor;s[0]=(a>>16&255)/255,s[1]=(a>>8&255)/255,s[2]=(a&255)/255}},backgroundColor:{get:function(){var a=this.glcolor2;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var s=this.glcolor2;s[0]=(a>>16&255)/255,s[1]=(a>>8&255)/255,s[2]=(a&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(a){this.glcolor2[3]=a}}});h.exports=r},15802:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(89422),n=e(14811),r=new i({Extends:u,initialize:function(s){u.call(this),this.type=n.COLOR_MATRIX,this.gameObject=s,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});h.exports=r},72898:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a){this.type=r,this.gameObject=a,this.active=!0},setActive:function(n){return this.active=n,this},destroy:function(){this.gameObject=null,this.active=!1}});h.exports=u},44553:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o,d,l){o===void 0&&(o="__WHITE"),d===void 0&&(d=.005),l===void 0&&(l=.005),u.call(this,n.DISPLACEMENT,s),this.x=d,this.y=l,this.glTexture,this.setTexture(o)},setTexture:function(a){var s=this.gameObject.scene.sys.textures.getFrame(a);return s&&(this.glTexture=s.glTexture),this}});h.exports=r},68531:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o,d,l,f){d===void 0&&(d=4),l===void 0&&(l=0),f===void 0&&(f=!1),u.call(this,n.GLOW,s),this.outerStrength=d,this.innerStrength=l,this.knockout=f,this.glcolor=[1,1,1,1],o!==void 0&&(this.color=o)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var s=this.glcolor;s[0]=(a>>16&255)/255,s[1]=(a>>8&255)/255,s[2]=(a&255)/255}}});h.exports=r},37102:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o,d,l,f,m,g,p,y){l===void 0&&(l=.2),f===void 0&&(f=0),m===void 0&&(m=0),g===void 0&&(g=0),p===void 0&&(p=1),y===void 0&&(y=0),u.call(this,n.GRADIENT,s),this.alpha=l,this.size=y,this.fromX=f,this.fromY=m,this.toX=g,this.toY=p,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],o!=null&&(this.color1=o),d!=null&&(this.color2=d)},color1:{get:function(){var a=this.glcolor1;return(a[0]<<16)+(a[1]<<8)+(a[2]|0)},set:function(a){var s=this.glcolor1;s[0]=a>>16&255,s[1]=a>>8&255,s[2]=a&255}},color2:{get:function(){var a=this.glcolor2;return(a[0]<<16)+(a[1]<<8)+(a[2]|0)},set:function(a){var s=this.glcolor2;s[0]=a>>16&255,s[1]=a>>8&255,s[2]=a&255}}});h.exports=r},86886:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o){o===void 0&&(o=1),u.call(this,n.PIXELATE,s),this.amount=o}});h.exports=r},92322:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o,d,l,f,m,g,p){o===void 0&&(o=0),d===void 0&&(d=0),l===void 0&&(l=.1),f===void 0&&(f=1),g===void 0&&(g=6),p===void 0&&(p=1),u.call(this,n.SHADOW,s),this.x=o,this.y=d,this.decay=l,this.power=f,this.glcolor=[0,0,0,1],this.samples=g,this.intensity=p,m!==void 0&&(this.color=m)},color:{get:function(){var a=this.glcolor;return(a[0]*255<<16)+(a[1]*255<<8)+(a[2]*255|0)},set:function(a){var s=this.glcolor;s[0]=(a>>16&255)/255,s[1]=(a>>8&255)/255,s[2]=(a&255)/255}}});h.exports=r},39563:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o,d,l,f){o===void 0&&(o=.5),d===void 0&&(d=.5),l===void 0&&(l=3),f===void 0&&(f=!1),u.call(this,n.SHINE,s),this.speed=o,this.lineWidth=d,this.gradient=l,this.reveal=f}});h.exports=r},56448:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o,d,l,f){o===void 0&&(o=.5),d===void 0&&(d=.5),l===void 0&&(l=.5),f===void 0&&(f=.5),u.call(this,n.VIGNETTE,s),this.x=o,this.y=d,this.radius=l,this.strength=f}});h.exports=r},38433:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72898),n=e(14811),r=new i({Extends:u,initialize:function(s,o,d,l,f){o===void 0&&(o=.1),d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=!1),u.call(this,n.WIPE,s),this.progress=0,this.wipeWidth=o,this.direction=d,this.axis=l,this.reveal=f}});h.exports=r},14811:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};h.exports=w},66064:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(79291),u=e(14811),n={Barrel:e(20122),Controller:e(72898),Bloom:e(32251),Blur:e(9047),Bokeh:e(27885),Circle:e(12578),ColorMatrix:e(15802),Displacement:e(44553),Glow:e(68531),Gradient:e(37102),Pixelate:e(86886),Shadow:e(92322),Shine:e(39563),Vignette:e(56448),Wipe:e(38433)};n=i(!1,n,u),h.exports=n},25305:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(10312),u=e(23568),n=function(r,a,s){a.x=u(s,"x",0),a.y=u(s,"y",0),a.depth=u(s,"depth",0),a.flipX=u(s,"flipX",!1),a.flipY=u(s,"flipY",!1);var o=u(s,"scale",null);typeof o=="number"?a.setScale(o):o!==null&&(a.scaleX=u(o,"x",1),a.scaleY=u(o,"y",1));var d=u(s,"scrollFactor",null);typeof d=="number"?a.setScrollFactor(d):d!==null&&(a.scrollFactorX=u(d,"x",1),a.scrollFactorY=u(d,"y",1)),a.rotation=u(s,"rotation",0);var l=u(s,"angle",null);l!==null&&(a.angle=l),a.alpha=u(s,"alpha",1);var f=u(s,"origin",null);if(typeof f=="number")a.setOrigin(f);else if(f!==null){var m=u(f,"x",.5),g=u(f,"y",.5);a.setOrigin(m,g)}a.blendMode=u(s,"blendMode",i.NORMAL),a.visible=u(s,"visible",!0);var p=u(s,"add",!0);return p&&r.sys.displayList.add(a),a.preUpdate&&r.sys.updateList.add(a),a};h.exports=n},13059:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(23568),u=function(n,r){var a=i(r,"anims",null);if(a===null)return n;if(typeof a=="string")n.anims.play(a);else if(typeof a=="object"){var s=n.anims,o=i(a,"key",void 0);if(o){var d=i(a,"startFrame",void 0),l=i(a,"delay",0),f=i(a,"repeat",0),m=i(a,"repeatDelay",0),g=i(a,"yoyo",!1),p=i(a,"play",!1),y=i(a,"delayedPlay",0),S={key:o,delay:l,repeat:f,repeatDelay:m,yoyo:g,startFrame:d};p?s.play(S):y>0?s.playAfterDelay(S,y):s.load(S)}}return n};h.exports=u},8050:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(73162),n=e(37277),r=e(51708),a=e(44594),s=e(19186),o=new i({Extends:u,initialize:function(l){u.call(this,l),this.sortChildrenFlag=!1,this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.events.once(a.DESTROY,this.destroy,this)},addChildCallback:function(d){d.displayList&&d.displayList!==this&&d.removeFromDisplayList(),d.parentContainer&&d.parentContainer.remove(d),d.displayList||(this.queueDepthSort(),d.displayList=this,d.emit(r.ADDED_TO_SCENE,d,this.scene),this.events.emit(a.ADDED_TO_SCENE,d,this.scene))},removeChildCallback:function(d){this.queueDepthSort(),d.displayList=null,d.emit(r.REMOVED_FROM_SCENE,d,this.scene),this.events.emit(a.REMOVED_FROM_SCENE,d,this.scene)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(s(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(d,l){return d._depth-l._depth},getChildren:function(){return this.list},shutdown:function(){for(var d=this.list;d.length;)d[0].destroy(!0);this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});n.register("DisplayList",o,"displayList"),h.exports=o},95643:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(53774),n=e(45893),r=e(50792),a=e(51708),s=e(44594),o=new i({Extends:r,initialize:function(l,f){r.call(this),this.scene=l,this.displayList=null,this.type=f,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this),l.sys.queueDepthSort()},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},setState:function(d){return this.state=d,this},setDataEnabled:function(){return this.data||(this.data=new n(this)),this},setData:function(d,l){return this.data||(this.data=new n(this)),this.data.set(d,l),this},incData:function(d,l){return this.data||(this.data=new n(this)),this.data.inc(d,l),this},toggleData:function(d){return this.data||(this.data=new n(this)),this.data.toggle(d),this},getData:function(d){return this.data||(this.data=new n(this)),this.data.get(d)},setInteractive:function(d,l,f){return this.scene.sys.input.enable(this,d,l,f),this},disableInteractive:function(d){return d===void 0&&(d=!1),this.scene.sys.input.disable(this,d),this},removeInteractive:function(d){return d===void 0&&(d=!1),this.scene.sys.input.clear(this),d&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return u(this)},willRender:function(d){var l=this.displayList&&this.displayList.active?this.displayList.willRender(d):!0;return!(!l||o.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},getIndexList:function(){for(var d=this,l=this.parentContainer,f=[];l&&(f.unshift(l.getIndex(d)),d=l,l.parentContainer);)l=l.parentContainer;return this.displayList?f.unshift(this.displayList.getIndex(d)):f.unshift(this.scene.sys.displayList.getIndex(d)),f},addToDisplayList:function(d){return d===void 0&&(d=this.scene.sys.displayList),this.displayList&&this.displayList!==d&&this.removeFromDisplayList(),d.exists(this)||(this.displayList=d,d.add(this,!0),d.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),d.events.emit(s.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var d=this.displayList||this.scene.sys.displayList;return d&&d.exists(this)&&(d.remove(this,!0),d.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),d.events.emit(s.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var d=null;return this.parentContainer?d=this.parentContainer.list:this.displayList&&(d=this.displayList.list),d},destroy:function(d){!this.scene||this.ignoreDestroy||(d===void 0&&(d=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this,d),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});o.RENDER_MASK=15,h.exports=o},44603:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(37277),n=e(44594),r=new i({initialize:function(s){this.scene=s,this.systems=s.sys,this.events=s.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(a,s){r.prototype.hasOwnProperty(a)||(r.prototype[a]=s)},r.remove=function(a){r.prototype.hasOwnProperty(a)&&delete r.prototype[a]},u.register("GameObjectCreator",r,"make"),h.exports=r},39429:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(37277),n=e(44594),r=new i({initialize:function(s){this.scene=s,this.systems=s.sys,this.events=s.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},existing:function(a){return(a.renderCanvas||a.renderWebGL)&&this.displayList.add(a),a.preUpdate&&this.updateList.add(a),a},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(a,s){r.prototype.hasOwnProperty(a)||(r.prototype[a]=s)},r.remove=function(a){r.prototype.hasOwnProperty(a)&&delete r.prototype[a]},u.register("GameObjectFactory",r,"add"),h.exports=r},91296:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(61340),u=new i,n=new i,r=new i,a={camera:u,sprite:n,calc:r},s=function(o,d,l){var f=u,m=n,g=r;return m.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),f.copyFrom(d.matrix),l?(f.multiplyWithOffset(l,-d.scrollX*o.scrollFactorX,-d.scrollY*o.scrollFactorY),m.e=o.x,m.f=o.y):(m.e-=d.scrollX*o.scrollFactorX,m.f-=d.scrollY*o.scrollFactorY),f.multiply(m,g),a};h.exports=s},45027:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(25774),n=e(37277),r=e(44594),a=new i({Extends:u,initialize:function(o){u.call(this),this.checkQueue=!0,this.scene=o,this.systems=o.sys,o.sys.events.once(r.BOOT,this.boot,this),o.sys.events.on(r.START,this.start,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var s=this.systems.events;s.on(r.PRE_UPDATE,this.update,this),s.on(r.UPDATE,this.sceneUpdate,this),s.once(r.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(s,o){for(var d=this._active,l=d.length,f=0;f<l;f++){var m=d[f];m.active&&m.preUpdate.call(m,s,o)}},shutdown:function(){for(var s=this._active.length;s--;)this._active[s].destroy(!0);for(s=this._pending.length;s--;)this._pending[s].destroy(!0);for(s=this._destroy.length;s--;)this._destroy[s].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var o=this.systems.events;o.off(r.PRE_UPDATE,this.update,this),o.off(r.UPDATE,this.sceneUpdate,this),o.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});n.register("UpdateList",a,"updateList"),h.exports=a},3217:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r,a,s,o,d,l,f,m,g,p,y){var S=u.x-i.displayOriginX+r,C=u.y-i.displayOriginY+a,A=S+u.w,M=C+u.h,L=s.a,P=s.b,O=s.c,D=s.d,I=s.e,F=s.f,H=S*L+C*O+I,k=S*P+C*D+F,W=S*L+M*O+I,$=S*P+M*D+F,K=A*L+M*O+I,Z=A*P+M*D+F,X=A*L+C*O+I,j=A*P+C*D+F;o&&(H=Math.round(H),k=Math.round(k),W=Math.round(W),$=Math.round($),K=Math.round(K),Z=Math.round(Z),X=Math.round(X),j=Math.round(j)),e.batchQuad(i,H,k,W,$,K,Z,X,j,n.u0,n.v0,n.u1,n.v1,d,l,f,m,g,p,y)};h.exports=w},53048:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){if(u===void 0&&(u=!1),n===void 0)return n={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},n;var r=e.text,a=r.length,s=e.maxWidth,o=e.wordWrapCharCode,d=Number.MAX_VALUE,l=Number.MAX_VALUE,f=0,m=0,g=e.fontData.chars,p=e.fontData.lineHeight,y=e.letterSpacing,S=e.lineSpacing,C=0,A=0,M=0,L=null,P=e._align,O=0,D=0,I=e.fontSize/e.fontData.size,F=I*e.scaleX,H=I*e.scaleY,k=null,W=0,$=[],K=Number.MAX_VALUE,Z=0,X=0,j=0,Y,U,J,q=[],_=[],te=null,se=function(hi,Ai){for(var Ot=0,qt=0;qt<hi.length;qt++){var jt=hi.charCodeAt(qt),Si=Ai.chars[jt];Si&&(Ot+=Si.xAdvance)}return Ot*F};if(s>0){J=r.split(`
`);var ne=[];for(Y=0;Y<J.length;Y++){var he=J[Y],le="",ge="",re="",fe="";for(U=0;U<he.length;U++)if(M=he.charCodeAt(U),le+=he[U],M===o||U===he.length-1){fe=re+le;var Ae=se(fe,e.fontData);Ae<=s?re=fe:(ge=ge.slice(0,-1),ge+=(ge?`
`:"")+re,re=le),le=""}ge=ge.slice(0,-1),ge+=(ge?`
`:"")+re,ne.push(ge)}r=ne.join(`
`),n.wrappedText=r,a=r.length}var Ie=0;for(Y=0;Y<a;Y++){if(M=r.charCodeAt(Y),M===10){te!==null&&(q.push({word:te.word,i:te.i,x:te.x*F,y:te.y*H,w:te.w*F,h:te.h*H}),te=null),k=null,$[X]=j,j>Z&&(Z=j),j<K&&(K=j),X++,j=0,C=0,A=(p+S)*X;continue}if(L=g[M],!!L){if(O=C,D=A,k!==null){var Ne=L.kerning[W];O+=Ne!==void 0?Ne:0}d>O&&(d=O),l>D&&(l=D);var Fe=O+L.xAdvance,Se=D+p;f<Fe&&(f=Fe),m<Se&&(m=Se);var Oe=L.xOffset+L.xAdvance+(Ne!==void 0?Ne:0);M===o?te!==null&&(q.push({word:te.word,i:te.i,x:te.x*F,y:te.y*H,w:te.w*F,h:te.h*H}),te=null):(te===null&&(te={word:"",i:Ie,x:C,y:A,w:0,h:p}),te.word=te.word.concat(r[Y]),te.w+=Oe),_.push({i:Ie,idx:Y,char:r[Y],code:M,x:(L.xOffset+O)*I,y:(L.yOffset+A)*I,w:L.width*I,h:L.height*I,t:A*I,r:Fe*I,b:p*I,line:X,glyph:L}),C+=L.xAdvance+y+(Ne!==void 0?Ne:0),k=L,W=M,j=Fe*I,Ie++}}if(te!==null&&q.push({word:te.word,i:te.i,x:te.x*F,y:te.y*H,w:te.w*F,h:te.h*H}),$[X]=j,j>Z&&(Z=j),j<K&&(K=j),P>0)for(var Be=0;Be<_.length;Be++){var Pt=_[Be];if(P===1){var Gt=(Z-$[Pt.line])/2;Pt.x+=Gt,Pt.r+=Gt}else if(P===2){var si=Z-$[Pt.line];Pt.x+=si,Pt.r+=si}}var It=n.local,Ht=n.global;return J=n.lines,It.x=d*I,It.y=l*I,It.width=f*I,It.height=m*I,Ht.x=e.x-e._displayOriginX+d*F,Ht.y=e.y-e._displayOriginY+l*H,Ht.width=f*F,Ht.height=m*H,J.shortest=K,J.longest=Z,J.lengths=$,i&&(It.x=Math.ceil(It.x),It.y=Math.ceil(It.y),It.width=Math.ceil(It.width),It.height=Math.ceil(It.height),Ht.x=Math.ceil(Ht.x),Ht.y=Math.ceil(Ht.y),Ht.width=Math.ceil(Ht.width),Ht.height=Math.ceil(Ht.height),J.shortest=Math.ceil(K),J.longest=Math.ceil(Z)),u&&(e._displayOriginX=e.originX*It.width,e._displayOriginY=e.originY*It.height,Ht.x=e.x-e._displayOriginX*e.scaleX,Ht.y=e.y-e._displayOriginY*e.scaleY,i&&(Ht.x=Math.ceil(Ht.x),Ht.y=Math.ceil(Ht.y))),n.words=q,n.characters=_,n.lines.height=p,n.scale=I,n.scaleX=e.scaleX,n.scaleY=e.scaleY,n};h.exports=w},61327:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(21859),u=function(n,r,a,s,o,d,l){var f=n.sys.textures.get(a),m=f.get(s),g=n.sys.cache.xml.get(o);if(m&&g){var p=i(g,m,d,l,f);return n.sys.cache.bitmapFont.add(r,{data:p,texture:a,frame:s,fromAtlas:!0}),!0}else return!1};h.exports=u},6925:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35154),u=function(n,r){var a=r.width,s=r.height,o=Math.floor(a/2),d=Math.floor(s/2),l=i(r,"chars","");if(l!==""){var f=i(r,"image",""),m=n.sys.textures.getFrame(f),g=m.cutX,p=m.cutY,y=m.source.width,S=m.source.height,C=i(r,"offset.x",0),A=i(r,"offset.y",0),M=i(r,"spacing.x",0),L=i(r,"spacing.y",0),P=i(r,"lineSpacing",0),O=i(r,"charsPerRow",null);O===null&&(O=y/a,O>l.length&&(O=l.length));for(var D=C,I=A,F={retroFont:!0,font:f,size:a,lineHeight:s+P,chars:{}},H=0,k=0;k<l.length;k++){var W=l.charCodeAt(k),$=(g+D)/y,K=(p+I)/S,Z=(g+D+a)/y,X=(p+I+s)/S;F.chars[W]={x:D,y:I,width:a,height:s,centerX:o,centerY:d,xOffset:0,yOffset:0,xAdvance:a,data:{},kerning:{},u0:$,v0:K,u1:Z,v1:X},H++,H===O?(H=0,D=C,I+=s+L):D+=a+M}var j={data:F,frame:null,texture:f};return j}};h.exports=u},21859:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(i,u){return parseInt(i.getAttribute(u),10)}var e=function(i,u,n,r,a){n===void 0&&(n=0),r===void 0&&(r=0);var s=u.cutX,o=u.cutY,d=u.source.width,l=u.source.height,f=u.sourceIndex,m={},g=i.getElementsByTagName("info")[0],p=i.getElementsByTagName("common")[0];m.font=g.getAttribute("face"),m.size=w(g,"size"),m.lineHeight=w(p,"lineHeight")+r,m.chars={};var y=i.getElementsByTagName("char"),S=u!==void 0&&u.trimmed;if(S)var C=u.height,A=u.width;for(var M=0;M<y.length;M++){var L=y[M],P=w(L,"id"),O=String.fromCharCode(P),D=w(L,"x"),I=w(L,"y"),F=w(L,"width"),H=w(L,"height");S&&(D<A&&(A=D),I<C&&(C=I)),S&&C!==0&&A!==0&&(D-=u.x,I-=u.y);var k=(s+D)/d,W=(o+I)/l,$=(s+D+F)/d,K=(o+I+H)/l;if(m.chars[P]={x:D,y:I,width:F,height:H,centerX:Math.floor(F/2),centerY:Math.floor(H/2),xOffset:w(L,"xoffset"),yOffset:w(L,"yoffset"),xAdvance:w(L,"xadvance")+n,data:{},kerning:{},u0:k,v0:W,u1:$,v1:K},a&&F!==0&&H!==0){var Z=a.add(O,f,D,I,F,H);Z&&Z.setUVs(F,H,k,W,$,K)}}var X=i.getElementsByTagName("kerning");for(M=0;M<X.length;M++){var j=X[M],Y=w(j,"first"),U=w(j,"second"),J=w(j,"amount");m.chars[U].kerning[Y]=J}return m};h.exports=e},196:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87662),u=e(79291),n={Parse:e(6925)};n=u(!1,n,i),h.exports=n},87662:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};h.exports=w},2638:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(22186),u=e(83419),n=e(12310),r=new u({Extends:i,Mixins:[n],initialize:function(s,o,d,l,f,m,g){i.call(this,s,o,d,l,f,m,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(a,s){return this.cropWidth=a,this.cropHeight=s,this},setDisplayCallback:function(a){return this.displayCallback=a,this},setScrollX:function(a){return this.scrollX=a,this},setScrollY:function(a){return this.scrollY=a,this}});h.exports=r},86741:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(20926),u=function(n,r,a,s){var o=r._text,d=o.length,l=n.currentContext;if(!(d===0||!i(n,l,r,a,s))){a.addToRenderList(r);var f=r.fromAtlas?r.frame:r.texture.frames.__BASE,m=r.displayCallback,g=r.callbackData,p=r.fontData.chars,y=r.fontData.lineHeight,S=r._letterSpacing,C=0,A=0,M=0,L=null,P=0,O=0,D=0,I=0,F=0,H=0,k=null,W=0,$=r.frame.source.image,K=f.cutX,Z=f.cutY,X=0,j=0,Y=r._fontSize/r.fontData.size,U=r._align,J=0,q=0;r.getTextBounds(!1);var _=r._bounds.lines;U===1?q=(_.longest-_.lengths[0])/2:U===2&&(q=_.longest-_.lengths[0]),l.translate(-r.displayOriginX,-r.displayOriginY);var te=a.roundPixels;r.cropWidth>0&&r.cropHeight>0&&(l.beginPath(),l.rect(0,0,r.cropWidth,r.cropHeight),l.clip());for(var se=0;se<d;se++){if(j=Y,X=0,M=o.charCodeAt(se),M===10){J++,U===1?q=(_.longest-_.lengths[J])/2:U===2&&(q=_.longest-_.lengths[J]),C=0,A+=y,k=null;continue}if(L=p[M],!!L){if(P=K+L.x,O=Z+L.y,D=L.width,I=L.height,F=L.xOffset+C-r.scrollX,H=L.yOffset+A-r.scrollY,k!==null){var ne=L.kerning[W];F+=ne!==void 0?ne:0}if(m){g.index=se,g.charCode=M,g.x=F,g.y=H,g.scale=j,g.rotation=X,g.data=L.data;var he=m(g);F=he.x,H=he.y,j=he.scale,X=he.rotation}F*=j,H*=j,F+=q,C+=L.xAdvance+S+(ne!==void 0?ne:0),k=L,W=M,!(D===0||I===0||M===32)&&(te&&(F=Math.round(F),H=Math.round(H)),l.save(),l.translate(F,H),l.rotate(X),l.scale(j,j),l.drawImage($,P,O,D,I,0,0,D,I),l.restore())}}l.restore()}};h.exports=u},11164:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2638),u=e(25305),n=e(44603),r=e(23568);n.register("dynamicBitmapText",function(a,s){a===void 0&&(a={});var o=r(a,"font",""),d=r(a,"text",""),l=r(a,"size",!1),f=new i(this.scene,0,0,o,d,l);return s!==void 0&&(a.add=s),u(this.scene,f,a),f})},72566:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2638),u=e(39429);u.register("dynamicBitmapText",function(n,r,a,s,o){return this.displayList.add(new i(this.scene,n,r,a,s,o))})},12310:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(73482),n=e(86741),h.exports={renderWebGL:u,renderCanvas:n}},73482:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=e(61340),n=e(70554),r=new u,a=function(s,o,d,l){var f=o.text,m=f.length;if(m!==0){d.addToRenderList(o);var g=s.pipelines.set(o.pipeline,o),p=i(o,d,l);s.pipelines.preBatch(o);var y=p.sprite,S=p.calc,C=r,A=o.cropWidth>0||o.cropHeight>0;A&&(g.flush(),s.pushScissor(S.tx,S.ty,o.cropWidth*S.scaleX,o.cropHeight*S.scaleY));var M=o.frame,L=M.glTexture,P=o.tintFill,O=n.getTintAppendFloatAlpha(o.tintTopLeft,d.alpha*o._alphaTL),D=n.getTintAppendFloatAlpha(o.tintTopRight,d.alpha*o._alphaTR),I=n.getTintAppendFloatAlpha(o.tintBottomLeft,d.alpha*o._alphaBL),F=n.getTintAppendFloatAlpha(o.tintBottomRight,d.alpha*o._alphaBR),H=g.setGameObject(o),k=0,W=0,$=0,K=0,Z=o.letterSpacing,X,j=0,Y=0,U,J=o.scrollX,q=o.scrollY,_=o.fontData,te=_.chars,se=_.lineHeight,ne=o.fontSize/_.size,he=0,le=o._align,ge=0,re=0,fe=o.getTextBounds(!1);o.maxWidth>0&&(f=fe.wrappedText,m=f.length);var Ae=o._bounds.lines;le===1?re=(Ae.longest-Ae.lengths[0])/2:le===2&&(re=Ae.longest-Ae.lengths[0]);for(var Ie=d.roundPixels,Ne=o.displayCallback,Fe=o.callbackData,Se=0;Se<m;Se++){if($=f.charCodeAt(Se),$===10){ge++,le===1?re=(Ae.longest-Ae.lengths[ge])/2:le===2&&(re=Ae.longest-Ae.lengths[ge]),k=0,W+=se,U=null;continue}if(X=te[$],!!X){j=X.width,Y=X.height;var Oe=X.xOffset+k-J,Be=X.yOffset+W-q;if(U!==null){var Pt=X.kerning[K]||0;Oe+=Pt,k+=Pt}if(k+=X.xAdvance+Z,U=X,K=$,!(j===0||Y===0||$===32)){if(ne=o.fontSize/o.fontData.size,he=0,Ne){Fe.color=0,Fe.tint.topLeft=O,Fe.tint.topRight=D,Fe.tint.bottomLeft=I,Fe.tint.bottomRight=F,Fe.index=Se,Fe.charCode=$,Fe.x=Oe,Fe.y=Be,Fe.scale=ne,Fe.rotation=he,Fe.data=X.data;var Gt=Ne(Fe);Oe=Gt.x,Be=Gt.y,ne=Gt.scale,he=Gt.rotation,Gt.color?(O=Gt.color,D=Gt.color,I=Gt.color,F=Gt.color):(O=Gt.tint.topLeft,D=Gt.tint.topRight,I=Gt.tint.bottomLeft,F=Gt.tint.bottomRight),O=n.getTintAppendFloatAlpha(O,d.alpha*o._alphaTL),D=n.getTintAppendFloatAlpha(D,d.alpha*o._alphaTR),I=n.getTintAppendFloatAlpha(I,d.alpha*o._alphaBL),F=n.getTintAppendFloatAlpha(F,d.alpha*o._alphaBR)}Oe*=ne,Be*=ne,Oe-=o.displayOriginX,Be-=o.displayOriginY,Oe+=re,C.applyITRS(Oe,Be,he,ne,ne),S.multiply(C,y);var si=X.u0,It=X.v0,Ht=X.u1,hi=X.v1,Ai=j,Ot=Y,qt=y.e,jt=y.f,Si=Ot*y.c+y.e,Di=Ot*y.d+y.f,ea=Ai*y.a+Ot*y.c+y.e,es=Ai*y.b+Ot*y.d+y.f,ta=Ai*y.a+y.e,cs=Ai*y.b+y.f;Ie&&(qt=Math.round(qt),jt=Math.round(jt),Si=Math.round(Si),Di=Math.round(Di),ea=Math.round(ea),es=Math.round(es),ta=Math.round(ta),cs=Math.round(cs)),g.shouldFlush(6)&&(g.flush(),H=g.setGameObject(o)),g.batchQuad(o,qt,jt,Si,Di,ea,es,ta,cs,si,It,Ht,hi,O,D,I,F,P,L,H)}}}A&&(g.flush(),s.popScissor()),s.pipelines.postBatch(o)}};h.exports=a},22186:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(45319),n=e(31401),r=e(95643),a=e(53048),s=e(61327),o=e(21859),d=e(87841),l=e(18658),f=new i({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Texture,n.Tint,n.Transform,n.Visible,l],initialize:function(g,p,y,S,C,A,M){C===void 0&&(C=""),M===void 0&&(M=0),r.call(this,g,"BitmapText"),this.font=S;var L=this.scene.sys.cache.bitmapFont.get(S);if(!L)throw new Error("Invalid BitmapText key: "+S);this.fontData=L.data,this._text="",this._fontSize=A||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=M,this._bounds=a(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=L.fromAtlas,this.setTexture(L.texture,L.frame),this.setPosition(p,y),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(C)},setLeftAlign:function(){return this._align=f.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=f.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=f.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(m){return this._fontSize=m,this._dirty=!0,this},setLetterSpacing:function(m){return m===void 0&&(m=0),this._letterSpacing=m,this._dirty=!0,this},setLineSpacing:function(m){return m===void 0&&(m=0),this.lineSpacing=m,this},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this.text&&(this._text=m.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(m,g,p,y){return m===void 0&&(m=0),g===void 0&&(g=0),p===void 0&&(p=0),y===void 0&&(y=.5),this.dropShadowX=m,this.dropShadowY=g,this.dropShadowColor=p,this.dropShadowAlpha=y,this},setCharacterTint:function(m,g,p,y,S,C,A){m===void 0&&(m=0),g===void 0&&(g=1),p===void 0&&(p=!1),y===void 0&&(y=-1),S===void 0&&(S=y,C=y,A=y);var M=this.text.length;g===-1&&(g=M),m<0&&(m=M+m),m=u(m,0,M-1);for(var L=u(m+g,m,M),P=this.charColors,O=m;O<L;O++){var D=P[O];if(y===-1)P[O]=null;else{var I=p?1:0;D?(D.tintEffect=I,D.tintTL=y,D.tintTR=S,D.tintBL=C,D.tintBR=A):P[O]={tintEffect:I,tintTL:y,tintTR:S,tintBL:C,tintBR:A}}}return this},setWordTint:function(m,g,p,y,S,C,A){g===void 0&&(g=1);for(var M=this.getTextBounds(),L=M.words,P=typeof m=="number",O=0,D=0;D<L.length;D++){var I=L[D];if((P&&D===m||!P&&I.word===m)&&(this.setCharacterTint(I.i,I.word.length,p,y,S,C,A),O++,O===g))return this}return this},getTextBounds:function(m){var g=this._bounds;return(this._dirty||m||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(a(this,m,!0,g),this._dirty=!1),g},getCharacterAt:function(m,g,p){for(var y=this.getLocalPoint(m,g,null,p),S=this.getTextBounds(),C=S.characters,A=new d,M=0;M<C.length;M++){var L=C[M];if(A.setTo(L.x,L.t,L.r-L.x,L.b),A.contains(y.x,y.y))return L}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(m,g,p){g===void 0&&(g=this._fontSize),p===void 0&&(p=this._align);var y=this.scene.sys.cache.bitmapFont.get(m);return y&&(this.font=m,this.fontData=y.data,this._fontSize=g,this._align=p,this.fromAtlas=y.fromAtlas===!0,this.setTexture(y.texture,y.frame),a(this,!1,!0,this._bounds)),this},setMaxWidth:function(m,g){return this._maxWidth=m,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(m){this._align=m,this._dirty=!0},get:function(){return this._align}},text:{set:function(m){this.setText(m)},get:function(){return this._text}},fontSize:{set:function(m){this._fontSize=m,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(m){this._letterSpacing=m,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(m){this._lineSpacing=m,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(m){this._maxWidth=m,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var m=n.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return m.data=g,m},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});f.ALIGN_LEFT=0,f.ALIGN_CENTER=1,f.ALIGN_RIGHT=2,f.ParseFromAtlas=s,f.ParseXMLBitmapFont=o,h.exports=f},37289:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(20926),u=function(n,r,a,s){var o=r._text,d=o.length,l=n.currentContext;if(!(d===0||!i(n,l,r,a,s))){a.addToRenderList(r);var f=r.fromAtlas?r.frame:r.texture.frames.__BASE,m=r.fontData.chars,g=r.fontData.lineHeight,p=r._letterSpacing,y=r._lineSpacing,S=0,C=0,A=0,M=null,L=0,P=0,O=0,D=0,I=0,F=0,H=null,k=0,W=f.source.image,$=f.cutX,K=f.cutY,Z=r._fontSize/r.fontData.size,X=r._align,j=0,Y=0,U=r.getTextBounds(!1);r.maxWidth>0&&(o=U.wrappedText,d=o.length);var J=r._bounds.lines;X===1?Y=(J.longest-J.lengths[0])/2:X===2&&(Y=J.longest-J.lengths[0]),l.translate(-r.displayOriginX,-r.displayOriginY);for(var q=a.roundPixels,_=0;_<d;_++){if(A=o.charCodeAt(_),A===10){j++,X===1?Y=(J.longest-J.lengths[j])/2:X===2&&(Y=J.longest-J.lengths[j]),S=0,C+=g+y,H=null;continue}if(M=m[A],!!M){if(L=$+M.x,P=K+M.y,O=M.width,D=M.height,I=M.xOffset+S,F=M.yOffset+C,H!==null){var te=M.kerning[k];I+=te!==void 0?te:0}I*=Z,F*=Z,I+=Y,S+=M.xAdvance+p+(te!==void 0?te:0),H=M,k=A,!(O===0||D===0||A===32)&&(q&&(I=Math.round(I),F=Math.round(F)),l.save(),l.translate(I,F),l.scale(Z,Z),l.drawImage(W,L,P,O,D,0,0,O,D),l.restore())}}l.restore()}};h.exports=u},57336:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(22186),u=e(25305),n=e(44603),r=e(23568),a=e(35154);n.register("bitmapText",function(s,o){s===void 0&&(s={});var d=a(s,"font",""),l=r(s,"text",""),f=r(s,"size",!1),m=a(s,"align",0),g=new i(this.scene,0,0,d,l,f,m);return o!==void 0&&(s.add=o),u(this.scene,g,s),g})},34914:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(22186),u=e(39429);u.register("bitmapText",function(n,r,a,s,o,d){return this.displayList.add(new i(this.scene,n,r,a,s,o,d))})},18658:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(33590),n=e(37289),h.exports={renderWebGL:u,renderCanvas:n}},33590:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(3217),u=e(91296),n=e(70554),r=function(a,s,o,d){var l=s._text,f=l.length;if(f!==0){o.addToRenderList(s);var m=a.pipelines.set(s.pipeline,s),g=u(s,o,d).calc;a.pipelines.preBatch(s);var p=o.roundPixels,y=o.alpha,S=s.charColors,C=s.tintFill,A=n.getTintAppendFloatAlpha,M=A(s.tintTopLeft,y*s._alphaTL),L=A(s.tintTopRight,y*s._alphaTR),P=A(s.tintBottomLeft,y*s._alphaBL),O=A(s.tintBottomRight,y*s._alphaBR),D=s.frame.glTexture,I=m.setGameObject(s),F=s.getTextBounds(!1),H,k,W,$=F.characters,K=s.dropShadowX,Z=s.dropShadowY,X=K!==0||Z!==0;if(X){var j=s.dropShadowColor,Y=s.dropShadowAlpha,U=A(j,y*Y*s._alphaTL),J=A(j,y*Y*s._alphaTR),q=A(j,y*Y*s._alphaBL),_=A(j,y*Y*s._alphaBR);for(H=0;H<$.length;H++)k=$[H],W=k.glyph,!(k.code===32||W.width===0||W.height===0)&&i(m,s,k,W,K,Z,g,p,U,J,q,_,1,D,I)}for(H=0;H<$.length;H++)if(k=$[H],W=k.glyph,!(k.code===32||W.width===0||W.height===0))if(m.shouldFlush(6)&&(m.flush(),I=m.setGameObject(s)),S[k.i]){var te=S[k.i],se=te.tintEffect,ne=A(te.tintTL,y*s._alphaTL),he=A(te.tintTR,y*s._alphaTR),le=A(te.tintBL,y*s._alphaBL),ge=A(te.tintBR,y*s._alphaBR);i(m,s,k,W,0,0,g,p,ne,he,le,ge,se,D,I)}else i(m,s,k,W,0,0,g,p,M,L,P,O,C,D,I);a.pipelines.postBatch(s)}};h.exports=r},6107:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(48011),u=e(46590),n=e(83419),r=e(31401),a=e(4327),s=e(95643),o=e(73162),d=new n({Extends:s,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Size,r.Texture,r.Transform,r.Visible,i],initialize:function(f,m,g,p,y){s.call(this,f,"Blitter"),this.setTexture(p,y),this.setPosition(m,g),this.initPipeline(),this.initPostPipeline(),this.children=new o,this.renderList=[],this.dirty=!1},create:function(l,f,m,g,p){g===void 0&&(g=!0),p===void 0&&(p=this.children.length),m===void 0?m=this.frame:m instanceof a||(m=this.texture.get(m));var y=new u(this,l,f,m,g);return this.children.addAt(y,p,!1),this.dirty=!0,y},createFromCallback:function(l,f,m,g){for(var p=this.createMultiple(f,m,g),y=0;y<p.length;y++){var S=p[y];l.call(this,S,y)}return p},createMultiple:function(l,f,m){f===void 0&&(f=this.frame.name),m===void 0&&(m=!0),Array.isArray(f)||(f=[f]);var g=[],p=this;return f.forEach(function(y){for(var S=0;S<l;S++)g.push(p.create(0,0,y,m))}),g},childCanRender:function(l){return l.visible&&l.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});h.exports=d},72396:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r=i.getRenderList();if(r.length!==0){var a=e.currentContext,s=u.alpha*i.alpha;if(s!==0){u.addToRenderList(i),a.globalCompositeOperation=e.blendModes[i.blendMode],a.imageSmoothingEnabled=!i.frame.source.scaleMode;var o=i.x-u.scrollX*i.scrollFactorX,d=i.y-u.scrollY*i.scrollFactorY;a.save(),n&&n.copyToContext(a);for(var l=u.roundPixels,f=0;f<r.length;f++){var m=r[f],g=m.flipX||m.flipY,p=m.frame,y=p.canvasData,S=p.x,C=p.y,A=1,M=1,L=m.alpha*s;L!==0&&(a.globalAlpha=L,g?(m.flipX&&(A=-1,S-=y.width),m.flipY&&(M=-1,C-=y.height),y.width>0&&y.height>0&&(a.save(),a.translate(m.x+o,m.y+d),a.scale(A,M),a.drawImage(p.source.image,y.x,y.y,y.width,y.height,S,C,y.width,y.height),a.restore())):(l&&(S=Math.round(S),C=Math.round(C)),y.width>0&&y.height>0&&a.drawImage(p.source.image,y.x,y.y,y.width,y.height,S+m.x+o,C+m.y+d,y.width,y.height)))}a.restore()}}};h.exports=w},9403:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(6107),u=e(25305),n=e(44603),r=e(23568);n.register("blitter",function(a,s){a===void 0&&(a={});var o=r(a,"key",null),d=r(a,"frame",null),l=new i(this.scene,0,0,o,d);return s!==void 0&&(a.add=s),u(this.scene,l,a),l})},12709:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(6107),u=e(39429);u.register("blitter",function(n,r,a,s){return this.displayList.add(new i(this.scene,n,r,a,s))})},48011:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(99485),n=e(72396),h.exports={renderWebGL:u,renderCanvas:n}},99485:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(61340),u=e(70554),n=new i,r=function(a,s,o,d){var l=s.getRenderList(),f=o.alpha*s.alpha;if(!(l.length===0||f===0)){o.addToRenderList(s);var m=a.pipelines.set(this.pipeline,s),g=o.scrollX*s.scrollFactorX,p=o.scrollY*s.scrollFactorY,y=n.copyFrom(o.matrix);d&&(y.multiplyWithOffset(d,-g,-p),g=0,p=0);var S=s.x-g,C=s.y-p,A=-1,M=!1,L=o.roundPixels;a.pipelines.preBatch(s);for(var P=0;P<l.length;P++){var O=l[P],D=O.frame,I=O.alpha*f;if(I!==0){var F=D.width,H=D.height,k=S+O.x+D.x,W=C+O.y+D.y;O.flipX&&(F*=-1,k+=D.width),O.flipY&&(H*=-1,W+=D.height);var $=y.setQuad(k,W,k+F,W+H,L),K=u.getTintAppendFloatAlpha(O.tint,I);if(D.sourceIndex!==A){var Z=m.setGameObject(s,D);A=D.sourceIndex}m.batchQuad(s,$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],D.u0,D.v0,D.u1,D.v1,K,K,K,K,M,D.glTexture,Z)&&(A=-1)}}a.pipelines.postBatch(s)}};h.exports=r},46590:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(4327),n=new i({initialize:function(a,s,o,d,l){this.parent=a,this.x=s,this.y=o,this.frame=d,this.data={},this.tint=16777215,this._visible=l,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(r){return r===void 0?this.frame=this.parent.frame:r instanceof u&&r.texture===this.parent.texture?this.frame=r:this.frame=this.parent.texture.get(r),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(r,a,s){return this.x=r,this.y=a,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,s&&this.setFrame(s),this},setPosition:function(r,a){return this.x=r,this.y=a,this},setFlipX:function(r){return this.flipX=r,this},setFlipY:function(r){return this.flipY=r,this},setFlip:function(r,a){return this.flipX=r,this.flipY=a,this},setVisible:function(r){return this.visible=r,this},setAlpha:function(r){return this.alpha=r,this},setTint:function(r){return this.tint=r,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(r){this.parent.dirty|=this._visible!==r,this._visible=r}},alpha:{get:function(){return this._alpha},set:function(r){this.parent.dirty|=this._alpha>0!=r>0,this._alpha=r}}});h.exports=n},16005:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=2,n={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r,a,s,o){return r===void 0&&(r=1),a===void 0?this.alpha=r:(this._alphaTL=i(r,0,1),this._alphaTR=i(a,0,1),this._alphaBL=i(s,0,1),this._alphaBR=i(o,0,1)),this},alpha:{get:function(){return this._alpha},set:function(r){var a=i(r,0,1);this._alpha=a,this._alphaTL=a,this._alphaTR=a,this._alphaBL=a,this._alphaBR=a,a===0?this.renderFlags&=~u:this.renderFlags|=u}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(r){var a=i(r,0,1);this._alphaTL=a,a!==0&&(this.renderFlags|=u)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(r){var a=i(r,0,1);this._alphaTR=a,a!==0&&(this.renderFlags|=u)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(r){var a=i(r,0,1);this._alphaBL=a,a!==0&&(this.renderFlags|=u)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(r){var a=i(r,0,1);this._alphaBR=a,a!==0&&(this.renderFlags|=u)}}};h.exports=n},88509:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=2,n={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r){return r===void 0&&(r=1),this.alpha=r,this},alpha:{get:function(){return this._alpha},set:function(r){var a=i(r,0,1);this._alpha=a,a===0?this.renderFlags&=~u:this.renderFlags|=u}}};h.exports=n},90065:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(10312),u={_blendMode:i.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(n){typeof n=="string"&&(n=i[n]),n|=0,n>=-1&&(this._blendMode=n)}},setBlendMode:function(n){return this.blendMode=n,this}};h.exports=u},94215:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,i){return this.width=e,this.height=i,this},setDisplaySize:function(e,i){return this.displayWidth=e,this.displayHeight=i,this}};h.exports=w},61683:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={texture:null,frame:null,isCropped:!1,setCrop:function(e,i,u,n){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,i,u,n,this.flipX,this.flipY);else{var r=e;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};h.exports=w},89272:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37105),u={_depth:0,depth:{get:function(){return this._depth},set:function(n){this.displayList&&this.displayList.queueDepthSort(),this._depth=n}},setDepth:function(n){return n===void 0&&(n=0),this.depth=n,this},setToTop:function(){var n=this.getDisplayList();return n&&i.BringToTop(n,this),this},setToBack:function(){var n=this.getDisplayList();return n&&i.SendToBack(n,this),this},setAbove:function(n){var r=this.getDisplayList();return r&&n&&i.MoveAbove(r,this,n),this},setBelow:function(n){var r=this.getDisplayList();return r&&n&&i.MoveBelow(r,this,n),this}};h.exports=u},47059:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(66064),n=e(19133),r=new i({initialize:function(s,o){this.gameObject=s,this.isPost=o,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(a){return a===void 0&&(a=0),this.padding=a,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(a){if(!this.isPost){var s=this.gameObject.scene.sys.renderer;s&&s.pipelines?(this.gameObject.pipeline=s.pipelines.FX_PIPELINE,a!==void 0&&(this.padding=a),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var a=this.list,s=0;s<a.length;s++)a[s].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(a){var s;if(this.isPost){var o=this.gameObject.getPostPipeline(String(a.type));for(Array.isArray(o)||(o=[o]),s=0;s<o.length;s++){var d=o[s];if(d.controller===a){this.gameObject.removePostPipeline(d),a.destroy();break}}}else{var l=this.list;for(s=0;s<l.length;s++)l[s]===a&&(n(l,s),a.destroy())}return this.gameObject},disable:function(a){return a===void 0&&(a=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,a&&this.clear(),this.gameObject},add:function(a,s){if(this.isPost){var o=String(a.type);this.gameObject.setPostPipeline(o,s);var d=this.gameObject.getPostPipeline(o);if(d)return Array.isArray(d)&&(d=d.pop()),d&&(d.controller=a),a}else return this.enabled||this.enable(),this.list.push(a),a},addGlow:function(a,s,o,d,l,f){return this.add(new u.Glow(this.gameObject,a,s,o,d),{quality:l,distance:f})},addShadow:function(a,s,o,d,l,f,m){return this.add(new u.Shadow(this.gameObject,a,s,o,d,l,f,m))},addPixelate:function(a){return this.add(new u.Pixelate(this.gameObject,a))},addVignette:function(a,s,o,d){return this.add(new u.Vignette(this.gameObject,a,s,o,d))},addShine:function(a,s,o,d){return this.add(new u.Shine(this.gameObject,a,s,o,d))},addBlur:function(a,s,o,d,l,f){return this.add(new u.Blur(this.gameObject,a,s,o,d,l,f))},addGradient:function(a,s,o,d,l,f,m,g){return this.add(new u.Gradient(this.gameObject,a,s,o,d,l,f,m,g))},addBloom:function(a,s,o,d,l,f){return this.add(new u.Bloom(this.gameObject,a,s,o,d,l,f))},addColorMatrix:function(){return this.add(new u.ColorMatrix(this.gameObject))},addCircle:function(a,s,o,d,l){return this.add(new u.Circle(this.gameObject,a,s,o,d,l))},addBarrel:function(a){return this.add(new u.Barrel(this.gameObject,a))},addDisplacement:function(a,s,o){return this.add(new u.Displacement(this.gameObject,a,s,o))},addWipe:function(a,s,o){return this.add(new u.Wipe(this.gameObject,a,s,o))},addReveal:function(a,s,o){return this.add(new u.Wipe(this.gameObject,a,s,o,!0))},addBokeh:function(a,s,o){return this.add(new u.Bokeh(this.gameObject,a,s,o))},addTiltShift:function(a,s,o,d,l,f){return this.add(new u.Bokeh(this.gameObject,a,s,o,!0,d,l,f))},destroy:function(){this.clear(),this.gameObject=null}});h.exports=r},54434:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,i){return this.flipX=e,this.flipY=i,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};h.exports=w},8004:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841),u=e(11520),n=e(26099),r={prepareBoundsOutput:function(a,s){if(s===void 0&&(s=!1),this.rotation!==0&&u(a,this.x,this.y,this.rotation),s&&this.parentContainer){var o=this.parentContainer.getBoundsTransformMatrix();o.transformPoint(a.x,a.y,a)}return a},getCenter:function(a,s){return a===void 0&&(a=new n),a.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,a.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(a,s)},getTopLeft:function(a,s){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX,a.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(a,s)},getTopCenter:function(a,s){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,a.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(a,s)},getTopRight:function(a,s){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX+this.displayWidth,a.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(a,s)},getLeftCenter:function(a,s){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX,a.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(a,s)},getRightCenter:function(a,s){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX+this.displayWidth,a.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(a,s)},getBottomLeft:function(a,s){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX,a.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(a,s)},getBottomCenter:function(a,s){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,a.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(a,s)},getBottomRight:function(a,s){return a||(a=new n),a.x=this.x-this.displayWidth*this.originX+this.displayWidth,a.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(a,s)},getBounds:function(a){a===void 0&&(a=new i);var s,o,d,l,f,m,g,p;if(this.parentContainer){var y=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(a),y.transformPoint(a.x,a.y,a),s=a.x,o=a.y,this.getTopRight(a),y.transformPoint(a.x,a.y,a),d=a.x,l=a.y,this.getBottomLeft(a),y.transformPoint(a.x,a.y,a),f=a.x,m=a.y,this.getBottomRight(a),y.transformPoint(a.x,a.y,a),g=a.x,p=a.y}else this.getTopLeft(a),s=a.x,o=a.y,this.getTopRight(a),d=a.x,l=a.y,this.getBottomLeft(a),f=a.x,m=a.y,this.getBottomRight(a),g=a.x,p=a.y;return a.x=Math.min(s,d,f,g),a.y=Math.min(o,l,m,p),a.width=Math.max(s,d,f,g)-a.x,a.height=Math.max(o,l,m,p)-a.y,a}};h.exports=r},8573:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(6858),u=e(80661),n={mask:null,setMask:function(r){return this.mask=r,this},clearMask:function(r){return r===void 0&&(r=!1),r&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(r,a,s,o,d){return r===void 0&&(this.texture||this.shader||this.geom)&&(r=this),new i(this.scene,r,a,s,o,d)},createGeometryMask:function(r){return r===void 0&&(this.type==="Graphics"||this.geom)&&(r=this),new u(this.scene,r)}};h.exports=n},27387:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,i){return e===void 0&&(e=.5),i===void 0&&(i=e),this.originX=e,this.originY=i,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,i){return e===void 0&&(e=0),i===void 0&&(i=e),this.displayOriginX=e,this.displayOriginY=i,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};h.exports=w},37640:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39506),u=e(57355),n=e(35154),r=e(86353),a=e(26099),s={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:r.PLAYING_FORWARD,setPath:function(o,d){d===void 0&&(d=this.pathConfig);var l=this.pathTween;return l&&l.isPlaying()&&l.stop(),this.path=o,d&&this.startFollow(d),this},setRotateToPath:function(o,d){return d===void 0&&(d=0),this.rotateToPath=o,this.pathRotationOffset=d,this},isFollowing:function(){var o=this.pathTween;return o&&o.isPlaying()},startFollow:function(o,d){o===void 0&&(o={}),d===void 0&&(d=0);var l=this.pathTween;l&&l.isPlaying()&&l.stop(),typeof o=="number"&&(o={duration:o}),o.from=n(o,"from",0),o.to=n(o,"to",1);var f=u(o,"positionOnPath",!1);this.rotateToPath=u(o,"rotateToPath",!1),this.pathRotationOffset=n(o,"rotationOffset",0);var m=n(o,"startAt",d);if(m&&(o.onStart=function(p){var y=p.data[0];y.progress=m,y.elapsed=y.duration*m;var S=y.ease(y.progress);y.current=y.start+(y.end-y.start)*S,y.setTargetValue()}),this.pathOffset||(this.pathOffset=new a(this.x,this.y)),this.pathVector||(this.pathVector=new a),this.pathDelta||(this.pathDelta=new a),this.pathDelta.reset(),o.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(o),this.path.getStartPoint(this.pathOffset),f&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=r.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+i(this.pathRotationOffset)}return this.pathConfig=o,this},pauseFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.pause(),this},resumeFollow:function(){var o=this.pathTween;return o&&o.isPaused()&&o.resume(),this},stopFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this},pathUpdate:function(){var o=this.pathTween;if(o&&o.data){var d=o.data[0],l=this.pathDelta,f=this.pathVector;if(l.copy(f).negate(),d.state===r.COMPLETE){this.path.getPoint(d.end,f),l.add(f),f.add(this.pathOffset),this.setPosition(f.x,f.y);return}else if(d.state!==r.PLAYING_FORWARD&&d.state!==r.PLAYING_BACKWARD)return;this.path.getPoint(o.getValue(),f),l.add(f),f.add(this.pathOffset);var m=this.x,g=this.y;this.setPosition(f.x,f.y);var p=this.x-m,y=this.y-g;if(p===0&&y===0)return;if(d.state!==this._prevDirection){this._prevDirection=d.state;return}this.rotateToPath&&(this.rotation=Math.atan2(y,p)+i(this.pathRotationOffset))}}};h.exports=s},72699:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62644),u={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(n){this.pipelineData={};var r=this.scene.sys.renderer;if(!r)return!1;var a=r.pipelines;if(a){n===void 0&&(n=a.default);var s=a.get(n);if(s)return this.defaultPipeline=s,this.pipeline=s,!0}return!1},setPipeline:function(n,r,a){var s=this.scene.sys.renderer;if(!s)return this;var o=s.pipelines;if(o){var d=o.get(n);d&&(this.pipeline=d),r&&(this.pipelineData=a?i(r):r)}return this},setPipelineData:function(n,r){var a=this.pipelineData;return r===void 0?delete a[n]:a[n]=r,this},resetPipeline:function(n){return n===void 0&&(n=!1),this.pipeline=this.defaultPipeline,n&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};h.exports=u},17581:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62644),u=e(47059),n=e(19133),r={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(a){this.postPipelines=[],this.postPipelineData={},this.postFX=new u(this,!0),a&&(this.preFX=new u(this,!1))},setPostPipeline:function(a,s,o){var d=this.scene.sys.renderer;if(!d)return this;var l=d.pipelines;if(l){Array.isArray(a)||(a=[a]);for(var f=0;f<a.length;f++){var m=l.getPostPipeline(a[f],this,s);m&&this.postPipelines.push(m)}s&&(this.postPipelineData=o?i(s):s)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(a,s){var o=this.postPipelineData;return s===void 0?delete o[a]:o[a]=s,this},getPostPipeline:function(a){for(var s=typeof a=="string",o=this.postPipelines,d=[],l=0;l<o.length;l++){var f=o[l];(s&&f.name===a||!s&&f instanceof a)&&d.push(f)}return d.length===1?d[0]:d},resetPostPipeline:function(a){a===void 0&&(a=!1);for(var s=this.postPipelines,o=0;o<s.length;o++)s[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,a&&(this.postPipelineData={})},removePostPipeline:function(a){for(var s=typeof a=="string",o=this.postPipelines,d=o.length-1;d>=0;d--){var l=o[d];(s&&l.name===a||!s&&l===a)&&(l.destroy(),n(o,d))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};h.exports=r},80227:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,i){return i===void 0&&(i=e),this.scrollFactorX=e,this.scrollFactorY=i,this}};h.exports=w},16736:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=this.width,i.hitArea.height=this.height),this},setSize:function(e,i){return this.width=e,this.height=i,this},setDisplaySize:function(e,i){return this.displayWidth=e,this.displayHeight=i,this}};h.exports=w},37726:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(4327),u=8,n={texture:null,frame:null,isCropped:!1,setTexture:function(r,a,s,o){return this.texture=this.scene.sys.textures.get(r),this.setFrame(a,s,o)},setFrame:function(r,a,s){return a===void 0&&(a=!0),s===void 0&&(s=!0),r instanceof i?(this.texture=this.scene.sys.textures.get(r.texture.key),this.frame=r):this.frame=this.texture.get(r),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~u:this.renderFlags|=u,this._sizeComponent&&a&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};h.exports=n},79812:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(4327),u=8,n={texture:null,frame:null,isCropped:!1,setCrop:function(r,a,s,o){if(r===void 0)this.isCropped=!1;else if(this.frame){if(typeof r=="number")this.frame.setCropUVs(this._crop,r,a,s,o,this.flipX,this.flipY);else{var d=r;this.frame.setCropUVs(this._crop,d.x,d.y,d.width,d.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(r,a){return this.texture=this.scene.sys.textures.get(r),this.setFrame(a)},setFrame:function(r,a,s){return a===void 0&&(a=!0),s===void 0&&(s=!0),r instanceof i?(this.texture=this.scene.sys.textures.get(r.texture.key),this.frame=r):this.frame=this.texture.get(r),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~u:this.renderFlags|=u,this._sizeComponent&&a&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};h.exports=n},27472:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,i,u,n){return e===void 0&&(e=16777215),i===void 0&&(i=e,u=e,n=e),this.tintTopLeft=e,this.tintTopRight=i,this.tintBottomLeft=u,this.tintBottomRight=n,this.tintFill=!1,this},setTintFill:function(e,i,u,n){return this.setTint(e,i,u,n),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};h.exports=w},53774:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(i.textureKey=e.texture.key,i.frameKey=e.frame.name),i};h.exports=w},16901:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36383),u=e(61340),n=e(85955),r=e(86554),a=e(30954),s=e(26099),o=4,d={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(l){this._scaleX=l,this._scaleY=l,l===0?this.renderFlags&=~o:this.renderFlags|=o}},scaleX:{get:function(){return this._scaleX},set:function(l){this._scaleX=l,l===0?this.renderFlags&=~o:this._scaleY!==0&&(this.renderFlags|=o)}},scaleY:{get:function(){return this._scaleY},set:function(l){this._scaleY=l,l===0?this.renderFlags&=~o:this._scaleX!==0&&(this.renderFlags|=o)}},angle:{get:function(){return a(this._rotation*i.RAD_TO_DEG)},set:function(l){this.rotation=a(l)*i.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(l){this._rotation=r(l)}},setPosition:function(l,f,m,g){return l===void 0&&(l=0),f===void 0&&(f=l),m===void 0&&(m=0),g===void 0&&(g=0),this.x=l,this.y=f,this.z=m,this.w=g,this},copyPosition:function(l){return l.x!==void 0&&(this.x=l.x),l.y!==void 0&&(this.y=l.y),l.z!==void 0&&(this.z=l.z),l.w!==void 0&&(this.w=l.w),this},setRandomPosition:function(l,f,m,g){return l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=l+Math.random()*m,this.y=f+Math.random()*g,this},setRotation:function(l){return l===void 0&&(l=0),this.rotation=l,this},setAngle:function(l){return l===void 0&&(l=0),this.angle=l,this},setScale:function(l,f){return l===void 0&&(l=1),f===void 0&&(f=l),this.scaleX=l,this.scaleY=f,this},setX:function(l){return l===void 0&&(l=0),this.x=l,this},setY:function(l){return l===void 0&&(l=0),this.y=l,this},setZ:function(l){return l===void 0&&(l=0),this.z=l,this},setW:function(l){return l===void 0&&(l=0),this.w=l,this},getLocalTransformMatrix:function(l){return l===void 0&&(l=new u),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(l,f){l===void 0&&(l=new u);var m=this.parentContainer;if(!m)return this.getLocalTransformMatrix(l);for(f||(f=new u),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);m;)f.applyITRS(m.x,m.y,m._rotation,m._scaleX,m._scaleY),f.multiply(l,l),m=m.parentContainer;return l},getLocalPoint:function(l,f,m,g){m||(m=new s),g||(g=this.scene.sys.cameras.main);var p=g.scrollX,y=g.scrollY,S=l+p*this.scrollFactorX-p,C=f+y*this.scrollFactorY-y;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(S,C,m):n(S,C,this.x,this.y,this.rotation,this.scaleX,this.scaleY,m),this._originComponent&&(m.x+=this._displayOriginX,m.y+=this._displayOriginY),m},getParentRotation:function(){for(var l=0,f=this.parentContainer;f;)l+=f.rotation,f=f.parentContainer;return l}};h.exports=d},61340:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(36383),n=e(26099),r=new i({initialize:function(s,o,d,l,f,m){s===void 0&&(s=1),o===void 0&&(o=0),d===void 0&&(d=0),l===void 0&&(l=1),f===void 0&&(f=0),m===void 0&&(m=0),this.matrix=new Float32Array([s,o,d,l,f,m,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(a){this.matrix[0]=a}},b:{get:function(){return this.matrix[1]},set:function(a){this.matrix[1]=a}},c:{get:function(){return this.matrix[2]},set:function(a){this.matrix[2]=a}},d:{get:function(){return this.matrix[3]},set:function(a){this.matrix[3]=a}},e:{get:function(){return this.matrix[4]},set:function(a){this.matrix[4]=a}},f:{get:function(){return this.matrix[5]},set:function(a){this.matrix[5]=a}},tx:{get:function(){return this.matrix[4]},set:function(a){this.matrix[4]=a}},ty:{get:function(){return this.matrix[5]},set:function(a){this.matrix[5]=a}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var a=this.matrix,s=a[0],o=a[1],d=a[2],l=a[3];return s||o?o>0?Math.acos(s/this.scaleX):-Math.acos(s/this.scaleX):d||l?u.TAU-(l>0?Math.acos(-d/this.scaleY):-Math.acos(d/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var a=this.matrix;return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,this},translate:function(a,s){var o=this.matrix;return o[4]=o[0]*a+o[2]*s+o[4],o[5]=o[1]*a+o[3]*s+o[5],this},scale:function(a,s){var o=this.matrix;return o[0]*=a,o[1]*=a,o[2]*=s,o[3]*=s,this},rotate:function(a){var s=Math.sin(a),o=Math.cos(a),d=this.matrix,l=d[0],f=d[1],m=d[2],g=d[3];return d[0]=l*o+m*s,d[1]=f*o+g*s,d[2]=l*-s+m*o,d[3]=f*-s+g*o,this},multiply:function(a,s){var o=this.matrix,d=a.matrix,l=o[0],f=o[1],m=o[2],g=o[3],p=o[4],y=o[5],S=d[0],C=d[1],A=d[2],M=d[3],L=d[4],P=d[5],O=s===void 0?o:s.matrix;return O[0]=S*l+C*m,O[1]=S*f+C*g,O[2]=A*l+M*m,O[3]=A*f+M*g,O[4]=L*l+P*m+p,O[5]=L*f+P*g+y,O},multiplyWithOffset:function(a,s,o){var d=this.matrix,l=a.matrix,f=d[0],m=d[1],g=d[2],p=d[3],y=d[4],S=d[5],C=s*f+o*g+y,A=s*m+o*p+S,M=l[0],L=l[1],P=l[2],O=l[3],D=l[4],I=l[5];return d[0]=M*f+L*g,d[1]=M*m+L*p,d[2]=P*f+O*g,d[3]=P*m+O*p,d[4]=D*f+I*g+C,d[5]=D*m+I*p+A,this},transform:function(a,s,o,d,l,f){var m=this.matrix,g=m[0],p=m[1],y=m[2],S=m[3],C=m[4],A=m[5];return m[0]=a*g+s*y,m[1]=a*p+s*S,m[2]=o*g+d*y,m[3]=o*p+d*S,m[4]=l*g+f*y+C,m[5]=l*p+f*S+A,this},transformPoint:function(a,s,o){o===void 0&&(o={x:0,y:0});var d=this.matrix,l=d[0],f=d[1],m=d[2],g=d[3],p=d[4],y=d[5];return o.x=a*l+s*m+p,o.y=a*f+s*g+y,o},invert:function(){var a=this.matrix,s=a[0],o=a[1],d=a[2],l=a[3],f=a[4],m=a[5],g=s*l-o*d;return a[0]=l/g,a[1]=-o/g,a[2]=-d/g,a[3]=s/g,a[4]=(d*m-l*f)/g,a[5]=-(s*m-o*f)/g,this},copyFrom:function(a){var s=this.matrix;return s[0]=a.a,s[1]=a.b,s[2]=a.c,s[3]=a.d,s[4]=a.e,s[5]=a.f,this},copyFromArray:function(a){var s=this.matrix;return s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],s[4]=a[4],s[5]=a[5],this},copyToContext:function(a){var s=this.matrix;return a.transform(s[0],s[1],s[2],s[3],s[4],s[5]),a},setToContext:function(a){return a.setTransform(this),a},copyToArray:function(a){var s=this.matrix;return a===void 0?a=[s[0],s[1],s[2],s[3],s[4],s[5]]:(a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a[4]=s[4],a[5]=s[5]),a},setTransform:function(a,s,o,d,l,f){var m=this.matrix;return m[0]=a,m[1]=s,m[2]=o,m[3]=d,m[4]=l,m[5]=f,this},decomposeMatrix:function(){var a=this.decomposedMatrix,s=this.matrix,o=s[0],d=s[1],l=s[2],f=s[3],m=o*f-d*l;if(a.translateX=s[4],a.translateY=s[5],o||d){var g=Math.sqrt(o*o+d*d);a.rotation=d>0?Math.acos(o/g):-Math.acos(o/g),a.scaleX=g,a.scaleY=m/g}else if(l||f){var p=Math.sqrt(l*l+f*f);a.rotation=Math.PI*.5-(f>0?Math.acos(-l/p):-Math.acos(l/p)),a.scaleX=m/p,a.scaleY=p}else a.rotation=0,a.scaleX=0,a.scaleY=0;return a},applyITRS:function(a,s,o,d,l){var f=this.matrix,m=Math.sin(o),g=Math.cos(o);return f[4]=a,f[5]=s,f[0]=g*d,f[1]=m*d,f[2]=-m*l,f[3]=g*l,this},applyInverse:function(a,s,o){o===void 0&&(o=new n);var d=this.matrix,l=d[0],f=d[1],m=d[2],g=d[3],p=d[4],y=d[5],S=1/(l*g+m*-f);return o.x=g*S*a+-m*S*s+(y*m-p*g)*S,o.y=l*S*s+-f*S*a+(-y*l+p*f)*S,o},setQuad:function(a,s,o,d,l,f){l===void 0&&(l=!1),f===void 0&&(f=this.quad);var m=this.matrix,g=m[0],p=m[1],y=m[2],S=m[3],C=m[4],A=m[5],M=a*g+s*y+C,L=a*p+s*S+A,P=a*g+d*y+C,O=a*p+d*S+A,D=o*g+d*y+C,I=o*p+d*S+A,F=o*g+s*y+C,H=o*p+s*S+A;if(l){var k=Math.floor(M+.5),W=Math.floor(L+.5),$=k-M,K=W-L;f[0]=k,f[1]=W,f[2]=P+$,f[3]=O+K,f[4]=D+$,f[5]=I+K,f[6]=F+$,f[7]=H+K}else f[0]=M,f[1]=L,f[2]=P,f[3]=O,f[4]=D,f[5]=I,f[6]=F,f[7]=H;return f},getX:function(a,s){return a*this.a+s*this.c+this.e},getY:function(a,s){return a*this.b+s*this.d+this.f},getXRound:function(a,s,o){var d=this.getX(a,s);return o&&(d=Math.floor(d+.5)),d},getYRound:function(a,s,o){var d=this.getY(a,s);return o&&(d=Math.floor(d+.5)),d},getCSSMatrix:function(){var a=this.matrix;return"matrix("+a[0]+","+a[1]+","+a[2]+","+a[3]+","+a[4]+","+a[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});h.exports=r},59715:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(i){i?(this._visible=!0,this.renderFlags|=w):(this._visible=!1,this.renderFlags&=~w)}},setVisible:function(i){return this.visible=i,this}};h.exports=e},31401:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Alpha:e(16005),AlphaSingle:e(88509),BlendMode:e(90065),ComputedSize:e(94215),Crop:e(61683),Depth:e(89272),Flip:e(54434),FX:e(47059),GetBounds:e(8004),Mask:e(8573),Origin:e(27387),PathFollower:e(37640),Pipeline:e(72699),PostPipeline:e(17581),ScrollFactor:e(80227),Size:e(16736),Texture:e(37726),TextureCrop:e(79812),Tint:e(27472),ToJSON:e(53774),Transform:e(16901),TransformMatrix:e(61340),Visible:e(59715)}},31559:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37105),u=e(10312),n=e(83419),r=e(31401),a=e(51708),s=e(95643),o=e(87841),d=e(29959),l=e(36899),f=e(26099),m=new r.TransformMatrix,g=new n({Extends:s,Mixins:[r.AlphaSingle,r.BlendMode,r.ComputedSize,r.Depth,r.Mask,r.PostPipeline,r.Transform,r.Visible,d],initialize:function(y,S,C,A){s.call(this,y,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new r.TransformMatrix,this._sortKey="",this._sysEvents=y.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(S,C),this.setBlendMode(u.SKIP_CHECK),A&&this.add(A)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(p){return p===void 0&&(p=!0),this.exclusive=p,this},getBounds:function(p){if(p===void 0&&(p=new o),p.setTo(this.x,this.y,0,0),this.parentContainer){var y=this.parentContainer.getBoundsTransformMatrix(),S=y.transformPoint(this.x,this.y);p.setTo(S.x,S.y,0,0)}if(this.list.length>0){var C=this.list,A=new o,M=!1;p.setEmpty();for(var L=0;L<C.length;L++){var P=C[L];P.getBounds&&(P.getBounds(A),M?l(A,p,p):(p.setTo(A.x,A.y,A.width,A.height),M=!0))}}return p},addHandler:function(p){p.once(a.DESTROY,this.onChildDestroyed,this),this.exclusive&&(p.parentContainer&&p.parentContainer.remove(p),p.parentContainer=this,p.removeFromDisplayList(),p.addedToScene())},removeHandler:function(p){p.off(a.DESTROY,this.remove,this),this.exclusive&&(p.parentContainer=null,p.removedFromScene(),p.addToDisplayList())},pointToContainer:function(p,y){y===void 0&&(y=new f),this.parentContainer?this.parentContainer.pointToContainer(p,y):(y.x=p.x,y.y=p.y);var S=m;return S.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),S.invert(),S.transformPoint(p.x,p.y,y),y},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(m,this.localTransform)},add:function(p){return i.Add(this.list,p,this.maxSize,this.addHandler,this),this},addAt:function(p,y){return i.AddAt(this.list,p,y,this.maxSize,this.addHandler,this),this},getAt:function(p){return this.list[p]},getIndex:function(p){return this.list.indexOf(p)},sort:function(p,y){return p?(y===void 0&&(y=function(S,C){return S[p]-C[p]}),i.StableSort(this.list,y),this):this},getByName:function(p){return i.GetFirst(this.list,"name",p)},getRandom:function(p,y){return i.GetRandom(this.list,p,y)},getFirst:function(p,y,S,C){return i.GetFirst(this.list,p,y,S,C)},getAll:function(p,y,S,C){return i.GetAll(this.list,p,y,S,C)},count:function(p,y,S,C){return i.CountAllMatching(this.list,p,y,S,C)},swap:function(p,y){return i.Swap(this.list,p,y),this},moveTo:function(p,y){return i.MoveTo(this.list,p,y),this},moveAbove:function(p,y){return i.MoveAbove(this.list,p,y),this},moveBelow:function(p,y){return i.MoveBelow(this.list,p,y),this},remove:function(p,y){var S=i.Remove(this.list,p,this.removeHandler,this);if(y&&S){Array.isArray(S)||(S=[S]);for(var C=0;C<S.length;C++)S[C].destroy()}return this},removeAt:function(p,y){var S=i.RemoveAt(this.list,p,this.removeHandler,this);return y&&S&&S.destroy(),this},removeBetween:function(p,y,S){var C=i.RemoveBetween(this.list,p,y,this.removeHandler,this);if(S)for(var A=0;A<C.length;A++)C[A].destroy();return this},removeAll:function(p){var y=this.list;if(p){for(var S=0;S<y.length;S++)y[S]&&y[S].scene&&(y[S].off(a.DESTROY,this.onChildDestroyed,this),y[S].destroy());this.list=[]}else i.RemoveBetween(y,0,y.length,this.removeHandler,this);return this},bringToTop:function(p){return i.BringToTop(this.list,p),this},sendToBack:function(p){return i.SendToBack(this.list,p),this},moveUp:function(p){return i.MoveUp(this.list,p),this},moveDown:function(p){return i.MoveDown(this.list,p),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return i.Shuffle(this.list),this},replace:function(p,y,S){var C=i.Replace(this.list,p,y);return C&&(this.addHandler(y),this.removeHandler(p),S&&p.destroy()),this},exists:function(p){return this.list.indexOf(p)>-1},setAll:function(p,y,S,C){return i.SetAll(this.list,p,y,S,C),this},each:function(p,y){var S=[null],C,A=this.list.slice(),M=A.length;for(C=2;C<arguments.length;C++)S.push(arguments[C]);for(C=0;C<M;C++)S[0]=A[C],p.apply(y,S);return this},iterate:function(p,y){var S=[null],C;for(C=2;C<arguments.length;C++)S.push(arguments[C]);for(C=0;C<this.list.length;C++)S[0]=this.list[C],p.apply(y,S);return this},setScrollFactor:function(p,y,S){return y===void 0&&(y=p),S===void 0&&(S=!1),this.scrollFactorX=p,this.scrollFactorY=y,S&&(i.SetAll(this.list,"scrollFactorX",p),i.SetAll(this.list,"scrollFactorY",y)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(p){i.Remove(this.list,p),this.exclusive&&(p.parentContainer=null,p.removedFromScene())}});h.exports=g},53584:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){u.addToRenderList(i);var r=i.list;if(r.length!==0){var a=i.localTransform;n?(a.loadIdentity(),a.multiply(n),a.translate(i.x,i.y),a.rotate(i.rotation),a.scale(i.scaleX,i.scaleY)):a.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var s=i.blendMode!==-1;s||e.setBlendMode(0);var o=i._alpha,d=i.scrollFactorX,l=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(e,null,u);for(var f=0;f<r.length;f++){var m=r[f];if(m.willRender(u)){var g=m.alpha,p=m.scrollFactorX,y=m.scrollFactorY;!s&&m.blendMode!==e.currentBlendMode&&e.setBlendMode(m.blendMode),m.setScrollFactor(p*d,y*l),m.setAlpha(g*o),m.renderCanvas(e,m,u,a),m.setAlpha(g),m.setScrollFactor(p,y)}}i.mask&&i.mask.postRenderCanvas(e)}};h.exports=w},77143:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(31559),n=e(44603),r=e(23568),a=e(95540);n.register("container",function(s,o){s===void 0&&(s={});var d=r(s,"x",0),l=r(s,"y",0),f=a(s,"children",null),m=new u(this.scene,d,l,f);return o!==void 0&&(s.add=o),i(this.scene,m,s),m})},24961:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(31559),u=e(39429);u.register("container",function(n,r,a){return this.displayList.add(new i(this.scene,n,r,a))})},29959:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(72249),n=e(53584),h.exports={renderWebGL:u,renderCanvas:n}},72249:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){u.addToRenderList(i);var r=i.list,a=r.length;if(a!==0){var s=i.localTransform;n?(s.loadIdentity(),s.multiply(n),s.translate(i.x,i.y),s.rotate(i.rotation),s.scale(i.scaleX,i.scaleY)):s.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),e.pipelines.preBatch(i);var o=i.blendMode!==-1;o||e.setBlendMode(0);for(var d=i.alpha,l=i.scrollFactorX,f=i.scrollFactorY,m=0;m<a;m++){var g=r[m];if(g.willRender(u)){var p,y,S,C;if(g.alphaTopLeft!==void 0)p=g.alphaTopLeft,y=g.alphaTopRight,S=g.alphaBottomLeft,C=g.alphaBottomRight;else{var A=g.alpha;p=A,y=A,S=A,C=A}var M=g.scrollFactorX,L=g.scrollFactorY;!o&&g.blendMode!==e.currentBlendMode&&e.setBlendMode(g.blendMode);var P=g.mask;P&&P.preRenderWebGL(e,g,u);var O=g.type;O!==e.currentType&&(e.newType=!0,e.currentType=O),e.nextTypeMatch=m<a-1?r[m+1].type===e.currentType:!1,g.setScrollFactor(M*l,L*f),g.setAlpha(p*d,y*d,S*d,C*d),g.renderWebGL(e,g,u,s,i),g.setAlpha(p,y,S,C),g.setScrollFactor(M,L),P&&P.postRenderWebGL(e,u),e.newType=!1}}e.pipelines.postBatch(i)}};h.exports=w},47407:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31401),n=e(441),r=e(95643),a=e(41212),s=e(35846),o=e(44594),d=e(61369),l=new i({Extends:r,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Origin,u.ScrollFactor,u.Transform,u.Visible,n],initialize:function(m,g,p,y,S,C){r.call(this,m,"DOMElement"),this.parent=m.sys.game.domContainer,this.cache=m.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new d,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,p),typeof y=="string"?y[0]==="#"?this.setElement(y.substr(1),S,C):this.createElement(y,S,C):y&&this.setElement(y,S,C),m.sys.events.on(o.SLEEP,this.handleSceneEvent,this),m.sys.events.on(o.WAKE,this.handleSceneEvent,this),m.sys.events.on(o.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(f){var m=this.node,g=m.style;m&&(g.display=f.settings.visible?"block":"none")},setSkew:function(f,m){return f===void 0&&(f=0),m===void 0&&(m=f),this.skewX=f,this.skewY=m,this},setPerspective:function(f){return this.parent.style.perspective=f+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(f){this.parent.style.perspective=f+"px"}},addListener:function(f){if(this.node){f=f.split(" ");for(var m=0;m<f.length;m++)this.node.addEventListener(f[m],this.handler,!1)}return this},removeListener:function(f){if(this.node){f=f.split(" ");for(var m=0;m<f.length;m++)this.node.removeEventListener(f[m],this.handler)}return this},dispatchNativeEvent:function(f){this.emit(f.type,f)},createElement:function(f,m,g){return this.setElement(document.createElement(f),m,g)},setElement:function(f,m,g){this.removeElement();var p;if(typeof f=="string"?(f[0]==="#"&&(f=f.substr(1)),p=document.getElementById(f)):typeof f=="object"&&f.nodeType===1&&(p=f),!p)return this;if(this.node=p,m&&a(m))for(var y in m)p.style[y]=m[y];else typeof m=="string"&&(p.style=m);return p.style.zIndex="0",p.style.display="inline",p.style.position="absolute",p.phaser=this,this.parent&&this.parent.appendChild(p),g&&(p.innerText=g),this.updateSize()},createFromCache:function(f,m){var g=this.cache.get(f);return g&&this.createFromHTML(g,m),this},createFromHTML:function(f,m){m===void 0&&(m="div"),this.removeElement();var g=document.createElement(m);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=f,this.updateSize()},removeElement:function(){return this.node&&(s(this.node),this.node=null),this},updateSize:function(){var f=this.node,m=f.getBoundingClientRect();return this.width=f.clientWidth,this.height=f.clientHeight,this.displayWidth=m.width||0,this.displayHeight=m.height||0,this},getChildByProperty:function(f,m){if(this.node){for(var g=this.node.querySelectorAll("*"),p=0;p<g.length;p++)if(g[p][f]===m)return g[p]}return null},getChildByID:function(f){return this.getChildByProperty("id",f)},getChildByName:function(f){return this.getChildByProperty("name",f)},setClassName:function(f){return this.node&&(this.node.className=f,this.updateSize()),this},setText:function(f){return this.node&&(this.node.innerText=f,this.updateSize()),this},setHTML:function(f){return this.node&&(this.node.innerHTML=f,this.updateSize()),this},preRender:function(){var f=this.parentContainer,m=this.node;m&&f&&!f.willRender()&&(m.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(o.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(o.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(o.PRE_RENDER,this.preRender,this)}});h.exports=l},49381:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(47407),u=e(95643),n=e(61340),r=new n,a=new n,s=new n,o=function(d,l,f,m){if(l.node){var g=l.node.style,p=l.scene.sys.settings;if(!g||!p.visible||u.RENDER_MASK!==l.renderFlags||l.cameraFilter!==0&&l.cameraFilter&f.id||l.parentContainer&&!l.parentContainer.willRender()){g.display="none";return}var y=l.parentContainer,S=f.alpha*l.alpha;y&&(S*=y.alpha);var C=r,A=a,M=s,L=0,P=0,O="0%",D="0%";m?(L=l.width*l.scaleX*l.originX,P=l.height*l.scaleY*l.originY,A.applyITRS(l.x-L,l.y-P,l.rotation,l.scaleX,l.scaleY),C.copyFrom(f.matrix),C.multiplyWithOffset(m,-f.scrollX*l.scrollFactorX,-f.scrollY*l.scrollFactorY),A.e=l.x-L,A.f=l.y-P,C.multiply(A,M)):(L=l.width*l.originX,P=l.height*l.originY,A.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),C.copyFrom(f.matrix),O=100*l.originX+"%",D=100*l.originY+"%",A.e-=f.scrollX*l.scrollFactorX,A.f-=f.scrollY*l.scrollFactorY,C.multiply(A,M),M.e-=L,M.f-=P),l.transformOnly||(g.display="block",g.opacity=S,g.zIndex=l._depth,g.pointerEvents=l.pointerEvents,g.mixBlendMode=i[l._blendMode]),g.transform=M.getCSSMatrix()+" skew("+l.skewX+"rad, "+l.skewY+"rad) rotate3d("+l.rotate3d.x+","+l.rotate3d.y+","+l.rotate3d.z+","+l.rotate3d.w+l.rotate3dAngle+")",g.transformOrigin=O+" "+D}};h.exports=o},2611:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(3069),u=e(39429);u.register("dom",function(n,r,a,s,o){var d=new i(this.scene,n,r,a,s,o);return this.displayList.add(d),d})},441:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(49381),n=e(49381),h.exports={renderWebGL:u,renderCanvas:n}},62980:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addedtoscene"},41337:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},44947:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removedfromscene"},49358:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},35163:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="created"},97249:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="error"},19483:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="locked"},56059:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loop"},26772:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="metadata"},64437:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="playing"},83411:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="play"},75780:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="seeked"},67799:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="seeking"},63500:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stalled"},55541:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stop"},53208:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="textureready"},4992:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="unlocked"},12:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="unsupported"},51708:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADDED_TO_SCENE:e(62980),DESTROY:e(41337),REMOVED_FROM_SCENE:e(44947),VIDEO_COMPLETE:e(49358),VIDEO_CREATED:e(35163),VIDEO_ERROR:e(97249),VIDEO_LOCKED:e(19483),VIDEO_LOOP:e(56059),VIDEO_METADATA:e(26772),VIDEO_PLAY:e(83411),VIDEO_PLAYING:e(64437),VIDEO_SEEKED:e(75780),VIDEO_SEEKING:e(67799),VIDEO_STALLED:e(63500),VIDEO_STOP:e(55541),VIDEO_TEXTURE:e(53208),VIDEO_UNLOCKED:e(4992),VIDEO_UNSUPPORTED:e(12)}},42421:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31401),n=e(95643),r=e(64993),a=new i({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.Origin,u.ScrollFactor,u.Size,u.Texture,u.Tint,u.Transform,u.Visible,r],initialize:function(o){n.call(this,o,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});h.exports=a},70217:()=>{},56315:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(42421),u=e(39429);u.register("extern",function(){var n=new i(this.scene);return this.displayList.add(n),n})},64993:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(80287),n=e(70217),h.exports={renderWebGL:u,renderCanvas:n}},80287:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=function(n,r,a,s){n.pipelines.clear();var o=i(r,a,s).calc;r.render.call(r,n,a,o),n.pipelines.rebind()};h.exports=u},85592:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(71911),u=e(83419),n=e(85592),r=e(31401),a=e(8497),s=e(95643),o=e(95540),d=e(35154),l=e(36383),f=e(84503),m=new u({Extends:s,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.Transform,r.Visible,r.ScrollFactor,f],initialize:function(p,y){var S=d(y,"x",0),C=d(y,"y",0);s.call(this,p,"Graphics"),this.setPosition(S,C),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(y)},setDefaultStyles:function(g){return d(g,"lineStyle",null)&&(this.defaultStrokeWidth=d(g,"lineStyle.width",1),this.defaultStrokeColor=d(g,"lineStyle.color",16777215),this.defaultStrokeAlpha=d(g,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),d(g,"fillStyle",null)&&(this.defaultFillColor=d(g,"fillStyle.color",16777215),this.defaultFillAlpha=d(g,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(g,p,y){return y===void 0&&(y=1),this.commandBuffer.push(n.LINE_STYLE,g,p,y),this._lineWidth=g,this},fillStyle:function(g,p){return p===void 0&&(p=1),this.commandBuffer.push(n.FILL_STYLE,g,p),this},fillGradientStyle:function(g,p,y,S,C,A,M,L){return C===void 0&&(C=1),A===void 0&&(A=C),M===void 0&&(M=C),L===void 0&&(L=C),this.commandBuffer.push(n.GRADIENT_FILL_STYLE,C,A,M,L,g,p,y,S),this},lineGradientStyle:function(g,p,y,S,C,A){return A===void 0&&(A=1),this.commandBuffer.push(n.GRADIENT_LINE_STYLE,g,A,p,y,S,C),this},beginPath:function(){return this.commandBuffer.push(n.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(n.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(n.FILL_PATH),this},fill:function(){return this.commandBuffer.push(n.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(n.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(n.STROKE_PATH),this},fillCircleShape:function(g){return this.fillCircle(g.x,g.y,g.radius)},strokeCircleShape:function(g){return this.strokeCircle(g.x,g.y,g.radius)},fillCircle:function(g,p,y){return this.beginPath(),this.arc(g,p,y,0,l.PI2),this.fillPath(),this},strokeCircle:function(g,p,y){return this.beginPath(),this.arc(g,p,y,0,l.PI2),this.strokePath(),this},fillRectShape:function(g){return this.fillRect(g.x,g.y,g.width,g.height)},strokeRectShape:function(g){return this.strokeRect(g.x,g.y,g.width,g.height)},fillRect:function(g,p,y,S){return this.commandBuffer.push(n.FILL_RECT,g,p,y,S),this},strokeRect:function(g,p,y,S){var C=this._lineWidth/2,A=g-C,M=g+C;return this.beginPath(),this.moveTo(g,p),this.lineTo(g,p+S),this.strokePath(),this.beginPath(),this.moveTo(g+y,p),this.lineTo(g+y,p+S),this.strokePath(),this.beginPath(),this.moveTo(A,p),this.lineTo(M+y,p),this.strokePath(),this.beginPath(),this.moveTo(A,p+S),this.lineTo(M+y,p+S),this.strokePath(),this},fillRoundedRect:function(g,p,y,S,C){C===void 0&&(C=20);var A=C,M=C,L=C,P=C;typeof C!="number"&&(A=o(C,"tl",20),M=o(C,"tr",20),L=o(C,"bl",20),P=o(C,"br",20));var O=A>=0,D=M>=0,I=L>=0,F=P>=0;return A=Math.abs(A),M=Math.abs(M),L=Math.abs(L),P=Math.abs(P),this.beginPath(),this.moveTo(g+A,p),this.lineTo(g+y-M,p),D?this.arc(g+y-M,p+M,M,-l.TAU,0):this.arc(g+y,p,M,Math.PI,l.TAU,!0),this.lineTo(g+y,p+S-P),F?this.arc(g+y-P,p+S-P,P,0,l.TAU):this.arc(g+y,p+S,P,-l.TAU,Math.PI,!0),this.lineTo(g+L,p+S),I?this.arc(g+L,p+S-L,L,l.TAU,Math.PI):this.arc(g,p+S,L,0,-l.TAU,!0),this.lineTo(g,p+A),O?this.arc(g+A,p+A,A,-Math.PI,-l.TAU):this.arc(g,p,A,l.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(g,p,y,S,C){C===void 0&&(C=20);var A=C,M=C,L=C,P=C,O=Math.min(y,S)/2;typeof C!="number"&&(A=o(C,"tl",20),M=o(C,"tr",20),L=o(C,"bl",20),P=o(C,"br",20));var D=A>=0,I=M>=0,F=L>=0,H=P>=0;return A=Math.min(Math.abs(A),O),M=Math.min(Math.abs(M),O),L=Math.min(Math.abs(L),O),P=Math.min(Math.abs(P),O),this.beginPath(),this.moveTo(g+A,p),this.lineTo(g+y-M,p),this.moveTo(g+y-M,p),I?this.arc(g+y-M,p+M,M,-l.TAU,0):this.arc(g+y,p,M,Math.PI,l.TAU,!0),this.lineTo(g+y,p+S-P),this.moveTo(g+y,p+S-P),H?this.arc(g+y-P,p+S-P,P,0,l.TAU):this.arc(g+y,p+S,P,-l.TAU,Math.PI,!0),this.lineTo(g+L,p+S),this.moveTo(g+L,p+S),F?this.arc(g+L,p+S-L,L,l.TAU,Math.PI):this.arc(g,p+S,L,0,-l.TAU,!0),this.lineTo(g,p+A),this.moveTo(g,p+A),D?this.arc(g+A,p+A,A,-Math.PI,-l.TAU):this.arc(g,p,A,l.TAU,0,!0),this.strokePath(),this},fillPointShape:function(g,p){return this.fillPoint(g.x,g.y,p)},fillPoint:function(g,p,y){return!y||y<1?y=1:(g-=y/2,p-=y/2),this.commandBuffer.push(n.FILL_RECT,g,p,y,y),this},fillTriangleShape:function(g){return this.fillTriangle(g.x1,g.y1,g.x2,g.y2,g.x3,g.y3)},strokeTriangleShape:function(g){return this.strokeTriangle(g.x1,g.y1,g.x2,g.y2,g.x3,g.y3)},fillTriangle:function(g,p,y,S,C,A){return this.commandBuffer.push(n.FILL_TRIANGLE,g,p,y,S,C,A),this},strokeTriangle:function(g,p,y,S,C,A){return this.commandBuffer.push(n.STROKE_TRIANGLE,g,p,y,S,C,A),this},strokeLineShape:function(g){return this.lineBetween(g.x1,g.y1,g.x2,g.y2)},lineBetween:function(g,p,y,S){return this.beginPath(),this.moveTo(g,p),this.lineTo(y,S),this.strokePath(),this},lineTo:function(g,p){return this.commandBuffer.push(n.LINE_TO,g,p),this},moveTo:function(g,p){return this.commandBuffer.push(n.MOVE_TO,g,p),this},strokePoints:function(g,p,y,S){p===void 0&&(p=!1),y===void 0&&(y=!1),S===void 0&&(S=g.length),this.beginPath(),this.moveTo(g[0].x,g[0].y);for(var C=1;C<S;C++)this.lineTo(g[C].x,g[C].y);return p&&this.lineTo(g[0].x,g[0].y),y&&this.closePath(),this.strokePath(),this},fillPoints:function(g,p,y,S){p===void 0&&(p=!1),y===void 0&&(y=!1),S===void 0&&(S=g.length),this.beginPath(),this.moveTo(g[0].x,g[0].y);for(var C=1;C<S;C++)this.lineTo(g[C].x,g[C].y);return p&&this.lineTo(g[0].x,g[0].y),y&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(g,p){p===void 0&&(p=32);var y=g.getPoints(p);return this.strokePoints(y,!0)},strokeEllipse:function(g,p,y,S,C){C===void 0&&(C=32);var A=new a(g,p,y,S),M=A.getPoints(C);return this.strokePoints(M,!0)},fillEllipseShape:function(g,p){p===void 0&&(p=32);var y=g.getPoints(p);return this.fillPoints(y,!0)},fillEllipse:function(g,p,y,S,C){C===void 0&&(C=32);var A=new a(g,p,y,S),M=A.getPoints(C);return this.fillPoints(M,!0)},arc:function(g,p,y,S,C,A,M){return A===void 0&&(A=!1),M===void 0&&(M=0),this.commandBuffer.push(n.ARC,g,p,y,S,C,A,M),this},slice:function(g,p,y,S,C,A,M){return A===void 0&&(A=!1),M===void 0&&(M=0),this.commandBuffer.push(n.BEGIN_PATH),this.commandBuffer.push(n.MOVE_TO,g,p),this.commandBuffer.push(n.ARC,g,p,y,S,C,A,M),this.commandBuffer.push(n.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(n.SAVE),this},restore:function(){return this.commandBuffer.push(n.RESTORE),this},translateCanvas:function(g,p){return this.commandBuffer.push(n.TRANSLATE,g,p),this},scaleCanvas:function(g,p){return this.commandBuffer.push(n.SCALE,g,p),this},rotateCanvas:function(g){return this.commandBuffer.push(n.ROTATE,g),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(g,p,y){var S=this.scene.sys,C=S.game.renderer;p===void 0&&(p=S.scale.width),y===void 0&&(y=S.scale.height),m.TargetCamera.setScene(this.scene),m.TargetCamera.setViewport(0,0,p,y),m.TargetCamera.scrollX=this.x,m.TargetCamera.scrollY=this.y;var A,M,L={willReadFrequently:!0};if(typeof g=="string")if(S.textures.exists(g)){A=S.textures.get(g);var P=A.getSourceImage();P instanceof HTMLCanvasElement&&(M=P.getContext("2d",L))}else A=S.textures.createCanvas(g,p,y),M=A.getSourceImage().getContext("2d",L);else g instanceof HTMLCanvasElement&&(M=g.getContext("2d",L));return M&&(this.renderCanvas(C,this,m.TargetCamera,null,M,!1),A&&A.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});m.TargetCamera=new i,h.exports=m},32768:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(85592),u=e(20926),n=function(r,a,s,o,d,l){var f=a.commandBuffer,m=f.length,g=d||r.currentContext;if(!(m===0||!u(r,g,a,s,o))){s.addToRenderList(a);var p=1,y=1,S=0,C=0,A=1,M=0,L=0,P=0;g.beginPath();for(var O=0;O<m;++O){var D=f[O];switch(D){case i.ARC:g.arc(f[O+1],f[O+2],f[O+3],f[O+4],f[O+5],f[O+6]),O+=7;break;case i.LINE_STYLE:A=f[O+1],S=f[O+2],p=f[O+3],M=(S&16711680)>>>16,L=(S&65280)>>>8,P=S&255,g.strokeStyle="rgba("+M+","+L+","+P+","+p+")",g.lineWidth=A,O+=3;break;case i.FILL_STYLE:C=f[O+1],y=f[O+2],M=(C&16711680)>>>16,L=(C&65280)>>>8,P=C&255,g.fillStyle="rgba("+M+","+L+","+P+","+y+")",O+=2;break;case i.BEGIN_PATH:g.beginPath();break;case i.CLOSE_PATH:g.closePath();break;case i.FILL_PATH:l||g.fill();break;case i.STROKE_PATH:l||g.stroke();break;case i.FILL_RECT:l?g.rect(f[O+1],f[O+2],f[O+3],f[O+4]):g.fillRect(f[O+1],f[O+2],f[O+3],f[O+4]),O+=4;break;case i.FILL_TRIANGLE:g.beginPath(),g.moveTo(f[O+1],f[O+2]),g.lineTo(f[O+3],f[O+4]),g.lineTo(f[O+5],f[O+6]),g.closePath(),l||g.fill(),O+=6;break;case i.STROKE_TRIANGLE:g.beginPath(),g.moveTo(f[O+1],f[O+2]),g.lineTo(f[O+3],f[O+4]),g.lineTo(f[O+5],f[O+6]),g.closePath(),l||g.stroke(),O+=6;break;case i.LINE_TO:g.lineTo(f[O+1],f[O+2]),O+=2;break;case i.MOVE_TO:g.moveTo(f[O+1],f[O+2]),O+=2;break;case i.LINE_FX_TO:g.lineTo(f[O+1],f[O+2]),O+=5;break;case i.MOVE_FX_TO:g.moveTo(f[O+1],f[O+2]),O+=5;break;case i.SAVE:g.save();break;case i.RESTORE:g.restore();break;case i.TRANSLATE:g.translate(f[O+1],f[O+2]),O+=2;break;case i.SCALE:g.scale(f[O+1],f[O+2]),O+=2;break;case i.ROTATE:g.rotate(f[O+1]),O+=1;break;case i.GRADIENT_FILL_STYLE:O+=5;break;case i.GRADIENT_LINE_STYLE:O+=6;break}}g.restore()}};h.exports=n},87079:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(44603),u=e(43831);i.register("graphics",function(n,r){n===void 0&&(n={}),r!==void 0&&(n.add=r);var a=new u(this.scene,n);return n.add&&this.scene.sys.displayList.add(a),a})},1201:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43831),u=e(39429);u.register("graphics",function(n){return this.displayList.add(new i(this.scene,n))})},84503:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(77545),n=e(32768),n=e(32768),h.exports={renderWebGL:u,renderCanvas:n}},77545:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(85592),u=e(91296),n=e(61340),r=e(70554),a=function(f,m,g){this.x=f,this.y=m,this.width=g},s=function(f,m,g){this.points=[],this.pointsLength=1,this.points[0]=new a(f,m,g)},o=[],d=new n,l=function(f,m,g,p){if(m.commandBuffer.length!==0){g.addToRenderList(m);var y=f.pipelines.set(m.pipeline,m);f.pipelines.preBatch(m);for(var S=u(m,g,p).calc,C=d.loadIdentity(),A=m.commandBuffer,M=g.alpha*m.alpha,L=1,P=y.fillTint,O=y.strokeTint,D=0,I=0,F=0,H=.01,k=Math.PI*2,W,$=[],K=0,Z=!0,X=null,j=r.getTintAppendFloatAlpha,Y=0;Y<A.length;Y++)switch(W=A[Y],W){case i.BEGIN_PATH:{$.length=0,X=null,Z=!0;break}case i.CLOSE_PATH:{Z=!1,X&&X.points.length&&X.points.push(X.points[0]);break}case i.FILL_PATH:{for(K=0;K<$.length;K++)y.batchFillPath($[K].points,C,S);break}case i.STROKE_PATH:{for(K=0;K<$.length;K++)y.batchStrokePath($[K].points,L,Z,C,S);break}case i.LINE_STYLE:{L=A[++Y];var U=A[++Y],J=A[++Y]*M,q=j(U,J);O.TL=q,O.TR=q,O.BL=q,O.BR=q;break}case i.FILL_STYLE:{var _=A[++Y],te=A[++Y]*M,se=j(_,te);P.TL=se,P.TR=se,P.BL=se,P.BR=se;break}case i.GRADIENT_FILL_STYLE:{var ne=A[++Y]*M,he=A[++Y]*M,le=A[++Y]*M,ge=A[++Y]*M;P.TL=j(A[++Y],ne),P.TR=j(A[++Y],he),P.BL=j(A[++Y],le),P.BR=j(A[++Y],ge);break}case i.GRADIENT_LINE_STYLE:{L=A[++Y];var re=A[++Y]*M;O.TL=j(A[++Y],re),O.TR=j(A[++Y],re),O.BL=j(A[++Y],re),O.BR=j(A[++Y],re);break}case i.ARC:{var fe=0,Ae=A[++Y],Ie=A[++Y],Ne=A[++Y],Fe=A[++Y],Se=A[++Y],Oe=A[++Y],Be=A[++Y];for(Se-=Fe,Oe?Se<-k?Se=-k:Se>0&&(Se=-k+Se%k):Se>k?Se=k:Se<0&&(Se=k+Se%k),X===null&&(X=new s(Ae+Math.cos(Fe)*Ne,Ie+Math.sin(Fe)*Ne,L),$.push(X),fe+=H);fe<1+Be;)F=Se*fe+Fe,D=Ae+Math.cos(F)*Ne,I=Ie+Math.sin(F)*Ne,X.points.push(new a(D,I,L)),fe+=H;F=Se+Fe,D=Ae+Math.cos(F)*Ne,I=Ie+Math.sin(F)*Ne,X.points.push(new a(D,I,L));break}case i.FILL_RECT:{y.batchFillRect(A[++Y],A[++Y],A[++Y],A[++Y],C,S);break}case i.FILL_TRIANGLE:{y.batchFillTriangle(A[++Y],A[++Y],A[++Y],A[++Y],A[++Y],A[++Y],C,S);break}case i.STROKE_TRIANGLE:{y.batchStrokeTriangle(A[++Y],A[++Y],A[++Y],A[++Y],A[++Y],A[++Y],L,C,S);break}case i.LINE_TO:{X!==null?X.points.push(new a(A[++Y],A[++Y],L)):(X=new s(A[++Y],A[++Y],L),$.push(X));break}case i.MOVE_TO:{X=new s(A[++Y],A[++Y],L),$.push(X);break}case i.SAVE:{o.push(C.copyToArray());break}case i.RESTORE:{C.copyFromArray(o.pop());break}case i.TRANSLATE:{Ae=A[++Y],Ie=A[++Y],C.translate(Ae,Ie);break}case i.SCALE:{Ae=A[++Y],Ie=A[++Y],C.scale(Ae,Ie);break}case i.ROTATE:{C.rotate(A[++Y]);break}}f.pipelines.postBatch(m)}};h.exports=l},26479:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(61061),u=e(83419),n=e(51708),r=e(50792),a=e(46710),s=e(95540),o=e(35154),d=e(97022),l=e(41212),f=e(88492),m=e(35072),g=e(68287),p=new u({Extends:r,initialize:function(S,C,A){r.call(this),A?C&&!Array.isArray(C)&&(C=[C]):Array.isArray(C)?l(C[0])&&(A=C,C=null):l(C)&&(A=C,C=null),this.scene=S,this.children=new m,this.isParent=!0,this.type="Group",this.classType=s(A,"classType",g),this.name=s(A,"name",""),this.active=s(A,"active",!0),this.maxSize=s(A,"maxSize",-1),this.defaultKey=s(A,"defaultKey",null),this.defaultFrame=s(A,"defaultFrame",null),this.runChildUpdate=s(A,"runChildUpdate",!1),this.createCallback=s(A,"createCallback",null),this.removeCallback=s(A,"removeCallback",null),this.createMultipleCallback=s(A,"createMultipleCallback",null),this.internalCreateCallback=s(A,"internalCreateCallback",null),this.internalRemoveCallback=s(A,"internalRemoveCallback",null),C&&this.addMultiple(C),A&&this.createMultiple(A),this.on(n.ADDED_TO_SCENE,this.addedToScene,this),this.on(n.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(y,S,C,A,M,L){if(y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=this.defaultKey),A===void 0&&(A=this.defaultFrame),M===void 0&&(M=!0),L===void 0&&(L=!0),this.isFull())return null;var P=new this.classType(this.scene,y,S,C,A);return P.addToDisplayList(this.scene.sys.displayList),P.addToUpdateList(),P.visible=M,P.setActive(L),this.add(P),P},createMultiple:function(y){if(this.isFull())return[];Array.isArray(y)||(y=[y]);var S=[];if(y[0].key)for(var C=0;C<y.length;C++){var A=this.createFromConfig(y[C]);S=S.concat(A)}return S},createFromConfig:function(y){if(this.isFull())return[];this.classType=s(y,"classType",this.classType);var S=s(y,"key",void 0),C=s(y,"frame",null),A=s(y,"visible",!0),M=s(y,"active",!0),L=[];if(S===void 0)return L;Array.isArray(S)||(S=[S]),Array.isArray(C)||(C=[C]);var P=s(y,"repeat",0),O=s(y,"randomKey",!1),D=s(y,"randomFrame",!1),I=s(y,"yoyo",!1),F=s(y,"quantity",!1),H=s(y,"frameQuantity",1),k=s(y,"max",0),W=f(S,C,{max:k,qty:F||H,random:O,randomB:D,repeat:P,yoyo:I});y.createCallback&&(this.createCallback=y.createCallback),y.removeCallback&&(this.removeCallback=y.removeCallback),y.internalCreateCallback&&(this.internalCreateCallback=y.internalCreateCallback),y.internalRemoveCallback&&(this.internalRemoveCallback=y.internalRemoveCallback);for(var $=0;$<W.length;$++){var K=this.create(0,0,W[$].a,W[$].b,A,M);if(!K)break;L.push(K)}if(d(y,"setXY")){var Z=o(y,"setXY.x",0),X=o(y,"setXY.y",0),j=o(y,"setXY.stepX",0),Y=o(y,"setXY.stepY",0);i.SetXY(L,Z,X,j,Y)}if(d(y,"setRotation")){var U=o(y,"setRotation.value",0),J=o(y,"setRotation.step",0);i.SetRotation(L,U,J)}if(d(y,"setScale")){var q=o(y,"setScale.x",1),_=o(y,"setScale.y",q),te=o(y,"setScale.stepX",0),se=o(y,"setScale.stepY",0);i.SetScale(L,q,_,te,se)}if(d(y,"setOrigin")){var ne=o(y,"setOrigin.x",.5),he=o(y,"setOrigin.y",ne),le=o(y,"setOrigin.stepX",0),ge=o(y,"setOrigin.stepY",0);i.SetOrigin(L,ne,he,le,ge)}if(d(y,"setAlpha")){var re=o(y,"setAlpha.value",1),fe=o(y,"setAlpha.step",0);i.SetAlpha(L,re,fe)}if(d(y,"setDepth")){var Ae=o(y,"setDepth.value",0),Ie=o(y,"setDepth.step",0);i.SetDepth(L,Ae,Ie)}if(d(y,"setScrollFactor")){var Ne=o(y,"setScrollFactor.x",1),Fe=o(y,"setScrollFactor.y",Ne),Se=o(y,"setScrollFactor.stepX",0),Oe=o(y,"setScrollFactor.stepY",0);i.SetScrollFactor(L,Ne,Fe,Se,Oe)}var Be=s(y,"hitArea",null),Pt=s(y,"hitAreaCallback",null);Be&&i.SetHitArea(L,Be,Pt);var Gt=s(y,"gridAlign",!1);return Gt&&i.GridAlign(L,Gt),this.createMultipleCallback&&this.createMultipleCallback.call(this,L),L},preUpdate:function(y,S){if(!(!this.runChildUpdate||this.children.size===0))for(var C=this.children.entries.slice(),A=0;A<C.length;A++){var M=C[A];M.active&&M.update(y,S)}},add:function(y,S){return S===void 0&&(S=!1),this.isFull()?this:(this.children.set(y),this.internalCreateCallback&&this.internalCreateCallback.call(this,y),this.createCallback&&this.createCallback.call(this,y),S&&(y.addToDisplayList(this.scene.sys.displayList),y.addToUpdateList()),y.on(n.DESTROY,this.remove,this),this)},addMultiple:function(y,S){if(S===void 0&&(S=!1),Array.isArray(y))for(var C=0;C<y.length;C++)this.add(y[C],S);return this},remove:function(y,S,C){return S===void 0&&(S=!1),C===void 0&&(C=!1),this.children.contains(y)?(this.children.delete(y),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,y),this.removeCallback&&this.removeCallback.call(this,y),y.off(n.DESTROY,this.remove,this),C?y.destroy():S&&(y.removeFromDisplayList(),y.removeFromUpdateList()),this):this},clear:function(y,S){y===void 0&&(y=!1),S===void 0&&(S=!1);for(var C=this.children,A=0;A<C.size;A++){var M=C.entries[A];M.off(n.DESTROY,this.remove,this),S?M.destroy():y&&(M.removeFromDisplayList(),M.removeFromUpdateList())}return this.children.clear(),this},contains:function(y){return this.children.contains(y)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(y,S,C,A){return a(this.children.entries,y,S,C,A)},getFirst:function(y,S,C,A,M,L,P){return this.getHandler(!0,1,y,S,C,A,M,L,P)},getFirstNth:function(y,S,C,A,M,L,P,O){return this.getHandler(!0,y,S,C,A,M,L,P,O)},getLast:function(y,S,C,A,M,L,P){return this.getHandler(!1,1,y,S,C,A,M,L,P)},getLastNth:function(y,S,C,A,M,L,P,O){return this.getHandler(!1,y,S,C,A,M,L,P,O)},getHandler:function(y,S,C,A,M,L,P,O,D){C===void 0&&(C=!1),A===void 0&&(A=!1);var I,F,H=0,k=this.children.entries;if(y)for(F=0;F<k.length;F++)if(I=k[F],I.active===C){if(H++,H===S)break}else I=null;else for(F=k.length-1;F>=0;F--)if(I=k[F],I.active===C){if(H++,H===S)break}else I=null;return I?(typeof M=="number"&&(I.x=M),typeof L=="number"&&(I.y=L),I):A?this.create(M,L,P,O,D):null},get:function(y,S,C,A,M){return this.getFirst(!1,!0,y,S,C,A,M)},getFirstAlive:function(y,S,C,A,M,L){return this.getFirst(!0,y,S,C,A,M,L)},getFirstDead:function(y,S,C,A,M,L){return this.getFirst(!1,y,S,C,A,M,L)},playAnimation:function(y,S){return i.PlayAnimation(this.children.entries,y,S),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(y){y===void 0&&(y=!0);for(var S=0,C=0;C<this.children.size;C++)this.children.entries[C].active===y&&S++;return S},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var y=this.getTotalUsed(),S=this.maxSize===-1?999999999999:this.maxSize;return S-y},setActive:function(y){return this.active=y,this},setName:function(y){return this.name=y,this},propertyValueSet:function(y,S,C,A,M){return i.PropertyValueSet(this.children.entries,y,S,C,A,M),this},propertyValueInc:function(y,S,C,A,M){return i.PropertyValueInc(this.children.entries,y,S,C,A,M),this},setX:function(y,S){return i.SetX(this.children.entries,y,S),this},setY:function(y,S){return i.SetY(this.children.entries,y,S),this},setXY:function(y,S,C,A){return i.SetXY(this.children.entries,y,S,C,A),this},incX:function(y,S){return i.IncX(this.children.entries,y,S),this},incY:function(y,S){return i.IncY(this.children.entries,y,S),this},incXY:function(y,S,C,A){return i.IncXY(this.children.entries,y,S,C,A),this},shiftPosition:function(y,S,C){return i.ShiftPosition(this.children.entries,y,S,C),this},angle:function(y,S){return i.Angle(this.children.entries,y,S),this},rotate:function(y,S){return i.Rotate(this.children.entries,y,S),this},rotateAround:function(y,S){return i.RotateAround(this.children.entries,y,S),this},rotateAroundDistance:function(y,S,C){return i.RotateAroundDistance(this.children.entries,y,S,C),this},setAlpha:function(y,S){return i.SetAlpha(this.children.entries,y,S),this},setTint:function(y,S,C,A){return i.SetTint(this.children.entries,y,S,C,A),this},setOrigin:function(y,S,C,A){return i.SetOrigin(this.children.entries,y,S,C,A),this},scaleX:function(y,S){return i.ScaleX(this.children.entries,y,S),this},scaleY:function(y,S){return i.ScaleY(this.children.entries,y,S),this},scaleXY:function(y,S,C,A){return i.ScaleXY(this.children.entries,y,S,C,A),this},setDepth:function(y,S){return i.SetDepth(this.children.entries,y,S),this},setBlendMode:function(y){return i.SetBlendMode(this.children.entries,y),this},setHitArea:function(y,S){return i.SetHitArea(this.children.entries,y,S),this},shuffle:function(){return i.Shuffle(this.children.entries),this},kill:function(y){this.children.contains(y)&&y.setActive(!1)},killAndHide:function(y){this.children.contains(y)&&(y.setActive(!1),y.setVisible(!1))},setVisible:function(y,S,C){return i.SetVisible(this.children.entries,y,S,C),this},toggleVisible:function(){return i.ToggleVisible(this.children.entries),this},destroy:function(y,S){y===void 0&&(y=!1),S===void 0&&(S=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(n.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(S,y),this.scene=void 0,this.children=void 0)}});h.exports=p},94975:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(44603),u=e(26479);i.register("group",function(n){return new u(this.scene,null,n)})},3385:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26479),u=e(39429);u.register("group",function(n,r){return this.updateList.add(new i(this.scene,n,r))})},88571:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31401),n=e(95643),r=e(59819),a=new i({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,r],initialize:function(o,d,l,f,m){n.call(this,o,"Image"),this._crop=this.resetCropObject(),this.setTexture(f,m),this.setPosition(d,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});h.exports=a},40652:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){u.addToRenderList(i),e.batchSprite(i,i.frame,u,n)};h.exports=w},82459:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(44603),n=e(23568),r=e(88571);u.register("image",function(a,s){a===void 0&&(a={});var o=n(a,"key",null),d=n(a,"frame",null),l=new r(this.scene,0,0,o,d);return s!==void 0&&(a.add=s),i(this.scene,l,a),l})},2117:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(88571),u=e(39429);u.register("image",function(n,r,a,s){return this.displayList.add(new i(this.scene,n,r,a,s))})},59819:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(99517),n=e(40652),h.exports={renderWebGL:u,renderCanvas:n}},99517:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){u.addToRenderList(i),this.pipeline.batchSprite(i,u,n)};h.exports=w},77856:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={Events:e(51708),DisplayList:e(8050),GameObjectCreator:e(44603),GameObjectFactory:e(39429),UpdateList:e(45027),Components:e(31401),GetCalcMatrix:e(91296),BuildGameObject:e(25305),BuildGameObjectAnimation:e(13059),GameObject:e(95643),BitmapText:e(22186),Blitter:e(6107),Bob:e(46590),Container:e(31559),DOMElement:e(3069),DynamicBitmapText:e(2638),Extern:e(42421),Graphics:e(43831),Group:e(26479),Image:e(88571),Layer:e(93595),Particles:e(18404),PathFollower:e(1159),RenderTexture:e(591),RetroFont:e(196),Rope:e(77757),Sprite:e(68287),Text:e(50171),GetTextSize:e(14220),MeasureText:e(79557),TextStyle:e(35762),TileSprite:e(20839),Zone:e(41481),Video:e(18471),Shape:e(17803),Arc:e(23629),Curve:e(89),Ellipse:e(19921),Grid:e(30479),IsoBox:e(61475),IsoTriangle:e(16933),Line:e(57847),Polygon:e(24949),Rectangle:e(74561),Star:e(55911),Triangle:e(36931),Factories:{Blitter:e(12709),Container:e(24961),DOMElement:e(2611),DynamicBitmapText:e(72566),Extern:e(56315),Graphics:e(1201),Group:e(3385),Image:e(2117),Layer:e(20005),Particles:e(676),PathFollower:e(90145),RenderTexture:e(60505),Rope:e(96819),Sprite:e(46409),StaticBitmapText:e(34914),Text:e(68005),TileSprite:e(91681),Zone:e(84175),Video:e(89025),Arc:e(42563),Curve:e(40511),Ellipse:e(1543),Grid:e(34137),IsoBox:e(3933),IsoTriangle:e(49803),Line:e(2481),Polygon:e(64827),Rectangle:e(87959),Star:e(93697),Triangle:e(45245)},Creators:{Blitter:e(9403),Container:e(77143),DynamicBitmapText:e(11164),Graphics:e(87079),Group:e(94975),Image:e(82459),Layer:e(25179),Particles:e(92730),RenderTexture:e(34495),Rope:e(26209),Sprite:e(15567),StaticBitmapText:e(57336),Text:e(71259),TileSprite:e(14167),Zone:e(95261),Video:e(11511)}};i.Shader=e(20071),i.Mesh=e(4703),i.NineSlice=e(28103),i.PointLight=e(80321),i.Plane=e(33663),i.Factories.Shader=e(74177),i.Factories.Mesh=e(9225),i.Factories.NineSlice=e(47521),i.Factories.PointLight=e(71255),i.Factories.Plane=e(30985),i.Creators.Shader=e(54935),i.Creators.Mesh=e(20527),i.Creators.NineSlice=e(28279),i.Creators.PointLight=e(39829),i.Creators.Plane=e(56015),i.Light=e(41432),i.LightsManager=e(61356),i.LightsPlugin=e(88992),h.exports=i},93595:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(10312),u=e(83419),n=e(31401),r=e(53774),a=e(45893),s=e(50792),o=e(51708),d=e(73162),l=e(33963),f=e(44594),m=e(19186),g=new u({Extends:d,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.PostPipeline,n.Visible,s,l],initialize:function(y,S){d.call(this,y),s.call(this),this.scene=y,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=y.sys,this.events=y.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(i.SKIP_CHECK),S&&this.add(S),y.sys.queueDepthSort()},setActive:function(p){return this.active=p,this},setName:function(p){return this.name=p,this},setState:function(p){return this.state=p,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(p,y){return this.data||(this.data=new a(this)),this.data.set(p,y),this},incData:function(p,y){return this.data||(this.data=new a(this)),this.data.inc(p,y),this},toggleData:function(p){return this.data||(this.data=new a(this)),this.data.toggle(p),this},getData:function(p){return this.data||(this.data=new a(this)),this.data.get(p)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return r(this)},willRender:function(p){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&p.id)},getIndexList:function(){for(var p=this,y=this.parentContainer,S=[];y&&(S.unshift(y.getIndex(p)),p=y,y.parentContainer);)y=y.parentContainer;return S.unshift(this.displayList.getIndex(p)),S},addChildCallback:function(p){var y=p.displayList;y&&y!==this&&p.removeFromDisplayList(),p.displayList||(this.queueDepthSort(),p.displayList=this,p.emit(o.ADDED_TO_SCENE,p,this.scene),this.events.emit(f.ADDED_TO_SCENE,p,this.scene))},removeChildCallback:function(p){this.queueDepthSort(),p.displayList=null,p.emit(o.REMOVED_FROM_SCENE,p,this.scene),this.events.emit(f.REMOVED_FROM_SCENE,p,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(m(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(p,y){return p._depth-y._depth},getChildren:function(){return this.list},addToDisplayList:function(p){return p===void 0&&(p=this.scene.sys.displayList),this.displayList&&this.displayList!==p&&this.removeFromDisplayList(),p.exists(this)||(this.displayList=p,p.add(this,!0),p.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),p.events.emit(f.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var p=this.displayList||this.scene.sys.displayList;return p.exists(this)&&(p.remove(this,!0),p.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),p.events.emit(f.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(p){if(!(!this.scene||this.ignoreDestroy)){this.emit(o.DESTROY,this);for(var y=this.list;y.length;)y[0].destroy(p);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});h.exports=g},2956:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=i.list;if(n.length!==0){i.depthSort();var r=i.blendMode!==-1;r||e.setBlendMode(0);var a=i._alpha;i.mask&&i.mask.preRenderCanvas(e,null,u);for(var s=0;s<n.length;s++){var o=n[s];if(o.willRender(u)){var d=o.alpha;!r&&o.blendMode!==e.currentBlendMode&&e.setBlendMode(o.blendMode),o.setAlpha(d*a),o.renderCanvas(e,o,u),o.setAlpha(d)}}i.mask&&i.mask.postRenderCanvas(e)}};h.exports=w},25179:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(93595),n=e(44603),r=e(23568);n.register("layer",function(a,s){a===void 0&&(a={});var o=r(a,"children",null),d=new u(this.scene,o);return s!==void 0&&(a.add=s),i(this.scene,d,a),d})},20005:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(93595),u=e(39429);u.register("layer",function(n){return this.displayList.add(new i(this.scene,n))})},33963:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(15869),n=e(2956),h.exports={renderWebGL:u,renderCanvas:n}},15869:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=i.list,r=n.length;if(r!==0){i.depthSort(),e.pipelines.preBatch(i);var a=i.blendMode!==-1;a||e.setBlendMode(0);for(var s=i.alpha,o=0;o<r;o++){var d=n[o];if(d.willRender(u)){var l,f,m,g;if(d.alphaTopLeft!==void 0)l=d.alphaTopLeft,f=d.alphaTopRight,m=d.alphaBottomLeft,g=d.alphaBottomRight;else{var p=d.alpha;l=p,f=p,m=p,g=p}!a&&d.blendMode!==e.currentBlendMode&&e.setBlendMode(d.blendMode);var y=d.mask;y&&y.preRenderWebGL(e,d,u);var S=d.type;S!==e.currentType&&(e.newType=!0,e.currentType=S),e.nextTypeMatch=o<r-1?n[o+1].type===e.currentType:!1,d.setAlpha(l*s,f*s,m*s,g*s),d.renderWebGL(e,d,u),d.setAlpha(l,f,m,g),y&&y.postRenderWebGL(e,u),e.newType=!1}}e.pipelines.postBatch(i)}};h.exports=w},41432:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(96503),u=e(83419),n=e(31401),r=e(51767),a=e(70554),s=new u({Extends:i,Mixins:[n.Origin,n.ScrollFactor,n.Visible],initialize:function(d,l,f,m,g,p,y){i.call(this,d,l,f),this.color=new r(m,g,p),this.intensity=y,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(f)},displayWidth:{get:function(){return this.diameter},set:function(o){this.diameter=o}},displayHeight:{get:function(){return this.diameter},set:function(o){this.diameter=o}},width:{get:function(){return this.diameter},set:function(o){this.diameter=o}},height:{get:function(){return this.diameter},set:function(o){this.diameter=o}},willRender:function(o){return!(s.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&o.id)},setColor:function(o){var d=a.getFloatsFromUintRGB(o);return this.color.set(d[0],d[1],d[2]),this},setIntensity:function(o){return this.intensity=o,this},setRadius:function(o){return this.radius=o,this}});s.RENDER_MASK=15,h.exports=s},61356:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(81491),u=e(83419),n=e(20339),r=e(41432),a=e(80321),s=e(51767),o=e(19133),d=e(19186),l=e(70554),f=new u({initialize:function(){this.lights=[],this.ambientColor=new s(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(m,g,p,y,S,C){return this.systems.displayList.add(new a(this.scene,m,g,p,y,S,C))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(m){for(var g=this.lights,p=m.worldView,y=[],S=0;S<g.length;S++){var C=g[S];C.willRender(m)&&i(C,p)&&y.push({light:C,distance:n(C.x,C.y,p.centerX,p.centerY)})}return y.length>this.maxLights&&(d(y,this.sortByDistance),y=y.slice(0,this.maxLights)),this.visibleLights=y.length,y},sortByDistance:function(m,g){return m.distance>=g.distance},setAmbientColor:function(m){var g=l.getFloatsFromUintRGB(m);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(m,g,p,y,S){m===void 0&&(m=0),g===void 0&&(g=0),p===void 0&&(p=128),y===void 0&&(y=16777215),S===void 0&&(S=1);var C=l.getFloatsFromUintRGB(y),A=new r(m,g,p,C[0],C[1],C[2],S);return this.lights.push(A),A},removeLight:function(m){var g=this.lights.indexOf(m);return g>=0&&o(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});h.exports=f},88992:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(61356),n=e(37277),r=e(44594),a=new i({Extends:u,initialize:function(o){this.scene=o,this.systems=o.sys,o.sys.settings.isBooted||o.sys.events.once(r.BOOT,this.boot,this),u.call(this)},boot:function(){var s=this.systems.events;s.on(r.SHUTDOWN,this.shutdown,this),s.on(r.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});n.register("LightsPlugin",a,"lights"),h.exports=a},4703:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31401),n=e(39506),r=e(83997),a=e(95643),s=e(34684),o=e(92515),d=e(91296),l=e(37867),f=e(29807),m=e(43396),g=e(19186),p=e(25836),y=e(39318),S=new i({Extends:a,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.Texture,u.Transform,u.Visible,f],initialize:function(A,M,L,P,O,D,I,F,H,k,W,$){M===void 0&&(M=0),L===void 0&&(L=0),P===void 0&&(P="__WHITE"),a.call(this,A,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new p,this.modelScale=new p(1,1,1),this.modelRotation=new p,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new l,this.viewPosition=new p,this.viewMatrix=new l,this.projectionMatrix=new l,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var K=A.sys.renderer;this.setPosition(M,L),this.setTexture(P,O),this.setSize(K.width,K.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(K.width,K.height),D&&this.addVertices(D,I,F,H,k,W,$)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(C){return this.viewPosition.addScale(p.LEFT,C),this.dirtyCache[10]=1,this},panY:function(C){return this.viewPosition.y+=p.DOWN.y*C,this.dirtyCache[10]=1,this},panZ:function(C){return this.viewPosition.z+=C,this.dirtyCache[10]=1,this},setPerspective:function(C,A,M,L,P){return M===void 0&&(M=45),L===void 0&&(L=.01),P===void 0&&(P=1e3),this.fov=M,this.projectionMatrix.perspective(n(M),C/A,L,P),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(C,A,M,L){return C===void 0&&(C=this.scene.sys.renderer.getAspectRatio()),A===void 0&&(A=1),M===void 0&&(M=-1e3),L===void 0&&(L=1e3),this.fov=0,this.projectionMatrix.ortho(-C,C,-A,A,M,L),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(C){C.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(C,A,M,L,P,O,D,I,F){var H=this.scene.sys.cache.obj.get(C),k;return H&&(k=s(H,this,A,M,L,P,O,D,I,F)),(!k||k.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",C),this},sortByDepth:function(C,A){return C.depth-A.depth},depthSort:function(){return g(this.faces,this.sortByDepth),this},addVertex:function(C,A,M,L,P,O,D){var I=new y(C,A,M,L,P,O,D);return this.vertices.push(I),I},addFace:function(C,A,M){var L=new r(C,A,M);return this.faces.push(L),this.dirtyCache[9]=-1,L},addVertices:function(C,A,M,L,P,O,D){var I=o(C,A,M,L,P,O,D);return I?(this.faces=this.faces.concat(I.faces),this.vertices=this.vertices.concat(I.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(C){return this.faces[C]},hasFaceAt:function(C,A,M){M===void 0&&(M=this.scene.sys.cameras.main);for(var L=d(this,M).calc,P=this.faces,O=0;O<P.length;O++){var D=P[O];if(D.contains(C,A,L))return!0}return!1},getFaceAt:function(C,A,M){M===void 0&&(M=this.scene.sys.cameras.main);for(var L=d(this,M).calc,P=this.faces,O=[],D=0;D<P.length;D++){var I=P[D];I.contains(C,A,L)&&O.push(I)}return g(O,this.sortByDepth)},setDebug:function(C,A){return this.debugGraphic=C,!C&&!A?this.debugCallback=null:A?this.debugCallback=A:this.debugCallback=this.renderDebug,this},isDirty:function(){var C=this.modelPosition,A=this.modelRotation,M=this.modelScale,L=this.dirtyCache,P=C.x,O=C.y,D=C.z,I=A.x,F=A.y,H=A.z,k=M.x,W=M.y,$=M.z,K=this.getFaceCount(),Z=L[0],X=L[1],j=L[2],Y=L[3],U=L[4],J=L[5],q=L[6],_=L[7],te=L[8],se=L[9];return L[0]=P,L[1]=O,L[2]=D,L[3]=I,L[4]=F,L[5]=H,L[6]=k,L[7]=W,L[8]=$,L[9]=K,Z!==P||X!==O||j!==D||Y!==I||U!==F||J!==H||q!==k||_!==W||te!==$||se!==K},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var C=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!C[10]&&!this.isDirty())){var A=this.width,M=this.height,L=this.viewMatrix,P=this.viewPosition;C[10]&&(L.identity(),L.translate(P),L.invert(),C[10]=0);var O=this.transformMatrix;O.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var D=P.z,I=this.faces,F=0;F<I.length;F++)I[F].transformCoordinatesLocal(O,A,M,D);this.depthSort()}},renderDebug:function(C,A){for(var M=C.debugGraphic,L=0;L<A.length;L++){var P=A[L],O=P.vertex1.tx,D=P.vertex1.ty,I=P.vertex2.tx,F=P.vertex2.ty,H=P.vertex3.tx,k=P.vertex3.ty;M.strokeTriangle(O,D,I,F,H,k)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(C){C===void 0&&(C={});var A=(function(M,L,P){for(var O=this.faces,D=0;D<O.length;D++){var I=O[D];if(I.contains(L,P))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,C,A),this},setTint:function(C){C===void 0&&(C=16777215);for(var A=this.vertices,M=0;M<A.length;M++)A[M].color=C;return this},uvScroll:function(C,A){for(var M=this.faces,L=0;L<M.length;L++)M[L].scrollUV(C,A);return this},uvScale:function(C,A){for(var M=this.faces,L=0;L<M.length;L++)M[L].scaleUV(C,A);return this},tint:{set:function(C){this.setTint(C)}},rotateX:{get:function(){return m(this.modelRotation.x)},set:function(C){this.modelRotation.x=n(C)}},rotateY:{get:function(){return m(this.modelRotation.y)},set:function(C){this.modelRotation.y=n(C)}},rotateZ:{get:function(){return m(this.modelRotation.z)},set:function(C){this.modelRotation.z=n(C)}}});h.exports=S},36488:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(){};h.exports=w},20527:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(44603),n=e(23568),r=e(35154),a=e(4703);u.register("mesh",function(s,o){s===void 0&&(s={});var d=n(s,"key",null),l=n(s,"frame",null),f=r(s,"vertices",[]),m=r(s,"uvs",[]),g=r(s,"indicies",[]),p=r(s,"containsZ",!1),y=r(s,"normals",[]),S=r(s,"colors",16777215),C=r(s,"alphas",1),A=new a(this.scene,0,0,d,l,f,m,g,p,y,S,C);return o!==void 0&&(s.add=o),i(this.scene,A,s),A})},9225:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(4703),u=e(39429);u.register("mesh",function(n,r,a,s,o,d,l,f,m,g,p){return this.displayList.add(new i(this.scene,n,r,a,s,o,d,l,f,m,g,p))})},29807:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(48833),n=e(36488),h.exports={renderWebGL:u,renderCanvas:n}},48833:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=function(n,r,a,s){var o=r.faces,d=o.length;if(d!==0){a.addToRenderList(r);var l=n.pipelines.set(r.pipeline,r),f=i(r,a,s).calc;n.pipelines.preBatch(r);for(var m=l.setGameObject(r),g=l.vertexViewF32,p=l.vertexViewU32,y=l.vertexCount*l.currentShader.vertexComponentCount-1,S=r.tintFill,C=[],A=r.debugCallback,M=f.a,L=f.b,P=f.c,O=f.d,D=f.e,I=f.f,F=r.viewPosition.z,H=r.hideCCW,k=a.roundPixels,W=a.alpha*r.alpha,$=0,K=0;K<d;K++){var Z=o[K];Z.isInView(a,H,F,W,M,L,P,O,D,I,k)&&(l.shouldFlush(3)&&(l.flush(),m=l.setGameObject(r),y=l.vertexCount*l.currentShader.vertexComponentCount-1),y=Z.load(g,p,y,m,S),$++,l.vertexCount+=3,l.currentBatch.count=l.vertexCount-l.currentBatch.start,A&&C.push(Z))}r.totalFrame+=$,A&&A.call(r,r,C),n.pipelines.postBatch(r)}};h.exports=u},28103:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31401),n=e(95643),r=e(78023),a=e(39318),s=new i({Extends:n,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Texture,u.Transform,u.Visible,r],initialize:function(d,l,f,m,g,p,y,S,C,A,M){n.call(this,d,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var L=d.textures.getFrame(m,g);this.is3Slice=!A&&!M,L&&L.scale9&&(this.is3Slice=L.is3Slice);for(var P=this.is3Slice?18:54,O=0;O<P;O++)this.vertices.push(new a);this.setPosition(l,f),this.setTexture(m,g),this.setSlices(p,y,S,C,A,M,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(o,d,l,f,m,g,p){l===void 0&&(l=10),f===void 0&&(f=10),m===void 0&&(m=0),g===void 0&&(g=0),p===void 0&&(p=!1);var y=this.frame,S=!1;if(this.is3Slice&&p&&m!==0&&g!==0&&(S=!0),S)console.warn("Cannot change 9 slice to 3 slice");else{if(y&&y.scale9&&!p){var C=y.data.scale9Borders,A=C.x,M=C.y;l=A,f=y.width-C.w-A,m=M,g=y.height-C.h-M,o===void 0&&(o=y.width),d===void 0&&(d=y.height)}else o===void 0&&(o=256),d===void 0&&(d=256);this._width=o,this._height=d,this.leftWidth=l,this.rightWidth=f,this.topHeight=m,this.bottomHeight=g,this.is3Slice&&(d=y.height,this._height=d,this.topHeight=d,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var o=this.leftWidth,d=this.rightWidth,l=this.topHeight,f=this.bottomHeight,m=this.frame.width,g=this.frame.height;this.updateQuadUVs(0,0,0,o/m,l/g),this.updateQuadUVs(6,o/m,0,1-d/m,l/g),this.updateQuadUVs(12,1-d/m,0,1,l/g),this.is3Slice||(this.updateQuadUVs(18,0,l/g,o/m,1-f/g),this.updateQuadUVs(24,o/m,l/g,1-d/m,1-f/g),this.updateQuadUVs(30,1-d/m,l/g,1,1-f/g),this.updateQuadUVs(36,0,1-f/g,o/m,1),this.updateQuadUVs(42,o/m,1-f/g,1-d/m,1),this.updateQuadUVs(48,1-d/m,1-f/g,1,1))},updateVertices:function(){var o=this.leftWidth,d=this.rightWidth,l=this.topHeight,f=this.bottomHeight,m=this.width,g=this.height;this.updateQuad(0,-.5,.5,-.5+o/m,.5-l/g),this.updateQuad(6,-.5+o/m,.5,.5-d/m,.5-l/g),this.updateQuad(12,.5-d/m,.5,.5,.5-l/g),this.is3Slice||(this.updateQuad(18,-.5,.5-l/g,-.5+o/m,-.5+f/g),this.updateQuad(24,-.5+o/m,.5-l/g,.5-d/m,-.5+f/g),this.updateQuad(30,.5-d/m,.5-l/g,.5,-.5+f/g),this.updateQuad(36,-.5,-.5+f/g,-.5+o/m,-.5),this.updateQuad(42,-.5+o/m,-.5+f/g,.5-d/m,-.5),this.updateQuad(48,.5-d/m,-.5+f/g,.5,-.5))},updateQuad:function(o,d,l,f,m){var g=this.width,p=this.height,y=this.originX,S=this.originY,C=this.vertices;C[o+0].resize(d,l,g,p,y,S),C[o+1].resize(d,m,g,p,y,S),C[o+2].resize(f,l,g,p,y,S),C[o+3].resize(d,m,g,p,y,S),C[o+4].resize(f,m,g,p,y,S),C[o+5].resize(f,l,g,p,y,S)},updateQuadUVs:function(o,d,l,f,m){var g=this.vertices,p=this.frame,y=p.u0,S=p.v0,C=p.u1,A=p.v1;if(y!==0||C!==1){var M=C-y;d=y+d*M,f=y+f*M}if(S!==0||A!==1){var L=A-S;l=S+l*L,m=S+m*L}g[o+0].setUVs(d,l),g[o+1].setUVs(d,m),g[o+2].setUVs(f,l),g[o+3].setUVs(d,m),g[o+4].setUVs(f,m),g[o+5].setUVs(f,l)},clearTint:function(){return this.setTint(16777215),this},setTint:function(o){return o===void 0&&(o=16777215),this.tint=o,this.tintFill=!1,this},setTintFill:function(o){return this.setTint(o),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(o){this._width=Math.max(o,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(o){this.is3Slice||(this._height=Math.max(o,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(o){this.scaleX=o/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(o){this.scaleY=o/this.height}},setSize:function(o,d){this.width=o,this.height=d,this.updateDisplayOrigin();var l=this.input;return l&&!l.customHitArea&&(l.hitArea.width=this.width,l.hitArea.height=this.height),this},setDisplaySize:function(o,d){return this.displayWidth=o,this.displayHeight=d,this},originX:{get:function(){return this._originX},set:function(o){this._originX=o,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(o){this._originY=o,this.updateVertices()}},setOrigin:function(o,d){return o===void 0&&(o=.5),d===void 0&&(d=o),this._originX=o,this._originY=d,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var o=this.frame.height;this._height=o,this.topHeight=o,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});h.exports=s},28279:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(44603),n=e(23568),r=e(35154),a=e(28103);u.register("nineslice",function(s,o){s===void 0&&(s={});var d=n(s,"key",null),l=n(s,"frame",null),f=r(s,"width",256),m=r(s,"height",256),g=r(s,"leftWidth",10),p=r(s,"rightWidth",10),y=r(s,"topHeight",0),S=r(s,"bottomHeight",0),C=new a(this.scene,0,0,d,l,f,m,g,p,y,S);return o!==void 0&&(s.add=o),i(this.scene,C,s),C})},47521:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(28103),u=e(39429);u.register("nineslice",function(n,r,a,s,o,d,l,f,m,g){return this.displayList.add(new i(this.scene,n,r,a,s,o,d,l,f,m,g))})},78023:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(52230),h.exports={renderWebGL:u,renderCanvas:n}},52230:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=e(70554),n=function(r,a,s,o){var d=a.vertices,l=d.length;if(l!==0){s.addToRenderList(a);var f=r.pipelines.set(a.pipeline,a),m=i(a,s,o,!1).calc;r.pipelines.preBatch(a);var g=f.setGameObject(a),p=f.vertexViewF32,y=f.vertexViewU32,S=f.vertexCount*f.currentShader.vertexComponentCount-1,C=s.roundPixels,A=a.tintFill,M=s.alpha*a.alpha,L=u.getTintAppendFloatAlpha(a.tint,M),P=f.vertexAvailable(),O=-1;P<l&&(O=P);for(var D=0;D<l;D++){var I=d[D];D===O&&(f.flush(),g=f.setGameObject(a),S=0),p[++S]=m.getXRound(I.vx,I.vy,C),p[++S]=m.getYRound(I.vx,I.vy,C),p[++S]=I.u,p[++S]=I.v,p[++S]=g,p[++S]=A,y[++S]=L,f.vertexCount++,f.currentBatch.count=f.vertexCount-f.currentBatch.start}r.pipelines.postBatch(a)}};h.exports=n},76472:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(44777),n=e(37589),r=e(6113),a=e(91389),s=e(90664),o=new i({Extends:u,initialize:function(l){u.call(this,l,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var d=this.propertyValue,l=d,f=this.defaultEmit,m=this.defaultUpdate;if(this.method===9){this.start=d[0],this.ease=r("Linear"),this.interpolation=a("linear"),f=this.easedValueEmit,m=this.easeValueUpdate,l=d[0],this.active=!0;for(var g=0;g<d.length;g++){var p=s(d[g]);this.r.push(p.r),this.g.push(p.g),this.b.push(p.b)}}return this.onEmit=f,this.onUpdate=m,this.current=l,this},setEase:function(d){this.easeName=d,this.ease=r(d)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(d,l,f){var m=this.ease(f),g=this.interpolation(this.r,m),p=this.interpolation(this.g,m),y=this.interpolation(this.b,m),S=n(g,p,y);return this.current=S,S}});h.exports=o},44777:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(30976),u=e(45319),n=e(83419),r=e(99472),a=e(6113),s=e(95540),o=e(91389),d=e(77720),l=e(15994),f=new n({initialize:function(g,p,y){y===void 0&&(y=!1),this.propertyKey=g,this.propertyValue=p,this.defaultValue=p,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=y,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(m,g){m===void 0&&(m={}),g&&(this.propertyKey=g),this.propertyValue=s(m,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(m){var g;switch(this.method){case 1:case 3:case 8:g=m;break;case 2:this.propertyValue.indexOf(m)>=0&&(g=m);break;case 4:var p=(this.end-this.start)/this.steps;g=d(m,p),this.counter=g;break;case 5:case 6:case 7:g=u(m,this.start,this.end);break;case 9:g=this.start[0];break}return this.current=g,this},getMethod:function(){var m=this.propertyValue;if(m===null)return 0;var g=typeof m;if(g==="number")return 1;if(Array.isArray(m))return 2;if(g==="function")return 3;if(g==="object"){if(this.hasBoth(m,"start","end"))return this.has(m,"steps")?4:5;if(this.hasBoth(m,"min","max"))return 6;if(this.has(m,"random"))return 7;if(this.hasEither(m,"onEmit","onUpdate"))return 8;if(this.hasEither(m,"values","interpolation"))return 9}return 0},setMethods:function(){var m=this.propertyValue,g=m,p=this.defaultEmit,y=this.defaultUpdate;switch(this.method){case 1:p=this.staticValueEmit;break;case 2:p=this.randomStaticValueEmit,g=m[0];break;case 3:this._onEmit=m,p=this.proxyEmit;break;case 4:this.start=m.start,this.end=m.end,this.steps=m.steps,this.counter=this.start,this.yoyo=this.has(m,"yoyo")?m.yoyo:!1,this.direction=0,p=this.steppedEmit,g=this.start;break;case 5:this.start=m.start,this.end=m.end;var S=this.has(m,"ease")?m.ease:"Linear";this.ease=a(S,m.easeParams),p=this.has(m,"random")&&m.random?this.randomRangedValueEmit:this.easedValueEmit,y=this.easeValueUpdate,g=this.start;break;case 6:this.start=m.min,this.end=m.max,p=this.has(m,"int")&&m.int?this.randomRangedIntEmit:this.randomRangedValueEmit,g=this.start;break;case 7:var C=m.random;Array.isArray(C)&&(this.start=C[0],this.end=C[1]),p=this.randomRangedIntEmit,g=this.start;break;case 8:this._onEmit=this.has(m,"onEmit")?m.onEmit:this.defaultEmit,this._onUpdate=this.has(m,"onUpdate")?m.onUpdate:this.defaultUpdate,p=this.proxyEmit,y=this.proxyUpdate;break;case 9:this.start=m.values;var A=this.has(m,"ease")?m.ease:"Linear";this.ease=a(A,m.easeParams),this.interpolation=o(m.interpolation),p=this.easedValueEmit,y=this.easeValueUpdate,g=this.start[0];break}return this.onEmit=p,this.onUpdate=y,this.current=g,this},has:function(m,g){return m.hasOwnProperty(g)},hasBoth:function(m,g,p){return m.hasOwnProperty(g)&&m.hasOwnProperty(p)},hasEither:function(m,g,p){return m.hasOwnProperty(g)||m.hasOwnProperty(p)},defaultEmit:function(m,g,p){return p},defaultUpdate:function(m,g,p,y){return y},proxyEmit:function(m,g,p){var y=this._onEmit(m,g,p);return this.current=y,y},proxyUpdate:function(m,g,p,y){var S=this._onUpdate(m,g,p,y);return this.current=S,S},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var m=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[m],this.current},randomRangedValueEmit:function(m,g){var p=r(this.start,this.end);return m&&m.data[g]&&(m.data[g].min=p,m.data[g].max=this.end),this.current=p,p},randomRangedIntEmit:function(m,g){var p=i(this.start,this.end);return m&&m.data[g]&&(m.data[g].min=p,m.data[g].max=this.end),this.current=p,p},steppedEmit:function(){var m=this.counter,g=m,p=(this.end-this.start)/this.steps;if(this.yoyo){var y;this.direction===0?(g+=p,g>=this.end&&(y=g-this.end,g=this.end-y,this.direction=1)):(g-=p,g<=this.start&&(y=this.start-g,g=this.start+y,this.direction=0)),this.counter=g}else this.counter=l(g+p,this.start,this.end);return this.current=m,m},easedValueEmit:function(m,g){if(m&&m.data[g]){var p=m.data[g];p.min=this.start,p.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(m,g,p){var y=m.data[g],S,C=this.ease(p);return this.interpolation?S=this.interpolation(this.start,C):S=(y.max-y.min)*C+y.min,this.current=S,S},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});h.exports=f},24502:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(95540),n=e(20286),r=new i({Extends:n,initialize:function(s,o,d,l,f){if(typeof s=="object"){var m=s;s=u(m,"x",0),o=u(m,"y",0),d=u(m,"power",0),l=u(m,"epsilon",100),f=u(m,"gravity",50)}else s===void 0&&(s=0),o===void 0&&(o=0),d===void 0&&(d=0),l===void 0&&(l=100),f===void 0&&(f=50);n.call(this,s,o,!0),this._gravity=f,this._power=d*f,this._epsilon=l*l},update:function(a,s){var o=this.x-a.x,d=this.y-a.y,l=o*o+d*d;if(l!==0){var f=Math.sqrt(l);l<this._epsilon&&(l=this._epsilon);var m=this._power*s/(l*f)*100;a.velocityX+=o*m,a.velocityY+=d*m}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(a){this._epsilon=a*a}},power:{get:function(){return this._power/this._gravity},set:function(a){this._power=a*this._gravity}},gravity:{get:function(){return this._gravity},set:function(a){var s=this.power;this._gravity=a,this.power=s}}});h.exports=r},56480:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(9674),u=e(45319),n=e(83419),r=e(39506),a=e(87841),s=e(11520),o=e(26099),d=new n({initialize:function(f){this.emitter=f,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new o,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=f.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new i(this)),this.bounds=new a},emit:function(l,f,m,g,p,y){return this.emitter.emit(l,f,m,g,p,y)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(l,f){l===void 0&&(l=0),f===void 0&&(f=0),this.x=l,this.y=f},fire:function(l,f){var m=this.emitter,g=m.ops,p=m.getAnim();if(p?this.anims.play(p):(this.frame=m.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(m.getEmitZone(this),l===void 0?this.x+=g.x.onEmit(this,"x"):g.x.steps>0?this.x+=l+g.x.onEmit(this,"x"):this.x+=l,f===void 0?this.y+=g.y.onEmit(this,"y"):g.y.steps>0?this.y+=f+g.y.onEmit(this,"y"):this.y+=f,this.life=g.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=g.delay.onEmit(this,"delay"),this.holdCurrent=g.hold.onEmit(this,"hold"),this.scaleX=g.scaleX.onEmit(this,"scaleX"),this.scaleY=g.scaleY.active?g.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=g.rotate.onEmit(this,"rotate"),this.rotation=r(this.angle),m.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&m.getDeathZone(this))return this.lifeCurrent=0,!1;var y=g.speedX.onEmit(this,"speedX"),S=g.speedY.active?g.speedY.onEmit(this,"speedY"):y;if(m.radial){var C=r(g.angle.onEmit(this,"angle"));this.velocityX=Math.cos(C)*Math.abs(y),this.velocityY=Math.sin(C)*Math.abs(S)}else if(m.moveTo){var A=g.moveToX.onEmit(this,"moveToX"),M=g.moveToY.onEmit(this,"moveToY"),L=this.life/1e3;this.velocityX=(A-this.x)/L,this.velocityY=(M-this.y)/L}else this.velocityX=y,this.velocityY=S;return m.acceleration&&(this.accelerationX=g.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=g.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=g.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=g.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=g.bounce.onEmit(this,"bounce"),this.alpha=g.alpha.onEmit(this,"alpha"),g.color.active?this.tint=g.color.onEmit(this,"tint"):this.tint=g.tint.onEmit(this,"tint"),!0},update:function(l,f,m){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=l,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=l,!1;this.anims&&this.anims.update(0,l);var g=this.emitter,p=g.ops,y=1-this.lifeCurrent/this.life;if(this.lifeT=y,this.x=p.x.onUpdate(this,"x",y,this.x),this.y=p.y.onUpdate(this,"y",y,this.y),g.moveTo){var S=p.moveToX.onUpdate(this,"moveToX",y,g.moveToX),C=p.moveToY.onUpdate(this,"moveToY",y,g.moveToY),A=this.lifeCurrent/1e3;this.velocityX=(S-this.x)/A,this.velocityY=(C-this.y)/A}return this.computeVelocity(g,l,f,m,y),this.scaleX=p.scaleX.onUpdate(this,"scaleX",y,this.scaleX),p.scaleY.active?this.scaleY=p.scaleY.onUpdate(this,"scaleY",y,this.scaleY):this.scaleY=this.scaleX,this.angle=p.rotate.onUpdate(this,"rotate",y,this.angle),this.rotation=r(this.angle),g.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=u(p.alpha.onUpdate(this,"alpha",y,this.alpha),0,1),p.color.active?this.tint=p.color.onUpdate(this,"color",y,this.tint):this.tint=p.tint.onUpdate(this,"tint",y,this.tint),this.lifeCurrent-=l,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(l,f,m,g,p){var y=l.ops,S=this.velocityX,C=this.velocityY,A=y.accelerationX.onUpdate(this,"accelerationX",p,this.accelerationX),M=y.accelerationY.onUpdate(this,"accelerationY",p,this.accelerationY),L=y.maxVelocityX.onUpdate(this,"maxVelocityX",p,this.maxVelocityX),P=y.maxVelocityY.onUpdate(this,"maxVelocityY",p,this.maxVelocityY);this.bounce=y.bounce.onUpdate(this,"bounce",p,this.bounce),S+=l.gravityX*m+A*m,C+=l.gravityY*m+M*m,S=u(S,-L,L),C=u(C,-P,P),this.velocityX=S,this.velocityY=C,this.x+=S*m,this.y+=C*m,l.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var O=0;O<g.length;O++){var D=g[O];D.active&&D.update(this,f,m,p)}},setSizeToFrame:function(){},getBounds:function(l){l===void 0&&(l=this.emitter.getWorldTransformMatrix());var f=Math.abs(l.scaleX)*this.scaleX,m=Math.abs(l.scaleY)*this.scaleY,g=this.x,p=this.y,y=this.rotation,S=this.frame.width*f/2,C=this.frame.height*m/2,A=this.bounds,M=new o(g-S,p-C),L=new o(g+S,p-C),P=new o(g-S,p+C),O=new o(g+S,p+C);return y!==0&&(s(M,g,p,y),s(L,g,p,y),s(P,g,p,y),s(O,g,p,y)),l.transformPoint(M.x,M.y,M),l.transformPoint(L.x,L.y,L),l.transformPoint(P.x,P.y,P),l.transformPoint(O.x,O.y,O),A.x=Math.min(M.x,L.x,P.x,O.x),A.y=Math.min(M.y,L.y,P.y,O.y),A.width=Math.max(M.x,L.x,P.x,O.x)-A.x,A.height=Math.max(M.y,L.y,P.y,O.y)-A.y,A},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});h.exports=d},69601:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(20286),n=e(87841),r=new i({Extends:u,initialize:function(s,o,d,l,f,m,g,p){f===void 0&&(f=!0),m===void 0&&(m=!0),g===void 0&&(g=!0),p===void 0&&(p=!0),u.call(this,s,o,!0),this.bounds=new n(s,o,d,l),this.collideLeft=f,this.collideRight=m,this.collideTop=g,this.collideBottom=p},update:function(a){var s=this.bounds,o=-a.bounce,d=a.worldPosition;d.x<s.x&&this.collideLeft?(a.x+=s.x-d.x,a.velocityX*=o):d.x>s.right&&this.collideRight&&(a.x-=d.x-s.right,a.velocityX*=o),d.y<s.y&&this.collideTop?(a.y+=s.y-d.y,a.velocityY*=o):d.y>s.bottom&&this.collideBottom&&(a.y-=d.y-s.bottom,a.velocityY*=o)}});h.exports=r},31600:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31401),n=e(53774),r=e(43459),a=e(26388),s=e(19909),o=e(76472),d=e(44777),l=e(20696),f=e(95643),m=e(95540),g=e(26546),p=e(24502),y=e(1985),S=e(97022),C=e(86091),A=e(73162),M=e(20074),L=e(269),P=e(56480),O=e(69601),D=e(68875),I=e(87841),F=e(59996),H=e(72905),k=e(90668),W=e(19186),$=e(61340),K=e(26099),Z=e(15994),X=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],j=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],Y=new i({Extends:f,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Texture,u.Transform,u.Visible,k],initialize:function(J,q,_,te,se){f.call(this,J,"ParticleEmitter"),this.particleClass=P,this.config=null,this.ops={accelerationX:new d("accelerationX",0),accelerationY:new d("accelerationY",0),alpha:new d("alpha",1),angle:new d("angle",{min:0,max:360},!0),bounce:new d("bounce",0),color:new o("color"),delay:new d("delay",0,!0),hold:new d("hold",0,!0),lifespan:new d("lifespan",1e3,!0),maxVelocityX:new d("maxVelocityX",1e4),maxVelocityY:new d("maxVelocityY",1e4),moveToX:new d("moveToX",0),moveToY:new d("moveToY",0),quantity:new d("quantity",1,!0),rotate:new d("rotate",0),scaleX:new d("scaleX",1),scaleY:new d("scaleY",1),speedX:new d("speedX",0,!0),speedY:new d("speedY",0,!0),tint:new d("tint",16777215),x:new d("x",0),y:new d("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new K,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new $,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new A(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(q,_),this.setTexture(te),se&&this.setConfig(se)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(U){if(!U)return this;this.config=U;var J=0,q="",_=this.ops;for(J=0;J<j.length;J++)q=j[J],_[q].loadConfig(U);for(J=0;J<X.length;J++)q=X[J],S(U,q)&&(this[q]=m(U,q));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,S(U,"speed")&&(_.speedX.loadConfig(U,"speed"),_.speedY.active=!1),(y(U,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),S(U,"scale")&&(_.scaleX.loadConfig(U,"scale"),_.scaleY.active=!1),S(U,"callbackScope")){var te=m(U,"callbackScope",null);this.emitCallbackScope=te,this.deathCallbackScope=te}if(S(U,"emitZone")&&this.addEmitZone(U.emitZone),S(U,"deathZone")&&this.addDeathZone(U.deathZone),S(U,"bounds")){var se=this.addParticleBounds(U.bounds);se.collideLeft=m(U,"collideLeft",!0),se.collideRight=m(U,"collideRight",!0),se.collideTop=m(U,"collideTop",!0),se.collideBottom=m(U,"collideBottom",!0)}return S(U,"followOffset")&&this.followOffset.setFromObject(m(U,"followOffset",0)),S(U,"texture")&&this.setTexture(U.texture),S(U,"frame")?this.setEmitterFrame(U.frame):S(U,"anim")&&this.setAnim(U.anim),S(U,"reserve")&&this.reserve(U.reserve),S(U,"advance")&&this.fastForward(U.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(l.START,this),this},updateConfig:function(U){return U&&(this.config?this.setConfig(L(this.config,U)):this.setConfig(U)),this},toJSON:function(){var U=n(this),J=0,q="";for(J=0;J<X.length;J++)q=X[J],U[q]=this[q];var _=this.ops;for(J=0;J<j.length;J++)q=j[J],_[q]&&(U[q]=_[q].toJSON());return _.speedY.active||(delete U.speedX,U.speed=_.speedX.toJSON()),this.scaleX===this.scaleY&&(delete U.scaleX,delete U.scaleY,U.scale=_.scaleX.toJSON()),U},resetCounters:function(U,J){var q=this.counters;q.fill(0),q[0]=U,J&&(q[5]=1)},startFollow:function(U,J,q,_){return J===void 0&&(J=0),q===void 0&&(q=0),_===void 0&&(_=!1),this.follow=U,this.followOffset.set(J,q),this.trackVisible=_,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var U=this.frames,J=U.length,q;return J===1?q=U[0]:this.randomFrame?q=g(U):(q=U[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===J&&(this.currentFrame=0))),this.texture.get(q)},setEmitterFrame:function(U,J,q){J===void 0&&(J=!0),q===void 0&&(q=1),this.randomFrame=J,this.frameQuantity=q,this.currentFrame=0;var _=typeof U;if(this.frames.length=0,Array.isArray(U))this.frames=this.frames.concat(U);else if(_==="string"||_==="number")this.frames.push(U);else if(_==="object"){var te=U;U=m(te,"frames",null),U&&(this.frames=this.frames.concat(U));var se=m(te,"cycle",!1);this.randomFrame=!se,this.frameQuantity=m(te,"quantity",q)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var U=this.anims,J=U.length;if(J===0)return null;if(J===1)return U[0];if(this.randomAnim)return g(U);var q=U[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=Z(this.currentAnim+1,0,J)),q},setAnim:function(U,J,q){J===void 0&&(J=!0),q===void 0&&(q=1),this.randomAnim=J,this.animQuantity=q,this.currentAnim=0;var _=typeof U;if(this.anims.length=0,Array.isArray(U))this.anims=this.anims.concat(U);else if(_==="string")this.anims.push(U);else if(_==="object"){var te=U;U=m(te,"anims",null),U&&(this.anims=this.anims.concat(U));var se=m(te,"cycle",!1);this.randomAnim=!se,this.animQuantity=m(te,"quantity",q)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(U){return U===void 0&&(U=!0),this.radial=U,this},addParticleBounds:function(U,J,q,_,te,se,ne,he){if(typeof U=="object"){var le=U;U=le.x,J=le.y,q=S(le,"w")?le.w:le.width,_=S(le,"h")?le.h:le.height}return this.addParticleProcessor(new O(U,J,q,_,te,se,ne,he))},setParticleSpeed:function(U,J){return J===void 0&&(J=U),this.ops.speedX.onChange(U),U===J?this.ops.speedY.active=!1:this.ops.speedY.onChange(J),this.radial=!0,this},setParticleScale:function(U,J){return U===void 0&&(U=1),J===void 0&&(J=U),this.ops.scaleX.onChange(U),this.ops.scaleY.onChange(J),this},setParticleGravity:function(U,J){return this.gravityX=U,this.gravityY=J,this},setParticleAlpha:function(U){return this.ops.alpha.onChange(U),this},setParticleTint:function(U){return this.ops.tint.onChange(U),this},setEmitterAngle:function(U){return this.ops.angle.onChange(U),this},setParticleLifespan:function(U){return this.ops.lifespan.onChange(U),this},setQuantity:function(U){return this.quantity=U,this},setFrequency:function(U,J){return this.frequency=U,this.flowCounter=U>0?U:0,J&&(this.quantity=J),this},addDeathZone:function(U){Array.isArray(U)||(U=[U]);for(var J,q=[],_=0;_<U.length;_++)if(J=U[_],J instanceof a)q.push(J);else if(typeof J.contains=="function")J=new a(J,!0),q.push(J);else{var te=m(J,"type","onEnter"),se=m(J,"source",null);if(se&&typeof se.contains=="function"){var ne=te==="onEnter";J=new a(se,ne),q.push(J)}}return this.deathZones=this.deathZones.concat(q),q},removeDeathZone:function(U){return H(this.deathZones,U),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(U){Array.isArray(U)||(U=[U]);for(var J,q=[],_=0;_<U.length;_++)if(J=U[_],J instanceof D||J instanceof s)q.push(J);else{var te=m(J,"source",null);if(te){var se=m(J,"type","random");if(se==="random"&&typeof te.getRandomPoint=="function")J=new D(te),q.push(J);else if(se==="edge"&&typeof te.getPoints=="function"){var ne=m(J,"quantity",1),he=m(J,"stepRate",0),le=m(J,"yoyo",!1),ge=m(J,"seamless",!0),re=m(J,"total",-1);J=new s(te,ne,he,le,ge,re),q.push(J)}}}return this.emitZones=this.emitZones.concat(q),q},removeEmitZone:function(U){return H(this.emitZones,U),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(U){var J=this.emitZones,q=J.length;if(q!==0){var _=J[this.zoneIndex];_.getPoint(U),_.total>-1&&(this.zoneTotal++,this.zoneTotal===_.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===q&&(this.zoneIndex=0)))}},getDeathZone:function(U){for(var J=this.deathZones,q=0;q<J.length;q++){var _=J[q];if(_.willKill(U))return this.emit(l.DEATH_ZONE,this,U,_),!0}return!1},setEmitZone:function(U){var J;return isFinite(U)?J=U:J=this.emitZones.indexOf(U),J>=0&&(this.zoneIndex=J),this},addParticleProcessor:function(U){return this.processors.exists(U)||(U.emitter&&U.emitter.removeParticleProcessor(U),this.processors.add(U),U.emitter=this),U},removeParticleProcessor:function(U){return this.processors.exists(U)&&(this.processors.remove(U,!0),U.emitter=null),U},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(U){return this.addParticleProcessor(new p(U))},reserve:function(U){var J=this.dead;if(this.maxParticles>0){var q=this.getParticleCount();q+U>this.maxParticles&&(U=this.maxParticles-(q+U))}for(var _=0;_<U;_++)J.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(U,J){return U===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof U=="function"&&(this.emitCallback=U,J&&(this.emitCallbackScope=J)),this},onParticleDeath:function(U,J){return U===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof U=="function"&&(this.deathCallback=U,J&&(this.deathCallbackScope=J)),this},killAll:function(){for(var U=this.dead,J=this.alive;J.length>0;)U.push(J.pop());return this},forEachAlive:function(U,J){for(var q=this.alive,_=q.length,te=0;te<_;te++)U.call(J,q[te],this);return this},forEachDead:function(U,J){for(var q=this.dead,_=q.length,te=0;te<_;te++)U.call(J,q[te],this);return this},start:function(U,J){return U===void 0&&(U=0),this.emitting||(U>0&&this.fastForward(U),this.emitting=!0,this.resetCounters(this.frequency,!0),J!==void 0&&(this.duration=Math.abs(J)),this.emit(l.START,this)),this},stop:function(U){return U===void 0&&(U=!1),this.emitting&&(this.emitting=!1,U&&this.killAll(),this.emit(l.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(U,J){return U===void 0&&(U=""),J===void 0&&(J=this.true),this.sortProperty=U,this.sortOrderAsc=J,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(U){return this.sortProperty!==""?U=this.depthSortCallback:U=null,this.sortCallback=U,this},depthSort:function(){return W(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(U,J){var q=this.sortProperty;return this.sortOrderAsc?U[q]-J[q]:J[q]-U[q]},flow:function(U,J,q){return J===void 0&&(J=1),this.emitting=!1,this.frequency=U,this.quantity=J,q!==void 0&&(this.stopAfter=q),this.start()},explode:function(U,J,q){this.frequency=-1,this.resetCounters(-1,!0);var _=this.emitParticle(U,J,q);return this.emit(l.EXPLODE,this,_),_},emitParticleAt:function(U,J,q){return this.emitParticle(q,U,J)},emitParticle:function(U,J,q){if(!this.atLimit()){U===void 0&&(U=this.ops.quantity.onEmit());for(var _=this.dead,te=this.stopAfter,se=this.follow?this.follow.x+this.followOffset.x:J,ne=this.follow?this.follow.y+this.followOffset.y:q,he=0;he<U;he++){var le=_.pop();if(le||(le=new this.particleClass(this)),le.fire(se,ne)?(this.particleBringToTop?this.alive.push(le):this.alive.unshift(le),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,le,this)):this.dead.push(le),te>0&&(this.stopCounter++,this.stopCounter>=te)||this.atLimit())break}return le}},fastForward:function(U,J){J===void 0&&(J=1e3/60);var q=0;for(this.skipping=!0;q<Math.abs(U);)this.preUpdate(0,J),q+=J;return this.skipping=!1,this},preUpdate:function(U,J){J*=this.timeScale;var q=J/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var _=this.getProcessors(),te=this.alive,se=this.dead,ne=0,he=[],le=te.length;for(ne=0;ne<le;ne++){var ge=te[ne];ge.update(J,q,_)&&he.push({index:ne,particle:ge})}if(le=he.length,le>0){var re=this.deathCallback,fe=this.deathCallbackScope;for(ne=le-1;ne>=0;ne--){var Ae=he[ne];te.splice(Ae.index,1),se.push(Ae.particle),re&&re.call(fe,Ae.particle),Ae.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&te.length===0&&(this.completeFlag=0,this.emit(l.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=J;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=J,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(U){for(var J=this.getWorldTransformMatrix(),q=this.alive,_=q.length,te=[],se=0;se<_;se++){var ne=q[se];F(U,ne.getBounds(J))&&te.push(ne)}return te},getBounds:function(U,J,q,_){U===void 0&&(U=0),J===void 0&&(J=0),q===void 0&&(q=1e3/60),_===void 0&&(_=new I);var te=this.getWorldTransformMatrix(),se,ne,he=this.alive,le=!1;if(_.setTo(0,0,0,0),J>0){var ge=0;for(this.skipping=!0;ge<Math.abs(J);){for(this.preUpdate(0,q),se=0;se<he.length;se++)ne=he[se].getBounds(te),le?M(_,ne):(le=!0,r(ne,_));ge+=q}this.skipping=!1}else for(se=0;se<he.length;se++)ne=he[se].getBounds(te),le?M(_,ne):(le=!0,r(ne,_));return U>0&&C(_,U,U),_},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(U){this.ops.x.onChange(U)}},particleY:{get:function(){return this.ops.y.current},set:function(U){this.ops.y.onChange(U)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(U){this.ops.accelerationX.onChange(U)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(U){this.ops.accelerationY.onChange(U)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(U){this.ops.maxVelocityX.onChange(U)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(U){this.ops.maxVelocityY.onChange(U)}},speed:{get:function(){return this.ops.speedX.current},set:function(U){this.ops.speedX.onChange(U),this.ops.speedY.onChange(U)}},speedX:{get:function(){return this.ops.speedX.current},set:function(U){this.ops.speedX.onChange(U)}},speedY:{get:function(){return this.ops.speedY.current},set:function(U){this.ops.speedY.onChange(U)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(U){this.ops.moveToX.onChange(U)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(U){this.ops.moveToY.onChange(U)}},bounce:{get:function(){return this.ops.bounce.current},set:function(U){this.ops.bounce.onChange(U)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(U){this.ops.scaleX.onChange(U)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(U){this.ops.scaleY.onChange(U)}},particleColor:{get:function(){return this.ops.color.current},set:function(U){this.ops.color.onChange(U)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(U){this.ops.color.setEase(U)}},particleTint:{get:function(){return this.ops.tint.current},set:function(U){this.ops.tint.onChange(U)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(U){this.ops.alpha.onChange(U)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(U){this.ops.lifespan.onChange(U)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(U){this.ops.angle.onChange(U)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(U){this.ops.rotate.onChange(U)}},quantity:{get:function(){return this.ops.quantity.current},set:function(U){this.ops.quantity.onChange(U)}},delay:{get:function(){return this.ops.delay.current},set:function(U){this.ops.delay.onChange(U)}},hold:{get:function(){return this.ops.hold.current},set:function(U){this.ops.hold.onChange(U)}},flowCounter:{get:function(){return this.counters[0]},set:function(U){this.counters[0]=U}},frameCounter:{get:function(){return this.counters[1]},set:function(U){this.counters[1]=U}},animCounter:{get:function(){return this.counters[2]},set:function(U){this.counters[2]=U}},elapsed:{get:function(){return this.counters[3]},set:function(U){this.counters[3]=U}},stopCounter:{get:function(){return this.counters[4]},set:function(U){this.counters[4]=U}},completeFlag:{get:function(){return this.counters[5]},set:function(U){this.counters[5]=U}},zoneIndex:{get:function(){return this.counters[6]},set:function(U){this.counters[6]=U}},zoneTotal:{get:function(){return this.counters[7]},set:function(U){this.counters[7]=U}},currentFrame:{get:function(){return this.counters[8]},set:function(U){this.counters[8]=U}},currentAnim:{get:function(){return this.counters[9]},set:function(U){this.counters[9]=U}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var U,J=this.ops;for(U=0;U<j.length;U++){var q=j[U];J[q].destroy()}for(U=0;U<this.alive.length;U++)this.alive[U].destroy();for(U=0;U<this.dead.length;U++)this.dead[U].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});h.exports=Y},9871:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(59996),u=e(61340),n=new u,r=new u,a=new u,s=new u,o=function(d,l,f,m){var g=n,p=r,y=a,S=s;m?(S.loadIdentity(),S.multiply(m),S.translate(l.x,l.y),S.rotate(l.rotation),S.scale(l.scaleX,l.scaleY)):S.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var C=d.currentContext,A=f.roundPixels,M=f.alpha,L=l.alpha,P=l.alive,O=P.length,D=l.viewBounds;if(!(!l.visible||O===0||D&&!i(D,f.worldView))){l.sortCallback&&l.depthSort(),f.addToRenderList(l);var I=l.scrollFactorX,F=l.scrollFactorY;C.save(),C.globalCompositeOperation=d.blendModes[l.blendMode];for(var H=0;H<O;H++){var k=P[H],W=k.alpha*L*M;if(!(W<=0||k.scaleX===0||k.scaleY===0)){y.applyITRS(k.x,k.y,k.rotation,k.scaleX,k.scaleY),g.copyFrom(f.matrix),g.multiplyWithOffset(S,-f.scrollX*I,-f.scrollY*F),y.e=k.x,y.f=k.y,g.multiply(y,p);var $=k.frame,K=$.canvasData;if(K.width>0&&K.height>0){var Z=-$.halfWidth,X=-$.halfHeight;C.globalAlpha=W,C.save(),p.setToContext(C),A&&(Z=Math.round(Z),X=Math.round(X)),C.imageSmoothingEnabled=!$.source.scaleMode,C.drawImage($.source.image,K.x,K.y,K.width,K.height,Z,X,K.width,K.height),C.restore()}}}C.restore()}};h.exports=o},92730:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(44603),n=e(23568),r=e(95540),a=e(31600);u.register("particles",function(s,o){s===void 0&&(s={});var d=n(s,"key",null),l=r(s,"config",null),f=new a(this.scene,0,0,d);return o!==void 0&&(s.add=o),i(this.scene,f,s),l&&f.setConfig(l),f})},676:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(31600);i.register("particles",function(n,r,a,s){return n!==void 0&&typeof n=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new u(this.scene,n,r,a,s))})},90668:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(21188),n=e(9871),h.exports={renderWebGL:u,renderCanvas:n}},21188:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(59996),u=e(61340),n=e(70554),r=new u,a=new u,s=new u,o=new u,d=function(l,f,m,g){var p=l.pipelines.set(f.pipeline),y=r,S=a,C=s,A=o;g?(A.loadIdentity(),A.multiply(g),A.translate(f.x,f.y),A.rotate(f.rotation),A.scale(f.scaleX,f.scaleY)):A.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY);var M=n.getTintAppendFloatAlpha,L=m.alpha,P=f.alpha;l.pipelines.preBatch(f);var O=f.alive,D=O.length,I=f.viewBounds;if(!(D===0||I&&!i(I,m.worldView))){f.sortCallback&&f.depthSort(),m.addToRenderList(f),y.copyFrom(m.matrix),y.multiplyWithOffset(A,-m.scrollX*f.scrollFactorX,-m.scrollY*f.scrollFactorY),l.setBlendMode(f.blendMode),f.mask&&(f.mask.preRenderWebGL(l,f,m),l.pipelines.set(f.pipeline));for(var F=f.tintFill,H,k,W=0;W<D;W++){var $=O[W],K=$.alpha*P*L;if(!(K<=0||$.scaleX===0||$.scaleY===0)){C.applyITRS($.x,$.y,$.rotation,$.scaleX,$.scaleY),C.e=$.x,C.f=$.y,y.multiply(C,S);var Z=$.frame;Z.glTexture!==k&&(k=Z.glTexture,H=p.setGameObject(f,Z));var X=-Z.halfWidth,j=-Z.halfHeight,Y=S.setQuad(X,j,X+Z.width,j+Z.height),U=M($.tint,K);p.shouldFlush(6)&&(p.flush(),H=p.setGameObject(f,Z)),p.batchQuad(f,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],Z.u0,Z.v0,Z.u1,Z.v1,U,U,U,U,F,k,H)}}f.mask&&f.mask.postRenderWebGL(l,m),l.pipelines.postBatch(f)}};h.exports=d},20286:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a,s){r===void 0&&(r=0),a===void 0&&(a=0),s===void 0&&(s=!0),this.emitter,this.x=r,this.y=a,this.active=s},update:function(){},destroy:function(){this.emitter=null}});h.exports=u},9774:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},812:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="deathzone"},30522:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="explode"},96695:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},18677:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stop"},20696:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={COMPLETE:e(9774),DEATH_ZONE:e(812),EXPLODE:e(30522),START:e(96695),STOP:e(18677)}},18404:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={EmitterColorOp:e(76472),EmitterOp:e(44777),Events:e(20696),GravityWell:e(24502),Particle:e(56480),ParticleBounds:e(69601),ParticleEmitter:e(31600),ParticleProcessor:e(20286),Zones:e(21024)}},26388:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a){this.source=r,this.killOnEnter=a},willKill:function(n){var r=this.source.contains(n.x,n.y);return r&&this.killOnEnter||!r&&!this.killOnEnter}});h.exports=u},19909:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a,s,o,d,l){o===void 0&&(o=!1),d===void 0&&(d=!0),l===void 0&&(l=-1),this.source=r,this.points=[],this.quantity=a,this.stepRate=s,this.yoyo=o,this.counter=-1,this.seamless=d,this._length=0,this._direction=0,this.total=l,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var n=this.points[0],r=this.points[this.points.length-1];n.x===r.x&&n.y===r.y&&this.points.pop()}var a=this._length;return this._length=this.points.length,this._length<a&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(n){return this.source=n,this.updateSource()},getPoint:function(n){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var r=this.points[this.counter];r&&(n.x=r.x,n.y=r.y)}});h.exports=u},68875:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(26099),n=new i({initialize:function(a){this.source=a,this._tempVec=new u,this.total=-1},getPoint:function(r){var a=this._tempVec;this.source.getRandomPoint(a),r.x=a.x,r.y=a.y}});h.exports=n},21024:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={DeathZone:e(26388),EdgeZone:e(19909),RandomZone:e(68875)}},1159:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31401),n=e(68287),r=new i({Extends:n,Mixins:[u.PathFollower],initialize:function(s,o,d,l,f,m){n.call(this,s,d,l,f,m),this.path=o},preUpdate:function(a,s){this.anims.update(a,s),this.pathUpdate(a)}});h.exports=r},90145:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(1159);i.register("follower",function(n,r,a,s,o){var d=new u(this.scene,n,r,a,s,o);return this.displayList.add(d),this.updateList.add(d),d})},33663:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(9674),u=e(83419),n=e(48803),r=e(90664),a=e(4703),s=e(45650),o=new u({Extends:a,initialize:function(l,f,m,g,p,y,S,C){g||(g="__DEFAULT"),a.call(this,l,f,m,g,p),this.type="Plane",this.anims=new i(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(y,S,C),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(d,l,f){d===void 0&&(d=8),l===void 0&&(l=8),f===void 0&&(f=!1);var m=!1;return f&&(m=!0),this.gridWidth=d,this.gridHeight=l,this.isTiled=f,this.clear(),n({mesh:this,widthSegments:d,heightSegments:l,isOrtho:!1,tile:f,flipY:m}),this},setSizeToFrame:function(d){d===void 0&&(d=!0);var l=this.frame;if(this.setPerspective(this.width/l.width,this.height/l.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!d)return this;var f=this.gridWidth,m=this.gridHeight,g=this.vertices,p=l.u0,y=l.u1,S=l.v0,C=l.v1,A,M,L=0;if(this.isTiled)for(S=l.v1,C=l.v0,M=0;M<m;M++)for(A=0;A<f;A++)g[L++].setUVs(p,C),g[L++].setUVs(p,S),g[L++].setUVs(y,C),g[L++].setUVs(p,S),g[L++].setUVs(y,S),g[L++].setUVs(y,C);else{var P=f+1,O=m+1,D=y-p,I=C-S,F=[];for(M=0;M<O;M++)for(A=0;A<P;A++){var H=p+D*(A/f),k=S+I*(M/m);F.push(H,k)}for(M=0;M<m;M++)for(A=0;A<f;A++){var W=(A+P*M)*2,$=(A+P*(M+1))*2,K=(A+1+P*(M+1))*2,Z=(A+1+P*M)*2;g[L++].setUVs(F[W],F[W+1]),g[L++].setUVs(F[$],F[$+1]),g[L++].setUVs(F[Z],F[Z+1]),g[L++].setUVs(F[$],F[$+1]),g[L++].setUVs(F[K],F[K+1]),g[L++].setUVs(F[Z],F[Z+1])}}return this},setViewHeight:function(d){d===void 0&&(d=this.frame.height);var l=this.fov*(Math.PI/180);this.viewPosition.z=this.height/d/Math.tan(l/2),this.dirtyCache[10]=1},createCheckerboard:function(d,l,f,m,g){d===void 0&&(d=16777215),l===void 0&&(l=255),f===void 0&&(f=255),m===void 0&&(m=255),g===void 0&&(g=128);for(var p=r(d),y=r(l),S=[],C=0;C<16;C++)for(var A=0;A<16;A++)C<8&&A<8||C>7&&A>7?S.push(p.r,p.g,p.b,f):S.push(y.r,y.g,y.b,m);var M=this.scene.sys.textures.addUint8Array(s(),new Uint8Array(S),16,16);return this.removeCheckerboard(),this.setTexture(M),this.setSizeToFrame(),this.setViewHeight(g),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(d,l){return this.anims.play(d,l)},playReverse:function(d,l){return this.anims.playReverse(d,l)},playAfterDelay:function(d,l){return this.anims.playAfterDelay(d,l)},playAfterRepeat:function(d,l){return this.anims.playAfterRepeat(d,l)},stop:function(){return this.anims.stop()},stopAfterDelay:function(d){return this.anims.stopAfterDelay(d)},stopAfterRepeat:function(d){return this.anims.stopAfterRepeat(d)},stopOnFrame:function(d){return this.anims.stopOnFrame(d)},preUpdate:function(d,l){a.prototype.preUpdate.call(this,d,l),this.anims.update(d,l)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});h.exports=o},56015:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(13059),n=e(44603),r=e(23568),a=e(35154),s=e(33663);n.register("plane",function(o,d){o===void 0&&(o={});var l=r(o,"key",null),f=r(o,"frame",null),m=a(o,"width",8),g=a(o,"height",8),p=a(o,"tile",!1),y=new s(this.scene,0,0,l,f,m,g,p);d!==void 0&&(o.add=d);var S=a(o,"checkerboard",null);if(S){var C=a(S,"color1",16777215),A=a(S,"color2",255),M=a(S,"alpha1",255),L=a(S,"alpha2",255),P=a(S,"height",128);y.createCheckerboard(C,A,M,L,P)}return i(this.scene,y,o),u(y,o),y})},30985:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(33663),u=e(39429);u.register("plane",function(n,r,a,s,o,d,l){return this.displayList.add(new i(this.scene,n,r,a,s,o,d,l))})},80321:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31401),n=e(95643),r=e(30100),a=e(36060),s=e(67277),o=new i({Extends:n,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Transform,u.Visible,s],initialize:function(l,f,m,g,p,y,S){g===void 0&&(g=16777215),p===void 0&&(p=128),y===void 0&&(y=1),S===void 0&&(S=.1),n.call(this,l,"PointLight"),this.initPipeline(a.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(f,m),this.color=r(g),this.intensity=y,this.attenuation=S,this.width=p*2,this.height=p*2,this._radius=p},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this.width=d*2,this.height=d*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});h.exports=o},39829:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(44603),n=e(23568),r=e(80321);u.register("pointlight",function(a,s){a===void 0&&(a={});var o=n(a,"color",16777215),d=n(a,"radius",128),l=n(a,"intensity",1),f=n(a,"attenuation",.1),m=new r(this.scene,0,0,o,d,l,f);return s!==void 0&&(a.add=s),i(this.scene,m,a),m})},71255:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(80321);i.register("pointlight",function(n,r,a,s,o,d){return this.displayList.add(new u(this.scene,n,r,a,s,o,d))})},67277:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(57787),h.exports={renderWebGL:u,renderCanvas:n}},57787:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=function(n,r,a,s){a.addToRenderList(r);var o=n.pipelines.set(r.pipeline),d=i(r,a,s).calc,l=r.width,f=r.height,m=-r._radius,g=-r._radius,p=m+l,y=g+f,S=d.getX(0,0),C=d.getY(0,0),A=d.getX(m,g),M=d.getY(m,g),L=d.getX(m,y),P=d.getY(m,y),O=d.getX(p,y),D=d.getY(p,y),I=d.getX(p,g),F=d.getY(p,g);n.pipelines.preBatch(r),o.batchPointLight(r,a,A,M,L,P,O,D,I,F,S,C),n.pipelines.postBatch(r)};h.exports=u},591:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(81320),n=e(88571),r=new i({Extends:n,initialize:function(s,o,d,l,f){o===void 0&&(o=0),d===void 0&&(d=0),l===void 0&&(l=32),f===void 0&&(f=32);var m=new u(s.sys.textures,"",l,f);n.call(this,s,o,d,m),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(a,s){this.width=a,this.height=s,this.texture.setSize(a,s),this.updateDisplayOrigin();var o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=a,o.hitArea.height=s),this},resize:function(a,s){return this.setSize(a,s),this},saveTexture:function(a){var s=this.texture;return s.key=a,s.manager.addDynamicTexture(s)&&(this._saved=!0),s},fill:function(a,s,o,d,l,f){return this.texture.fill(a,s,o,d,l,f),this},clear:function(){return this.texture.clear(),this},stamp:function(a,s,o,d,l){return this.texture.stamp(a,s,o,d,l),this},erase:function(a,s,o){return this.texture.erase(a,s,o),this},draw:function(a,s,o,d,l){return this.texture.draw(a,s,o,d,l),this},drawFrame:function(a,s,o,d,l,f){return this.texture.drawFrame(a,s,o,d,l,f),this},repeat:function(a,s,o,d,l,f,m,g,p){return this.texture.repeat(a,s,o,d,l,f,m,g,p),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(a,s,o,d,l){return this.texture.batchDraw(a,s,o,d,l),this},batchDrawFrame:function(a,s,o,d,l,f){return this.texture.batchDrawFrame(a,s,o,d,l,f),this},endDraw:function(a){return this.texture.endDraw(a),this},snapshotArea:function(a,s,o,d,l,f,m){return this.texture.snapshotArea(a,s,o,d,l,f,m),this},snapshot:function(a,s,o){return this.snapshotArea(0,0,this.width,this.height,a,s,o)},snapshotPixel:function(a,s,o){return this.snapshotArea(a,s,1,1,o,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});h.exports=r},34495:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(44603),n=e(23568),r=e(591);u.register("renderTexture",function(a,s){a===void 0&&(a={});var o=n(a,"x",0),d=n(a,"y",0),l=n(a,"width",32),f=n(a,"height",32),m=new r(this.scene,o,d,l,f);return s!==void 0&&(a.add=s),i(this.scene,m,a),m})},60505:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(591);i.register("renderTexture",function(n,r,a,s){return this.displayList.add(new u(this.scene,n,r,a,s))})},77757:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(9674),u=e(83419),n=e(31401),r=e(95643),a=e(36060),s=e(38745),o=e(26099),d=new u({Extends:r,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Flip,n.Mask,n.Pipeline,n.PostPipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,s],initialize:function(f,m,g,p,y,S,C,A,M){p===void 0&&(p="__DEFAULT"),S===void 0&&(S=2),C===void 0&&(C=!0),r.call(this,f,"Rope"),this.anims=new i(this),this.points=S,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=p==="__DEFAULT",this.dirty=!1,this.horizontal=C,this._flipX=!1,this._flipY=!1,this._perp=new o,this.debugCallback=null,this.debugGraphic=null,this.setTexture(p,y),this.setPosition(m,g),this.setSizeToFrame(),this.initPipeline(a.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(S)&&this.resizeArrays(S.length),this.setPoints(S,A,M),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(l,f){var m=this.anims.currentFrame;this.anims.update(l,f),this.anims.currentFrame!==m&&(this.updateUVs(),this.updateVertices())},play:function(l,f,m){return this.anims.play(l,f,m),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(l,f,m){return l===void 0&&(l=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(l,f,m))},setVertical:function(l,f,m){return l===void 0&&(l=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(l,f,m)):this},setTintFill:function(l){return l===void 0&&(l=!1),this.tintFill=l,this},setAlphas:function(l,f){var m=this.points.length;if(m<1)return this;var g=this.alphas;l===void 0?l=[1]:!Array.isArray(l)&&f===void 0&&(l=[l]);var p,y=0;if(f!==void 0)for(p=0;p<m;p++)y=p*2,g[y]=l,g[y+1]=f;else if(l.length===m)for(p=0;p<m;p++)y=p*2,g[y]=l[p],g[y+1]=l[p];else{var S=l[0];for(p=0;p<m;p++)y=p*2,l.length>y&&(S=l[y]),g[y]=S,l.length>y+1&&(S=l[y+1]),g[y+1]=S}return this},setColors:function(l){var f=this.points.length;if(f<1)return this;var m=this.colors;l===void 0?l=[16777215]:Array.isArray(l)||(l=[l]);var g,p=0;if(l.length===f)for(g=0;g<f;g++)p=g*2,m[p]=l[g],m[p+1]=l[g];else{var y=l[0];for(g=0;g<f;g++)p=g*2,l.length>p&&(y=l[p]),m[p]=y,l.length>p+1&&(y=l[p+1]),m[p+1]=y}return this},setPoints:function(l,f,m){if(l===void 0&&(l=2),typeof l=="number"){var g=l;g<2&&(g=2),l=[];var p,y,S;if(this.horizontal)for(S=-this.frame.halfWidth,y=this.frame.width/(g-1),p=0;p<g;p++)l.push({x:S+p*y,y:0});else for(S=-this.frame.halfHeight,y=this.frame.height/(g-1),p=0;p<g;p++)l.push({x:0,y:S+p*y})}var C=l.length,A=this.points.length;return C<1?(console.warn("Rope: Not enough points given"),this):(C===1&&(l.unshift({x:0,y:0}),C++),A!==C&&this.resizeArrays(C),this.dirty=!0,this.points=l,this.updateUVs(),f!=null&&this.setColors(f),m!=null&&this.setAlphas(m),this)},updateUVs:function(){for(var l=this.uv,f=this.points.length,m=this.frame.u0,g=this.frame.v0,p=this.frame.u1,y=this.frame.v1,S=(p-m)/(f-1),C=(y-g)/(f-1),A=0;A<f;A++){var M=A*4,L,P,O,D;this.horizontal?(this._flipX?(L=p-A*S,O=p-A*S):(L=m+A*S,O=m+A*S),this._flipY?(P=y,D=g):(P=g,D=y)):(this._flipX?(L=m,O=p):(L=p,O=m),this._flipY?(P=y-A*C,D=y-A*C):(P=g+A*C,D=g+A*C)),l[M+0]=L,l[M+1]=P,l[M+2]=O,l[M+3]=D}return this},resizeArrays:function(l){var f=this.colors,m=this.alphas;this.vertices=new Float32Array(l*4),this.uv=new Float32Array(l*4),f=new Uint32Array(l*2),m=new Float32Array(l*2);for(var g=0;g<l*2;g++)f[g]=16777215,m[g]=1;return this.colors=f,this.alphas=m,this.dirty=!0,this},updateVertices:function(){var l=this._perp,f=this.points,m=this.vertices,g=f.length;if(this.dirty=!1,!(g<1)){for(var p,y=f[0],S=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,C=0;C<g;C++){var A=f[C],M=C*4;C<g-1?p=f[C+1]:p=A,l.x=p.y-y.y,l.y=-(p.x-y.x);var L=l.length();l.x/=L,l.y/=L,l.x*=S,l.y*=S,m[M]=A.x+l.x,m[M+1]=A.y+l.y,m[M+2]=A.x-l.x,m[M+3]=A.y-l.y,y=A}return this}},setDebug:function(l,f){return this.debugGraphic=l,!l&&!f?this.debugCallback=null:f?this.debugCallback=f:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(l,f,m){var g=l.debugGraphic,p=m[0],y=m[1],S=m[2],C=m[3];g.lineBetween(p,y,S,C);for(var A=4;A<f;A+=4){var M=m[A+0],L=m[A+1],P=m[A+2],O=m[A+3];g.lineBetween(p,y,M,L),g.lineBetween(S,C,P,O),g.lineBetween(S,C,M,L),g.lineBetween(M,L,P,O),p=M,y=L,S=P,C=O}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(l){return this._flipX=l,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(l){return this._flipY=l,this.updateUVs()}}});h.exports=d},95262:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(){};h.exports=w},26209:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(44603),n=e(23568),r=e(35154),a=e(77757);u.register("rope",function(s,o){s===void 0&&(s={});var d=n(s,"key",null),l=n(s,"frame",null),f=n(s,"horizontal",!0),m=r(s,"points",void 0),g=r(s,"colors",void 0),p=r(s,"alphas",void 0),y=new a(this.scene,0,0,d,l,m,f,g,p);return o!==void 0&&(s.add=o),i(this.scene,y,s),y})},96819:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(77757),u=e(39429);u.register("rope",function(n,r,a,s,o,d,l,f){return this.displayList.add(new i(this.scene,n,r,a,s,o,d,l,f))})},38745:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(20439),n=e(95262),h.exports={renderWebGL:u,renderCanvas:n}},20439:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=e(70554),n=function(r,a,s,o){s.addToRenderList(a);var d=r.pipelines.set(a.pipeline,a),l=i(a,s,o).calc,f=a.vertices,m=a.uv,g=a.colors,p=a.alphas,y=a.alpha,S=u.getTintAppendFloatAlpha,C=s.roundPixels,A=f.length,M=Math.floor(A*.5);d.flush(),r.pipelines.preBatch(a);var L=d.setGameObject(a),P=d.vertexViewF32,O=d.vertexViewU32,D=d.vertexCount*d.currentShader.vertexComponentCount-1,I=0,F=a.tintFill;a.dirty&&a.updateVertices();for(var H=a.debugCallback,k=[],W=0;W<A;W+=2){var $=f[W+0],K=f[W+1],Z=$*l.a+K*l.c+l.e,X=$*l.b+K*l.d+l.f;C&&(Z=Math.round(Z),X=Math.round(X)),P[++D]=Z,P[++D]=X,P[++D]=m[W+0],P[++D]=m[W+1],P[++D]=L,P[++D]=F,O[++D]=S(g[I],s.alpha*(p[I]*y)),I++,H&&(k[W+0]=Z,k[W+1]=X)}H&&H.call(a,a,A,k),d.vertexCount+=M,d.currentBatch.count=d.vertexCount-d.currentBatch.start,r.pipelines.postBatch(a)};h.exports=n},20071:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31401),n=e(95643),r=e(95540),a=e(79291),s=e(61622),o=e(25479),d=e(61340),l=e(95428),f=e(92503),m=new i({Extends:n,Mixins:[u.ComputedSize,u.Depth,u.GetBounds,u.Mask,u.Origin,u.ScrollFactor,u.Transform,u.Visible,o],initialize:function(p,y,S,C,A,M,L,P){S===void 0&&(S=0),C===void 0&&(C=0),A===void 0&&(A=128),M===void 0&&(M=128),n.call(this,p,"Shader"),this.blendMode=-1,this.shader;var O=p.sys.renderer;this.renderer=O,this.gl=O.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=O.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=O.width,this._rendererHeight=O.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(S,C),this.setSize(A,M),this.setOrigin(.5,.5),this.setShader(y,L,P),this.renderer.on(f.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(g){return this.renderToTexture?!0:!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&g.id)},setRenderToTexture:function(g,p){if(!this.renderToTexture){var y=this.width,S=this.height,C=this.renderer;this.glTexture=C.createTextureFromSource(null,y,S,0),this.framebuffer=C.createFramebuffer(y,S,this.glTexture,!1),this._rendererWidth=y,this._rendererHeight=S,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),g&&(this.texture=this.scene.sys.textures.addGLTexture(g,this.glTexture))}return this.shader&&(C.pipelines.clear(),this.load(),this.flush(),C.pipelines.rebind()),this},setShader:function(g,p,y){if(this.renderer.contextLost)return this._deferSetShader={key:g,textures:p,textureData:y},this;if(p===void 0&&(p=[]),typeof g=="string"){var S=this.scene.sys.cache.shader;if(!S.has(g))return console.warn("Shader missing: "+g),this;this.shader=S.get(g)}else this.shader=g;var C=this.gl,A=this.renderer;this.program&&A.deleteProgram(this.program);var M=A.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);C.uniformMatrix4fv(C.getUniformLocation(M.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),C.uniformMatrix4fv(C.getUniformLocation(M.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),C.uniform2f(C.getUniformLocation(M.webGLProgram,"uResolution"),this.width,this.height),this.program=M;var L=new Date,P={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[L.getFullYear(),L.getMonth(),L.getDate(),L.getHours()*60*60+L.getMinutes()*60+L.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=a(!0,{},this.shader.uniforms,P):this.uniforms=P;for(var O=0;O<4;O++)p[O]&&this.setSampler2D("iChannel"+O,p[O],O,y);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(g){return this.pointer=g,this},projOrtho:function(g,p,y,S){if(this.renderer.contextLost){this._deferProjOrtho={left:g,right:p,bottom:y,top:S};return}var C=-1e3,A=1e3,M=1/(g-p),L=1/(y-S),P=1/(C-A),O=this.projectionMatrix;O[0]=-2*M,O[5]=-2*L,O[10]=2*P,O[12]=(g+p)*M,O[13]=(S+y)*L,O[14]=(A+C)*P;var D=this.program,I=this.gl,F=this.renderer;F.setProgram(D),I.uniformMatrix4fv(I.getUniformLocation(D.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=p,this._rendererHeight=y},initUniforms:function(){var g=this.renderer.glFuncMap,p=this.program;this._textureCount=0;for(var y in this.uniforms){var S=this.uniforms[y],C=S.type,A=g[C];S.uniformLocation=this.renderer.createUniformLocation(p,y),C!=="sampler2D"&&(S.glMatrix=A.matrix,S.glValueLength=A.length,S.glFunc=A.func)}},setSampler2DBuffer:function(g,p,y,S,C,A){C===void 0&&(C=0),A===void 0&&(A={});var M=this.uniforms[g];return M.value=p,A.width=y,A.height=S,M.textureData=A,this._textureCount=C,this.initSampler2D(M),this},setSampler2D:function(g,p,y,S){y===void 0&&(y=0);var C=this.scene.sys.textures;if(C.exists(p)){var A=C.getFrame(p);if(A.glTexture&&A.glTexture.isRenderTexture)return this.setSampler2DBuffer(g,A.glTexture,A.width,A.height,y,S);var M=this.uniforms[g],L=A.source;M.textureKey=p,M.source=L.image,M.value=A.glTexture,L.isGLTexture&&(S||(S={}),S.width=L.width,S.height=L.height),S&&(M.textureData=S),this._textureCount=y,this.initSampler2D(M)}return this},setUniform:function(g,p){return s(this.uniforms,g,p),this},getUniform:function(g){return r(this.uniforms,g,null)},setChannel0:function(g,p){return this.setSampler2D("iChannel0",g,0,p)},setChannel1:function(g,p){return this.setSampler2D("iChannel1",g,1,p)},setChannel2:function(g,p){return this.setSampler2D("iChannel2",g,2,p)},setChannel3:function(g,p){return this.setSampler2D("iChannel3",g,3,p)},initSampler2D:function(g){if(g.value){var p=g.textureData;if(p&&!g.value.isRenderTexture){var y=this.gl,S=g.value,C=y[r(p,"magFilter","linear").toUpperCase()],A=y[r(p,"minFilter","linear").toUpperCase()],M=y[r(p,"wrapS","repeat").toUpperCase()],L=y[r(p,"wrapT","repeat").toUpperCase()],P=y[r(p,"format","rgba").toUpperCase()],O=r(p,"flipY",!1),D=r(p,"width",S.width),I=r(p,"height",S.height),F=r(p,"source",S.pixels);p.repeat&&(M=y.REPEAT,L=y.REPEAT),p.width&&(F=null),S.update(F,D,I,O,M,L,A,C,P)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var g=this.gl,p=this.uniforms,y,S,C,A,M,L=0;for(var P in p)y=p[P],C=y.glFunc,S=y.glValueLength,A=y.uniformLocation,M=y.value,M!==null&&(S===1?y.glMatrix?C.call(g,A.webGLUniformLocation,y.transpose,M):C.call(g,A.webGLUniformLocation,M):S===2?C.call(g,A.webGLUniformLocation,M.x,M.y):S===3?C.call(g,A.webGLUniformLocation,M.x,M.y,M.z):S===4?C.call(g,A.webGLUniformLocation,M.x,M.y,M.z,M.w):y.type==="sampler2D"&&(g.activeTexture(g.TEXTURE0+L),g.bindTexture(g.TEXTURE_2D,M.webGLTexture),g.uniform1i(A.webGLUniformLocation,L),L++))},load:function(g){var p=this.gl,y=this.width,S=this.height,C=this.renderer,A=this.program,M=this.viewMatrix;if(!this.renderToTexture){var L=-this._displayOriginX,P=-this._displayOriginY;M[0]=g[0],M[1]=g[1],M[4]=g[2],M[5]=g[3],M[8]=g[4],M[9]=g[5],M[12]=M[0]*L+M[4]*P,M[13]=M[1]*L+M[5]*P}p.useProgram(A.webGLProgram),p.uniformMatrix4fv(p.getUniformLocation(A.webGLProgram,"uViewMatrix"),!1,M),p.uniformMatrix4fv(p.getUniformLocation(A.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),p.uniform2f(p.getUniformLocation(A.webGLProgram,"uResolution"),this.width,this.height);var O=this.uniforms,D=O.resolution;D.value.x=y,D.value.y=S,O.time.value=C.game.loop.getDuration();var I=this.pointer;if(I){var F=O.mouse,H=I.x/y,k=1-I.y/S;F.value.x=H.toFixed(2),F.value.y=k.toFixed(2)}this.syncUniforms()},flush:function(){var g=this.width,p=this.height,y=this.program,S=this.gl,C=this.vertexBuffer,A=this.renderer,M=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(A.setFramebuffer(this.framebuffer),S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT)),S.bindBuffer(S.ARRAY_BUFFER,C.webGLBuffer);var L=S.getAttribLocation(y.webGLProgram,"inPosition");L!==-1&&(S.enableVertexAttribArray(L),S.vertexAttribPointer(L,2,S.FLOAT,!1,M,0));var P=this.vertexViewF32;P[3]=p,P[4]=g,P[5]=p,P[8]=g,P[9]=p,P[10]=g;var O=6;S.bufferSubData(S.ARRAY_BUFFER,0,this.bytes.subarray(0,O*M)),S.drawArrays(S.TRIANGLES,0,O),this.renderToTexture&&A.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var g=this._deferSetShader.key,p=this._deferSetShader.textures,y=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(g,p,y)}if(this._deferProjOrtho!==null){var S=this._deferProjOrtho.left,C=this._deferProjOrtho.right,A=this._deferProjOrtho.bottom,M=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(S,C,A,M)}},preDestroy:function(){var g=this.renderer;g.off(f.RESTORE_WEBGL,this.onContextRestored,this),g.deleteProgram(this.program),g.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(g.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),l(this.uniforms,function(p){g.deleteUniformLocation(p.uniformLocation),p.uniformLocation=null})}});h.exports=m},80464:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(){};h.exports=w},54935:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(44603),n=e(23568),r=e(20071);u.register("shader",function(a,s){a===void 0&&(a={});var o=n(a,"key",null),d=n(a,"x",0),l=n(a,"y",0),f=n(a,"width",128),m=n(a,"height",128),g=new r(this.scene,o,d,l,f,m);return s!==void 0&&(a.add=s),i(this.scene,g,a),g})},74177:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(20071),u=e(39429);u.register("shader",function(n,r,a,s,o,d,l){return this.displayList.add(new i(this.scene,n,r,a,s,o,d,l))})},25479:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(19257),n=e(80464),h.exports={renderWebGL:u,renderCanvas:n}},19257:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=function(n,r,a,s){if(r.shader){if(a.addToRenderList(r),n.pipelines.clear(),r.renderToTexture)r.load(),r.flush();else{var o=i(r,a,s).calc;(n.width!==r._rendererWidth||n.height!==r._rendererHeight)&&r.projOrtho(0,n.width,n.height,0),r.load(o.matrix),r.flush()}n.pipelines.rebind()}};h.exports=u},10441:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(70554),u=function(n,r,a,s,o,d){for(var l=i.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*s),f=a.pathData,m=a.pathIndexes,g=0;g<m.length;g+=3){var p=m[g]*2,y=m[g+1]*2,S=m[g+2]*2,C=f[p+0]-o,A=f[p+1]-d,M=f[y+0]-o,L=f[y+1]-d,P=f[S+0]-o,O=f[S+1]-d,D=r.getX(C,A),I=r.getY(C,A),F=r.getX(M,L),H=r.getY(M,L),k=r.getX(P,O),W=r.getY(P,O);n.batchTri(a,D,I,F,H,k,W,0,0,1,1,l,l,l,2)}};h.exports=u},65960:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r=u||i.fillColor,a=n||i.fillAlpha,s=(r&16711680)>>>16,o=(r&65280)>>>8,d=r&255;e.fillStyle="rgba("+s+","+o+","+d+","+a+")"};h.exports=w},75177:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r=u||i.strokeColor,a=n||i.strokeAlpha,s=(r&16711680)>>>16,o=(r&65280)>>>8,d=r&255;e.strokeStyle="rgba("+s+","+o+","+d+","+a+")",e.lineWidth=i.lineWidth};h.exports=w},17803:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31401),n=e(95643),r=e(23031),a=new i({Extends:n,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Transform,u.Visible],initialize:function(o,d,l){d===void 0&&(d="Shape"),n.call(this,o,d),this.geom=l,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new r,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(s,o){return o===void 0&&(o=1),s===void 0?this.isFilled=!1:(this.fillColor=s,this.fillAlpha=o,this.isFilled=!0),this},setStrokeStyle:function(s,o,d){return d===void 0&&(d=1),s===void 0?this.isStroked=!1:(this.lineWidth=s,this.strokeColor=o,this.strokeAlpha=d,this.isStroked=!0),this},setClosePath:function(s){return this.closePath=s,this},setSize:function(s,o){return this.width=s,this.height=o,this},setDisplaySize:function(s,o){return this.displayWidth=s,this.displayHeight=o,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}}});h.exports=a},34682:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(70554),u=function(n,r,a,s,o){var d=n.strokeTint,l=i.getTintAppendFloatAlpha(r.strokeColor,r.strokeAlpha*a);d.TL=l,d.TR=l,d.BL=l,d.BR=l;var f=r.pathData,m=f.length-1,g=r.lineWidth,p=g/2,y=f[0]-s,S=f[1]-o;r.closePath||(m-=2);for(var C=2;C<m;C+=2){var A=f[C]-s,M=f[C+1]-o;n.batchLine(y,S,A,M,p,p,g,C-2,r.closePath?C===m-1:!1),y=A,S=M}};h.exports=u},23629:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(13609),u=e(83419),n=e(39506),r=e(94811),a=e(96503),s=e(36383),o=e(17803),d=new u({Extends:o,Mixins:[i],initialize:function(f,m,g,p,y,S,C,A,M){m===void 0&&(m=0),g===void 0&&(g=0),p===void 0&&(p=128),y===void 0&&(y=0),S===void 0&&(S=360),C===void 0&&(C=!1),o.call(this,f,"Arc",new a(0,0,p)),this._startAngle=y,this._endAngle=S,this._anticlockwise=C,this._iterations=.01,this.setPosition(m,g);var L=this.geom.radius*2;this.setSize(L,L),A!==void 0&&this.setFillStyle(A,M),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(l){this._iterations=l,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(l){this.geom.radius=l;var f=l*2;this.setSize(f,f),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(l){this._startAngle=l,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(l){this._endAngle=l,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(l){this._anticlockwise=l,this.updateData()}},setRadius:function(l){return this.radius=l,this},setIterations:function(l){return l===void 0&&(l=.01),this.iterations=l,this},setStartAngle:function(l,f){return this._startAngle=l,f!==void 0&&(this._anticlockwise=f),this.updateData()},setEndAngle:function(l,f){return this._endAngle=l,f!==void 0&&(this._anticlockwise=f),this.updateData()},updateData:function(){var l=this._iterations,f=l,m=this.geom.radius,g=n(this._startAngle),p=n(this._endAngle),y=this._anticlockwise,S=m,C=m;p-=g,y?p<-s.PI2?p=-s.PI2:p>0&&(p=-s.PI2+p%s.PI2):p>s.PI2?p=s.PI2:p<0&&(p=s.PI2+p%s.PI2);for(var A=[S+Math.cos(g)*m,C+Math.sin(g)*m],M;f<1;)M=p*f+g,A.push(S+Math.cos(M)*m,C+Math.sin(M)*m),f+=l;return M=p+g,A.push(S+Math.cos(M)*m,C+Math.sin(M)*m),A.push(S+Math.cos(g)*m,C+Math.sin(g)*m),this.pathIndexes=r(A),this.pathData=A,this}});h.exports=d},42542:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39506),u=e(65960),n=e(75177),r=e(20926),a=function(s,o,d,l){d.addToRenderList(o);var f=s.currentContext;if(r(s,f,o,d,l)){var m=o.radius;f.beginPath(),f.arc(m-o.originX*(m*2),m-o.originY*(m*2),m,i(o._startAngle),i(o._endAngle),o.anticlockwise),o.closePath&&f.closePath(),o.isFilled&&(u(f,o),f.fill()),o.isStroked&&(n(f,o),f.stroke()),f.restore()}};h.exports=a},42563:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(23629),u=e(39429);u.register("arc",function(n,r,a,s,o,d,l,f){return this.displayList.add(new i(this.scene,n,r,a,s,o,d,l,f))}),u.register("circle",function(n,r,a,s,o){return this.displayList.add(new i(this.scene,n,r,a,0,360,!1,s,o))})},13609:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(41447),n=e(42542),h.exports={renderWebGL:u,renderCanvas:n}},41447:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=e(10441),n=e(34682),r=function(a,s,o,d){o.addToRenderList(s);var l=a.pipelines.set(s.pipeline),f=i(s,o,d),m=l.calcMatrix.copyFrom(f.calc),g=s._displayOriginX,p=s._displayOriginY,y=o.alpha*s.alpha;a.pipelines.preBatch(s),s.isFilled&&u(l,m,s,y,g,p),s.isStroked&&n(l,s,y,g,p),a.pipelines.postBatch(s)};h.exports=r},89:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(33141),n=e(94811),r=e(87841),a=e(17803),s=new i({Extends:a,Mixins:[u],initialize:function(d,l,f,m,g,p){l===void 0&&(l=0),f===void 0&&(f=0),a.call(this,d,"Curve",m),this._smoothness=32,this._curveBounds=new r,this.closePath=!1,this.setPosition(l,f),g!==void 0&&this.setFillStyle(g,p),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){var o=this._curveBounds,d=this._smoothness;this.geom.getBounds(o,d),this.setSize(o.width,o.height),this.updateDisplayOrigin();for(var l=[],f=this.geom.getPoints(d),m=0;m<f.length;m++)l.push(f[m].x,f[m].y);return l.push(f[0].x,f[0].y),this.pathIndexes=n(l),this.pathData=l,this}});h.exports=s},3170:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(65960),u=e(75177),n=e(20926),r=function(a,s,o,d){o.addToRenderList(s);var l=a.currentContext;if(n(a,l,s,o,d)){var f=s._displayOriginX+s._curveBounds.x,m=s._displayOriginY+s._curveBounds.y,g=s.pathData,p=g.length-1,y=g[0]-f,S=g[1]-m;l.beginPath(),l.moveTo(y,S),s.closePath||(p-=2);for(var C=2;C<p;C+=2){var A=g[C]-f,M=g[C+1]-m;l.lineTo(A,M)}s.closePath&&l.closePath(),s.isFilled&&(i(l,s),l.fill()),s.isStroked&&(u(l,s),l.stroke()),l.restore()}};h.exports=r},40511:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(89);i.register("curve",function(n,r,a,s,o){return this.displayList.add(new u(this.scene,n,r,a,s,o))})},33141:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(53987),n=e(3170),h.exports={renderWebGL:u,renderCanvas:n}},53987:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(10441),u=e(91296),n=e(34682),r=function(a,s,o,d){o.addToRenderList(s);var l=a.pipelines.set(s.pipeline),f=u(s,o,d),m=l.calcMatrix.copyFrom(f.calc),g=s._displayOriginX+s._curveBounds.x,p=s._displayOriginY+s._curveBounds.y,y=o.alpha*s.alpha;a.pipelines.preBatch(s),s.isFilled&&i(l,m,s,y,g,p),s.isStroked&&n(l,s,y,g,p),a.pipelines.postBatch(s)};h.exports=r},19921:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(94811),n=e(54205),r=e(8497),a=e(17803),s=new i({Extends:a,Mixins:[n],initialize:function(d,l,f,m,g,p,y){l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=128),g===void 0&&(g=128),a.call(this,d,"Ellipse",new r(m/2,g/2,m,g)),this._smoothness=64,this.setPosition(l,f),this.width=m,this.height=g,p!==void 0&&this.setFillStyle(p,y),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSize:function(o,d){return this.width=o,this.height=d,this.geom.setPosition(o/2,d/2),this.geom.setSize(o,d),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){for(var o=[],d=this.geom.getPoints(this._smoothness),l=0;l<d.length;l++)o.push(d[l].x,d[l].y);return o.push(d[0].x,d[0].y),this.pathIndexes=u(o),this.pathData=o,this}});h.exports=s},7930:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(65960),u=e(75177),n=e(20926),r=function(a,s,o,d){o.addToRenderList(s);var l=a.currentContext;if(n(a,l,s,o,d)){var f=s._displayOriginX,m=s._displayOriginY,g=s.pathData,p=g.length-1,y=g[0]-f,S=g[1]-m;l.beginPath(),l.moveTo(y,S),s.closePath||(p-=2);for(var C=2;C<p;C+=2){var A=g[C]-f,M=g[C+1]-m;l.lineTo(A,M)}l.closePath(),s.isFilled&&(i(l,s),l.fill()),s.isStroked&&(u(l,s),l.stroke()),l.restore()}};h.exports=r},1543:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(19921),u=e(39429);u.register("ellipse",function(n,r,a,s,o,d){return this.displayList.add(new i(this.scene,n,r,a,s,o,d))})},54205:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(19467),n=e(7930),h.exports={renderWebGL:u,renderCanvas:n}},19467:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(10441),u=e(91296),n=e(34682),r=function(a,s,o,d){o.addToRenderList(s);var l=a.pipelines.set(s.pipeline),f=u(s,o,d),m=l.calcMatrix.copyFrom(f.calc),g=s._displayOriginX,p=s._displayOriginY,y=o.alpha*s.alpha;a.pipelines.preBatch(s),s.isFilled&&i(l,m,s,y,g,p),s.isStroked&&n(l,s,y,g,p),a.pipelines.postBatch(s)};h.exports=r},30479:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(17803),n=e(26015),r=new i({Extends:u,Mixins:[n],initialize:function(s,o,d,l,f,m,g,p,y,S,C){o===void 0&&(o=0),d===void 0&&(d=0),l===void 0&&(l=128),f===void 0&&(f=128),m===void 0&&(m=32),g===void 0&&(g=32),u.call(this,s,"Grid",null),this.cellWidth=m,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(o,d),this.setSize(l,f),this.setFillStyle(p,y),S!==void 0&&this.setOutlineStyle(S,C),this.updateDisplayOrigin()},setFillStyle:function(a,s){return s===void 0&&(s=1),a===void 0?this.showCells=!1:(this.fillColor=a,this.fillAlpha=s,this.showCells=!0),this},setAltFillStyle:function(a,s){return s===void 0&&(s=1),a===void 0?this.showAltCells=!1:(this.altFillColor=a,this.altFillAlpha=s,this.showAltCells=!0),this},setOutlineStyle:function(a,s){return s===void 0&&(s=1),a===void 0?this.showOutline=!1:(this.outlineFillColor=a,this.outlineFillAlpha=s,this.showOutline=!0),this}});h.exports=r},49912:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(65960),u=e(75177),n=e(20926),r=function(a,s,o,d){o.addToRenderList(s);var l=a.currentContext;if(n(a,l,s,o,d)){var f=-s._displayOriginX,m=-s._displayOriginY,g=o.alpha*s.alpha,p=s.width,y=s.height,S=s.cellWidth,C=s.cellHeight,A=Math.ceil(p/S),M=Math.ceil(y/C),L=S,P=C,O=S-(A*S-p),D=C-(M*C-y),I=s.showCells,F=s.showAltCells,H=s.showOutline,k=0,W=0,$=0,K=0,Z=0;if(H&&(L--,P--,O===S&&O--,D===C&&D--),I&&s.fillAlpha>0)for(i(l,s),W=0;W<M;W++)for(F&&($=W%2),k=0;k<A;k++){if(F&&$){$=0;continue}$++,K=k<A-1?L:O,Z=W<M-1?P:D,l.fillRect(f+k*S,m+W*C,K,Z)}if(F&&s.altFillAlpha>0)for(i(l,s,s.altFillColor,s.altFillAlpha*g),W=0;W<M;W++)for(F&&($=W%2),k=0;k<A;k++){if(F&&!$){$=1;continue}$=0,K=k<A-1?L:O,Z=W<M-1?P:D,l.fillRect(f+k*S,m+W*C,K,Z)}if(H&&s.outlineFillAlpha>0){for(u(l,s,s.outlineFillColor,s.outlineFillAlpha*g),k=1;k<A;k++){var X=k*S;l.beginPath(),l.moveTo(X+f,m),l.lineTo(X+f,y+m),l.stroke()}for(W=1;W<M;W++){var j=W*C;l.beginPath(),l.moveTo(f,j+m),l.lineTo(f+p,j+m),l.stroke()}}l.restore()}};h.exports=r},34137:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(30479);i.register("grid",function(n,r,a,s,o,d,l,f,m,g){return this.displayList.add(new u(this.scene,n,r,a,s,o,d,l,f,m,g))})},26015:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(46161),n=e(49912),h.exports={renderWebGL:u,renderCanvas:n}},46161:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=e(70554),n=function(r,a,s,o){s.addToRenderList(a);var d=r.pipelines.set(a.pipeline),l=i(a,s,o),f=d.calcMatrix.copyFrom(l.calc);f.translate(-a._displayOriginX,-a._displayOriginY);var m=s.alpha*a.alpha,g=a.width,p=a.height,y=a.cellWidth,S=a.cellHeight,C=Math.ceil(g/y),A=Math.ceil(p/S),M=y,L=S,P=y-(C*y-g),O=S-(A*S-p),D,I,F=a.showCells,H=a.showAltCells,k=a.showOutline,W=0,$=0,K=0,Z=0,X=0;if(k&&(M--,L--,P===y&&P--,O===S&&O--),r.pipelines.preBatch(a),F&&a.fillAlpha>0)for(D=d.fillTint,I=u.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*m),D.TL=I,D.TR=I,D.BL=I,D.BR=I,$=0;$<A;$++)for(H&&(K=$%2),W=0;W<C;W++){if(H&&K){K=0;continue}K++,Z=W<C-1?M:P,X=$<A-1?L:O,d.batchFillRect(W*y,$*S,Z,X)}if(H&&a.altFillAlpha>0)for(D=d.fillTint,I=u.getTintAppendFloatAlpha(a.altFillColor,a.altFillAlpha*m),D.TL=I,D.TR=I,D.BL=I,D.BR=I,$=0;$<A;$++)for(H&&(K=$%2),W=0;W<C;W++){if(H&&!K){K=1;continue}K=0,Z=W<C-1?M:P,X=$<A-1?L:O,d.batchFillRect(W*y,$*S,Z,X)}if(k&&a.outlineFillAlpha>0){var j=d.strokeTint,Y=u.getTintAppendFloatAlpha(a.outlineFillColor,a.outlineFillAlpha*m);for(j.TL=Y,j.TR=Y,j.BL=Y,j.BR=Y,W=1;W<C;W++){var U=W*y;d.batchLine(U,0,U,p,1,1,1,0,!1)}for($=1;$<A;$++){var J=$*S;d.batchLine(0,J,g,J,1,1,1,0,!1)}}r.pipelines.postBatch(a)};h.exports=n},61475:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(99651),u=e(83419),n=e(17803),r=new u({Extends:n,Mixins:[i],initialize:function(s,o,d,l,f,m,g,p){o===void 0&&(o=0),d===void 0&&(d=0),l===void 0&&(l=48),f===void 0&&(f=32),m===void 0&&(m=15658734),g===void 0&&(g=10066329),p===void 0&&(p=13421772),n.call(this,s,"IsoBox",null),this.projection=4,this.fillTop=m,this.fillLeft=g,this.fillRight=p,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(o,d),this.setSize(l,f),this.updateDisplayOrigin()},setProjection:function(a){return this.projection=a,this},setFaces:function(a,s,o){return a===void 0&&(a=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),this.showTop=a,this.showLeft=s,this.showRight=o,this},setFillStyle:function(a,s,o){return this.fillTop=a,this.fillLeft=s,this.fillRight=o,this.isFilled=!0,this}});h.exports=r},11508:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(65960),u=e(20926),n=function(r,a,s,o){s.addToRenderList(a);var d=r.currentContext;if(u(r,d,a,s,o)&&a.isFilled){var l=a.width,f=a.height,m=l/2,g=l/a.projection;a.showTop&&(i(d,a,a.fillTop),d.beginPath(),d.moveTo(-m,-f),d.lineTo(0,-g-f),d.lineTo(m,-f),d.lineTo(m,-1),d.lineTo(0,g-1),d.lineTo(-m,-1),d.lineTo(-m,-f),d.fill()),a.showLeft&&(i(d,a,a.fillLeft),d.beginPath(),d.moveTo(-m,0),d.lineTo(0,g),d.lineTo(0,g-f),d.lineTo(-m,-f),d.lineTo(-m,0),d.fill()),a.showRight&&(i(d,a,a.fillRight),d.beginPath(),d.moveTo(m,0),d.lineTo(0,g),d.lineTo(0,g-f),d.lineTo(m,-f),d.lineTo(m,0),d.fill()),d.restore()}};h.exports=n},3933:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(61475);i.register("isobox",function(n,r,a,s,o,d,l){return this.displayList.add(new u(this.scene,n,r,a,s,o,d,l))})},99651:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(68149),n=e(11508),h.exports={renderWebGL:u,renderCanvas:n}},68149:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=e(70554),n=function(r,a,s,o){s.addToRenderList(a);var d=r.pipelines.set(a.pipeline),l=i(a,s,o),f=d.calcMatrix.copyFrom(l.calc),m=a.width,g=a.height,p=m/2,y=m/a.projection,S=s.alpha*a.alpha;if(a.isFilled){var C,A,M,L,P,O,D,I,F;r.pipelines.preBatch(a),a.showTop&&(C=u.getTintAppendFloatAlpha(a.fillTop,S),A=f.getX(-p,-g),M=f.getY(-p,-g),L=f.getX(0,-y-g),P=f.getY(0,-y-g),O=f.getX(p,-g),D=f.getY(p,-g),I=f.getX(0,y-g),F=f.getY(0,y-g),d.batchQuad(a,A,M,L,P,O,D,I,F,0,0,1,1,C,C,C,C,2)),a.showLeft&&(C=u.getTintAppendFloatAlpha(a.fillLeft,S),A=f.getX(-p,0),M=f.getY(-p,0),L=f.getX(0,y),P=f.getY(0,y),O=f.getX(0,y-g),D=f.getY(0,y-g),I=f.getX(-p,-g),F=f.getY(-p,-g),d.batchQuad(a,A,M,L,P,O,D,I,F,0,0,1,1,C,C,C,C,2)),a.showRight&&(C=u.getTintAppendFloatAlpha(a.fillRight,S),A=f.getX(p,0),M=f.getY(p,0),L=f.getX(0,y),P=f.getY(0,y),O=f.getX(0,y-g),D=f.getY(0,y-g),I=f.getX(p,-g),F=f.getY(p,-g),d.batchQuad(a,A,M,L,P,O,D,I,F,0,0,1,1,C,C,C,C,2)),r.pipelines.postBatch(a)}};h.exports=n},16933:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(60561),n=e(17803),r=new i({Extends:n,Mixins:[u],initialize:function(s,o,d,l,f,m,g,p,y){o===void 0&&(o=0),d===void 0&&(d=0),l===void 0&&(l=48),f===void 0&&(f=32),m===void 0&&(m=!1),g===void 0&&(g=15658734),p===void 0&&(p=10066329),y===void 0&&(y=13421772),n.call(this,s,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=p,this.fillRight=y,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=m,this.isFilled=!0,this.setPosition(o,d),this.setSize(l,f),this.updateDisplayOrigin()},setProjection:function(a){return this.projection=a,this},setReversed:function(a){return this.isReversed=a,this},setFaces:function(a,s,o){return a===void 0&&(a=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),this.showTop=a,this.showLeft=s,this.showRight=o,this},setFillStyle:function(a,s,o){return this.fillTop=a,this.fillLeft=s,this.fillRight=o,this.isFilled=!0,this}});h.exports=r},79590:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(65960),u=e(20926),n=function(r,a,s,o){s.addToRenderList(a);var d=r.currentContext;if(u(r,d,a,s,o)&&a.isFilled){var l=a.width,f=a.height,m=l/2,g=l/a.projection,p=a.isReversed;a.showTop&&p&&(i(d,a,a.fillTop),d.beginPath(),d.moveTo(-m,-f),d.lineTo(0,-g-f),d.lineTo(m,-f),d.lineTo(0,g-f),d.fill()),a.showLeft&&(i(d,a,a.fillLeft),d.beginPath(),p?(d.moveTo(-m,-f),d.lineTo(0,g),d.lineTo(0,g-f)):(d.moveTo(-m,0),d.lineTo(0,g),d.lineTo(0,g-f)),d.fill()),a.showRight&&(i(d,a,a.fillRight),d.beginPath(),p?(d.moveTo(m,-f),d.lineTo(0,g),d.lineTo(0,g-f)):(d.moveTo(m,0),d.lineTo(0,g),d.lineTo(0,g-f)),d.fill()),d.restore()}};h.exports=n},49803:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(16933);i.register("isotriangle",function(n,r,a,s,o,d,l,f){return this.displayList.add(new u(this.scene,n,r,a,s,o,d,l,f))})},60561:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(51503),n=e(79590),h.exports={renderWebGL:u,renderCanvas:n}},51503:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=e(70554),n=function(r,a,s,o){s.addToRenderList(a);var d=r.pipelines.set(a.pipeline),l=i(a,s,o),f=d.calcMatrix.copyFrom(l.calc),m=a.width,g=a.height,p=m/2,y=m/a.projection,S=a.isReversed,C=s.alpha*a.alpha;if(a.isFilled){r.pipelines.preBatch(a);var A,M,L,P,O,D,I;if(a.showTop&&S){A=u.getTintAppendFloatAlpha(a.fillTop,C),M=f.getX(-p,-g),L=f.getY(-p,-g),P=f.getX(0,-y-g),O=f.getY(0,-y-g),D=f.getX(p,-g),I=f.getY(p,-g);var F=f.getX(0,y-g),H=f.getY(0,y-g);d.batchQuad(a,M,L,P,O,D,I,F,H,0,0,1,1,A,A,A,A,2)}a.showLeft&&(A=u.getTintAppendFloatAlpha(a.fillLeft,C),S?(M=f.getX(-p,-g),L=f.getY(-p,-g),P=f.getX(0,y),O=f.getY(0,y),D=f.getX(0,y-g),I=f.getY(0,y-g)):(M=f.getX(-p,0),L=f.getY(-p,0),P=f.getX(0,y),O=f.getY(0,y),D=f.getX(0,y-g),I=f.getY(0,y-g)),d.batchTri(a,M,L,P,O,D,I,0,0,1,1,A,A,A,2)),a.showRight&&(A=u.getTintAppendFloatAlpha(a.fillRight,C),S?(M=f.getX(p,-g),L=f.getY(p,-g),P=f.getX(0,y),O=f.getY(0,y),D=f.getX(0,y-g),I=f.getY(0,y-g)):(M=f.getX(p,0),L=f.getY(p,0),P=f.getX(0,y),O=f.getY(0,y),D=f.getX(0,y-g),I=f.getY(0,y-g)),d.batchTri(a,M,L,P,O,D,I,0,0,1,1,A,A,A,2)),r.pipelines.postBatch(a)}};h.exports=n},57847:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(17803),n=e(23031),r=e(36823),a=new i({Extends:u,Mixins:[r],initialize:function(o,d,l,f,m,g,p,y,S){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=0),g===void 0&&(g=128),p===void 0&&(p=0),u.call(this,o,"Line",new n(f,m,g,p));var C=Math.max(1,this.geom.right-this.geom.left),A=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(d,l),this.setSize(C,A),y!==void 0&&this.setStrokeStyle(1,y,S),this.updateDisplayOrigin()},setLineWidth:function(s,o){return o===void 0&&(o=s),this._startWidth=s,this._endWidth=o,this.lineWidth=s,this},setTo:function(s,o,d,l){return this.geom.setTo(s,o,d,l),this}});h.exports=a},17440:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(75177),u=e(20926),n=function(r,a,s,o){s.addToRenderList(a);var d=r.currentContext;if(u(r,d,a,s,o)){var l=a._displayOriginX,f=a._displayOriginY;a.isStroked&&(i(d,a),d.beginPath(),d.moveTo(a.geom.x1-l,a.geom.y1-f),d.lineTo(a.geom.x2-l,a.geom.y2-f),d.stroke()),d.restore()}};h.exports=n},2481:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(57847);i.register("line",function(n,r,a,s,o,d,l,f){return this.displayList.add(new u(this.scene,n,r,a,s,o,d,l,f))})},36823:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(77385),n=e(17440),h.exports={renderWebGL:u,renderCanvas:n}},77385:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=e(70554),n=function(r,a,s,o){s.addToRenderList(a);var d=r.pipelines.set(a.pipeline),l=i(a,s,o);d.calcMatrix.copyFrom(l.calc);var f=a._displayOriginX,m=a._displayOriginY,g=s.alpha*a.alpha;if(r.pipelines.preBatch(a),a.isStroked){var p=d.strokeTint,y=u.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*g);p.TL=y,p.TR=y,p.BL=y,p.BR=y,d.batchLine(a.geom.x1-f,a.geom.y1-m,a.geom.x2-f,a.geom.y2-m,a._startWidth/2,a._endWidth/2,1,0,!1,l.sprite,l.camera)}r.pipelines.postBatch(a)};h.exports=n},24949:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(90273),u=e(83419),n=e(94811),r=e(13829),a=e(25717),s=e(17803),o=e(5469),d=new u({Extends:s,Mixins:[i],initialize:function(f,m,g,p,y,S){m===void 0&&(m=0),g===void 0&&(g=0),s.call(this,f,"Polygon",new a(p));var C=r(this.geom);this.setPosition(m,g),this.setSize(C.width,C.height),y!==void 0&&this.setFillStyle(y,S),this.updateDisplayOrigin(),this.updateData()},smooth:function(l){l===void 0&&(l=1);for(var f=0;f<l;f++)o(this.geom);return this.updateData()},setTo:function(l){this.geom.setTo(l);var f=r(this.geom);return this.setSize(f.width,f.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var l=[],f=this.geom.points,m=0;m<f.length;m++)l.push(f[m].x,f[m].y);return l.push(f[0].x,f[0].y),this.pathIndexes=n(l),this.pathData=l,this}});h.exports=d},38710:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(65960),u=e(75177),n=e(20926),r=function(a,s,o,d){o.addToRenderList(s);var l=a.currentContext;if(n(a,l,s,o,d)){var f=s._displayOriginX,m=s._displayOriginY,g=s.pathData,p=g.length-1,y=g[0]-f,S=g[1]-m;l.beginPath(),l.moveTo(y,S),s.closePath||(p-=2);for(var C=2;C<p;C+=2){var A=g[C]-f,M=g[C+1]-m;l.lineTo(A,M)}s.closePath&&l.closePath(),s.isFilled&&(i(l,s),l.fill()),s.isStroked&&(u(l,s),l.stroke()),l.restore()}};h.exports=r},64827:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(24949);i.register("polygon",function(n,r,a,s,o){return this.displayList.add(new u(this.scene,n,r,a,s,o))})},90273:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(73695),n=e(38710),h.exports={renderWebGL:u,renderCanvas:n}},73695:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(10441),u=e(91296),n=e(34682),r=function(a,s,o,d){o.addToRenderList(s);var l=a.pipelines.set(s.pipeline),f=u(s,o,d),m=l.calcMatrix.copyFrom(f.calc),g=s._displayOriginX,p=s._displayOriginY,y=o.alpha*s.alpha;a.pipelines.preBatch(s),s.isFilled&&i(l,m,s,y,g,p),s.isStroked&&n(l,s,y,g,p),a.pipelines.postBatch(s)};h.exports=r},74561:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(87841),n=e(17803),r=e(95597),a=new i({Extends:n,Mixins:[r],initialize:function(o,d,l,f,m,g,p){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=128),m===void 0&&(m=128),n.call(this,o,"Rectangle",new u(0,0,f,m)),this.setPosition(d,l),this.setSize(f,m),g!==void 0&&this.setFillStyle(g,p),this.updateDisplayOrigin(),this.updateData()},setSize:function(s,o){this.width=s,this.height=o,this.geom.setSize(s,o),this.updateData(),this.updateDisplayOrigin();var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=s,d.hitArea.height=o),this},updateData:function(){var s=[],o=this.geom,d=this._tempLine;return o.getLineA(d),s.push(d.x1,d.y1,d.x2,d.y2),o.getLineB(d),s.push(d.x2,d.y2),o.getLineC(d),s.push(d.x2,d.y2),o.getLineD(d),s.push(d.x2,d.y2),this.pathData=s,this}});h.exports=a},48682:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(65960),u=e(75177),n=e(20926),r=function(a,s,o,d){o.addToRenderList(s);var l=a.currentContext;if(n(a,l,s,o,d)){var f=s._displayOriginX,m=s._displayOriginY;s.isFilled&&(i(l,s),l.fillRect(-f,-m,s.width,s.height)),s.isStroked&&(u(l,s),l.beginPath(),l.rect(-f,-m,s.width,s.height),l.stroke()),l.restore()}};h.exports=r},87959:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(74561);i.register("rectangle",function(n,r,a,s,o,d){return this.displayList.add(new u(this.scene,n,r,a,s,o,d))})},95597:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(52059),n=e(48682),h.exports={renderWebGL:u,renderCanvas:n}},52059:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=e(34682),n=e(70554),r=function(a,s,o,d){o.addToRenderList(s);var l=a.pipelines.set(s.pipeline),f=i(s,o,d);l.calcMatrix.copyFrom(f.calc);var m=s._displayOriginX,g=s._displayOriginY,p=o.alpha*s.alpha;if(a.pipelines.preBatch(s),s.isFilled){var y=l.fillTint,S=n.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*p);y.TL=S,y.TR=S,y.BL=S,y.BR=S,l.batchFillRect(-m,-g,s.width,s.height)}s.isStroked&&u(l,s,p,m,g),a.pipelines.postBatch(s)};h.exports=r},55911:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(81991),u=e(83419),n=e(94811),r=e(17803),a=new u({Extends:r,Mixins:[i],initialize:function(o,d,l,f,m,g,p,y){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=5),m===void 0&&(m=32),g===void 0&&(g=64),r.call(this,o,"Star",null),this._points=f,this._innerRadius=m,this._outerRadius=g,this.setPosition(d,l),this.setSize(g*2,g*2),p!==void 0&&this.setFillStyle(p,y),this.updateDisplayOrigin(),this.updateData()},setPoints:function(s){return this._points=s,this.updateData()},setInnerRadius:function(s){return this._innerRadius=s,this.updateData()},setOuterRadius:function(s){return this._outerRadius=s,this.updateData()},points:{get:function(){return this._points},set:function(s){this._points=s,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(s){this._innerRadius=s,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(s){this._outerRadius=s,this.updateData()}},updateData:function(){var s=[],o=this._points,d=this._innerRadius,l=this._outerRadius,f=Math.PI/2*3,m=Math.PI/o,g=l,p=l;s.push(g,p+-l);for(var y=0;y<o;y++)s.push(g+Math.cos(f)*l,p+Math.sin(f)*l),f+=m,s.push(g+Math.cos(f)*d,p+Math.sin(f)*d),f+=m;return s.push(g,p+-l),this.pathIndexes=n(s),this.pathData=s,this}});h.exports=a},64272:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(65960),u=e(75177),n=e(20926),r=function(a,s,o,d){o.addToRenderList(s);var l=a.currentContext;if(n(a,l,s,o,d)){var f=s._displayOriginX,m=s._displayOriginY,g=s.pathData,p=g.length-1,y=g[0]-f,S=g[1]-m;l.beginPath(),l.moveTo(y,S),s.closePath||(p-=2);for(var C=2;C<p;C+=2){var A=g[C]-f,M=g[C+1]-m;l.lineTo(A,M)}l.closePath(),s.isFilled&&(i(l,s),l.fill()),s.isStroked&&(u(l,s),l.stroke()),l.restore()}};h.exports=r},93697:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(55911),u=e(39429);u.register("star",function(n,r,a,s,o,d,l){return this.displayList.add(new i(this.scene,n,r,a,s,o,d,l))})},81991:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(57017),n=e(64272),h.exports={renderWebGL:u,renderCanvas:n}},57017:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(10441),u=e(91296),n=e(34682),r=function(a,s,o,d){o.addToRenderList(s);var l=a.pipelines.set(s.pipeline),f=u(s,o,d),m=l.calcMatrix.copyFrom(f.calc),g=s._displayOriginX,p=s._displayOriginY,y=o.alpha*s.alpha;a.pipelines.preBatch(s),s.isFilled&&i(l,m,s,y,g,p),s.isStroked&&n(l,s,y,g,p),a.pipelines.postBatch(s)};h.exports=r},36931:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(17803),n=e(16483),r=e(96195),a=new i({Extends:u,Mixins:[r],initialize:function(o,d,l,f,m,g,p,y,S,C,A){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=128),g===void 0&&(g=64),p===void 0&&(p=0),y===void 0&&(y=128),S===void 0&&(S=128),u.call(this,o,"Triangle",new n(f,m,g,p,y,S));var M=this.geom.right-this.geom.left,L=this.geom.bottom-this.geom.top;this.setPosition(d,l),this.setSize(M,L),C!==void 0&&this.setFillStyle(C,A),this.updateDisplayOrigin(),this.updateData()},setTo:function(s,o,d,l,f,m){return this.geom.setTo(s,o,d,l,f,m),this.updateData()},updateData:function(){var s=[],o=this.geom,d=this._tempLine;return o.getLineA(d),s.push(d.x1,d.y1,d.x2,d.y2),o.getLineB(d),s.push(d.x2,d.y2),o.getLineC(d),s.push(d.x2,d.y2),this.pathData=s,this}});h.exports=a},85172:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(65960),u=e(75177),n=e(20926),r=function(a,s,o,d){o.addToRenderList(s);var l=a.currentContext;if(n(a,l,s,o,d)){var f=s._displayOriginX,m=s._displayOriginY,g=s.geom.x1-f,p=s.geom.y1-m,y=s.geom.x2-f,S=s.geom.y2-m,C=s.geom.x3-f,A=s.geom.y3-m;l.beginPath(),l.moveTo(g,p),l.lineTo(y,S),l.lineTo(C,A),l.closePath(),s.isFilled&&(i(l,s),l.fill()),s.isStroked&&(u(l,s),l.stroke()),l.restore()}};h.exports=r},45245:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(36931);i.register("triangle",function(n,r,a,s,o,d,l,f,m,g){return this.displayList.add(new u(this.scene,n,r,a,s,o,d,l,f,m,g))})},96195:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(83253),n=e(85172),h.exports={renderWebGL:u,renderCanvas:n}},83253:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=e(34682),n=e(70554),r=function(a,s,o,d){o.addToRenderList(s);var l=a.pipelines.set(s.pipeline),f=i(s,o,d);l.calcMatrix.copyFrom(f.calc);var m=s._displayOriginX,g=s._displayOriginY,p=o.alpha*s.alpha;if(a.pipelines.preBatch(s),s.isFilled){var y=l.fillTint,S=n.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*p);y.TL=S,y.TR=S,y.BL=S,y.BR=S;var C=s.geom.x1-m,A=s.geom.y1-g,M=s.geom.x2-m,L=s.geom.y2-g,P=s.geom.x3-m,O=s.geom.y3-g;l.batchFillTriangle(C,A,M,L,P,O,f.sprite,f.camera)}s.isStroked&&u(l,s,p,m,g),a.pipelines.postBatch(s)};h.exports=r},68287:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(9674),u=e(83419),n=e(31401),r=e(95643),a=e(92751),s=new u({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,a],initialize:function(d,l,f,m,g){r.call(this,d,"Sprite"),this._crop=this.resetCropObject(),this.anims=new i(this),this.setTexture(m,g),this.setPosition(l,f),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(o,d){this.anims.update(o,d)},play:function(o,d){return this.anims.play(o,d)},playReverse:function(o,d){return this.anims.playReverse(o,d)},playAfterDelay:function(o,d){return this.anims.playAfterDelay(o,d)},playAfterRepeat:function(o,d){return this.anims.playAfterRepeat(o,d)},chain:function(o){return this.anims.chain(o)},stop:function(){return this.anims.stop()},stopAfterDelay:function(o){return this.anims.stopAfterDelay(o)},stopAfterRepeat:function(o){return this.anims.stopAfterRepeat(o)},stopOnFrame:function(o){return this.anims.stopOnFrame(o)},toJSON:function(){return n.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});h.exports=s},76552:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){u.addToRenderList(i),e.batchSprite(i,i.frame,u,n)};h.exports=w},15567:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(13059),n=e(44603),r=e(23568),a=e(68287);n.register("sprite",function(s,o){s===void 0&&(s={});var d=r(s,"key",null),l=r(s,"frame",null),f=new a(this.scene,0,0,d,l);return o!==void 0&&(s.add=o),i(this.scene,f,s),u(f,s),f})},46409:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(68287);i.register("sprite",function(n,r,a,s){return this.displayList.add(new u(this.scene,n,r,a,s))})},92751:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(9409),n=e(76552),h.exports={renderWebGL:u,renderCanvas:n}},9409:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){u.addToRenderList(i),i.pipeline.batchSprite(i,u,n)};h.exports=w},14220:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=e.canvas,r=e.context,a=e.style,s=[],o=0,d=u.length;a.maxLines>0&&a.maxLines<u.length&&(d=a.maxLines),a.syncFont(n,r);for(var l=e.letterSpacing,f=0;f<d;f++){var m=a.strokeThickness;if(l===0)m+=r.measureText(u[f]).width;else{for(var g=u[f],p=0;p<g.length;p++)m+=r.measureText(g[p]).width;g.length>1&&(m+=l*(g.length-1))}a.wordWrap&&(m-=r.measureText(" ").width),s[f]=Math.ceil(m),o=Math.max(o,s[f])}var y=i.fontSize+a.strokeThickness,S=y*d,C=e.lineSpacing;return d>1&&(S+=C*(d-1)),{width:o,height:S,lines:d,lineWidths:s,lineSpacing:C,lineHeight:y}};h.exports=w},79557:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(27919),u=function(n){var r=i.create(this),a=r.getContext("2d",{willReadFrequently:!0});n.syncFont(r,a);var s=a.measureText(n.testString);if("actualBoundingBoxAscent"in s){var o=s.actualBoundingBoxAscent,d=s.actualBoundingBoxDescent;return i.remove(r),{ascent:o,descent:d,fontSize:o+d}}var l=Math.ceil(s.width*n.baselineX),f=l,m=2*f;f=f*n.baselineY|0,r.width=l,r.height=m,a.fillStyle="#f00",a.fillRect(0,0,l,m),a.font=n._font,a.textBaseline="alphabetic",a.fillStyle="#000",a.fillText(n.testString,0,f);var g={ascent:0,descent:0,fontSize:0},p=a.getImageData(0,0,l,m);if(!p)return g.ascent=f,g.descent=f+6,g.fontSize=g.ascent+g.descent,i.remove(r),g;var y=p.data,S=y.length,C=l*4,A,M,L=0,P=!1;for(A=0;A<f;A++){for(M=0;M<C;M+=4)if(y[L+M]!==255){P=!0;break}if(!P)L+=C;else break}for(g.ascent=f-A,L=S-C,P=!1,A=m;A>f;A--){for(M=0;M<C;M+=4)if(y[L+M]!==255){P=!0;break}if(!P)L-=C;else break}return g.descent=A-f,g.fontSize=g.ascent+g.descent,i.remove(r),g};h.exports=u},50171:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(40366),u=e(27919),n=e(83419),r=e(31401),a=e(95643),s=e(14220),o=e(35154),d=e(35846),l=e(61771),f=e(35762),m=e(45650),g=new n({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,l],initialize:function(y,S,C,A,M){S===void 0&&(S=0),C===void 0&&(C=0),a.call(this,y,"Text"),this.renderer=y.sys.renderer,this.setPosition(S,C),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=u.create(this),this.context,this.style=new f(this,M),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=m(),this.texture=y.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(A),M&&M.padding&&this.setPadding(M.padding),M&&M.lineSpacing&&this.setLineSpacing(M.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",i(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(p){var y=this.style;if(y.wordWrapCallback){var S=y.wordWrapCallback.call(y.wordWrapCallbackScope,p,this);return Array.isArray(S)&&(S=S.join(`
`)),S}else return y.wordWrapWidth?y.wordWrapUseAdvanced?this.advancedWordWrap(p,this.context,this.style.wordWrapWidth):this.basicWordWrap(p,this.context,this.style.wordWrapWidth):p},advancedWordWrap:function(p,y,S){for(var C="",A=p.replace(/ +/gi," ").split(this.splitRegExp),M=A.length,L=0;L<M;L++){var P=A[L],O="";P=P.replace(/^ *|\s*$/gi,"");var D=y.measureText(P).width;if(D<S){C+=P+`
`;continue}for(var I=S,F=P.split(" "),H=0;H<F.length;H++){var k=F[H],W=k+" ",$=y.measureText(W).width;if($>I){if(H===0){for(var K=W;K.length&&(K=K.slice(0,-1),$=y.measureText(K).width,!($<=I)););if(!K.length)throw new Error("wordWrapWidth < a single character");var Z=k.substr(K.length);F[H]=Z,O+=K}var X=F[H].length?H:H+1,j=F.slice(X).join(" ").replace(/[ \n]*$/gi,"");A.splice(L+1,0,j),M=A.length;break}else O+=W,I-=$}C+=O.replace(/[ \n]*$/gi,"")+`
`}return C=C.replace(/[\s|\n]*$/gi,""),C},basicWordWrap:function(p,y,S){for(var C="",A=p.split(this.splitRegExp),M=A.length-1,L=y.measureText(" ").width,P=0;P<=M;P++){for(var O=S,D=A[P].split(" "),I=D.length-1,F=0;F<=I;F++){var H=D[F],k=y.measureText(H).width,W=k;F<I&&(W+=L),W>O&&F>0&&(C+=`
`,O=S),C+=H,F<I?(C+=" ",O-=W):O-=k}P<M&&(C+=`
`)}return C},getWrappedText:function(p){p===void 0&&(p=this._text),this.style.syncFont(this.canvas,this.context);var y=this.runWordWrap(p);return y.split(this.splitRegExp)},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this._text&&(this._text=p.toString(),this.updateText()),this},appendText:function(p,y){y===void 0&&(y=!0),!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p=p.toString();var S=this._text.concat(y?`
`+p:p);return S!==this._text&&(this._text=S,this.updateText()),this},setStyle:function(p){return this.style.setStyle(p)},setFont:function(p){return this.style.setFont(p)},setFontFamily:function(p){return this.style.setFontFamily(p)},setFontSize:function(p){return this.style.setFontSize(p)},setFontStyle:function(p){return this.style.setFontStyle(p)},setFixedSize:function(p,y){return this.style.setFixedSize(p,y)},setBackgroundColor:function(p){return this.style.setBackgroundColor(p)},setFill:function(p){return this.style.setFill(p)},setColor:function(p){return this.style.setColor(p)},setStroke:function(p,y){return this.style.setStroke(p,y)},setShadow:function(p,y,S,C,A,M){return this.style.setShadow(p,y,S,C,A,M)},setShadowOffset:function(p,y){return this.style.setShadowOffset(p,y)},setShadowColor:function(p){return this.style.setShadowColor(p)},setShadowBlur:function(p){return this.style.setShadowBlur(p)},setShadowStroke:function(p){return this.style.setShadowStroke(p)},setShadowFill:function(p){return this.style.setShadowFill(p)},setWordWrapWidth:function(p,y){return this.style.setWordWrapWidth(p,y)},setWordWrapCallback:function(p,y){return this.style.setWordWrapCallback(p,y)},setAlign:function(p){return this.style.setAlign(p)},setResolution:function(p){return this.style.setResolution(p)},setLineSpacing:function(p){return this.lineSpacing=p,this.updateText()},setLetterSpacing:function(p){return this.letterSpacing=p,this.updateText()},setPadding:function(p,y,S,C){if(typeof p=="object"){var A=p,M=o(A,"x",null);M!==null?(p=M,S=M):(p=o(A,"left",0),S=o(A,"right",p));var L=o(A,"y",null);L!==null?(y=L,C=L):(y=o(A,"top",0),C=o(A,"bottom",y))}else p===void 0&&(p=0),y===void 0&&(y=p),S===void 0&&(S=p),C===void 0&&(C=y);return this.padding.left=p,this.padding.top=y,this.padding.right=S,this.padding.bottom=C,this.updateText()},setMaxLines:function(p){return this.style.setMaxLines(p)},setRTL:function(p){p===void 0&&(p=!0);var y=this.style;return y.rtl===p?this:(y.rtl=p,p?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",i(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),y.align==="left"?y.align="right":y.align==="right"&&(y.align="left"),this)},updateText:function(){var p=this.canvas,y=this.context,S=this.style,C=S.resolution,A=S.metrics;S.syncFont(p,y);var M=this._text;(S.wordWrapWidth||S.wordWrapCallback)&&(M=this.runWordWrap(this._text));var L=M.split(this.splitRegExp),P=s(this,A,L),O=this.padding,D;S.fixedWidth===0?(this.width=P.width+O.left+O.right,D=P.width):(this.width=S.fixedWidth,D=this.width-O.left-O.right,D<P.width&&(D=P.width)),S.fixedHeight===0?this.height=P.height+O.top+O.bottom:this.height=S.fixedHeight;var I=this.width,F=this.height;this.updateDisplayOrigin(),I*=C,F*=C,I=Math.max(I,1),F=Math.max(F,1),p.width!==I||p.height!==F?(p.width=I,p.height=F,this.frame.setSize(I,F),S.syncFont(p,y),S.rtl&&(y.direction="rtl")):y.clearRect(0,0,I,F),y.save(),y.scale(C,C),S.backgroundColor&&(y.fillStyle=S.backgroundColor,y.fillRect(0,0,I,F)),S.syncStyle(p,y),y.translate(O.left,O.top);for(var H,k,W=0;W<P.lines;W++){if(H=S.strokeThickness/2,k=S.strokeThickness/2+W*P.lineHeight+A.ascent,W>0&&(k+=P.lineSpacing*W),S.rtl)H=I-H-O.left-O.right;else if(S.align==="right")H+=D-P.lineWidths[W];else if(S.align==="center")H+=(D-P.lineWidths[W])/2;else if(S.align==="justify"){var $=.85;if(P.lineWidths[W]/P.width>=$){var K=P.width-P.lineWidths[W],Z=y.measureText(" ").width,X=L[W].trim(),j=X.split(" ");K+=(L[W].length-X.length)*Z;for(var Y=Math.floor(K/Z),U=0;Y>0;)j[U]+=" ",U=(U+1)%(j.length-1||1),--Y;L[W]=j.join(" ")}}this.autoRound&&(H=Math.round(H),k=Math.round(k));var J=this.letterSpacing;if(S.strokeThickness&&J===0&&(S.syncShadow(y,S.shadowStroke),y.strokeText(L[W],H,k)),S.color)if(S.syncShadow(y,S.shadowFill),J!==0)for(var q=0,_=L[W].split(""),te=0;te<_.length;te++)S.strokeThickness&&(S.syncShadow(y,S.shadowStroke),y.strokeText(_[te],H+q,k),S.syncShadow(y,S.shadowFill)),y.fillText(_[te],H+q,k),q+=y.measureText(_[te]).width+J;else y.fillText(L[W],H,k)}y.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(p,this.frame.source.glTexture,!0));var se=this.input;return se&&!se.customHitArea&&(se.hitArea.width=this.width,se.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(p){this.setText(p)}},toJSON:function(){var p=r.ToJSON(this),y={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return p.data=y,p},preDestroy:function(){d(this.canvas),u.remove(this.canvas);var p=this.texture;p&&p.destroy()}});h.exports=g},79724:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){i.width===0||i.height===0||(u.addToRenderList(i),e.batchSprite(i,i.frame,u,n))};h.exports=w},71259:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(44603),n=e(23568),r=e(50171);u.register("text",function(a,s){a===void 0&&(a={});var o=n(a,"text",""),d=n(a,"style",null),l=n(a,"padding",null);l!==null&&(d.padding=l);var f=new r(this.scene,0,0,o,d);return s!==void 0&&(a.add=s),i(this.scene,f,a),f.autoRound=n(a,"autoRound",!0),f.resolution=n(a,"resolution",1),f})},68005:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(50171),u=e(39429);u.register("text",function(n,r,a,s){return this.displayList.add(new i(this.scene,n,r,a,s))})},61771:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(34397),n=e(79724),h.exports={renderWebGL:u,renderCanvas:n}},35762:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23568),n=e(35154),r=e(79557),a={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},s=new i({initialize:function(d,l){this.parent=d,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(l,!1,!0)},setStyle:function(o,d,l){d===void 0&&(d=!0),l===void 0&&(l=!1);for(var f in a){var m=l?a[f][1]:this[f];f==="wordWrapCallback"||f==="wordWrapCallbackScope"?this[f]=n(o,a[f][0],m):o&&f==="fontSize"&&typeof o.fontSize=="number"?this[f]=o.fontSize.toString()+"px":this[f]=u(o,a[f][0],m)}var g=n(o,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var p=n(o,"fill",null);p!==null&&(this.color=p);var y=n(o,"metrics",!1);return y?this.metrics={ascent:n(y,"ascent",0),descent:n(y,"descent",0),fontSize:n(y,"fontSize",0)}:(d||!this.metrics)&&(this.metrics=r(this)),d?this.parent.updateText():this.parent},syncFont:function(o,d){d.font=this._font},syncStyle:function(o,d){d.textBaseline="alphabetic",d.fillStyle=this.color,d.strokeStyle=this.stroke,d.lineWidth=this.strokeThickness,d.lineCap="round",d.lineJoin="round"},syncShadow:function(o,d){d?(o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY,o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur):(o.shadowOffsetX=0,o.shadowOffsetY=0,o.shadowColor=0,o.shadowBlur=0)},update:function(o){return o&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=r(this)),this.parent.updateText()},setFont:function(o,d){d===void 0&&(d=!0);var l=o,f="",m="";if(typeof o!="string")l=n(o,"fontFamily","Courier"),f=n(o,"fontSize","16px"),m=n(o,"fontStyle","");else{var g=o.split(" "),p=0;m=g.length>2?g[p++]:"",f=g[p++]||"16px",l=g[p++]||"Courier"}return(l!==this.fontFamily||f!==this.fontSize||m!==this.fontStyle)&&(this.fontFamily=l,this.fontSize=f,this.fontStyle=m,d&&this.update(!0)),this.parent},setFontFamily:function(o){return this.fontFamily!==o&&(this.fontFamily=o,this.update(!0)),this.parent},setFontStyle:function(o){return this.fontStyle!==o&&(this.fontStyle=o,this.update(!0)),this.parent},setFontSize:function(o){return typeof o=="number"&&(o=o.toString()+"px"),this.fontSize!==o&&(this.fontSize=o,this.update(!0)),this.parent},setTestString:function(o){return this.testString=o,this.update(!0)},setFixedSize:function(o,d){return this.fixedWidth=o,this.fixedHeight=d,o&&(this.parent.width=o),d&&(this.parent.height=d),this.update(!1)},setBackgroundColor:function(o){return this.backgroundColor=o,this.update(!1)},setFill:function(o){return this.color=o,this.update(!1)},setColor:function(o){return this.color=o,this.update(!1)},setResolution:function(o){return this.resolution=o,this.update(!1)},setStroke:function(o,d){return d===void 0&&(d=this.strokeThickness),o===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==o||this.strokeThickness!==d)&&(this.stroke=o,this.strokeThickness=d,this.update(!0)),this.parent},setShadow:function(o,d,l,f,m,g){return o===void 0&&(o=0),d===void 0&&(d=0),l===void 0&&(l="#000"),f===void 0&&(f=0),m===void 0&&(m=!1),g===void 0&&(g=!0),this.shadowOffsetX=o,this.shadowOffsetY=d,this.shadowColor=l,this.shadowBlur=f,this.shadowStroke=m,this.shadowFill=g,this.update(!1)},setShadowOffset:function(o,d){return o===void 0&&(o=0),d===void 0&&(d=o),this.shadowOffsetX=o,this.shadowOffsetY=d,this.update(!1)},setShadowColor:function(o){return o===void 0&&(o="#000"),this.shadowColor=o,this.update(!1)},setShadowBlur:function(o){return o===void 0&&(o=0),this.shadowBlur=o,this.update(!1)},setShadowStroke:function(o){return this.shadowStroke=o,this.update(!1)},setShadowFill:function(o){return this.shadowFill=o,this.update(!1)},setWordWrapWidth:function(o,d){return d===void 0&&(d=!1),this.wordWrapWidth=o,this.wordWrapUseAdvanced=d,this.update(!1)},setWordWrapCallback:function(o,d){return d===void 0&&(d=null),this.wordWrapCallback=o,this.wordWrapCallbackScope=d,this.update(!1)},setAlign:function(o){return o===void 0&&(o="left"),this.align=o,this.update(!1)},setMaxLines:function(o){return o===void 0&&(o=0),this.maxLines=o,this.update(!1)},getTextMetrics:function(){var o=this.metrics;return{ascent:o.ascent,descent:o.descent,fontSize:o.fontSize}},toJSON:function(){var o={};for(var d in a)o[d]=this[d];return o.metrics=this.getTextMetrics(),o},destroy:function(){this.parent=void 0}});h.exports=s},34397:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(70554),u=function(n,r,a,s){if(!(r.width===0||r.height===0)){a.addToRenderList(r);var o=r.frame,d=o.width,l=o.height,f=i.getTintAppendFloatAlpha,m=n.pipelines.set(r.pipeline,r),g=m.setTexture2D(o.glTexture,r);m.batchTexture(r,o.glTexture,d,l,r.x,r.y,d/r.style.resolution,l/r.style.resolution,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.displayOriginX,r.displayOriginY,0,0,d,l,f(r.tintTopLeft,a.alpha*r._alphaTL),f(r.tintTopRight,a.alpha*r._alphaTR),f(r.tintBottomLeft,a.alpha*r._alphaBL),f(r.tintBottomRight,a.alpha*r._alphaBR),r.tintFill,0,0,a,s,!1,g)}};h.exports=u},20839:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(27919),u=e(83419),n=e(31401),r=e(95643),a=e(98439),s=e(68703),o=e(56295),d=e(45650),l=e(26099),f=8,m=new u({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Crop,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Tint,n.Transform,n.Visible,o],initialize:function(p,y,S,C,A,M,L){var P=p.sys.renderer;r.call(this,p,"TileSprite");var O=p.sys.textures.get(M),D=O.get(L);D.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),O=p.sys.textures.get("__MISSING"),D=O.get()),O.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),O=p.sys.textures.get("__MISSING"),D=O.get()),!C||!A?(C=C||D.width,A=A||D.height):(C=Math.floor(C),A=Math.floor(A)),this._tilePosition=new l,this._tileScale=new l(1,1),this.dirty=!1,this.renderer=P,this.canvas=i.create(this,C,A),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=O,this.displayFrame=D,this._crop=this.resetCropObject(),this._textureKey=d(),this.texture=p.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=a(D.width),this.potHeight=a(D.height),this.fillCanvas=i.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(y,S),this.setSize(C,A),this.setFrame(L),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(g,p){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(p)},setFrame:function(g){var p=this.displayTexture.get(g);return this.potWidth=a(p.width),this.potHeight=a(p.height),this.canvas.width=0,!p.cutWidth||!p.cutHeight?this.renderFlags&=~f:this.renderFlags|=f,this.displayFrame=p,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,p){return g!==void 0&&(this.tilePositionX=g),p!==void 0&&(this.tilePositionY=p),this},setTileScale:function(g,p){return g===void 0&&(g=this.tileScaleX),p===void 0&&(p=g),this.tileScaleX=g,this.tileScaleY=p,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var p=this.fillContext,y=this.fillCanvas,S=this.potWidth,C=this.potHeight;(!this.renderer||!this.renderer.gl)&&(S=g.cutWidth,C=g.cutHeight),p.clearRect(0,0,S,C),y.width=S,y.height=C,p.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,S,C),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(y,this.fillPattern):this.fillPattern=p.createPattern(y,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var p=this.context;this.scene.sys.game.config.antialias||s.disable(p);var y=this._tileScale.x,S=this._tileScale.y,C=this._tilePosition.x,A=this._tilePosition.y;p.clearRect(0,0,this.width,this.height),p.save(),p.scale(y,S),p.translate(-C,-A),p.fillStyle=this.fillPattern,p.fillRect(C,A,this.width/y,this.height/S),p.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),i.remove(this.canvas),i.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var g=this.texture;g&&g.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});h.exports=m},46992:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){i.updateCanvas(),u.addToRenderList(i),e.batchSprite(i,i.frame,u,n)};h.exports=w},14167:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(44603),n=e(23568),r=e(20839);u.register("tileSprite",function(a,s){a===void 0&&(a={});var o=n(a,"x",0),d=n(a,"y",0),l=n(a,"width",512),f=n(a,"height",512),m=n(a,"key",""),g=n(a,"frame",""),p=new r(this.scene,o,d,l,f,m,g);return s!==void 0&&(a.add=s),i(this.scene,p,a),p})},91681:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(20839),u=e(39429);u.register("tileSprite",function(n,r,a,s,o,d){return this.displayList.add(new i(this.scene,n,r,a,s,o,d))})},56295:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(18553),n=e(46992),h.exports={renderWebGL:u,renderCanvas:n}},18553:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(70554),u=function(n,r,a,s){r.updateCanvas();var o=r.width,d=r.height;if(!(o===0||d===0)){a.addToRenderList(r);var l=i.getTintAppendFloatAlpha,f=n.pipelines.set(r.pipeline,r),m=f.setTexture2D(r.fillPattern,r);f.batchTexture(r,r.fillPattern,r.displayFrame.width*r.tileScaleX,r.displayFrame.height*r.tileScaleY,r.x,r.y,o,d,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.originX*o,r.originY*d,0,0,o,d,l(r.tintTopLeft,a.alpha*r._alphaTL),l(r.tintTopRight,a.alpha*r._alphaTR),l(r.tintBottomLeft,a.alpha*r._alphaBL),l(r.tintBottomRight,a.alpha*r._alphaBR),r.tintFill,r.tilePositionX%r.displayFrame.width/r.displayFrame.width,r.tilePositionY%r.displayFrame.height/r.displayFrame.height,a,s,!1,m)}};h.exports=u},18471:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=e(83419),n=e(31401),r=e(51708),a=e(8443),s=e(95643),o=e(36383),d=e(14463),l=e(45650),f=e(10247),m=new u({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.TextureCrop,n.Tint,n.Transform,n.Visible,f],initialize:function(p,y,S,C){s.call(this,p,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=l(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var A=p.sys.game;this._device=A.device.video,this.setPosition(y,S),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),A.events.on(a.PAUSE,this.globalPause,this),A.events.on(a.RESUME,this.globalResume,this);var M=p.sys.sound;M&&M.on(d.GLOBAL_MUTE,this.globalMute,this),C&&this.load(C)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(g){var p=this.scene.sys.cache.video.get(g);return p?(this.cacheKey=g,this.loadHandler(p.url,p.noAudio,p.crossOrigin)):console.warn("No video in cache for key: "+g),this},changeSource:function(g,p,y,S,C){p===void 0&&(p=!0),y===void 0&&(y=!1),this.cacheKey!==g&&(this.load(g),p&&this.play(y,S,C))},getVideoKey:function(){return this.cacheKey},loadURL:function(g,p,y){p===void 0&&(p=!1);var S=this._device.getVideoURL(g);return S?(this.cacheKey="",this.loadHandler(S.url,p,y)):console.warn("No supported video format found for "+g),this},loadMediaStream:function(g,p,y){return this.loadHandler(null,p,y,g)},loadHandler:function(g,p,y,S){p||(p=!1);var C=this.video;if(C?(this.removeLoadEventHandlers(),this.stop()):(C=document.createElement("video"),C.controls=!1,C.setAttribute("playsinline","playsinline"),C.setAttribute("preload","auto"),C.setAttribute("disablePictureInPicture","true")),p?(C.muted=!0,C.defaultMuted=!0,C.setAttribute("autoplay","autoplay")):(C.muted=!1,C.defaultMuted=!1,C.removeAttribute("autoplay")),y?C.setAttribute("crossorigin",y):C.removeAttribute("crossorigin"),S)if("srcObject"in C)try{C.srcObject=S}catch(M){if(M.name!=="TypeError")throw M;C.src=URL.createObjectURL(S)}else C.src=URL.createObjectURL(S);else C.src=g;this.retry=0,this.video=C,this._playCalled=!1,C.load(),this.addLoadEventHandlers();var A=this.scene.sys.textures.get(this._key);return this.setTexture(A),this},requestVideoFrame:function(g,p){var y=this.video;if(y){var S=p.width,C=p.height,A=this.videoTexture,M=this.videoTextureSource,L=!A||M.source!==y;L?(this._codePaused=y.paused,this._codeMuted=y.muted,A?(M.source=y,M.width=S,M.height=C,A.get().setSize(S,C)):(A=this.scene.sys.textures.create(this._key,y,S,C),A.add("__BASE",0,0,0,S,C),this.setTexture(A),this.videoTexture=A,this.videoTextureSource=A.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(r.VIDEO_TEXTURE,this,A)),this.setSizeToFrame(),this.updateDisplayOrigin()):M.update(),this.isStalled=!1,this.metadata=p;var P=p.mediaTime;L&&(this._lastUpdate=P,this.emit(r.VIDEO_CREATED,this,S,C),this.frameReady||(this.frameReady=!0,this.emit(r.VIDEO_PLAY,this))),this._playingMarker?P>=this._markerOut&&(y.loop?(y.currentTime=this._markerIn,this.emit(r.VIDEO_LOOP,this)):(this.stop(!1),this.emit(r.VIDEO_COMPLETE,this))):P<this._lastUpdate&&this.emit(r.VIDEO_LOOP,this),this._lastUpdate=P,this._getFrame?(this.removeEventHandlers(),y.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(g,p,y){p===void 0&&(p=-1),y===void 0&&(y=o.MAX_SAFE_INTEGER);var S=this.video;return!S||this.isPlaying()?(S||console.warn("Video not loaded"),this):(g===void 0&&(g=S.loop),S.loop=g,this._markerIn=p,this._markerOut=y,this._playingMarker=p>-1&&y>p&&y<o.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=S.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var g=this.video;return!g||this.isPlaying()?(g||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=g.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var g=this.video;g&&(g.addEventListener("error",this._loadCallbackHandler),g.addEventListener("abort",this._loadCallbackHandler),g.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var g=this.video;g&&(g.removeEventListener("error",this._loadCallbackHandler),g.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var g=this.video;if(g){var p=this._callbacks;for(var y in p)g.addEventListener(y,p[y])}},removeEventHandlers:function(){var g=this.video;if(g){var p=this._callbacks;for(var y in p)g.removeEventListener(y,p[y])}},createPlayPromise:function(g){g===void 0&&(g=!0);var p=this.video,y=p.play();if(y!==void 0){var S=this.playSuccess.bind(this),C=this.playError.bind(this);if(!g){var A=this;C=function(){A.failedPlayAttempts++}}y.then(S).catch(C)}else p.addEventListener("playing",this._callbacks.legacy),g||this.failedPlayAttempts++},addMarker:function(g,p,y){return!isNaN(p)&&p>=0&&!isNaN(y)&&y>p&&(this.markers[g]=[p,y]),this},playMarker:function(g,p){var y=this.markers[g];return y&&this.play(p,y[0],y[1]),this},removeMarker:function(g){return delete this.markers[g],this},snapshot:function(g,p){return g===void 0&&(g=this.width),p===void 0&&(p=this.height),this.snapshotArea(0,0,this.width,this.height,g,p)},snapshotArea:function(g,p,y,S,C,A){g===void 0&&(g=0),p===void 0&&(p=0),y===void 0&&(y=this.width),S===void 0&&(S=this.height),C===void 0&&(C=y),A===void 0&&(A=S);var M=this.video,L=this.snapshotTexture;return L?(L.setSize(C,A),M&&L.context.drawImage(M,g,p,y,S,0,0,C,A)):(L=this.scene.sys.textures.createCanvas(l(),C,A),this.snapshotTexture=L,M&&L.context.drawImage(M,g,p,y,S,0,0,C,A)),L.update()},saveSnapshotTexture:function(g){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,g):this.snapshotTexture=this.scene.sys.textures.createCanvas(g,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(r.VIDEO_UNLOCKED,this));var g=this.scene.sys.sound;g&&g.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(g){var p=g.name;p==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(r.VIDEO_LOCKED,this)):p==="NotSupportedError"?(this.stop(!1),this.emit(r.VIDEO_UNSUPPORTED,this,g)):(this.stop(!1),this.emit(r.VIDEO_ERROR,this,g))},legacyPlayHandler:function(){var g=this.video;g&&(this.playSuccess(),g.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(r.VIDEO_PLAYING,this)},loadErrorHandler:function(g){this.stop(!1),this.emit(r.VIDEO_ERROR,this,g)},metadataHandler:function(g){this.emit(r.VIDEO_METADATA,this,g)},setSizeToFrame:function(g){g||(g=this.frame),this.width=g.realWidth,this.height=g.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var p=this.input;return p&&!p.customHitArea&&(p.hitArea.width=this.width,p.hitArea.height=this.height),this},stalledHandler:function(g){this.isStalled=!0,this.emit(r.VIDEO_STALLED,this,g)},completeHandler:function(){this._playCalled=!1,this.emit(r.VIDEO_COMPLETE,this)},preUpdate:function(g,p){var y=this.video;!y||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=p,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(g){var p=this.video;if(p){var y=p.duration;if(y!==1/0&&!isNaN(y)){var S=y*g;this.setCurrentTime(S)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(g){var p=this.video;if(p){if(typeof g=="string"){var y=g[0],S=parseFloat(g.substr(1));y==="+"?g=p.currentTime+S:y==="-"&&(g=p.currentTime-S)}p.currentTime=g}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(r.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(r.VIDEO_SEEKED,this)},getProgress:function(){var g=this.video;if(g){var p=g.duration;if(p!==1/0&&!isNaN(p))return g.currentTime/p}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(g){g===void 0&&(g=!0),this._codeMuted=g;var p=this.video;return p&&(p.muted=this._systemMuted?!0:g),this},isMuted:function(){return this._codeMuted},globalMute:function(g,p){this._systemMuted=p;var y=this.video;y&&(y.muted=this._codeMuted?!0:p)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(g){g===void 0&&(g=!0);var p=this.video;return this._codePaused=g,p&&!p.ended&&(g?p.paused||(this.removeEventHandlers(),p.pause()):g||(this._playCalled?p.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(g){return g===void 0&&(g=1),this.video&&(this.video.volume=i(g,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(g){return this.video&&(this.video.playbackRate=g),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(g){return g===void 0&&(g=!0),this.video&&(this.video.loop=g),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(g,p){return p===void 0&&(p=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,g),this.videoTextureSource.setFlipY(p)),this._key=g,this.flipY=p,!!this.videoTexture},stop:function(g){g===void 0&&(g=!0);var p=this.video;return p&&(this.removeEventHandlers(),p.cancelVideoFrameCallback(this._rfvCallbackId),p.pause()),this.retry=0,this._playCalled=!1,g&&this.emit(r.VIDEO_STOP,this),this},removeVideoElement:function(){var g=this.video;if(g){for(g.parentNode&&g.parentNode.removeChild(g);g.hasChildNodes();)g.removeChild(g.firstChild);g.removeAttribute("autoplay"),g.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var g=this.scene.sys.game.events;g.off(a.PAUSE,this.globalPause,this),g.off(a.RESUME,this.globalResume,this);var p=this.scene.sys.sound;p&&p.off(d.GLOBAL_MUTE,this.globalMute,this)}});h.exports=m},58352:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){i.videoTexture&&(u.addToRenderList(i),e.batchSprite(i,i.frame,u,n))};h.exports=w},11511:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25305),u=e(44603),n=e(23568),r=e(18471);u.register("video",function(a,s){a===void 0&&(a={});var o=n(a,"key",null),d=new r(this.scene,0,0,o);return s!==void 0&&(a.add=s),i(this.scene,d,a),d})},89025:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(18471),u=e(39429);u.register("video",function(n,r,a){return this.displayList.add(new i(this.scene,n,r,a))})},10247:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(29849),n=e(58352),h.exports={renderWebGL:u,renderCanvas:n}},29849:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){i.videoTexture&&(u.addToRenderList(i),i.pipeline.batchSprite(i,u,n))};h.exports=w},41481:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(10312),u=e(96503),n=e(87902),r=e(83419),a=e(31401),s=e(95643),o=e(87841),d=e(37303),l=new r({Extends:s,Mixins:[a.Depth,a.GetBounds,a.Origin,a.Transform,a.ScrollFactor,a.Visible],initialize:function(m,g,p,y,S){y===void 0&&(y=1),S===void 0&&(S=y),s.call(this,m,"Zone"),this.setPosition(g,p),this.width=y,this.height=S,this.blendMode=i.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(f){this.scaleX=f/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(f){this.scaleY=f/this.height}},setSize:function(f,m,g){g===void 0&&(g=!0),this.width=f,this.height=m,this.updateDisplayOrigin();var p=this.input;return g&&p&&!p.customHitArea&&(p.hitArea.width=f,p.hitArea.height=m),this},setDisplaySize:function(f,m){return this.displayWidth=f,this.displayHeight=m,this},setCircleDropZone:function(f){return this.setDropZone(new u(0,0,f),n)},setRectangleDropZone:function(f,m){return this.setDropZone(new o(0,0,f,m),d)},setDropZone:function(f,m){return this.input||this.setInteractive(f,m,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(f,m,g){g.addToRenderList(m)},renderWebGL:function(f,m,g){g.addToRenderList(m)}});h.exports=l},95261:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(44603),u=e(23568),n=e(41481);i.register("zone",function(r){var a=u(r,"x",0),s=u(r,"y",0),o=u(r,"width",1),d=u(r,"height",o);return new n(this.scene,a,s,o,d)})},84175:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(41481),u=e(39429);u.register("zone",function(n,r,a,s){return this.displayList.add(new i(this.scene,n,r,a,s))})},95166:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};h.exports=w},96503:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(87902),n=e(26241),r=e(79124),a=e(23777),s=e(28176),o=new i({initialize:function(l,f,m){l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=0),this.type=a.CIRCLE,this.x=l,this.y=f,this._radius=m,this._diameter=m*2},contains:function(d,l){return u(this,d,l)},getPoint:function(d,l){return n(this,d,l)},getPoints:function(d,l,f){return r(this,d,l,f)},getRandomPoint:function(d){return s(this,d)},setTo:function(d,l,f){return this.x=d,this.y=l,this._radius=f,this._diameter=f*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(d,l){return l===void 0&&(l=d),this.x=d,this.y=l,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this._diameter=d*2}},diameter:{get:function(){return this._diameter},set:function(d){this._diameter=d,this._radius=d*.5}},left:{get:function(){return this.x-this._radius},set:function(d){this.x=d+this._radius}},right:{get:function(){return this.x+this._radius},set:function(d){this.x=d-this._radius}},top:{get:function(){return this.y-this._radius},set:function(d){this.y=d+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(d){this.y=d-this._radius}}});h.exports=o},71562:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return 2*(Math.PI*e.radius)};h.exports=w},92110:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r,a){return a===void 0&&(a=new i),a.x=n.x+n.radius*Math.cos(r),a.y=n.y+n.radius*Math.sin(r),a};h.exports=u},42250:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(96503),u=function(n){return new i(n.x,n.y,n.radius)};h.exports=u},87902:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){if(e.radius>0&&i>=e.left&&i<=e.right&&u>=e.top&&u<=e.bottom){var n=(e.x-i)*(e.x-i),r=(e.y-u)*(e.y-u);return n+r<=e.radius*e.radius}else return!1};h.exports=w},5698:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87902),u=function(n,r){return i(n,r.x,r.y)};h.exports=u},70588:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87902),u=function(n,r){return i(n,r.x,r.y)&&i(n,r.right,r.y)&&i(n,r.x,r.bottom)&&i(n,r.right,r.bottom)};h.exports=u},26394:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i.setTo(e.x,e.y,e.radius)};h.exports=w},76278:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.x===i.x&&e.y===i.y&&e.radius===i.radius};h.exports=w},2074:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841),u=function(n,r){return r===void 0&&(r=new i),r.x=n.left,r.y=n.top,r.width=n.diameter,r.height=n.diameter,r};h.exports=u},26241:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(92110),u=e(62945),n=e(36383),r=e(2141),a=function(s,o,d){d===void 0&&(d=new r);var l=u(o,0,n.PI2);return i(s,l,d)};h.exports=a},79124:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(71562),u=e(92110),n=e(62945),r=e(36383),a=function(s,o,d,l){l===void 0&&(l=[]),!o&&d>0&&(o=i(s)/d);for(var f=0;f<o;f++){var m=n(f/o,0,r.PI2);l.push(u(s,m))}return l};h.exports=a},50884:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return e.x+=i,e.y+=u,e};h.exports=w},39212:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.x+=i.x,e.y+=i.y,e};h.exports=w},28176:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r){r===void 0&&(r=new i);var a=2*Math.PI*Math.random(),s=Math.random()+Math.random(),o=s>1?2-s:s,d=o*Math.cos(a),l=o*Math.sin(a);return r.x=n.x+d*n.radius,r.y=n.y+l*n.radius,r};h.exports=u},88911:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(96503);i.Area=e(95166),i.Circumference=e(71562),i.CircumferencePoint=e(92110),i.Clone=e(42250),i.Contains=e(87902),i.ContainsPoint=e(5698),i.ContainsRect=e(70588),i.CopyFrom=e(26394),i.Equals=e(76278),i.GetBounds=e(2074),i.GetPoint=e(26241),i.GetPoints=e(79124),i.Offset=e(50884),i.OffsetPoint=e(39212),i.Random=e(28176),h.exports=i},23777:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};h.exports=w},78874:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};h.exports=w},92990:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i=e.width/2,u=e.height/2,n=Math.pow(i-u,2)/Math.pow(i+u,2);return Math.PI*(i+u)*(1+3*n/(10+Math.sqrt(4-3*n)))};h.exports=w},79522:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r,a){a===void 0&&(a=new i);var s=n.width/2,o=n.height/2;return a.x=n.x+s*Math.cos(r),a.y=n.y+o*Math.sin(r),a};h.exports=u},58102:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(8497),u=function(n){return new i(n.x,n.y,n.width,n.height)};h.exports=u},81154:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){if(e.width<=0||e.height<=0)return!1;var n=(i-e.x)/e.width,r=(u-e.y)/e.height;return n*=n,r*=r,n+r<.25};h.exports=w},46662:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(81154),u=function(n,r){return i(n,r.x,r.y)};h.exports=u},1632:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(81154),u=function(n,r){return i(n,r.x,r.y)&&i(n,r.right,r.y)&&i(n,r.x,r.bottom)&&i(n,r.right,r.bottom)};h.exports=u},65534:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i.setTo(e.x,e.y,e.width,e.height)};h.exports=w},8497:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(81154),n=e(90549),r=e(48320),a=e(23777),s=e(24820),o=new i({initialize:function(l,f,m,g){l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=0),g===void 0&&(g=0),this.type=a.ELLIPSE,this.x=l,this.y=f,this.width=m,this.height=g},contains:function(d,l){return u(this,d,l)},getPoint:function(d,l){return n(this,d,l)},getPoints:function(d,l,f){return r(this,d,l,f)},getRandomPoint:function(d){return s(this,d)},setTo:function(d,l,f,m){return this.x=d,this.y=l,this.width=f,this.height=m,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(d,l){return l===void 0&&(l=d),this.x=d,this.y=l,this},setSize:function(d,l){return l===void 0&&(l=d),this.width=d,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(d){this.x=d+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(d){this.y=d+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});h.exports=o},36146:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.x===i.x&&e.y===i.y&&e.width===i.width&&e.height===i.height};h.exports=w},23694:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841),u=function(n,r){return r===void 0&&(r=new i),r.x=n.left,r.y=n.top,r.width=n.width,r.height=n.height,r};h.exports=u},90549:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(79522),u=e(62945),n=e(36383),r=e(2141),a=function(s,o,d){d===void 0&&(d=new r);var l=u(o,0,n.PI2);return i(s,l,d)};h.exports=a},48320:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(92990),u=e(79522),n=e(62945),r=e(36383),a=function(s,o,d,l){l===void 0&&(l=[]),!o&&d>0&&(o=i(s)/d);for(var f=0;f<o;f++){var m=n(f/o,0,r.PI2);l.push(u(s,m))}return l};h.exports=a},73424:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return e.x+=i,e.y+=u,e};h.exports=w},44808:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.x+=i.x,e.y+=i.y,e};h.exports=w},24820:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r){r===void 0&&(r=new i);var a=Math.random()*Math.PI*2,s=Math.sqrt(Math.random());return r.x=n.x+s*Math.cos(a)*n.width/2,r.y=n.y+s*Math.sin(a)*n.height/2,r};h.exports=u},49203:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(8497);i.Area=e(78874),i.Circumference=e(92990),i.CircumferencePoint=e(79522),i.Clone=e(58102),i.Contains=e(81154),i.ContainsPoint=e(46662),i.ContainsRect=e(1632),i.CopyFrom=e(65534),i.Equals=e(36146),i.GetBounds=e(23694),i.GetPoint=e(90549),i.GetPoints=e(48320),i.Offset=e(73424),i.OffsetPoint=e(44808),i.Random=e(24820),h.exports=i},55738:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(23777),u=e(79291),n={Circle:e(88911),Ellipse:e(49203),Intersects:e(91865),Line:e(2529),Mesh:e(73090),Point:e(43711),Polygon:e(58423),Rectangle:e(93232),Triangle:e(84435)};n=u(!1,n,i),h.exports=n},2044:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(20339),u=function(n,r){return i(n.x,n.y,r.x,r.y)<=n.radius+r.radius};h.exports=u},81491:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=i.width/2,n=i.height/2,r=Math.abs(e.x-i.x-u),a=Math.abs(e.y-i.y-n),s=u+e.radius,o=n+e.radius;if(r>s||a>o)return!1;if(r<=u||a<=n)return!0;var d=r-u,l=a-n,f=d*d,m=l*l,g=e.radius*e.radius;return f+m<=g};h.exports=w},63376:(h,w,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=e(2044),n=function(r,a,s){if(s===void 0&&(s=[]),u(r,a)){var o=r.x,d=r.y,l=r.radius,f=a.x,m=a.y,g=a.radius,p,y,S,C,A;if(d===m)A=(g*g-l*l-f*f+o*o)/(2*(o-f)),p=1,y=-2*m,S=f*f+A*A-2*f*A+m*m-g*g,C=y*y-4*p*S,C===0?s.push(new i(A,-y/(2*p))):C>0&&(s.push(new i(A,(-y+Math.sqrt(C))/(2*p))),s.push(new i(A,(-y-Math.sqrt(C))/(2*p))));else{var M=(o-f)/(d-m),L=(g*g-l*l-f*f+o*o-m*m+d*d)/(2*(d-m));p=M*M+1,y=2*d*M-2*L*M-2*o,S=o*o+d*d+L*L-l*l-2*d*L,C=y*y-4*p*S,C===0?(A=-y/(2*p),s.push(new i(A,L-A*M))):C>0&&(A=(-y+Math.sqrt(C))/(2*p),s.push(new i(A,L-A*M)),A=(-y-Math.sqrt(C))/(2*p),s.push(new i(A,L-A*M)))}}return s};h.exports=n},97439:(h,w,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(4042),u=e(81491),n=function(r,a,s){if(s===void 0&&(s=[]),u(r,a)){var o=a.getLineA(),d=a.getLineB(),l=a.getLineC(),f=a.getLineD();i(o,r,s),i(d,r,s),i(l,r,s),i(f,r,s)}return s};h.exports=n},4042:(h,w,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=e(80462),n=function(r,a,s){if(s===void 0&&(s=[]),u(r,a)){var o=r.x1,d=r.y1,l=r.x2,f=r.y2,m=a.x,g=a.y,p=a.radius,y=l-o,S=f-d,C=o-m,A=d-g,M=y*y+S*S,L=2*(y*C+S*A),P=C*C+A*A-p*p,O=L*L-4*M*P,D,I;if(O===0){var F=-L/(2*M);D=o+F*y,I=d+F*S,F>=0&&F<=1&&s.push(new i(D,I))}else if(O>0){var H=(-L-Math.sqrt(O))/(2*M);D=o+H*y,I=d+H*S,H>=0&&H<=1&&s.push(new i(D,I));var k=(-L+Math.sqrt(O))/(2*M);D=o+k*y,I=d+k*S,k>=0&&k<=1&&s.push(new i(D,I))}}return s};h.exports=n},36100:(h,w,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25836),u=function(n,r,a,s){a===void 0&&(a=!1);var o=n.x1,d=n.y1,l=n.x2,f=n.y2,m=r.x1,g=r.y1,p=r.x2,y=r.y2,S=l-o,C=f-d,A=p-m,M=y-g,L=S*M-C*A;if(L===0)return null;var P,O,D;if(a){if(P=(S*(g-d)+C*(o-m))/(A*C-M*S),S!==0)O=(m+A*P-o)/S;else if(C!==0)O=(g+M*P-d)/C;else return null;if(O<0||P<0||P>1)return null;D=O}else{if(P=((m-o)*M-(g-d)*A)/L,O=((d-g)*S-(o-m)*C)/L,P<0||P>1||O<0||O>1)return null;D=P}return s===void 0&&(s=new i),s.set(o+S*D,d+C*D,D)};h.exports=u},3073:(h,w,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36100),u=e(23031),n=e(25836),r=new u,a=new n,s=function(o,d,l,f){l===void 0&&(l=!1),f===void 0&&(f=new n);var m=!1;f.set(),a.set();for(var g=d[d.length-1],p=0;p<d.length;p++){var y=d[p];r.setTo(g.x,g.y,y.x,y.y),g=y,i(o,r,l,a)&&(!m||a.z<f.z)&&(f.copy(a),m=!0)}return m?f:null};h.exports=s},56362:(h,w,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25836),u=e(61369),n=e(3073),r=new i,a=function(s,o,d,l){l===void 0&&(l=new u),Array.isArray(o)||(o=[o]);var f=!1;l.set(),r.set();for(var m=0;m<o.length;m++)n(s,o[m].points,d,r)&&(!f||r.z<l.z)&&(l.set(r.x,r.y,r.z,m),f=!0);return f?l:null};h.exports=a},60646:(h,w,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=e(76112),n=e(92773),r=function(a,s,o){if(o===void 0&&(o=[]),n(a,s))for(var d=s.getLineA(),l=s.getLineB(),f=s.getLineC(),m=s.getLineD(),g=[new i,new i,new i,new i],p=[u(d,a,g[0]),u(l,a,g[1]),u(f,a,g[2]),u(m,a,g[3])],y=0;y<4;y++)p[y]&&o.push(g[y]);return o};h.exports=r},71147:(h,w,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(61369),u=e(56362),n=e(23031),r=new n;function a(d,l,f,m,g){var p=Math.cos(d),y=Math.sin(d);r.setTo(l,f,l+p,f+y);var S=u(r,m,!0);S&&g.push(new i(S.x,S.y,d,S.w))}function s(d,l){return d.z-l.z}var o=function(d,l,f){Array.isArray(f)||(f=[f]);for(var m=[],g=[],p=0;p<f.length;p++)for(var y=f[p].points,S=0;S<y.length;S++){var C=Math.atan2(y[S].y-l,y[S].x-d);g.indexOf(C)===-1&&(a(C,d,l,f,m),a(C-1e-5,d,l,f,m),a(C+1e-5,d,l,f,m),g.push(C))}return m.sort(s)};h.exports=o},68389:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841),u=e(59996),n=function(r,a,s){return s===void 0&&(s=new i),u(r,a)&&(s.x=Math.max(r.x,a.x),s.y=Math.max(r.y,a.y),s.width=Math.min(r.right,a.right)-s.x,s.height=Math.min(r.bottom,a.bottom)-s.y),s};h.exports=n},52784:(h,w,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(60646),u=e(59996),n=function(r,a,s){if(s===void 0&&(s=[]),u(r,a)){var o=r.getLineA(),d=r.getLineB(),l=r.getLineC(),f=r.getLineD();i(o,a,s),i(d,a,s),i(l,a,s),i(f,a,s)}return s};h.exports=n},26341:(h,w,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(89265),u=e(60646),n=function(r,a,s){if(s===void 0&&(s=[]),i(r,a)){var o=a.getLineA(),d=a.getLineB(),l=a.getLineC();u(o,r,s),u(d,r,s),u(l,r,s)}return s};h.exports=n},38720:(h,w,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(4042),u=e(67636),n=function(r,a,s){if(s===void 0&&(s=[]),u(r,a)){var o=r.getLineA(),d=r.getLineB(),l=r.getLineC();i(o,a,s),i(d,a,s),i(l,a,s)}return s};h.exports=n},13882:(h,w,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=e(2822),n=e(76112),r=function(a,s,o){if(o===void 0&&(o=[]),u(a,s))for(var d=a.getLineA(),l=a.getLineB(),f=a.getLineC(),m=[new i,new i,new i],g=[n(d,s,m[0]),n(l,s,m[1]),n(f,s,m[2])],p=0;p<3;p++)g[p]&&o.push(m[p]);return o};h.exports=r},75636:(h,w,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(82944),u=e(13882),n=function(r,a,s){if(s===void 0&&(s=[]),i(r,a)){var o=a.getLineA(),d=a.getLineB(),l=a.getLineC();u(r,o,s),u(r,d,s),u(r,l,s)}return s};h.exports=n},80462:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87902),u=e(2141),n=new u,r=function(a,s,o){if(o===void 0&&(o=n),i(s,a.x1,a.y1))return o.x=a.x1,o.y=a.y1,!0;if(i(s,a.x2,a.y2))return o.x=a.x2,o.y=a.y2,!0;var d=a.x2-a.x1,l=a.y2-a.y1,f=s.x-a.x1,m=s.y-a.y1,g=d*d+l*l,p=d,y=l;if(g>0){var S=(f*d+m*l)/g;p*=S,y*=S}o.x=a.x1+p,o.y=a.y1+y;var C=p*p+y*y;return C<=g&&p*d+y*l>=0&&i(s,o.x,o.y)};h.exports=r},76112:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=e.x1,r=e.y1,a=e.x2,s=e.y2,o=i.x1,d=i.y1,l=i.x2,f=i.y2;if(n===a&&r===s||o===l&&d===f)return!1;var m=(f-d)*(a-n)-(l-o)*(s-r);if(m===0)return!1;var g=((l-o)*(r-d)-(f-d)*(n-o))/m,p=((a-n)*(r-d)-(s-r)*(n-o))/m;return g<0||g>1||p<0||p>1?!1:(u&&(u.x=n+g*(a-n),u.y=r+g*(s-r)),!0)};h.exports=w},92773:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.x1,n=e.y1,r=e.x2,a=e.y2,s=i.x,o=i.y,d=i.right,l=i.bottom,f=0;if(u>=s&&u<=d&&n>=o&&n<=l||r>=s&&r<=d&&a>=o&&a<=l)return!0;if(u<s&&r>=s){if(f=n+(a-n)*(s-u)/(r-u),f>o&&f<=l)return!0}else if(u>d&&r<=d&&(f=n+(a-n)*(d-u)/(r-u),f>=o&&f<=l))return!0;if(n<o&&a>=o){if(f=u+(r-u)*(o-n)/(a-n),f>=s&&f<=d)return!0}else if(n>l&&a<=l&&(f=u+(r-u)*(l-n)/(a-n),f>=s&&f<=d))return!0;return!1};h.exports=w},16204:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){u===void 0&&(u=1);var n=i.x1,r=i.y1,a=i.x2,s=i.y2,o=e.x,d=e.y,l=(a-n)*(a-n)+(s-r)*(s-r);if(l===0)return!1;var f=((o-n)*(a-n)+(d-r)*(s-r))/l;if(f<0)return Math.sqrt((n-o)*(n-o)+(r-d)*(r-d))<=u;if(f>=0&&f<=1){var m=((r-d)*(a-n)-(n-o)*(s-r))/l;return Math.abs(m)*Math.sqrt(l)<=u}else return Math.sqrt((a-o)*(a-o)+(s-d)*(s-d))<=u};h.exports=w},14199:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(16204),u=function(n,r){if(!i(n,r))return!1;var a=Math.min(r.x1,r.x2),s=Math.max(r.x1,r.x2),o=Math.min(r.y1,r.y2),d=Math.max(r.y1,r.y2);return n.x>=a&&n.x<=s&&n.y>=o&&n.y<=d};h.exports=u},59996:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.width<=0||e.height<=0||i.width<=0||i.height<=0?!1:!(e.right<i.x||e.bottom<i.y||e.x>i.right||e.y>i.bottom)};h.exports=w},89265:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(76112),u=e(37303),n=e(48653),r=e(77493),a=function(s,o){if(o.left>s.right||o.right<s.left||o.top>s.bottom||o.bottom<s.top)return!1;var d=o.getLineA(),l=o.getLineB(),f=o.getLineC();if(u(s,d.x1,d.y1)||u(s,d.x2,d.y2)||u(s,l.x1,l.y1)||u(s,l.x2,l.y2)||u(s,f.x1,f.y1)||u(s,f.x2,f.y2))return!0;var m=s.getLineA(),g=s.getLineB(),p=s.getLineC(),y=s.getLineD();if(i(d,m)||i(d,g)||i(d,p)||i(d,y)||i(l,m)||i(l,g)||i(l,p)||i(l,y)||i(f,m)||i(f,g)||i(f,p)||i(f,y))return!0;var S=r(s),C=n(o,S,!0);return C.length>0};h.exports=a},84411:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r,a){return a===void 0&&(a=0),!(i>e.right+a||u<e.left-a||n>e.bottom+a||r<e.top-a)};h.exports=w},67636:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(80462),u=e(10690),n=function(r,a){return r.left>a.right||r.right<a.left||r.top>a.bottom||r.bottom<a.top?!1:!!(u(r,a.x,a.y)||i(r.getLineA(),a)||i(r.getLineB(),a)||i(r.getLineC(),a))};h.exports=n},2822:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(76112),u=function(n,r){return!!(n.contains(r.x1,r.y1)||n.contains(r.x2,r.y2)||i(n.getLineA(),r)||i(n.getLineB(),r)||i(n.getLineC(),r))};h.exports=u},82944:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(48653),u=e(71694),n=e(76112),r=function(a,s){if(a.left>s.right||a.right<s.left||a.top>s.bottom||a.bottom<s.top)return!1;var o=a.getLineA(),d=a.getLineB(),l=a.getLineC(),f=s.getLineA(),m=s.getLineB(),g=s.getLineC();if(n(o,f)||n(o,m)||n(o,g)||n(d,f)||n(d,m)||n(d,g)||n(l,f)||n(l,m)||n(l,g))return!0;var p=u(a),y=i(s,p,!0);return y.length>0||(p=u(s),y=i(a,p,!0),y.length>0)};h.exports=r},91865:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CircleToCircle:e(2044),CircleToRectangle:e(81491),GetCircleToCircle:e(63376),GetCircleToRectangle:e(97439),GetLineToCircle:e(4042),GetLineToLine:e(36100),GetLineToPoints:e(3073),GetLineToPolygon:e(56362),GetLineToRectangle:e(60646),GetRaysFromPointToPolygon:e(71147),GetRectangleIntersection:e(68389),GetRectangleToRectangle:e(52784),GetRectangleToTriangle:e(26341),GetTriangleToCircle:e(38720),GetTriangleToLine:e(13882),GetTriangleToTriangle:e(75636),LineToCircle:e(80462),LineToLine:e(76112),LineToRectangle:e(92773),PointToLine:e(16204),PointToLineSegment:e(14199),RectangleToRectangle:e(59996),RectangleToTriangle:e(89265),RectangleToValues:e(84411),TriangleToCircle:e(67636),TriangleToLine:e(2822),TriangleToTriangle:e(82944)}},91938:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};h.exports=w},84993:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){i===void 0&&(i=1),u===void 0&&(u=[]);var n=Math.round(e.x1),r=Math.round(e.y1),a=Math.round(e.x2),s=Math.round(e.y2),o=Math.abs(a-n),d=Math.abs(s-r),l=n<a?1:-1,f=r<s?1:-1,m=o-d;u.push({x:n,y:r});for(var g=1;!(n===a&&r===s);){var p=m<<1;p>-d&&(m-=d,n+=l),p<o&&(m+=o,r+=f),g%i===0&&u.push({x:n,y:r}),g++}return u};h.exports=w},36469:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=i-(e.x1+e.x2)/2,r=u-(e.y1+e.y2)/2;return e.x1+=n,e.y1+=r,e.x2+=n,e.y2+=r,e};h.exports=w},31116:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(23031),u=function(n){return new i(n.x1,n.y1,n.x2,n.y2)};h.exports=u},59944:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i.setTo(e.x1,e.y1,e.x2,e.y2)};h.exports=w},59220:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.x1===i.x1&&e.y1===i.y1&&e.x2===i.x2&&e.y2===i.y2};h.exports=w},78177:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35001),u=function(n,r,a){a===void 0&&(a=r);var s=i(n),o=n.x2-n.x1,d=n.y2-n.y1;return r&&(n.x1=n.x1-o/s*r,n.y1=n.y1-d/s*r),a&&(n.x2=n.x2+o/s*a,n.y2=n.y2+d/s*a),n};h.exports=u},26708:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(52816),u=e(6113),n=e(2141),r=function(a,s,o,d,l){d===void 0&&(d=0),l===void 0&&(l=[]);var f=[],m=a.x1,g=a.y1,p=a.x2-m,y=a.y2-g,S=u(s,l),C,A,M=o-1;for(C=0;C<M;C++)A=S(C/M),f.push(new n(m+p*A,g+y*A));if(A=S(1),f.push(new n(m+p*A,g+y*A)),d>0){var L=f[0],P=[L];for(C=1;C<f.length-1;C++){var O=f[C];i(L,O)>=d&&(P.push(O),L=O)}var D=f[f.length-1];return i(L,D)<d&&P.pop(),P.push(D),P}else return f};h.exports=r},32125:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r){return r===void 0&&(r=new i),r.x=(n.x1+n.x2)/2,r.y=(n.y1+n.y2)/2,r};h.exports=u},99569:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r,a){a===void 0&&(a=new i);var s=n.x1,o=n.y1,d=n.x2,l=n.y2,f=(d-s)*(d-s)+(l-o)*(l-o);if(f===0)return a;var m=((r.x-s)*(d-s)+(r.y-o)*(l-o))/f;return a.x=s+m*(d-s),a.y=o+m*(l-o),a};h.exports=u},34638:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36383),u=e(91938),n=e(2141),r=function(a,s){s===void 0&&(s=new n);var o=u(a)-i.TAU;return s.x=Math.cos(o),s.y=Math.sin(o),s};h.exports=r},13151:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r,a){return a===void 0&&(a=new i),a.x=n.x1+(n.x2-n.x1)*r,a.y=n.y1+(n.y2-n.y1)*r,a};h.exports=u},15258:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35001),u=e(2141),n=function(r,a,s,o){o===void 0&&(o=[]),!a&&s>0&&(a=i(r)/s);for(var d=r.x1,l=r.y1,f=r.x2,m=r.y2,g=0;g<a;g++){var p=g/a,y=d+(f-d)*p,S=l+(m-l)*p;o.push(new u(y,S))}return o};h.exports=n},26408:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.x1,n=e.y1,r=e.x2,a=e.y2,s=(r-u)*(r-u)+(a-n)*(a-n);if(s===0)return!1;var o=((n-i.y)*(r-u)-(u-i.x)*(a-n))/s;return Math.abs(o)*Math.sqrt(s)};h.exports=w},98770:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return Math.abs(e.y1-e.y2)};h.exports=w},35001:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};h.exports=w},23031:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(13151),n=e(15258),r=e(23777),a=e(65822),s=e(26099),o=new i({initialize:function(l,f,m,g){l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=0),g===void 0&&(g=0),this.type=r.LINE,this.x1=l,this.y1=f,this.x2=m,this.y2=g},getPoint:function(d,l){return u(this,d,l)},getPoints:function(d,l,f){return n(this,d,l,f)},getRandomPoint:function(d){return a(this,d)},setTo:function(d,l,f,m){return d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=0),this.x1=d,this.y1=l,this.x2=f,this.y2=m,this},setFromObjects:function(d,l){return this.x1=d.x,this.y1=d.y,this.x2=l.x,this.y2=l.y,this},getPointA:function(d){return d===void 0&&(d=new s),d.set(this.x1,this.y1),d},getPointB:function(d){return d===void 0&&(d=new s),d.set(this.x2,this.y2),d},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(d){this.x1<=this.x2?this.x1=d:this.x2=d}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(d){this.x1>this.x2?this.x1=d:this.x2=d}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(d){this.y1<=this.y2?this.y1=d:this.y2=d}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(d){this.y1>this.y2?this.y1=d:this.y2=d}}});h.exports=o},64795:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36383),u=e(15994),n=e(91938),r=function(a){var s=n(a)-i.TAU;return u(s,-Math.PI,Math.PI)};h.exports=r},52616:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36383),u=e(91938),n=function(r){return Math.cos(u(r)-i.TAU)};h.exports=n},87231:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36383),u=e(91938),n=function(r){return Math.sin(u(r)-i.TAU)};h.exports=n},89662:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return e.x1+=i,e.y1+=u,e.x2+=i,e.y2+=u,e};h.exports=w},71165:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};h.exports=w},65822:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r){r===void 0&&(r=new i);var a=Math.random();return r.x=n.x1+a*(n.x2-n.x1),r.y=n.y1+a*(n.y2-n.y1),r};h.exports=u},69777:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91938),u=e(64795),n=function(r,a){return 2*u(a)-Math.PI-i(r)};h.exports=n},39706:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(64400),u=function(n,r){var a=(n.x1+n.x2)/2,s=(n.y1+n.y2)/2;return i(n,a,s,r)};h.exports=u},82585:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(64400),u=function(n,r,a){return i(n,r.x,r.y,a)};h.exports=u},64400:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r=Math.cos(n),a=Math.sin(n),s=e.x1-i,o=e.y1-u;return e.x1=s*r-o*a+i,e.y1=s*a+o*r+u,s=e.x2-i,o=e.y2-u,e.x2=s*r-o*a+i,e.y2=s*a+o*r+u,e};h.exports=w},62377:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r){return e.x1=i,e.y1=u,e.x2=i+Math.cos(n)*r,e.y2=u+Math.sin(n)*r,e};h.exports=w},71366:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};h.exports=w},10809:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return Math.abs(e.x1-e.x2)};h.exports=w},2529:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(23031);i.Angle=e(91938),i.BresenhamPoints=e(84993),i.CenterOn=e(36469),i.Clone=e(31116),i.CopyFrom=e(59944),i.Equals=e(59220),i.Extend=e(78177),i.GetEasedPoints=e(26708),i.GetMidPoint=e(32125),i.GetNearestPoint=e(99569),i.GetNormal=e(34638),i.GetPoint=e(13151),i.GetPoints=e(15258),i.GetShortestDistance=e(26408),i.Height=e(98770),i.Length=e(35001),i.NormalAngle=e(64795),i.NormalX=e(52616),i.NormalY=e(87231),i.Offset=e(89662),i.PerpSlope=e(71165),i.Random=e(65822),i.ReflectAngle=e(69777),i.Rotate=e(39706),i.RotateAroundPoint=e(82585),i.RotateAroundXY=e(64400),i.SetToAngle=e(62377),i.Slope=e(71366),i.Width=e(10809),h.exports=i},83997:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(87841),n=e(26099);function r(s,o,d,l){var f=s-d,m=o-l,g=f*f+m*m;return Math.sqrt(g)}var a=new i({initialize:function(o,d,l){this.vertex1=o,this.vertex2=d,this.vertex3=l,this.bounds=new u,this._inCenter=new n},getInCenter:function(s){s===void 0&&(s=!0);var o=this.vertex1,d=this.vertex2,l=this.vertex3,f,m,g,p,y,S;s?(f=o.x,m=o.y,g=d.x,p=d.y,y=l.x,S=l.y):(f=o.vx,m=o.vy,g=d.vx,p=d.vy,y=l.vx,S=l.vy);var C=r(y,S,g,p),A=r(f,m,y,S),M=r(g,p,f,m),L=C+A+M;return this._inCenter.set((f*C+g*A+y*M)/L,(m*C+p*A+S*M)/L)},contains:function(s,o,d){var l=this.vertex1,f=this.vertex2,m=this.vertex3,g=l.vx,p=l.vy,y=f.vx,S=f.vy,C=m.vx,A=m.vy;if(d){var M=d.a,L=d.b,P=d.c,O=d.d,D=d.e,I=d.f;g=l.vx*M+l.vy*P+D,p=l.vx*L+l.vy*O+I,y=f.vx*M+f.vy*P+D,S=f.vx*L+f.vy*O+I,C=m.vx*M+m.vy*P+D,A=m.vx*L+m.vy*O+I}var F=C-g,H=A-p,k=y-g,W=S-p,$=s-g,K=o-p,Z=F*F+H*H,X=F*k+H*W,j=F*$+H*K,Y=k*k+W*W,U=k*$+W*K,J=Z*Y-X*X,q=J===0?0:1/J,_=(Y*j-X*U)*q,te=(Z*U-X*j)*q;return _>=0&&te>=0&&_+te<1},isCounterClockwise:function(s){var o=this.vertex1,d=this.vertex2,l=this.vertex3,f=(d.vx-o.vx)*(l.vy-o.vy)-(d.vy-o.vy)*(l.vx-o.vx);return s<=0?f>=0:f<0},load:function(s,o,d,l,f){return d=this.vertex1.load(s,o,d,l,f),d=this.vertex2.load(s,o,d,l,f),d=this.vertex3.load(s,o,d,l,f),d},transformCoordinatesLocal:function(s,o,d,l){return this.vertex1.transformCoordinatesLocal(s,o,d,l),this.vertex2.transformCoordinatesLocal(s,o,d,l),this.vertex3.transformCoordinatesLocal(s,o,d,l),this},updateBounds:function(){var s=this.vertex1,o=this.vertex2,d=this.vertex3,l=this.bounds;return l.x=Math.min(s.vx,o.vx,d.vx),l.y=Math.min(s.vy,o.vy,d.vy),l.width=Math.max(s.vx,o.vx,d.vx)-l.x,l.height=Math.max(s.vy,o.vy,d.vy)-l.y,this},isInView:function(s,o,d,l,f,m,g,p,y,S,C){this.update(l,f,m,g,p,y,S,C);var A=this.vertex1,M=this.vertex2,L=this.vertex3;if(A.ta<=0&&M.ta<=0&&L.ta<=0||o&&!this.isCounterClockwise(d))return!1;var P=this.bounds;P.x=Math.min(A.tx,M.tx,L.tx),P.y=Math.min(A.ty,M.ty,L.ty),P.width=Math.max(A.tx,M.tx,L.tx)-P.x,P.height=Math.max(A.ty,M.ty,L.ty)-P.y;var O=s.x+s.width,D=s.y+s.height;return P.width<=0||P.height<=0||s.width<=0||s.height<=0?!1:!(P.right<s.x||P.bottom<s.y||P.x>O||P.y>D)},scrollUV:function(s,o){return this.vertex1.scrollUV(s,o),this.vertex2.scrollUV(s,o),this.vertex3.scrollUV(s,o),this},scaleUV:function(s,o){return this.vertex1.scaleUV(s,o),this.vertex2.scaleUV(s,o),this.vertex3.scaleUV(s,o),this},setColor:function(s){return this.vertex1.color=s,this.vertex2.color=s,this.vertex3.color=s,this},update:function(s,o,d,l,f,m,g,p){return this.vertex1.update(o,d,l,f,m,g,p,s),this.vertex2.update(o,d,l,f,m,g,p,s),this.vertex3.update(o,d,l,f,m,g,p,s),this},translate:function(s,o){o===void 0&&(o=0);var d=this.vertex1,l=this.vertex2,f=this.vertex3;return d.x+=s,d.y+=o,l.x+=s,l.y+=o,f.x+=s,f.y+=o,this},x:{get:function(){return this.getInCenter().x},set:function(s){var o=this.getInCenter();this.translate(s-o.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(s){var o=this.getInCenter();this.translate(0,s-o.y)}},alpha:{get:function(){var s=this.vertex1,o=this.vertex2,d=this.vertex3;return(s.alpha+o.alpha+d.alpha)/3},set:function(s){this.vertex1.alpha=s,this.vertex2.alpha=s,this.vertex3.alpha=s}},depth:{get:function(){var s=this.vertex1,o=this.vertex2,d=this.vertex3;return(s.vz+o.vz+d.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});h.exports=a},48803:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83997),u=e(95540),n=e(37867),r=e(25836),a=e(39318),s=new r,o=new r,d=new n,l=function(f){var m=u(f,"mesh"),g=u(f,"texture",null),p=u(f,"frame"),y=u(f,"width",1),S=u(f,"height",y),C=u(f,"widthSegments",1),A=u(f,"heightSegments",C),M=u(f,"x",0),L=u(f,"y",0),P=u(f,"z",0),O=u(f,"rotateX",0),D=u(f,"rotateY",0),I=u(f,"rotateZ",0),F=u(f,"zIsUp",!0),H=u(f,"isOrtho",m?m.dirtyCache[11]:!1),k=u(f,"colors",[16777215]),W=u(f,"alphas",[1]),$=u(f,"tile",!1),K=u(f,"flipY",!1),Z=u(f,"width",null),X={faces:[],verts:[]};s.set(M,L,P),o.set(O,D,I),d.fromRotationXYTranslation(o,s,F);var j;if(!g&&m)g=m.texture,p||(j=m.frame);else if(m&&typeof g=="string")g=m.scene.sys.textures.get(g);else if(!g)return X;j||(j=g.get(p)),!Z&&H&&g&&m&&(y=j.width/m.height,S=j.height/m.height);var Y=y/2,U=S/2,J=Math.floor(C),q=Math.floor(A),_=J+1,te=q+1,se=y/J,ne=S/q,he=[],le=[],ge,re,fe=0,Ae=1,Ie=0,Ne=1;j&&(fe=j.u0,Ae=j.u1,K?(Ie=j.v1,Ne=j.v0):(Ie=j.v0,Ne=j.v1));var Fe=Ae-fe,Se=Ne-Ie;for(re=0;re<te;re++){var Oe=re*ne-U;for(ge=0;ge<_;ge++){var Be=ge*se-Y;le.push(Be,-Oe);var Pt=fe+Fe*(ge/J),Gt=Ie+Se*(re/q);he.push(Pt,Gt)}}Array.isArray(k)||(k=[k]),Array.isArray(W)||(W=[W]);var si=0,It=0;for(re=0;re<q;re++)for(ge=0;ge<J;ge++){var Ht=(ge+_*re)*2,hi=(ge+_*(re+1))*2,Ai=(ge+1+_*(re+1))*2,Ot=(ge+1+_*re)*2,qt=k[It],jt=W[si],Si=new a(le[Ht],le[Ht+1],0,he[Ht],he[Ht+1],qt,jt).transformMat4(d),Di=new a(le[hi],le[hi+1],0,he[hi],he[hi+1],qt,jt).transformMat4(d),ea=new a(le[Ot],le[Ot+1],0,he[Ot],he[Ot+1],qt,jt).transformMat4(d),es=new a(le[hi],le[hi+1],0,he[hi],he[hi+1],qt,jt).transformMat4(d),ta=new a(le[Ai],le[Ai+1],0,he[Ai],he[Ai+1],qt,jt).transformMat4(d),cs=new a(le[Ot],le[Ot+1],0,he[Ot],he[Ot+1],qt,jt).transformMat4(d);$&&(Si.setUVs(fe,Ne),Di.setUVs(fe,Ie),ea.setUVs(Ae,Ne),es.setUVs(fe,Ie),ta.setUVs(Ae,Ie),cs.setUVs(Ae,Ne)),It++,It===k.length&&(It=0),si++,si===W.length&&(si=0),X.verts.push(Si,Di,ea,es,ta,cs),X.faces.push(new i(Si,Di,ea),new i(es,ta,cs))}return m&&(m.faces=m.faces.concat(X.faces),m.vertices=m.vertices.concat(X.verts)),X};h.exports=l},34684:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83997),u=e(37867),n=e(25836),r=e(39318),a=new n,s=new n,o=new u,d=function(l,f,m,g,p,y,S,C,A,M){m===void 0&&(m=1),g===void 0&&(g=0),p===void 0&&(p=0),y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=0),A===void 0&&(A=0),M===void 0&&(M=!0);var L={faces:[],verts:[]},P=l.materials;a.set(g,p,y),s.set(S,C,A),o.fromRotationXYTranslation(s,a,M);for(var O=0;O<l.models.length;O++)for(var D=l.models[O],I=D.vertices,F=D.textureCoords,H=D.faces,k=0;k<H.length;k++){var W=H[k],$=W.vertices[0],K=W.vertices[1],Z=W.vertices[2],X=I[$.vertexIndex],j=I[K.vertexIndex],Y=I[Z.vertexIndex],U=$.textureCoordsIndex,J=K.textureCoordsIndex,q=Z.textureCoordsIndex,_=U===-1?{u:0,v:1}:F[U],te=J===-1?{u:0,v:0}:F[J],se=q===-1?{u:1,v:1}:F[q],ne=16777215;W.material!==""&&P[W.material]&&(ne=P[W.material]);var he=new r(X.x*m,X.y*m,X.z*m,_.u,_.v,ne).transformMat4(o),le=new r(j.x*m,j.y*m,j.z*m,te.u,te.v,ne).transformMat4(o),ge=new r(Y.x*m,Y.y*m,Y.z*m,se.u,se.v,ne).transformMat4(o);L.verts.push(he,le,ge),L.faces.push(new i(he,le,ge))}return f&&(f.faces=f.faces.concat(L.faces),f.vertices=f.vertices.concat(L.verts)),L};h.exports=d},92515:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83997),u=e(39318),n=function(r,a,s,o,d,l,f,m){if(o===void 0&&(o=!1),l===void 0&&(l=16777215),f===void 0&&(f=1),m===void 0&&(m=!1),r.length!==a.length&&!o){console.warn("GenerateVerts: vertices and uvs count not equal");return}var g={faces:[],vertices:[]},p,y,S,C,A,M,L,P,O,D,I,F=o?3:2,H=Array.isArray(l),k=Array.isArray(f);if(Array.isArray(s)&&s.length>0)for(p=0;p<s.length;p++){var W=s[p],$=s[p]*2,K=s[p]*F;y=r[K],S=r[K+1],C=o?r[K+2]:0,A=a[$],M=a[$+1],m&&(M=1-M),L=H?l[W]:l,P=k?f[W]:f,O=0,D=0,I=0,d&&(O=d[K],D=d[K+1],I=o?d[K+2]:0),g.vertices.push(new u(y,S,C,A,M,L,P,O,D,I))}else{var Z=0,X=0;for(p=0;p<r.length;p+=F)y=r[p],S=r[p+1],C=o?r[p+2]:0,A=a[Z],M=a[Z+1],L=H?l[X]:l,P=k?f[X]:f,O=0,D=0,I=0,d&&(O=d[p],D=d[p+1],I=o?d[p+2]:0),g.vertices.push(new u(y,S,C,A,M,L,P,O,D,I)),Z+=2,X++}for(p=0;p<g.vertices.length;p+=3){var j=g.vertices[p],Y=g.vertices[p+1],U=g.vertices[p+2];g.faces.push(new i(j,Y,U))}return g};h.exports=n},85048:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=!0,e="untitled",i="",u="";function n(y){var S=y.indexOf("#");return S>-1?y.substring(0,S):y}function r(y){return y.models.length===0&&y.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),i="",y.models[y.models.length-1]}function a(y,S){var C=y.length>=2?y[1]:e;S.models.push({faces:[],name:C,textureCoords:[],vertexNormals:[],vertices:[]}),i=""}function s(y){y.length===2&&(i=y[1])}function o(y,S){var C=y.length,A=C>=2?parseFloat(y[1]):0,M=C>=3?parseFloat(y[2]):0,L=C>=4?parseFloat(y[3]):0;r(S).vertices.push({x:A,y:M,z:L})}function d(y,S){var C=y.length,A=C>=2?parseFloat(y[1]):0,M=C>=3?parseFloat(y[2]):0,L=C>=4?parseFloat(y[3]):0;isNaN(A)&&(A=0),isNaN(M)&&(M=0),isNaN(L)&&(L=0),w&&(M=1-M),r(S).textureCoords.push({u:A,v:M,w:L})}function l(y,S){var C=y.length,A=C>=2?parseFloat(y[1]):0,M=C>=3?parseFloat(y[2]):0,L=C>=4?parseFloat(y[3]):0;r(S).vertexNormals.push({x:A,y:M,z:L})}function f(y,S){var C=y.length-1;if(!(C<3)){for(var A={group:i,material:u,vertices:[]},M=0;M<C;M++){var L=y[M+1],P=L.split("/"),O=P.length;if(!(O<1||O>3)){var D=0,I=0,F=0;D=parseInt(P[0],10),O>1&&P[1]!==""&&(I=parseInt(P[1],10)),O>2&&(F=parseInt(P[2],10)),D!==0&&(D<0&&(D=r(S).vertices.length+1+D),I-=1,D-=1,F-=1,A.vertices.push({textureCoordsIndex:I,vertexIndex:D,vertexNormalIndex:F}))}}r(S).faces.push(A)}}function m(y,S){y.length>=2&&S.materialLibraries.push(y[1])}function g(y){y.length>=2&&(u=y[1])}var p=function(y,S){S===void 0&&(S=!0),w=S;var C={materials:{},materialLibraries:[],models:[]};i="",u="";for(var A=y.split(`
`),M=0;M<A.length;M++){var L=n(A[M]),P=L.replace(/\s\s+/g," ").trim().split(" ");switch(P[0].toLowerCase()){case"o":a(P,C);break;case"g":s(P);break;case"v":o(P,C);break;case"vt":d(P,C);break;case"vn":l(P,C);break;case"f":f(P,C);break;case"mtllib":m(P,C);break;case"usemtl":g(P);break}}return C};h.exports=p},61485:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37589),u=function(n){for(var r={},a=n.split(`
`),s="",o=0;o<a.length;o++){var d=a[o].trim();if(!(d.indexOf("#")===0||d==="")){var l=d.replace(/\s\s+/g," ").trim().split(" ");switch(l[0].toLowerCase()){case"newmtl":{s=l[1];break}case"kd":{var f=Math.floor(l[1]*255),m=l.length>=2?Math.floor(l[2]*255):f,g=l.length>=3?Math.floor(l[3]*255):f;r[s]=i(f,m,g);break}}}}return r};h.exports=u},92570:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r,a;if(u===void 0&&n===void 0){var s=e.getInCenter();r=s.x,a=s.y}var o=Math.cos(i),d=Math.sin(i),l=e.vertex1,f=e.vertex2,m=e.vertex3,g=l.x-r,p=l.y-a;l.set(g*o-p*d+r,g*d+p*o+a),g=f.x-r,p=f.y-a,f.set(g*o-p*d+r,g*d+p*o+a),g=m.x-r,p=m.y-a,m.set(g*o-p*d+r,g*d+p*o+a)};h.exports=w},39318:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(70554),n=e(25836),r=new i({Extends:n,initialize:function(s,o,d,l,f,m,g,p,y,S){m===void 0&&(m=16777215),g===void 0&&(g=1),p===void 0&&(p=0),y===void 0&&(y=0),S===void 0&&(S=0),n.call(this,s,o,d),this.vx=0,this.vy=0,this.vz=0,this.nx=p,this.ny=y,this.nz=S,this.u=l,this.v=f,this.color=m,this.alpha=g,this.tx=0,this.ty=0,this.ta=0,this.tu=l,this.tv=f},setUVs:function(a,s){return this.u=a,this.v=s,this.tu=a,this.tv=s,this},scrollUV:function(a,s){return this.tu+=a,this.tv+=s,this},scaleUV:function(a,s){return this.tu=this.u*a,this.tv=this.v*s,this},transformCoordinatesLocal:function(a,s,o,d){var l=this.x,f=this.y,m=this.z,g=a.val,p=l*g[0]+f*g[4]+m*g[8]+g[12],y=l*g[1]+f*g[5]+m*g[9]+g[13],S=l*g[2]+f*g[6]+m*g[10]+g[14],C=l*g[3]+f*g[7]+m*g[11]+g[15];this.vx=p/C*s,this.vy=-(y/C)*o,d<=0?this.vz=S/C:this.vz=-(S/C)},resize:function(a,s,o,d,l,f){return this.x=a,this.y=s,this.vx=this.x*o,this.vy=-this.y*d,this.vz=0,l<.5?this.vx+=o*(.5-l):l>.5&&(this.vx-=o*(l-.5)),f<.5?this.vy+=d*(.5-f):f>.5&&(this.vy-=d*(f-.5)),this},update:function(a,s,o,d,l,f,m,g){var p=this.vx*a+this.vy*o+l,y=this.vx*s+this.vy*d+f;return m&&(p=Math.round(p),y=Math.round(y)),this.tx=p,this.ty=y,this.ta=this.alpha*g,this},load:function(a,s,o,d,l){return a[++o]=this.tx,a[++o]=this.ty,a[++o]=this.tu,a[++o]=this.tv,a[++o]=d,a[++o]=l,s[++o]=u.getTintAppendFloatAlpha(this.color,this.ta),o}});h.exports=r},73090:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={Face:e(83997),GenerateGridVerts:e(48803),GenerateObjVerts:e(34684),GenerateVerts:e(92515),ParseObj:e(85048),ParseObjMaterial:e(61485),RotateFace:e(92570),Vertex:e(39318)};h.exports=i},96550:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};h.exports=w},99706:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n){return new i(n.x,n.y)};h.exports=u},68010:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i.setTo(e.x,e.y)};h.exports=w},27814:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.x===i.x&&e.y===i.y};h.exports=w},73565:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};h.exports=w},87555:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r){if(r===void 0&&(r=new i),!Array.isArray(n))throw new Error("GetCentroid points argument must be an array");var a=n.length;if(a<1)throw new Error("GetCentroid points array must not be empty");if(a===1)r.x=n[0].x,r.y=n[0].y;else{for(var s=0;s<a;s++)r.x+=n[s].x,r.y+=n[s].y;r.x/=a,r.y/=a}return r};h.exports=u},28793:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};h.exports=w},44405:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.x*e.x+e.y*e.y};h.exports=w},20873:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841),u=function(n,r){r===void 0&&(r=new i);for(var a=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,l=0;l<n.length;l++){var f=n[l];f.x>a&&(a=f.x),f.x<s&&(s=f.x),f.y>o&&(o=f.y),f.y<d&&(d=f.y)}return r.x=s,r.y=d,r.width=a-s,r.height=o-d,r};h.exports=u},26152:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r,a,s){return a===void 0&&(a=0),s===void 0&&(s=new i),s.x=n.x+(r.x-n.x)*a,s.y=n.y+(r.y-n.y)*a,s};h.exports=u},55767:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.setTo(e.y,e.x)};h.exports=w},79432:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r){return r===void 0&&(r=new i),r.setTo(-n.x,-n.y)};h.exports=u},2141:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23777),n=new i({initialize:function(a,s){a===void 0&&(a=0),s===void 0&&(s=a),this.type=u.POINT,this.x=a,this.y=s},setTo:function(r,a){return r===void 0&&(r=0),a===void 0&&(a=r),this.x=r,this.y=a,this}});h.exports=n},72930:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=e(44405),n=function(r,a,s){s===void 0&&(s=new i);var o=r.x*a.x+r.y*a.y,d=o/u(a);return d!==0&&(s.x=d*a.x,s.y=d*a.y),s};h.exports=n},62880:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r,a){a===void 0&&(a=new i);var s=n.x*r.x+n.y*r.y;return s!==0&&(a.x=s*r.x,a.y=s*r.y),a};h.exports=u},15093:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(28793),u=function(n,r){if(n.x!==0||n.y!==0){var a=i(n);n.x/=a,n.y/=a}return n.x*=r,n.y*=r,n};h.exports=u},43711:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141);i.Ceil=e(96550),i.Clone=e(99706),i.CopyFrom=e(68010),i.Equals=e(27814),i.Floor=e(73565),i.GetCentroid=e(87555),i.GetMagnitude=e(28793),i.GetMagnitudeSq=e(44405),i.GetRectangleFromPoints=e(20873),i.Interpolate=e(26152),i.Invert=e(55767),i.Negative=e(79432),i.Project=e(72930),i.ProjectUnit=e(62880),i.SetMagnitude=e(15093),h.exports=i},12306:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25717),u=function(n){return new i(n.points)};h.exports=u},63814:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){for(var n=!1,r=-1,a=e.points.length-1;++r<e.points.length;a=r){var s=e.points[r].x,o=e.points[r].y,d=e.points[a].x,l=e.points[a].y;(o<=u&&u<l||l<=u&&u<o)&&i<(d-s)*(u-o)/(l-o)+s&&(n=!n)}return n};h.exports=w},99338:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(63814),u=function(n,r){return i(n,r.x,r.y)};h.exports=u},94811:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(X,j,Y){Y=Y||2;var U=j&&j.length,J=U?j[0]*Y:X.length,q=e(X,0,J,Y,!0),_=[];if(!q||q.next===q.prev)return _;var te,se,ne,he,le,ge,re;if(U&&(q=o(X,j,q,Y)),X.length>80*Y){te=ne=X[0],se=he=X[1];for(var fe=Y;fe<J;fe+=Y)le=X[fe],ge=X[fe+1],le<te&&(te=le),ge<se&&(se=ge),le>ne&&(ne=le),ge>he&&(he=ge);re=Math.max(ne-te,he-se),re=re!==0?32767/re:0}return u(q,_,Y,te,se,re,0),_}function e(X,j,Y,U,J){var q,_;if(J===Z(X,j,Y,U)>0)for(q=j;q<Y;q+=U)_=W(q,X[q],X[q+1],_);else for(q=Y-U;q>=j;q-=U)_=W(q,X[q],X[q+1],_);return _&&L(_,_.next)&&($(_),_=_.next),_}function i(X,j){if(!X)return X;j||(j=X);var Y=X,U;do if(U=!1,!Y.steiner&&(L(Y,Y.next)||M(Y.prev,Y,Y.next)===0)){if($(Y),Y=j=Y.prev,Y===Y.next)break;U=!0}else Y=Y.next;while(U||Y!==j);return j}function u(X,j,Y,U,J,q,_){if(X){!_&&q&&g(X,U,J,q);for(var te=X,se,ne;X.prev!==X.next;){if(se=X.prev,ne=X.next,q?r(X,U,J,q):n(X)){j.push(se.i/Y|0),j.push(X.i/Y|0),j.push(ne.i/Y|0),$(X),X=ne.next,te=ne.next;continue}if(X=ne,X===te){_?_===1?(X=a(i(X),j,Y),u(X,j,Y,U,J,q,2)):_===2&&s(X,j,Y,U,J,q):u(i(X),j,Y,U,J,q,1);break}}}}function n(X){var j=X.prev,Y=X,U=X.next;if(M(j,Y,U)>=0)return!1;for(var J=j.x,q=Y.x,_=U.x,te=j.y,se=Y.y,ne=U.y,he=J<q?J<_?J:_:q<_?q:_,le=te<se?te<ne?te:ne:se<ne?se:ne,ge=J>q?J>_?J:_:q>_?q:_,re=te>se?te>ne?te:ne:se>ne?se:ne,fe=U.next;fe!==j;){if(fe.x>=he&&fe.x<=ge&&fe.y>=le&&fe.y<=re&&C(J,te,q,se,_,ne,fe.x,fe.y)&&M(fe.prev,fe,fe.next)>=0)return!1;fe=fe.next}return!0}function r(X,j,Y,U){var J=X.prev,q=X,_=X.next;if(M(J,q,_)>=0)return!1;for(var te=J.x,se=q.x,ne=_.x,he=J.y,le=q.y,ge=_.y,re=te<se?te<ne?te:ne:se<ne?se:ne,fe=he<le?he<ge?he:ge:le<ge?le:ge,Ae=te>se?te>ne?te:ne:se>ne?se:ne,Ie=he>le?he>ge?he:ge:le>ge?le:ge,Ne=y(re,fe,j,Y,U),Fe=y(Ae,Ie,j,Y,U),Se=X.prevZ,Oe=X.nextZ;Se&&Se.z>=Ne&&Oe&&Oe.z<=Fe;){if(Se.x>=re&&Se.x<=Ae&&Se.y>=fe&&Se.y<=Ie&&Se!==J&&Se!==_&&C(te,he,se,le,ne,ge,Se.x,Se.y)&&M(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,Oe.x>=re&&Oe.x<=Ae&&Oe.y>=fe&&Oe.y<=Ie&&Oe!==J&&Oe!==_&&C(te,he,se,le,ne,ge,Oe.x,Oe.y)&&M(Oe.prev,Oe,Oe.next)>=0))return!1;Oe=Oe.nextZ}for(;Se&&Se.z>=Ne;){if(Se.x>=re&&Se.x<=Ae&&Se.y>=fe&&Se.y<=Ie&&Se!==J&&Se!==_&&C(te,he,se,le,ne,ge,Se.x,Se.y)&&M(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;Oe&&Oe.z<=Fe;){if(Oe.x>=re&&Oe.x<=Ae&&Oe.y>=fe&&Oe.y<=Ie&&Oe!==J&&Oe!==_&&C(te,he,se,le,ne,ge,Oe.x,Oe.y)&&M(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.nextZ}return!0}function a(X,j,Y){var U=X;do{var J=U.prev,q=U.next.next;!L(J,q)&&P(J,U,U.next,q)&&F(J,q)&&F(q,J)&&(j.push(J.i/Y|0),j.push(U.i/Y|0),j.push(q.i/Y|0),$(U),$(U.next),U=X=q),U=U.next}while(U!==X);return i(U)}function s(X,j,Y,U,J,q){var _=X;do{for(var te=_.next.next;te!==_.prev;){if(_.i!==te.i&&A(_,te)){var se=k(_,te);_=i(_,_.next),se=i(se,se.next),u(_,j,Y,U,J,q,0),u(se,j,Y,U,J,q,0);return}te=te.next}_=_.next}while(_!==X)}function o(X,j,Y,U){var J=[],q,_,te,se,ne;for(q=0,_=j.length;q<_;q++)te=j[q]*U,se=q<_-1?j[q+1]*U:X.length,ne=e(X,te,se,U,!1),ne===ne.next&&(ne.steiner=!0),J.push(S(ne));for(J.sort(d),q=0;q<J.length;q++)Y=l(J[q],Y);return Y}function d(X,j){return X.x-j.x}function l(X,j){var Y=f(X,j);if(!Y)return j;var U=k(Y,X);return i(U,U.next),i(Y,Y.next)}function f(X,j){var Y=j,U=X.x,J=X.y,q=-1/0,_;do{if(J<=Y.y&&J>=Y.next.y&&Y.next.y!==Y.y){var te=Y.x+(J-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(te<=U&&te>q&&(q=te,_=Y.x<Y.next.x?Y:Y.next,te===U))return _}Y=Y.next}while(Y!==j);if(!_)return null;var se=_,ne=_.x,he=_.y,le=1/0,ge;Y=_;do U>=Y.x&&Y.x>=ne&&U!==Y.x&&C(J<he?U:q,J,ne,he,J<he?q:U,J,Y.x,Y.y)&&(ge=Math.abs(J-Y.y)/(U-Y.x),F(Y,X)&&(ge<le||ge===le&&(Y.x>_.x||Y.x===_.x&&m(_,Y)))&&(_=Y,le=ge)),Y=Y.next;while(Y!==se);return _}function m(X,j){return M(X.prev,X,j.prev)<0&&M(j.next,X,X.next)<0}function g(X,j,Y,U){var J=X;do J.z===0&&(J.z=y(J.x,J.y,j,Y,U)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next;while(J!==X);J.prevZ.nextZ=null,J.prevZ=null,p(J)}function p(X){var j,Y,U,J,q,_,te,se,ne=1;do{for(Y=X,X=null,q=null,_=0;Y;){for(_++,U=Y,te=0,j=0;j<ne&&(te++,U=U.nextZ,!!U);j++);for(se=ne;te>0||se>0&&U;)te!==0&&(se===0||!U||Y.z<=U.z)?(J=Y,Y=Y.nextZ,te--):(J=U,U=U.nextZ,se--),q?q.nextZ=J:X=J,J.prevZ=q,q=J;Y=U}q.nextZ=null,ne*=2}while(_>1);return X}function y(X,j,Y,U,J){return X=(X-Y)*J|0,j=(j-U)*J|0,X=(X|X<<8)&16711935,X=(X|X<<4)&252645135,X=(X|X<<2)&858993459,X=(X|X<<1)&1431655765,j=(j|j<<8)&16711935,j=(j|j<<4)&252645135,j=(j|j<<2)&858993459,j=(j|j<<1)&1431655765,X|j<<1}function S(X){var j=X,Y=X;do(j.x<Y.x||j.x===Y.x&&j.y<Y.y)&&(Y=j),j=j.next;while(j!==X);return Y}function C(X,j,Y,U,J,q,_,te){return(J-_)*(j-te)>=(X-_)*(q-te)&&(X-_)*(U-te)>=(Y-_)*(j-te)&&(Y-_)*(q-te)>=(J-_)*(U-te)}function A(X,j){return X.next.i!==j.i&&X.prev.i!==j.i&&!I(X,j)&&(F(X,j)&&F(j,X)&&H(X,j)&&(M(X.prev,X,j.prev)||M(X,j.prev,j))||L(X,j)&&M(X.prev,X,X.next)>0&&M(j.prev,j,j.next)>0)}function M(X,j,Y){return(j.y-X.y)*(Y.x-j.x)-(j.x-X.x)*(Y.y-j.y)}function L(X,j){return X.x===j.x&&X.y===j.y}function P(X,j,Y,U){var J=D(M(X,j,Y)),q=D(M(X,j,U)),_=D(M(Y,U,X)),te=D(M(Y,U,j));return!!(J!==q&&_!==te||J===0&&O(X,Y,j)||q===0&&O(X,U,j)||_===0&&O(Y,X,U)||te===0&&O(Y,j,U))}function O(X,j,Y){return j.x<=Math.max(X.x,Y.x)&&j.x>=Math.min(X.x,Y.x)&&j.y<=Math.max(X.y,Y.y)&&j.y>=Math.min(X.y,Y.y)}function D(X){return X>0?1:X<0?-1:0}function I(X,j){var Y=X;do{if(Y.i!==X.i&&Y.next.i!==X.i&&Y.i!==j.i&&Y.next.i!==j.i&&P(Y,Y.next,X,j))return!0;Y=Y.next}while(Y!==X);return!1}function F(X,j){return M(X.prev,X,X.next)<0?M(X,j,X.next)>=0&&M(X,X.prev,j)>=0:M(X,j,X.prev)<0||M(X,X.next,j)<0}function H(X,j){var Y=X,U=!1,J=(X.x+j.x)/2,q=(X.y+j.y)/2;do Y.y>q!=Y.next.y>q&&Y.next.y!==Y.y&&J<(Y.next.x-Y.x)*(q-Y.y)/(Y.next.y-Y.y)+Y.x&&(U=!U),Y=Y.next;while(Y!==X);return U}function k(X,j){var Y=new K(X.i,X.x,X.y),U=new K(j.i,j.x,j.y),J=X.next,q=j.prev;return X.next=j,j.prev=X,Y.next=J,J.prev=Y,U.next=Y,Y.prev=U,q.next=U,U.prev=q,U}function W(X,j,Y,U){var J=new K(X,j,Y);return U?(J.next=U.next,J.prev=U,U.next.prev=J,U.next=J):(J.prev=J,J.next=J),J}function $(X){X.next.prev=X.prev,X.prev.next=X.next,X.prevZ&&(X.prevZ.nextZ=X.nextZ),X.nextZ&&(X.nextZ.prevZ=X.prevZ)}function K(X,j,Y){this.i=X,this.x=j,this.y=Y,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}w.deviation=function(X,j,Y,U){var J=j&&j.length,q=J?j[0]*Y:X.length,_=Math.abs(Z(X,0,q,Y));if(J)for(var te=0,se=j.length;te<se;te++){var ne=j[te]*Y,he=te<se-1?j[te+1]*Y:X.length;_-=Math.abs(Z(X,ne,he,Y))}var le=0;for(te=0;te<U.length;te+=3){var ge=U[te]*Y,re=U[te+1]*Y,fe=U[te+2]*Y;le+=Math.abs((X[ge]-X[fe])*(X[re+1]-X[ge+1])-(X[ge]-X[re])*(X[fe+1]-X[ge+1]))}return _===0&&le===0?0:Math.abs((le-_)/_)};function Z(X,j,Y,U){for(var J=0,q=j,_=Y-U;q<Y;q+=U)J+=(X[_]-X[q])*(X[q+1]+X[_+1]),_=q;return J}w.flatten=function(X){for(var j=X[0][0].length,Y={vertices:[],holes:[],dimensions:j},U=0,J=0;J<X.length;J++){for(var q=0;q<X[J].length;q++)for(var _=0;_<j;_++)Y.vertices.push(X[J][q][_]);J>0&&(U+=X[J-1].length,Y.holes.push(U))}return Y},h.exports=w},13829:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841),u=function(n,r){r===void 0&&(r=new i);for(var a=1/0,s=1/0,o=-a,d=-s,l,f=0;f<n.points.length;f++)l=n.points[f],a=Math.min(a,l.x),s=Math.min(s,l.y),o=Math.max(o,l.x),d=Math.max(d,l.y);return r.x=a,r.y=s,r.width=o-a,r.height=d-s,r};h.exports=u},26173:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i===void 0&&(i=[]);for(var u=0;u<e.points.length;u++)i.push(e.points[u].x),i.push(e.points[u].y);return i};h.exports=w},9564:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35001),u=e(23031),n=e(30052),r=function(a,s,o,d){d===void 0&&(d=[]);var l=a.points,f=n(a);!s&&o>0&&(s=f/o);for(var m=0;m<s;m++)for(var g=f*(m/s),p=0,y=0;y<l.length;y++){var S=l[y],C=l[(y+1)%l.length],A=new u(S.x,S.y,C.x,C.y),M=i(A);if(g<p||g>p+M){p+=M;continue}var L=A.getPoint((g-p)/M);d.push(L);break}return d};h.exports=r},30052:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35001),u=e(23031),n=function(r){for(var a=r.points,s=0,o=0;o<a.length;o++){var d=a[o],l=a[(o+1)%a.length],f=new u(d.x,d.y,l.x,l.y);s+=i(f)}return s};h.exports=n},25717:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(63814),n=e(9564),r=e(23777),a=new i({initialize:function(o){this.type=r.POLYGON,this.area=0,this.points=[],o&&this.setTo(o)},contains:function(s,o){return u(this,s,o)},setTo:function(s){if(this.area=0,this.points=[],typeof s=="string"&&(s=s.split(" ")),!Array.isArray(s))return this;for(var o,d=0;d<s.length;d++)o={x:0,y:0},typeof s[d]=="number"||typeof s[d]=="string"?(o.x=parseFloat(s[d]),o.y=parseFloat(s[d+1]),d++):Array.isArray(s[d])?(o.x=s[d][0],o.y=s[d][1]):(o.x=s[d].x,o.y=s[d].y),this.points.push(o);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var s=0,o,d,l=0;l<this.points.length-1;l++)o=this.points[l],d=this.points[l+1],s+=(d.x-o.x)*(o.y+d.y);return o=this.points[0],d=this.points[this.points.length-1],s+=(o.x-d.x)*(d.y+o.y),this.area=-s*.5,this.area},getPoints:function(s,o,d){return n(this,s,o,d)}});h.exports=a},8133:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.points.reverse(),e};h.exports=w},29524:h=>{function w(a,s){var o=a.x-s.x,d=a.y-s.y;return o*o+d*d}function e(a,s,o){var d=s.x,l=s.y,f=o.x-d,m=o.y-l;if(f!==0||m!==0){var g=((a.x-d)*f+(a.y-l)*m)/(f*f+m*m);g>1?(d=o.x,l=o.y):g>0&&(d+=f*g,l+=m*g)}return f=a.x-d,m=a.y-l,f*f+m*m}function i(a,s){for(var o=a[0],d=[o],l,f=1,m=a.length;f<m;f++)l=a[f],w(l,o)>s&&(d.push(l),o=l);return o!==l&&d.push(l),d}function u(a,s,o,d,l){for(var f=d,m,g=s+1;g<o;g++){var p=e(a[g],a[s],a[o]);p>f&&(m=g,f=p)}f>d&&(m-s>1&&u(a,s,m,d,l),l.push(a[m]),o-m>1&&u(a,m,o,d,l))}function n(a,s){var o=a.length-1,d=[a[0]];return u(a,0,o,s,d),d.push(a[o]),d}var r=function(a,s,o){s===void 0&&(s=1),o===void 0&&(o=!1);var d=a.points;if(d.length>2){var l=s*s;o||(d=i(d,l)),a.setTo(n(d,l))}return a};h.exports=r},5469:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(i,u){return i[0]=u[0],i[1]=u[1],i},e=function(i){var u,n=[],r=i.points;for(u=0;u<r.length;u++)n.push([r[u].x,r[u].y]);var a=[];for(n.length>0&&a.push(w([0,0],n[0])),u=0;u<n.length-1;u++){var s=n[u],o=n[u+1],d=s[0],l=s[1],f=o[0],m=o[1];a.push([.85*d+.15*f,.85*l+.15*m]),a.push([.15*d+.85*f,.15*l+.85*m])}return n.length>1&&a.push(w([0,0],n[n.length-1])),i.setTo(a)};h.exports=e},24709:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){for(var n=e.points,r=0;r<n.length;r++)n[r].x+=i,n[r].y+=u;return e};h.exports=w},58423:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25717);i.Clone=e(12306),i.Contains=e(63814),i.ContainsPoint=e(99338),i.Earcut=e(94811),i.GetAABB=e(13829),i.GetNumberArray=e(26173),i.GetPoints=e(9564),i.Perimeter=e(30052),i.Reverse=e(8133),i.Simplify=e(29524),i.Smooth=e(5469),i.Translate=e(24709),h.exports=i},62224:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.width*e.height};h.exports=w},98615:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};h.exports=w},31688:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};h.exports=w},67502:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return e.x=i-e.width/2,e.y=u-e.height/2,e};h.exports=w},65085:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841),u=function(n){return new i(n.x,n.y,n.width,n.height)};h.exports=u},37303:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return e.width<=0||e.height<=0?!1:e.x<=i&&e.x+e.width>=i&&e.y<=u&&e.y+e.height>=u};h.exports=w},96553:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37303),u=function(n,r){return i(n,r.x,r.y)};h.exports=u},70273:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i.width*i.height>e.width*e.height?!1:i.x>e.x&&i.x<e.right&&i.right>e.x&&i.right<e.right&&i.y>e.y&&i.y<e.bottom&&i.bottom>e.y&&i.bottom<e.bottom};h.exports=w},43459:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i.setTo(e.x,e.y,e.width,e.height)};h.exports=w},77493:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i===void 0&&(i=[]),i.push({x:e.x,y:e.y}),i.push({x:e.right,y:e.y}),i.push({x:e.right,y:e.bottom}),i.push({x:e.x,y:e.bottom}),i};h.exports=w},9219:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.x===i.x&&e.y===i.y&&e.width===i.width&&e.height===i.height};h.exports=w},53751:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(8249),u=function(n,r){var a=i(n);return a<i(r)?n.setSize(r.height*a,r.height):n.setSize(r.width,r.width/a),n.setPosition(r.centerX-n.width/2,r.centerY-n.height/2)};h.exports=u},16088:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(8249),u=function(n,r){var a=i(n);return a>i(r)?n.setSize(r.height*a,r.height):n.setSize(r.width,r.width/a),n.setPosition(r.centerX-n.width/2,r.centerY-n.height/2)};h.exports=u},80774:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};h.exports=w},83859:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};h.exports=w},19217:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841),u=e(36383),n=function(r,a){if(a===void 0&&(a=new i),r.length===0)return a;for(var s=Number.MAX_VALUE,o=Number.MAX_VALUE,d=u.MIN_SAFE_INTEGER,l=u.MIN_SAFE_INTEGER,f,m,g,p=0;p<r.length;p++)f=r[p],Array.isArray(f)?(m=f[0],g=f[1]):(m=f.x,g=f.y),s=Math.min(s,m),o=Math.min(o,g),d=Math.max(d,m),l=Math.max(l,g);return a.x=s,a.y=o,a.width=d-s,a.height=l-o,a};h.exports=n},9477:(h,w,e)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841),u=function(n,r,a,s,o){return o===void 0&&(o=new i),o.setTo(Math.min(n,a),Math.min(r,s),Math.abs(n-a),Math.abs(r-s))};h.exports=u},8249:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.height===0?NaN:e.width/e.height};h.exports=w},27165:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r){return r===void 0&&(r=new i),r.x=n.centerX,r.y=n.centerY,r};h.exports=u},20812:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(13019),u=e(2141),n=function(r,a,s){if(s===void 0&&(s=new u),a<=0||a>=1)return s.x=r.x,s.y=r.y,s;var o=i(r)*a;return a>.5?(o-=r.width+r.height,o<=r.width?(s.x=r.right-o,s.y=r.bottom):(s.x=r.x,s.y=r.bottom-(o-r.width))):o<=r.width?(s.x=r.x+o,s.y=r.y):(s.x=r.right,s.y=r.y+(o-r.width)),s};h.exports=n},34819:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(20812),u=e(13019),n=function(r,a,s,o){o===void 0&&(o=[]),!a&&s>0&&(a=u(r)/s);for(var d=0;d<a;d++){var l=d/a;o.push(i(r,l))}return o};h.exports=n},51313:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r){return r===void 0&&(r=new i),r.x=n.width,r.y=n.height,r};h.exports=u},86091:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(67502),u=function(n,r,a){var s=n.centerX,o=n.centerY;return n.setSize(n.width+r*2,n.height+a*2),i(n,s,o)};h.exports=u},53951:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841),u=e(59996),n=function(r,a,s){return s===void 0&&(s=new i),u(r,a)?(s.x=Math.max(r.x,a.x),s.y=Math.max(r.y,a.y),s.width=Math.min(r.right,a.right)-s.x,s.height=Math.min(r.bottom,a.bottom)-s.y):s.setEmpty(),s};h.exports=n},14649:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(13019),u=e(2141),n=function(r,a,s,o){if(o===void 0&&(o=[]),!a&&!s)return o;a?s=Math.round(i(r)/a):a=i(r)/s;for(var d=r.x,l=r.y,f=0,m=0;m<s;m++)switch(o.push(new u(d,l)),f){case 0:d+=a,d>=r.right&&(f=1,l+=d-r.right,d=r.right);break;case 1:l+=a,l>=r.bottom&&(f=2,d-=l-r.bottom,l=r.bottom);break;case 2:d-=a,d<=r.left&&(f=3,l-=r.left-d,d=r.left);break;case 3:l-=a,l<=r.top&&(f=0,l=r.top);break}return o};h.exports=n},33595:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){for(var u=e.x,n=e.right,r=e.y,a=e.bottom,s=0;s<i.length;s++)u=Math.min(u,i[s].x),n=Math.max(n,i[s].x),r=Math.min(r,i[s].y),a=Math.max(a,i[s].y);return e.x=u,e.y=r,e.width=n-u,e.height=a-r,e};h.exports=w},20074:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=Math.min(e.x,i.x),n=Math.max(e.right,i.right);e.x=u,e.width=n-u;var r=Math.min(e.y,i.y),a=Math.max(e.bottom,i.bottom);return e.y=r,e.height=a-r,e};h.exports=w},92171:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=Math.min(e.x,i),r=Math.max(e.right,i);e.x=n,e.width=r-n;var a=Math.min(e.y,u),s=Math.max(e.bottom,u);return e.y=a,e.height=s-a,e};h.exports=w},42981:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return e.x+=i,e.y+=u,e};h.exports=w},46907:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.x+=i.x,e.y+=i.y,e};h.exports=w},60170:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.x<i.right&&e.right>i.x&&e.y<i.bottom&&e.bottom>i.y};h.exports=w},13019:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return 2*(e.width+e.height)};h.exports=w},85133:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=e(39506),n=function(r,a,s){s===void 0&&(s=new i),a=u(a);var o=Math.sin(a),d=Math.cos(a),l=d>0?r.width/2:r.width/-2,f=o>0?r.height/2:r.height/-2;return Math.abs(l*o)<Math.abs(f*d)?f=l*o/d:l=f*d/o,s.x=l+r.centerX,s.y=f+r.centerY,s};h.exports=n},26597:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r){return r===void 0&&(r=new i),r.x=n.x+Math.random()*n.width,r.y=n.y+Math.random()*n.height,r};h.exports=u},86470:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(30976),u=e(70273),n=e(2141),r=function(a,s,o){if(o===void 0&&(o=new n),u(a,s))switch(i(0,3)){case 0:o.x=a.x+Math.random()*(s.right-a.x),o.y=a.y+Math.random()*(s.top-a.y);break;case 1:o.x=s.x+Math.random()*(a.right-s.x),o.y=s.bottom+Math.random()*(a.bottom-s.bottom);break;case 2:o.x=a.x+Math.random()*(s.x-a.x),o.y=s.y+Math.random()*(a.bottom-s.y);break;case 3:o.x=s.right+Math.random()*(a.right-s.right),o.y=a.y+Math.random()*(s.bottom-a.y);break}return o};h.exports=r},87841:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(37303),n=e(20812),r=e(34819),a=e(23777),s=e(23031),o=e(26597),d=new i({initialize:function(f,m,g,p){f===void 0&&(f=0),m===void 0&&(m=0),g===void 0&&(g=0),p===void 0&&(p=0),this.type=a.RECTANGLE,this.x=f,this.y=m,this.width=g,this.height=p},contains:function(l,f){return u(this,l,f)},getPoint:function(l,f){return n(this,l,f)},getPoints:function(l,f,m){return r(this,l,f,m)},getRandomPoint:function(l){return o(this,l)},setTo:function(l,f,m,g){return this.x=l,this.y=f,this.width=m,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(l,f){return f===void 0&&(f=l),this.x=l,this.y=f,this},setSize:function(l,f){return f===void 0&&(f=l),this.width=l,this.height=f,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(l){return l===void 0&&(l=new s),l.setTo(this.x,this.y,this.right,this.y),l},getLineB:function(l){return l===void 0&&(l=new s),l.setTo(this.right,this.y,this.right,this.bottom),l},getLineC:function(l){return l===void 0&&(l=new s),l.setTo(this.right,this.bottom,this.x,this.bottom),l},getLineD:function(l){return l===void 0&&(l=new s),l.setTo(this.x,this.bottom,this.x,this.y),l},left:{get:function(){return this.x},set:function(l){l>=this.right?this.width=0:this.width=this.right-l,this.x=l}},right:{get:function(){return this.x+this.width},set:function(l){l<=this.x?this.width=0:this.width=l-this.x}},top:{get:function(){return this.y},set:function(l){l>=this.bottom?this.height=0:this.height=this.bottom-l,this.y=l}},bottom:{get:function(){return this.y+this.height},set:function(l){l<=this.y?this.height=0:this.height=l-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(l){this.x=l-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(l){this.y=l-this.height/2}}});h.exports=d},94845:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.width===i.width&&e.height===i.height};h.exports=w},31730:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return u===void 0&&(u=i),e.width*=i,e.height*=u,e};h.exports=w},36899:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841),u=function(n,r,a){a===void 0&&(a=new i);var s=Math.min(n.x,r.x),o=Math.min(n.y,r.y),d=Math.max(n.right,r.right)-s,l=Math.max(n.bottom,r.bottom)-o;return a.setTo(s,o,d,l)};h.exports=u},93232:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841);i.Area=e(62224),i.Ceil=e(98615),i.CeilAll=e(31688),i.CenterOn=e(67502),i.Clone=e(65085),i.Contains=e(37303),i.ContainsPoint=e(96553),i.ContainsRect=e(70273),i.CopyFrom=e(43459),i.Decompose=e(77493),i.Equals=e(9219),i.FitInside=e(53751),i.FitOutside=e(16088),i.Floor=e(80774),i.FloorAll=e(83859),i.FromPoints=e(19217),i.FromXY=e(9477),i.GetAspectRatio=e(8249),i.GetCenter=e(27165),i.GetPoint=e(20812),i.GetPoints=e(34819),i.GetSize=e(51313),i.Inflate=e(86091),i.Intersection=e(53951),i.MarchingAnts=e(14649),i.MergePoints=e(33595),i.MergeRect=e(20074),i.MergeXY=e(92171),i.Offset=e(42981),i.OffsetPoint=e(46907),i.Overlaps=e(60170),i.Perimeter=e(13019),i.PerimeterPoint=e(85133),i.Random=e(26597),i.RandomOutside=e(86470),i.SameDimensions=e(94845),i.Scale=e(31730),i.Union=e(36899),h.exports=i},41658:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i=e.x1,u=e.y1,n=e.x2,r=e.y2,a=e.x3,s=e.y3;return Math.abs(((a-i)*(r-u)-(n-i)*(s-u))/2)};h.exports=w},39208:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(16483),u=function(n,r,a){var s=a*(Math.sqrt(3)/2),o=n,d=r,l=n+a/2,f=r+s,m=n-a/2,g=r+s;return new i(o,d,l,f,m,g)};h.exports=u},39545:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(94811),u=e(16483),n=function(r,a,s,o,d){a===void 0&&(a=null),s===void 0&&(s=1),o===void 0&&(o=1),d===void 0&&(d=[]);for(var l=i(r,a),f,m,g,p,y,S,C,A,M,L=0;L<l.length;L+=3)f=l[L],m=l[L+1],g=l[L+2],p=r[f*2]*s,y=r[f*2+1]*o,S=r[m*2]*s,C=r[m*2+1]*o,A=r[g*2]*s,M=r[g*2+1]*o,d.push(new u(p,y,S,C,A,M));return d};h.exports=n},90301:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(16483),u=function(n,r,a,s){s===void 0&&(s=a);var o=n,d=r,l=n,f=r-s,m=n+a,g=r;return new i(o,d,l,f,m,g)};h.exports=u},23707:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(97523),u=e(13584),n=function(r,a,s,o){o===void 0&&(o=i);var d=o(r),l=a-d.x,f=s-d.y;return u(r,l,f)};h.exports=n},97523:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r){return r===void 0&&(r=new i),r.x=(n.x1+n.x2+n.x3)/3,r.y=(n.y1+n.y2+n.y3)/3,r};h.exports=u},24951:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099);function u(r,a,s,o){return r*o-a*s}var n=function(r,a){a===void 0&&(a=new i);var s=r.x3,o=r.y3,d=r.x1-s,l=r.y1-o,f=r.x2-s,m=r.y2-o,g=2*u(d,l,f,m),p=u(l,d*d+l*l,m,f*f+m*m),y=u(d,d*d+l*l,f,f*f+m*m);return a.x=s-p/g,a.y=o+y/g,a};h.exports=n},85614:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(96503),u=function(n,r){r===void 0&&(r=new i);var a=n.x1,s=n.y1,o=n.x2,d=n.y2,l=n.x3,f=n.y3,m=o-a,g=d-s,p=l-a,y=f-s,S=m*(a+o)+g*(s+d),C=p*(a+l)+y*(s+f),A=2*(m*(f-d)-g*(l-o)),M,L;if(Math.abs(A)<1e-6){var P=Math.min(a,o,l),O=Math.min(s,d,f);M=(Math.max(a,o,l)-P)*.5,L=(Math.max(s,d,f)-O)*.5,r.x=P+M,r.y=O+L,r.radius=Math.sqrt(M*M+L*L)}else r.x=(y*S-g*C)/A,r.y=(m*C-p*S)/A,M=r.x-a,L=r.y-s,r.radius=Math.sqrt(M*M+L*L);return r};h.exports=u},74422:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(16483),u=function(n){return new i(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};h.exports=u},10690:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=e.x3-e.x1,r=e.y3-e.y1,a=e.x2-e.x1,s=e.y2-e.y1,o=i-e.x1,d=u-e.y1,l=n*n+r*r,f=n*a+r*s,m=n*o+r*d,g=a*a+s*s,p=a*o+s*d,y=l*g-f*f,S=y===0?0:1/y,C=(g*m-f*p)*S,A=(l*p-f*m)*S;return C>=0&&A>=0&&C+A<1};h.exports=w},48653:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){u===void 0&&(u=!1),n===void 0&&(n=[]);for(var r=e.x3-e.x1,a=e.y3-e.y1,s=e.x2-e.x1,o=e.y2-e.y1,d=r*r+a*a,l=r*s+a*o,f=s*s+o*o,m=d*f-l*l,g=m===0?0:1/m,p,y,S,C,A,M,L=e.x1,P=e.y1,O=0;O<i.length&&(S=i[O].x-L,C=i[O].y-P,A=r*S+a*C,M=s*S+o*C,p=(f*A-l*M)*g,y=(d*M-l*A)*g,!(p>=0&&y>=0&&p+y<1&&(n.push({x:i[O].x,y:i[O].y}),u)));O++);return n};h.exports=w},96006:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(10690),u=function(n,r){return i(n,r.x,r.y)};h.exports=u},71326:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};h.exports=w},71694:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i===void 0&&(i=[]),i.push({x:e.x1,y:e.y1}),i.push({x:e.x2,y:e.y2}),i.push({x:e.x3,y:e.y3}),i};h.exports=w},33522:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.x1===i.x1&&e.y1===i.y1&&e.x2===i.x2&&e.y2===i.y2&&e.x3===i.x3&&e.y3===i.y3};h.exports=w},20437:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=e(35001),n=function(r,a,s){s===void 0&&(s=new i);var o=r.getLineA(),d=r.getLineB(),l=r.getLineC();if(a<=0||a>=1)return s.x=o.x1,s.y=o.y1,s;var f=u(o),m=u(d),g=u(l),p=f+m+g,y=p*a,S=0;return y<f?(S=y/f,s.x=o.x1+(o.x2-o.x1)*S,s.y=o.y1+(o.y2-o.y1)*S):y>f+m?(y-=f+m,S=y/g,s.x=l.x1+(l.x2-l.x1)*S,s.y=l.y1+(l.y2-l.y1)*S):(y-=f,S=y/m,s.x=d.x1+(d.x2-d.x1)*S,s.y=d.y1+(d.y2-d.y1)*S),s};h.exports=n},80672:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35001),u=e(2141),n=function(r,a,s,o){o===void 0&&(o=[]);var d=r.getLineA(),l=r.getLineB(),f=r.getLineC(),m=i(d),g=i(l),p=i(f),y=m+g+p;!a&&s>0&&(a=y/s);for(var S=0;S<a;S++){var C=y*(S/a),A=0,M=new u;C<m?(A=C/m,M.x=d.x1+(d.x2-d.x1)*A,M.y=d.y1+(d.y2-d.y1)*A):C>m+g?(C-=m+g,A=C/p,M.x=f.x1+(f.x2-f.x1)*A,M.y=f.y1+(f.y2-f.y1)*A):(C-=m,A=C/g,M.x=l.x1+(l.x2-l.x1)*A,M.y=l.y1+(l.y2-l.y1)*A),o.push(M)}return o};h.exports=n},39757:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141);function u(r,a,s,o){var d=r-s,l=a-o,f=d*d+l*l;return Math.sqrt(f)}var n=function(r,a){a===void 0&&(a=new i);var s=r.x1,o=r.y1,d=r.x2,l=r.y2,f=r.x3,m=r.y3,g=u(f,m,d,l),p=u(s,o,f,m),y=u(d,l,s,o),S=g+p+y;return a.x=(s*g+d*p+f*y)/S,a.y=(o*g+l*p+m*y)/S,a};h.exports=n},13584:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return e.x1+=i,e.y1+=u,e.x2+=i,e.y2+=u,e.x3+=i,e.y3+=u,e};h.exports=w},1376:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35001),u=function(n){var r=n.getLineA(),a=n.getLineB(),s=n.getLineC();return i(r)+i(a)+i(s)};h.exports=u},90260:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2141),u=function(n,r){r===void 0&&(r=new i);var a=n.x2-n.x1,s=n.y2-n.y1,o=n.x3-n.x1,d=n.y3-n.y1,l=Math.random(),f=Math.random();return l+f>=1&&(l=1-l,f=1-f),r.x=n.x1+(a*l+o*f),r.y=n.y1+(s*l+d*f),r};h.exports=u},52172:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(99614),u=e(39757),n=function(r,a){var s=u(r);return i(r,s.x,s.y,a)};h.exports=n},49907:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(99614),u=function(n,r,a){return i(n,r.x,r.y,a)};h.exports=u},99614:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r=Math.cos(n),a=Math.sin(n),s=e.x1-i,o=e.y1-u;return e.x1=s*r-o*a+i,e.y1=s*a+o*r+u,s=e.x2-i,o=e.y2-u,e.x2=s*r-o*a+i,e.y2=s*a+o*r+u,s=e.x3-i,o=e.y3-u,e.x3=s*r-o*a+i,e.y3=s*a+o*r+u,e};h.exports=w},16483:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(10690),n=e(20437),r=e(80672),a=e(23777),s=e(23031),o=e(90260),d=new i({initialize:function(f,m,g,p,y,S){f===void 0&&(f=0),m===void 0&&(m=0),g===void 0&&(g=0),p===void 0&&(p=0),y===void 0&&(y=0),S===void 0&&(S=0),this.type=a.TRIANGLE,this.x1=f,this.y1=m,this.x2=g,this.y2=p,this.x3=y,this.y3=S},contains:function(l,f){return u(this,l,f)},getPoint:function(l,f){return n(this,l,f)},getPoints:function(l,f,m){return r(this,l,f,m)},getRandomPoint:function(l){return o(this,l)},setTo:function(l,f,m,g,p,y){return l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=0),g===void 0&&(g=0),p===void 0&&(p=0),y===void 0&&(y=0),this.x1=l,this.y1=f,this.x2=m,this.y2=g,this.x3=p,this.y3=y,this},getLineA:function(l){return l===void 0&&(l=new s),l.setTo(this.x1,this.y1,this.x2,this.y2),l},getLineB:function(l){return l===void 0&&(l=new s),l.setTo(this.x2,this.y2,this.x3,this.y3),l},getLineC:function(l){return l===void 0&&(l=new s),l.setTo(this.x3,this.y3,this.x1,this.y1),l},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(l){var f=0;this.x1<=this.x2&&this.x1<=this.x3?f=this.x1-l:this.x2<=this.x1&&this.x2<=this.x3?f=this.x2-l:f=this.x3-l,this.x1-=f,this.x2-=f,this.x3-=f}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(l){var f=0;this.x1>=this.x2&&this.x1>=this.x3?f=this.x1-l:this.x2>=this.x1&&this.x2>=this.x3?f=this.x2-l:f=this.x3-l,this.x1-=f,this.x2-=f,this.x3-=f}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(l){var f=0;this.y1<=this.y2&&this.y1<=this.y3?f=this.y1-l:this.y2<=this.y1&&this.y2<=this.y3?f=this.y2-l:f=this.y3-l,this.y1-=f,this.y2-=f,this.y3-=f}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(l){var f=0;this.y1>=this.y2&&this.y1>=this.y3?f=this.y1-l:this.y2>=this.y1&&this.y2>=this.y3?f=this.y2-l:f=this.y3-l,this.y1-=f,this.y2-=f,this.y3-=f}}});h.exports=d},84435:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(16483);i.Area=e(41658),i.BuildEquilateral=e(39208),i.BuildFromPolygon=e(39545),i.BuildRight=e(90301),i.CenterOn=e(23707),i.Centroid=e(97523),i.CircumCenter=e(24951),i.CircumCircle=e(85614),i.Clone=e(74422),i.Contains=e(10690),i.ContainsArray=e(48653),i.ContainsPoint=e(96006),i.CopyFrom=e(71326),i.Decompose=e(71694),i.Equals=e(33522),i.GetPoint=e(20437),i.GetPoints=e(80672),i.InCenter=e(39757),i.Perimeter=e(1376),i.Offset=e(13584),i.Random=e(90260),i.Rotate=e(52172),i.RotateAroundPoint=e(49907),i.RotateAroundXY=e(99614),h.exports=i},74457:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:i,hitAreaCallback:u,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};h.exports=w},84409:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return function(u,n,r,a){var s=e.getPixelAlpha(n,r,a.texture.key,a.frame.name);return s&&s>=i}};h.exports=w},7003:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(93301),n=e(50792),r=e(8214),a=e(8443),s=e(78970),o=e(85098),d=e(42515),l=e(36210),f=e(61340),m=e(85955),g=new i({initialize:function(y,S){this.game=y,this.scaleManager,this.canvas,this.config=S,this.enabled=!0,this.events=new n,this.isOver=!0,this.defaultCursor="",this.keyboard=S.inputKeyboard?new s(this):null,this.mouse=S.inputMouse?new o(this):null,this.touch=S.inputTouch?new l(this):null,this.pointers=[],this.pointersTotal=S.inputActivePointers;for(var C=0;C<=this.pointersTotal;C++){var A=new d(this,C);A.smoothFactor=S.inputSmoothFactor,this.pointers.push(A)}this.mousePointer=S.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new f,this._tempMatrix2=new f,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],y.events.once(a.BOOT,this.boot,this)},boot:function(){var p=this.game,y=p.events;this.canvas=p.canvas,this.scaleManager=p.scale,this.events.emit(r.MANAGER_BOOT),y.on(a.PRE_RENDER,this.preRender,this),y.once(a.DESTROY,this.destroy,this)},setCanvasOver:function(p){this.isOver=!0,this.events.emit(r.GAME_OVER,p)},setCanvasOut:function(p){this.isOver=!1,this.events.emit(r.GAME_OUT,p)},preRender:function(){var p=this.game.loop.now,y=this.game.loop.delta,S=this.game.scene.getScenes(!0,!0);this.time=p,this.events.emit(r.MANAGER_UPDATE);for(var C=0;C<S.length;C++){var A=S[C];if(A.sys.input&&A.sys.input.updatePoll(p,y)&&this.globalTopOnly)return}},setDefaultCursor:function(p){this.defaultCursor=p,this.canvas.style.cursor!==p&&(this.canvas.style.cursor=p)},setCursor:function(p){p.cursor&&(this.canvas.style.cursor=p.cursor)},resetCursor:function(p,y){(y||p&&p.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(p){p===void 0&&(p=1);var y=[];this.pointersTotal+p>10&&(p=10-this.pointersTotal);for(var S=0;S<p;S++){var C=this.pointers.length,A=new d(this,C);A.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(A),this.pointersTotal++,y.push(A)}return y},updateInputPlugins:function(p,y){var S=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var C=0;C<S.length;C++){var A=S[C];if(A.sys.input){var M=A.sys.input.update(p,y);if(M&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(p){for(var y=this.pointers,S=[],C=0;C<p.changedTouches.length;C++)for(var A=p.changedTouches[C],M=1;M<y.length;M++){var L=y[M];if(!L.active){L.touchstart(A,p),this.activePointer=L,S.push(L);break}}this.updateInputPlugins(u.TOUCH_START,S)},onTouchMove:function(p){for(var y=this.pointers,S=[],C=0;C<p.changedTouches.length;C++)for(var A=p.changedTouches[C],M=1;M<y.length;M++){var L=y[M];if(L.active&&L.identifier===A.identifier){var P=document.elementFromPoint(A.clientX,A.clientY),O=P===this.canvas;!this.isOver&&O?this.setCanvasOver(p):this.isOver&&!O&&this.setCanvasOut(p),this.isOver&&(L.touchmove(A,p),this.activePointer=L,S.push(L));break}}this.updateInputPlugins(u.TOUCH_MOVE,S)},onTouchEnd:function(p){for(var y=this.pointers,S=[],C=0;C<p.changedTouches.length;C++)for(var A=p.changedTouches[C],M=1;M<y.length;M++){var L=y[M];if(L.active&&L.identifier===A.identifier){L.touchend(A,p),S.push(L);break}}this.updateInputPlugins(u.TOUCH_END,S)},onTouchCancel:function(p){for(var y=this.pointers,S=[],C=0;C<p.changedTouches.length;C++)for(var A=p.changedTouches[C],M=1;M<y.length;M++){var L=y[M];if(L.active&&L.identifier===A.identifier){L.touchcancel(A,p),S.push(L);break}}this.updateInputPlugins(u.TOUCH_CANCEL,S)},onMouseDown:function(p){var y=this.mousePointer;y.down(p),y.updateMotion(),this.activePointer=y,this.updateInputPlugins(u.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(p){var y=this.mousePointer;y.move(p),y.updateMotion(),this.activePointer=y,this.updateInputPlugins(u.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(p){var y=this.mousePointer;y.up(p),y.updateMotion(),this.activePointer=y,this.updateInputPlugins(u.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(p){var y=this.mousePointer;y.wheel(p),this.activePointer=y,this.updateInputPlugins(u.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(p){var y=this.mouse.locked;this.mousePointer.locked=y,this.events.emit(r.POINTERLOCK_CHANGE,p,y)},inputCandidate:function(p,y){var S=p.input;if(!S||!S.enabled||!p.willRender(y))return!1;var C=!0,A=p.parentContainer;if(A)do{if(!A.willRender(y)){C=!1;break}A=A.parentContainer}while(A);return C},hitTest:function(p,y,S,C){C===void 0&&(C=this._tempHitTest);var A=this._tempPoint,M=S.scrollX,L=S.scrollY;C.length=0;var P=p.x,O=p.y;S.getWorldPoint(P,O,A),p.worldX=A.x,p.worldY=A.y;for(var D={x:0,y:0},I=this._tempMatrix,F=this._tempMatrix2,H=0;H<y.length;H++){var k=y[H];if(this.inputCandidate(k,S)){var W=A.x+M*k.scrollFactorX-M,$=A.y+L*k.scrollFactorY-L;k.parentContainer?(k.getWorldTransformMatrix(I,F),I.applyInverse(W,$,D)):m(W,$,k.x,k.y,k.rotation,k.scaleX,k.scaleY,D),this.pointWithinHitArea(k,D.x,D.y)&&C.push(k)}}return C},pointWithinHitArea:function(p,y,S){y+=p.displayOriginX,S+=p.displayOriginY;var C=p.input;return C&&C.hitAreaCallback(C.hitArea,y,S,p)?(C.localX=y,C.localY=S,!0):!1},pointWithinInteractiveObject:function(p,y,S){return p.hitArea?(y+=p.gameObject.displayOriginX,S+=p.gameObject.displayOriginY,p.localX=y,p.localY=S,p.hitAreaCallback(p.hitArea,y,S,p)):!1},transformPointer:function(p,y,S,C){var A=p.position,M=p.prevPosition;M.x=A.x,M.y=A.y;var L=this.scaleManager.transformX(y),P=this.scaleManager.transformY(S),O=p.smoothFactor;!C||O===0?(A.x=L,A.y=P):(A.x=L*O+M.x*(1-O),A.y=P*O+M.y*(1-O))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(a.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var p=0;p<this.pointers.length;p++)this.pointers[p].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});h.exports=g},48205:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(96503),u=e(87902),n=e(83419),r=e(93301),a=e(74457),s=e(84409),o=e(20339),d=e(8497),l=e(81154),f=e(8214),m=e(50792),g=e(95540),p=e(23777),y=e(89639),S=e(41212),C=e(37277),A=e(87841),M=e(37303),L=e(44594),P=e(16483),O=e(10690),D=new n({Extends:m,initialize:function(F){m.call(this),this.scene=F,this.systems=F.sys,this.settings=F.sys.settings,this.manager=F.sys.game.input,this.pluginEvents=new m,this.enabled=!0,this.displayList,this.cameras,y.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var H={cancelled:!1};this._eventContainer={stopPropagation:function(){H.cancelled=!0}},this._eventData=H,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,F.sys.events.once(L.BOOT,this.boot,this),F.sys.events.on(L.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(L.DESTROY,this.destroy,this),this.pluginEvents.emit(f.BOOT)},start:function(){var I=this.systems.events;I.on(L.TRANSITION_START,this.transitionIn,this),I.on(L.TRANSITION_OUT,this.transitionOut,this),I.on(L.TRANSITION_COMPLETE,this.transitionComplete,this),I.on(L.PRE_UPDATE,this.preUpdate,this),I.once(L.SHUTDOWN,this.shutdown,this),this.manager.events.on(f.GAME_OUT,this.onGameOut,this),this.manager.events.on(f.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(f.START)},onGameOver:function(I){this.isActive()&&this.emit(f.GAME_OVER,I.timeStamp,I)},onGameOut:function(I){this.isActive()&&this.emit(f.GAME_OUT,I.timeStamp,I)},preUpdate:function(){this.pluginEvents.emit(f.PRE_UPDATE);var I=this._pendingRemoval,F=this._pendingInsertion,H=I.length,k=F.length;if(!(H===0&&k===0)){for(var W=this._list,$=0;$<H;$++){var K=I[$],Z=W.indexOf(K);Z>-1&&(W.splice(Z,1),this.clear(K,!0))}this._pendingRemoval.length=0,this._list=W.concat(F.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(I){this.manager&&this.manager.setCursor(I)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(I,F){if(!this.isActive())return!1;if(this.pluginEvents.emit(f.UPDATE,I,F),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var H,k=this.manager,W=k.pointers;for(H=0;H<W.length;H++)W[H].updateMotion();if(this._list.length===0)return!1;var $=this.pollRate;if($===-1)return!1;if($>0)if(this._pollTimer-=F,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var K=!1;for(H=0;H<W.length;H++){var Z=0,X=W[H];this._tempZones=[],this._temp=this.hitTestPointer(X),this.sortGameObjects(this._temp,X),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),Z+=this.processOverOutEvents(X),this.getDragState(X)===2&&this.processDragThresholdEvent(X,I),Z>0&&(K=!0)}return K},update:function(I,F){if(!this.isActive())return!1;for(var H=!1,k=0;k<F.length;k++){var W=0,$=F[k];switch(this._tempZones=[],this._temp=this.hitTestPointer($),this.sortGameObjects(this._temp,$),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),I){case r.MOUSE_DOWN:W+=this.processDragDownEvent($),W+=this.processDownEvents($),W+=this.processOverOutEvents($);break;case r.MOUSE_UP:W+=this.processDragUpEvent($),W+=this.processUpEvents($),W+=this.processOverOutEvents($);break;case r.TOUCH_START:W+=this.processDragDownEvent($),W+=this.processDownEvents($),W+=this.processOverEvents($);break;case r.TOUCH_END:case r.TOUCH_CANCEL:W+=this.processDragUpEvent($),W+=this.processUpEvents($),W+=this.processOutEvents($);break;case r.MOUSE_MOVE:case r.TOUCH_MOVE:W+=this.processDragMoveEvent($),W+=this.processMoveEvents($),W+=this.processOverOutEvents($);break;case r.MOUSE_WHEEL:W+=this.processWheelEvent($);break}W>0&&(H=!0)}return this._updatedThisFrame=!0,H},clear:function(I,F){F===void 0&&(F=!1),this.disable(I);var H=I.input;H&&(this.removeDebug(I),this.manager.resetCursor(H),H.gameObject=void 0,H.target=void 0,H.hitArea=void 0,H.hitAreaCallback=void 0,H.callbackContext=void 0,I.input=null),F||this.queueForRemoval(I);var k=this._draggable.indexOf(I);return k>-1&&this._draggable.splice(k,1),I},disable:function(I,F){F===void 0&&(F=!1);var H=I.input;H&&(H.enabled=!1,H.dragState=0);for(var k=this._drag,W=this._over,$=this.manager,K=0,Z;K<$.pointers.length;K++)Z=k[K].indexOf(I),Z>-1&&k[K].splice(Z,1),Z=W[K].indexOf(I),Z>-1&&W[K].splice(Z,1);return F&&this.resetCursor(),this},enable:function(I,F,H,k){return k===void 0&&(k=!1),I.input?I.input.enabled=!0:this.setHitArea(I,F,H),I.input&&k&&!I.input.dropZone&&(I.input.dropZone=k),this},hitTestPointer:function(I){for(var F=this.cameras.getCamerasBelowPointer(I),H=0;H<F.length;H++){for(var k=F[H],W=this.manager.hitTest(I,this._list,k),$=0;$<W.length;$++){var K=W[$];K.input.dropZone&&this._tempZones.push(K)}if(W.length>0)return I.camera=k,W}return I.camera=F[0],[]},processDownEvents:function(I){var F=0,H=this._temp,k=this._eventData,W=this._eventContainer;k.cancelled=!1;for(var $=0;$<H.length;$++){var K=H[$];if(!(!K.input||!K.input.enabled)&&(F++,K.emit(f.GAMEOBJECT_POINTER_DOWN,I,K.input.localX,K.input.localY,W),k.cancelled||!this.isActive()||K.input&&K.input.enabled&&(this.emit(f.GAMEOBJECT_DOWN,I,K,W),k.cancelled||!this.isActive())))break}return!k.cancelled&&this.isActive()&&(I.downElement===this.manager.game.canvas?this.emit(f.POINTER_DOWN,I,H):this.emit(f.POINTER_DOWN_OUTSIDE,I)),F},getDragState:function(I){return this._dragState[I.id]},setDragState:function(I,F){this._dragState[I.id]=F},processDragThresholdEvent:function(I,F){var H=!1,k=this.dragTimeThreshold,W=this.dragDistanceThreshold;if((W>0&&o(I.x,I.y,I.downX,I.downY)>=W||k>0&&F>=I.downTime+k)&&(H=!0),H)return this.setDragState(I,3),this.processDragStartList(I)},processDragStartList:function(I){if(this.getDragState(I)!==3)return 0;var F=this._drag[I.id];F.length>1&&(F=F.slice(0));for(var H=0;H<F.length;H++){var k=F[H],W=k.input;W.dragState=2,W.dragStartX=k.x,W.dragStartY=k.y,W.dragStartXGlobal=I.worldX,W.dragStartYGlobal=I.worldY,W.dragStartCamera=I.camera,W.dragX=W.dragStartXGlobal-W.dragStartX,W.dragY=W.dragStartYGlobal-W.dragStartY,k.emit(f.GAMEOBJECT_DRAG_START,I,W.dragX,W.dragY),this.emit(f.DRAG_START,I,k)}return this.setDragState(I,4),F.length},processDragDownEvent:function(I){var F=this._temp;if(this._draggable.length===0||F.length===0||!I.primaryDown||this.getDragState(I)!==0)return 0;this.setDragState(I,1);for(var H=[],k=0;k<F.length;k++){var W=F[k];W.input.draggable&&W.input.dragState===0&&H.push(W)}return H.length===0?(this.setDragState(I,0),0):(H.length>1&&(this.sortGameObjects(H,I),this.topOnly&&H.splice(1)),this._drag[I.id]=H,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(I,3),this.processDragStartList(I)):(this.setDragState(I,2),0))},processDragMoveEvent:function(I){if(this.getDragState(I)===2&&this.processDragThresholdEvent(I,this.manager.game.loop.now),this.getDragState(I)!==4)return 0;var F=this._tempZones,H=this._drag[I.id];H.length>1&&(H=H.slice(0));for(var k=0;k<H.length;k++){var W=H[k],$=W.input,K=$.target;if(K){var Z=F.indexOf(K);Z===0?(W.emit(f.GAMEOBJECT_DRAG_OVER,I,K),this.emit(f.DRAG_OVER,I,W,K)):Z>0?(W.emit(f.GAMEOBJECT_DRAG_LEAVE,I,K),this.emit(f.DRAG_LEAVE,I,W,K),$.target=F[0],K=$.target,W.emit(f.GAMEOBJECT_DRAG_ENTER,I,K),this.emit(f.DRAG_ENTER,I,W,K)):(W.emit(f.GAMEOBJECT_DRAG_LEAVE,I,K),this.emit(f.DRAG_LEAVE,I,W,K),F[0]?($.target=F[0],K=$.target,W.emit(f.GAMEOBJECT_DRAG_ENTER,I,K),this.emit(f.DRAG_ENTER,I,W,K)):$.target=null)}else!K&&F[0]&&($.target=F[0],K=$.target,W.emit(f.GAMEOBJECT_DRAG_ENTER,I,K),this.emit(f.DRAG_ENTER,I,W,K));var X,j,Y=I.positionToCamera($.dragStartCamera);if(!W.parentContainer)X=Y.x-$.dragX,j=Y.y-$.dragY;else{var U=Y.x-$.dragStartXGlobal,J=Y.y-$.dragStartYGlobal,q=W.getParentRotation(),_=U*Math.cos(q)+J*Math.sin(q),te=J*Math.cos(q)-U*Math.sin(q);_*=1/W.parentContainer.scaleX,te*=1/W.parentContainer.scaleY,X=_+$.dragStartX,j=te+$.dragStartY}W.emit(f.GAMEOBJECT_DRAG,I,X,j),this.emit(f.DRAG,I,W,X,j)}return H.length},processDragUpEvent:function(I){var F=this._drag[I.id];F.length>1&&(F=F.slice(0));for(var H=0;H<F.length;H++){var k=F[H],W=k.input;if(W&&W.dragState===2){W.dragState=0,W.dragX=W.localX-k.displayOriginX,W.dragY=W.localY-k.displayOriginY,W.dragStartCamera=null;var $=!1,K=W.target;K&&(k.emit(f.GAMEOBJECT_DROP,I,K),this.emit(f.DROP,I,k,K),W.target=null,$=!0),k.input&&k.input.enabled&&(k.emit(f.GAMEOBJECT_DRAG_END,I,W.dragX,W.dragY,$),this.emit(f.DRAG_END,I,k,$))}}return this.setDragState(I,0),F.splice(0),0},processMoveEvents:function(I){var F=0,H=this._temp,k=this._eventData,W=this._eventContainer;k.cancelled=!1;for(var $=0;$<H.length;$++){var K=H[$];if(!(!K.input||!K.input.enabled)&&(F++,K.emit(f.GAMEOBJECT_POINTER_MOVE,I,K.input.localX,K.input.localY,W),k.cancelled||!this.isActive()||K.input&&K.input.enabled&&(this.emit(f.GAMEOBJECT_MOVE,I,K,W),k.cancelled||!this.isActive()||this.topOnly)))break}return!k.cancelled&&this.isActive()&&this.emit(f.POINTER_MOVE,I,H),F},processWheelEvent:function(I){var F=0,H=this._temp,k=this._eventData,W=this._eventContainer;k.cancelled=!1;for(var $=I.deltaX,K=I.deltaY,Z=I.deltaZ,X=0;X<H.length;X++){var j=H[X];if(!(!j.input||!j.input.enabled)&&(F++,j.emit(f.GAMEOBJECT_POINTER_WHEEL,I,$,K,Z,W),k.cancelled||!this.isActive()||j.input&&j.input.enabled&&(this.emit(f.GAMEOBJECT_WHEEL,I,j,$,K,Z,W),k.cancelled||!this.isActive())))break}return!k.cancelled&&this.isActive()&&this.emit(f.POINTER_WHEEL,I,H,$,K,Z),F},processOverEvents:function(I){var F=this._temp,H=0,k=F.length,W=[];if(k>0){var $=this.manager,K=this._eventData,Z=this._eventContainer;K.cancelled=!1;for(var X=0;X<k;X++){var j=F[X];if(!(!j.input||!j.input.enabled)&&(W.push(j),$.setCursor(j.input),j.emit(f.GAMEOBJECT_POINTER_OVER,I,j.input.localX,j.input.localY,Z),H++,K.cancelled||!this.isActive()||j.input&&j.input.enabled&&(this.emit(f.GAMEOBJECT_OVER,I,j,Z),K.cancelled||!this.isActive())))break}!K.cancelled&&this.isActive()&&this.emit(f.POINTER_OVER,I,W)}return this._over[I.id]=W,H},processOutEvents:function(I){var F=this._over[I.id],H=0,k=F.length;if(k>0){var W=this.manager,$=this._eventData,K=this._eventContainer;$.cancelled=!1,this.sortGameObjects(F,I);for(var Z=0;Z<k;Z++){var X=F[Z];if(X=F[Z],!(!X.input||!X.input.enabled)&&(W.resetCursor(X.input),X.emit(f.GAMEOBJECT_POINTER_OUT,I,K),H++,$.cancelled||!this.isActive()||X.input&&X.input.enabled&&(this.emit(f.GAMEOBJECT_OUT,I,X,K),$.cancelled||!this.isActive())))break}!$.cancelled&&this.isActive()&&this.emit(f.POINTER_OUT,I,F),this._over[I.id]=[]}return H},processOverOutEvents:function(I){var F=this._temp,H,k,W=[],$=[],K=[],Z=this._over[I.id],X=this._drag[I.id],j=this.manager;for(H=0;H<Z.length;H++)k=Z[H],F.indexOf(k)===-1&&X.indexOf(k)===-1?W.push(k):K.push(k);for(H=0;H<F.length;H++)k=F[H],Z.indexOf(k)===-1&&$.push(k);var Y=W.length,U=0,J=this._eventData,q=this._eventContainer;if(J.cancelled=!1,Y>0){for(this.sortGameObjects(W,I),H=0;H<Y&&(k=W[H],!(!(!k.input||!k.input.enabled)&&(j.resetCursor(k.input),k.emit(f.GAMEOBJECT_POINTER_OUT,I,q),U++,J.cancelled||!this.isActive()||k.input&&k.input.enabled&&(this.emit(f.GAMEOBJECT_OUT,I,k,q),J.cancelled||!this.isActive()))));H++);(!J.cancelled||this.isActive())&&this.emit(f.POINTER_OUT,I,W)}if(Y=$.length,J.cancelled=!1,Y>0){for(this.sortGameObjects($,I),H=0;H<Y&&(k=$[H],!(!(!k.input||!k.input.enabled)&&(j.setCursor(k.input),k.emit(f.GAMEOBJECT_POINTER_OVER,I,k.input.localX,k.input.localY,q),U++,J.cancelled||!this.isActive()||k.input&&k.input.enabled&&(this.emit(f.GAMEOBJECT_OVER,I,k,q),J.cancelled||!this.isActive()))));H++);!J.cancelled&&this.isActive()&&this.emit(f.POINTER_OVER,I,$)}return Z=K.concat($),this._over[I.id]=this.sortGameObjects(Z,I),U},processUpEvents:function(I){var F=this._temp,H=this._eventData,k=this._eventContainer;H.cancelled=!1;for(var W=0;W<F.length;W++){var $=F[W];if(!(!$.input||!$.input.enabled)&&($.emit(f.GAMEOBJECT_POINTER_UP,I,$.input.localX,$.input.localY,k),H.cancelled||!this.isActive()||$.input&&$.input.enabled&&(this.emit(f.GAMEOBJECT_UP,I,$,k),H.cancelled||!this.isActive())))break}return!H.cancelled&&this.isActive()&&(I.upElement===this.manager.game.canvas?this.emit(f.POINTER_UP,I,F):this.emit(f.POINTER_UP_OUTSIDE,I)),F.length},forceDownState:function(I,F){this.forceState(I,F,f.GAMEOBJECT_POINTER_DOWN,f.GAMEOBJECT_DOWN,!1)},forceUpState:function(I,F){this.forceState(I,F,f.GAMEOBJECT_POINTER_UP,f.GAMEOBJECT_UP,!1)},forceOverState:function(I,F){this.forceState(I,F,f.GAMEOBJECT_POINTER_OVER,f.GAMEOBJECT_OVER,!0)},forceOutState:function(I,F){this.forceState(I,F,f.GAMEOBJECT_POINTER_OUT,f.GAMEOBJECT_OUT,!1)},forceState:function(I,F,H,k,W){var $=this._eventData,K=this._eventContainer;$.cancelled=!1,F.input&&F.input.enabled&&(F.emit(H,I,F.input.localX,F.input.localY,K),W&&this.setCursor(F.input),!$.cancelled&&this.isActive()&&F.input&&F.input.enabled&&this.emit(k,I,F,K))},queueForInsertion:function(I){return this._pendingInsertion.indexOf(I)===-1&&this._list.indexOf(I)===-1&&this._pendingInsertion.push(I),this},queueForRemoval:function(I){return this._pendingRemoval.push(I),this},setDraggable:function(I,F){F===void 0&&(F=!0),Array.isArray(I)||(I=[I]);for(var H=0;H<I.length;H++){var k=I[H];k.input.draggable=F;var W=this._draggable.indexOf(k);F&&W===-1?this._draggable.push(k):!F&&W>-1&&this._draggable.splice(W,1)}return this},makePixelPerfect:function(I){I===void 0&&(I=1);var F=this.systems.textures;return s(F,I)},setHitArea:function(I,F,H){if(F===void 0)return this.setHitAreaFromTexture(I);Array.isArray(I)||(I=[I]);var k=!1,W=!1,$=!1,K=!1,Z=!1,X=!0;if(S(F)&&Object.keys(F).length){var j=F,Y=I.some(function(te){return te.hasOwnProperty("faces")});if(!Y){F=g(j,"hitArea",null),H=g(j,"hitAreaCallback",null),Z=g(j,"pixelPerfect",!1);var U=g(j,"alphaTolerance",1);Z&&(F={},H=this.makePixelPerfect(U))}k=g(j,"draggable",!1),W=g(j,"dropZone",!1),$=g(j,"cursor",!1),K=g(j,"useHandCursor",!1),(!F||!H)&&(this.setHitAreaFromTexture(I),X=!1)}else typeof F=="function"&&!H&&(H=F,F={});for(var J=0;J<I.length;J++){var q=I[J];if(Z&&q.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var _=q.input?q.input:a(q,F,H);_.customHitArea=X,_.dropZone=W,_.cursor=K?"pointer":$,q.input=_,k&&this.setDraggable(q),this.queueForInsertion(q)}return this},setHitAreaCircle:function(I,F,H,k,W){W===void 0&&(W=u);var $=new i(F,H,k);return this.setHitArea(I,$,W)},setHitAreaEllipse:function(I,F,H,k,W,$){$===void 0&&($=l);var K=new d(F,H,k,W);return this.setHitArea(I,K,$)},setHitAreaFromTexture:function(I,F){F===void 0&&(F=M),Array.isArray(I)||(I=[I]);for(var H=0;H<I.length;H++){var k=I[H],W=k.frame,$=0,K=0;if(k.width?($=k.width,K=k.height):W&&($=W.realWidth,K=W.realHeight),k.type==="Container"&&($===0||K===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}$!==0&&K!==0&&(k.input=a(k,new A(0,0,$,K),F),this.queueForInsertion(k))}return this},setHitAreaRectangle:function(I,F,H,k,W,$){$===void 0&&($=M);var K=new A(F,H,k,W);return this.setHitArea(I,K,$)},setHitAreaTriangle:function(I,F,H,k,W,$,K,Z){Z===void 0&&(Z=O);var X=new P(F,H,k,W,$,K);return this.setHitArea(I,X,Z)},enableDebug:function(I,F){F===void 0&&(F=65280);var H=I.input;if(!H||!H.hitArea)return this;var k=H.hitArea,W=k.type,$=H.hitAreaDebug,K=this.systems.add,Z=this.systems.updateList;$&&(Z.remove($),$.destroy(),$=null);var X=0,j=0;switch(W){case p.CIRCLE:$=K.arc(0,0,k.radius),X=k.x-k.radius,j=k.y-k.radius;break;case p.ELLIPSE:$=K.ellipse(0,0,k.width,k.height),X=k.x-k.width/2,j=k.y-k.height/2;break;case p.LINE:$=K.line(0,0,k.x1,k.y1,k.x2,k.y2);break;case p.POLYGON:$=K.polygon(0,0,k.points);break;case p.RECTANGLE:$=K.rectangle(0,0,k.width,k.height),X=k.x,j=k.y;break;case p.TRIANGLE:$=K.triangle(0,0,k.x1,k.y1,k.x2,k.y2,k.x3,k.y3);break}return $&&($.isFilled=!1,$.strokeColor=F,$.preUpdate=function(){$.setVisible(I.visible),$.setStrokeStyle(1/I.scale,$.strokeColor),$.setDisplayOrigin(I.displayOriginX,I.displayOriginY);var Y=I.x,U=I.y,J=I.rotation,q=I.scaleX,_=I.scaleY;if(I.parentContainer){var te=I.getWorldTransformMatrix();Y=te.tx,U=te.ty,J=te.rotation,q=te.scaleX,_=te.scaleY}$.setRotation(J),$.setScale(q,_),$.setPosition(Y+X*q,U+j*_),$.setScrollFactor(I.scrollFactorX,I.scrollFactorY),$.setDepth(I.depth)},Z.add($),H.hitAreaDebug=$),this},removeDebug:function(I){var F=I.input;if(F&&F.hitAreaDebug){var H=F.hitAreaDebug;H.destroy(),F.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(I){return this.pollRate=I,this._pollTimer=0,this},setGlobalTopOnly:function(I){return this.manager.globalTopOnly=I,this},setTopOnly:function(I){return this.topOnly=I,this},sortGameObjects:function(I,F){if(I.length<2||!F.camera)return I;var H=F.camera.renderList;return I.sort(function(k,W){var $=Math.max(H.indexOf(k),0),K=Math.max(H.indexOf(W),0);return K-$})},sortDropZones:function(I){return I.length<2?I:(this.scene.sys.depthSort(),I.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(I,F){if(!I.parentContainer&&!F.parentContainer)return this.displayList.getIndex(F)-this.displayList.getIndex(I);if(I.parentContainer===F.parentContainer)return F.parentContainer.getIndex(F)-I.parentContainer.getIndex(I);if(I.parentContainer===F)return-1;if(F.parentContainer===I)return 1;for(var H=I.getIndexList(),k=F.getIndexList(),W=Math.min(H.length,k.length),$=0;$<W;$++){var K=H[$],Z=k[$];if(K!==Z)return Z-K}return k.length-H.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(I){return this.manager.addPointer(I)},setDefaultCursor:function(I){return this.manager.setDefaultCursor(I),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(f.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var I=0;I<10;I++)this._drag[I]=[],this._over[I]=[];this.removeAllListeners();var F=this.manager;F.canvas.style.cursor=F.defaultCursor;var H=this.systems.events;H.off(L.TRANSITION_START,this.transitionIn,this),H.off(L.TRANSITION_OUT,this.transitionOut,this),H.off(L.TRANSITION_COMPLETE,this.transitionComplete,this),H.off(L.PRE_UPDATE,this.preUpdate,this),F.events.off(f.GAME_OUT,this.onGameOut,this),F.events.off(f.GAME_OVER,this.onGameOver,this),H.off(L.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var I=this.manager.pointers,F=0;F<I.length;F++)I[F].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(f.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(L.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});C.register("InputPlugin",D,"input"),h.exports=D},89639:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35154),u={},n={};n.register=function(r,a,s,o,d){u[r]={plugin:a,mapping:s,settingsKey:o,configKey:d}},n.getPlugin=function(r){return u[r]},n.install=function(r){var a=r.scene.sys,s=a.settings.input,o=a.game.config;for(var d in u){var l=u[d].plugin,f=u[d].mapping,m=u[d].settingsKey,g=u[d].configKey;i(s,m,o[g])&&(r[f]=new l(r))}},n.remove=function(r){u.hasOwnProperty(r)&&delete u[r]},h.exports=n},42515:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(31040),u=e(83419),n=e(20339),r=e(43855),a=e(47235),s=e(26099),o=e(25892),d=new u({initialize:function(f,m){this.manager=f,this.id=m,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new s,this.prevPosition=new s,this.midPoint=new s(-1,-1),this.velocity=new s,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=m===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(l){var f=l.getWorldPoint(this.x,this.y);return this.worldX=f.x,this.worldY=f.y,this},positionToCamera:function(l,f){return l.getWorldPoint(this.x,this.y,f)},updateMotion:function(){var l=this.position.x,f=this.position.y,m=this.midPoint.x,g=this.midPoint.y;if(!(l===m&&f===g)){var p=a(this.motionFactor,m,l),y=a(this.motionFactor,g,f);r(p,l,.1)&&(p=l),r(y,f,.1)&&(y=f),this.midPoint.set(p,y);var S=l-p,C=f-y;this.velocity.set(S,C),this.angle=i(p,y,l,f),this.distance=Math.sqrt(S*S+C*C)}},up:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=l.timeStamp,this.wasTouch=!1)},down:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),o.macOS&&l.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=l.timeStamp),this.wasTouch=!1},move:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.locked&&(this.movementX=l.movementX||l.mozMovementX||l.webkitMovementX||0,this.movementY=l.movementY||l.mozMovementY||l.webkitMovementY||0),this.moveTime=l.timeStamp,this.wasTouch=!1},wheel:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.deltaX=l.deltaX,this.deltaY=l.deltaY,this.deltaZ=l.deltaZ,this.wasTouch=!1},touchstart:function(l,f){l.pointerId&&(this.pointerId=l.pointerId),this.identifier=l.identifier,this.target=l.target,this.active=!0,this.buttons=1,this.event=f,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=f.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(l,f){this.event=f,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.moveTime=f.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(l,f){this.buttons=0,this.event=f,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=f.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(l,f){this.buttons=0,this.event=f,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=f.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?i(this.downX,this.downY,this.x,this.y):i(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(l,f){l===void 0&&(l=10),f===void 0&&(f=[]);for(var m=this.prevPosition.x,g=this.prevPosition.y,p=this.position.x,y=this.position.y,S=0;S<l;S++){var C=1/l*S;f[S]={x:a(C,m,p),y:a(C,g,y)}}return f},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(l){this.position.x=l}},y:{get:function(){return this.position.y},set:function(l){this.position.y=l}},time:{get:function(){return this.event?this.event.timeStamp:0}}});h.exports=d},93301:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};h.exports=w},7179:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="boot"},85375:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},39843:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragend"},23388:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragenter"},16133:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drag"},27829:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragleave"},53904:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragover"},56058:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragstart"},2642:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drop"},88171:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectdown"},36147:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragend"},71692:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragenter"},96149:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drag"},81285:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragleave"},74048:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragover"},21322:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragstart"},49378:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drop"},86754:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectmove"},86433:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectout"},60709:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectover"},24081:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerdown"},11172:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointermove"},18907:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerout"},95579:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerover"},35368:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerup"},26972:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="wheel"},47078:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectup"},73802:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectwheel"},56718:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameout"},25936:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameover"},27503:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="boot"},50852:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="process"},96438:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},59152:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerlockchange"},47777:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerdown"},27957:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerdownoutside"},19444:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointermove"},54251:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerout"},18667:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerover"},27192:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerup"},24652:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerupoutside"},45132:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="wheel"},44512:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="preupdate"},15757:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="shutdown"},41637:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},93802:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},8214:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BOOT:e(7179),DESTROY:e(85375),DRAG_END:e(39843),DRAG_ENTER:e(23388),DRAG:e(16133),DRAG_LEAVE:e(27829),DRAG_OVER:e(53904),DRAG_START:e(56058),DROP:e(2642),GAME_OUT:e(56718),GAME_OVER:e(25936),GAMEOBJECT_DOWN:e(88171),GAMEOBJECT_DRAG_END:e(36147),GAMEOBJECT_DRAG_ENTER:e(71692),GAMEOBJECT_DRAG:e(96149),GAMEOBJECT_DRAG_LEAVE:e(81285),GAMEOBJECT_DRAG_OVER:e(74048),GAMEOBJECT_DRAG_START:e(21322),GAMEOBJECT_DROP:e(49378),GAMEOBJECT_MOVE:e(86754),GAMEOBJECT_OUT:e(86433),GAMEOBJECT_OVER:e(60709),GAMEOBJECT_POINTER_DOWN:e(24081),GAMEOBJECT_POINTER_MOVE:e(11172),GAMEOBJECT_POINTER_OUT:e(18907),GAMEOBJECT_POINTER_OVER:e(95579),GAMEOBJECT_POINTER_UP:e(35368),GAMEOBJECT_POINTER_WHEEL:e(26972),GAMEOBJECT_UP:e(47078),GAMEOBJECT_WHEEL:e(73802),MANAGER_BOOT:e(27503),MANAGER_PROCESS:e(50852),MANAGER_UPDATE:e(96438),POINTER_DOWN:e(47777),POINTER_DOWN_OUTSIDE:e(27957),POINTER_MOVE:e(19444),POINTER_OUT:e(54251),POINTER_OVER:e(18667),POINTER_UP:e(27192),POINTER_UP_OUTSIDE:e(24652),POINTER_WHEEL:e(45132),POINTERLOCK_CHANGE:e(59152),PRE_UPDATE:e(44512),SHUTDOWN:e(15757),START:e(41637),UPDATE:e(93802)}},97421:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a){this.pad=r,this.events=r.events,this.index=a,this.value=0,this.threshold=.1},update:function(n){this.value=n},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});h.exports=u},28884:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(92734),n=new i({initialize:function(a,s){this.pad=a,this.events=a.manager,this.index=s,this.value=0,this.threshold=1,this.pressed=!1},update:function(r){this.value=r;var a=this.pad,s=this.index;r>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(u.BUTTON_DOWN,a,this,r),this.pad.emit(u.GAMEPAD_BUTTON_DOWN,s,r,this)):this.pressed&&(this.pressed=!1,this.events.emit(u.BUTTON_UP,a,this,r),this.pad.emit(u.GAMEPAD_BUTTON_UP,s,r,this))},destroy:function(){this.pad=null,this.events=null}});h.exports=n},99125:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(97421),u=e(28884),n=e(83419),r=e(50792),a=e(26099),s=new n({Extends:r,initialize:function(d,l){r.call(this),this.manager=d,this.pad=l,this.id=l.id,this.index=l.index;for(var f=[],m=0;m<l.buttons.length;m++)f.push(new u(this,m));this.buttons=f;var g=[];for(m=0;m<l.axes.length;m++)g.push(new i(this,m));this.axes=g,this.vibration=l.vibrationActuator;var p={value:0,pressed:!1};this._LCLeft=f[14]?f[14]:p,this._LCRight=f[15]?f[15]:p,this._LCTop=f[12]?f[12]:p,this._LCBottom=f[13]?f[13]:p,this._RCLeft=f[2]?f[2]:p,this._RCRight=f[1]?f[1]:p,this._RCTop=f[3]?f[3]:p,this._RCBottom=f[0]?f[0]:p,this._FBLeftTop=f[4]?f[4]:p,this._FBLeftBottom=f[6]?f[6]:p,this._FBRightTop=f[5]?f[5]:p,this._FBRightBottom=f[7]?f[7]:p;var y={value:0};this._HAxisLeft=g[0]?g[0]:y,this._VAxisLeft=g[1]?g[1]:y,this._HAxisRight=g[2]?g[2]:y,this._VAxisRight=g[3]?g[3]:y,this.leftStick=new a,this.rightStick=new a,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(o){return this.axes[o].getValue()},setAxisThreshold:function(o){for(var d=0;d<this.axes.length;d++)this.axes[d].threshold=o},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(o){return this.buttons[o].value},isButtonDown:function(o){return this.buttons[o].pressed},update:function(o){if(!(o.timestamp<this._created)){var d,l=this.buttons,f=o.buttons,m=l.length;for(d=0;d<m;d++)l[d].update(f[d].value);var g=this.axes,p=o.axes;for(m=g.length,d=0;d<m;d++)g[d].update(p[d]);m>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),m>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var o;for(o=0;o<this.buttons.length;o++)this.buttons[o].destroy();for(o=0;o<this.axes.length;o++)this.axes[o].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});h.exports=s},56654:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(50792),n=e(92734),r=e(99125),a=e(35154),s=e(89639),o=e(8214),d=new i({Extends:u,initialize:function(f){u.call(this),this.scene=f.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=f,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,f.pluginEvents.once(o.BOOT,this.boot,this),f.pluginEvents.on(o.START,this.start,this)},boot:function(){var l=this.scene.sys.game,f=this.settings.input,m=l.config;this.enabled=a(f,"gamepad",m.inputGamepad)&&l.device.input.gamepads,this.target=a(f,"gamepad.target",m.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(o.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(o.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var l=this,f=this.target,m=function(g){g.defaultPrevented||!l.isActive()||(l.refreshPads(),l.queue.push(g))};this.onGamepadHandler=m,f.addEventListener("gamepadconnected",m,!1),f.addEventListener("gamepaddisconnected",m,!1),this.sceneInputPlugin.pluginEvents.on(o.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(o.UPDATE,this.update);for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].removeAllListeners()},disconnectAll:function(){for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].pad.connected=!1},refreshPads:function(){var l=navigator.getGamepads();if(!l)this.disconnectAll();else for(var f=this.gamepads,m=0;m<l.length;m++){var g=l[m];if(g){var p=g.id,y=g.index,S=f[y];if(S)S.id!==p?(S.destroy(),f[y]=new r(this,g)):S.update(g);else{var C=new r(this,g);f[y]=C,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=C):this._pad3=C:this._pad2=C:this._pad1=C}}}},getAll:function(){for(var l=[],f=this.gamepads,m=0;m<f.length;m++)f[m]&&l.push(f[m]);return l},getPad:function(l){for(var f=this.gamepads,m=0;m<f.length;m++)if(f[m]&&f[m].index===l)return f[m]},update:function(){if(this.enabled){this.refreshPads();var l=this.queue.length;if(l!==0)for(var f=this.queue.splice(0,l),m=0;m<l;m++){var g=f[m],p=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(n.CONNECTED,p,g):g.type==="gamepaddisconnected"&&this.emit(n.DISCONNECTED,p,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var l=0;l<this.gamepads.length;l++)this.gamepads[l]&&this.gamepads[l].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});s.register("GamepadPlugin",d,"gamepad","gamepad","inputGamepad"),h.exports=d},89651:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={DUALSHOCK_4:e(65294),SNES_USB:e(89651),XBOX_360:e(90089)}},46008:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="down"},7629:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="up"},42206:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="connected"},86544:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="disconnected"},94784:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="down"},14325:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="up"},92734:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BUTTON_DOWN:e(46008),BUTTON_UP:e(7629),CONNECTED:e(42206),DISCONNECTED:e(86544),GAMEPAD_BUTTON_DOWN:e(94784),GAMEPAD_BUTTON_UP:e(14325)}},48646:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Axis:e(97421),Button:e(28884),Events:e(92734),Gamepad:e(99125),GamepadPlugin:e(56654),Configs:e(64894)}},14350:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(93301),u=e(79291),n={CreatePixelPerfectHandler:e(84409),CreateInteractiveObject:e(74457),Events:e(8214),Gamepad:e(48646),InputManager:e(7003),InputPlugin:e(48205),InputPluginCache:e(89639),Keyboard:e(51442),Mouse:e(87078),Pointer:e(42515),Touch:e(95618)};n=u(!1,n,i),h.exports=n},78970:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(72905),u=e(83419),n=e(8443),r=e(8214),a=e(46032),s=e(29747),o=new u({initialize:function(l){this.manager=l,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=s,this.onKeyUp=s,l.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var d=this.manager.config;this.enabled=d.inputKeyboard,this.target=d.inputKeyboardEventTarget,this.addCapture(d.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(n.POST_STEP,this.postUpdate,this)},startListeners:function(){var d=this;this.onKeyDown=function(f){if(!(f.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(f),d.manager.events.emit(r.MANAGER_PROCESS);var m=f.altKey||f.ctrlKey||f.shiftKey||f.metaKey;d.preventDefault&&!m&&d.captures.indexOf(f.keyCode)>-1&&f.preventDefault()}},this.onKeyUp=function(f){if(!(f.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(f),d.manager.events.emit(r.MANAGER_PROCESS);var m=f.altKey||f.ctrlKey||f.shiftKey||f.metaKey;d.preventDefault&&!m&&d.captures.indexOf(f.keyCode)>-1&&f.preventDefault()}};var l=this.target;l&&(l.addEventListener("keydown",this.onKeyDown,!1),l.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var d=this.target;d.removeEventListener("keydown",this.onKeyDown,!1),d.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var l=this.captures,f=0;f<d.length;f++){var m=d[f];typeof m=="string"&&(m=a[m.trim().toUpperCase()]),l.indexOf(m)===-1&&l.push(m)}this.preventDefault=l.length>0},removeCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var l=this.captures,f=0;f<d.length;f++){var m=d[f];typeof m=="string"&&(m=a[m.toUpperCase()]),i(l,m)}this.preventDefault=l.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(n.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});h.exports=o},28846:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(50792),n=e(95922),r=e(8443),a=e(35154),s=e(8214),o=e(89639),d=e(30472),l=e(46032),f=e(87960),m=e(74600),g=e(44594),p=e(56583),y=new i({Extends:u,initialize:function(C){u.call(this),this.game=C.systems.game,this.scene=C.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=C,this.manager=C.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,C.pluginEvents.once(s.BOOT,this.boot,this),C.pluginEvents.on(s.START,this.start,this)},boot:function(){var S=this.settings.input;this.enabled=a(S,"keyboard",!0);var C=a(S,"keyboard.capture",null);C&&this.addCaptures(C),this.sceneInputPlugin.pluginEvents.once(s.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(s.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(s.SHUTDOWN,this.shutdown,this),this.game.events.on(r.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(S){return this.manager.addCapture(S),this},removeCapture:function(S){return this.manager.removeCapture(S),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:l.UP,down:l.DOWN,left:l.LEFT,right:l.RIGHT,space:l.SPACE,shift:l.SHIFT})},addKeys:function(S,C,A){C===void 0&&(C=!0),A===void 0&&(A=!1);var M={};if(typeof S=="string"){S=S.split(",");for(var L=0;L<S.length;L++){var P=S[L].trim();P&&(M[P]=this.addKey(P,C,A))}}else for(var O in S)M[O]=this.addKey(S[O],C,A);return M},addKey:function(S,C,A){C===void 0&&(C=!0),A===void 0&&(A=!1);var M=this.keys;if(S instanceof d){var L=M.indexOf(S);return L>-1?M[L]=S:M[S.keyCode]=S,C&&this.addCapture(S.keyCode),S.setEmitOnRepeat(A),S}return typeof S=="string"&&(S=l[S.toUpperCase()]),M[S]||(M[S]=new d(this,S),C&&this.addCapture(S),M[S].setEmitOnRepeat(A)),M[S]},removeKey:function(S,C,A){C===void 0&&(C=!1),A===void 0&&(A=!1);var M=this.keys,L;if(S instanceof d){var P=M.indexOf(S);P>-1&&(L=this.keys[P],this.keys[P]=void 0)}else typeof S=="string"&&(S=l[S.toUpperCase()]);return M[S]&&(L=M[S],M[S]=void 0),L&&(L.plugin=null,A&&this.removeCapture(L.keyCode),C&&L.destroy()),this},removeAllKeys:function(S,C){S===void 0&&(S=!1),C===void 0&&(C=!1);for(var A=this.keys,M=0;M<A.length;M++){var L=A[M];L&&(A[M]=void 0,C&&this.removeCapture(L.keyCode),S&&L.destroy())}return this},createCombo:function(S,C){return new f(this,S,C)},checkDown:function(S,C){if(C===void 0&&(C=0),this.enabled&&S.isDown){var A=p(this.time-S.timeDown,C);if(A>S._tick)return S._tick=A,!0}return!1},update:function(){var S=this.manager.queue,C=S.length;if(!(!this.isActive()||C===0))for(var A=this.keys,M=0;M<C;M++){var L=S[M],P=L.keyCode,O=A[P],D=!1;L.cancelled===void 0&&(L.cancelled=0,L.stopImmediatePropagation=function(){L.cancelled=1},L.stopPropagation=function(){L.cancelled=-1}),L.cancelled!==-1&&(P===this.prevCode&&L.timeStamp===this.prevTime&&L.type===this.prevType||(this.prevCode=P,this.prevTime=L.timeStamp,this.prevType=L.type,L.type==="keydown"?(O&&(D=O.isDown,O.onDown(L)),!L.cancelled&&(!O||!D)&&(m[P]&&this.emit(n.KEY_DOWN+m[P],L),L.cancelled||this.emit(n.ANY_KEY_DOWN,L))):(O&&O.onUp(L),L.cancelled||(m[P]&&this.emit(n.KEY_UP+m[P],L),L.cancelled||this.emit(n.ANY_KEY_UP,L))),L.cancelled===1&&(L.cancelled=0)))}},resetKeys:function(){for(var S=this.keys,C=0;C<S.length;C++)S[C]&&S[C].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(s.MANAGER_PROCESS,this.update,this),this.game.events.off(r.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var S=this.keys,C=0;C<S.length;C++)S[C]&&S[C].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});o.register("KeyboardPlugin",y,"keyboard","keyboard","inputKeyboard"),h.exports=y},66970:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i.timeLastMatched=e.timeStamp,i.index++,i.index===i.size?!0:(i.current=i.keyCodes[i.index],!1)};h.exports=w},87960:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(95922),n=e(95540),r=e(68769),a=e(92803),s=new i({initialize:function(d,l,f){if(f===void 0&&(f={}),l.length<2)return!1;this.manager=d,this.enabled=!0,this.keyCodes=[];for(var m=0;m<l.length;m++){var g=l[m];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=n(f,"resetOnWrongKey",!0),this.maxKeyDelay=n(f,"maxKeyDelay",0),this.resetOnMatch=n(f,"resetOnMatch",!1),this.deleteOnMatch=n(f,"deleteOnMatch",!1);var p=this,y=function(S){if(!(p.matched||!p.enabled)){var C=r(S,p);C&&(p.manager.emit(u.COMBO_MATCH,p,S),p.resetOnMatch?a(p):p.deleteOnMatch&&p.destroy())}};this.onKeyDown=y,this.manager.on(u.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(u.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});h.exports=s},68769:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66970),u=function(n,r){if(r.matched)return!0;var a=!1,s=!1;if(n.keyCode===r.current)if(r.index>0&&r.maxKeyDelay>0){var o=r.timeLastMatched+r.maxKeyDelay;n.timeStamp<=o&&(s=!0,a=i(n,r))}else s=!0,a=i(n,r);return!s&&r.resetOnWrongKey&&(r.index=0,r.current=r.keyCodes[0]),a&&(r.timeLastMatched=n.timeStamp,r.matched=!0,r.timeMatched=n.timeStamp),a};h.exports=u},92803:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};h.exports=w},92612:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keydown"},23345:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keyup"},21957:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keycombomatch"},44743:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="down"},3771:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keydown-"},46358:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keyup-"},75674:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="up"},95922:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ANY_KEY_DOWN:e(92612),ANY_KEY_UP:e(23345),COMBO_MATCH:e(21957),DOWN:e(44743),KEY_DOWN:e(3771),KEY_UP:e(46358),UP:e(75674)}},51442:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Events:e(95922),KeyboardManager:e(78970),KeyboardPlugin:e(28846),Key:e(30472),KeyCodes:e(46032),KeyCombo:e(87960),AdvanceKeyCombo:e(66970),ProcessKeyCombo:e(68769),ResetKeyCombo:e(92803),JustDown:e(90229),JustUp:e(38796),DownDuration:e(37015),UpDuration:e(41170)}},37015:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i===void 0&&(i=50);var u=e.plugin.game.loop.time-e.timeDown;return e.isDown&&u<i};h.exports=w},90229:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e._justDown?(e._justDown=!1,!0):!1};h.exports=w},38796:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e._justUp?(e._justUp=!1,!0):!1};h.exports=w},30472:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(50792),n=e(95922),r=new i({Extends:u,initialize:function(s,o){u.call(this),this.plugin=s,this.keyCode=o,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(a){return this.emitOnRepeat=a,this},onDown:function(a){this.originalEvent=a,this.enabled&&(this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.location=a.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(n.DOWN,this,a):(this.isDown=!0,this.isUp=!1,this.timeDown=a.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(n.DOWN,this,a)))},onUp:function(a){this.originalEvent=a,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=a.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(n.UP,this,a))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});h.exports=r},46032:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};h.exports=w},74600:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(46032),u={};for(var n in i)u[i[n]]=n;h.exports=u},41170:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i===void 0&&(i=50);var u=e.plugin.game.loop.time-e.timeUp;return e.isUp&&u<i};h.exports=w},85098:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(89357),n=e(8214),r=e(29747),a=new i({initialize:function(o){this.manager=o,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=r,this.onMouseDown=r,this.onMouseUp=r,this.onMouseDownWindow=r,this.onMouseUpWindow=r,this.onMouseOver=r,this.onMouseOut=r,this.onMouseWheel=r,this.pointerLockChange=r,this.isTop=!0,o.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var s=this.manager.config;this.enabled=s.inputMouse,this.target=s.inputMouseEventTarget,this.passive=s.inputMousePassive,this.preventDefaultDown=s.inputMousePreventDefaultDown,this.preventDefaultUp=s.inputMousePreventDefaultUp,this.preventDefaultMove=s.inputMousePreventDefaultMove,this.preventDefaultWheel=s.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,s.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(s){return s.preventDefault(),!1}),this},requestPointerLock:function(){if(u.pointerLock){var s=this.target;s.requestPointerLock=s.requestPointerLock||s.mozRequestPointerLock||s.webkitRequestPointerLock,s.requestPointerLock()}},releasePointerLock:function(){u.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var s=this.target;if(s){var o=this,d=this.manager,l=d.canvas,f=window&&window.focus&&d.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&o.enabled&&d&&d.enabled&&(d.onMouseMove(g),o.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){f&&window.focus(),!g.defaultPrevented&&o.enabled&&d&&d.enabled&&(d.onMouseDown(g),o.preventDefaultDown&&g.target===l&&g.preventDefault())},this.onMouseDownWindow=function(g){g.sourceCapabilities&&g.sourceCapabilities.firesTouchEvents||!g.defaultPrevented&&o.enabled&&d&&d.enabled&&g.target!==l&&d.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&o.enabled&&d&&d.enabled&&(d.onMouseUp(g),o.preventDefaultUp&&g.target===l&&g.preventDefault())},this.onMouseUpWindow=function(g){g.sourceCapabilities&&g.sourceCapabilities.firesTouchEvents||!g.defaultPrevented&&o.enabled&&d&&d.enabled&&g.target!==l&&d.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&o.enabled&&d&&d.enabled&&d.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&o.enabled&&d&&d.enabled&&d.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&o.enabled&&d&&d.enabled&&d.onMouseWheel(g),o.preventDefaultWheel&&g.target===l&&g.preventDefault()};var m={passive:!0};if(s.addEventListener("mousemove",this.onMouseMove),s.addEventListener("mousedown",this.onMouseDown),s.addEventListener("mouseup",this.onMouseUp),s.addEventListener("mouseover",this.onMouseOver,m),s.addEventListener("mouseout",this.onMouseOut,m),this.preventDefaultWheel?s.addEventListener("wheel",this.onMouseWheel,{passive:!1}):s.addEventListener("wheel",this.onMouseWheel,m),window&&d.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,m),window.top.addEventListener("mouseup",this.onMouseUpWindow,m)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,m),window.addEventListener("mouseup",this.onMouseUpWindow,m),this.isTop=!1}u.pointerLock&&(this.pointerLockChange=function(g){var p=o.target;o.locked=document.pointerLockElement===p||document.mozPointerLockElement===p||document.webkitPointerLockElement===p,d.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var s=this.target;s.removeEventListener("mousemove",this.onMouseMove),s.removeEventListener("mousedown",this.onMouseDown),s.removeEventListener("mouseup",this.onMouseUp),s.removeEventListener("mouseover",this.onMouseOver),s.removeEventListener("mouseout",this.onMouseOut),window&&(s=this.isTop?window.top:window,s.removeEventListener("mousedown",this.onMouseDownWindow),s.removeEventListener("mouseup",this.onMouseUpWindow)),u.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});h.exports=a},87078:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={MouseManager:e(85098)}},36210:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(8214),n=e(29747),r=new i({initialize:function(s){this.manager=s,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=n,this.onTouchStartWindow=n,this.onTouchMove=n,this.onTouchEnd=n,this.onTouchEndWindow=n,this.onTouchCancel=n,this.onTouchCancelWindow=n,this.isTop=!0,s.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var a=this.manager.config;this.enabled=a.inputTouch,this.target=a.inputTouchEventTarget,this.capture=a.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,a.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(a){return a.preventDefault(),!1}),this},startListeners:function(){var a=this.target;if(a){var s=this,o=this.manager,d=o.canvas,l=window&&window.focus&&o.game.config.autoFocus;this.onTouchMove=function(p){!p.defaultPrevented&&s.enabled&&o&&o.enabled&&(o.onTouchMove(p),s.capture&&p.cancelable&&p.preventDefault())},this.onTouchStart=function(p){l&&window.focus(),!p.defaultPrevented&&s.enabled&&o&&o.enabled&&(o.onTouchStart(p),s.capture&&p.cancelable&&p.target===d&&p.preventDefault())},this.onTouchStartWindow=function(p){!p.defaultPrevented&&s.enabled&&o&&o.enabled&&p.target!==d&&o.onTouchStart(p)},this.onTouchEnd=function(p){!p.defaultPrevented&&s.enabled&&o&&o.enabled&&(o.onTouchEnd(p),s.capture&&p.cancelable&&p.target===d&&p.preventDefault())},this.onTouchEndWindow=function(p){!p.defaultPrevented&&s.enabled&&o&&o.enabled&&p.target!==d&&o.onTouchEnd(p)},this.onTouchCancel=function(p){!p.defaultPrevented&&s.enabled&&o&&o.enabled&&(o.onTouchCancel(p),s.capture&&p.preventDefault())},this.onTouchCancelWindow=function(p){!p.defaultPrevented&&s.enabled&&o&&o.enabled&&o.onTouchCancel(p)};var f=this.capture,m={passive:!0},g={passive:!1};if(a.addEventListener("touchstart",this.onTouchStart,f?g:m),a.addEventListener("touchmove",this.onTouchMove,f?g:m),a.addEventListener("touchend",this.onTouchEnd,f?g:m),a.addEventListener("touchcancel",this.onTouchCancel,f?g:m),window&&o.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,g),window.top.addEventListener("touchend",this.onTouchEndWindow,g),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,g)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,g),window.addEventListener("touchend",this.onTouchEndWindow,g),window.addEventListener("touchcancel",this.onTouchCancelWindow,g),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var a=this.target;a.removeEventListener("touchstart",this.onTouchStart),a.removeEventListener("touchmove",this.onTouchMove),a.removeEventListener("touchend",this.onTouchEnd),a.removeEventListener("touchcancel",this.onTouchCancel),window&&(a=this.isTop?window.top:window,a.removeEventListener("touchstart",this.onTouchStartWindow),a.removeEventListener("touchend",this.onTouchEndWindow),a.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});h.exports=r},95618:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={TouchManager:e(36210)}},41299:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(54899),r=e(95540),a=e(98356),s=e(3374),o=e(84376),d=e(92638),l=new i({initialize:function(m,g){if(this.loader=m,this.cache=r(g,"cache",!1),this.type=r(g,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=r(g,"key",!1);var p=this.key;if(m.prefix&&m.prefix!==""&&(this.key=m.prefix+p),!this.key)throw new Error("Invalid File key: "+this.key);var y=r(g,"url");y===void 0?y=m.path+p+"."+r(g,"extension",""):typeof y=="string"&&!y.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(y=m.path+y),this.url=y,this.src="",this.xhrSettings=d(r(g,"responseType",void 0)),r(g,"xhrSettings",!1)&&(this.xhrSettings=s(this.xhrSettings,r(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?u.FILE_POPULATED:u.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=r(g,"config",{}),this.multiFile,this.linkFile,this.base64=typeof y=="string"&&y.indexOf("data:")===0,this.retryAttempts=r(g,"maxRetries",m.maxRetries)},setLink:function(f){this.linkFile=f,f.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===u.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=u.FILE_LOADING,this.src=a(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=o(this,this.loader.xhr)}},onLoad:function(f,m){var g=f.responseURL&&this.loader.localSchemes.some(function(S){return f.responseURL.indexOf(S)===0}),p=g&&m.target.status===0,y=!(m.target&&m.target.status!==200)||p;f.readyState===4&&f.status>=400&&f.status<=599&&(y=!1),this.state=u.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,y)},onBase64Load:function(f){this.xhrLoader=f,this.state=u.FILE_LOADED,this.percentComplete=1,this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(f){f.lengthComputable&&(this.bytesLoaded=f.loaded,this.bytesTotal=f.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=u.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=u.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=u.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(f){if(this.state!==u.FILE_PENDING_DESTROY){f===void 0&&(f=this.data);var m=this.key,g=this.type;this.loader.emit(n.FILE_COMPLETE,m,g,f),this.loader.emit(n.FILE_KEY_COMPLETE+g+"-"+m,m,g,f),this.loader.flagForRemoval(this),this.state=u.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});l.createObjectURL=function(f,m,g){if(typeof URL=="function")f.src=URL.createObjectURL(m);else{var p=new FileReader;p.onload=function(){f.removeAttribute("crossOrigin"),f.src="data:"+(m.type||g)+";base64,"+p.result.split(",")[1]},p.onerror=f.onerror,p.readAsDataURL(m)}},l.revokeObjectURL=function(f){typeof URL=="function"&&URL.revokeObjectURL(f.src)},h.exports=l},74099:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={},e={install:function(i){for(var u in w)i[u]=w[u]},register:function(i,u){w[i]=u},destroy:function(){w={}}};h.exports=e},98356:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:i+e.url:!1};h.exports=w},74261:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(35072),r=e(50792),a=e(54899),s=e(74099),o=e(95540),d=e(35154),l=e(41212),f=e(37277),m=e(44594),g=e(92638),p=new i({Extends:r,initialize:function(S){r.call(this);var C=S.sys.game.config,A=S.sys.settings.loader;this.scene=S,this.systems=S.sys,this.cacheManager=S.sys.cache,this.textureManager=S.sys.textures,this.sceneManager=S.sys.game.scene,s.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(o(A,"baseURL",C.loaderBaseURL)),this.setPath(o(A,"path",C.loaderPath)),this.setPrefix(o(A,"prefix",C.loaderPrefix)),this.maxParallelDownloads=o(A,"maxParallelDownloads",C.loaderMaxParallelDownloads),this.xhr=g(o(A,"responseType",C.loaderResponseType),o(A,"async",C.loaderAsync),o(A,"user",C.loaderUser),o(A,"password",C.loaderPassword),o(A,"timeout",C.loaderTimeout),o(A,"withCredentials",C.loaderWithCredentials)),this.crossOrigin=o(A,"crossOrigin",C.loaderCrossOrigin),this.imageLoadType=o(A,"imageLoadType",C.loaderImageLoadType),this.localSchemes=o(A,"localScheme",C.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new n,this.inflight=new n,this.queue=new n,this._deleteQueue=new n,this.totalFailed=0,this.totalComplete=0,this.state=u.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=o(A,"maxRetries",C.loaderMaxRetries),S.sys.events.once(m.BOOT,this.boot,this),S.sys.events.on(m.START,this.pluginStart,this)},boot:function(){this.systems.events.once(m.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(m.SHUTDOWN,this.shutdown,this)},setBaseURL:function(y){return y===void 0&&(y=""),y!==""&&y.substr(-1)!=="/"&&(y=y.concat("/")),this.baseURL=y,this},setPath:function(y){return y===void 0&&(y=""),y!==""&&y.substr(-1)!=="/"&&(y=y.concat("/")),this.path=y,this},setPrefix:function(y){return y===void 0&&(y=""),this.prefix=y,this},setCORS:function(y){return this.crossOrigin=y,this},addFile:function(y){Array.isArray(y)||(y=[y]);for(var S=0;S<y.length;S++){var C=y[S];this.keyExists(C)||(this.list.set(C),this.emit(a.ADD,C.key,C.type,this,C),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(y){var S=y.hasCacheConflict();return S||this.list.iterate(function(C){if(C.type===y.type&&C.key===y.key)return S=!0,!1}),!S&&this.isLoading()&&(this.inflight.iterate(function(C){if(C.type===y.type&&C.key===y.key)return S=!0,!1}),this.queue.iterate(function(C){if(C.type===y.type&&C.key===y.key)return S=!0,!1})),S},addPack:function(y,S){if(typeof S=="string"){var C=d(y,S);C&&(y={packKey:C})}var A=0,M=this.baseURL,L=this.path,P=this.prefix;for(var O in y)if(Object.prototype.hasOwnProperty.call(y,O)){var D=y[O],I=o(D,"baseURL",M),F=o(D,"path",L),H=o(D,"prefix",P),k=o(D,"files",null),W=o(D,"defaultType","void");if(Array.isArray(k)){this.setBaseURL(I),this.setPath(F),this.setPrefix(H);for(var $=0;$<k.length;$++){var K=k[$],Z=K.hasOwnProperty("type")?K.type:W;this[Z]&&(this[Z](K),A++)}}}return this.setBaseURL(M),this.setPath(L),this.setPrefix(P),A>0},removePack:function(y,S){var C=this.systems.anims,A=this.cacheManager,M=this.textureManager,L={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},P;if(l(y))P=y;else if(P=A.json.get(y),!P){console.warn("Asset Pack not found in JSON cache:",y);return}S&&(P={_:P[S]});for(var O in P){var D=P[O],I=o(D,"prefix",""),F=o(D,"files"),H=o(D,"defaultType");if(Array.isArray(F))for(var k=0;k<F.length;k++){var W=F[k],$=W.hasOwnProperty("type")?W.type:H;if(!$){console.warn("No type:",W);continue}var K=I+W.key;if($==="animation"&&C.remove(K),!(($==="aseprite"||$==="atlas"||$==="atlasXML"||$==="htmlTexture"||$==="image"||$==="multiatlas"||$==="spritesheet"||$==="svg"||$==="texture"||$==="unityAtlas")&&(M.remove(K),!L[$]))){if($==="pack"){this.removePack(K,W.dataKey);continue}if($==="spine"){var Z=A.custom.spine.get(K);if(!Z)continue;var X=Z.prefix===void 0?"":Z.prefix;A.custom.spine.remove(K);var j=A.custom.spineTextures.get(K);if(!j)continue;A.custom.spineTextures.remove(K);for(var Y=0;Y<j.pages.length;Y++){var U=j.pages[Y],J=X+U.name,q=K+":"+J;M.exists(q)?M.remove(q):M.remove(J)}}var _=L[$];if(_!==null){if(!_){console.warn("Unknown type:",$);continue}var te=A[_];te.remove(K)}}}}},isLoading:function(){return this.state===u.LOADER_LOADING||this.state===u.LOADER_PROCESSING},isReady:function(){return this.state===u.LOADER_IDLE||this.state===u.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(a.START,this),this.list.size===0?this.loadComplete():(this.state=u.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(m.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(a.PROGRESS,this.progress)},update:function(){this.state===u.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(y){if((y.state===u.FILE_POPULATED||y.state===u.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(y),this.list.delete(y),y.crossOrigin||(y.crossOrigin=this.crossOrigin),y.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(y,S){this.inflight&&(this.inflight.delete(y),this.updateProgress(),S?(this.totalComplete++,this.queue.set(y),this.emit(a.FILE_LOAD,y),y.onProcess()):(this.totalFailed++,this._deleteQueue.set(y),this.emit(a.FILE_LOAD_ERROR,y),this.fileProcessComplete(y)))},fileProcessComplete:function(y){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(y.state===u.FILE_ERRORED?y.multiFile&&y.multiFile.onFileFailed(y):y.state===u.FILE_COMPLETE&&(y.multiFile?y.multiFile.isReadyToProcess()&&(y.multiFile.addToCache(),y.multiFile.pendingDestroy()):(y.addToCache(),y.pendingDestroy())),this.queue.delete(y),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(a.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=u.LOADER_COMPLETE,this.systems.events.off(m.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(a.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(y){this._deleteQueue.set(y)},saveJSON:function(y,S){return this.save(JSON.stringify(y),S)},save:function(y,S,C){S===void 0&&(S="file.json"),C===void 0&&(C="application/json");var A=new Blob([y],{type:C}),M=URL.createObjectURL(A),L=document.createElement("a");return L.download=S,L.textContent="Download "+S,L.href=M,L.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var y=this.systems.game.config,S=this.systems.settings.loader;this.setBaseURL(o(S,"baseURL",y.loaderBaseURL)),this.setPath(o(S,"path",y.loaderPath)),this.setPrefix(o(S,"prefix",y.loaderPrefix)),this.state=u.LOADER_IDLE},shutdown:function(){this.reset(),this.state=u.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(m.UPDATE,this.update,this),this.systems.events.off(m.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=u.LOADER_DESTROYED,this.systems.events.off(m.UPDATE,this.update,this),this.systems.events.off(m.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});f.register("Loader",p,"load"),h.exports=p},3374:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(79291),u=e(92638),n=function(r,a){var s=r===void 0?u():i({},r);if(a)for(var o in a)a[o]!==void 0&&(s[o]=a[o]);return s};h.exports=n},26430:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(54899),r=new i({initialize:function(s,o,d,l){var f=[];l.forEach(function(p){p&&f.push(p)}),this.loader=s,this.type=o,this.key=d;var m=this.key;s.prefix&&s.prefix!==""&&(this.key=s.prefix+m),this.multiKeyIndex=s.multiKeyIndex++,this.files=f,this.state=u.FILE_PENDING,this.complete=!1,this.pending=f.length,this.failed=0,this.config={},this.baseURL=s.baseURL,this.path=s.path,this.prefix=s.prefix;for(var g=0;g<f.length;g++)f[g].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(a){return this.files.push(a),a.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(a){var s=this.files.indexOf(a);s!==-1&&this.pending--},onFileFailed:function(a){var s=this.files.indexOf(a);s!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,a.type,a.key))},pendingDestroy:function(){if(this.state!==u.FILE_PENDING_DESTROY){var a=this.key,s=this.type;this.loader.emit(n.FILE_COMPLETE,a,s),this.loader.emit(n.FILE_KEY_COMPLETE+s+"-"+a,a,s),this.loader.flagForRemoval(this);for(var o=0;o<this.files.length;o++)this.files[o].pendingDestroy();this.state=u.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});h.exports=r},84376:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(3374),u=function(n,r){var a=i(r,n.xhrSettings);if(n.base64){var s=n.url.split(";base64,").pop()||n.url.split(",").pop(),o={responseText:atob(s)};n.onBase64Load(o);return}var d=new XMLHttpRequest;if(d.open("GET",n.src,a.async,a.user,a.password),d.responseType=n.xhrSettings.responseType,d.timeout=a.timeout,a.headers)for(var l in a.headers)d.setRequestHeader(l,a.headers[l]);return a.header&&a.headerValue&&d.setRequestHeader(a.header,a.headerValue),a.requestedWith&&d.setRequestHeader("X-Requested-With",a.requestedWith),a.overrideMimeType&&d.overrideMimeType(a.overrideMimeType),a.withCredentials&&(d.withCredentials=!0),d.onload=n.onLoad.bind(n,d),d.onerror=n.onError.bind(n,d),d.onprogress=n.onProgress.bind(n),d.ontimeout=n.onError.bind(n,d),d.send(),d};h.exports=u},92638:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r,a){return e===void 0&&(e=""),i===void 0&&(i=!0),u===void 0&&(u=""),n===void 0&&(n=""),r===void 0&&(r=0),a===void 0&&(a=!1),{responseType:e,async:i,user:u,password:n,timeout:r,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:a}};h.exports=w},23906:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};h.exports=w},42155:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addfile"},38991:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},27540:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="filecomplete"},87464:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="filecomplete-"},94486:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loaderror"},13035:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="load"},38144:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="fileprogress"},97520:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postprocess"},85595:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="progress"},55680:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},54899:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADD:e(42155),COMPLETE:e(38991),FILE_COMPLETE:e(27540),FILE_KEY_COMPLETE:e(87464),FILE_LOAD_ERROR:e(94486),FILE_LOAD:e(13035),FILE_PROGRESS:e(38144),POST_PROCESS:e(97520),PROGRESS:e(85595),START:e(55680)}},14135:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(74099),n=e(518),r=e(54899),a=new i({Extends:n,initialize:function(o,d,l,f,m){n.call(this,o,d,l,f,m),this.type="animationJSON"},onProcess:function(){this.loader.once(r.POST_PROCESS,this.onLoadComplete,this),n.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});u.register("animation",function(s,o,d,l){if(Array.isArray(s))for(var f=0;f<s.length;f++)this.addFile(new a(this,s[f]));else this.addFile(new a(this,s,o,l,d));return this}),h.exports=a},76272:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(74099),n=e(95540),r=e(19550),a=e(41212),s=e(518),o=e(26430),d=new i({Extends:o,initialize:function(f,m,g,p,y,S){var C,A;if(a(m)){var M=m;m=n(M,"key"),C=new r(f,{key:m,url:n(M,"textureURL"),extension:n(M,"textureExtension","png"),normalMap:n(M,"normalMap"),xhrSettings:n(M,"textureXhrSettings")}),A=new s(f,{key:m,url:n(M,"atlasURL"),extension:n(M,"atlasExtension","json"),xhrSettings:n(M,"atlasXhrSettings")})}else C=new r(f,m,g,y),A=new s(f,m,p,S);C.linkFile?o.call(this,f,"atlasjson",m,[C,A,C.linkFile]):o.call(this,f,"atlasjson",m,[C,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,f.data,m),f.addToCache(),this.complete=!0}}});u.register("aseprite",function(l,f,m,g,p){var y;if(Array.isArray(l))for(var S=0;S<l.length;S++)y=new d(this,l[S]),this.addFile(y.files);else y=new d(this,l,f,m,g,p),this.addFile(y.files);return this}),h.exports=d},38734:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(74099),n=e(95540),r=e(19550),a=e(41212),s=e(518),o=e(26430),d=new i({Extends:o,initialize:function(f,m,g,p,y,S){var C,A;if(a(m)){var M=m;m=n(M,"key"),C=new r(f,{key:m,url:n(M,"textureURL"),extension:n(M,"textureExtension","png"),normalMap:n(M,"normalMap"),xhrSettings:n(M,"textureXhrSettings")}),A=new s(f,{key:m,url:n(M,"atlasURL"),extension:n(M,"atlasExtension","json"),xhrSettings:n(M,"atlasXhrSettings")})}else C=new r(f,m,g,y),A=new s(f,m,p,S);C.linkFile?o.call(this,f,"atlasjson",m,[C,A,C.linkFile]):o.call(this,f,"atlasjson",m,[C,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,f.data,m),this.complete=!0}}});u.register("atlas",function(l,f,m,g,p){var y;if(Array.isArray(l))for(var S=0;S<l.length;S++)y=new d(this,l[S]),this.addFile(y.files);else y=new d(this,l,f,m,g,p),this.addFile(y.files);return this}),h.exports=d},74599:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(74099),n=e(95540),r=e(19550),a=e(41212),s=e(26430),o=e(57318),d=new i({Extends:s,initialize:function(f,m,g,p,y,S){var C,A;if(a(m)){var M=m;m=n(M,"key"),C=new r(f,{key:m,url:n(M,"textureURL"),extension:n(M,"textureExtension","png"),normalMap:n(M,"normalMap"),xhrSettings:n(M,"textureXhrSettings")}),A=new o(f,{key:m,url:n(M,"atlasURL"),extension:n(M,"atlasExtension","xml"),xhrSettings:n(M,"atlasXhrSettings")})}else C=new r(f,m,g,y),A=new o(f,m,p,S);C.linkFile?s.call(this,f,"atlasxml",m,[C,A,C.linkFile]):s.call(this,f,"atlasxml",m,[C,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(l.key,l.data,f.data,m),this.complete=!0}}});u.register("atlasXML",function(l,f,m,g,p){var y;if(Array.isArray(l))for(var S=0;S<l.length;S++)y=new d(this,l[S]),this.addFile(y.files);else y=new d(this,l,f,m,g,p),this.addFile(y.files);return this}),h.exports=d},21097:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(89749),o=e(41212),d=new i({Extends:n,initialize:function(f,m,g,p,y){if(o(m)){var S=m;m=a(S,"key"),p=a(S,"xhrSettings"),y=a(S,"context",y)}var C={type:"audio",cache:f.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:m,url:g.url,xhrSettings:p,config:{context:y}};n.call(this,f,C)},onProcess:function(){this.state=u.FILE_PROCESSING;var l=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(f){l.data=f,l.onProcessComplete()},function(f){console.error("Error decoding audio: "+l.key+" - ",f?f.message:null),l.onProcessError()}),this.config.context=null}});d.create=function(l,f,m,g,p){var y=l.systems.game,S=y.config.audio,C=y.device.audio;o(f)&&(m=a(f,"url",[]),g=a(f,"config",{}));var A=d.getAudioURL(y,m);return A?C.webAudio&&!S.disableWebAudio?new d(l,f,A,p,y.sound.context):new s(l,f,A,g):(console.warn('No audio URLs for "%s" can play on this device',f),null)},d.getAudioURL=function(l,f){Array.isArray(f)||(f=[f]);for(var m=0;m<f.length;m++){var g=a(f[m],"url",f[m]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var p=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(p=a(f[m],"type",p?p[1]:"").toLowerCase(),l.device.audio[p])return{url:g,type:p}}return null},r.register("audio",function(l,f,m,g){var p=this.systems.game,y=p.config.audio,S=p.device.audio;if(y.noAudio||!S.webAudio&&!S.audioData)return this;var C;if(Array.isArray(l))for(var A=0;A<l.length;A++)C=d.create(this,l[A]),C&&this.addFile(C);else C=d.create(this,l,f,m,g),C&&this.addFile(C);return this}),h.exports=d},89524:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(21097),u=e(83419),n=e(74099),r=e(95540),a=e(41212),s=e(518),o=e(26430),d=new u({Extends:o,initialize:function(f,m,g,p,y,S,C){if(a(m)){var A=m;m=r(A,"key"),g=r(A,"jsonURL"),p=r(A,"audioURL"),y=r(A,"audioConfig"),S=r(A,"audioXhrSettings"),C=r(A,"jsonXhrSettings")}var M;if(!p)M=new s(f,m,g,C),o.call(this,f,"audiosprite",m,[M]),this.config.resourceLoad=!0,this.config.audioConfig=y,this.config.audioXhrSettings=S;else{var L=i.create(f,m,p,y,S);L&&(M=new s(f,m,g,C),o.call(this,f,"audiosprite",m,[L,M]),this.config.resourceLoad=!1)}},onFileComplete:function(l){var f=this.files.indexOf(l);if(f!==-1&&(this.pending--,this.config.resourceLoad&&l.type==="json"&&l.data.hasOwnProperty("resources"))){var m=l.data.resources,g=r(this.config,"audioConfig"),p=r(this.config,"audioXhrSettings"),y=i.create(this.loader,l.key,m,g,p);y&&(this.addToMultiFile(y),this.loader.addFile(y))}},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1];l.addToCache(),f.addToCache(),this.complete=!0}}});n.register("audioSprite",function(l,f,m,g,p,y){var S=this.systems.game,C=S.config.audio,A=S.device.audio;if(C&&C.noAudio||!A.webAudio&&!A.audioData)return this;var M;if(Array.isArray(l))for(var L=0;L<l.length;L++)M=new d(this,l[L]),M.files&&this.addFile(M.files);else M=new d(this,l,f,m,g,p,y),M.files&&this.addFile(M.files);return this})},85722:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=new i({Extends:n,initialize:function(l,f,m,g,p){var y="bin";if(s(f)){var S=f;f=a(S,"key"),m=a(S,"url"),g=a(S,"xhrSettings"),y=a(S,"extension",y),p=a(S,"dataType",p)}var C={type:"binary",cache:l.cacheManager.binary,extension:y,responseType:"arraybuffer",key:f,url:m,xhrSettings:g,config:{dataType:p}};n.call(this,l,C)},onProcess:function(){this.state=u.FILE_PROCESSING;var d=this.config.dataType;this.data=d?new d(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});r.register("binary",function(d,l,f,m){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new o(this,d[g]));else this.addFile(new o(this,d,l,m,f));return this}),h.exports=o},97025:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(74099),n=e(95540),r=e(19550),a=e(41212),s=e(26430),o=e(21859),d=e(57318),l=new i({Extends:s,initialize:function(m,g,p,y,S,C){var A,M;if(a(g)){var L=g;g=n(L,"key"),A=new r(m,{key:g,url:n(L,"textureURL"),extension:n(L,"textureExtension","png"),normalMap:n(L,"normalMap"),xhrSettings:n(L,"textureXhrSettings")}),M=new d(m,{key:g,url:n(L,"fontDataURL"),extension:n(L,"fontDataExtension","xml"),xhrSettings:n(L,"fontDataXhrSettings")})}else A=new r(m,g,p,S),M=new d(m,g,y,C);A.linkFile?s.call(this,m,"bitmapfont",g,[A,M,A.linkFile]):s.call(this,m,"bitmapfont",g,[A,M])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],m=this.files[1];f.addToCache();var g=f.cache.get(f.key),p=o(m.data,f.cache.getFrame(f.key),0,0,g);this.loader.cacheManager.bitmapFont.add(f.key,{data:p,texture:f.key,frame:null}),this.complete=!0}}});u.register("bitmapFont",function(f,m,g,p,y){var S;if(Array.isArray(f))for(var C=0;C<f.length;C++)S=new l(this,f[C]),this.addFile(S.files);else S=new l(this,f,m,g,p,y),this.addFile(S.files);return this}),h.exports=l},16024:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=new i({Extends:n,initialize:function(l,f,m,g){var p="css";if(s(f)){var y=f;f=a(y,"key"),m=a(y,"url"),g=a(y,"xhrSettings"),p=a(y,"extension",p)}var S={type:"script",cache:!1,extension:p,responseType:"text",key:f,url:m,xhrSettings:g};n.call(this,l,S)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("css",function(d,l,f){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new o(this,d[m]));else this.addFile(new o(this,d,l,f));return this}),h.exports=o},69559:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(38734),u=e(85722),n=e(83419),r=e(74099),a=e(95540),s=e(19550),o=e(41212),d=e(518),l=e(31403),f=e(46975),m=e(59327),g=e(26430),p=e(82038),y=e(55222),S=new n({Extends:g,initialize:function(A,M,L,P){if(L.multiAtlasURL){var O=new d(A,{key:M,url:L.multiAtlasURL,xhrSettings:P,config:L});g.call(this,A,"texture",M,[O])}else{var D=L.textureURL.substr(L.textureURL.length-3);L.type||(L.type=D.toLowerCase()==="ktx"?"KTX":"PVR");var I=new u(A,{key:M,url:L.textureURL,extension:D,xhrSettings:P,config:L});if(L.atlasURL){var F=new d(A,{key:M,url:L.atlasURL,xhrSettings:P,config:L});g.call(this,A,"texture",M,[I,F])}else g.call(this,A,"texture",M,[I])}this.config=L},onFileComplete:function(C){var A=this.files.indexOf(C);if(A!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(C.type==="json"&&C.data.hasOwnProperty("textures")){var M=C.data.textures,L=this.config,P=this.loader,O=P.baseURL,D=P.path,I=P.prefix,F=a(L,"multiBaseURL",this.baseURL),H=a(L,"multiPath",this.path),k=a(L,"prefix",this.prefix),W=a(L,"textureXhrSettings");F&&P.setBaseURL(F),H&&P.setPath(H),k&&P.setPrefix(k);for(var $=0;$<M.length;$++){var K=M[$].image,Z="CMA"+this.multiKeyIndex+"_"+K,X=new u(P,Z,K,W);if(this.addToMultiFile(X),P.addFile(X),M[$].normalMap){var j=new u(P,Z,M[$].normalMap,W);j.type="normalMap",X.setLink(j),this.addToMultiFile(j),P.addFile(j)}}P.setBaseURL(O),P.setPath(D),P.setPrefix(I)}}},addToCache:function(){function C(F){console.warn('Compressed Texture Invalid: "'+O.key+'". '+F)}if(this.isReadyToProcess()){var A=this.config;if(A.multiAtlasURL)this.addMultiToCache();else{var M=this.loader.systems.renderer,L=this.loader.textureManager,P,O=this.files[0],D=this.files[1];if(A.type==="PVR"?P=p(O.data):A.type==="KTX"&&(P=l(O.data),P||C("KTX file contains unsupported format.")),P&&!y(P)&&(C("Texture dimensions failed verification. Check the texture format specifications for "+A.format+" 0x"+P.internalFormat.toString(16)+"."),P=null),P&&!M.supportsCompressedTexture(A.format,P.internalFormat)&&(C("Texture format "+A.format+" with internal format "+P.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),P=null),P){P.format=M.getCompressedTextureName(A.format,P.internalFormat);var I=D&&D.data?D.data:null;L.addCompressedTexture(O.key,P,I)}}this.complete=!0}},addMultiToCache:function(){for(var C=this.config,A=this.files[0],M=[],L=[],P=[],O=this.loader.systems.renderer,D=this.loader.textureManager,I,F=1;F<this.files.length;F++){var H=this.files[F];if(H.type!=="normalMap")for(var k=H.key.indexOf("_"),W=H.key.substr(k+1),$=H.data,K=0;K<A.data.textures.length;K++){var Z=A.data.textures[K];if(Z.image===W){C.type==="PVR"?I=p($):C.type==="KTX"&&(I=l($)),I&&O.supportsCompressedTexture(C.format,I.internalFormat)&&(I.format=O.getCompressedTextureName(C.format,I.internalFormat),L.push(I),M.push(Z),H.linkFile&&P.push(H.linkFile.data));break}}}P.length===0&&(P=void 0),D.addAtlasJSONArray(this.key,L,M,P),this.complete=!0}});r.register("texture",function(C,A,M){var L=this.systems.renderer,P=function(D,I,F,H){var k={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(o(I)){var W=I;I=a(W,"key"),F=a(W,"url"),H=a(W,"xhrSettings")}var $=!1;for(var K in F)if(L.supportsCompressedTexture(K)){var Z=F[K];typeof Z=="string"?k.textureURL=Z:k=f(Z,k),k.format=K.toUpperCase(),$=!0;break}if(!$)console.warn("No supported compressed texture format or IMG fallback",I);else if(k.format==="IMG"){var X,j;k.multiAtlasURL?(j=new m(D,I,k.multiAtlasURL,k.multiPath,k.multiBaseURL,H),X=j.files):k.atlasURL?(j=new i(D,I,k.textureURL,k.atlasURL,H),X=j.files):X=new s(D,I,k.textureURL,H),D.addFile(X)}else{var Y=new S(D,I,k,H);D.addFile(Y.files)}};if(Array.isArray(C))for(var O=0;O<C.length;O++)P(this,C[O]);else P(this,C,A,M);return this}),h.exports=S},87674:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(98356),o=e(41212),d=new i({Extends:n,initialize:function(f,m,g,p,y,S){var C="ttf";if(o(m)){var A=m;m=a(A,"key"),g=a(A,"url"),p=a(A,"format","truetype"),y=a(A,"descriptors",null),S=a(A,"xhrSettings"),C=a(A,"extension",C)}else p===void 0&&(p="truetype");var M={type:"font",cache:!1,extension:C,responseType:"text",key:m,url:g,xhrSettings:S};n.call(this,f,M),this.data={format:p,descriptors:y},this.state=u.FILE_POPULATED},onProcess:function(){this.state=u.FILE_PROCESSING,this.src=s(this,this.loader.baseURL);var l,f=this.key,m="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?l=new FontFace(f,m,this.data.descriptors):l=new FontFace(f,m);var g=this;l.load().then(function(){document.fonts.add(l),document.body.classList.add("fonts-loaded"),g.onProcessComplete()}).catch(function(){console.warn("Font failed to load",m),g.onProcessComplete()})}});r.register("font",function(l,f,m,g,p){if(Array.isArray(l))for(var y=0;y<l.length;y++)this.addFile(new d(this,l[y]));else this.addFile(new d(this,l,f,m,g,p));return this}),h.exports=d},47931:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=e(73894),d=new i({Extends:n,initialize:function(f,m,g,p,y){var S="glsl";if(s(m)){var C=m;m=a(C,"key"),g=a(C,"url"),p=a(C,"shaderType","fragment"),y=a(C,"xhrSettings"),S=a(C,"extension",S)}else p===void 0&&(p="fragment");var A={type:"glsl",cache:f.cacheManager.shader,extension:S,responseType:"text",key:m,url:g,config:{shaderType:p},xhrSettings:y};n.call(this,f,A)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l=this.data.split(`
`),f=this.extractBlock(l,0);if(f)for(;f;){var m=this.getShaderName(f.header),g=this.getShaderType(f.header),p=this.getShaderUniforms(f.header),y=f.shader;if(this.cache.has(m)){var S=this.cache.get(m);g==="fragment"?S.fragmentSrc=y:S.vertexSrc=y,S.uniforms||(S.uniforms=p)}else g==="fragment"?this.cache.add(m,new o(m,y,"",p)):this.cache.add(m,new o(m,"",y,p));f=this.extractBlock(l,f.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new o(this.key,this.data)):this.cache.add(this.key,new o(this.key,"",this.data))},getShaderName:function(l){for(var f=0;f<l.length;f++){var m=l[f].trim();if(m.substring(0,5)==="name:")return m.substring(5).trim()}return this.key},getShaderType:function(l){for(var f=0;f<l.length;f++){var m=l[f].trim();if(m.substring(0,5)==="type:")return m.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(l){for(var f={},m=0;m<l.length;m++){var g=l[m].trim();if(g.substring(0,8)==="uniform."){var p=g.indexOf(":");if(p){var y=g.substring(8,p);try{f[y]=JSON.parse(g.substring(p+1))}catch{console.warn("Invalid uniform JSON: "+y)}}}}return f},extractBlock:function(l,f){for(var m=-1,g=-1,p=-1,y=!1,S=!1,C=[],A=[],M=f;M<l.length;M++){var L=l[M].trim();if(L==="---")if(m===-1)m=M,y=!0;else if(y)g=M,y=!1,S=!0;else{S=!1;break}else y?C.push(L):S&&(A.push(L),p=M)}return!y&&g!==-1?{header:C,shader:A.join(`
`),offset:p}:null}});r.register("glsl",function(l,f,m,g){if(Array.isArray(l))for(var p=0;p<l.length;p++)this.addFile(new d(this,l[p]));else this.addFile(new d(this,l,f,m,g));return this}),h.exports=d},89749:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(54899),n=e(41299),r=e(95540),a=e(98356),s=e(41212),o=new i({Extends:n,initialize:function(l,f,m,g){if(s(f)){var p=f;f=r(p,"key"),g=r(p,"config",g)}var y={type:"audio",cache:l.cacheManager.audio,extension:m.type,key:f,url:m.url,config:g};n.call(this,l,y),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var d=0;d<this.data.length;d++){var l=this.data[d];l.oncanplaythrough=null,l.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(d){var l=d.target;l.oncanplaythrough=null,l.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var d=this.config&&this.config.instances||1;this.filesTotal=d,this.filesLoaded=0,this.percentComplete=0;for(var l=0;l<d;l++){var f=new Audio;f.dataset||(f.dataset={}),f.dataset.name=this.key+("0"+l).slice(-2),f.dataset.used="false",this.locked?f.dataset.locked="true":(f.dataset.locked="false",f.preload="auto",f.oncanplaythrough=this.onProgress.bind(this),f.onerror=this.onError.bind(this)),this.data.push(f)}for(l=0;l<this.data.length;l++)f=this.data[l],f.src=a(this,this.loader.baseURL),this.locked||f.load();this.locked&&setTimeout(this.onLoad.bind(this))}});h.exports=o},88470:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=new i({Extends:n,initialize:function(l,f,m,g){var p="html";if(s(f)){var y=f;f=a(y,"key"),m=a(y,"url"),g=a(y,"xhrSettings"),p=a(y,"extension",p)}var S={type:"text",cache:l.cacheManager.html,extension:p,responseType:"text",key:f,url:m,xhrSettings:g};n.call(this,l,S)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("html",function(d,l,f){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new o(this,d[m]));else this.addFile(new o(this,d,l,f));return this}),h.exports=o},14643:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=new i({Extends:n,initialize:function(l,f,m,g,p,y){g===void 0&&(g=512),p===void 0&&(p=512);var S="html";if(s(f)){var C=f;f=a(C,"key"),m=a(C,"url"),y=a(C,"xhrSettings"),S=a(C,"extension",S),g=a(C,"width",g),p=a(C,"height",p)}var A={type:"html",cache:l.textureManager,extension:S,responseType:"text",key:f,url:m,xhrSettings:y,config:{width:g,height:p}};n.call(this,l,A)},onProcess:function(){this.state=u.FILE_PROCESSING;var d=this.config.width,l=this.config.height,f=[];f.push('<svg width="'+d+'px" height="'+l+'px" viewBox="0 0 '+d+" "+l+'" xmlns="http://www.w3.org/2000/svg">'),f.push('<foreignObject width="100%" height="100%">'),f.push('<body xmlns="http://www.w3.org/1999/xhtml">'),f.push(this.xhrLoader.responseText),f.push("</body>"),f.push("</foreignObject>"),f.push("</svg>");var m=[f.join(`
`)],g=this;try{var p=new window.Blob(m,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=u.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){n.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(g.data),g.onProcessError()},n.createObjectURL(this.data,p,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});r.register("htmlTexture",function(d,l,f,m,g){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new o(this,d[p]));else this.addFile(new o(this,d,l,f,m,g));return this}),h.exports=o},19550:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=e(98356),d=new i({Extends:n,initialize:function l(f,m,g,p,y){var S="png",C;if(s(m)){var A=m;m=a(A,"key"),g=a(A,"url"),C=a(A,"normalMap"),p=a(A,"xhrSettings"),S=a(A,"extension",S),y=a(A,"frameConfig")}Array.isArray(g)&&(C=g[1],g=g[0]);var M={type:"image",cache:f.textureManager,extension:S,responseType:"blob",key:m,url:g,xhrSettings:p,config:y};if(n.call(this,f,M),C){var L=new l(f,this.key,C,p,y);L.type="normalMap",this.setLink(L),f.addFile(L)}this.useImageElementLoad=f.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var l=this;this.data.onload=function(){n.revokeObjectURL(l.data),l.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(l.data),l.onProcessError()},n.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var l=this.state;this.state=u.FILE_PROCESSING,l===u.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=u.FILE_LOADING,this.src=o(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var l=this;this.data.onload=function(){l.state=u.FILE_LOADED,l.loader.nextFile(l,!0)},this.data.onerror=function(){l.loader.nextFile(l,!1)},this.data.src=this.src},addToCache:function(){var l=this.linkFile;l?l.state>=u.FILE_COMPLETE&&(l.type==="spritesheet"?l.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,l.data,this.data):this.cache.addImage(this.key,this.data,l.data)):this.cache.addImage(this.key,this.data)}});r.register("image",function(l,f,m){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new d(this,l[g]));else this.addFile(new d(this,l,f,m));return this}),h.exports=d},518:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(35154),o=e(41212),d=new i({Extends:n,initialize:function(f,m,g,p,y){var S="json";if(o(m)){var C=m;m=a(C,"key"),g=a(C,"url"),p=a(C,"xhrSettings"),S=a(C,"extension",S),y=a(C,"dataKey",y)}var A={type:"json",cache:f.cacheManager.json,extension:S,responseType:"text",key:m,url:g,xhrSettings:p,config:y};n.call(this,f,A),o(g)&&(y?this.data=s(g,y):this.data=g,this.state=u.FILE_POPULATED)},onProcess:function(){if(this.state!==u.FILE_POPULATED){this.state=u.FILE_PROCESSING;try{var l=JSON.parse(this.xhrLoader.responseText)}catch(m){throw this.onProcessError(),m}var f=this.config;typeof f=="string"?this.data=s(l,f,l):this.data=l}this.onProcessComplete()}});r.register("json",function(l,f,m,g){if(Array.isArray(l))for(var p=0;p<l.length;p++)this.addFile(new d(this,l[p]));else this.addFile(new d(this,l,f,g,m));return this}),h.exports=d},59327:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(74099),n=e(95540),r=e(19550),a=e(41212),s=e(518),o=e(26430),d=new i({Extends:o,initialize:function(f,m,g,p,y,S,C){if(a(m)){var A=m;m=n(A,"key"),n(A,"url",!1)?g=n(A,"url"):g=n(A,"atlasURL"),S=n(A,"xhrSettings"),p=n(A,"path"),y=n(A,"baseURL"),C=n(A,"textureXhrSettings")}var M=new s(f,m,g,S);o.call(this,f,"multiatlas",m,[M]),this.config.path=p,this.config.baseURL=y,this.config.textureXhrSettings=C},onFileComplete:function(l){var f=this.files.indexOf(l);if(f!==-1&&(this.pending--,l.type==="json"&&l.data.hasOwnProperty("textures"))){var m=l.data.textures,g=this.config,p=this.loader,y=p.baseURL,S=p.path,C=p.prefix,A=n(g,"baseURL",this.baseURL),M=n(g,"path",this.path),L=n(g,"prefix",this.prefix),P=n(g,"textureXhrSettings");p.setBaseURL(A),p.setPath(M),p.setPrefix(L);for(var O=0;O<m.length;O++){var D=m[O].image,I="MA"+this.multiKeyIndex+"_"+D,F=new r(p,I,D,P);if(this.addToMultiFile(F),p.addFile(F),m[O].normalMap){var H=new r(p,I,m[O].normalMap,P);H.type="normalMap",F.setLink(H),this.addToMultiFile(H),p.addFile(H)}}p.setBaseURL(y),p.setPath(S),p.setPrefix(C)}},addToCache:function(){if(this.isReadyToProcess()){for(var l=this.files[0],f=[],m=[],g=[],p=1;p<this.files.length;p++){var y=this.files[p];if(y.type!=="normalMap")for(var S=y.key.indexOf("_"),C=y.key.substr(S+1),A=y.data,M=0;M<l.data.textures.length;M++){var L=l.data.textures[M];if(L.image===C){m.push(A),f.push(L),y.linkFile&&g.push(y.linkFile.data);break}}}g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,m,f,g),this.complete=!0}}});u.register("multiatlas",function(l,f,m,g,p){var y;if(Array.isArray(l))for(var S=0;S<l.length;S++)y=new d(this,l[S]),this.addFile(y.files);else y=new d(this,l,f,m,g,p),this.addFile(y.files);return this}),h.exports=d},99297:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(74099),n=e(95540),r=e(41212),a=e(26430),s=e(34328),o=new i({Extends:a,initialize:function(l,f,m,g){var p="js",y=[];if(r(f)){var S=f;f=n(S,"key"),m=n(S,"url"),g=n(S,"xhrSettings"),p=n(S,"extension",p)}Array.isArray(m)||(m=[m]);for(var C=0;C<m.length;C++){var A=new s(l,{key:f+"_"+C.toString(),url:m[C],extension:p,xhrSettings:g});A.onProcess=function(){this.onProcessComplete()},y.push(A)}a.call(this,l,"scripts",f,y)},addToCache:function(){if(this.isReadyToProcess()){for(var d=0;d<this.files.length;d++){var l=this.files[d];l.data=document.createElement("script"),l.data.language="javascript",l.data.type="text/javascript",l.data.defer=!1,l.data.text=l.xhrLoader.responseText,document.head.appendChild(l.data)}this.complete=!0}}});u.register("scripts",function(d,l,f){var m;if(Array.isArray(d))for(var g=0;g<d.length;g++)m=new o(this,d[g]),this.addFile(m.files);else m=new o(this,d,l,f),this.addFile(m.files);return this}),h.exports=o},41846:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(74099),n=e(95540),r=e(41212),a=e(26430),s=e(85048),o=e(61485),d=e(78776),l=new i({Extends:a,initialize:function(m,g,p,y,S,C){var A,M,L=m.cacheManager.obj;if(r(g)){var P=g;g=n(P,"key"),A=new d(m,{key:g,type:"obj",cache:L,url:n(P,"url"),extension:n(P,"extension","obj"),xhrSettings:n(P,"xhrSettings"),config:{flipUV:n(P,"flipUV",S)}}),y=n(P,"matURL"),y&&(M=new d(m,{key:g,type:"mat",cache:L,url:y,extension:n(P,"matExtension","mat"),xhrSettings:n(P,"xhrSettings")}))}else A=new d(m,{key:g,url:p,type:"obj",cache:L,extension:"obj",xhrSettings:C,config:{flipUV:S}}),y&&(M=new d(m,{key:g,url:y,type:"mat",cache:L,extension:"mat",xhrSettings:C}));a.call(this,m,"obj",g,[A,M])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],m=this.files[1],g=s(f.data,f.config.flipUV);m&&(g.materials=o(m.data)),f.cache.add(f.key,g),this.complete=!0}}});u.register("obj",function(f,m,g,p,y){var S;if(Array.isArray(f))for(var C=0;C<f.length;C++)S=new l(this,f[C]),this.addFile(S.files);else S=new l(this,f,m,g,p,y),this.addFile(S.files);return this}),h.exports=l},58610:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(74099),r=e(518),a=new i({Extends:r,initialize:function(o,d,l,f,m){r.call(this,o,d,l,f,m),this.type="packfile"},onProcess:function(){if(this.state!==u.FILE_POPULATED&&(this.state=u.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var s={};s[this.config]=this.data,this.data=s}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});n.register("pack",function(s,o,d,l){if(Array.isArray(s))for(var f=0;f<s.length;f++)this.addFile(new a(this,s[f]));else this.addFile(new a(this,s,o,l,d));return this}),h.exports=a},48988:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=new i({Extends:n,initialize:function(l,f,m,g,p,y){var S="js";if(s(f)){var C=f;f=a(C,"key"),m=a(C,"url"),y=a(C,"xhrSettings"),S=a(C,"extension",S),g=a(C,"start"),p=a(C,"mapping")}var A={type:"plugin",cache:!1,extension:S,responseType:"text",key:f,url:m,xhrSettings:y,config:{start:g,mapping:p}};n.call(this,l,A),typeof m=="function"&&(this.data=m,this.state=u.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,l=this.config,f=a(l,"start",!1),m=a(l,"mapping",null);if(this.state===u.FILE_POPULATED)d.install(this.key,this.data,f,m);else{this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=d.install(this.key,window[this.key],f,m);(f||m)&&(this.loader.systems[m]=g,this.loader.scene[m]=g)}this.onProcessComplete()}});r.register("plugin",function(d,l,f,m,g){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new o(this,d[p]));else this.addFile(new o(this,d,l,f,m,g));return this}),h.exports=o},67397:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=new i({Extends:n,initialize:function(l,f,m,g,p){var y="svg";if(s(f)){var S=f;f=a(S,"key"),m=a(S,"url"),g=a(S,"svgConfig",{}),p=a(S,"xhrSettings"),y=a(S,"extension",y)}var C={type:"svg",cache:l.textureManager,extension:y,responseType:"text",key:f,url:m,xhrSettings:p,config:{width:a(g,"width"),height:a(g,"height"),scale:a(g,"scale")}};n.call(this,l,C)},onProcess:function(){this.state=u.FILE_PROCESSING;var d=this.xhrLoader.responseText,l=[d],f=this.config.width,m=this.config.height,g=this.config.scale;e:if(f&&m||g){var p=null,y=new DOMParser;p=y.parseFromString(d,"text/xml");var S=p.getElementsByTagName("svg")[0],C=S.hasAttribute("viewBox"),A=parseFloat(S.getAttribute("width")),M=parseFloat(S.getAttribute("height"));if(!C&&A&&M)S.setAttribute("viewBox","0  0 "+A+" "+M);else if(C&&!A&&!M){var L=S.getAttribute("viewBox").split(/\s+|,/);A=L[2],M=L[3]}if(g)if(A&&M)f=A*g,m=M*g;else break e;S.setAttribute("width",f.toString()+"px"),S.setAttribute("height",m.toString()+"px"),l=[new XMLSerializer().serializeToString(S)]}try{var P=new window.Blob(l,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var O=this,D=!1;this.data.onload=function(){D||n.revokeObjectURL(O.data),O.onProcessComplete()},this.data.onerror=function(){D?O.onProcessError():(D=!0,n.revokeObjectURL(O.data),O.data.src="data:image/svg+xml,"+encodeURIComponent(l.join("")))},n.createObjectURL(this.data,P,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});r.register("svg",function(d,l,f,m){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new o(this,d[g]));else this.addFile(new o(this,d,l,f,m));return this}),h.exports=o},88423:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=new i({Extends:n,initialize:function(l,f,m,g){var p="js";if(s(f)){var y=f;f=a(y,"key"),m=a(y,"url"),g=a(y,"xhrSettings"),p=a(y,"extension",p)}var S={type:"text",extension:p,responseType:"text",key:f,url:m,xhrSettings:g};n.call(this,l,S)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),l=eval;this.loader.sceneManager.add(this.key,l(d)),this.complete=!0}});r.register("sceneFile",function(d,l,f){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new o(this,d[m]));else this.addFile(new o(this,d,l,f));return this}),h.exports=o},56812:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=new i({Extends:n,initialize:function(l,f,m,g,p,y){var S="js";if(s(f)){var C=f;f=a(C,"key"),m=a(C,"url"),y=a(C,"xhrSettings"),S=a(C,"extension",S),g=a(C,"systemKey"),p=a(C,"sceneKey")}var A={type:"scenePlugin",cache:!1,extension:S,responseType:"text",key:f,url:m,xhrSettings:y,config:{systemKey:g,sceneKey:p}};n.call(this,l,A),typeof m=="function"&&(this.data=m,this.state=u.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,l=this.config,f=this.key,m=a(l,"systemKey",f),g=a(l,"sceneKey",f);this.state===u.FILE_POPULATED?d.installScenePlugin(m,this.data,g,this.loader.scene,!0):(this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),d.installScenePlugin(m,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});r.register("scenePlugin",function(d,l,f,m,g){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new o(this,d[p]));else this.addFile(new o(this,d,l,f,m,g));return this}),h.exports=o},34328:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=new i({Extends:n,initialize:function(l,f,m,g,p){var y="js";if(s(f)){var S=f;f=a(S,"key"),m=a(S,"url"),g=a(S,"type","script"),p=a(S,"xhrSettings"),y=a(S,"extension",y)}else g===void 0&&(g="script");var C={type:g,cache:!1,extension:y,responseType:"text",key:f,url:m,xhrSettings:p};n.call(this,l,C)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("script",function(d,l,f,m){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new o(this,d[g]));else this.addFile(new o(this,d,l,f,m));return this}),h.exports=o},85035:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(74099),r=e(19550),a=new i({Extends:r,initialize:function(o,d,l,f,m){r.call(this,o,d,l,m,f),this.type="spritesheet"},addToCache:function(){var s=this.linkFile;s?s.state>=u.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,s.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,s.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});n.register("spritesheet",function(s,o,d,l){if(Array.isArray(s))for(var f=0;f<s.length;f++)this.addFile(new a(this,s[f]));else this.addFile(new a(this,s,o,d,l));return this}),h.exports=a},78776:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=new i({Extends:n,initialize:function(l,f,m,g){var p="text",y="txt",S=l.cacheManager.text;if(s(f)){var C=f;f=a(C,"key"),m=a(C,"url"),g=a(C,"xhrSettings"),y=a(C,"extension",y),p=a(C,"type",p),S=a(C,"cache",S)}var A={type:p,cache:S,extension:y,responseType:"text",key:f,url:m,xhrSettings:g};n.call(this,l,A)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("text",function(d,l,f){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new o(this,d[m]));else this.addFile(new o(this,d,l,f));return this}),h.exports=o},49477:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=e(80341),d=new i({Extends:n,initialize:function(f,m,g,p){var y="csv";if(s(m)){var S=m;m=a(S,"key"),g=a(S,"url"),p=a(S,"xhrSettings"),y=a(S,"extension",y)}var C={type:"tilemapCSV",cache:f.cacheManager.tilemap,extension:y,responseType:"text",key:m,url:g,xhrSettings:p};n.call(this,f,C),this.tilemapFormat=o.CSV},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,l)}});r.register("tilemapCSV",function(l,f,m){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new d(this,l[g]));else this.addFile(new d(this,l,f,m));return this}),h.exports=d},40807:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(74099),n=e(518),r=e(80341),a=new i({Extends:n,initialize:function(o,d,l,f){n.call(this,o,d,l,f),this.type="tilemapJSON",this.cache=o.cacheManager.tilemap},addToCache:function(){var s={format:r.WELTMEISTER,data:this.data};this.cache.add(this.key,s)}});u.register("tilemapImpact",function(s,o,d){if(Array.isArray(s))for(var l=0;l<s.length;l++)this.addFile(new a(this,s[l]));else this.addFile(new a(this,s,o,d));return this}),h.exports=a},56775:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(74099),n=e(518),r=e(80341),a=new i({Extends:n,initialize:function(o,d,l,f){n.call(this,o,d,l,f),this.type="tilemapJSON",this.cache=o.cacheManager.tilemap},addToCache:function(){var s={format:r.TILED_JSON,data:this.data};this.cache.add(this.key,s)}});u.register("tilemapTiledJSON",function(s,o,d){if(Array.isArray(s))for(var l=0;l<s.length;l++)this.addFile(new a(this,s[l]));else this.addFile(new a(this,s,o,d));return this}),h.exports=a},25771:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(74099),n=e(95540),r=e(19550),a=e(41212),s=e(26430),o=e(78776),d=new i({Extends:s,initialize:function(f,m,g,p,y,S){var C,A;if(a(m)){var M=m;m=n(M,"key"),C=new r(f,{key:m,url:n(M,"textureURL"),extension:n(M,"textureExtension","png"),normalMap:n(M,"normalMap"),xhrSettings:n(M,"textureXhrSettings")}),A=new o(f,{key:m,url:n(M,"atlasURL"),extension:n(M,"atlasExtension","txt"),xhrSettings:n(M,"atlasXhrSettings")})}else C=new r(f,m,g,y),A=new o(f,m,p,S);C.linkFile?s.call(this,f,"unityatlas",m,[C,A,C.linkFile]):s.call(this,f,"unityatlas",m,[C,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(l.key,l.data,f.data,m),this.complete=!0}}});u.register("unityAtlas",function(l,f,m,g,p){var y;if(Array.isArray(l))for(var S=0;S<l.length;S++)y=new d(this,l[S]),this.addFile(y.files);else y=new d(this,l,f,m,g,p),this.addFile(y.files);return this}),h.exports=d},33720:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(98356),s=e(95540),o=e(41212),d=new i({Extends:n,initialize:function(f,m,g,p){if(p===void 0&&(p=!1),o(m)){var y=m;m=s(y,"key"),g=s(y,"url",[]),p=s(y,"noAudio",!1)}var S=f.systems.game.device.video.getVideoURL(g);S||console.warn("VideoFile: No supported format for "+m);var C={type:"video",cache:f.cacheManager.video,extension:S.type,key:m,url:S.url,config:{noAudio:p}};n.call(this,f,C)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=a(this,this.loader.baseURL),this.state=u.FILE_LOADED,this.loader.nextFile(this,!0)}});r.register("video",function(l,f,m){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new d(this,l[g]));else this.addFile(new d(this,l,f,m));return this}),h.exports=d},57318:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(23906),n=e(41299),r=e(74099),a=e(95540),s=e(41212),o=e(56836),d=new i({Extends:n,initialize:function(f,m,g,p){var y="xml";if(s(m)){var S=m;m=a(S,"key"),g=a(S,"url"),p=a(S,"xhrSettings"),y=a(S,"extension",y)}var C={type:"xml",cache:f.cacheManager.xml,extension:y,responseType:"text",key:m,url:g,xhrSettings:p};n.call(this,f,C)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=o(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});r.register("xml",function(l,f,m){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new d(this,l[g]));else this.addFile(new d(this,l,f,m));return this}),h.exports=d},64589:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AnimationJSONFile:e(14135),AsepriteFile:e(76272),AtlasJSONFile:e(38734),AtlasXMLFile:e(74599),AudioFile:e(21097),AudioSpriteFile:e(89524),BinaryFile:e(85722),BitmapFontFile:e(97025),CompressedTextureFile:e(69559),CSSFile:e(16024),FontFile:e(87674),GLSLFile:e(47931),HTML5AudioFile:e(89749),HTMLFile:e(88470),HTMLTextureFile:e(14643),ImageFile:e(19550),JSONFile:e(518),MultiAtlasFile:e(59327),MultiScriptFile:e(99297),OBJFile:e(41846),PackFile:e(58610),PluginFile:e(48988),SceneFile:e(88423),ScenePluginFile:e(56812),ScriptFile:e(34328),SpriteSheetFile:e(85035),SVGFile:e(67397),TextFile:e(78776),TilemapCSVFile:e(49477),TilemapImpactFile:e(40807),TilemapJSONFile:e(56775),UnityAtlasFile:e(25771),VideoFile:e(33720),XMLFile:e(57318)}},57777:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(23906),u=e(79291),n={Events:e(54899),FileTypes:e(64589),File:e(41299),FileTypesManager:e(74099),GetURL:e(98356),LoaderPlugin:e(74261),MergeXHRSettings:e(3374),MultiFile:e(26430),XHRLoader:e(84376),XHRSettings:e(92638)};n=u(!1,n,i),h.exports=n},53307:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){for(var i=0,u=0;u<e.length;u++)i+=+e[u];return i/e.length};h.exports=w},85710:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(6411),u=function(n,r){return i(n)/i(r)/i(n-r)};h.exports=u},30976:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return Math.floor(Math.random()*(i-e+1)+e)};h.exports=w},87842:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r){var a=(n-i)*.5,s=(r-u)*.5,o=e*e,d=e*o;return(2*u-2*n+a+s)*d+(-3*u+3*n-2*a-s)*o+a*e+u};h.exports=w},26302:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){i===void 0&&(i=0),u===void 0&&(u=10);var n=Math.pow(u,-i);return Math.ceil(e*n)/n};h.exports=w},45319:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return Math.max(i,Math.min(u,e))};h.exports=w},39506:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36383),u=function(n){return n*i.DEG_TO_RAD};h.exports=u},61241:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return Math.abs(e-i)};h.exports=w},38857:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=e(83419),n=e(37867),r=e(29747),a=new n,s=new u({initialize:function o(d,l,f,m){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=o.DefaultOrder),this._x=d,this._y=l,this._z=f,this._order=m,this.onChangeCallback=r},x:{get:function(){return this._x},set:function(o){this._x=o,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(o){this._y=o,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(o){this._z=o,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(o){this._order=o,this.onChangeCallback(this)}},set:function(o,d,l,f){return f===void 0&&(f=this._order),this._x=o,this._y=d,this._z=l,this._order=f,this.onChangeCallback(this),this},copy:function(o){return this.set(o.x,o.y,o.z,o.order)},setFromQuaternion:function(o,d,l){return d===void 0&&(d=this._order),l===void 0&&(l=!1),a.fromQuat(o),this.setFromRotationMatrix(a,d,l)},setFromRotationMatrix:function(o,d,l){d===void 0&&(d=this._order),l===void 0&&(l=!1);var f=o.val,m=f[0],g=f[4],p=f[8],y=f[1],S=f[5],C=f[9],A=f[2],M=f[6],L=f[10],P=0,O=0,D=0,I=.99999;switch(d){case"XYZ":{O=Math.asin(i(p,-1,1)),Math.abs(p)<I?(P=Math.atan2(-C,L),D=Math.atan2(-g,m)):P=Math.atan2(M,S);break}case"YXZ":{P=Math.asin(-i(C,-1,1)),Math.abs(C)<I?(O=Math.atan2(p,L),D=Math.atan2(y,S)):O=Math.atan2(-A,m);break}case"ZXY":{P=Math.asin(i(M,-1,1)),Math.abs(M)<I?(O=Math.atan2(-A,L),D=Math.atan2(-g,S)):D=Math.atan2(y,m);break}case"ZYX":{O=Math.asin(-i(A,-1,1)),Math.abs(A)<I?(P=Math.atan2(M,L),D=Math.atan2(y,m)):D=Math.atan2(-g,S);break}case"YZX":{D=Math.asin(i(y,-1,1)),Math.abs(y)<I?(P=Math.atan2(-C,S),O=Math.atan2(-A,m)):O=Math.atan2(p,L);break}case"XZY":{D=Math.asin(-i(g,-1,1)),Math.abs(g)<I?(P=Math.atan2(M,S),O=Math.atan2(p,m)):P=Math.atan2(-C,L);break}}return this._x=P,this._y=O,this._z=D,this._order=d,l&&this.onChangeCallback(this),this}});s.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],s.DefaultOrder="XYZ",h.exports=s},6411:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){if(e===0)return 1;for(var i=e;--e;)i*=e;return i};h.exports=w},99472:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return Math.random()*(i-e)+e};h.exports=w},77623:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){i===void 0&&(i=0),u===void 0&&(u=10);var n=Math.pow(u,-i);return Math.floor(e*n)/n};h.exports=w},62945:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=function(n,r,a){return n=i(n,0,1),(a-r)*n+r};h.exports=u},38265:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e/i/1e3};h.exports=w},78702:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e==parseFloat(e)?!(e%2):void 0};h.exports=w},94883:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e===parseFloat(e)?!(e%2):void 0};h.exports=w},28915:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return(i-e)*u+e};h.exports=w},94908:h=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return u===void 0&&(u=0),e.clone().lerp(i,u)};h.exports=w},94434:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r){this.val=new Float32Array(9),r?this.copy(r):this.identity()},clone:function(){return new u(this)},set:function(n){return this.copy(n)},copy:function(n){var r=this.val,a=n.val;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],this},fromMat4:function(n){var r=n.val,a=this.val;return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[4],a[4]=r[5],a[5]=r[6],a[6]=r[8],a[7]=r[9],a[8]=r[10],this},fromArray:function(n){var r=this.val;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],this},identity:function(){var n=this.val;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,this},transpose:function(){var n=this.val,r=n[1],a=n[2],s=n[5];return n[1]=n[3],n[2]=n[6],n[3]=r,n[5]=n[7],n[6]=a,n[7]=s,this},invert:function(){var n=this.val,r=n[0],a=n[1],s=n[2],o=n[3],d=n[4],l=n[5],f=n[6],m=n[7],g=n[8],p=g*d-l*m,y=-g*o+l*f,S=m*o-d*f,C=r*p+a*y+s*S;return C?(C=1/C,n[0]=p*C,n[1]=(-g*a+s*m)*C,n[2]=(l*a-s*d)*C,n[3]=y*C,n[4]=(g*r-s*f)*C,n[5]=(-l*r+s*o)*C,n[6]=S*C,n[7]=(-m*r+a*f)*C,n[8]=(d*r-a*o)*C,this):null},adjoint:function(){var n=this.val,r=n[0],a=n[1],s=n[2],o=n[3],d=n[4],l=n[5],f=n[6],m=n[7],g=n[8];return n[0]=d*g-l*m,n[1]=s*m-a*g,n[2]=a*l-s*d,n[3]=l*f-o*g,n[4]=r*g-s*f,n[5]=s*o-r*l,n[6]=o*m-d*f,n[7]=a*f-r*m,n[8]=r*d-a*o,this},determinant:function(){var n=this.val,r=n[0],a=n[1],s=n[2],o=n[3],d=n[4],l=n[5],f=n[6],m=n[7],g=n[8];return r*(g*d-l*m)+a*(-g*o+l*f)+s*(m*o-d*f)},multiply:function(n){var r=this.val,a=r[0],s=r[1],o=r[2],d=r[3],l=r[4],f=r[5],m=r[6],g=r[7],p=r[8],y=n.val,S=y[0],C=y[1],A=y[2],M=y[3],L=y[4],P=y[5],O=y[6],D=y[7],I=y[8];return r[0]=S*a+C*d+A*m,r[1]=S*s+C*l+A*g,r[2]=S*o+C*f+A*p,r[3]=M*a+L*d+P*m,r[4]=M*s+L*l+P*g,r[5]=M*o+L*f+P*p,r[6]=O*a+D*d+I*m,r[7]=O*s+D*l+I*g,r[8]=O*o+D*f+I*p,this},translate:function(n){var r=this.val,a=n.x,s=n.y;return r[6]=a*r[0]+s*r[3]+r[6],r[7]=a*r[1]+s*r[4]+r[7],r[8]=a*r[2]+s*r[5]+r[8],this},rotate:function(n){var r=this.val,a=r[0],s=r[1],o=r[2],d=r[3],l=r[4],f=r[5],m=Math.sin(n),g=Math.cos(n);return r[0]=g*a+m*d,r[1]=g*s+m*l,r[2]=g*o+m*f,r[3]=g*d-m*a,r[4]=g*l-m*s,r[5]=g*f-m*o,this},scale:function(n){var r=this.val,a=n.x,s=n.y;return r[0]=a*r[0],r[1]=a*r[1],r[2]=a*r[2],r[3]=s*r[3],r[4]=s*r[4],r[5]=s*r[5],this},fromQuat:function(n){var r=n.x,a=n.y,s=n.z,o=n.w,d=r+r,l=a+a,f=s+s,m=r*d,g=r*l,p=r*f,y=a*l,S=a*f,C=s*f,A=o*d,M=o*l,L=o*f,P=this.val;return P[0]=1-(y+C),P[3]=g+L,P[6]=p-M,P[1]=g-L,P[4]=1-(m+C),P[7]=S+A,P[2]=p+M,P[5]=S-A,P[8]=1-(m+y),this},normalFromMat4:function(n){var r=n.val,a=this.val,s=r[0],o=r[1],d=r[2],l=r[3],f=r[4],m=r[5],g=r[6],p=r[7],y=r[8],S=r[9],C=r[10],A=r[11],M=r[12],L=r[13],P=r[14],O=r[15],D=s*m-o*f,I=s*g-d*f,F=s*p-l*f,H=o*g-d*m,k=o*p-l*m,W=d*p-l*g,$=y*L-S*M,K=y*P-C*M,Z=y*O-A*M,X=S*P-C*L,j=S*O-A*L,Y=C*O-A*P,U=D*Y-I*j+F*X+H*Z-k*K+W*$;return U?(U=1/U,a[0]=(m*Y-g*j+p*X)*U,a[1]=(g*Z-f*Y-p*K)*U,a[2]=(f*j-m*Z+p*$)*U,a[3]=(d*j-o*Y-l*X)*U,a[4]=(s*Y-d*Z+l*K)*U,a[5]=(o*Z-s*j-l*$)*U,a[6]=(L*W-P*k+O*H)*U,a[7]=(P*F-M*W-O*I)*U,a[8]=(M*k-L*F+O*D)*U,this):null}});h.exports=u},37867:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(25836),n=1e-6,r=new i({initialize:function(m){this.val=new Float32Array(16),m?this.copy(m):this.identity()},clone:function(){return new r(this)},set:function(f){return this.copy(f)},setValues:function(f,m,g,p,y,S,C,A,M,L,P,O,D,I,F,H){var k=this.val;return k[0]=f,k[1]=m,k[2]=g,k[3]=p,k[4]=y,k[5]=S,k[6]=C,k[7]=A,k[8]=M,k[9]=L,k[10]=P,k[11]=O,k[12]=D,k[13]=I,k[14]=F,k[15]=H,this},copy:function(f){var m=f.val;return this.setValues(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15])},fromArray:function(f){return this.setValues(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(f,m,g){var p=a.fromQuat(g),y=p.val,S=m.x,C=m.y,A=m.z;return this.setValues(y[0]*S,y[1]*S,y[2]*S,0,y[4]*C,y[5]*C,y[6]*C,0,y[8]*A,y[9]*A,y[10]*A,0,f.x,f.y,f.z,1)},xyz:function(f,m,g){this.identity();var p=this.val;return p[12]=f,p[13]=m,p[14]=g,this},scaling:function(f,m,g){this.zero();var p=this.val;return p[0]=f,p[5]=m,p[10]=g,p[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var f=this.val,m=f[1],g=f[2],p=f[3],y=f[6],S=f[7],C=f[11];return f[1]=f[4],f[2]=f[8],f[3]=f[12],f[4]=m,f[6]=f[9],f[7]=f[13],f[8]=g,f[9]=y,f[11]=f[14],f[12]=p,f[13]=S,f[14]=C,this},getInverse:function(f){return this.copy(f),this.invert()},invert:function(){var f=this.val,m=f[0],g=f[1],p=f[2],y=f[3],S=f[4],C=f[5],A=f[6],M=f[7],L=f[8],P=f[9],O=f[10],D=f[11],I=f[12],F=f[13],H=f[14],k=f[15],W=m*C-g*S,$=m*A-p*S,K=m*M-y*S,Z=g*A-p*C,X=g*M-y*C,j=p*M-y*A,Y=L*F-P*I,U=L*H-O*I,J=L*k-D*I,q=P*H-O*F,_=P*k-D*F,te=O*k-D*H,se=W*te-$*_+K*q+Z*J-X*U+j*Y;return se?(se=1/se,this.setValues((C*te-A*_+M*q)*se,(p*_-g*te-y*q)*se,(F*j-H*X+k*Z)*se,(O*X-P*j-D*Z)*se,(A*J-S*te-M*U)*se,(m*te-p*J+y*U)*se,(H*K-I*j-k*$)*se,(L*j-O*K+D*$)*se,(S*_-C*J+M*Y)*se,(g*J-m*_-y*Y)*se,(I*X-F*K+k*W)*se,(P*K-L*X-D*W)*se,(C*U-S*q-A*Y)*se,(m*q-g*U+p*Y)*se,(F*$-I*Z-H*W)*se,(L*Z-P*$+O*W)*se)):this},adjoint:function(){var f=this.val,m=f[0],g=f[1],p=f[2],y=f[3],S=f[4],C=f[5],A=f[6],M=f[7],L=f[8],P=f[9],O=f[10],D=f[11],I=f[12],F=f[13],H=f[14],k=f[15];return this.setValues(C*(O*k-D*H)-P*(A*k-M*H)+F*(A*D-M*O),-(g*(O*k-D*H)-P*(p*k-y*H)+F*(p*D-y*O)),g*(A*k-M*H)-C*(p*k-y*H)+F*(p*M-y*A),-(g*(A*D-M*O)-C*(p*D-y*O)+P*(p*M-y*A)),-(S*(O*k-D*H)-L*(A*k-M*H)+I*(A*D-M*O)),m*(O*k-D*H)-L*(p*k-y*H)+I*(p*D-y*O),-(m*(A*k-M*H)-S*(p*k-y*H)+I*(p*M-y*A)),m*(A*D-M*O)-S*(p*D-y*O)+L*(p*M-y*A),S*(P*k-D*F)-L*(C*k-M*F)+I*(C*D-M*P),-(m*(P*k-D*F)-L*(g*k-y*F)+I*(g*D-y*P)),m*(C*k-M*F)-S*(g*k-y*F)+I*(g*M-y*C),-(m*(C*D-M*P)-S*(g*D-y*P)+L*(g*M-y*C)),-(S*(P*H-O*F)-L*(C*H-A*F)+I*(C*O-A*P)),m*(P*H-O*F)-L*(g*H-p*F)+I*(g*O-p*P),-(m*(C*H-A*F)-S*(g*H-p*F)+I*(g*A-p*C)),m*(C*O-A*P)-S*(g*O-p*P)+L*(g*A-p*C))},determinant:function(){var f=this.val,m=f[0],g=f[1],p=f[2],y=f[3],S=f[4],C=f[5],A=f[6],M=f[7],L=f[8],P=f[9],O=f[10],D=f[11],I=f[12],F=f[13],H=f[14],k=f[15],W=m*C-g*S,$=m*A-p*S,K=m*M-y*S,Z=g*A-p*C,X=g*M-y*C,j=p*M-y*A,Y=L*F-P*I,U=L*H-O*I,J=L*k-D*I,q=P*H-O*F,_=P*k-D*F,te=O*k-D*H;return W*te-$*_+K*q+Z*J-X*U+j*Y},multiply:function(f){var m=this.val,g=m[0],p=m[1],y=m[2],S=m[3],C=m[4],A=m[5],M=m[6],L=m[7],P=m[8],O=m[9],D=m[10],I=m[11],F=m[12],H=m[13],k=m[14],W=m[15],$=f.val,K=$[0],Z=$[1],X=$[2],j=$[3];return m[0]=K*g+Z*C+X*P+j*F,m[1]=K*p+Z*A+X*O+j*H,m[2]=K*y+Z*M+X*D+j*k,m[3]=K*S+Z*L+X*I+j*W,K=$[4],Z=$[5],X=$[6],j=$[7],m[4]=K*g+Z*C+X*P+j*F,m[5]=K*p+Z*A+X*O+j*H,m[6]=K*y+Z*M+X*D+j*k,m[7]=K*S+Z*L+X*I+j*W,K=$[8],Z=$[9],X=$[10],j=$[11],m[8]=K*g+Z*C+X*P+j*F,m[9]=K*p+Z*A+X*O+j*H,m[10]=K*y+Z*M+X*D+j*k,m[11]=K*S+Z*L+X*I+j*W,K=$[12],Z=$[13],X=$[14],j=$[15],m[12]=K*g+Z*C+X*P+j*F,m[13]=K*p+Z*A+X*O+j*H,m[14]=K*y+Z*M+X*D+j*k,m[15]=K*S+Z*L+X*I+j*W,this},multiplyLocal:function(f){var m=this.val,g=f.val;return this.setValues(m[0]*g[0]+m[1]*g[4]+m[2]*g[8]+m[3]*g[12],m[0]*g[1]+m[1]*g[5]+m[2]*g[9]+m[3]*g[13],m[0]*g[2]+m[1]*g[6]+m[2]*g[10]+m[3]*g[14],m[0]*g[3]+m[1]*g[7]+m[2]*g[11]+m[3]*g[15],m[4]*g[0]+m[5]*g[4]+m[6]*g[8]+m[7]*g[12],m[4]*g[1]+m[5]*g[5]+m[6]*g[9]+m[7]*g[13],m[4]*g[2]+m[5]*g[6]+m[6]*g[10]+m[7]*g[14],m[4]*g[3]+m[5]*g[7]+m[6]*g[11]+m[7]*g[15],m[8]*g[0]+m[9]*g[4]+m[10]*g[8]+m[11]*g[12],m[8]*g[1]+m[9]*g[5]+m[10]*g[9]+m[11]*g[13],m[8]*g[2]+m[9]*g[6]+m[10]*g[10]+m[11]*g[14],m[8]*g[3]+m[9]*g[7]+m[10]*g[11]+m[11]*g[15],m[12]*g[0]+m[13]*g[4]+m[14]*g[8]+m[15]*g[12],m[12]*g[1]+m[13]*g[5]+m[14]*g[9]+m[15]*g[13],m[12]*g[2]+m[13]*g[6]+m[14]*g[10]+m[15]*g[14],m[12]*g[3]+m[13]*g[7]+m[14]*g[11]+m[15]*g[15])},premultiply:function(f){return this.multiplyMatrices(f,this)},multiplyMatrices:function(f,m){var g=f.val,p=m.val,y=g[0],S=g[4],C=g[8],A=g[12],M=g[1],L=g[5],P=g[9],O=g[13],D=g[2],I=g[6],F=g[10],H=g[14],k=g[3],W=g[7],$=g[11],K=g[15],Z=p[0],X=p[4],j=p[8],Y=p[12],U=p[1],J=p[5],q=p[9],_=p[13],te=p[2],se=p[6],ne=p[10],he=p[14],le=p[3],ge=p[7],re=p[11],fe=p[15];return this.setValues(y*Z+S*U+C*te+A*le,M*Z+L*U+P*te+O*le,D*Z+I*U+F*te+H*le,k*Z+W*U+$*te+K*le,y*X+S*J+C*se+A*ge,M*X+L*J+P*se+O*ge,D*X+I*J+F*se+H*ge,k*X+W*J+$*se+K*ge,y*j+S*q+C*ne+A*re,M*j+L*q+P*ne+O*re,D*j+I*q+F*ne+H*re,k*j+W*q+$*ne+K*re,y*Y+S*_+C*he+A*fe,M*Y+L*_+P*he+O*fe,D*Y+I*_+F*he+H*fe,k*Y+W*_+$*he+K*fe)},translate:function(f){return this.translateXYZ(f.x,f.y,f.z)},translateXYZ:function(f,m,g){var p=this.val;return p[12]=p[0]*f+p[4]*m+p[8]*g+p[12],p[13]=p[1]*f+p[5]*m+p[9]*g+p[13],p[14]=p[2]*f+p[6]*m+p[10]*g+p[14],p[15]=p[3]*f+p[7]*m+p[11]*g+p[15],this},scale:function(f){return this.scaleXYZ(f.x,f.y,f.z)},scaleXYZ:function(f,m,g){var p=this.val;return p[0]=p[0]*f,p[1]=p[1]*f,p[2]=p[2]*f,p[3]=p[3]*f,p[4]=p[4]*m,p[5]=p[5]*m,p[6]=p[6]*m,p[7]=p[7]*m,p[8]=p[8]*g,p[9]=p[9]*g,p[10]=p[10]*g,p[11]=p[11]*g,this},makeRotationAxis:function(f,m){var g=Math.cos(m),p=Math.sin(m),y=1-g,S=f.x,C=f.y,A=f.z,M=y*S,L=y*C;return this.setValues(M*S+g,M*C-p*A,M*A+p*C,0,M*C+p*A,L*C+g,L*A-p*S,0,M*A-p*C,L*A+p*S,y*A*A+g,0,0,0,0,1)},rotate:function(f,m){var g=this.val,p=m.x,y=m.y,S=m.z,C=Math.sqrt(p*p+y*y+S*S);if(Math.abs(C)<n)return this;C=1/C,p*=C,y*=C,S*=C;var A=Math.sin(f),M=Math.cos(f),L=1-M,P=g[0],O=g[1],D=g[2],I=g[3],F=g[4],H=g[5],k=g[6],W=g[7],$=g[8],K=g[9],Z=g[10],X=g[11],j=g[12],Y=g[13],U=g[14],J=g[15],q=p*p*L+M,_=y*p*L+S*A,te=S*p*L-y*A,se=p*y*L-S*A,ne=y*y*L+M,he=S*y*L+p*A,le=p*S*L+y*A,ge=y*S*L-p*A,re=S*S*L+M;return this.setValues(P*q+F*_+$*te,O*q+H*_+K*te,D*q+k*_+Z*te,I*q+W*_+X*te,P*se+F*ne+$*he,O*se+H*ne+K*he,D*se+k*ne+Z*he,I*se+W*ne+X*he,P*le+F*ge+$*re,O*le+H*ge+K*re,D*le+k*ge+Z*re,I*le+W*ge+X*re,j,Y,U,J)},rotateX:function(f){var m=this.val,g=Math.sin(f),p=Math.cos(f),y=m[4],S=m[5],C=m[6],A=m[7],M=m[8],L=m[9],P=m[10],O=m[11];return m[4]=y*p+M*g,m[5]=S*p+L*g,m[6]=C*p+P*g,m[7]=A*p+O*g,m[8]=M*p-y*g,m[9]=L*p-S*g,m[10]=P*p-C*g,m[11]=O*p-A*g,this},rotateY:function(f){var m=this.val,g=Math.sin(f),p=Math.cos(f),y=m[0],S=m[1],C=m[2],A=m[3],M=m[8],L=m[9],P=m[10],O=m[11];return m[0]=y*p-M*g,m[1]=S*p-L*g,m[2]=C*p-P*g,m[3]=A*p-O*g,m[8]=y*g+M*p,m[9]=S*g+L*p,m[10]=C*g+P*p,m[11]=A*g+O*p,this},rotateZ:function(f){var m=this.val,g=Math.sin(f),p=Math.cos(f),y=m[0],S=m[1],C=m[2],A=m[3],M=m[4],L=m[5],P=m[6],O=m[7];return m[0]=y*p+M*g,m[1]=S*p+L*g,m[2]=C*p+P*g,m[3]=A*p+O*g,m[4]=M*p-y*g,m[5]=L*p-S*g,m[6]=P*p-C*g,m[7]=O*p-A*g,this},fromRotationTranslation:function(f,m){var g=f.x,p=f.y,y=f.z,S=f.w,C=g+g,A=p+p,M=y+y,L=g*C,P=g*A,O=g*M,D=p*A,I=p*M,F=y*M,H=S*C,k=S*A,W=S*M;return this.setValues(1-(D+F),P+W,O-k,0,P-W,1-(L+F),I+H,0,O+k,I-H,1-(L+D),0,m.x,m.y,m.z,1)},fromQuat:function(f){var m=f.x,g=f.y,p=f.z,y=f.w,S=m+m,C=g+g,A=p+p,M=m*S,L=m*C,P=m*A,O=g*C,D=g*A,I=p*A,F=y*S,H=y*C,k=y*A;return this.setValues(1-(O+I),L+k,P-H,0,L-k,1-(M+I),D+F,0,P+H,D-F,1-(M+O),0,0,0,0,1)},frustum:function(f,m,g,p,y,S){var C=1/(m-f),A=1/(p-g),M=1/(y-S);return this.setValues(y*2*C,0,0,0,0,y*2*A,0,0,(m+f)*C,(p+g)*A,(S+y)*M,-1,0,0,S*y*2*M,0)},perspective:function(f,m,g,p){var y=1/Math.tan(f/2),S=1/(g-p);return this.setValues(y/m,0,0,0,0,y,0,0,0,0,(p+g)*S,-1,0,0,2*p*g*S,0)},perspectiveLH:function(f,m,g,p){return this.setValues(2*g/f,0,0,0,0,2*g/m,0,0,0,0,-p/(g-p),1,0,0,g*p/(g-p),0)},ortho:function(f,m,g,p,y,S){var C=f-m,A=g-p,M=y-S;return C=C===0?C:1/C,A=A===0?A:1/A,M=M===0?M:1/M,this.setValues(-2*C,0,0,0,0,-2*A,0,0,0,0,2*M,0,(f+m)*C,(p+g)*A,(S+y)*M,1)},lookAtRH:function(f,m,g){var p=this.val;return l.subVectors(f,m),l.lengthSq()===0&&(l.z=1),l.normalize(),o.crossVectors(g,l),o.lengthSq()===0&&(Math.abs(g.z)===1?l.x+=1e-4:l.z+=1e-4,l.normalize(),o.crossVectors(g,l)),o.normalize(),d.crossVectors(l,o),p[0]=o.x,p[1]=o.y,p[2]=o.z,p[4]=d.x,p[5]=d.y,p[6]=d.z,p[8]=l.x,p[9]=l.y,p[10]=l.z,this},lookAt:function(f,m,g){var p=f.x,y=f.y,S=f.z,C=g.x,A=g.y,M=g.z,L=m.x,P=m.y,O=m.z;if(Math.abs(p-L)<n&&Math.abs(y-P)<n&&Math.abs(S-O)<n)return this.identity();var D=p-L,I=y-P,F=S-O,H=1/Math.sqrt(D*D+I*I+F*F);D*=H,I*=H,F*=H;var k=A*F-M*I,W=M*D-C*F,$=C*I-A*D;H=Math.sqrt(k*k+W*W+$*$),H?(H=1/H,k*=H,W*=H,$*=H):(k=0,W=0,$=0);var K=I*$-F*W,Z=F*k-D*$,X=D*W-I*k;return H=Math.sqrt(K*K+Z*Z+X*X),H?(H=1/H,K*=H,Z*=H,X*=H):(K=0,Z=0,X=0),this.setValues(k,K,D,0,W,Z,I,0,$,X,F,0,-(k*p+W*y+$*S),-(K*p+Z*y+X*S),-(D*p+I*y+F*S),1)},yawPitchRoll:function(f,m,g){this.zero(),a.zero(),s.zero();var p=this.val,y=a.val,S=s.val,C=Math.sin(g),A=Math.cos(g);return p[10]=1,p[15]=1,p[0]=A,p[1]=C,p[4]=-C,p[5]=A,C=Math.sin(m),A=Math.cos(m),y[0]=1,y[15]=1,y[5]=A,y[10]=A,y[9]=-C,y[6]=C,C=Math.sin(f),A=Math.cos(f),S[5]=1,S[15]=1,S[0]=A,S[2]=-C,S[8]=C,S[10]=A,this.multiplyLocal(a),this.multiplyLocal(s),this},setWorldMatrix:function(f,m,g,p,y){return this.yawPitchRoll(f.y,f.x,f.z),a.scaling(g.x,g.y,g.z),s.xyz(m.x,m.y,m.z),this.multiplyLocal(a),this.multiplyLocal(s),p&&this.multiplyLocal(p),y&&this.multiplyLocal(y),this},multiplyToMat4:function(f,m){var g=this.val,p=f.val,y=g[0],S=g[1],C=g[2],A=g[3],M=g[4],L=g[5],P=g[6],O=g[7],D=g[8],I=g[9],F=g[10],H=g[11],k=g[12],W=g[13],$=g[14],K=g[15],Z=p[0],X=p[1],j=p[2],Y=p[3],U=p[4],J=p[5],q=p[6],_=p[7],te=p[8],se=p[9],ne=p[10],he=p[11],le=p[12],ge=p[13],re=p[14],fe=p[15];return m.setValues(Z*y+X*M+j*D+Y*k,X*S+X*L+j*I+Y*W,j*C+X*P+j*F+Y*$,Y*A+X*O+j*H+Y*K,U*y+J*M+q*D+_*k,U*S+J*L+q*I+_*W,U*C+J*P+q*F+_*$,U*A+J*O+q*H+_*K,te*y+se*M+ne*D+he*k,te*S+se*L+ne*I+he*W,te*C+se*P+ne*F+he*$,te*A+se*O+ne*H+he*K,le*y+ge*M+re*D+fe*k,le*S+ge*L+re*I+fe*W,le*C+ge*P+re*F+fe*$,le*A+ge*O+re*H+fe*K)},fromRotationXYTranslation:function(f,m,g){var p=m.x,y=m.y,S=m.z,C=Math.sin(f.x),A=Math.cos(f.x),M=Math.sin(f.y),L=Math.cos(f.y),P=p,O=y,D=S,I=-C,F=0-I*M,H=0-A*M,k=I*L,W=A*L;return g||(P=L*p+M*S,O=F*p+A*y+k*S,D=H*p+C*y+W*S),this.setValues(L,F,H,0,0,A,C,0,M,k,W,0,P,O,D,1)},getMaxScaleOnAxis:function(){var f=this.val,m=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],g=f[4]*f[4]+f[5]*f[5]+f[6]*f[6],p=f[8]*f[8]+f[9]*f[9]+f[10]*f[10];return Math.sqrt(Math.max(m,g,p))}}),a=new r,s=new r,o=new u,d=new u,l=new u;h.exports=r},86883:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return Math.min(e+i,u)};h.exports=w},50040:h=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i=e.length;if(i===0)return 0;e.sort(function(n,r){return n-r});var u=Math.floor(i/2);return i%2===0?(e[u]+e[u-1])/2:e[u]};h.exports=w},37204:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return Math.max(e-i,u)};h.exports=w},65201:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){u===void 0&&(u=i+1);var r=(e-i)/(u-i);return r>1?n!==void 0?(r=(n-e)/(n-u),r<0&&(r=0)):r=1:r<0&&(r=0),r};h.exports=w},15746:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(94434),n=e(29747),r=e(25836),a=1e-6,s=new Int8Array([1,2,0]),o=new Float32Array([0,0,0]),d=new r(1,0,0),l=new r(0,1,0),f=new r,m=new u,g=new i({initialize:function(y,S,C,A){this.onChangeCallback=n,this.set(y,S,C,A)},x:{get:function(){return this._x},set:function(p){this._x=p,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(p){this._y=p,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(p){this._z=p,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(p){this._w=p,this.onChangeCallback(this)}},copy:function(p){return this.set(p)},set:function(p,y,S,C,A){return A===void 0&&(A=!0),typeof p=="object"?(this._x=p.x||0,this._y=p.y||0,this._z=p.z||0,this._w=p.w||0):(this._x=p||0,this._y=y||0,this._z=S||0,this._w=C||0),A&&this.onChangeCallback(this),this},add:function(p){return this._x+=p.x,this._y+=p.y,this._z+=p.z,this._w+=p.w,this.onChangeCallback(this),this},subtract:function(p){return this._x-=p.x,this._y-=p.y,this._z-=p.z,this._w-=p.w,this.onChangeCallback(this),this},scale:function(p){return this._x*=p,this._y*=p,this._z*=p,this._w*=p,this.onChangeCallback(this),this},length:function(){var p=this.x,y=this.y,S=this.z,C=this.w;return Math.sqrt(p*p+y*y+S*S+C*C)},lengthSq:function(){var p=this.x,y=this.y,S=this.z,C=this.w;return p*p+y*y+S*S+C*C},normalize:function(){var p=this.x,y=this.y,S=this.z,C=this.w,A=p*p+y*y+S*S+C*C;return A>0&&(A=1/Math.sqrt(A),this._x=p*A,this._y=y*A,this._z=S*A,this._w=C*A),this.onChangeCallback(this),this},dot:function(p){return this.x*p.x+this.y*p.y+this.z*p.z+this.w*p.w},lerp:function(p,y){y===void 0&&(y=0);var S=this.x,C=this.y,A=this.z,M=this.w;return this.set(S+y*(p.x-S),C+y*(p.y-C),A+y*(p.z-A),M+y*(p.w-M))},rotationTo:function(p,y){var S=p.x*y.x+p.y*y.y+p.z*y.z;return S<-.999999?(f.copy(d).cross(p).length()<a&&f.copy(l).cross(p),f.normalize(),this.setAxisAngle(f,Math.PI)):S>.999999?this.set(0,0,0,1):(f.copy(p).cross(y),this._x=f.x,this._y=f.y,this._z=f.z,this._w=1+S,this.normalize())},setAxes:function(p,y,S){var C=m.val;return C[0]=y.x,C[3]=y.y,C[6]=y.z,C[1]=S.x,C[4]=S.y,C[7]=S.z,C[2]=-p.x,C[5]=-p.y,C[8]=-p.z,this.fromMat3(m).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(p,y){y=y*.5;var S=Math.sin(y);return this.set(S*p.x,S*p.y,S*p.z,Math.cos(y))},multiply:function(p){var y=this.x,S=this.y,C=this.z,A=this.w,M=p.x,L=p.y,P=p.z,O=p.w;return this.set(y*O+A*M+S*P-C*L,S*O+A*L+C*M-y*P,C*O+A*P+y*L-S*M,A*O-y*M-S*L-C*P)},slerp:function(p,y){var S=this.x,C=this.y,A=this.z,M=this.w,L=p.x,P=p.y,O=p.z,D=p.w,I=S*L+C*P+A*O+M*D;I<0&&(I=-I,L=-L,P=-P,O=-O,D=-D);var F=1-y,H=y;if(1-I>a){var k=Math.acos(I),W=Math.sin(k);F=Math.sin((1-y)*k)/W,H=Math.sin(y*k)/W}return this.set(F*S+H*L,F*C+H*P,F*A+H*O,F*M+H*D)},invert:function(){var p=this.x,y=this.y,S=this.z,C=this.w,A=p*p+y*y+S*S+C*C,M=A?1/A:0;return this.set(-p*M,-y*M,-S*M,C*M)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(p){p*=.5;var y=this.x,S=this.y,C=this.z,A=this.w,M=Math.sin(p),L=Math.cos(p);return this.set(y*L+A*M,S*L+C*M,C*L-S*M,A*L-y*M)},rotateY:function(p){p*=.5;var y=this.x,S=this.y,C=this.z,A=this.w,M=Math.sin(p),L=Math.cos(p);return this.set(y*L-C*M,S*L+A*M,C*L+y*M,A*L-S*M)},rotateZ:function(p){p*=.5;var y=this.x,S=this.y,C=this.z,A=this.w,M=Math.sin(p),L=Math.cos(p);return this.set(y*L+S*M,S*L-y*M,C*L+A*M,A*L-C*M)},calculateW:function(){var p=this.x,y=this.y,S=this.z;return this.w=-Math.sqrt(1-p*p-y*y-S*S),this},setFromEuler:function(p,y){var S=p.x/2,C=p.y/2,A=p.z/2,M=Math.cos(S),L=Math.cos(C),P=Math.cos(A),O=Math.sin(S),D=Math.sin(C),I=Math.sin(A);switch(p.order){case"XYZ":{this.set(O*L*P+M*D*I,M*D*P-O*L*I,M*L*I+O*D*P,M*L*P-O*D*I,y);break}case"YXZ":{this.set(O*L*P+M*D*I,M*D*P-O*L*I,M*L*I-O*D*P,M*L*P+O*D*I,y);break}case"ZXY":{this.set(O*L*P-M*D*I,M*D*P+O*L*I,M*L*I+O*D*P,M*L*P-O*D*I,y);break}case"ZYX":{this.set(O*L*P-M*D*I,M*D*P+O*L*I,M*L*I-O*D*P,M*L*P+O*D*I,y);break}case"YZX":{this.set(O*L*P+M*D*I,M*D*P+O*L*I,M*L*I-O*D*P,M*L*P-O*D*I,y);break}case"XZY":{this.set(O*L*P-M*D*I,M*D*P-O*L*I,M*L*I+O*D*P,M*L*P+O*D*I,y);break}}return this},setFromRotationMatrix:function(p){var y=p.val,S=y[0],C=y[4],A=y[8],M=y[1],L=y[5],P=y[9],O=y[2],D=y[6],I=y[10],F=S+L+I,H;return F>0?(H=.5/Math.sqrt(F+1),this.set((D-P)*H,(A-O)*H,(M-C)*H,.25/H)):S>L&&S>I?(H=2*Math.sqrt(1+S-L-I),this.set(.25*H,(C+M)/H,(A+O)/H,(D-P)/H)):L>I?(H=2*Math.sqrt(1+L-S-I),this.set((C+M)/H,.25*H,(P+D)/H,(A-O)/H)):(H=2*Math.sqrt(1+I-S-L),this.set((A+O)/H,(P+D)/H,.25*H,(M-C)/H)),this},fromMat3:function(p){var y=p.val,S=y[0]+y[4]+y[8],C;if(S>0)C=Math.sqrt(S+1),this.w=.5*C,C=.5/C,this._x=(y[7]-y[5])*C,this._y=(y[2]-y[6])*C,this._z=(y[3]-y[1])*C;else{var A=0;y[4]>y[0]&&(A=1),y[8]>y[A*3+A]&&(A=2);var M=s[A],L=s[M];C=Math.sqrt(y[A*3+A]-y[M*3+M]-y[L*3+L]+1),o[A]=.5*C,C=.5/C,o[M]=(y[M*3+A]+y[A*3+M])*C,o[L]=(y[L*3+A]+y[A*3+L])*C,this._x=o[0],this._y=o[1],this._z=o[2],this._w=(y[L*3+M]-y[M*3+L])*C}return this.onChangeCallback(this),this}});h.exports=g},43396:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36383),u=function(n){return n*i.RAD_TO_DEG};h.exports=u},74362:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i===void 0&&(i=1);var u=Math.random()*2*Math.PI;return e.x=Math.cos(u)*i,e.y=Math.sin(u)*i,e};h.exports=w},60706:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i===void 0&&(i=1);var u=Math.random()*2*Math.PI,n=Math.random()*2-1,r=Math.sqrt(1-n*n)*i;return e.x=Math.cos(u)*r,e.y=Math.sin(u)*r,e.z=n*i,e};h.exports=w},67421:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i===void 0&&(i=1),e.x=(Math.random()*2-1)*i,e.y=(Math.random()*2-1)*i,e.z=(Math.random()*2-1)*i,e.w=(Math.random()*2-1)*i,e};h.exports=w},36305:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.x,n=e.y;return e.x=u*Math.cos(i)-n*Math.sin(i),e.y=u*Math.sin(i)+n*Math.cos(i),e};h.exports=w},11520:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r=Math.cos(n),a=Math.sin(n),s=e.x-i,o=e.y-u;return e.x=s*r-o*a+i,e.y=s*a+o*r+u,e};h.exports=w},1163:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r){var a=n+Math.atan2(e.y-u,e.x-i);return e.x=i+r*Math.cos(a),e.y=u+r*Math.sin(a),e};h.exports=w},70336:h=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r){return e.x=i+r*Math.cos(n),e.y=u+r*Math.sin(n),e};h.exports=w},72678:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(25836),u=e(37867),n=e(15746),r=new u,a=new n,s=new i,o=function(d,l,f){return a.setAxisAngle(l,f),r.fromRotationTranslation(a,s.set(0,0,0)),d.transformMat4(r)};h.exports=o},2284:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e>0?Math.ceil(e):Math.floor(e)};h.exports=w},41013:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){i===void 0&&(i=0),u===void 0&&(u=10);var n=Math.pow(u,-i);return Math.round(e*n)/n};h.exports=w},16922:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){i===void 0&&(i=1),u===void 0&&(u=1),n===void 0&&(n=1),n*=Math.PI/e;for(var r=[],a=[],s=0;s<e;s++)u-=i*n,i+=u*n,r[s]=u,a[s]=i;return{sin:a,cos:r,length:e}};h.exports=w},7602:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return e<=i?0:e>=u?1:(e=(e-i)/(u-i),e*e*(3-2*e))};h.exports=w},54261:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return e=Math.max(0,Math.min(1,(e-i)/(u-i))),e*e*e*(e*(e*6-15)+10)};h.exports=w},44408:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099),u=function(n,r,a,s){s===void 0&&(s=new i);var o=0,d=0,l=r*a;return n>0&&n<=l&&(n>r-1?(d=Math.floor(n/r),o=n-d*r):o=n),s.set(o,d)};h.exports=u},85955:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099),u=function(n,r,a,s,o,d,l,f){f===void 0&&(f=new i);var m=Math.sin(o),g=Math.cos(o),p=g*d,y=m*d,S=-m*l,C=g*l,A=1/(p*C+S*-y);return f.x=C*A*n+-S*A*r+(s*S-a*C)*A,f.y=p*A*r+-y*A*n+(-s*p+a*y)*A,f};h.exports=u},26099:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(43855),n=new i({initialize:function(a,s){this.x=0,this.y=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0):(s===void 0&&(s=a),this.x=a||0,this.y=s||0)},clone:function(){return new n(this.x,this.y)},copy:function(r){return this.x=r.x||0,this.y=r.y||0,this},setFromObject:function(r){return this.x=r.x||0,this.y=r.y||0,this},set:function(r,a){return a===void 0&&(a=r),this.x=r,this.y=a,this},setTo:function(r,a){return this.set(r,a)},setToPolar:function(r,a){return a==null&&(a=1),this.x=Math.cos(r)*a,this.y=Math.sin(r)*a,this},equals:function(r){return this.x===r.x&&this.y===r.y},fuzzyEquals:function(r,a){return u(this.x,r.x,a)&&u(this.y,r.y,a)},angle:function(){var r=Math.atan2(this.y,this.x);return r<0&&(r+=2*Math.PI),r},setAngle:function(r){return this.setToPolar(r,this.length())},add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this},scale:function(r){return isFinite(r)?(this.x*=r,this.y*=r):(this.x=0,this.y=0),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(r){var a=r.x-this.x,s=r.y-this.y;return Math.sqrt(a*a+s*s)},distanceSq:function(r){var a=r.x-this.x,s=r.y-this.y;return a*a+s*s},length:function(){var r=this.x,a=this.y;return Math.sqrt(r*r+a*a)},setLength:function(r){return this.normalize().scale(r)},lengthSq:function(){var r=this.x,a=this.y;return r*r+a*a},normalize:function(){var r=this.x,a=this.y,s=r*r+a*a;return s>0&&(s=1/Math.sqrt(s),this.x=r*s,this.y=a*s),this},normalizeRightHand:function(){var r=this.x;return this.x=this.y*-1,this.y=r,this},normalizeLeftHand:function(){var r=this.x;return this.x=this.y,this.y=r*-1,this},dot:function(r){return this.x*r.x+this.y*r.y},cross:function(r){return this.x*r.y-this.y*r.x},lerp:function(r,a){a===void 0&&(a=0);var s=this.x,o=this.y;return this.x=s+a*(r.x-s),this.y=o+a*(r.y-o),this},transformMat3:function(r){var a=this.x,s=this.y,o=r.val;return this.x=o[0]*a+o[3]*s+o[6],this.y=o[1]*a+o[4]*s+o[7],this},transformMat4:function(r){var a=this.x,s=this.y,o=r.val;return this.x=o[0]*a+o[4]*s+o[12],this.y=o[1]*a+o[5]*s+o[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(r){var a=this.length();return a&&a>r&&this.scale(r/a),this},reflect:function(r){return r=r.clone().normalize(),this.subtract(r.scale(2*this.dot(r)))},mirror:function(r){return this.reflect(r).negate()},rotate:function(r){var a=Math.cos(r),s=Math.sin(r);return this.set(a*this.x-s*this.y,s*this.x+a*this.y)},project:function(r){var a=this.dot(r)/r.dot(r);return this.copy(r).scale(a)}});n.ZERO=new n,n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.UP=new n(0,-1),n.DOWN=new n(0,1),n.ONE=new n(1,1),h.exports=n},25836:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a,s){this.x=0,this.y=0,this.z=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):(this.x=r||0,this.y=a||0,this.z=s||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this},max:function(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this},clone:function(){return new u(this.x,this.y,this.z)},addVectors:function(n,r){return this.x=n.x+r.x,this.y=n.y+r.y,this.z=n.z+r.z,this},subVectors:function(n,r){return this.x=n.x-r.x,this.y=n.y-r.y,this.z=n.z-r.z,this},crossVectors:function(n,r){var a=n.x,s=n.y,o=n.z,d=r.x,l=r.y,f=r.z;return this.x=s*f-o*l,this.y=o*d-a*f,this.z=a*l-s*d,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this},set:function(n,r,a){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0):(this.x=n||0,this.y=r||0,this.z=a||0),this},setFromMatrixPosition:function(n){return this.fromArray(n.val,12)},setFromMatrixColumn:function(n,r){return this.fromArray(n.val,r*4)},fromArray:function(n,r){return r===void 0&&(r=0),this.x=n[r],this.y=n[r+1],this.z=n[r+2],this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this},addScalar:function(n){return this.x+=n,this.y+=n,this.z+=n,this},addScale:function(n,r){return this.x+=n.x*r,this.y+=n.y*r,this.z+=n.z*r||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this},scale:function(n){return isFinite(n)?(this.x*=n,this.y*=n,this.z*=n):(this.x=0,this.y=0,this.z=0),this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(n){var r=n.x-this.x,a=n.y-this.y,s=n.z-this.z||0;return Math.sqrt(r*r+a*a+s*s)},distanceSq:function(n){var r=n.x-this.x,a=n.y-this.y,s=n.z-this.z||0;return r*r+a*a+s*s},length:function(){var n=this.x,r=this.y,a=this.z;return Math.sqrt(n*n+r*r+a*a)},lengthSq:function(){var n=this.x,r=this.y,a=this.z;return n*n+r*r+a*a},normalize:function(){var n=this.x,r=this.y,a=this.z,s=n*n+r*r+a*a;return s>0&&(s=1/Math.sqrt(s),this.x=n*s,this.y=r*s,this.z=a*s),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z},cross:function(n){var r=this.x,a=this.y,s=this.z,o=n.x,d=n.y,l=n.z;return this.x=a*l-s*d,this.y=s*o-r*l,this.z=r*d-a*o,this},lerp:function(n,r){r===void 0&&(r=0);var a=this.x,s=this.y,o=this.z;return this.x=a+r*(n.x-a),this.y=s+r*(n.y-s),this.z=o+r*(n.z-o),this},applyMatrix3:function(n){var r=this.x,a=this.y,s=this.z,o=n.val;return this.x=o[0]*r+o[3]*a+o[6]*s,this.y=o[1]*r+o[4]*a+o[7]*s,this.z=o[2]*r+o[5]*a+o[8]*s,this},applyMatrix4:function(n){var r=this.x,a=this.y,s=this.z,o=n.val,d=1/(o[3]*r+o[7]*a+o[11]*s+o[15]);return this.x=(o[0]*r+o[4]*a+o[8]*s+o[12])*d,this.y=(o[1]*r+o[5]*a+o[9]*s+o[13])*d,this.z=(o[2]*r+o[6]*a+o[10]*s+o[14])*d,this},transformMat3:function(n){var r=this.x,a=this.y,s=this.z,o=n.val;return this.x=r*o[0]+a*o[3]+s*o[6],this.y=r*o[1]+a*o[4]+s*o[7],this.z=r*o[2]+a*o[5]+s*o[8],this},transformMat4:function(n){var r=this.x,a=this.y,s=this.z,o=n.val;return this.x=o[0]*r+o[4]*a+o[8]*s+o[12],this.y=o[1]*r+o[5]*a+o[9]*s+o[13],this.z=o[2]*r+o[6]*a+o[10]*s+o[14],this},transformCoordinates:function(n){var r=this.x,a=this.y,s=this.z,o=n.val,d=r*o[0]+a*o[4]+s*o[8]+o[12],l=r*o[1]+a*o[5]+s*o[9]+o[13],f=r*o[2]+a*o[6]+s*o[10]+o[14],m=r*o[3]+a*o[7]+s*o[11]+o[15];return this.x=d/m,this.y=l/m,this.z=f/m,this},transformQuat:function(n){var r=this.x,a=this.y,s=this.z,o=n.x,d=n.y,l=n.z,f=n.w,m=f*r+d*s-l*a,g=f*a+l*r-o*s,p=f*s+o*a-d*r,y=-o*r-d*a-l*s;return this.x=m*f+y*-o+g*-l-p*-d,this.y=g*f+y*-d+p*-o-m*-l,this.z=p*f+y*-l+m*-d-g*-o,this},project:function(n){var r=this.x,a=this.y,s=this.z,o=n.val,d=o[0],l=o[1],f=o[2],m=o[3],g=o[4],p=o[5],y=o[6],S=o[7],C=o[8],A=o[9],M=o[10],L=o[11],P=o[12],O=o[13],D=o[14],I=o[15],F=1/(r*m+a*S+s*L+I);return this.x=(r*d+a*g+s*C+P)*F,this.y=(r*l+a*p+s*A+O)*F,this.z=(r*f+a*y+s*M+D)*F,this},projectViewMatrix:function(n,r){return this.applyMatrix4(n).applyMatrix4(r)},unprojectViewMatrix:function(n,r){return this.applyMatrix4(n).applyMatrix4(r)},unproject:function(n,r){var a=n.x,s=n.y,o=n.z,d=n.w,l=this.x-a,f=d-this.y-1-s,m=this.z;return this.x=2*l/o-1,this.y=2*f/d-1,this.z=2*m-1,this.project(r)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});u.ZERO=new u,u.RIGHT=new u(1,0,0),u.LEFT=new u(-1,0,0),u.UP=new u(0,-1,0),u.DOWN=new u(0,1,0),u.FORWARD=new u(0,0,1),u.BACK=new u(0,0,-1),u.ONE=new u(1,1,1),h.exports=u},61369:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a,s,o){this.x=0,this.y=0,this.z=0,this.w=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0,this.w=r.w||0):(this.x=r||0,this.y=a||0,this.z=s||0,this.w=o||0)},clone:function(){return new u(this.x,this.y,this.z,this.w)},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this.w=n.w||0,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z&&this.w===n.w},set:function(n,r,a,s){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=n.w||0):(this.x=n||0,this.y=r||0,this.z=a||0,this.w=s||0),this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this.w+=n.w||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this.w-=n.w||0,this},scale:function(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this},length:function(){var n=this.x,r=this.y,a=this.z,s=this.w;return Math.sqrt(n*n+r*r+a*a+s*s)},lengthSq:function(){var n=this.x,r=this.y,a=this.z,s=this.w;return n*n+r*r+a*a+s*s},normalize:function(){var n=this.x,r=this.y,a=this.z,s=this.w,o=n*n+r*r+a*a+s*s;return o>0&&(o=1/Math.sqrt(o),this.x=n*o,this.y=r*o,this.z=a*o,this.w=s*o),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w},lerp:function(n,r){r===void 0&&(r=0);var a=this.x,s=this.y,o=this.z,d=this.w;return this.x=a+r*(n.x-a),this.y=s+r*(n.y-s),this.z=o+r*(n.z-o),this.w=d+r*(n.w-d),this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this.w*=n.w||1,this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this.w/=n.w||1,this},distance:function(n){var r=n.x-this.x,a=n.y-this.y,s=n.z-this.z||0,o=n.w-this.w||0;return Math.sqrt(r*r+a*a+s*s+o*o)},distanceSq:function(n){var r=n.x-this.x,a=n.y-this.y,s=n.z-this.z||0,o=n.w-this.w||0;return r*r+a*a+s*s+o*o},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(n){var r=this.x,a=this.y,s=this.z,o=this.w,d=n.val;return this.x=d[0]*r+d[4]*a+d[8]*s+d[12]*o,this.y=d[1]*r+d[5]*a+d[9]*s+d[13]*o,this.z=d[2]*r+d[6]*a+d[10]*s+d[14]*o,this.w=d[3]*r+d[7]*a+d[11]*s+d[15]*o,this},transformQuat:function(n){var r=this.x,a=this.y,s=this.z,o=n.x,d=n.y,l=n.z,f=n.w,m=f*r+d*s-l*a,g=f*a+l*r-o*s,p=f*s+o*a-d*r,y=-o*r-d*a-l*s;return this.x=m*f+y*-o+g*-l-p*-d,this.y=g*f+y*-d+p*-o-m*-l,this.z=p*f+y*-l+m*-d-g*-o,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});u.prototype.sub=u.prototype.subtract,u.prototype.mul=u.prototype.multiply,u.prototype.div=u.prototype.divide,u.prototype.dist=u.prototype.distance,u.prototype.distSq=u.prototype.distanceSq,u.prototype.len=u.prototype.length,u.prototype.lenSq=u.prototype.lengthSq,h.exports=u},60417:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return Math.abs(e-i)<=u};h.exports=w},15994:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=u-i;return i+((e-i)%n+n)%n};h.exports=w},31040:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){return Math.atan2(n-i,u-e)};h.exports=w},55495:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return Math.atan2(i.y-e.y,i.x-e.x)};h.exports=w},128:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return Math.atan2(i.x-e.x,i.y-e.y)};h.exports=w},41273:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){return Math.atan2(u-e,n-i)};h.exports=w},1432:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36383),u=function(n){return n>Math.PI&&(n-=i.PI2),Math.abs(((n+i.TAU)%i.PI2-i.PI2)%i.PI2)};h.exports=u},12407:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};h.exports=w},53993:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(99472),u=function(){return i(-Math.PI,Math.PI)};h.exports=u},86564:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(99472),u=function(){return i(-180,180)};h.exports=u},90154:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(12407),u=function(n){return i(n+Math.PI)};h.exports=u},48736:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36383),u=function(n,r,a){return a===void 0&&(a=.05),n===r||(Math.abs(r-n)<=a||Math.abs(r-n)>=i.PI2-a?n=r:(Math.abs(r-n)>Math.PI&&(r<n?r+=i.PI2:r-=i.PI2),r>n?n+=a:r<n&&(n-=a))),n};h.exports=u},61430:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=i-e;if(u===0)return 0;var n=Math.floor((u- -180)/360);return u-n*360};h.exports=w},86554:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(15994),u=function(n){return i(n,-Math.PI,Math.PI)};h.exports=u},30954:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(15994),u=function(n){return i(n,-180,180)};h.exports=u},25588:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Between:e(31040),BetweenPoints:e(55495),BetweenPointsY:e(128),BetweenY:e(41273),CounterClockwise:e(1432),Normalize:e(12407),Random:e(53993),RandomDegrees:e(86564),Reverse:e(90154),RotateTo:e(48736),ShortestBetween:e(61430),Wrap:e(86554),WrapDegrees:e(30954)}},36383:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};h.exports=w},20339:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r=e-u,a=i-n;return Math.sqrt(r*r+a*a)};h.exports=w},52816:h=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.x-i.x,n=e.y-i.y;return Math.sqrt(u*u+n*n)};h.exports=w},64559:h=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.x-i.x,n=e.y-i.y;return u*u+n*n};h.exports=w},82340:h=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){return Math.max(Math.abs(e-u),Math.abs(i-n))};h.exports=w},14390:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r){return r===void 0&&(r=2),Math.sqrt(Math.pow(u-e,r)+Math.pow(n-i,r))};h.exports=w},2243:h=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){return Math.abs(e-u)+Math.abs(i-n)};h.exports=w},89774:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r=e-u,a=i-n;return r*r+a*a};h.exports=w},50994:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Between:e(20339),BetweenPoints:e(52816),BetweenPointsSquared:e(64559),Chebyshev:e(82340),Power:e(14390),Snake:e(2243),Squared:e(89774)}},62640:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(54178),u=e(41521),n=e(79980),r=e(85433),a=e(99140),s=e(48857),o=e(81596),d=e(59133),l=e(98516),f=e(35248),m=e(82500),g=e(49752);h.exports={Power0:o,Power1:d.Out,Power2:r.Out,Power3:l.Out,Power4:f.Out,Linear:o,Quad:d.Out,Cubic:r.Out,Quart:l.Out,Quint:f.Out,Sine:m.Out,Expo:s.Out,Circ:n.Out,Elastic:a.Out,Back:i.Out,Bounce:u.Out,Stepped:g,"Quad.easeIn":d.In,"Cubic.easeIn":r.In,"Quart.easeIn":l.In,"Quint.easeIn":f.In,"Sine.easeIn":m.In,"Expo.easeIn":s.In,"Circ.easeIn":n.In,"Elastic.easeIn":a.In,"Back.easeIn":i.In,"Bounce.easeIn":u.In,"Quad.easeOut":d.Out,"Cubic.easeOut":r.Out,"Quart.easeOut":l.Out,"Quint.easeOut":f.Out,"Sine.easeOut":m.Out,"Expo.easeOut":s.Out,"Circ.easeOut":n.Out,"Elastic.easeOut":a.Out,"Back.easeOut":i.Out,"Bounce.easeOut":u.Out,"Quad.easeInOut":d.InOut,"Cubic.easeInOut":r.InOut,"Quart.easeInOut":l.InOut,"Quint.easeInOut":f.InOut,"Sine.easeInOut":m.InOut,"Expo.easeInOut":s.InOut,"Circ.easeInOut":n.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":i.InOut,"Bounce.easeInOut":u.InOut}},1639:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i===void 0&&(i=1.70158),e*e*((i+1)*e-i)};h.exports=w},50099:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i===void 0&&(i=1.70158);var u=i*1.525;return(e*=2)<1?.5*(e*e*((u+1)*e-u)):.5*((e-=2)*e*((u+1)*e+u)+2)};h.exports=w},41286:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i===void 0&&(i=1.70158),--e*e*((i+1)*e+i)+1};h.exports=w},54178:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(1639),Out:e(41286),InOut:e(50099)}},59590:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};h.exports=w},41788:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i=!1;return e<.5?(e=1-e*2,i=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,i?(1-e)*.5:e*.5+.5};h.exports=w},69905:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};h.exports=w},41521:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(59590),Out:e(69905),InOut:e(41788)}},91861:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return 1-Math.sqrt(1-e*e)};h.exports=w},4177:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};h.exports=w},57512:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return Math.sqrt(1- --e*e)};h.exports=w},79980:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(91861),Out:e(57512),InOut:e(4177)}},51150:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e*e*e};h.exports=w},82820:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};h.exports=w},35033:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return--e*e*e+1};h.exports=w},85433:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(51150),Out:e(35033),InOut:e(82820)}},69965:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){if(i===void 0&&(i=.1),u===void 0&&(u=.1),e===0)return 0;if(e===1)return 1;var n=u/4;return i<1?i=1:n=u*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(e-=1))*Math.sin((e-n)*(2*Math.PI)/u))};h.exports=w},50665:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){if(i===void 0&&(i=.1),u===void 0&&(u=.1),e===0)return 0;if(e===1)return 1;var n=u/4;return i<1?i=1:n=u*Math.asin(1/i)/(2*Math.PI),(e*=2)<1?-.5*(i*Math.pow(2,10*(e-=1))*Math.sin((e-n)*(2*Math.PI)/u)):i*Math.pow(2,-10*(e-=1))*Math.sin((e-n)*(2*Math.PI)/u)*.5+1};h.exports=w},7744:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){if(i===void 0&&(i=.1),u===void 0&&(u=.1),e===0)return 0;if(e===1)return 1;var n=u/4;return i<1?i=1:n=u*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*e)*Math.sin((e-n)*(2*Math.PI)/u)+1};h.exports=w},99140:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(69965),Out:e(7744),InOut:e(50665)}},24590:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return Math.pow(2,10*(e-1))-.001};h.exports=w},87844:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};h.exports=w},89433:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return 1-Math.pow(2,-10*e)};h.exports=w},48857:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(24590),Out:e(89433),InOut:e(87844)}},48820:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Back:e(54178),Bounce:e(41521),Circular:e(79980),Cubic:e(85433),Elastic:e(99140),Expo:e(48857),Linear:e(81596),Quadratic:e(59133),Quartic:e(98516),Quintic:e(35248),Sine:e(82500),Stepped:e(49752)}},7147:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e};h.exports=w},81596:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports=e(7147)},34826:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e*e};h.exports=w},20544:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};h.exports=w},92029:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e*(2-e)};h.exports=w},59133:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(34826),Out:e(92029),InOut:e(20544)}},64413:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e*e*e*e};h.exports=w},78137:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};h.exports=w},45840:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return 1- --e*e*e*e};h.exports=w},98516:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(64413),Out:e(45840),InOut:e(78137)}},87745:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e*e*e*e*e};h.exports=w},16509:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};h.exports=w},17868:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return--e*e*e*e*e+1};h.exports=w},35248:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(87745),Out:e(17868),InOut:e(16509)}},80461:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};h.exports=w},34025:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};h.exports=w},52768:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};h.exports=w},82500:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(80461),Out:e(52768),InOut:e(34025)}},72251:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i===void 0&&(i=1),e<=0?0:e>=1?1:((i*e|0)+1)*(1/i)};h.exports=w},49752:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports=e(72251)},75698:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i===void 0&&(i=1e-4),Math.ceil(e-i)};h.exports=w},43855:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return u===void 0&&(u=1e-4),Math.abs(e-i)<u};h.exports=w},25777:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i===void 0&&(i=1e-4),Math.floor(e+i)};h.exports=w},5470:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return u===void 0&&(u=1e-4),e>i-u};h.exports=w},94977:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return u===void 0&&(u=1e-4),e<i+u};h.exports=w},48379:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Ceil:e(75698),Equal:e(43855),Floor:e(25777),GreaterThan:e(5470),LessThan:e(94977)}},75508:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36383),u=e(79291),n={Angle:e(25588),Distance:e(50994),Easing:e(48820),Fuzzy:e(48379),Interpolation:e(38289),Pow2:e(49001),Snap:e(73697),RandomDataGenerator:e(28453),Average:e(53307),Bernstein:e(85710),Between:e(30976),CatmullRom:e(87842),CeilTo:e(26302),Clamp:e(45319),DegToRad:e(39506),Difference:e(61241),Euler:e(38857),Factorial:e(6411),FloatBetween:e(99472),FloorTo:e(77623),FromPercent:e(62945),GetSpeed:e(38265),IsEven:e(78702),IsEvenStrict:e(94883),Linear:e(28915),LinearXY:e(94908),MaxAdd:e(86883),Median:e(50040),MinSub:e(37204),Percent:e(65201),RadToDeg:e(43396),RandomXY:e(74362),RandomXYZ:e(60706),RandomXYZW:e(67421),Rotate:e(36305),RotateAround:e(11520),RotateAroundDistance:e(1163),RotateTo:e(70336),RoundAwayFromZero:e(2284),RoundTo:e(41013),SinCosTableGenerator:e(16922),SmootherStep:e(54261),SmoothStep:e(7602),ToXY:e(44408),TransformXY:e(85955),Within:e(60417),Wrap:e(15994),Vector2:e(26099),Vector3:e(25836),Vector4:e(61369),Matrix3:e(94434),Matrix4:e(37867),Quaternion:e(15746),RotateVec3:e(72678)};n=u(!1,n,i),h.exports=n},89318:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(85710),u=function(n,r){for(var a=0,s=n.length-1,o=0;o<=s;o++)a+=Math.pow(1-r,s-o)*Math.pow(r,o)*n[o]*i(s,o);return a};h.exports=u},77259:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87842),u=function(n,r){var a=n.length-1,s=a*r,o=Math.floor(s);return n[0]===n[a]?(r<0&&(o=Math.floor(s=a*(1+r))),i(s-o,n[(o-1+a)%a],n[o],n[(o+1)%a],n[(o+2)%a])):r<0?n[0]-(i(-s,n[0],n[0],n[1],n[1])-n[0]):r>1?n[a]-(i(s-a,n[a],n[a],n[a-1],n[a-1])-n[a]):i(s-o,n[o?o-1:0],n[o],n[a<o+1?a:o+1],n[a<o+2?a:o+2])};h.exports=u},36316:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(r,a){var s=1-r;return s*s*s*a}function e(r,a){var s=1-r;return 3*s*s*r*a}function i(r,a){return 3*(1-r)*r*r*a}function u(r,a){return r*r*r*a}var n=function(r,a,s,o,d){return w(r,a)+e(r,s)+i(r,o)+u(r,d)};h.exports=n},28392:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(28915),u=function(n,r){var a=n.length-1,s=a*r,o=Math.floor(s);return r<0?i(n[0],n[1],s):r>1?i(n[a],n[a-1],a-s):i(n[o],n[o+1>a?a:o+1],s-o)};h.exports=u},32112:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(n,r){var a=1-n;return a*a*r}function e(n,r){return 2*(1-n)*n*r}function i(n,r){return n*n*r}var u=function(n,r,a,s){return w(n,r)+e(n,a)+i(n,s)};h.exports=u},47235:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7602),u=function(n,r,a){return r+(a-r)*i(n,0,1)};h.exports=u},50178:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(54261),u=function(n,r,a){return r+(a-r)*i(n,0,1)};h.exports=u},38289:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Bezier:e(89318),CatmullRom:e(77259),CubicBezier:e(36316),Linear:e(28392),QuadraticBezier:e(32112),SmoothStep:e(47235),SmootherStep:e(50178)}},98439:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i=Math.log(e)/.6931471805599453;return 1<<Math.ceil(i)};h.exports=w},50030:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e>0&&(e&e-1)===0&&i>0&&(i&i-1)===0};h.exports=w},81230:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e>0&&(e&e-1)===0};h.exports=w},49001:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={GetNext:e(98439),IsSize:e(50030),IsValue:e(81230)}},28453:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r){r===void 0&&(r=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],r&&this.init(r)},rnd:function(){var n=2091639*this.s0+this.c*23283064365386963e-26;return this.c=n|0,this.s0=this.s1,this.s1=this.s2,this.s2=n-this.c,this.s2},hash:function(n){var r,a=this.n;n=n.toString();for(var s=0;s<n.length;s++)a+=n.charCodeAt(s),r=.02519603282416938*a,a=r>>>0,r-=a,r*=a,a=r>>>0,r-=a,a+=r*4294967296;return this.n=a,(a>>>0)*23283064365386963e-26},init:function(n){typeof n=="string"?this.state(n):this.sow(n)},sow:function(n){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!n)for(var r=0;r<n.length&&n[r]!=null;r++){var a=n[r];this.s0-=this.hash(a),this.s0+=~~(this.s0<0),this.s1-=this.hash(a),this.s1+=~~(this.s1<0),this.s2-=this.hash(a),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(n,r){return Math.floor(this.realInRange(0,r-n+1)+n)},between:function(n,r){return Math.floor(this.realInRange(0,r-n+1)+n)},realInRange:function(n,r){return this.frac()*(r-n)+n},normal:function(){return 1-2*this.frac()},uuid:function(){var n="",r="";for(r=n="";n++<36;r+=~n%5|n*3&4?(n^15?8^this.frac()*(n^20?16:4):4).toString(16):"-");return r},pick:function(n){return n[this.integerInRange(0,n.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(n){return n[~~(Math.pow(this.frac(),2)*(n.length-.5)+.5)]},timestamp:function(n,r){return this.realInRange(n||9466848e5,r||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(n){return typeof n=="string"&&n.match(/^!rnd/)&&(n=n.split(","),this.c=parseFloat(n[1]),this.s0=parseFloat(n[2]),this.s1=parseFloat(n[3]),this.s2=parseFloat(n[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(n){for(var r=n.length-1,a=r;a>0;a--){var s=Math.floor(this.frac()*(a+1)),o=n[s];n[s]=n[a],n[a]=o}return n}});h.exports=u},63448:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){return u===void 0&&(u=0),i===0?e:(e-=u,e=i*Math.ceil(e/i),n?(u+e)/i:u+e)};h.exports=w},56583:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){return u===void 0&&(u=0),i===0?e:(e-=u,e=i*Math.floor(e/i),n?(u+e)/i:u+e)};h.exports=w},77720:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){return u===void 0&&(u=0),i===0?e:(e-=u,e=i*Math.round(e/i),n?(u+e)/i:u+e)};h.exports=w},73697:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Ceil:e(63448),Floor:e(56583),To:e(77720)}},85454:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e(63595);var i=e(8054),u=e(79291),n={Actions:e(61061),Animations:e(60421),BlendModes:e(10312),Cache:e(83388),Cameras:e(26638),Core:e(42857),Class:e(83419),Create:e(15822),Curves:e(25410),Data:e(44965),Display:e(27460),DOM:e(84902),Events:e(93055),FX:e(66064),Game:e(50127),GameObjects:e(77856),Geom:e(55738),Input:e(14350),Loader:e(57777),Math:e(75508),Physics:e(44563),Plugins:e(18922),Renderer:e(36909),Scale:e(93364),ScaleModes:e(29795),Scene:e(97482),Scenes:e(62194),Structs:e(41392),Textures:e(27458),Tilemaps:e(62501),Time:e(90291),Tweens:e(43066),Utils:e(91799)};n.Sound=e(23717),n=u(!1,n,i),h.exports=n,e.g.Phaser=n},71289:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(92209),n=e(88571),r=new i({Extends:n,Mixins:[u.Acceleration,u.Angular,u.Bounce,u.Collision,u.Debug,u.Drag,u.Enable,u.Friction,u.Gravity,u.Immovable,u.Mass,u.Pushable,u.Size,u.Velocity],initialize:function(s,o,d,l,f){n.call(this,s,o,d,l,f),this.body=null}});h.exports=r},86689:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(39506),n=e(20339),r=e(89774),a=e(66022),s=e(95540),o=e(46975),d=e(72441),l=e(47956),f=e(37277),m=e(44594),g=e(26099),p=e(82248),y=new i({initialize:function(C){this.scene=C,this.systems=C.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,C.sys.events.once(m.BOOT,this.boot,this),C.sys.events.on(m.START,this.start,this)},boot:function(){this.world=new p(this.scene,this.config),this.add=new a(this.world),this.systems.events.once(m.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new p(this.scene,this.config),this.add=new a(this.world));var S=this.systems.events;s(this.config,"customUpdate",!1)||S.on(m.UPDATE,this.world.update,this.world),S.on(m.POST_UPDATE,this.world.postUpdate,this.world),S.once(m.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(m.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(m.UPDATE,this.world.update,this.world)},getConfig:function(){var S=this.systems.game.config.physics,C=this.systems.settings.physics,A=o(s(C,"arcade",{}),s(S,"arcade",{}));return A},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(S,C,A,M,L){return A===void 0&&(A=null),M===void 0&&(M=null),L===void 0&&(L=A),this.world.collideObjects(S,C,A,M,L,!0)},collide:function(S,C,A,M,L){return A===void 0&&(A=null),M===void 0&&(M=null),L===void 0&&(L=A),this.world.collideObjects(S,C,A,M,L,!1)},collideTiles:function(S,C,A,M,L){return this.world.collideTiles(S,C,A,M,L)},overlapTiles:function(S,C,A,M,L){return this.world.overlapTiles(S,C,A,M,L)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(S,C,A,M,L,P){M===void 0&&(M=60);var O=Math.atan2(A-S.y,C-S.x);return S.body.acceleration.setToPolar(O,M),L!==void 0&&P!==void 0&&S.body.maxVelocity.set(L,P),O},accelerateToObject:function(S,C,A,M,L){return this.accelerateTo(S,C.x,C.y,A,M,L)},closest:function(S,C){C||(C=this.world.bodies.entries);for(var A=Number.MAX_VALUE,M=null,L=S.x,P=S.y,O=C.length,D=0;D<O;D++){var I=C[D],F=I.body||I;if(!(S===I||S===F||S===F.gameObject||S===F.center)){var H=r(L,P,F.center.x,F.center.y);H<A&&(M=I,A=H)}}return M},furthest:function(S,C){C||(C=this.world.bodies.entries);for(var A=-1,M=null,L=S.x,P=S.y,O=C.length,D=0;D<O;D++){var I=C[D],F=I.body||I;if(!(S===I||S===F||S===F.gameObject||S===F.center)){var H=r(L,P,F.center.x,F.center.y);H>A&&(M=I,A=H)}}return M},moveTo:function(S,C,A,M,L){M===void 0&&(M=60),L===void 0&&(L=0);var P=Math.atan2(A-S.y,C-S.x);return L>0&&(M=n(S.x,S.y,C,A)/(L/1e3)),S.body.velocity.setToPolar(P,M),P},moveToObject:function(S,C,A,M){return this.moveTo(S,C.x,C.y,A,M)},velocityFromAngle:function(S,C,A){return C===void 0&&(C=60),A===void 0&&(A=new g),A.setToPolar(u(S),C)},velocityFromRotation:function(S,C,A){return C===void 0&&(C=60),A===void 0&&(A=new g),A.setToPolar(S,C)},overlapRect:function(S,C,A,M,L,P){return l(this.world,S,C,A,M,L,P)},overlapCirc:function(S,C,A,M,L){return d(this.world,S,C,A,M,L)},shutdown:function(){if(this.world){var S=this.systems.events;S.off(m.UPDATE,this.world.update,this.world),S.off(m.POST_UPDATE,this.world.postUpdate,this.world),S.off(m.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(m.START,this.start,this),this.scene=null,this.systems=null}});f.register("ArcadePhysics",y,"arcadePhysics"),h.exports=y},13759:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(92209),n=e(68287),r=new i({Extends:n,Mixins:[u.Acceleration,u.Angular,u.Bounce,u.Collision,u.Debug,u.Drag,u.Enable,u.Friction,u.Gravity,u.Immovable,u.Mass,u.Pushable,u.Size,u.Velocity],initialize:function(s,o,d,l,f){n.call(this,s,o,d,l,f),this.body=null}});h.exports=r},37742:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(78389),n=e(37747),r=e(63012),a=e(43396),s=e(87841),o=e(37303),d=e(95829),l=e(26099),f=new i({Mixins:[u],initialize:function(g,p){var y=64,S=64,C={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},A=p!==void 0;A&&p.displayWidth&&(y=p.displayWidth,S=p.displayHeight),A||(p=C),this.world=g,this.gameObject=A?p:void 0,this.isBody=!0,this.transform={x:p.x,y:p.y,rotation:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,displayOriginX:p.displayOriginX,displayOriginY:p.displayOriginY},this.debugShowBody=g.defaults.debugShowBody,this.debugShowVelocity=g.defaults.debugShowVelocity,this.debugBodyColor=g.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(p.x-p.scaleX*p.displayOriginX,p.y-p.scaleY*p.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=p.angle,this.preRotation=p.angle,this.width=y,this.height=S,this.sourceWidth=y,this.sourceHeight=S,p.frame&&(this.sourceWidth=p.frame.realWidth,this.sourceHeight=p.frame.realHeight),this.halfWidth=Math.abs(y/2),this.halfHeight=Math.abs(S/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new l,this.newVelocity=new l,this.deltaMax=new l,this.acceleration=new l,this.allowDrag=!0,this.drag=new l,this.allowGravity=!0,this.gravity=new l,this.bounce=new l,this.worldBounce=null,this.customBoundsRectangle=g.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new l(1e4,1e4),this.maxSpeed=-1,this.friction=new l(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=n.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new l(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=d(!1),this.touching=d(!0),this.wasTouching=d(!0),this.blocked=d(!0),this.syncBounds=!1,this.physicsType=n.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=p.scaleX,this._sy=p.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new s,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var m=this.gameObject,g=this.transform;if(m.parentContainer){var p=m.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);g.x=p.tx,g.y=p.ty,g.rotation=a(p.rotation),g.scaleX=p.scaleX,g.scaleY=p.scaleY,g.displayOriginX=m.displayOriginX,g.displayOriginY=m.displayOriginY}else g.x=m.x,g.y=m.y,g.rotation=m.angle,g.scaleX=m.scaleX,g.scaleY=m.scaleY,g.displayOriginX=m.displayOriginX,g.displayOriginY=m.displayOriginY;var y=!1;if(this.syncBounds){var S=m.getBounds(this._bounds);this.width=S.width,this.height=S.height,y=!0}else{var C=Math.abs(g.scaleX),A=Math.abs(g.scaleY);(this._sx!==C||this._sy!==A)&&(this.width=this.sourceWidth*C,this.height=this.sourceHeight*A,this._sx=C,this._sy=A,y=!0)}y&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var m=this.transform;this.position.x=m.x+m.scaleX*(this.offset.x-m.displayOriginX),this.position.y=m.y+m.scaleY*(this.offset.y-m.displayOriginY),this.updateCenter()},resetFlags:function(m){m===void 0&&(m=!1);var g=this.wasTouching,p=this.touching,y=this.blocked;m?d(!0,g):(g.none=p.none,g.up=p.up,g.down=p.down,g.left=p.left,g.right=p.right),d(!0,p),d(!0,y),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(m,g){if(m&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var p=this.position;this.prev.x=p.x,this.prev.y=p.y,this.prevFrame.x=p.x,this.prevFrame.y=p.y}m&&this.update(g)},update:function(m){var g=this.prev,p=this.position,y=this.velocity;if(g.set(p.x,p.y),!this.moves){this._dx=p.x-g.x,this._dy=p.y-g.y;return}if(this.directControl){var S=this.autoFrame;y.set((p.x-S.x)/m,(p.y-S.y)/m),this.world.updateMotion(this,m),this._dx=p.x-S.x,this._dy=p.y-S.y}else this.world.updateMotion(this,m),this.newVelocity.set(y.x*m,y.y*m),p.add(this.newVelocity),this._dx=p.x-g.x,this._dy=p.y-g.y;var C=y.x,A=y.y;if(this.updateCenter(),this.angle=Math.atan2(A,C),this.speed=Math.sqrt(C*C+A*A),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var M=this.blocked;this.world.emit(r.WORLD_BOUNDS,this,M.up,M.down,M.left,M.right)}},postUpdate:function(){var m=this.position,g=m.x-this.prevFrame.x,p=m.y-this.prevFrame.y,y=this.gameObject;if(this.moves){var S=this.deltaMax.x,C=this.deltaMax.y;S!==0&&g!==0&&(g<0&&g<-S?g=-S:g>0&&g>S&&(g=S)),C!==0&&p!==0&&(p<0&&p<-C?p=-C:p>0&&p>C&&(p=C)),y&&(y.x+=g,y.y+=p)}g<0?this.facing=n.FACING_LEFT:g>0&&(this.facing=n.FACING_RIGHT),p<0?this.facing=n.FACING_UP:p>0&&(this.facing=n.FACING_DOWN),this.allowRotation&&y&&(y.angle+=this.deltaZ()),this._tx=g,this._ty=p,this.autoFrame.set(m.x,m.y)},setBoundsRectangle:function(m){return this.customBoundsRectangle=m||this.world.bounds,this},checkWorldBounds:function(){var m=this.position,g=this.velocity,p=this.blocked,y=this.customBoundsRectangle,S=this.world.checkCollision,C=this.worldBounce?-this.worldBounce.x:-this.bounce.x,A=this.worldBounce?-this.worldBounce.y:-this.bounce.y,M=!1;return m.x<y.x&&S.left?(m.x=y.x,g.x*=C,p.left=!0,M=!0):this.right>y.right&&S.right&&(m.x=y.right-this.width,g.x*=C,p.right=!0,M=!0),m.y<y.y&&S.up?(m.y=y.y,g.y*=A,p.up=!0,M=!0):this.bottom>y.bottom&&S.down&&(m.y=y.bottom-this.height,g.y*=A,p.down=!0,M=!0),M&&(this.blocked.none=!1,this.updateCenter()),M},setOffset:function(m,g){return g===void 0&&(g=m),this.offset.set(m,g),this},setGameObject:function(m,g){return g===void 0&&(g=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=m,m.body&&(m.body=this),this.setSize(),this.world.add(this),this.enable=g,this},setSize:function(m,g,p){p===void 0&&(p=!0);var y=this.gameObject;if(y&&(!m&&y.frame&&(m=y.frame.realWidth),!g&&y.frame&&(g=y.frame.realHeight)),this.sourceWidth=m,this.sourceHeight=g,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),p&&y&&y.getCenter){var S=(y.width-m)/2,C=(y.height-g)/2;this.offset.set(S,C)}return this.isCircle=!1,this.radius=0,this},setCircle:function(m,g,p){return g===void 0&&(g=this.offset.x),p===void 0&&(p=this.offset.y),m>0?(this.isCircle=!0,this.radius=m,this.sourceWidth=m*2,this.sourceHeight=m*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(g,p),this.updateCenter()):this.isCircle=!1,this},reset:function(m,g){this.stop();var p=this.gameObject;p&&(p.setPosition(m,g),this.rotation=p.angle,this.preRotation=p.angle);var y=this.position;p&&p.getTopLeft?p.getTopLeft(y):y.set(m,g),this.prev.copy(y),this.prevFrame.copy(y),this.autoFrame.copy(y),p&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(m){return m.x=this.x,m.y=this.y,m.right=this.right,m.bottom=this.bottom,m},hitTest:function(m,g){if(!this.isCircle)return o(this,m,g);if(this.radius>0&&m>=this.left&&m<=this.right&&g>=this.top&&g<=this.bottom){var p=(this.center.x-m)*(this.center.x-m),y=(this.center.y-g)*(this.center.y-g);return p+y<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(m){var g=this.position,p=g.x+this.halfWidth,y=g.y+this.halfHeight;this.debugShowBody&&(m.lineStyle(m.defaultStrokeWidth,this.debugBodyColor),this.isCircle?m.strokeCircle(p,y,this.width/2):(this.checkCollision.up&&m.lineBetween(g.x,g.y,g.x+this.width,g.y),this.checkCollision.right&&m.lineBetween(g.x+this.width,g.y,g.x+this.width,g.y+this.height),this.checkCollision.down&&m.lineBetween(g.x,g.y+this.height,g.x+this.width,g.y+this.height),this.checkCollision.left&&m.lineBetween(g.x,g.y,g.x,g.y+this.height))),this.debugShowVelocity&&(m.lineStyle(m.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),m.lineBetween(p,y,p+this.velocity.x/2,y+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(m){return m===void 0&&(m=!0),this.directControl=m,this},setCollideWorldBounds:function(m,g,p,y){m===void 0&&(m=!0),this.collideWorldBounds=m;var S=g!==void 0,C=p!==void 0;return(S||C)&&(this.worldBounce||(this.worldBounce=new l),S&&(this.worldBounce.x=g),C&&(this.worldBounce.y=p)),y!==void 0&&(this.onWorldBounds=y),this},setVelocity:function(m,g){return this.velocity.set(m,g),m=this.velocity.x,g=this.velocity.y,this.speed=Math.sqrt(m*m+g*g),this},setVelocityX:function(m){return this.setVelocity(m,this.velocity.y)},setVelocityY:function(m){return this.setVelocity(this.velocity.x,m)},setMaxVelocity:function(m,g){return this.maxVelocity.set(m,g),this},setMaxVelocityX:function(m){return this.maxVelocity.x=m,this},setMaxVelocityY:function(m){return this.maxVelocity.y=m,this},setMaxSpeed:function(m){return this.maxSpeed=m,this},setSlideFactor:function(m,g){return this.slideFactor.set(m,g),this},setBounce:function(m,g){return this.bounce.set(m,g),this},setBounceX:function(m){return this.bounce.x=m,this},setBounceY:function(m){return this.bounce.y=m,this},setAcceleration:function(m,g){return this.acceleration.set(m,g),this},setAccelerationX:function(m){return this.acceleration.x=m,this},setAccelerationY:function(m){return this.acceleration.y=m,this},setAllowDrag:function(m){return m===void 0&&(m=!0),this.allowDrag=m,this},setAllowGravity:function(m){return m===void 0&&(m=!0),this.allowGravity=m,this},setAllowRotation:function(m){return m===void 0&&(m=!0),this.allowRotation=m,this},setDrag:function(m,g){return this.drag.set(m,g),this},setDamping:function(m){return this.useDamping=m,this},setDragX:function(m){return this.drag.x=m,this},setDragY:function(m){return this.drag.y=m,this},setGravity:function(m,g){return this.gravity.set(m,g),this},setGravityX:function(m){return this.gravity.x=m,this},setGravityY:function(m){return this.gravity.y=m,this},setFriction:function(m,g){return this.friction.set(m,g),this},setFrictionX:function(m){return this.friction.x=m,this},setFrictionY:function(m){return this.friction.y=m,this},setAngularVelocity:function(m){return this.angularVelocity=m,this},setAngularAcceleration:function(m){return this.angularAcceleration=m,this},setAngularDrag:function(m){return this.angularDrag=m,this},setMass:function(m){return this.mass=m,this},setImmovable:function(m){return m===void 0&&(m=!0),this.immovable=m,this},setEnable:function(m){return m===void 0&&(m=!0),this.enable=m,this},processX:function(m,g,p,y){this.x+=m,this.updateCenter(),g!==null&&(this.velocity.x=g*this.slideFactor.x);var S=this.blocked;p&&(S.left=!0,S.none=!1),y&&(S.right=!0,S.none=!1)},processY:function(m,g,p,y){this.y+=m,this.updateCenter(),g!==null&&(this.velocity.y=g*this.slideFactor.y);var S=this.blocked;p&&(S.up=!0,S.none=!1),y&&(S.down=!0,S.none=!1)},x:{get:function(){return this.position.x},set:function(m){this.position.x=m}},y:{get:function(){return this.position.y},set:function(m){this.position.y=m}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});h.exports=f},79342:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a,s,o,d,l,f){this.world=r,this.name="",this.active=!0,this.overlapOnly=a,this.object1=s,this.object2=o,this.collideCallback=d,this.processCallback=l,this.callbackContext=f},setName:function(n){return this.name=n,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});h.exports=u},66022:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(71289),u=e(13759),n=e(37742),r=e(83419),a=e(37747),s=e(60758),o=e(72624),d=e(71464),l=new r({initialize:function(m){this.world=m,this.scene=m.scene,this.sys=m.scene.sys},collider:function(f,m,g,p,y){return this.world.addCollider(f,m,g,p,y)},overlap:function(f,m,g,p,y){return this.world.addOverlap(f,m,g,p,y)},existing:function(f,m){var g=m?a.STATIC_BODY:a.DYNAMIC_BODY;return this.world.enableBody(f,g),f},staticImage:function(f,m,g,p){var y=new i(this.scene,f,m,g,p);return this.sys.displayList.add(y),this.world.enableBody(y,a.STATIC_BODY),y},image:function(f,m,g,p){var y=new i(this.scene,f,m,g,p);return this.sys.displayList.add(y),this.world.enableBody(y,a.DYNAMIC_BODY),y},staticSprite:function(f,m,g,p){var y=new u(this.scene,f,m,g,p);return this.sys.displayList.add(y),this.sys.updateList.add(y),this.world.enableBody(y,a.STATIC_BODY),y},sprite:function(f,m,g,p){var y=new u(this.scene,f,m,g,p);return this.sys.displayList.add(y),this.sys.updateList.add(y),this.world.enableBody(y,a.DYNAMIC_BODY),y},staticGroup:function(f,m){return this.sys.updateList.add(new d(this.world,this.world.scene,f,m))},group:function(f,m){return this.sys.updateList.add(new s(this.world,this.world.scene,f,m))},body:function(f,m,g,p){var y=new n(this.world);return y.position.set(f,m),g&&p&&y.setSize(g,p),this.world.add(y,a.DYNAMIC_BODY),y},staticBody:function(f,m,g,p){var y=new o(this.world);return y.position.set(f,m),g&&p&&y.setSize(g,p),this.world.add(y,a.STATIC_BODY),y},destroy:function(){this.world=null,this.scene=null,this.sys=null}});h.exports=l},79599:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i=0;if(!Array.isArray(e))i=e;else for(var u=0;u<e.length;u++)i|=e[u];return i};h.exports=w},64897:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37747),u=function(n,r,a,s){var o=0,d=n.deltaAbsX()+r.deltaAbsX()+s;return n._dx===0&&r._dx===0?(n.embedded=!0,r.embedded=!0):n._dx>r._dx?(o=n.right-r.x,o>d&&!a||n.checkCollision.right===!1||r.checkCollision.left===!1?o=0:(n.touching.none=!1,n.touching.right=!0,r.touching.none=!1,r.touching.left=!0,r.physicsType===i.STATIC_BODY&&!a&&(n.blocked.none=!1,n.blocked.right=!0),n.physicsType===i.STATIC_BODY&&!a&&(r.blocked.none=!1,r.blocked.left=!0))):n._dx<r._dx&&(o=n.x-r.width-r.x,-o>d&&!a||n.checkCollision.left===!1||r.checkCollision.right===!1?o=0:(n.touching.none=!1,n.touching.left=!0,r.touching.none=!1,r.touching.right=!0,r.physicsType===i.STATIC_BODY&&!a&&(n.blocked.none=!1,n.blocked.left=!0),n.physicsType===i.STATIC_BODY&&!a&&(r.blocked.none=!1,r.blocked.right=!0))),n.overlapX=o,r.overlapX=o,o};h.exports=u},45170:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37747),u=function(n,r,a,s){var o=0,d=n.deltaAbsY()+r.deltaAbsY()+s;return n._dy===0&&r._dy===0?(n.embedded=!0,r.embedded=!0):n._dy>r._dy?(o=n.bottom-r.y,o>d&&!a||n.checkCollision.down===!1||r.checkCollision.up===!1?o=0:(n.touching.none=!1,n.touching.down=!0,r.touching.none=!1,r.touching.up=!0,r.physicsType===i.STATIC_BODY&&!a&&(n.blocked.none=!1,n.blocked.down=!0),n.physicsType===i.STATIC_BODY&&!a&&(r.blocked.none=!1,r.blocked.up=!0))):n._dy<r._dy&&(o=n.y-r.bottom,-o>d&&!a||n.checkCollision.up===!1||r.checkCollision.down===!1?o=0:(n.touching.none=!1,n.touching.up=!0,r.touching.none=!1,r.touching.down=!0,r.physicsType===i.STATIC_BODY&&!a&&(n.blocked.none=!1,n.blocked.up=!0),n.physicsType===i.STATIC_BODY&&!a&&(r.blocked.none=!1,r.blocked.down=!0))),n.overlapY=o,r.overlapY=o,o};h.exports=u},60758:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(13759),u=e(83419),n=e(78389),r=e(37747),a=e(95540),s=e(26479),o=e(41212),d=new u({Extends:s,Mixins:[n],initialize:function(f,m,g,p){if(!g&&!p)p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(o(g))p=g,g=null,p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(g)&&o(g[0])){var y=this;g.forEach(function(S){S.internalCreateCallback=y.createCallbackHandler,S.internalRemoveCallback=y.removeCallbackHandler,S.classType=a(S,"classType",i)}),p=null}else p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=f,p&&(p.classType=a(p,"classType",i)),this.physicsType=r.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:a(p,"collideWorldBounds",!1),setBoundsRectangle:a(p,"customBoundsRectangle",null),setAccelerationX:a(p,"accelerationX",0),setAccelerationY:a(p,"accelerationY",0),setAllowDrag:a(p,"allowDrag",!0),setAllowGravity:a(p,"allowGravity",!0),setAllowRotation:a(p,"allowRotation",!0),setDamping:a(p,"useDamping",!1),setBounceX:a(p,"bounceX",0),setBounceY:a(p,"bounceY",0),setDragX:a(p,"dragX",0),setDragY:a(p,"dragY",0),setEnable:a(p,"enable",!0),setGravityX:a(p,"gravityX",0),setGravityY:a(p,"gravityY",0),setFrictionX:a(p,"frictionX",0),setFrictionY:a(p,"frictionY",0),setMaxSpeed:a(p,"maxSpeed",-1),setMaxVelocityX:a(p,"maxVelocityX",1e4),setMaxVelocityY:a(p,"maxVelocityY",1e4),setVelocityX:a(p,"velocityX",0),setVelocityY:a(p,"velocityY",0),setAngularVelocity:a(p,"angularVelocity",0),setAngularAcceleration:a(p,"angularAcceleration",0),setAngularDrag:a(p,"angularDrag",0),setMass:a(p,"mass",1),setImmovable:a(p,"immovable",!1)},s.call(this,m,g,p),this.type="PhysicsGroup"},createCallbackHandler:function(l){l.body||this.world.enableBody(l,r.DYNAMIC_BODY);var f=l.body;for(var m in this.defaults)f[m](this.defaults[m])},removeCallbackHandler:function(l){l.body&&this.world.disableBody(l)},setVelocity:function(l,f,m){m===void 0&&(m=0);for(var g=this.getChildren(),p=0;p<g.length;p++)g[p].body.velocity.set(l+p*m,f+p*m);return this},setVelocityX:function(l,f){f===void 0&&(f=0);for(var m=this.getChildren(),g=0;g<m.length;g++)m[g].body.velocity.x=l+g*f;return this},setVelocityY:function(l,f){f===void 0&&(f=0);for(var m=this.getChildren(),g=0;g<m.length;g++)m[g].body.velocity.y=l+g*f;return this}});h.exports=d},3017:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w,e,i,u,n,r,a,s,o,d,l,f,m,g,p,y,S,C=function(D,I,F){w=D,e=I;var H=w.velocity.x,k=e.velocity.x;return i=w.pushable,o=w._dx<0,d=w._dx>0,l=w._dx===0,p=Math.abs(w.right-e.x)<=Math.abs(e.right-w.x),a=k-H*w.bounce.x,u=e.pushable,f=e._dx<0,m=e._dx>0,g=e._dx===0,y=!p,s=H-k*e.bounce.x,S=Math.abs(F),A()},A=function(){return d&&p&&e.blocked.right?(w.processX(-S,a,!1,!0),1):o&&y&&e.blocked.left?(w.processX(S,a,!0),1):m&&y&&w.blocked.right?(e.processX(-S,s,!1,!0),2):f&&p&&w.blocked.left?(e.processX(S,s,!0),2):0},M=function(){var D=w.velocity.x,I=e.velocity.x,F=Math.sqrt(I*I*e.mass/w.mass)*(I>0?1:-1),H=Math.sqrt(D*D*w.mass/e.mass)*(D>0?1:-1),k=(F+H)*.5;return F-=k,H-=k,n=k+F*w.bounce.x,r=k+H*e.bounce.x,o&&y?L(0):f&&p?L(1):d&&p?L(2):m&&y?L(3):!1},L=function(D){if(i&&u)S*=.5,D===0||D===3?(w.processX(S,n),e.processX(-S,r)):(w.processX(-S,n),e.processX(S,r));else if(i&&!u)D===0||D===3?w.processX(S,a,!0):w.processX(-S,a,!1,!0);else if(!i&&u)D===0||D===3?e.processX(-S,s,!1,!0):e.processX(S,s,!0);else{var I=S*.5;D===0?g?(w.processX(S,0,!0),e.processX(0,null,!1,!0)):m?(w.processX(I,0,!0),e.processX(-I,0,!1,!0)):(w.processX(I,e.velocity.x,!0),e.processX(-I,null,!1,!0)):D===1?l?(w.processX(0,null,!1,!0),e.processX(S,0,!0)):d?(w.processX(-I,0,!1,!0),e.processX(I,0,!0)):(w.processX(-I,null,!1,!0),e.processX(I,w.velocity.x,!0)):D===2?g?(w.processX(-S,0,!1,!0),e.processX(0,null,!0)):f?(w.processX(-I,0,!1,!0),e.processX(I,0,!0)):(w.processX(-I,e.velocity.x,!1,!0),e.processX(I,null,!0)):D===3&&(l?(w.processX(0,null,!0),e.processX(-S,0,!1,!0)):o?(w.processX(I,0,!0),e.processX(-I,0,!1,!0)):(w.processX(I,e.velocity.y,!0),e.processX(-I,null,!1,!0)))}return!0},P=function(D){if(D===1?e.velocity.x=0:p?e.processX(S,s,!0):e.processX(-S,s,!1,!0),w.moves){var I=w.directControl?w.y-w.autoFrame.y:w.y-w.prev.y;e.y+=I*w.friction.y,e._dy=e.y-e.prev.y}},O=function(D){if(D===2?w.velocity.x=0:y?w.processX(S,a,!0):w.processX(-S,a,!1,!0),e.moves){var I=e.directControl?e.y-e.autoFrame.y:e.y-e.prev.y;w.y+=I*e.friction.y,w._dy=w.y-w.prev.y}};h.exports={BlockCheck:A,Check:M,Set:C,Run:L,RunImmovableBody1:P,RunImmovableBody2:O}},47962:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w,e,i,u,n,r,a,s,o,d,l,f,m,g,p,y,S,C=function(D,I,F){w=D,e=I;var H=w.velocity.y,k=e.velocity.y;return i=w.pushable,o=w._dy<0,d=w._dy>0,l=w._dy===0,p=Math.abs(w.bottom-e.y)<=Math.abs(e.bottom-w.y),a=k-H*w.bounce.y,u=e.pushable,f=e._dy<0,m=e._dy>0,g=e._dy===0,y=!p,s=H-k*e.bounce.y,S=Math.abs(F),A()},A=function(){return d&&p&&e.blocked.down?(w.processY(-S,a,!1,!0),1):o&&y&&e.blocked.up?(w.processY(S,a,!0),1):m&&y&&w.blocked.down?(e.processY(-S,s,!1,!0),2):f&&p&&w.blocked.up?(e.processY(S,s,!0),2):0},M=function(){var D=w.velocity.y,I=e.velocity.y,F=Math.sqrt(I*I*e.mass/w.mass)*(I>0?1:-1),H=Math.sqrt(D*D*w.mass/e.mass)*(D>0?1:-1),k=(F+H)*.5;return F-=k,H-=k,n=k+F*w.bounce.y,r=k+H*e.bounce.y,o&&y?L(0):f&&p?L(1):d&&p?L(2):m&&y?L(3):!1},L=function(D){if(i&&u)S*=.5,D===0||D===3?(w.processY(S,n),e.processY(-S,r)):(w.processY(-S,n),e.processY(S,r));else if(i&&!u)D===0||D===3?w.processY(S,a,!0):w.processY(-S,a,!1,!0);else if(!i&&u)D===0||D===3?e.processY(-S,s,!1,!0):e.processY(S,s,!0);else{var I=S*.5;D===0?g?(w.processY(S,0,!0),e.processY(0,null,!1,!0)):m?(w.processY(I,0,!0),e.processY(-I,0,!1,!0)):(w.processY(I,e.velocity.y,!0),e.processY(-I,null,!1,!0)):D===1?l?(w.processY(0,null,!1,!0),e.processY(S,0,!0)):d?(w.processY(-I,0,!1,!0),e.processY(I,0,!0)):(w.processY(-I,null,!1,!0),e.processY(I,w.velocity.y,!0)):D===2?g?(w.processY(-S,0,!1,!0),e.processY(0,null,!0)):f?(w.processY(-I,0,!1,!0),e.processY(I,0,!0)):(w.processY(-I,e.velocity.y,!1,!0),e.processY(I,null,!0)):D===3&&(l?(w.processY(0,null,!0),e.processY(-S,0,!1,!0)):o?(w.processY(I,0,!0),e.processY(-I,0,!1,!0)):(w.processY(I,e.velocity.y,!0),e.processY(-I,null,!1,!0)))}return!0},P=function(D){if(D===1?e.velocity.y=0:p?e.processY(S,s,!0):e.processY(-S,s,!1,!0),w.moves){var I=w.directControl?w.x-w.autoFrame.x:w.x-w.prev.x;e.x+=I*w.friction.x,e._dx=e.x-e.prev.x}},O=function(D){if(D===2?w.velocity.y=0:y?w.processY(S,a,!0):w.processY(-S,a,!1,!0),e.moves){var I=e.directControl?e.x-e.autoFrame.x:e.x-e.prev.x;w.x+=I*e.friction.x,w._dx=w.x-w.prev.x}};h.exports={BlockCheck:A,Check:M,Set:C,Run:L,RunImmovableBody1:P,RunImmovableBody2:O}},14087:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(64897),u=e(3017),n=function(r,a,s,o,d){d===void 0&&(d=i(r,a,s,o));var l=r.immovable,f=a.immovable;if(s||d===0||l&&f||r.customSeparateX||a.customSeparateX)return d!==0||r.embedded&&a.embedded;var m=u.Set(r,a,d);return!l&&!f?m>0?!0:u.Check():(l?u.RunImmovableBody1(m):f&&u.RunImmovableBody2(m),!0)};h.exports=n},89936:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45170),u=e(47962),n=function(r,a,s,o,d){d===void 0&&(d=i(r,a,s,o));var l=r.immovable,f=a.immovable;if(s||d===0||l&&f||r.customSeparateY||a.customSeparateY)return d!==0||r.embedded&&a.embedded;var m=u.Set(r,a,d);return!l&&!f?m>0?!0:u.Check():(l?u.RunImmovableBody1(m):f&&u.RunImmovableBody2(m),!0)};h.exports=n},95829:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i===void 0&&(i={}),i.none=e,i.up=!1,i.down=!1,i.left=!1,i.right=!1,e||(i.up=!0,i.down=!0,i.left=!0,i.right=!0),i};h.exports=w},72624:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87902),u=e(83419),n=e(78389),r=e(37747),a=e(37303),s=e(95829),o=e(26099),d=new u({Mixins:[n],initialize:function(f,m){var g=64,p=64,y={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},S=m!==void 0;S&&m.displayWidth&&(g=m.displayWidth,p=m.displayHeight),S||(m=y),this.world=f,this.gameObject=S?m:void 0,this.isBody=!0,this.debugShowBody=f.defaults.debugShowStaticBody,this.debugBodyColor=f.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(m.x-g*m.originX,m.y-p*m.originY),this.width=g,this.height=p,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=o.ZERO,this.allowGravity=!1,this.gravity=o.ZERO,this.bounce=o.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=s(!1),this.touching=s(!0),this.wasTouching=s(!0),this.blocked=s(!0),this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(l,f){return l&&l!==this.gameObject&&(this.gameObject.body=null,l.body=this,this.gameObject=l),f&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var l=this.gameObject;return l.getTopLeft(this.position),this.width=l.displayWidth,this.height=l.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(l,f){return f===void 0&&(f=l),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(l,f),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(l,f,m){m===void 0&&(m=!0);var g=this.gameObject;if(g&&g.frame&&(l||(l=g.frame.realWidth),f||(f=g.frame.realHeight)),this.world.staticTree.remove(this),this.width=l,this.height=f,this.halfWidth=Math.floor(l/2),this.halfHeight=Math.floor(f/2),m&&g&&g.getCenter){var p=g.displayWidth/2,y=g.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(p-this.halfWidth,y-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(l,f,m){return f===void 0&&(f=this.offset.x),m===void 0&&(m=this.offset.y),l>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=l,this.width=l*2,this.height=l*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(f,m),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(l,f){var m=this.gameObject;l===void 0&&(l=m.x),f===void 0&&(f=m.y),this.world.staticTree.remove(this),m.setPosition(l,f),m.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(l){return l.x=this.x,l.y=this.y,l.right=this.right,l.bottom=this.bottom,l},hitTest:function(l,f){return this.isCircle?i(this,l,f):a(this,l,f)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(l){var f=this.position,m=f.x+this.halfWidth,g=f.y+this.halfHeight;this.debugShowBody&&(l.lineStyle(l.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?l.strokeCircle(m,g,this.width/2):l.strokeRect(f.x,f.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(l){return l<=0&&(l=.1),this.mass=l,this},x:{get:function(){return this.position.x},set:function(l){this.world.staticTree.remove(this),this.position.x=l,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(l){this.world.staticTree.remove(this),this.position.y=l,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});h.exports=d},71464:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(13759),u=e(83419),n=e(78389),r=e(37747),a=e(95540),s=e(26479),o=e(41212),d=new u({Extends:s,Mixins:[n],initialize:function(f,m,g,p){!g&&!p?p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:i}:o(g)?(p=g,g=null,p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler,p.createMultipleCallback=this.createMultipleCallbackHandler,p.classType=a(p,"classType",i)):Array.isArray(g)&&o(g[0])?(p=g,g=null,p.forEach(function(y){y.internalCreateCallback=this.createCallbackHandler,y.internalRemoveCallback=this.removeCallbackHandler,y.createMultipleCallback=this.createMultipleCallbackHandler,y.classType=a(y,"classType",i)})):p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=f,this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,s.call(this,m,g,p),this.type="StaticPhysicsGroup"},createCallbackHandler:function(l){l.body||this.world.enableBody(l,r.STATIC_BODY)},removeCallbackHandler:function(l){l.body&&this.world.disableBody(l)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var l=this.children.entries,f=0;f<l.length;f++)l[f].body.reset();return this}});h.exports=d},82248:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(55495),u=e(37742),n=e(45319),r=e(83419),a=e(79342),s=e(37747),o=e(20339),d=e(52816),l=e(50792),f=e(63012),m=e(43855),g=e(5470),p=e(94977),y=e(64897),S=e(45170),C=e(96523),A=e(35154),M=e(36383),L=e(25774),P=e(96602),O=e(87841),D=e(59542),I=e(40012),F=e(14087),H=e(89936),k=e(35072),W=e(72624),$=e(2483),K=e(61340),Z=e(26099),X=e(15994),j=new r({Extends:l,initialize:function(U,J){l.call(this),this.scene=U,this.bodies=new k,this.staticBodies=new k,this.pendingDestroy=new k,this.colliders=new L,this.gravity=new Z(A(J,"gravity.x",0),A(J,"gravity.y",0)),this.bounds=new O(A(J,"x",0),A(J,"y",0),A(J,"width",U.sys.scale.width),A(J,"height",U.sys.scale.height)),this.checkCollision={up:A(J,"checkCollision.up",!0),down:A(J,"checkCollision.down",!0),left:A(J,"checkCollision.left",!0),right:A(J,"checkCollision.right",!0)},this.fps=A(J,"fps",60),this.fixedStep=A(J,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=A(J,"timeScale",1),this.OVERLAP_BIAS=A(J,"overlapBias",4),this.TILE_BIAS=A(J,"tileBias",16),this.forceX=A(J,"forceX",!1),this.isPaused=A(J,"isPaused",!1),this._total=0,this.drawDebug=A(J,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:A(J,"debugShowBody",!0),debugShowStaticBody:A(J,"debugShowStaticBody",!0),debugShowVelocity:A(J,"debugShowVelocity",!0),bodyDebugColor:A(J,"debugBodyColor",16711935),staticBodyDebugColor:A(J,"debugStaticBodyColor",255),velocityDebugColor:A(J,"debugVelocityColor",65280)},this.maxEntries=A(J,"maxEntries",16),this.useTree=A(J,"useTree",!0),this.tree=new D(this.maxEntries),this.staticTree=new D(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new K,this._tempMatrix2=new K,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(Y,U){U===void 0&&(U=s.DYNAMIC_BODY),Array.isArray(Y)||(Y=[Y]);for(var J=0;J<Y.length;J++){var q=Y[J];if(q.isParent)for(var _=q.getChildren(),te=0;te<_.length;te++){var se=_[te];se.isParent?this.enable(se,U):this.enableBody(se,U)}else this.enableBody(q,U)}},enableBody:function(Y,U){return U===void 0&&(U=s.DYNAMIC_BODY),Y.hasTransformComponent&&(Y.body||(U===s.DYNAMIC_BODY?Y.body=new u(this,Y):U===s.STATIC_BODY&&(Y.body=new W(this,Y))),this.add(Y.body)),Y},add:function(Y){return Y.physicsType===s.DYNAMIC_BODY?this.bodies.set(Y):Y.physicsType===s.STATIC_BODY&&(this.staticBodies.set(Y),this.staticTree.insert(Y)),Y.enable=!0,Y},disable:function(Y){Array.isArray(Y)||(Y=[Y]);for(var U=0;U<Y.length;U++){var J=Y[U];if(J.isParent)for(var q=J.getChildren(),_=0;_<q.length;_++){var te=q[_];te.isParent?this.disable(te):this.disableBody(te.body)}else this.disableBody(J.body)}},disableBody:function(Y){this.remove(Y),Y.enable=!1},remove:function(Y){Y.physicsType===s.DYNAMIC_BODY?(this.tree.remove(Y),this.bodies.delete(Y)):Y.physicsType===s.STATIC_BODY&&(this.staticBodies.delete(Y),this.staticTree.remove(Y))},createDebugGraphic:function(){var Y=this.scene.sys.add.graphics({x:0,y:0});return Y.setDepth(Number.MAX_VALUE),this.debugGraphic=Y,this.drawDebug=!0,Y},setBounds:function(Y,U,J,q,_,te,se,ne){return this.bounds.setTo(Y,U,J,q),_!==void 0&&this.setBoundsCollision(_,te,se,ne),this},setBoundsCollision:function(Y,U,J,q){return Y===void 0&&(Y=!0),U===void 0&&(U=!0),J===void 0&&(J=!0),q===void 0&&(q=!0),this.checkCollision.left=Y,this.checkCollision.right=U,this.checkCollision.up=J,this.checkCollision.down=q,this},pause:function(){return this.isPaused=!0,this.emit(f.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(f.RESUME),this},addCollider:function(Y,U,J,q,_){J===void 0&&(J=null),q===void 0&&(q=null),_===void 0&&(_=J);var te=new a(this,!1,Y,U,J,q,_);return this.colliders.add(te),te},addOverlap:function(Y,U,J,q,_){J===void 0&&(J=null),q===void 0&&(q=null),_===void 0&&(_=J);var te=new a(this,!0,Y,U,J,q,_);return this.colliders.add(te),te},removeCollider:function(Y){return this.colliders.remove(Y),this},setFPS:function(Y){return this.fps=Y,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(Y,U){if(!(this.isPaused||this.bodies.size===0)){var J,q=this._frameTime,_=this._frameTimeMS*this.timeScale;this._elapsed+=U;var te,se=this.bodies.entries,ne=this._elapsed>=_;for(this.fixedStep||(q=U*.001,ne=!0,this._elapsed=0),J=0;J<se.length;J++)te=se[J],te.enable&&te.preUpdate(ne,q);if(ne){this._elapsed-=_,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(se));var he=this.colliders.update();for(J=0;J<he.length;J++){var le=he[J];le.active&&le.update()}this.emit(f.WORLD_STEP,q)}for(;this._elapsed>=_;)this._elapsed-=_,this.step(q)}},step:function(Y){var U,J,q=this.bodies.entries,_=q.length;for(U=0;U<_;U++)J=q[U],J.enable&&J.update(Y);this.useTree&&(this.tree.clear(),this.tree.load(q));var te=this.colliders.update();for(U=0;U<te.length;U++){var se=te[U];se.active&&se.update()}this.emit(f.WORLD_STEP,Y),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var Y,U,J=this.bodies.entries,q=J.length,_=this.bodies,te=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,Y=0;Y<q;Y++)U=J[Y],U.enable&&U.postUpdate();if(this.drawDebug){var se=this.debugGraphic;for(se.clear(),Y=0;Y<q;Y++)U=J[Y],U.willDrawDebug()&&U.drawDebug(se);for(J=te.entries,q=J.length,Y=0;Y<q;Y++)U=J[Y],U.willDrawDebug()&&U.drawDebug(se)}var ne=this.pendingDestroy;if(ne.size>0){var he=this.tree,le=this.staticTree;for(J=ne.entries,q=J.length,Y=0;Y<q;Y++)U=J[Y],U.physicsType===s.DYNAMIC_BODY?(he.remove(U),_.delete(U)):U.physicsType===s.STATIC_BODY&&(le.remove(U),te.delete(U)),U.world=void 0,U.gameObject=void 0;ne.clear()}},updateMotion:function(Y,U){Y.allowRotation&&this.computeAngularVelocity(Y,U),this.computeVelocity(Y,U)},computeAngularVelocity:function(Y,U){var J=Y.angularVelocity,q=Y.angularAcceleration,_=Y.angularDrag,te=Y.maxAngular;q?J+=q*U:Y.allowDrag&&_&&(_*=U,g(J-_,0,.1)?J-=_:p(J+_,0,.1)?J+=_:J=0),J=n(J,-te,te);var se=J-Y.angularVelocity;Y.angularVelocity+=se,Y.rotation+=Y.angularVelocity*U},computeVelocity:function(Y,U){var J=Y.velocity.x,q=Y.acceleration.x,_=Y.drag.x,te=Y.maxVelocity.x,se=Y.velocity.y,ne=Y.acceleration.y,he=Y.drag.y,le=Y.maxVelocity.y,ge=Y.speed,re=Y.maxSpeed,fe=Y.allowDrag,Ae=Y.useDamping;Y.allowGravity&&(J+=(this.gravity.x+Y.gravity.x)*U,se+=(this.gravity.y+Y.gravity.y)*U),q?J+=q*U:fe&&_&&(Ae?(_=Math.pow(_,U),J*=_,ge=Math.sqrt(J*J+se*se),m(ge,0,.001)&&(J=0)):(_*=U,g(J-_,0,.01)?J-=_:p(J+_,0,.01)?J+=_:J=0)),ne?se+=ne*U:fe&&he&&(Ae?(he=Math.pow(he,U),se*=he,ge=Math.sqrt(J*J+se*se),m(ge,0,.001)&&(se=0)):(he*=U,g(se-he,0,.01)?se-=he:p(se+he,0,.01)?se+=he:se=0)),J=n(J,-te,te),se=n(se,-le,le),Y.velocity.set(J,se),re>-1&&Y.velocity.length()>re&&(Y.velocity.normalize().scale(re),ge=re),Y.speed=ge},separate:function(Y,U,J,q,_){var te,se,ne=!1,he=!0;if(!Y.enable||!U.enable||Y.checkCollision.none||U.checkCollision.none||!this.intersects(Y,U)||J&&J.call(q,Y.gameObject||Y,U.gameObject||U)===!1)return ne;if(Y.isCircle||U.isCircle){var le=this.separateCircle(Y,U,_);le.result?(ne=!0,he=!1):(te=le.x,se=le.y,he=!0)}if(he){var ge=!1,re=!1,fe=this.OVERLAP_BIAS;_?(ge=F(Y,U,_,fe,te),re=H(Y,U,_,fe,se)):this.forceX||Math.abs(this.gravity.y+Y.gravity.y)<Math.abs(this.gravity.x+Y.gravity.x)?(ge=F(Y,U,_,fe,te),this.intersects(Y,U)&&(re=H(Y,U,_,fe,se))):(re=H(Y,U,_,fe,se),this.intersects(Y,U)&&(ge=F(Y,U,_,fe,te))),ne=ge||re}return ne&&(_?(Y.onOverlap||U.onOverlap)&&this.emit(f.OVERLAP,Y.gameObject,U.gameObject,Y,U):(Y.onCollide||U.onCollide)&&this.emit(f.COLLIDE,Y.gameObject,U.gameObject,Y,U)),ne},separateCircle:function(Y,U,J){y(Y,U,!1,0),S(Y,U,!1,0);var q=Y.isCircle,_=U.isCircle,te=Y.center,se=U.center,ne=Y.immovable,he=U.immovable,le=Y.velocity,ge=U.velocity,re=0,fe=!0;if(q!==_){fe=!1;var Ae=te.x,Ie=te.y,Ne=Y.halfWidth,Fe=U.position.x,Se=U.position.y,Oe=U.right,Be=U.bottom;_&&(Ae=se.x,Ie=se.y,Ne=U.halfWidth,Fe=Y.position.x,Se=Y.position.y,Oe=Y.right,Be=Y.bottom),Ie<Se?Ae<Fe?re=o(Ae,Ie,Fe,Se)-Ne:Ae>Oe&&(re=o(Ae,Ie,Oe,Se)-Ne):Ie>Be&&(Ae<Fe?re=o(Ae,Ie,Fe,Be)-Ne:Ae>Oe&&(re=o(Ae,Ie,Oe,Be)-Ne)),re*=-1}else re=Y.halfWidth+U.halfWidth-d(te,se);Y.overlapR=re,U.overlapR=re;var Pt=i(te,se),Gt=(re+M.EPSILON)*Math.cos(Pt),si=(re+M.EPSILON)*Math.sin(Pt),It={overlap:re,result:!1,x:Gt,y:si};if(J&&(!fe||fe&&re!==0))return It.result=!0,It;if(!fe&&re===0||ne&&he||Y.customSeparateX||U.customSeparateX)return It.x=void 0,It.y=void 0,It;var Ht=!Y.pushable&&!U.pushable;if(fe){var hi=te.x-se.x,Ai=te.y-se.y,Ot=Math.sqrt(Math.pow(hi,2)+Math.pow(Ai,2)),qt=(se.x-te.x)/Ot||0,jt=(se.y-te.y)/Ot||0,Si=2*(le.x*qt+le.y*jt-ge.x*qt-ge.y*jt)/(Y.mass+U.mass);(ne||he||!Y.pushable||!U.pushable)&&(Si*=2),!ne&&Y.pushable&&(le.x=le.x-Si/Y.mass*qt,le.y=le.y-Si/Y.mass*jt,le.multiply(Y.bounce)),!he&&U.pushable&&(ge.x=ge.x+Si/U.mass*qt,ge.y=ge.y+Si/U.mass*jt,ge.multiply(U.bounce)),!ne&&!he&&(Gt*=.5,si*=.5),!ne||Y.pushable||Ht?(Y.x-=Gt,Y.y-=si,Y.updateCenter()):(!he||U.pushable||Ht)&&(U.x+=Gt,U.y+=si,U.updateCenter()),It.result=!0}else!ne||Y.pushable||Ht?(Y.x-=Gt,Y.y-=si,Y.updateCenter()):(!he||U.pushable||Ht)&&(U.x+=Gt,U.y+=si,U.updateCenter()),It.x=void 0,It.y=void 0;return It},intersects:function(Y,U){return Y===U?!1:!Y.isCircle&&!U.isCircle?!(Y.right<=U.left||Y.bottom<=U.top||Y.left>=U.right||Y.top>=U.bottom):Y.isCircle?U.isCircle?d(Y.center,U.center)<=Y.halfWidth+U.halfWidth:this.circleBodyIntersects(Y,U):this.circleBodyIntersects(U,Y)},circleBodyIntersects:function(Y,U){var J=n(Y.center.x,U.left,U.right),q=n(Y.center.y,U.top,U.bottom),_=(Y.center.x-J)*(Y.center.x-J),te=(Y.center.y-q)*(Y.center.y-q);return _+te<=Y.halfWidth*Y.halfWidth},overlap:function(Y,U,J,q,_){return J===void 0&&(J=null),q===void 0&&(q=null),_===void 0&&(_=J),this.collideObjects(Y,U,J,q,_,!0)},collide:function(Y,U,J,q,_){return J===void 0&&(J=null),q===void 0&&(q=null),_===void 0&&(_=J),this.collideObjects(Y,U,J,q,_,!1)},collideObjects:function(Y,U,J,q,_,te){var se,ne;Y.isParent&&(Y.physicsType===void 0||U===void 0||Y===U)&&(Y=Y.children.entries),U&&U.isParent&&U.physicsType===void 0&&(U=U.children.entries);var he=Array.isArray(Y),le=Array.isArray(U);if(this._total=0,!he&&!le)this.collideHandler(Y,U,J,q,_,te);else if(!he&&le)for(se=0;se<U.length;se++)this.collideHandler(Y,U[se],J,q,_,te);else if(he&&!le)if(U)for(se=0;se<Y.length;se++)this.collideHandler(Y[se],U,J,q,_,te);else for(se=0;se<Y.length;se++){var ge=Y[se];for(ne=se+1;ne<Y.length;ne++)se!==ne&&this.collideHandler(ge,Y[ne],J,q,_,te)}else for(se=0;se<Y.length;se++)for(ne=0;ne<U.length;ne++)this.collideHandler(Y[se],U[ne],J,q,_,te);return this._total>0},collideHandler:function(Y,U,J,q,_,te){if(U===void 0&&Y.isParent)return this.collideGroupVsGroup(Y,Y,J,q,_,te);if(!Y||!U)return!1;if(Y.body||Y.isBody){if(U.body||U.isBody)return this.collideSpriteVsSprite(Y,U,J,q,_,te);if(U.isParent)return this.collideSpriteVsGroup(Y,U,J,q,_,te);if(U.isTilemap)return this.collideSpriteVsTilemapLayer(Y,U,J,q,_,te)}else if(Y.isParent){if(U.body||U.isBody)return this.collideSpriteVsGroup(U,Y,J,q,_,te);if(U.isParent)return this.collideGroupVsGroup(Y,U,J,q,_,te);if(U.isTilemap)return this.collideGroupVsTilemapLayer(Y,U,J,q,_,te)}else if(Y.isTilemap){if(U.body||U.isBody)return this.collideSpriteVsTilemapLayer(U,Y,J,q,_,te);if(U.isParent)return this.collideGroupVsTilemapLayer(U,Y,J,q,_,te)}},canCollide:function(Y,U){return Y&&U&&(Y.collisionMask&U.collisionCategory)!==0&&(U.collisionMask&Y.collisionCategory)!==0},collideSpriteVsSprite:function(Y,U,J,q,_,te){var se=Y.isBody?Y:Y.body,ne=U.isBody?U:U.body;return this.canCollide(se,ne)?(this.separate(se,ne,q,_,te)&&(J&&J.call(_,Y,U),this._total++),!0):!1},collideSpriteVsGroup:function(Y,U,J,q,_,te){var se=Y.isBody?Y:Y.body;if(!(U.getLength()===0||!se||!se.enable||se.checkCollision.none||!this.canCollide(se,U))){var ne,he,le;if(this.useTree||U.physicsType===s.STATIC_BODY){var ge=this.treeMinMax;ge.minX=se.left,ge.minY=se.top,ge.maxX=se.right,ge.maxY=se.bottom;var re=U.physicsType===s.DYNAMIC_BODY?this.tree.search(ge):this.staticTree.search(ge);for(he=re.length,ne=0;ne<he;ne++)le=re[ne],!(se===le||!le.enable||le.checkCollision.none||!U.contains(le.gameObject))&&this.separate(se,le,q,_,te)&&(J&&J.call(_,se.gameObject,le.gameObject),this._total++)}else{var fe=U.getChildren(),Ae=U.children.entries.indexOf(Y);for(he=fe.length,ne=0;ne<he;ne++)le=fe[ne].body,!(!le||ne===Ae||!le.enable)&&this.separate(se,le,q,_,te)&&(J&&J.call(_,se.gameObject,le.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(Y,U,J,q,_,te){if(!this.canCollide(Y,U))return!1;var se=Y.getChildren();if(se.length===0)return!1;for(var ne=!1,he=0;he<se.length;he++)(se[he].body||se[he].isBody)&&this.collideSpriteVsTilemapLayer(se[he],U,J,q,_,te)&&(ne=!0);return ne},collideTiles:function(Y,U,J,q,_){return U.length===0||Y.body&&!Y.body.enable||Y.isBody&&!Y.enable?!1:this.collideSpriteVsTilesHandler(Y,U,J,q,_,!1,!1)},overlapTiles:function(Y,U,J,q,_){return U.length===0||Y.body&&!Y.body.enable||Y.isBody&&!Y.enable?!1:this.collideSpriteVsTilesHandler(Y,U,J,q,_,!0,!1)},collideSpriteVsTilemapLayer:function(Y,U,J,q,_,te){var se=Y.isBody?Y:Y.body;if(!se.enable||se.checkCollision.none||!this.canCollide(se,U))return!1;var ne=U.layer,he=se.x-ne.tileWidth*U.scaleX,le=se.y-ne.tileHeight*U.scaleY,ge=se.width+ne.tileWidth*U.scaleX,re=se.height+ne.tileHeight*U.scaleY,fe=te?null:this.tileFilterOptions,Ae=C(he,le,ge,re,fe,U.scene.cameras.main,U.layer);return Ae.length===0?!1:this.collideSpriteVsTilesHandler(Y,Ae,J,q,_,te,!0)},collideSpriteVsTilesHandler:function(Y,U,J,q,_,te,se){for(var ne=Y.isBody?Y:Y.body,he,le={left:0,right:0,top:0,bottom:0},ge,re=!1,fe=0;fe<U.length;fe++){he=U[fe],ge=he.tilemapLayer;var Ae=ge.tileToWorldXY(he.x,he.y);le.left=Ae.x,le.top=Ae.y,le.right=le.left+he.width*ge.scaleX,le.bottom=le.top+he.height*ge.scaleY,$(le,ne)&&(!q||q.call(_,Y,he))&&P(he,Y)&&(te||I(fe,ne,he,le,ge,this.TILE_BIAS,se))&&(this._total++,re=!0,J&&J.call(_,Y,he),te&&ne.onOverlap?this.emit(f.TILE_OVERLAP,Y,he,ne):ne.onCollide&&this.emit(f.TILE_COLLIDE,Y,he,ne))}return re},collideGroupVsGroup:function(Y,U,J,q,_,te){if(!(Y.getLength()===0||U.getLength()===0||!this.canCollide(Y,U)))for(var se=Y.getChildren(),ne=0;ne<se.length;ne++)this.collideSpriteVsGroup(se[ne],U,J,q,_,te)},wrap:function(Y,U){Y.body?this.wrapObject(Y,U):Y.getChildren?this.wrapArray(Y.getChildren(),U):Array.isArray(Y)?this.wrapArray(Y,U):this.wrapObject(Y,U)},wrapArray:function(Y,U){for(var J=0;J<Y.length;J++)this.wrapObject(Y[J],U)},wrapObject:function(Y,U){U===void 0&&(U=0),Y.x=X(Y.x,this.bounds.left-U,this.bounds.right+U),Y.y=X(Y.y,this.bounds.top-U,this.bounds.bottom+U)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});h.exports=j},1093:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setAcceleration:function(e,i){return this.body.acceleration.set(e,i),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};h.exports=w},59023:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};h.exports=w},62069:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setBounce:function(e,i){return this.body.bounce.set(e,i),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,i,u,n){return this.body.setCollideWorldBounds(e,i,u,n),this}};h.exports=w},78389:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(79599),u={setCollisionCategory:function(n){var r=this.body?this.body:this;return r.collisionCategory=n,this},willCollideWith:function(n){var r=this.body?this.body:this;return(r.collisionMask&n)!==0},addCollidesWith:function(n){var r=this.body?this.body:this;return r.collisionMask=r.collisionMask|n,this},removeCollidesWith:function(n){var r=this.body?this.body:this;return r.collisionMask=r.collisionMask&~n,this},setCollidesWith:function(n){var r=this.body?this.body:this;return r.collisionMask=i(n),this},resetCollisionCategory:function(){var n=this.body?this.body:this;return n.collisionCategory=1,n.collisionMask=2147483647,this}};h.exports=u},87118:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setDebug:function(e,i,u){return this.debugShowBody=e,this.debugShowVelocity=i,this.debugBodyColor=u,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};h.exports=w},52819:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setDrag:function(e,i){return this.body.drag.set(e,i),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};h.exports=w},4074:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setDirectControl:function(e){return this.body.setDirectControl(e),this},enableBody:function(e,i,u,n,r){return e&&this.body.reset(i,u),n&&(this.body.gameObject.active=!0),r&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,i){return e===void 0&&(e=!1),i===void 0&&(i=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),i&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};h.exports=w},40831:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setFriction:function(e,i){return this.body.friction.set(e,i),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};h.exports=w},26775:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setGravity:function(e,i){return this.body.gravity.set(e,i),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};h.exports=w},9437:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};h.exports=w},30621:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setMass:function(e){return this.body.mass=e,this}};h.exports=w},72441:(h,w,e)=>{var i=e(47956),u=e(96503),n=e(2044),r=e(81491),a=function(s,o,d,l,f,m){var g=i(s,o-l,d-l,2*l,2*l,f,m);if(g.length===0)return g;for(var p=new u(o,d,l),y=new u,S=[],C=0;C<g.length;C++){var A=g[C];A.isCircle?(y.setTo(A.center.x,A.center.y,A.halfWidth),n(p,y)&&S.push(A)):r(p,A)&&S.push(A)}return S};h.exports=a},47956:h=>{var w=function(e,i,u,n,r,a,s){a===void 0&&(a=!0),s===void 0&&(s=!1);var o=[],d=[],l=e.treeMinMax;if(l.minX=i,l.minY=u,l.maxX=i+n,l.maxY=u+r,s&&(d=e.staticTree.search(l)),a&&e.useTree)o=e.tree.search(l);else if(a){var f=e.bodies,m={position:{x:i,y:u},left:i,top:u,right:i+n,bottom:u+r,isCircle:!1},g=e.intersects;f.iterate(function(p){g(p,m)&&o.push(p)})}return d.concat(o)};h.exports=w},62121:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};h.exports=w},29384:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setOffset:function(e,i){return this.body.setOffset(e,i),this},setSize:function(e,i,u){return this.body.setSize(e,i,u),this},setBodySize:function(e,i,u){return this.body.setSize(e,i,u),this},setCircle:function(e,i,u){return this.body.setCircle(e,i,u),this}};h.exports=w},15098:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setVelocity:function(e,i){return this.body.setVelocity(e,i),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,i){return this.body.maxVelocity.set(e,i),this}};h.exports=w},92209:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Acceleration:e(1093),Angular:e(59023),Bounce:e(62069),Collision:e(78389),Debug:e(87118),Drag:e(52819),Enable:e(4074),Friction:e(40831),Gravity:e(26775),Immovable:e(9437),Mass:e(30621),OverlapCirc:e(72441),OverlapRect:e(47956),Pushable:e(62121),Size:e(29384),Velocity:e(15098)}},37747:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};h.exports=w},20009:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="collide"},36768:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="overlap"},60473:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},89954:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},61804:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="tilecollide"},7161:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="tileoverlap"},34689:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="worldbounds"},16006:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="worldstep"},63012:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={COLLIDE:e(20009),OVERLAP:e(36768),PAUSE:e(60473),RESUME:e(89954),TILE_COLLIDE:e(61804),TILE_OVERLAP:e(7161),WORLD_BOUNDS:e(34689),WORLD_STEP:e(16006)}},27064:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37747),u=e(79291),n={ArcadePhysics:e(86689),Body:e(37742),Collider:e(79342),Components:e(92209),Events:e(63012),Factory:e(66022),GetCollidesWith:e(79599),GetOverlapX:e(64897),GetOverlapY:e(45170),SeparateX:e(14087),SeparateY:e(89936),Group:e(60758),Image:e(71289),Sprite:e(13759),StaticBody:e(72624),StaticGroup:e(71464),Tilemap:e(55173),World:e(82248)};n=u(!1,n,i),h.exports=n},96602:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,i,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,i,e):!0};h.exports=w},36294:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i<0?(e.blocked.none=!1,e.blocked.left=!0):i>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=i,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};h.exports=w},67013:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i<0?(e.blocked.none=!1,e.blocked.up=!0):i>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=i,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};h.exports=w},40012:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(21329),u=e(53442),n=e(2483),r=function(a,s,o,d,l,f,m){var g=d.left,p=d.top,y=d.right,S=d.bottom,C=o.faceLeft||o.faceRight,A=o.faceTop||o.faceBottom;if(m||(C=!0,A=!0),!C&&!A)return!1;var M=0,L=0,P=0,O=1;if(s.deltaAbsX()>s.deltaAbsY()?P=-1:s.deltaAbsX()<s.deltaAbsY()&&(O=-1),s.deltaX()!==0&&s.deltaY()!==0&&C&&A&&(P=Math.min(Math.abs(s.position.x-y),Math.abs(s.right-g)),O=Math.min(Math.abs(s.position.y-S),Math.abs(s.bottom-p))),P<O){if(C&&(M=i(s,o,g,y,f,m),M!==0&&!n(d,s)))return!0;A&&(L=u(s,o,p,S,f,m))}else{if(A&&(L=u(s,o,p,S,f,m),L!==0&&!n(d,s)))return!0;C&&(M=i(s,o,g,y,f,m))}return M!==0||L!==0};h.exports=r},21329:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36294),u=function(n,r,a,s,o,d){var l=0,f=r.faceLeft,m=r.faceRight,g=r.collideLeft,p=r.collideRight;return d||(f=!0,m=!0,g=!0,p=!0),n.deltaX()<0&&p&&n.checkCollision.left?m&&n.x<s&&(l=n.x-s,l<-o&&(l=0)):n.deltaX()>0&&g&&n.checkCollision.right&&f&&n.right>a&&(l=n.right-a,l>o&&(l=0)),l!==0&&(n.customSeparateX?n.overlapX=l:i(n,l)),l};h.exports=u},53442:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(67013),u=function(n,r,a,s,o,d){var l=0,f=r.faceTop,m=r.faceBottom,g=r.collideUp,p=r.collideDown;return d||(f=!0,m=!0,g=!0,p=!0),n.deltaY()<0&&p&&n.checkCollision.up?m&&n.y<s&&(l=n.y-s,l<-o&&(l=0)):n.deltaY()>0&&g&&n.checkCollision.down&&f&&n.bottom>a&&(l=n.bottom-a,l>o&&(l=0)),l!==0&&(n.customSeparateY?n.overlapY=l:i(n,l)),l};h.exports=u},2483:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return!(i.right<=e.left||i.bottom<=e.top||i.position.x>=e.right||i.position.y>=e.bottom)};h.exports=w},55173:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={ProcessTileCallbacks:e(96602),ProcessTileSeparationX:e(36294),ProcessTileSeparationY:e(67013),SeparateTile:e(40012),TileCheckX:e(21329),TileCheckY:e(53442),TileIntersectsBody:e(2483)};h.exports=i},44563:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Arcade:e(27064),Matter:e(3875)}},68174:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(26099),n=new i({initialize:function(){this.boundsCenter=new u,this.centerDiff=new u},parseBody:function(r){if(r=r.hasOwnProperty("body")?r.body:r,!r.hasOwnProperty("bounds")||!r.hasOwnProperty("centerOfMass"))return!1;var a=this.boundsCenter,s=this.centerDiff,o=r.bounds.max.x-r.bounds.min.x,d=r.bounds.max.y-r.bounds.min.y,l=o*r.centerOfMass.x,f=d*r.centerOfMass.y;return a.set(o/2,d/2),s.set(l-a.x,f-a.y),!0},getTopLeft:function(r,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(r)){var o=this.boundsCenter,d=this.centerDiff;return new u(a+o.x+d.x,s+o.y+d.y)}return!1},getTopCenter:function(r,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(r)){var o=this.boundsCenter,d=this.centerDiff;return new u(a+d.x,s+o.y+d.y)}return!1},getTopRight:function(r,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(r)){var o=this.boundsCenter,d=this.centerDiff;return new u(a-(o.x-d.x),s+o.y+d.y)}return!1},getLeftCenter:function(r,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(r)){var o=this.boundsCenter,d=this.centerDiff;return new u(a+o.x+d.x,s+d.y)}return!1},getCenter:function(r,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(r)){var o=this.centerDiff;return new u(a+o.x,s+o.y)}return!1},getRightCenter:function(r,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(r)){var o=this.boundsCenter,d=this.centerDiff;return new u(a-(o.x-d.x),s+d.y)}return!1},getBottomLeft:function(r,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(r)){var o=this.boundsCenter,d=this.centerDiff;return new u(a+o.x+d.x,s-(o.y-d.y))}return!1},getBottomCenter:function(r,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(r)){var o=this.boundsCenter,d=this.centerDiff;return new u(a+d.x,s-(o.y-d.y))}return!1},getBottomRight:function(r,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(r)){var o=this.boundsCenter,d=this.centerDiff;return new u(a-(o.x-d.x),s-(o.y-d.y))}return!1}});h.exports=n},19933:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(6790);i.Body=e(22562),i.Composite=e(69351),i.World=e(4372),i.Collision=e(52284),i.Detector=e(81388),i.Pairs=e(99561),i.Pair=e(4506),i.Query=e(73296),i.Resolver=e(66272),i.Constraint=e(48140),i.Common=e(53402),i.Engine=e(48413),i.Events=e(35810),i.Sleeping=e(53614),i.Plugin=e(73832),i.Bodies=e(66280),i.Composites=e(74116),i.Axes=e(66615),i.Bounds=e(15647),i.Svg=e(74058),i.Vector=e(31725),i.Vertices=e(41598),i.World.add=i.Composite.add,i.World.remove=i.Composite.remove,i.World.addComposite=i.Composite.addComposite,i.World.addBody=i.Composite.addBody,i.World.addConstraint=i.Composite.addConstraint,i.World.clear=i.Composite.clear,h.exports=i},28137:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66280),u=e(83419),n=e(74116),r=e(48140),a=e(74058),s=e(75803),o=e(23181),d=e(34803),l=e(73834),f=e(19496),m=e(85791),g=e(98713),p=e(41598),y=new u({initialize:function(C){this.world=C,this.scene=C.scene,this.sys=C.scene.sys},rectangle:function(S,C,A,M,L){var P=i.rectangle(S,C,A,M,L);return this.world.add(P),P},trapezoid:function(S,C,A,M,L,P){var O=i.trapezoid(S,C,A,M,L,P);return this.world.add(O),O},circle:function(S,C,A,M,L){var P=i.circle(S,C,A,M,L);return this.world.add(P),P},polygon:function(S,C,A,M,L){var P=i.polygon(S,C,A,M,L);return this.world.add(P),P},fromVertices:function(S,C,A,M,L,P,O){typeof A=="string"&&(A=p.fromPath(A));var D=i.fromVertices(S,C,A,M,L,P,O);return this.world.add(D),D},fromPhysicsEditor:function(S,C,A,M,L){L===void 0&&(L=!0);var P=f.parseBody(S,C,A,M);return L&&!this.world.has(P)&&this.world.add(P),P},fromSVG:function(S,C,A,M,L,P){M===void 0&&(M=1),L===void 0&&(L={}),P===void 0&&(P=!0);for(var O=A.getElementsByTagName("path"),D=[],I=0;I<O.length;I++){var F=a.pathToVertices(O[I],30);M!==1&&p.scale(F,M,M),D.push(F)}var H=i.fromVertices(S,C,D,L);return P&&this.world.add(H),H},fromJSON:function(S,C,A,M,L){M===void 0&&(M={}),L===void 0&&(L=!0);var P=m.parseBody(S,C,A,M);return P&&L&&this.world.add(P),P},imageStack:function(S,C,A,M,L,P,O,D,I){O===void 0&&(O=0),D===void 0&&(D=0),I===void 0&&(I={});var F=this.world,H=this.sys.displayList;I.addToWorld=!1;var k=n.stack(A,M,L,P,O,D,function(W,$){var K=new o(F,W,$,S,C,I);return H.add(K),K.body});return F.add(k),k},stack:function(S,C,A,M,L,P,O){var D=n.stack(S,C,A,M,L,P,O);return this.world.add(D),D},pyramid:function(S,C,A,M,L,P,O){var D=n.pyramid(S,C,A,M,L,P,O);return this.world.add(D),D},chain:function(S,C,A,M,L,P){return n.chain(S,C,A,M,L,P)},mesh:function(S,C,A,M,L){return n.mesh(S,C,A,M,L)},newtonsCradle:function(S,C,A,M,L){var P=n.newtonsCradle(S,C,A,M,L);return this.world.add(P),P},car:function(S,C,A,M,L){var P=n.car(S,C,A,M,L);return this.world.add(P),P},softBody:function(S,C,A,M,L,P,O,D,I,F){var H=n.softBody(S,C,A,M,L,P,O,D,I,F);return this.world.add(H),H},joint:function(S,C,A,M,L){return this.constraint(S,C,A,M,L)},spring:function(S,C,A,M,L){return this.constraint(S,C,A,M,L)},constraint:function(S,C,A,M,L){M===void 0&&(M=1),L===void 0&&(L={}),L.bodyA=S.type==="body"?S:S.body,L.bodyB=C.type==="body"?C:C.body,isNaN(A)||(L.length=A),L.stiffness=M;var P=r.create(L);return this.world.add(P),P},worldConstraint:function(S,C,A,M){A===void 0&&(A=1),M===void 0&&(M={}),M.bodyB=S.type==="body"?S:S.body,isNaN(C)||(M.length=C),M.stiffness=A;var L=r.create(M);return this.world.add(L),L},mouseSpring:function(S){return this.pointerConstraint(S)},pointerConstraint:function(S){S===void 0&&(S={}),S.hasOwnProperty("render")||(S.render={visible:!1});var C=new g(this.scene,this.world,S);return this.world.add(C.constraint),C},image:function(S,C,A,M,L){var P=new o(this.world,S,C,A,M,L);return this.sys.displayList.add(P),P},tileBody:function(S,C){return new l(this.world,S,C)},sprite:function(S,C,A,M,L){var P=new d(this.world,S,C,A,M,L);return this.sys.displayList.add(P),this.sys.updateList.add(P),P},gameObject:function(S,C,A){return s(this.world,S,C,A)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});h.exports=y},75803:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(31884),u=e(95540),n=e(26099);function r(s){return!!s.get&&typeof s.get=="function"||!!s.set&&typeof s.set=="function"}var a=function(s,o,d,l){d===void 0&&(d={}),l===void 0&&(l=!0);var f=o.x,m=o.y;o.body={temp:!0,position:{x:f,y:m}};var g=[i.Bounce,i.Collision,i.Force,i.Friction,i.Gravity,i.Mass,i.Sensor,i.SetBody,i.Sleep,i.Static,i.Transform,i.Velocity];if(g.forEach(function(y){for(var S in y)r(y[S])?Object.defineProperty(o,S,{get:y[S].get,set:y[S].set}):Object.defineProperty(o,S,{value:y[S]})}),o.world=s,o._tempVec2=new n(f,m),d.hasOwnProperty("type")&&d.type==="body")o.setExistingBody(d,l);else{var p=u(d,"shape",null);p||(p="rectangle"),d.addToWorld=l,o.setBody(p,d)}return o};h.exports=a},23181:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31884),n=e(95643),r=e(95540),a=e(88571),s=e(72699),o=e(26099),d=new i({Extends:a,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,s],initialize:function(f,m,g,p,y,S){n.call(this,f.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(p,y),this.setSizeToFrame(),this.setOrigin(),this.world=f,this._tempVec2=new o(m,g);var C=r(S,"shape",null);C?this.setBody(C,S):this.setRectangle(this.width,this.height,S),this.setPosition(m,g),this.initPipeline(),this.initPostPipeline(!0)}});h.exports=d},42045:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(60461),u=e(66615),n=e(66280),r=e(22562),a=e(68174),s=e(15647),o=e(83419),d=e(52284),l=e(53402),f=e(69351),m=e(74116),g=e(48140),p=e(81388),y=e(20339),S=e(28137),C=e(95540),A=e(35154),M=e(46975),L=e(4506),P=e(99561),O=e(37277),D=e(73296),I=e(66272),F=e(44594),H=e(74058),k=e(31725),W=e(41598),$=e(68243);l.setDecomp(e(55973));var K=new o({initialize:function(X){this.scene=X,this.systems=X.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=r,this.composite=f,this.collision=d,this.detector=p,this.pair=L,this.pairs=P,this.query=D,this.resolver=I,this.constraint=g,this.bodies=n,this.composites=m,this.axes=u,this.bounds=s,this.svg=H,this.vector=k,this.vertices=W,this.verts=W,this._tempVec2=k.create(),I._restingThresh=A(this.config,"restingThresh",4),I._restingThreshTangent=A(this.config,"restingThreshTangent",6),I._positionDampen=A(this.config,"positionDampen",.9),I._positionWarming=A(this.config,"positionWarming",.8),I._frictionNormalMultiplier=A(this.config,"frictionNormalMultiplier",5),X.sys.events.once(F.BOOT,this.boot,this),X.sys.events.on(F.START,this.start,this)},boot:function(){this.world=new $(this.scene,this.config),this.add=new S(this.world),this.bodyBounds=new a,this.systems.events.once(F.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new $(this.scene,this.config),this.add=new S(this.world));var Z=this.systems.events;Z.on(F.UPDATE,this.world.update,this.world),Z.on(F.POST_UPDATE,this.world.postUpdate,this.world),Z.once(F.SHUTDOWN,this.shutdown,this)},getConfig:function(){var Z=this.systems.game.config.physics,X=this.systems.settings.physics,j=M(C(X,"matter",{}),C(Z,"matter",{}));return j},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(Z,X){this.world.step(Z,X)},containsPoint:function(Z,X,j){Z=this.getMatterBodies(Z);var Y=k.create(X,j),U=D.point(Z,Y);return U.length>0},intersectPoint:function(Z,X,j){j=this.getMatterBodies(j);var Y=k.create(Z,X),U=[],J=D.point(j,Y);return J.forEach(function(q){U.indexOf(q)===-1&&U.push(q)}),U},intersectRect:function(Z,X,j,Y,U,J){U===void 0&&(U=!1),J=this.getMatterBodies(J);var q={min:{x:Z,y:X},max:{x:Z+j,y:X+Y}},_=[],te=D.region(J,q,U);return te.forEach(function(se){_.indexOf(se)===-1&&_.push(se)}),_},intersectRay:function(Z,X,j,Y,U,J){U===void 0&&(U=1),J=this.getMatterBodies(J);for(var q=[],_=D.ray(J,k.create(Z,X),k.create(j,Y),U),te=0;te<_.length;te++)q.push(_[te].body);return q},intersectBody:function(Z,X){X=this.getMatterBodies(X);for(var j=[],Y=D.collides(Z,X),U=0;U<Y.length;U++){var J=Y[U];J.bodyA===Z?j.push(J.bodyB):j.push(J.bodyA)}return j},overlap:function(Z,X,j,Y,U){j===void 0&&(j=null),Y===void 0&&(Y=null),U===void 0&&(U=j),Array.isArray(Z)||(Z=[Z]),Z=this.getMatterBodies(Z),X=this.getMatterBodies(X);for(var J=!1,q=0;q<Z.length;q++)for(var _=Z[q],te=D.collides(_,X),se=0;se<te.length;se++){var ne=te[se],he=ne.bodyA.id===_.id?ne.bodyB:ne.bodyA;if(!Y||Y.call(U,_,he,ne)){if(J=!0,j)j.call(U,_,he,ne);else if(!Y)return!0}}return J},setCollisionCategory:function(Z,X){return Z=this.getMatterBodies(Z),Z.forEach(function(j){j.collisionFilter.category=X}),this},setCollisionGroup:function(Z,X){return Z=this.getMatterBodies(Z),Z.forEach(function(j){j.collisionFilter.group=X}),this},setCollidesWith:function(Z,X){Z=this.getMatterBodies(Z);var j=0;if(!Array.isArray(X))j=X;else for(var Y=0;Y<X.length;Y++)j|=X[Y];return Z.forEach(function(U){U.collisionFilter.mask=j}),this},getMatterBodies:function(Z){if(!Z)return this.world.getAllBodies();Array.isArray(Z)||(Z=[Z]);for(var X=[],j=0;j<Z.length;j++){var Y=Z[j].hasOwnProperty("body")?Z[j].body:Z[j];X.push(Y)}return X},setVelocity:function(Z,X,j){Z=this.getMatterBodies(Z);var Y=this._tempVec2;return Y.x=X,Y.y=j,Z.forEach(function(U){r.setVelocity(U,Y)}),this},setVelocityX:function(Z,X){Z=this.getMatterBodies(Z);var j=this._tempVec2;return j.x=X,Z.forEach(function(Y){j.y=Y.velocity.y,r.setVelocity(Y,j)}),this},setVelocityY:function(Z,X){Z=this.getMatterBodies(Z);var j=this._tempVec2;return j.y=X,Z.forEach(function(Y){j.x=Y.velocity.x,r.setVelocity(Y,j)}),this},setAngularVelocity:function(Z,X){return Z=this.getMatterBodies(Z),Z.forEach(function(j){r.setAngularVelocity(j,X)}),this},applyForce:function(Z,X){Z=this.getMatterBodies(Z);var j=this._tempVec2;return Z.forEach(function(Y){j.x=Y.position.x,j.y=Y.position.y,r.applyForce(Y,j,X)}),this},applyForceFromPosition:function(Z,X,j,Y){Z=this.getMatterBodies(Z);var U=this._tempVec2;return Z.forEach(function(J){Y===void 0&&(Y=J.angle),U.x=j*Math.cos(Y),U.y=j*Math.sin(Y),r.applyForce(J,X,U)}),this},applyForceFromAngle:function(Z,X,j){Z=this.getMatterBodies(Z);var Y=this._tempVec2;return Z.forEach(function(U){j===void 0&&(j=U.angle),Y.x=X*Math.cos(j),Y.y=X*Math.sin(j),r.applyForce(U,{x:U.position.x,y:U.position.y},Y)}),this},getConstraintLength:function(Z){var X=Z.pointA.x,j=Z.pointA.y,Y=Z.pointB.x,U=Z.pointB.y;return Z.bodyA&&(X+=Z.bodyA.position.x,j+=Z.bodyA.position.y),Z.bodyB&&(Y+=Z.bodyB.position.x,U+=Z.bodyB.position.y),y(X,j,Y,U)},alignBody:function(Z,X,j,Y){Z=Z.hasOwnProperty("body")?Z.body:Z;var U;switch(Y){case i.TOP_LEFT:case i.LEFT_TOP:U=this.bodyBounds.getTopLeft(Z,X,j);break;case i.TOP_CENTER:U=this.bodyBounds.getTopCenter(Z,X,j);break;case i.TOP_RIGHT:case i.RIGHT_TOP:U=this.bodyBounds.getTopRight(Z,X,j);break;case i.LEFT_CENTER:U=this.bodyBounds.getLeftCenter(Z,X,j);break;case i.CENTER:U=this.bodyBounds.getCenter(Z,X,j);break;case i.RIGHT_CENTER:U=this.bodyBounds.getRightCenter(Z,X,j);break;case i.LEFT_BOTTOM:case i.BOTTOM_LEFT:U=this.bodyBounds.getBottomLeft(Z,X,j);break;case i.BOTTOM_CENTER:U=this.bodyBounds.getBottomCenter(Z,X,j);break;case i.BOTTOM_RIGHT:case i.RIGHT_BOTTOM:U=this.bodyBounds.getBottomRight(Z,X,j);break}return U&&r.setPosition(Z,U),this},shutdown:function(){var Z=this.systems.events;this.world&&(Z.off(F.UPDATE,this.world.update,this.world),Z.off(F.POST_UPDATE,this.world.postUpdate,this.world)),Z.off(F.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(F.START,this.start,this),this.scene=null,this.systems=null}});O.register("MatterPhysics",K,"matterPhysics"),h.exports=K},34803:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(9674),u=e(83419),n=e(31884),r=e(95643),a=e(95540),s=e(72699),o=e(68287),d=e(26099),l=new u({Extends:o,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,s],initialize:function(m,g,p,y,S,C){r.call(this,m.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new i(this),this.setTexture(y,S),this.setSizeToFrame(),this.setOrigin(),this.world=m,this._tempVec2=new d(g,p);var A=a(C,"shape",null);A?this.setBody(A,C):this.setRectangle(this.width,this.height,C),this.setPosition(g,p),this.initPipeline(),this.initPostPipeline(!0)}});h.exports=l},73834:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66280),u=e(22562),n=e(83419),r=e(31884),a=e(62644),s=e(50792),o=e(95540),d=e(97022),l=e(41598),f=new n({Extends:s,Mixins:[r.Bounce,r.Collision,r.Friction,r.Gravity,r.Mass,r.Sensor,r.Sleep,r.Static],initialize:function(g,p,y){s.call(this),this.tile=p,this.world=g,p.physics.matterBody&&p.physics.matterBody.destroy(),p.physics.matterBody=this;var S=o(y,"body",null),C=o(y,"addToWorld",!0);if(S)this.setBody(S,C);else{var A=p.getCollisionGroup(),M=o(A,"objects",[]);M.length>0?this.setFromTileCollision(y):this.setFromTileRectangle(y)}if(p.flipX||p.flipY){var L={x:p.getCenterX(),y:p.getCenterY()},P=p.flipX?-1:1,O=p.flipY?-1:1;u.scale(S,P,O,L)}},setFromTileRectangle:function(m){m===void 0&&(m={}),d(m,"isStatic")||(m.isStatic=!0),d(m,"addToWorld")||(m.addToWorld=!0);var g=this.tile.getBounds(),p=g.x+g.width/2,y=g.y+g.height/2,S=i.rectangle(p,y,g.width,g.height,m);return this.setBody(S,m.addToWorld),this},setFromTileCollision:function(m){m===void 0&&(m={}),d(m,"isStatic")||(m.isStatic=!0),d(m,"addToWorld")||(m.addToWorld=!0);for(var g=this.tile.tilemapLayer.scaleX,p=this.tile.tilemapLayer.scaleY,y=this.tile.getLeft(),S=this.tile.getTop(),C=this.tile.getCollisionGroup(),A=o(C,"objects",[]),M=[],L=0;L<A.length;L++){var P=A[L],O=y+P.x*g,D=S+P.y*p,I=P.width*g,F=P.height*p,H=null;if(P.rectangle)H=i.rectangle(O+I/2,D+F/2,I,F,m);else if(P.ellipse)H=i.circle(O+I/2,D+F/2,I/2,m);else if(P.polygon||P.polyline){var k=P.polygon?P.polygon:P.polyline,W=k.map(function(X){return{x:X.x*g,y:X.y*p}}),$=l.create(W),K=l.centre($);O+=K.x,D+=K.y,H=i.fromVertices(O,D,$,m)}H&&M.push(H)}if(M.length===1)this.setBody(M[0],m.addToWorld);else if(M.length>1){var Z=a(m);Z.parts=M,this.setBody(u.create(Z),Z.addToWorld)}return this},setBody:function(m,g){return g===void 0&&(g=!0),this.body&&this.removeBody(),this.body=m,this.body.gameObject=this,g&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});h.exports=f},19496:(h,w,e)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66280),u=e(22562),n=e(53402),r=e(95540),a=e(41598),s={parseBody:function(o,d,l,f){f===void 0&&(f={});for(var m=r(l,"fixtures",[]),g=[],p=0;p<m.length;p++)for(var y=this.parseFixture(m[p]),S=0;S<y.length;S++)g.push(y[S]);var C=n.clone(l,!0);n.extend(C,f,!0),delete C.fixtures,delete C.type;var A=u.create(C);return u.setParts(A,g),u.setPosition(A,{x:o,y:d}),A},parseFixture:function(o){var d=n.extend({},!1,o);delete d.circle,delete d.vertices;var l;if(o.circle){var f=r(o.circle,"x"),m=r(o.circle,"y"),g=r(o.circle,"radius");l=[i.circle(f,m,g,d)]}else o.vertices&&(l=this.parseVertices(o.vertices,d));return l},parseVertices:function(o,d){d===void 0&&(d={});for(var l=[],f=0;f<o.length;f++)a.clockwiseSort(o[f]),l.push(u.create(n.extend({position:a.centre(o[f]),vertices:o[f]},d)));return i.flagCoincidentParts(l)}};h.exports=s},85791:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66280),u=e(22562),n={parseBody:function(r,a,s,o){o===void 0&&(o={});var d,l=s.vertices;if(l.length===1)o.vertices=l[0],d=u.create(o),i.flagCoincidentParts(d.parts);else{for(var f=[],m=0;m<l.length;m++){var g=u.create({vertices:l[m]});f.push(g)}i.flagCoincidentParts(f),o.parts=f,d=u.create(o)}return d.label=s.label,u.setPosition(d,{x:r,y:a}),d}};h.exports=n},98713:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(15647),u=e(83419),n=e(69351),r=e(48140),a=e(81388),s=e(1121),o=e(8214),d=e(46975),l=e(53614),f=e(26099),m=e(41598),g=new u({initialize:function(y,S,C){C===void 0&&(C={});var A={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=y,this.world=S,this.camera=null,this.pointer=null,this.active=!0,this.position=new f,this.body=null,this.part=null,this.constraint=r.create(d(C,A)),this.world.on(s.BEFORE_UPDATE,this.update,this),y.sys.input.on(o.POINTER_DOWN,this.onDown,this),y.sys.input.on(o.POINTER_UP,this.onUp,this)},onDown:function(p){this.pointer||(this.pointer=p,this.camera=p.camera)},onUp:function(p){p===this.pointer&&(this.pointer=null)},getBody:function(p){var y=this.position,S=this.constraint;this.camera.getWorldPoint(p.x,p.y,y);for(var C=n.allBodies(this.world.localWorld),A=0;A<C.length;A++){var M=C[A];if(!M.ignorePointer&&i.contains(M.bounds,y)&&a.canCollide(M.collisionFilter,S.collisionFilter)&&this.hitTestBody(M,y))return this.world.emit(s.DRAG_START,M,this.part,this),!0}return!1},hitTestBody:function(p,y){for(var S=this.constraint,C=p.parts.length,A=C>1?1:0,M=A;M<C;M++){var L=p.parts[M];if(m.contains(L.vertices,y))return S.pointA=y,S.pointB={x:y.x-p.position.x,y:y.y-p.position.y},S.bodyB=p,S.angleB=p.angle,l.set(p,!1),this.part=L,this.body=p,!0}return!1},update:function(){var p=this.pointer,y=this.body;if(!this.active||!p){y&&this.stopDrag();return}if(!p.isDown&&y){this.stopDrag();return}else if(p.isDown){if(!this.camera||!y&&!this.getBody(p))return;y=this.body;var S=this.position,C=this.constraint;this.camera.getWorldPoint(p.x,p.y,S),C.pointA.x=S.x,C.pointA.y=S.y,l.set(y,!1),this.world.emit(s.DRAG,y,this)}},stopDrag:function(){var p=this.body,y=this.constraint;y.bodyB=null,y.pointB=null,this.pointer=null,this.body=null,this.part=null,p&&this.world.emit(s.DRAG_END,p,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(s.BEFORE_UPDATE,this.update),this.scene.sys.input.off(o.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(o.POINTER_UP,this.onUp,this)}});h.exports=g},68243:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66280),u=e(22562),n=e(83419),r=e(53402),a=e(69351),s=e(48413),o=e(50792),d=e(1121),l=e(95540),f=e(35154),m=e(22562),g=e(35810),p=e(73834),y=e(4372),S=e(13037),C=e(31725),A=new n({Extends:o,initialize:function(L,P){o.call(this),this.scene=L,this.engine=s.create(P),this.localWorld=this.engine.world;var O=f(P,"gravity",null);O?this.setGravity(O.x,O.y,O.scale):O===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=f(P,"enabled",!0),this.getDelta=f(P,"getDelta",this.update60Hz);var D=l(P,"runner",{}),I=l(D,"fps",!1),F=l(D,"fps",60),H=l(D,"delta",1e3/F),k=l(D,"deltaMin",1e3/F),W=l(D,"deltaMax",1e3/(F*.5));I||(F=1e3/H),this.runner={fps:F,deltaSampleSize:l(D,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,timeBuffer:0,isFixed:l(D,"isFixed",!1),delta:H,deltaMin:k,deltaMax:W},this.autoUpdate=f(P,"autoUpdate",!0);var $=f(P,"debug",!1);if(this.drawDebug=typeof $=="object"?!0:$,this.debugGraphic,this.debugConfig={showAxes:l($,"showAxes",!1),showAngleIndicator:l($,"showAngleIndicator",!1),angleColor:l($,"angleColor",15208787),showBroadphase:l($,"showBroadphase",!1),broadphaseColor:l($,"broadphaseColor",16757760),showBounds:l($,"showBounds",!1),boundsColor:l($,"boundsColor",16777215),showVelocity:l($,"showVelocity",!1),velocityColor:l($,"velocityColor",44783),showCollisions:l($,"showCollisions",!1),collisionColor:l($,"collisionColor",16094476),showSeparations:l($,"showSeparations",!1),separationColor:l($,"separationColor",16753920),showBody:l($,"showBody",!0),showStaticBody:l($,"showStaticBody",!0),showInternalEdges:l($,"showInternalEdges",!1),renderFill:l($,"renderFill",!1),renderLine:l($,"renderLine",!0),fillColor:l($,"fillColor",1075465),fillOpacity:l($,"fillOpacity",1),lineColor:l($,"lineColor",2678297),lineOpacity:l($,"lineOpacity",1),lineThickness:l($,"lineThickness",1),staticFillColor:l($,"staticFillColor",857979),staticLineColor:l($,"staticLineColor",1255396),showSleeping:l($,"showSleeping",!1),staticBodySleepOpacity:l($,"staticBodySleepOpacity",.7),sleepFillColor:l($,"sleepFillColor",4605510),sleepLineColor:l($,"sleepLineColor",10066585),showSensors:l($,"showSensors",!0),sensorFillColor:l($,"sensorFillColor",857979),sensorLineColor:l($,"sensorLineColor",1255396),showPositions:l($,"showPositions",!0),positionSize:l($,"positionSize",4),positionColor:l($,"positionColor",14697178),showJoint:l($,"showJoint",!0),jointColor:l($,"jointColor",14737474),jointLineOpacity:l($,"jointLineOpacity",1),jointLineThickness:l($,"jointLineThickness",2),pinSize:l($,"pinSize",4),pinColor:l($,"pinColor",4382944),springColor:l($,"springColor",14697184),anchorColor:l($,"anchorColor",15724527),anchorSize:l($,"anchorSize",4),showConvexHulls:l($,"showConvexHulls",!1),hullColor:l($,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),l(P,"setBounds",!1)){var K=P.setBounds;if(typeof K=="boolean")this.setBounds();else{var Z=l(K,"x",0),X=l(K,"y",0),j=l(K,"width",L.sys.scale.width),Y=l(K,"height",L.sys.scale.height),U=l(K,"thickness",64),J=l(K,"left",!0),q=l(K,"right",!0),_=l(K,"top",!0),te=l(K,"bottom",!0);this.setBounds(Z,X,j,Y,U,J,q,_,te)}}},setCompositeRenderStyle:function(M){var L=M.bodies,P=M.constraints,O=M.composites,D,I,F;for(D=0;D<L.length;D++)I=L[D],F=I.render,this.setBodyRenderStyle(I,F.lineColor,F.lineOpacity,F.lineThickness,F.fillColor,F.fillOpacity);for(D=0;D<P.length;D++)I=P[D],F=I.render,this.setConstraintRenderStyle(I,F.lineColor,F.lineOpacity,F.lineThickness,F.pinSize,F.anchorColor,F.anchorSize);for(D=0;D<O.length;D++)I=O[D],this.setCompositeRenderStyle(I);return this},setBodyRenderStyle:function(M,L,P,O,D,I){var F=M.render,H=this.debugConfig;return F?(L==null&&(L=M.isStatic?H.staticLineColor:H.lineColor),P==null&&(P=H.lineOpacity),O==null&&(O=H.lineThickness),D==null&&(D=M.isStatic?H.staticFillColor:H.fillColor),I==null&&(I=H.fillOpacity),L!==!1&&(F.lineColor=L),P!==!1&&(F.lineOpacity=P),O!==!1&&(F.lineThickness=O),D!==!1&&(F.fillColor=D),I!==!1&&(F.fillOpacity=I),this):this},setConstraintRenderStyle:function(M,L,P,O,D,I,F){var H=M.render,k=this.debugConfig;if(!H)return this;if(L==null){var W=H.type;W==="line"?L=k.jointColor:W==="pin"?L=k.pinColor:W==="spring"&&(L=k.springColor)}return P==null&&(P=k.jointLineOpacity),O==null&&(O=k.jointLineThickness),D==null&&(D=k.pinSize),I==null&&(I=k.anchorColor),F==null&&(F=k.anchorSize),L!==!1&&(H.lineColor=L),P!==!1&&(H.lineOpacity=P),O!==!1&&(H.lineThickness=O),D!==!1&&(H.pinSize=D),I!==!1&&(H.anchorColor=I),F!==!1&&(H.anchorSize=F),this},setEventsProxy:function(){var M=this,L=this.engine,P=this.localWorld;this.drawDebug&&(g.on(P,"compositeModified",function(O){M.setCompositeRenderStyle(O)}),g.on(P,"beforeAdd",function(O){for(var D=[].concat(O.object),I=0;I<D.length;I++){var F=D[I],H=F.render;F.type==="body"?M.setBodyRenderStyle(F,H.lineColor,H.lineOpacity,H.lineThickness,H.fillColor,H.fillOpacity):F.type==="composite"?M.setCompositeRenderStyle(F):F.type==="constraint"&&M.setConstraintRenderStyle(F,H.lineColor,H.lineOpacity,H.lineThickness,H.pinSize,H.anchorColor,H.anchorSize)}})),g.on(P,"beforeAdd",function(O){M.emit(d.BEFORE_ADD,O)}),g.on(P,"afterAdd",function(O){M.emit(d.AFTER_ADD,O)}),g.on(P,"beforeRemove",function(O){M.emit(d.BEFORE_REMOVE,O)}),g.on(P,"afterRemove",function(O){M.emit(d.AFTER_REMOVE,O)}),g.on(L,"beforeUpdate",function(O){M.emit(d.BEFORE_UPDATE,O)}),g.on(L,"afterUpdate",function(O){M.emit(d.AFTER_UPDATE,O)}),g.on(L,"collisionStart",function(O){var D=O.pairs,I,F;D.length>0&&D.map(function(H){I=H.bodyA,F=H.bodyB,I.gameObject&&I.gameObject.emit("collide",I,F,H),F.gameObject&&F.gameObject.emit("collide",F,I,H),g.trigger(I,"onCollide",{pair:H}),g.trigger(F,"onCollide",{pair:H}),I.onCollideCallback&&I.onCollideCallback(H),F.onCollideCallback&&F.onCollideCallback(H),I.onCollideWith[F.id]&&I.onCollideWith[F.id](F,H),F.onCollideWith[I.id]&&F.onCollideWith[I.id](I,H)}),M.emit(d.COLLISION_START,O,I,F)}),g.on(L,"collisionActive",function(O){var D=O.pairs,I,F;D.length>0&&D.map(function(H){I=H.bodyA,F=H.bodyB,I.gameObject&&I.gameObject.emit("collideActive",I,F,H),F.gameObject&&F.gameObject.emit("collideActive",F,I,H),g.trigger(I,"onCollideActive",{pair:H}),g.trigger(F,"onCollideActive",{pair:H}),I.onCollideActiveCallback&&I.onCollideActiveCallback(H),F.onCollideActiveCallback&&F.onCollideActiveCallback(H)}),M.emit(d.COLLISION_ACTIVE,O,I,F)}),g.on(L,"collisionEnd",function(O){var D=O.pairs,I,F;D.length>0&&D.map(function(H){I=H.bodyA,F=H.bodyB,I.gameObject&&I.gameObject.emit("collideEnd",I,F,H),F.gameObject&&F.gameObject.emit("collideEnd",F,I,H),g.trigger(I,"onCollideEnd",{pair:H}),g.trigger(F,"onCollideEnd",{pair:H}),I.onCollideEndCallback&&I.onCollideEndCallback(H),F.onCollideEndCallback&&F.onCollideEndCallback(H)}),M.emit(d.COLLISION_END,O,I,F)})},setBounds:function(M,L,P,O,D,I,F,H,k){return M===void 0&&(M=0),L===void 0&&(L=0),P===void 0&&(P=this.scene.sys.scale.width),O===void 0&&(O=this.scene.sys.scale.height),D===void 0&&(D=64),I===void 0&&(I=!0),F===void 0&&(F=!0),H===void 0&&(H=!0),k===void 0&&(k=!0),this.updateWall(I,"left",M-D,L-D,D,O+D*2),this.updateWall(F,"right",M+P,L-D,D,O+D*2),this.updateWall(H,"top",M,L-D,P,D),this.updateWall(k,"bottom",M,L+O,P,D),this},updateWall:function(M,L,P,O,D,I){var F=this.walls[L];M?(F&&y.remove(this.localWorld,F),P+=D/2,O+=I/2,this.walls[L]=this.create(P,O,D,I,{isStatic:!0,friction:0,frictionStatic:0})):(F&&y.remove(this.localWorld,F),this.walls[L]=null)},createDebugGraphic:function(){var M=this.scene.sys.add.graphics({x:0,y:0});return M.setDepth(Number.MAX_VALUE),this.debugGraphic=M,this.drawDebug=!0,M},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(M,L,P){return M===void 0&&(M=0),L===void 0&&(L=1),P===void 0&&(P=.001),this.localWorld.gravity.x=M,this.localWorld.gravity.y=L,this.localWorld.gravity.scale=P,this},create:function(M,L,P,O,D){var I=i.rectangle(M,L,P,O,D);return y.add(this.localWorld,I),I},add:function(M){return y.add(this.localWorld,M),this},remove:function(M,L){Array.isArray(M)||(M=[M]);for(var P=0;P<M.length;P++){var O=M[P],D=O.body?O.body:O;a.remove(this.localWorld,D,L)}return this},removeConstraint:function(M,L){return a.remove(this.localWorld,M,L),this},convertTilemapLayer:function(M,L){var P=M.layer,O=M.getTilesWithin(0,0,P.width,P.height,{isColliding:!0});return this.convertTiles(O,L),this},convertTiles:function(M,L){if(M.length===0)return this;for(var P=0;P<M.length;P++)new p(this,M[P],L);return this},nextGroup:function(M){return m.nextGroup(M)},nextCategory:function(){return m.nextCategory()},pause:function(){return this.enabled=!1,this.emit(d.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=r.now(),this.emit(d.RESUME),this},update:function(M){if(!(!this.enabled||!this.autoUpdate)){var L=this.engine,P=this.runner,O=r.now(),D=P.delta,I=0,F=M-P.timeLastTick;if((!F||!P.timeLastTick||F>Math.max(S._maxFrameDelta,P.maxFrameTime))&&(F=P.frameDelta||S._frameDeltaFallback),P.frameDeltaSmoothing){P.frameDeltaHistory.push(F),P.frameDeltaHistory=P.frameDeltaHistory.slice(-P.frameDeltaHistorySize);var H=P.frameDeltaHistory.slice(0).sort(),k=P.frameDeltaHistory.slice(H.length*S._smoothingLowerBound,H.length*S._smoothingUpperBound),W=S._mean(k);F=W||F}P.frameDeltaSnapping&&(F=1e3/Math.round(1e3/F)),P.frameDelta=F,P.timeLastTick=M,P.timeBuffer+=P.frameDelta,P.timeBuffer=r.clamp(P.timeBuffer,0,P.frameDelta+D*S._timeBufferMargin),P.lastUpdatesDeferred=0;for(var $=P.maxUpdates||Math.ceil(P.maxFrameTime/D),K=r.now();D>0&&P.timeBuffer>=D*S._timeBufferMargin;){s.update(L,D),P.timeBuffer-=D,I+=1;var Z=r.now()-O,X=r.now()-K,j=Z+S._elapsedNextEstimate*X/I;if(I>=$||j>P.maxFrameTime){P.lastUpdatesDeferred=Math.round(Math.max(0,P.timeBuffer/D-S._timeBufferMargin));break}}}},step:function(M){s.update(this.engine,M)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(M){var L=M.hasOwnProperty("body")?M.body:M;return a.get(this.localWorld,L.id,L.type)!==null},getAllBodies:function(){return a.allBodies(this.localWorld)},getAllConstraints:function(){return a.allConstraints(this.localWorld)},getAllComposites:function(){return a.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var M=this.debugConfig,L=this.engine,P=this.debugGraphic,O=a.allBodies(this.localWorld);this.debugGraphic.clear(),M.showBroadphase&&L.broadphase.controller&&this.renderGrid(L.broadphase,P,M.broadphaseColor,.5),M.showBounds&&this.renderBodyBounds(O,P,M.boundsColor,.5),(M.showBody||M.showStaticBody)&&this.renderBodies(O),M.showJoint&&this.renderJoints(),(M.showAxes||M.showAngleIndicator)&&this.renderBodyAxes(O,P,M.showAxes,M.angleColor,.5),M.showVelocity&&this.renderBodyVelocity(O,P,M.velocityColor,1,2),M.showSeparations&&this.renderSeparations(L.pairs.list,P,M.separationColor),M.showCollisions&&this.renderCollisions(L.pairs.list,P,M.collisionColor)}},renderGrid:function(M,L,P,O){L.lineStyle(1,P,O);for(var D=r.keys(M.buckets),I=0;I<D.length;I++){var F=D[I];if(!(M.buckets[F].length<2)){var H=F.split(/C|R/);L.strokeRect(parseInt(H[1],10)*M.bucketWidth,parseInt(H[2],10)*M.bucketHeight,M.bucketWidth,M.bucketHeight)}}return this},renderSeparations:function(M,L,P){L.lineStyle(1,P,1);for(var O=0;O<M.length;O++){var D=M[O];if(D.isActive){var I=D.collision,F=I.bodyA,H=I.bodyB,k=F.position,W=H.position,$=I.penetration,K=!F.isStatic&&!H.isStatic?4:1;H.isStatic&&(K=0),L.lineBetween(W.x,W.y,W.x-$.x*K,W.y-$.y*K),K=!F.isStatic&&!H.isStatic?4:1,F.isStatic&&(K=0),L.lineBetween(k.x,k.y,k.x-$.x*K,k.y-$.y*K)}}return this},renderCollisions:function(M,L,P){L.lineStyle(1,P,.5),L.fillStyle(P,1);var O,D;for(O=0;O<M.length;O++)if(D=M[O],!!D.isActive)for(var I=0;I<D.contactCount;I++){var F=D.contacts[I],H=F.vertex;H&&L.fillRect(H.x-2,H.y-2,5,5)}for(O=0;O<M.length;O++)if(D=M[O],!!D.isActive){var k=D.collision,W=D.contacts;if(D.contactCount>0){var $=W[0].vertex.x,K=W[0].vertex.y;D.contactCount===2&&($=(W[0].vertex.x+W[1].vertex.x)/2,K=(W[0].vertex.y+W[1].vertex.y)/2),k.bodyB===k.supports[0].body||k.bodyA.isStatic?L.lineBetween($-k.normal.x*8,K-k.normal.y*8,$,K):L.lineBetween($+k.normal.x*8,K+k.normal.y*8,$,K)}}return this},renderBodyBounds:function(M,L,P,O){L.lineStyle(1,P,O);for(var D=0;D<M.length;D++){var I=M[D];if(I.render.visible){var F=I.bounds;if(F)L.strokeRect(F.min.x,F.min.y,F.max.x-F.min.x,F.max.y-F.min.y);else for(var H=I.parts,k=H.length>1?1:0;k<H.length;k++){var W=H[k];L.strokeRect(W.bounds.min.x,W.bounds.min.y,W.bounds.max.x-W.bounds.min.x,W.bounds.max.y-W.bounds.min.y)}}}return this},renderBodyAxes:function(M,L,P,O,D){L.lineStyle(1,O,D);for(var I=0;I<M.length;I++){var F=M[I],H=F.parts;if(F.render.visible){var k,W,$;if(P)for(W=H.length>1?1:0;W<H.length;W++)for(k=H[W],$=0;$<k.axes.length;$++){var K=k.axes[$];L.lineBetween(k.position.x,k.position.y,k.position.x+K.x*20,k.position.y+K.y*20)}else for(W=H.length>1?1:0;W<H.length;W++)for(k=H[W],$=0;$<k.axes.length;$++)L.lineBetween(k.position.x,k.position.y,(k.vertices[0].x+k.vertices[k.vertices.length-1].x)/2,(k.vertices[0].y+k.vertices[k.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(M,L,P,O,D){L.lineStyle(D,P,O);for(var I=0;I<M.length;I++){var F=M[I];F.render.visible&&L.lineBetween(F.position.x,F.position.y,F.position.x+(F.position.x-F.positionPrev.x)*2,F.position.y+(F.position.y-F.positionPrev.y)*2)}return this},renderBodies:function(M){for(var L=this.debugGraphic,P=this.debugConfig,O=P.showBody,D=P.showStaticBody,I=P.showSleeping,F=P.showInternalEdges,H=P.showConvexHulls,k=P.renderFill,W=P.renderLine,$=P.staticBodySleepOpacity,K=P.sleepFillColor,Z=P.sleepLineColor,X=P.hullColor,j=0;j<M.length;j++){var Y=M[j];if(Y.render.visible&&!(!D&&Y.isStatic||!O&&!Y.isStatic)){var U=Y.render.lineColor,J=Y.render.lineOpacity,q=Y.render.lineThickness,_=Y.render.fillColor,te=Y.render.fillOpacity;I&&Y.isSleeping&&(Y.isStatic?(J*=$,te*=$):(U=Z,_=K)),k||(_=null),W||(U=null),this.renderBody(Y,L,F,U,J,q,_,te);var se=Y.parts.length;H&&se>1&&this.renderConvexHull(Y,L,X,q)}}},renderBody:function(M,L,P,O,D,I,F,H){O===void 0&&(O=null),D===void 0&&(D=null),I===void 0&&(I=1),F===void 0&&(F=null),H===void 0&&(H=null);for(var k=this.debugConfig,W=k.sensorFillColor,$=k.sensorLineColor,K=M.parts,Z=K.length,X=Z>1?1:0;X<Z;X++){var j=K[X],Y=j.render,U=Y.opacity;if(!(!Y.visible||U===0||j.isSensor&&!k.showSensors)){var J=j.circleRadius;if(L.beginPath(),j.isSensor?(F!==null&&L.fillStyle(W,H*U),O!==null&&L.lineStyle(I,$,D*U)):(F!==null&&L.fillStyle(F,H*U),O!==null&&L.lineStyle(I,O,D*U)),J)L.arc(j.position.x,j.position.y,J,0,2*Math.PI);else{var q=j.vertices,_=q.length;L.moveTo(q[0].x,q[0].y);for(var te=1;te<_;te++){var se=q[te];if(!q[te-1].isInternal||P?L.lineTo(se.x,se.y):L.moveTo(se.x,se.y),te<_&&se.isInternal&&!P){var ne=(te+1)%_;L.moveTo(q[ne].x,q[ne].y)}}L.closePath()}F!==null&&L.fillPath(),O!==null&&L.strokePath()}}if(k.showPositions&&!M.isStatic){var he=M.position.x,le=M.position.y,ge=Math.ceil(k.positionSize/2);L.fillStyle(k.positionColor,1),L.fillRect(he-ge,le-ge,k.positionSize,k.positionSize)}return this},renderConvexHull:function(M,L,P,O){O===void 0&&(O=1);var D=M.parts,I=D.length;if(I>1){var F=M.vertices;L.lineStyle(O,P),L.beginPath(),L.moveTo(F[0].x,F[0].y);for(var H=1;H<F.length;H++)L.lineTo(F[H].x,F[H].y);L.lineTo(F[0].x,F[0].y),L.strokePath()}return this},renderJoints:function(){for(var M=this.debugGraphic,L=a.allConstraints(this.localWorld),P=0;P<L.length;P++){var O=L[P].render,D=O.lineColor,I=O.lineOpacity,F=O.lineThickness,H=O.pinSize,k=O.anchorColor,W=O.anchorSize;this.renderConstraint(L[P],M,D,I,F,H,k,W)}},renderConstraint:function(M,L,P,O,D,I,F,H){var k=M.render;if(!k.visible||!M.pointA||!M.pointB)return this;L.lineStyle(D,P,O);var W=M.bodyA,$=M.bodyB,K,Z;if(W?K=C.add(W.position,M.pointA):K=M.pointA,k.type==="pin")L.strokeCircle(K.x,K.y,I);else{if($?Z=C.add($.position,M.pointB):Z=M.pointB,L.beginPath(),L.moveTo(K.x,K.y),k.type==="spring")for(var X=C.sub(Z,K),j=C.perp(C.normalise(X)),Y=Math.ceil(r.clamp(M.length/5,12,20)),U,J=1;J<Y;J+=1)U=J%2===0?1:-1,L.lineTo(K.x+X.x*(J/Y)+j.x*U*4,K.y+X.y*(J/Y)+j.y*U*4);L.lineTo(Z.x,Z.y)}return L.strokePath(),k.anchors&&H>0&&(L.fillStyle(F),L.fillCircle(K.x,K.y,H),L.fillCircle(Z.x,Z.y,H)),this},resetCollisionIDs:function(){return u._nextCollidingGroupId=1,u._nextNonCollidingGroupId=-1,u._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),y.clear(this.localWorld,!1),s.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});h.exports=A},70410:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setBounce:function(e){return this.body.restitution=e,this}};h.exports=w},66968:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var i=0;if(!Array.isArray(e))i=e;else for(var u=0;u<e.length;u++)i|=e[u];return this.body.collisionFilter.mask=i,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,i){Array.isArray(e)||(e=[e]);for(var u=0;u<e.length;u++){var n=e[u].hasOwnProperty("body")?e[u].body:e[u];this.body.setOnCollideWith(n,i)}return this}};h.exports=w},51607:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(22562),u={applyForce:function(n){return this._tempVec2.set(this.body.position.x,this.body.position.y),i.applyForce(this.body,this._tempVec2,n),this},applyForceFrom:function(n,r){return i.applyForce(this.body,n,r),this},thrust:function(n){var r=this.body.angle;return this._tempVec2.set(n*Math.cos(r),n*Math.sin(r)),i.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(n){var r=this.body.angle-Math.PI/2;return this._tempVec2.set(n*Math.cos(r),n*Math.sin(r)),i.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(n){var r=this.body.angle+Math.PI/2;return this._tempVec2.set(n*Math.cos(r),n*Math.sin(r)),i.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(n){var r=this.body.angle-Math.PI;return this._tempVec2.set(n*Math.cos(r),n*Math.sin(r)),i.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};h.exports=u},5436:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setFriction:function(e,i,u){return this.body.friction=e,i!==void 0&&(this.body.frictionAir=i),u!==void 0&&(this.body.frictionStatic=u),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};h.exports=w},39858:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};h.exports=w},37302:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(22562),u=e(26099),n={setMass:function(r){return i.setMass(this.body,r),this},setDensity:function(r){return i.setDensity(this.body,r),this},centerOfMass:{get:function(){return new u(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};h.exports=n},39132:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};h.exports=w},57772:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(66280),u=e(22562),n=e(43855),r=e(95540),a=e(19496),s=e(85791),o=e(41598),d={setRectangle:function(l,f,m){return this.setBody({type:"rectangle",width:l,height:f},m)},setCircle:function(l,f){return this.setBody({type:"circle",radius:l},f)},setPolygon:function(l,f,m){return this.setBody({type:"polygon",sides:f,radius:l},m)},setTrapezoid:function(l,f,m,g){return this.setBody({type:"trapezoid",width:l,height:f,slope:m},g)},setExistingBody:function(l,f){f===void 0&&(f=!0),this.body&&this.world.remove(this.body,!0),this.body=l;for(var m=0;m<l.parts.length;m++)l.parts[m].gameObject=this;var g=this;if(l.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},f&&(this.world.has(l)&&this.world.remove(l,!0),this.world.add(l)),this._originComponent){var p=l.render.sprite.xOffset,y=l.render.sprite.yOffset,S=l.centerOfMass.x,C=l.centerOfMass.y;if(n(S,.5)&&n(C,.5))this.setOrigin(p+.5,y+.5);else{var A=l.centerOffset.x,M=l.centerOffset.y;this.setOrigin(p+A/this.displayWidth,y+M/this.displayHeight)}}return this},setBody:function(l,f){if(!l)return this;var m;typeof l=="string"&&(l={type:l});var g=r(l,"type","rectangle"),p=r(l,"x",this._tempVec2.x),y=r(l,"y",this._tempVec2.y),S=r(l,"width",this.width),C=r(l,"height",this.height);switch(g){case"rectangle":m=i.rectangle(p,y,S,C,f);break;case"circle":var A=r(l,"radius",Math.max(S,C)/2),M=r(l,"maxSides",25);m=i.circle(p,y,A,f,M);break;case"trapezoid":var L=r(l,"slope",.5);m=i.trapezoid(p,y,S,C,L,f);break;case"polygon":var P=r(l,"sides",5),O=r(l,"radius",Math.max(S,C)/2);m=i.polygon(p,y,P,O,f);break;case"fromVertices":case"fromVerts":var D=r(l,"verts",null);if(D)if(typeof D=="string"&&(D=o.fromPath(D)),this.body&&!this.body.hasOwnProperty("temp"))u.setVertices(this.body,D),m=this.body;else{var I=r(l,"flagInternal",!1),F=r(l,"removeCollinear",.01),H=r(l,"minimumArea",10);m=i.fromVertices(p,y,D,f,I,F,H)}break;case"fromPhysicsEditor":m=a.parseBody(p,y,l,f);break;case"fromPhysicsTracer":m=s.parseBody(p,y,l,f);break}return m&&this.setExistingBody(m,l.addToWorld),this}};h.exports=d},38083:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(1121),u=e(53614),n=e(35810),r={setToSleep:function(){return u.set(this.body,!0),this},setAwake:function(){return u.set(this.body,!1),this},setSleepThreshold:function(a){return a===void 0&&(a=60),this.body.sleepThreshold=a,this},setSleepEvents:function(a,s){return this.setSleepStartEvent(a),this.setSleepEndEvent(s),this},setSleepStartEvent:function(a){if(a){var s=this.world;n.on(this.body,"sleepStart",function(o){s.emit(i.SLEEP_START,o,this)})}else n.off(this.body,"sleepStart");return this},setSleepEndEvent:function(a){if(a){var s=this.world;n.on(this.body,"sleepEnd",function(o){s.emit(i.SLEEP_END,o,this)})}else n.off(this.body,"sleepEnd");return this}};h.exports=r},90556:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(22562),u={setStatic:function(n){return i.setStatic(this.body,n),this},isStatic:function(){return this.body.isStatic}};h.exports=u},85436:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(22562),u=e(36383),n=e(86554),r=e(30954),a=4,s={x:{get:function(){return this.body.position.x},set:function(o){this._tempVec2.set(o,this.y),i.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(o){this._tempVec2.set(this.x,o),i.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(o){var d=1/this._scaleX,l=1/this._scaleY;this._scaleX=o,this._scaleX===0?this.renderFlags&=~a:this.renderFlags|=a,i.scale(this.body,d,l),i.scale(this.body,o,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(o){var d=1/this._scaleX,l=1/this._scaleY;this._scaleY=o,this._scaleY===0?this.renderFlags&=~a:this.renderFlags|=a,i.scale(this.body,d,l),i.scale(this.body,this._scaleX,o)}},angle:{get:function(){return r(this.body.angle*u.RAD_TO_DEG)},set:function(o){this.rotation=r(o)*u.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(o){this._rotation=n(o),i.setAngle(this.body,this._rotation)}},setPosition:function(o,d){return o===void 0&&(o=0),d===void 0&&(d=o),this._tempVec2.set(o,d),i.setPosition(this.body,this._tempVec2),this},setRotation:function(o){return o===void 0&&(o=0),this._rotation=n(o),i.setAngle(this.body,o),this},setFixedRotation:function(){return i.setInertia(this.body,1/0),this},setAngle:function(o){return o===void 0&&(o=0),this.angle=o,i.setAngle(this.body,this.rotation),this},setScale:function(o,d,l){o===void 0&&(o=1),d===void 0&&(d=o);var f=1/this._scaleX,m=1/this._scaleY;return this._scaleX=o,this._scaleY=d,i.scale(this.body,f,m,l),i.scale(this.body,o,d,l),this}};h.exports=s},42081:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(22562),u={setVelocityX:function(n){return this._tempVec2.set(n,this.body.velocity.y),i.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(n){return this._tempVec2.set(this.body.velocity.x,n),i.setVelocity(this.body,this._tempVec2),this},setVelocity:function(n,r){return this._tempVec2.set(n,r),i.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return i.getVelocity(this.body)},setAngularVelocity:function(n){return i.setAngularVelocity(this.body,n),this},getAngularVelocity:function(){return i.getAngularVelocity(this.body)},setAngularSpeed:function(n){return i.setAngularSpeed(this.body,n),this},getAngularSpeed:function(){return i.getAngularSpeed(this.body)}};h.exports=u},31884:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Bounce:e(70410),Collision:e(66968),Force:e(51607),Friction:e(5436),Gravity:e(39858),Mass:e(37302),Sensor:e(39132),SetBody:e(57772),Sleep:e(38083),Static:e(90556),Transform:e(85436),Velocity:e(42081)}},85608:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="afteradd"},1213:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="afterremove"},25968:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="afterupdate"},67205:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="beforeadd"},39438:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="beforeremove"},44823:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="beforeupdate"},92593:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="collisionactive"},60128:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="collisionend"},76861:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="collisionstart"},92362:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragend"},76408:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drag"},93971:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragstart"},5656:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},47861:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},79099:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="sleepend"},35906:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="sleepstart"},1121:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AFTER_ADD:e(85608),AFTER_REMOVE:e(1213),AFTER_UPDATE:e(25968),BEFORE_ADD:e(67205),BEFORE_REMOVE:e(39438),BEFORE_UPDATE:e(44823),COLLISION_ACTIVE:e(92593),COLLISION_END:e(60128),COLLISION_START:e(76861),DRAG_END:e(92362),DRAG:e(76408),DRAG_START:e(93971),PAUSE:e(5656),RESUME:e(47861),SLEEP_END:e(79099),SLEEP_START:e(35906)}},3875:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BodyBounds:e(68174),Components:e(31884),Events:e(1121),Factory:e(28137),MatterGameObject:e(75803),Image:e(23181),Matter:e(19933),MatterPhysics:e(42045),PolyDecomp:e(55973),Sprite:e(34803),TileBody:e(73834),PhysicsEditorParser:e(19496),PhysicsJSONParser:e(85791),PointerConstraint:e(98713),World:e(68243)}},22562:(h,w,e)=>{var i={};h.exports=i;var u=e(41598),n=e(31725),r=e(53614),a=e(53402),s=e(15647),o=e(66615);(function(){i._timeCorrection=!0,i._inertiaScale=4,i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,i._baseDelta=16.666666666666668,i.create=function(l){var f={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:l.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!l.hasOwnProperty("position")&&l.hasOwnProperty("vertices")?l.position=u.centre(l.vertices):l.hasOwnProperty("vertices")||(f.vertices=u.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var m=a.extend(f,l);return d(m,l),m.setOnCollideWith=function(g,p){return p?this.onCollideWith[g.id]=p:delete this.onCollideWith[g.id],this},m},i.nextGroup=function(l){return l?i._nextNonCollidingGroupId--:i._nextCollidingGroupId++},i.nextCategory=function(){return i._nextCategory=i._nextCategory<<1,i._nextCategory};var d=function(l,f){if(f=f||{},i.set(l,{bounds:l.bounds||s.create(l.vertices),positionPrev:l.positionPrev||n.clone(l.position),anglePrev:l.anglePrev||l.angle,vertices:l.vertices,parts:l.parts||[l],isStatic:l.isStatic,isSleeping:l.isSleeping,parent:l.parent||l}),u.rotate(l.vertices,l.angle,l.position),o.rotate(l.axes,l.angle),s.update(l.bounds,l.vertices,l.velocity),i.set(l,{axes:f.axes||l.axes,area:f.area||l.area,mass:f.mass||l.mass,inertia:f.inertia||l.inertia}),l.parts.length===1){var m=l.bounds,g=l.centerOfMass,p=l.centerOffset,y=m.max.x-m.min.x,S=m.max.y-m.min.y;g.x=-(m.min.x-l.position.x)/y,g.y=-(m.min.y-l.position.y)/S,p.x=y*g.x,p.y=S*g.y}};i.set=function(l,f,m){var g;typeof f=="string"&&(g=f,f={},f[g]=m);for(g in f)if(Object.prototype.hasOwnProperty.call(f,g))switch(m=f[g],g){case"isStatic":i.setStatic(l,m);break;case"isSleeping":r.set(l,m);break;case"mass":i.setMass(l,m);break;case"density":i.setDensity(l,m);break;case"inertia":i.setInertia(l,m);break;case"vertices":i.setVertices(l,m);break;case"position":i.setPosition(l,m);break;case"angle":i.setAngle(l,m);break;case"velocity":i.setVelocity(l,m);break;case"angularVelocity":i.setAngularVelocity(l,m);break;case"speed":i.setSpeed(l,m);break;case"angularSpeed":i.setAngularSpeed(l,m);break;case"parts":i.setParts(l,m);break;case"centre":i.setCentre(l,m);break;default:l[g]=m}},i.setStatic=function(l,f){for(var m=0;m<l.parts.length;m++){var g=l.parts[m];f?(g.isStatic||(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia}),g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null),g.isStatic=f}},i.setMass=function(l,f){var m=l.inertia/(l.mass/6);l.inertia=m*(f/6),l.inverseInertia=1/l.inertia,l.mass=f,l.inverseMass=1/l.mass,l.density=l.mass/l.area},i.setDensity=function(l,f){i.setMass(l,f*l.area),l.density=f},i.setInertia=function(l,f){l.inertia=f,l.inverseInertia=1/l.inertia},i.setVertices=function(l,f){f[0].body===l?l.vertices=f:l.vertices=u.create(f,l),l.axes=o.fromVertices(l.vertices),l.area=u.area(l.vertices),i.setMass(l,l.density*l.area);var m=u.centre(l.vertices);u.translate(l.vertices,m,-1),i.setInertia(l,i._inertiaScale*u.inertia(l.vertices,l.mass)),u.translate(l.vertices,l.position),s.update(l.bounds,l.vertices,l.velocity)},i.setParts=function(l,f,m){var g;for(f=f.slice(0),l.parts.length=0,l.parts.push(l),l.parent=l,g=0;g<f.length;g++){var p=f[g];p!==l&&(p.parent=l,l.parts.push(p))}if(l.parts.length!==1){if(m=typeof m<"u"?m:!0,m){var y=[];for(g=0;g<f.length;g++)y=y.concat(f[g].vertices);u.clockwiseSort(y);var S=u.hull(y),C=u.centre(S);i.setVertices(l,S),u.translate(l.vertices,C)}var A=i._totalProperties(l),M=A.centre.x,L=A.centre.y,P=l.bounds,O=l.centerOfMass,D=l.centerOffset;s.update(P,l.vertices,l.velocity),O.x=-(P.min.x-M)/(P.max.x-P.min.x),O.y=-(P.min.y-L)/(P.max.y-P.min.y),D.x=M,D.y=L,l.area=A.area,l.parent=l,l.position.x=M,l.position.y=L,l.positionPrev.x=M,l.positionPrev.y=L,i.setMass(l,A.mass),i.setInertia(l,A.inertia),i.setPosition(l,A.centre)}},i.setCentre=function(l,f,m){m?(l.positionPrev.x+=f.x,l.positionPrev.y+=f.y,l.position.x+=f.x,l.position.y+=f.y):(l.positionPrev.x=f.x-(l.position.x-l.positionPrev.x),l.positionPrev.y=f.y-(l.position.y-l.positionPrev.y),l.position.x=f.x,l.position.y=f.y)},i.setPosition=function(l,f,m){var g=n.sub(f,l.position);m?(l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.velocity.x=g.x,l.velocity.y=g.y,l.speed=n.magnitude(g)):(l.positionPrev.x+=g.x,l.positionPrev.y+=g.y);for(var p=0;p<l.parts.length;p++){var y=l.parts[p];y.position.x+=g.x,y.position.y+=g.y,u.translate(y.vertices,g),s.update(y.bounds,y.vertices,l.velocity)}},i.setAngle=function(l,f,m){var g=f-l.angle;m?(l.anglePrev=l.angle,l.angularVelocity=g,l.angularSpeed=Math.abs(g)):l.anglePrev+=g;for(var p=0;p<l.parts.length;p++){var y=l.parts[p];y.angle+=g,u.rotate(y.vertices,g,l.position),o.rotate(y.axes,g),s.update(y.bounds,y.vertices,l.velocity),p>0&&n.rotateAbout(y.position,g,l.position,y.position)}},i.setVelocity=function(l,f){var m=l.deltaTime/i._baseDelta;l.positionPrev.x=l.position.x-f.x*m,l.positionPrev.y=l.position.y-f.y*m,l.velocity.x=(l.position.x-l.positionPrev.x)/m,l.velocity.y=(l.position.y-l.positionPrev.y)/m,l.speed=n.magnitude(l.velocity)},i.getVelocity=function(l){var f=i._baseDelta/l.deltaTime;return{x:(l.position.x-l.positionPrev.x)*f,y:(l.position.y-l.positionPrev.y)*f}},i.getSpeed=function(l){return n.magnitude(i.getVelocity(l))},i.setSpeed=function(l,f){i.setVelocity(l,n.mult(n.normalise(i.getVelocity(l)),f))},i.setAngularVelocity=function(l,f){var m=l.deltaTime/i._baseDelta;l.anglePrev=l.angle-f*m,l.angularVelocity=(l.angle-l.anglePrev)/m,l.angularSpeed=Math.abs(l.angularVelocity)},i.getAngularVelocity=function(l){return(l.angle-l.anglePrev)*i._baseDelta/l.deltaTime},i.getAngularSpeed=function(l){return Math.abs(i.getAngularVelocity(l))},i.setAngularSpeed=function(l,f){i.setAngularVelocity(l,a.sign(i.getAngularVelocity(l))*f)},i.translate=function(l,f,m){i.setPosition(l,n.add(l.position,f),m)},i.rotate=function(l,f,m,g){if(!m)i.setAngle(l,l.angle+f,g);else{var p=Math.cos(f),y=Math.sin(f),S=l.position.x-m.x,C=l.position.y-m.y;i.setPosition(l,{x:m.x+(S*p-C*y),y:m.y+(S*y+C*p)},g),i.setAngle(l,l.angle+f,g)}},i.scale=function(l,f,m,g){var p=0,y=0;g=g||l.position;for(var S=l.inertia===1/0,C=0;C<l.parts.length;C++){var A=l.parts[C];A.scale.x=f,A.scale.y=m,u.scale(A.vertices,f,m,g),A.axes=o.fromVertices(A.vertices),A.area=u.area(A.vertices),i.setMass(A,l.density*A.area),u.translate(A.vertices,{x:-A.position.x,y:-A.position.y}),i.setInertia(A,i._inertiaScale*u.inertia(A.vertices,A.mass)),u.translate(A.vertices,{x:A.position.x,y:A.position.y}),C>0&&(p+=A.area,y+=A.inertia),A.position.x=g.x+(A.position.x-g.x)*f,A.position.y=g.y+(A.position.y-g.y)*m,s.update(A.bounds,A.vertices,l.velocity)}l.parts.length>1&&(l.area=p,l.isStatic||(i.setMass(l,l.density*p),i.setInertia(l,y))),l.circleRadius&&(f===m?l.circleRadius*=f:l.circleRadius=null),S&&i.setInertia(l,1/0)},i.update=function(l,f){f=(typeof f<"u"?f:16.666666666666668)*l.timeScale;var m=f*f,g=i._timeCorrection?f/(l.deltaTime||f):1,p=1-l.frictionAir*(f/a._baseDelta),y=(l.position.x-l.positionPrev.x)*g,S=(l.position.y-l.positionPrev.y)*g;l.velocity.x=y*p+l.force.x/l.mass*m,l.velocity.y=S*p+l.force.y/l.mass*m,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.position.x+=l.velocity.x,l.position.y+=l.velocity.y,l.deltaTime=f,l.angularVelocity=(l.angle-l.anglePrev)*p*g+l.torque/l.inertia*m,l.anglePrev=l.angle,l.angle+=l.angularVelocity,l.speed=n.magnitude(l.velocity),l.angularSpeed=Math.abs(l.angularVelocity);for(var C=0;C<l.parts.length;C++){var A=l.parts[C];u.translate(A.vertices,l.velocity),C>0&&(A.position.x+=l.velocity.x,A.position.y+=l.velocity.y),l.angularVelocity!==0&&(u.rotate(A.vertices,l.angularVelocity,l.position),o.rotate(A.axes,l.angularVelocity),C>0&&n.rotateAbout(A.position,l.angularVelocity,l.position,A.position)),s.update(A.bounds,A.vertices,l.velocity)}},i.updateVelocities=function(l){var f=i._baseDelta/l.deltaTime,m=l.velocity;m.x=(l.position.x-l.positionPrev.x)*f,m.y=(l.position.y-l.positionPrev.y)*f,l.speed=Math.sqrt(m.x*m.x+m.y*m.y),l.angularVelocity=(l.angle-l.anglePrev)*f,l.angularSpeed=Math.abs(l.angularVelocity)},i.applyForce=function(l,f,m){var g={x:f.x-l.position.x,y:f.y-l.position.y};l.force.x+=m.x,l.force.y+=m.y,l.torque+=g.x*m.y-g.y*m.x},i._totalProperties=function(l){for(var f={mass:0,area:0,inertia:0,centre:{x:0,y:0}},m=l.parts.length===1?0:1;m<l.parts.length;m++){var g=l.parts[m],p=g.mass!==1/0?g.mass:1;f.mass+=p,f.area+=g.area,f.inertia+=g.inertia,f.centre=n.add(f.centre,n.mult(g.position,p))}return f.centre=n.div(f.centre,f.mass),f},i.wrap=function(l,f){var m=s.wrap(l.bounds,f);return m&&i.translate(l,m),m}})()},69351:(h,w,e)=>{var i={};h.exports=i;var u=e(35810),n=e(53402),r=e(15647),a=e(22562);(function(){i.create=function(s){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},s)},i.setModified=function(s,o,d,l){if(u.trigger(s,"compositeModified",s),s.isModified=o,o&&s.cache&&(s.cache.allBodies=null,s.cache.allConstraints=null,s.cache.allComposites=null),d&&s.parent&&i.setModified(s.parent,o,d,l),l)for(var f=0;f<s.composites.length;f++){var m=s.composites[f];i.setModified(m,o,d,l)}},i.add=function(s,o){var d=[].concat(o);u.trigger(s,"beforeAdd",{object:o});for(var l=0;l<d.length;l++){var f=d[l];switch(f.type){case"body":if(f.parent!==f){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}i.addBody(s,f);break;case"constraint":i.addConstraint(s,f);break;case"composite":i.addComposite(s,f);break;case"mouseConstraint":i.addConstraint(s,f.constraint);break}}return u.trigger(s,"afterAdd",{object:o}),s},i.remove=function(s,o,d){var l=[].concat(o);u.trigger(s,"beforeRemove",{object:o});for(var f=0;f<l.length;f++){var m=l[f];switch(m.type){case"body":i.removeBody(s,m,d);break;case"constraint":i.removeConstraint(s,m,d);break;case"composite":i.removeComposite(s,m,d);break;case"mouseConstraint":i.removeConstraint(s,m.constraint);break}}return u.trigger(s,"afterRemove",{object:o}),s},i.addComposite=function(s,o){return s.composites.push(o),o.parent=s,i.setModified(s,!0,!0,!1),s},i.removeComposite=function(s,o,d){var l=n.indexOf(s.composites,o);if(l!==-1){var f=i.allBodies(o);i.removeCompositeAt(s,l);for(var m=0;m<f.length;m++)f[m].sleepCounter=0}if(d)for(var m=0;m<s.composites.length;m++)i.removeComposite(s.composites[m],o,!0);return s},i.removeCompositeAt=function(s,o){return s.composites.splice(o,1),i.setModified(s,!0,!0,!1),s},i.addBody=function(s,o){return s.bodies.push(o),i.setModified(s,!0,!0,!1),s},i.removeBody=function(s,o,d){var l=n.indexOf(s.bodies,o);if(l!==-1&&(i.removeBodyAt(s,l),o.sleepCounter=0),d)for(var f=0;f<s.composites.length;f++)i.removeBody(s.composites[f],o,!0);return s},i.removeBodyAt=function(s,o){return s.bodies.splice(o,1),i.setModified(s,!0,!0,!1),s},i.addConstraint=function(s,o){return s.constraints.push(o),i.setModified(s,!0,!0,!1),s},i.removeConstraint=function(s,o,d){var l=n.indexOf(s.constraints,o);if(l!==-1&&i.removeConstraintAt(s,l),d)for(var f=0;f<s.composites.length;f++)i.removeConstraint(s.composites[f],o,!0);return s},i.removeConstraintAt=function(s,o){return s.constraints.splice(o,1),i.setModified(s,!0,!0,!1),s},i.clear=function(s,o,d){if(d)for(var l=0;l<s.composites.length;l++)i.clear(s.composites[l],o,!0);return o?s.bodies=s.bodies.filter(function(f){return f.isStatic}):s.bodies.length=0,s.constraints.length=0,s.composites.length=0,i.setModified(s,!0,!0,!1),s},i.allBodies=function(s){if(s.cache&&s.cache.allBodies)return s.cache.allBodies;for(var o=[].concat(s.bodies),d=0;d<s.composites.length;d++)o=o.concat(i.allBodies(s.composites[d]));return s.cache&&(s.cache.allBodies=o),o},i.allConstraints=function(s){if(s.cache&&s.cache.allConstraints)return s.cache.allConstraints;for(var o=[].concat(s.constraints),d=0;d<s.composites.length;d++)o=o.concat(i.allConstraints(s.composites[d]));return s.cache&&(s.cache.allConstraints=o),o},i.allComposites=function(s){if(s.cache&&s.cache.allComposites)return s.cache.allComposites;for(var o=[].concat(s.composites),d=0;d<s.composites.length;d++)o=o.concat(i.allComposites(s.composites[d]));return s.cache&&(s.cache.allComposites=o),o},i.get=function(s,o,d){var l,f;switch(d){case"body":l=i.allBodies(s);break;case"constraint":l=i.allConstraints(s);break;case"composite":l=i.allComposites(s).concat(s);break}return l?(f=l.filter(function(m){return m.id.toString()===o.toString()}),f.length===0?null:f[0]):null},i.move=function(s,o,d){return i.remove(s,o),i.add(d,o),s},i.rebase=function(s){for(var o=i.allBodies(s).concat(i.allConstraints(s)).concat(i.allComposites(s)),d=0;d<o.length;d++)o[d].id=n.nextId();return s},i.translate=function(s,o,d){for(var l=d?i.allBodies(s):s.bodies,f=0;f<l.length;f++)a.translate(l[f],o);return s},i.rotate=function(s,o,d,l){for(var f=Math.cos(o),m=Math.sin(o),g=l?i.allBodies(s):s.bodies,p=0;p<g.length;p++){var y=g[p],S=y.position.x-d.x,C=y.position.y-d.y;a.setPosition(y,{x:d.x+(S*f-C*m),y:d.y+(S*m+C*f)}),a.rotate(y,o)}return s},i.scale=function(s,o,d,l,f){for(var m=f?i.allBodies(s):s.bodies,g=0;g<m.length;g++){var p=m[g],y=p.position.x-l.x,S=p.position.y-l.y;a.setPosition(p,{x:l.x+y*o,y:l.y+S*d}),a.scale(p,o,d)}return s},i.bounds=function(s){for(var o=i.allBodies(s),d=[],l=0;l<o.length;l+=1){var f=o[l];d.push(f.bounds.min,f.bounds.max)}return r.create(d)},i.wrap=function(s,o){var d=r.wrap(i.bounds(s),o);return d&&i.translate(s,d),d}})()},4372:(h,w,e)=>{var i={};h.exports=i;var u=e(69351);(function(){i.create=u.create,i.add=u.add,i.remove=u.remove,i.clear=u.clear,i.addComposite=u.addComposite,i.addBody=u.addBody,i.addConstraint=u.addConstraint})()},52284:(h,w,e)=>{var i={};h.exports=i;var u=e(41598),n=e(4506);(function(){var r=[],a={overlap:0,axis:null},s={overlap:0,axis:null};i.create=function(o,d){return{pair:null,collided:!1,bodyA:o,bodyB:d,parentA:o.parent,parentB:d.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},i.collides=function(o,d,l){if(i._overlapAxes(a,o.vertices,d.vertices,o.axes),a.overlap<=0||(i._overlapAxes(s,d.vertices,o.vertices,d.axes),s.overlap<=0))return null;var f=l&&l.table[n.id(o,d)],m;f?m=f.collision:(m=i.create(o,d),m.collided=!0,m.bodyA=o.id<d.id?o:d,m.bodyB=o.id<d.id?d:o,m.parentA=m.bodyA.parent,m.parentB=m.bodyB.parent),o=m.bodyA,d=m.bodyB;var g;a.overlap<s.overlap?g=a:g=s;var p=m.normal,y=m.tangent,S=m.penetration,C=m.supports,A=g.overlap,M=g.axis,L=M.x,P=M.y,O=d.position.x-o.position.x,D=d.position.y-o.position.y;L*O+P*D>=0&&(L=-L,P=-P),p.x=L,p.y=P,y.x=-P,y.y=L,S.x=L*A,S.y=P*A,m.depth=A;var I=i._findSupports(o,d,p,1),F=0;if(u.contains(o.vertices,I[0])&&(C[F++]=I[0]),u.contains(o.vertices,I[1])&&(C[F++]=I[1]),F<2){var H=i._findSupports(d,o,p,-1);u.contains(d.vertices,H[0])&&(C[F++]=H[0]),F<2&&u.contains(d.vertices,H[1])&&(C[F++]=H[1])}return F===0&&(C[F++]=I[0]),m.supportCount=F,m},i._overlapAxes=function(o,d,l,f){var m=d.length,g=l.length,p=d[0].x,y=d[0].y,S=l[0].x,C=l[0].y,A=f.length,M=Number.MAX_VALUE,L=0,P,O,D,I,F,H;for(F=0;F<A;F++){var k=f[F],W=k.x,$=k.y,K=p*W+y*$,Z=S*W+C*$,X=K,j=Z;for(H=1;H<m;H+=1)I=d[H].x*W+d[H].y*$,I>X?X=I:I<K&&(K=I);for(H=1;H<g;H+=1)I=l[H].x*W+l[H].y*$,I>j?j=I:I<Z&&(Z=I);if(O=X-Z,D=j-K,P=O<D?O:D,P<M&&(M=P,L=F,P<=0))break}o.axis=f[L],o.overlap=M},i._findSupports=function(o,d,l,f){var m=d.vertices,g=m.length,p=o.position.x,y=o.position.y,S=l.x*f,C=l.y*f,A=m[0],M=A,L=S*(p-M.x)+C*(y-M.y),P,O,D;for(D=1;D<g;D+=1)M=m[D],O=S*(p-M.x)+C*(y-M.y),O<L&&(L=O,A=M);return P=m[(g+A.index-1)%g],L=S*(p-P.x)+C*(y-P.y),M=m[(A.index+1)%g],S*(p-M.x)+C*(y-M.y)<L?(r[0]=A,r[1]=M,r):(r[0]=A,r[1]=P,r)}})()},43424:h=>{var w={};h.exports=w,function(){w.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},81388:(h,w,e)=>{var i={};h.exports=i;var u=e(53402),n=e(52284);(function(){i.create=function(r){var a={bodies:[],collisions:[],pairs:null};return u.extend(a,r)},i.setBodies=function(r,a){r.bodies=a.slice(0)},i.clear=function(r){r.bodies=[],r.collisions=[]},i.collisions=function(r){var a=r.pairs,s=r.bodies,o=s.length,d=i.canCollide,l=n.collides,f=r.collisions,m=0,g,p;for(s.sort(i._compareBoundsX),g=0;g<o;g++){var y=s[g],S=y.bounds,C=y.bounds.max.x,A=y.bounds.max.y,M=y.bounds.min.y,L=y.isStatic||y.isSleeping,P=y.parts.length,O=P===1;for(p=g+1;p<o;p++){var D=s[p],I=D.bounds;if(I.min.x>C)break;if(!(A<I.min.y||M>I.max.y)&&!(L&&(D.isStatic||D.isSleeping))&&d(y.collisionFilter,D.collisionFilter)){var F=D.parts.length;if(O&&F===1){var H=l(y,D,a);H&&(f[m++]=H)}else for(var k=P>1?1:0,W=F>1?1:0,$=k;$<P;$++)for(var K=y.parts[$],S=K.bounds,Z=W;Z<F;Z++){var X=D.parts[Z],I=X.bounds;if(!(S.min.x>I.max.x||S.max.x<I.min.x||S.max.y<I.min.y||S.min.y>I.max.y)){var H=l(K,X,a);H&&(f[m++]=H)}}}}}return f.length!==m&&(f.length=m),f},i.canCollide=function(r,a){return r.group===a.group&&r.group!==0?r.group>0:(r.mask&a.category)!==0&&(a.mask&r.category)!==0},i._compareBoundsX=function(r,a){return r.bounds.min.x-a.bounds.min.x}})()},4506:(h,w,e)=>{var i={};h.exports=i;var u=e(43424);(function(){i.create=function(n,r){var a=n.bodyA,s=n.bodyB,o={id:i.id(a,s),bodyA:a,bodyB:s,collision:n,contacts:[u.create(),u.create()],contactCount:0,separation:0,isActive:!0,isSensor:a.isSensor||s.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(o,n,r),o},i.update=function(n,r,a){var s=r.supports,o=r.supportCount,d=n.contacts,l=r.parentA,f=r.parentB;n.isActive=!0,n.timeUpdated=a,n.collision=r,n.separation=r.depth,n.inverseMass=l.inverseMass+f.inverseMass,n.friction=l.friction<f.friction?l.friction:f.friction,n.frictionStatic=l.frictionStatic>f.frictionStatic?l.frictionStatic:f.frictionStatic,n.restitution=l.restitution>f.restitution?l.restitution:f.restitution,n.slop=l.slop>f.slop?l.slop:f.slop,n.contactCount=o,r.pair=n;var m=s[0],g=d[0],p=s[1],y=d[1];(y.vertex===m||g.vertex===p)&&(d[1]=g,d[0]=g=y,y=d[1]),g.vertex=m,y.vertex=p},i.setActive=function(n,r,a){r?(n.isActive=!0,n.timeUpdated=a):(n.isActive=!1,n.contactCount=0)},i.id=function(n,r){return n.id<r.id?n.id.toString(36)+":"+r.id.toString(36):r.id.toString(36)+":"+n.id.toString(36)}})()},99561:(h,w,e)=>{var i={};h.exports=i;var u=e(4506),n=e(53402);(function(){i.create=function(r){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},i.update=function(r,a,s){var o=u.update,d=u.create,l=u.setActive,f=r.table,m=r.list,g=m.length,p=g,y=r.collisionStart,S=r.collisionEnd,C=r.collisionActive,A=a.length,M=0,L=0,P=0,O,D,I;for(I=0;I<A;I++)O=a[I],D=O.pair,D?(D.isActive&&(C[P++]=D),o(D,O,s)):(D=d(O,s),f[D.id]=D,y[M++]=D,m[p++]=D);for(p=0,g=m.length,I=0;I<g;I++)D=m[I],D.timeUpdated>=s?m[p++]=D:(l(D,!1,s),D.collision.bodyA.sleepCounter>0&&D.collision.bodyB.sleepCounter>0?m[p++]=D:(S[L++]=D,delete f[D.id]));m.length!==p&&(m.length=p),y.length!==M&&(y.length=M),S.length!==L&&(S.length=L),C.length!==P&&(C.length=P)},i.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()},73296:(h,w,e)=>{var i={};h.exports=i;var u=e(31725),n=e(52284),r=e(15647),a=e(66280),s=e(41598);(function(){i.collides=function(o,d){for(var l=[],f=d.length,m=o.bounds,g=n.collides,p=r.overlaps,y=0;y<f;y++){var S=d[y],C=S.parts.length,A=C===1?0:1;if(o!==S&&p(S.bounds,m))for(var M=A;M<C;M++){var L=S.parts[M];if(p(L.bounds,m)){var P=g(L,o);if(P){l.push(P);break}}}}return l},i.ray=function(o,d,l,f){f=f||1e-100;for(var m=u.angle(d,l),g=u.magnitude(u.sub(d,l)),p=(l.x+d.x)*.5,y=(l.y+d.y)*.5,S=a.rectangle(p,y,g,f,{angle:m}),C=i.collides(S,o),A=0;A<C.length;A+=1){var M=C[A];M.body=M.bodyB=M.bodyA}return C},i.region=function(o,d,l){for(var f=[],m=0;m<o.length;m++){var g=o[m],p=r.overlaps(g.bounds,d);(p&&!l||!p&&l)&&f.push(g)}return f},i.point=function(o,d){for(var l=[],f=0;f<o.length;f++){var m=o[f];if(r.contains(m.bounds,d))for(var g=m.parts.length===1?0:1;g<m.parts.length;g++){var p=m.parts[g];if(r.contains(p.bounds,d)&&s.contains(p.vertices,d)){l.push(m);break}}}return l}})()},66272:(h,w,e)=>{var i={};h.exports=i;var u=e(41598),n=e(53402),r=e(15647);(function(){i._restingThresh=2,i._restingThreshTangent=Math.sqrt(6),i._positionDampen=.9,i._positionWarming=.8,i._frictionNormalMultiplier=5,i._frictionMaxStatic=Number.MAX_VALUE,i.preSolvePosition=function(a){var s,o,d,l=a.length;for(s=0;s<l;s++)o=a[s],o.isActive&&(d=o.contactCount,o.collision.parentA.totalContacts+=d,o.collision.parentB.totalContacts+=d)},i.solvePosition=function(a,s,o){var d,l,f,m,g,p,y,S,C=i._positionDampen*(o||1),A=n.clamp(s/n._baseDelta,0,1),M=a.length;for(d=0;d<M;d++)l=a[d],!(!l.isActive||l.isSensor)&&(f=l.collision,m=f.parentA,g=f.parentB,p=f.normal,l.separation=f.depth+p.x*(g.positionImpulse.x-m.positionImpulse.x)+p.y*(g.positionImpulse.y-m.positionImpulse.y));for(d=0;d<M;d++)l=a[d],!(!l.isActive||l.isSensor)&&(f=l.collision,m=f.parentA,g=f.parentB,p=f.normal,S=l.separation-l.slop*A,(m.isStatic||g.isStatic)&&(S*=2),m.isStatic||m.isSleeping||(y=C/m.totalContacts,m.positionImpulse.x+=p.x*S*y,m.positionImpulse.y+=p.y*S*y),g.isStatic||g.isSleeping||(y=C/g.totalContacts,g.positionImpulse.x-=p.x*S*y,g.positionImpulse.y-=p.y*S*y))},i.postSolvePosition=function(a){for(var s=i._positionWarming,o=a.length,d=u.translate,l=r.update,f=0;f<o;f++){var m=a[f],g=m.positionImpulse,p=g.x,y=g.y,S=m.velocity;if(m.totalContacts=0,p!==0||y!==0){for(var C=0;C<m.parts.length;C++){var A=m.parts[C];d(A.vertices,g),l(A.bounds,A.vertices,S),A.position.x+=p,A.position.y+=y}m.positionPrev.x+=p,m.positionPrev.y+=y,p*S.x+y*S.y<0?(g.x=0,g.y=0):(g.x*=s,g.y*=s)}}},i.preSolveVelocity=function(a){var s=a.length,o,d;for(o=0;o<s;o++){var l=a[o];if(!(!l.isActive||l.isSensor)){var f=l.contacts,m=l.contactCount,g=l.collision,p=g.parentA,y=g.parentB,S=g.normal,C=g.tangent;for(d=0;d<m;d++){var A=f[d],M=A.vertex,L=A.normalImpulse,P=A.tangentImpulse;if(L!==0||P!==0){var O=S.x*L+C.x*P,D=S.y*L+C.y*P;p.isStatic||p.isSleeping||(p.positionPrev.x+=O*p.inverseMass,p.positionPrev.y+=D*p.inverseMass,p.anglePrev+=p.inverseInertia*((M.x-p.position.x)*D-(M.y-p.position.y)*O)),y.isStatic||y.isSleeping||(y.positionPrev.x-=O*y.inverseMass,y.positionPrev.y-=D*y.inverseMass,y.anglePrev-=y.inverseInertia*((M.x-y.position.x)*D-(M.y-y.position.y)*O))}}}}},i.solveVelocity=function(a,s){var o=s/n._baseDelta,d=o*o,l=d*o,f=-i._restingThresh*o,m=i._restingThreshTangent,g=i._frictionNormalMultiplier*o,p=i._frictionMaxStatic,y=a.length,S,C,A,M;for(A=0;A<y;A++){var L=a[A];if(!(!L.isActive||L.isSensor)){var P=L.collision,O=P.parentA,D=P.parentB,I=P.normal.x,F=P.normal.y,H=P.tangent.x,k=P.tangent.y,W=L.inverseMass,$=L.friction*L.frictionStatic*g,K=L.contacts,Z=L.contactCount,X=1/Z,j=O.position.x-O.positionPrev.x,Y=O.position.y-O.positionPrev.y,U=O.angle-O.anglePrev,J=D.position.x-D.positionPrev.x,q=D.position.y-D.positionPrev.y,_=D.angle-D.anglePrev;for(M=0;M<Z;M++){var te=K[M],se=te.vertex,ne=se.x-O.position.x,he=se.y-O.position.y,le=se.x-D.position.x,ge=se.y-D.position.y,re=j-he*U,fe=Y+ne*U,Ae=J-ge*_,Ie=q+le*_,Ne=re-Ae,Fe=fe-Ie,Se=I*Ne+F*Fe,Oe=H*Ne+k*Fe,Be=L.separation+Se,Pt=Math.min(Be,1);Pt=Be<0?0:Pt;var Gt=Pt*$;Oe<-Gt||Oe>Gt?(C=Oe>0?Oe:-Oe,S=L.friction*(Oe>0?1:-1)*l,S<-C?S=-C:S>C&&(S=C)):(S=Oe,C=p);var si=ne*F-he*I,It=le*F-ge*I,Ht=X/(W+O.inverseInertia*si*si+D.inverseInertia*It*It),hi=(1+L.restitution)*Se*Ht;if(S*=Ht,Se<f)te.normalImpulse=0;else{var Ai=te.normalImpulse;te.normalImpulse+=hi,te.normalImpulse>0&&(te.normalImpulse=0),hi=te.normalImpulse-Ai}if(Oe<-m||Oe>m)te.tangentImpulse=0;else{var Ot=te.tangentImpulse;te.tangentImpulse+=S,te.tangentImpulse<-C&&(te.tangentImpulse=-C),te.tangentImpulse>C&&(te.tangentImpulse=C),S=te.tangentImpulse-Ot}var qt=I*hi+H*S,jt=F*hi+k*S;O.isStatic||O.isSleeping||(O.positionPrev.x+=qt*O.inverseMass,O.positionPrev.y+=jt*O.inverseMass,O.anglePrev+=(ne*jt-he*qt)*O.inverseInertia),D.isStatic||D.isSleeping||(D.positionPrev.x-=qt*D.inverseMass,D.positionPrev.y-=jt*D.inverseMass,D.anglePrev-=(le*jt-ge*qt)*D.inverseInertia)}}}}})()},48140:(h,w,e)=>{var i={};h.exports=i;var u=e(41598),n=e(31725),r=e(53614),a=e(15647),s=e(66615),o=e(53402);(function(){i._warming=.4,i._torqueDampen=1,i._minLength=1e-6,i.create=function(d){var l=d;l.bodyA&&!l.pointA&&(l.pointA={x:0,y:0}),l.bodyB&&!l.pointB&&(l.pointB={x:0,y:0});var f=l.bodyA?n.add(l.bodyA.position,l.pointA):l.pointA,m=l.bodyB?n.add(l.bodyB.position,l.pointB):l.pointB,g=n.magnitude(n.sub(f,m));l.length=typeof l.length<"u"?l.length:g,l.id=l.id||o.nextId(),l.label=l.label||"Constraint",l.type="constraint",l.stiffness=l.stiffness||(l.length>0?1:.7),l.damping=l.damping||0,l.angularStiffness=l.angularStiffness||0,l.angleA=l.bodyA?l.bodyA.angle:l.angleA,l.angleB=l.bodyB?l.bodyB.angle:l.angleB,l.plugin={};var p={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return l.length===0&&l.stiffness>.1?(p.type="pin",p.anchors=!1):l.stiffness<.9&&(p.type="spring"),l.render=o.extend(p,l.render),l},i.preSolveAll=function(d){for(var l=0;l<d.length;l+=1){var f=d[l],m=f.constraintImpulse;f.isStatic||m.x===0&&m.y===0&&m.angle===0||(f.position.x+=m.x,f.position.y+=m.y,f.angle+=m.angle)}},i.solveAll=function(d,l){for(var f=o.clamp(l/o._baseDelta,0,1),m=0;m<d.length;m+=1){var g=d[m],p=!g.bodyA||g.bodyA&&g.bodyA.isStatic,y=!g.bodyB||g.bodyB&&g.bodyB.isStatic;(p||y)&&i.solve(d[m],f)}for(m=0;m<d.length;m+=1)g=d[m],p=!g.bodyA||g.bodyA&&g.bodyA.isStatic,y=!g.bodyB||g.bodyB&&g.bodyB.isStatic,!p&&!y&&i.solve(d[m],f)},i.solve=function(d,l){var f=d.bodyA,m=d.bodyB,g=d.pointA,p=d.pointB;if(!(!f&&!m)){f&&!f.isStatic&&(n.rotate(g,f.angle-d.angleA,g),d.angleA=f.angle),m&&!m.isStatic&&(n.rotate(p,m.angle-d.angleB,p),d.angleB=m.angle);var y=g,S=p;if(f&&(y=n.add(f.position,g)),m&&(S=n.add(m.position,p)),!(!y||!S)){var C=n.sub(y,S),A=n.magnitude(C);A<i._minLength&&(A=i._minLength);var M=(A-d.length)/A,L=d.stiffness>=1||d.length===0,P=L?d.stiffness*l:d.stiffness*l*l,O=d.damping*l,D=n.mult(C,M*P),I=(f?f.inverseMass:0)+(m?m.inverseMass:0),F=(f?f.inverseInertia:0)+(m?m.inverseInertia:0),H=I+F,k,W,$,K,Z;if(O>0){var X=n.create();$=n.div(C,A),Z=n.sub(m&&n.sub(m.position,m.positionPrev)||X,f&&n.sub(f.position,f.positionPrev)||X),K=n.dot($,Z)}f&&!f.isStatic&&(W=f.inverseMass/I,f.constraintImpulse.x-=D.x*W,f.constraintImpulse.y-=D.y*W,f.position.x-=D.x*W,f.position.y-=D.y*W,O>0&&(f.positionPrev.x-=O*$.x*K*W,f.positionPrev.y-=O*$.y*K*W),k=n.cross(g,D)/H*i._torqueDampen*f.inverseInertia*(1-d.angularStiffness),f.constraintImpulse.angle-=k,f.angle-=k),m&&!m.isStatic&&(W=m.inverseMass/I,m.constraintImpulse.x+=D.x*W,m.constraintImpulse.y+=D.y*W,m.position.x+=D.x*W,m.position.y+=D.y*W,O>0&&(m.positionPrev.x+=O*$.x*K*W,m.positionPrev.y+=O*$.y*K*W),k=n.cross(p,D)/H*i._torqueDampen*m.inverseInertia*(1-d.angularStiffness),m.constraintImpulse.angle+=k,m.angle+=k)}}},i.postSolveAll=function(d){for(var l=0;l<d.length;l++){var f=d[l],m=f.constraintImpulse;if(!(f.isStatic||m.x===0&&m.y===0&&m.angle===0)){r.set(f,!1);for(var g=0;g<f.parts.length;g++){var p=f.parts[g];u.translate(p.vertices,m),g>0&&(p.position.x+=m.x,p.position.y+=m.y),m.angle!==0&&(u.rotate(p.vertices,m.angle,f.position),s.rotate(p.axes,m.angle),g>0&&n.rotateAbout(p.position,m.angle,f.position,p.position)),a.update(p.bounds,p.vertices,f.velocity)}m.angle*=i._warming,m.x*=i._warming,m.y*=i._warming}}},i.pointAWorld=function(d){return{x:(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),y:(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0)}},i.pointBWorld=function(d){return{x:(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),y:(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0)}},i.currentLength=function(d){var l=(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),f=(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0),m=(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),g=(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0),p=l-m,y=f-g;return Math.sqrt(p*p+y*y)}})()},53402:(h,w,e)=>{var i={};h.exports=i,function(){i._baseDelta=16.666666666666668,i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i._warnedOnce={},i._decomp=null,i.extend=function(n,r){var a,s;typeof r=="boolean"?(a=2,s=r):(a=1,s=!0);for(var o=a;o<arguments.length;o++){var d=arguments[o];if(d)for(var l in d)s&&d[l]&&d[l].constructor===Object&&(!n[l]||n[l].constructor===Object)?(n[l]=n[l]||{},i.extend(n[l],s,d[l])):n[l]=d[l]}return n},i.clone=function(n,r){return i.extend({},r,n)},i.keys=function(n){if(Object.keys)return Object.keys(n);var r=[];for(var a in n)r.push(a);return r},i.values=function(n){var r=[];if(Object.keys){for(var a=Object.keys(n),s=0;s<a.length;s++)r.push(n[a[s]]);return r}for(var o in n)r.push(n[o]);return r},i.get=function(n,r,a,s){r=r.split(".").slice(a,s);for(var o=0;o<r.length;o+=1)n=n[r[o]];return n},i.set=function(n,r,a,s,o){var d=r.split(".").slice(s,o);return i.get(n,r,0,-1)[d[d.length-1]]=a,a},i.shuffle=function(n){for(var r=n.length-1;r>0;r--){var a=Math.floor(i.random()*(r+1)),s=n[r];n[r]=n[a],n[a]=s}return n},i.choose=function(n){return n[Math.floor(i.random()*n.length)]},i.isElement=function(n){return typeof HTMLElement<"u"?n instanceof HTMLElement:!!(n&&n.nodeType&&n.nodeName)},i.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"},i.isFunction=function(n){return typeof n=="function"},i.isPlainObject=function(n){return typeof n=="object"&&n.constructor===Object},i.isString=function(n){return toString.call(n)==="[object String]"},i.clamp=function(n,r,a){return n<r?r:n>a?a:n},i.sign=function(n){return n<0?-1:1},i.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-i._nowStartTime},i.random=function(n,r){return n=typeof n<"u"?n:0,r=typeof r<"u"?r:1,n+u()*(r-n)};var u=function(){return i._seed=(i._seed*9301+49297)%233280,i._seed/233280};i.colorToNumber=function(n){return n=n.replace("#",""),n.length==3&&(n=n.charAt(0)+n.charAt(0)+n.charAt(1)+n.charAt(1)+n.charAt(2)+n.charAt(2)),parseInt(n,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warnOnce=function(){var n=Array.prototype.slice.call(arguments).join(" ");i._warnedOnce[n]||(i.warn(n),i._warnedOnce[n]=!0)},i.deprecated=function(n,r,a){n[r]=i.chain(function(){i.warnOnce("🔅 deprecated 🔅",a)},n[r])},i.nextId=function(){return i._nextId++},i.indexOf=function(n,r){if(n.indexOf)return n.indexOf(r);for(var a=0;a<n.length;a++)if(n[a]===r)return a;return-1},i.map=function(n,r){if(n.map)return n.map(r);for(var a=[],s=0;s<n.length;s+=1)a.push(r(n[s]));return a},i.topologicalSort=function(n){var r=[],a=[],s=[];for(var o in n)!a[o]&&!s[o]&&i._topologicalSort(o,a,s,n,r);return r},i._topologicalSort=function(n,r,a,s,o){var d=s[n]||[];a[n]=!0;for(var l=0;l<d.length;l+=1){var f=d[l];a[f]||r[f]||i._topologicalSort(f,r,a,s,o)}a[n]=!1,r[n]=!0,o.push(n)},i.chain=function(){for(var n=[],r=0;r<arguments.length;r+=1){var a=arguments[r];a._chained?n.push.apply(n,a._chained):n.push(a)}var s=function(){for(var o,d=new Array(arguments.length),l=0,f=arguments.length;l<f;l++)d[l]=arguments[l];for(l=0;l<n.length;l+=1){var m=n[l].apply(o,d);typeof m<"u"&&(o=m)}return o};return s._chained=n,s},i.chainPathBefore=function(n,r,a){return i.set(n,r,i.chain(a,i.get(n,r)))},i.chainPathAfter=function(n,r,a){return i.set(n,r,i.chain(i.get(n,r),a))},i.setDecomp=function(n){i._decomp=n},i.getDecomp=function(){var n=i._decomp;try{!n&&typeof window<"u"&&(n=window.decomp),!n&&typeof e.g<"u"&&(n=e.g.decomp)}catch{n=null}return n}}()},48413:(h,w,e)=>{var i={};h.exports=i;var u=e(53614),n=e(66272),r=e(81388),a=e(99561),s=e(35810),o=e(69351),d=e(48140),l=e(53402),f=e(22562);(function(){i._deltaMax=16.666666666666668,i.create=function(m){m=m||{};var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},p=l.extend(g,m);return p.world=m.world||o.create({label:"World"}),p.pairs=m.pairs||a.create(),p.detector=m.detector||r.create(),p.detector.pairs=p.pairs,p.grid={buckets:[]},p.world.gravity=p.gravity,p.broadphase=p.grid,p.metrics={},p},i.update=function(m,g){var p=l.now(),y=m.world,S=m.detector,C=m.pairs,A=m.timing,M=A.timestamp,L;g>i._deltaMax&&l.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",i._deltaMax.toFixed(3),"ms."),g=typeof g<"u"?g:l._baseDelta,g*=A.timeScale,A.timestamp+=g,A.lastDelta=g;var P={timestamp:A.timestamp,delta:g};s.trigger(m,"beforeUpdate",P);var O=o.allBodies(y),D=o.allConstraints(y),I=o.allComposites(y);for(y.isModified&&(r.setBodies(S,O),o.setModified(y,!1,!1,!0)),m.enableSleeping&&u.update(O,g),i._bodiesApplyGravity(O,m.gravity),i.wrap(O,I),i.attractors(O),g>0&&i._bodiesUpdate(O,g),s.trigger(m,"beforeSolve",P),d.preSolveAll(O),L=0;L<m.constraintIterations;L++)d.solveAll(D,g);d.postSolveAll(O);var F=r.collisions(S);a.update(C,F,M),m.enableSleeping&&u.afterCollisions(C.list),C.collisionStart.length>0&&s.trigger(m,"collisionStart",{pairs:C.collisionStart,timestamp:A.timestamp,delta:g});var H=l.clamp(20/m.positionIterations,0,1);for(n.preSolvePosition(C.list),L=0;L<m.positionIterations;L++)n.solvePosition(C.list,g,H);for(n.postSolvePosition(O),d.preSolveAll(O),L=0;L<m.constraintIterations;L++)d.solveAll(D,g);for(d.postSolveAll(O),n.preSolveVelocity(C.list),L=0;L<m.velocityIterations;L++)n.solveVelocity(C.list,g);return i._bodiesUpdateVelocities(O),C.collisionActive.length>0&&s.trigger(m,"collisionActive",{pairs:C.collisionActive,timestamp:A.timestamp,delta:g}),C.collisionEnd.length>0&&s.trigger(m,"collisionEnd",{pairs:C.collisionEnd,timestamp:A.timestamp,delta:g}),i._bodiesClearForces(O),s.trigger(m,"afterUpdate",P),m.timing.lastElapsed=l.now()-p,m},i.merge=function(m,g){if(l.extend(m,g),g.world){m.world=g.world,i.clear(m);for(var p=o.allBodies(m.world),y=0;y<p.length;y++){var S=p[y];u.set(S,!1),S.id=l.nextId()}}},i.clear=function(m){a.clear(m.pairs),r.clear(m.detector)},i._bodiesClearForces=function(m){for(var g=m.length,p=0;p<g;p++){var y=m[p];y.force.x=0,y.force.y=0,y.torque=0}},i._bodiesApplyGravity=function(m,g){var p=typeof g.scale<"u"?g.scale:.001,y=m.length;if(!(g.x===0&&g.y===0||p===0))for(var S=0;S<y;S++){var C=m[S];C.ignoreGravity||C.isStatic||C.isSleeping||(C.force.y+=C.mass*g.y*p,C.force.x+=C.mass*g.x*p)}},i._bodiesUpdate=function(m,g){for(var p=m.length,y=0;y<p;y++){var S=m[y];S.isStatic||S.isSleeping||f.update(S,g)}},i._bodiesUpdateVelocities=function(m){for(var g=m.length,p=0;p<g;p++)f.updateVelocities(m[p])},i.wrap=function(m,g){for(var p=0;p<m.length;p+=1){var y=m[p];y.wrapBounds!==null&&f.wrap(y,y.wrapBounds)}for(p=0;p<g.length;p+=1){var S=g[p];S.wrapBounds!==null&&o.wrap(S,S.wrapBounds)}},i.attractors=function(m){for(var g=0;g<m.length;g++){var p=m[g],y=p.attractors;if(y&&y.length>0)for(var S=0;S<m.length;S++){var C=m[S];if(g!==S)for(var A=0;A<y.length;A++){var M=y[A],L=M;l.isFunction(M)&&(L=M(p,C)),L&&f.applyForce(C,C.position,L)}}}}})()},35810:(h,w,e)=>{var i={};h.exports=i;var u=e(53402);(function(){i.on=function(n,r,a){for(var s=r.split(" "),o,d=0;d<s.length;d++)o=s[d],n.events=n.events||{},n.events[o]=n.events[o]||[],n.events[o].push(a);return a},i.off=function(n,r,a){if(!r){n.events={};return}typeof r=="function"&&(a=r,r=u.keys(n.events).join(" "));for(var s=r.split(" "),o=0;o<s.length;o++){var d=n.events[s[o]],l=[];if(a&&d)for(var f=0;f<d.length;f++)d[f]!==a&&l.push(d[f]);n.events[s[o]]=l}},i.trigger=function(n,r,a){var s,o,d,l,f=n.events;if(f&&u.keys(f).length>0){a||(a={}),s=r.split(" ");for(var m=0;m<s.length;m++)if(o=s[m],d=f[o],d){l=u.clone(a,!1),l.name=o,l.source=n;for(var g=0;g<d.length;g++)d[g].apply(n,[l])}}}})()},6790:(h,w,e)=>{var i={};h.exports=i;var u=e(73832),n=e(53402);(function(){i.name="matter-js",i.version="0.20.0",i.uses=[],i.used=[],i.use=function(){u.use(i,Array.prototype.slice.call(arguments))},i.before=function(r,a){return r=r.replace(/^Matter./,""),n.chainPathBefore(i,r,a)},i.after=function(r,a){return r=r.replace(/^Matter./,""),n.chainPathAfter(i,r,a)}})()},73832:(h,w,e)=>{var i={};h.exports=i;var u=e(53402);(function(){i._registry={},i.register=function(n){if(i.isPlugin(n)||u.warn("Plugin.register:",i.toString(n),"does not implement all required fields."),n.name in i._registry){var r=i._registry[n.name],a=i.versionParse(n.version).number,s=i.versionParse(r.version).number;a>s?(u.warn("Plugin.register:",i.toString(r),"was upgraded to",i.toString(n)),i._registry[n.name]=n):a<s?u.warn("Plugin.register:",i.toString(r),"can not be downgraded to",i.toString(n)):n!==r&&u.warn("Plugin.register:",i.toString(n),"is already registered to different plugin object")}else i._registry[n.name]=n;return n},i.resolve=function(n){return i._registry[i.dependencyParse(n).name]},i.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},i.isPlugin=function(n){return n&&n.name&&n.version&&n.install},i.isUsed=function(n,r){return n.used.indexOf(r)>-1},i.isFor=function(n,r){var a=n.for&&i.dependencyParse(n.for);return!n.for||r.name===a.name&&i.versionSatisfies(r.version,a.range)},i.use=function(n,r){if(n.uses=(n.uses||[]).concat(r||[]),n.uses.length===0){u.warn("Plugin.use:",i.toString(n),"does not specify any dependencies to install.");return}for(var a=i.dependencies(n),s=u.topologicalSort(a),o=[],d=0;d<s.length;d+=1)if(s[d]!==n.name){var l=i.resolve(s[d]);if(!l){o.push("❌ "+s[d]);continue}i.isUsed(n,l.name)||(i.isFor(l,n)||(u.warn("Plugin.use:",i.toString(l),"is for",l.for,"but installed on",i.toString(n)+"."),l._warned=!0),l.install?l.install(n):(u.warn("Plugin.use:",i.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(o.push("🔶 "+i.toString(l)),delete l._warned):o.push("✅ "+i.toString(l)),n.used.push(l.name))}o.length>0&&!l.silent&&u.info(o.join("  "))},i.dependencies=function(n,r){var a=i.dependencyParse(n),s=a.name;if(r=r||{},!(s in r)){n=i.resolve(n)||n,r[s]=u.map(n.uses||[],function(d){i.isPlugin(d)&&i.register(d);var l=i.dependencyParse(d),f=i.resolve(d);return f&&!i.versionSatisfies(f.version,l.range)?(u.warn("Plugin.dependencies:",i.toString(f),"does not satisfy",i.toString(l),"used by",i.toString(a)+"."),f._warned=!0,n._warned=!0):f||(u.warn("Plugin.dependencies:",i.toString(d),"used by",i.toString(a),"could not be resolved."),n._warned=!0),l.name});for(var o=0;o<r[s].length;o+=1)i.dependencies(r[s][o],r);return r}},i.dependencyParse=function(n){if(u.isString(n)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(n)||u.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},i.versionParse=function(n){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(n)||u.warn("Plugin.versionParse:",n,"is not a valid version or range.");var a=r.exec(n),s=Number(a[4]),o=Number(a[5]),d=Number(a[6]);return{isRange:!!(a[1]||a[2]),version:a[3],range:n,operator:a[1]||a[2]||"",major:s,minor:o,patch:d,parts:[s,o,d],prerelease:a[7],number:s*1e8+o*1e4+d}},i.versionSatisfies=function(n,r){r=r||"*";var a=i.versionParse(r),s=i.versionParse(n);if(a.isRange){if(a.operator==="*"||n==="*")return!0;if(a.operator===">")return s.number>a.number;if(a.operator===">=")return s.number>=a.number;if(a.operator==="~")return s.major===a.major&&s.minor===a.minor&&s.patch>=a.patch;if(a.operator==="^")return a.major>0?s.major===a.major&&s.number>=a.number:a.minor>0?s.minor===a.minor&&s.patch>=a.patch:s.patch===a.patch}return n===r||n==="*"}})()},13037:(h,w,e)=>{var i={};h.exports=i;var u=e(35810),n=e(48413),r=e(53402);(function(){i._maxFrameDelta=66.66666666666667,i._frameDeltaFallback=16.666666666666668,i._timeBufferMargin=1.5,i._elapsedNextEstimate=1,i._smoothingLowerBound=.1,i._smoothingUpperBound=.9,i.create=function(s){var o={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},d=r.extend(o,s);return d.fps=0,d},i.run=function(s,o){return s.timeBuffer=i._frameDeltaFallback,function d(l){s.frameRequestId=i._onNextFrame(s,d),l&&s.enabled&&i.tick(s,o,l)}(),s},i.tick=function(s,o,d){var l=r.now(),f=s.delta,m=0,g=d-s.timeLastTick;if((!g||!s.timeLastTick||g>Math.max(i._maxFrameDelta,s.maxFrameTime))&&(g=s.frameDelta||i._frameDeltaFallback),s.frameDeltaSmoothing){s.frameDeltaHistory.push(g),s.frameDeltaHistory=s.frameDeltaHistory.slice(-s.frameDeltaHistorySize);var p=s.frameDeltaHistory.slice(0).sort(),y=s.frameDeltaHistory.slice(p.length*i._smoothingLowerBound,p.length*i._smoothingUpperBound),S=a(y);g=S||g}s.frameDeltaSnapping&&(g=1e3/Math.round(1e3/g)),s.frameDelta=g,s.timeLastTick=d,s.timeBuffer+=s.frameDelta,s.timeBuffer=r.clamp(s.timeBuffer,0,s.frameDelta+f*i._timeBufferMargin),s.lastUpdatesDeferred=0;var C=s.maxUpdates||Math.ceil(s.maxFrameTime/f),A={timestamp:o.timing.timestamp};u.trigger(s,"beforeTick",A),u.trigger(s,"tick",A);for(var M=r.now();f>0&&s.timeBuffer>=f*i._timeBufferMargin;){u.trigger(s,"beforeUpdate",A),n.update(o,f),u.trigger(s,"afterUpdate",A),s.timeBuffer-=f,m+=1;var L=r.now()-l,P=r.now()-M,O=L+i._elapsedNextEstimate*P/m;if(m>=C||O>s.maxFrameTime){s.lastUpdatesDeferred=Math.round(Math.max(0,s.timeBuffer/f-i._timeBufferMargin));break}}o.timing.lastUpdatesPerFrame=m,u.trigger(s,"afterTick",A),s.frameDeltaHistory.length>=100&&(s.lastUpdatesDeferred&&Math.round(s.frameDelta/f)>C?r.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):s.lastUpdatesDeferred&&r.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof s.isFixed<"u"&&r.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(s.deltaMin||s.deltaMax)&&r.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),s.fps!==0&&r.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},i.stop=function(s){i._cancelNextFrame(s)},i._onNextFrame=function(s,o){if(typeof window<"u"&&window.requestAnimationFrame)s.frameRequestId=window.requestAnimationFrame(o);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return s.frameRequestId},i._cancelNextFrame=function(s){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(s.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var a=function(s){for(var o=0,d=s.length,l=0;l<d;l+=1)o+=s[l];return o/d||0}})()},53614:(h,w,e)=>{var i={};h.exports=i;var u=e(22562),n=e(35810),r=e(53402);(function(){i._motionWakeThreshold=.18,i._motionSleepThreshold=.08,i._minBias=.9,i.update=function(a,s){for(var o=s/r._baseDelta,d=i._motionSleepThreshold,l=0;l<a.length;l++){var f=a[l],m=u.getSpeed(f),g=u.getAngularSpeed(f),p=m*m+g*g;if(f.force.x!==0||f.force.y!==0){i.set(f,!1);continue}var y=Math.min(f.motion,p),S=Math.max(f.motion,p);f.motion=i._minBias*y+(1-i._minBias)*S,f.sleepThreshold>0&&f.motion<d?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold/o&&i.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},i.afterCollisions=function(a){for(var s=i._motionSleepThreshold,o=0;o<a.length;o++){var d=a[o];if(d.isActive){var l=d.collision,f=l.bodyA.parent,m=l.bodyB.parent;if(!(f.isSleeping&&m.isSleeping||f.isStatic||m.isStatic)&&(f.isSleeping||m.isSleeping)){var g=f.isSleeping&&!f.isStatic?f:m,p=g===f?m:f;!g.isStatic&&p.motion>s&&i.set(g,!1)}}}},i.set=function(a,s){var o=a.isSleeping;s?(a.isSleeping=!0,a.sleepCounter=a.sleepThreshold,a.positionImpulse.x=0,a.positionImpulse.y=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.speed=0,a.angularSpeed=0,a.motion=0,o||n.trigger(a,"sleepStart")):(a.isSleeping=!1,a.sleepCounter=0,o&&n.trigger(a,"sleepEnd"))}})()},66280:(h,w,e)=>{var i={};h.exports=i;var u=e(41598),n=e(53402),r=e(22562),a=e(15647),s=e(31725);(function(){i.rectangle=function(o,d,l,f,m){m=m||{};var g={label:"Rectangle Body",position:{x:o,y:d},vertices:u.fromPath("L 0 0 L "+l+" 0 L "+l+" "+f+" L 0 "+f)};if(m.chamfer){var p=m.chamfer;g.vertices=u.chamfer(g.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete m.chamfer}return r.create(n.extend({},g,m))},i.trapezoid=function(o,d,l,f,m,g){g=g||{},m>=1&&n.warn("Bodies.trapezoid: slope parameter must be < 1."),m*=.5;var p=(1-m*2)*l,y=l*m,S=y+p,C=S+y,A;m<.5?A="L 0 0 L "+y+" "+-f+" L "+S+" "+-f+" L "+C+" 0":A="L 0 0 L "+S+" "+-f+" L "+C+" 0";var M={label:"Trapezoid Body",position:{x:o,y:d},vertices:u.fromPath(A)};if(g.chamfer){var L=g.chamfer;M.vertices=u.chamfer(M.vertices,L.radius,L.quality,L.qualityMin,L.qualityMax),delete g.chamfer}return r.create(n.extend({},M,g))},i.circle=function(o,d,l,f,m){f=f||{};var g={label:"Circle Body",circleRadius:l};m=m||25;var p=Math.ceil(Math.max(10,Math.min(m,l)));return p%2===1&&(p+=1),i.polygon(o,d,p,l,n.extend({},g,f))},i.polygon=function(o,d,l,f,m){if(m=m||{},l<3)return i.circle(o,d,f,m);for(var g=2*Math.PI/l,p="",y=g*.5,S=0;S<l;S+=1){var C=y+S*g,A=Math.cos(C)*f,M=Math.sin(C)*f;p+="L "+A.toFixed(3)+" "+M.toFixed(3)+" "}var L={label:"Polygon Body",position:{x:o,y:d},vertices:u.fromPath(p)};if(m.chamfer){var P=m.chamfer;L.vertices=u.chamfer(L.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete m.chamfer}return r.create(n.extend({},L,m))},i.fromVertices=function(o,d,l,f,m,g,p,y){var S=n.getDecomp(),C,A,M,L,P,O,D,I,F,H,k;for(C=!!(S&&S.quickDecomp),f=f||{},M=[],m=typeof m<"u"?m:!1,g=typeof g<"u"?g:.01,p=typeof p<"u"?p:10,y=typeof y<"u"?y:.01,n.isArray(l[0])||(l=[l]),H=0;H<l.length;H+=1)if(O=l[H],L=u.isConvex(O),P=!L,P&&!C&&n.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),L||!C)L?O=u.clockwiseSort(O):O=u.hull(O),M.push({position:{x:o,y:d},vertices:O});else{var W=O.map(function(te){return[te.x,te.y]});S.makeCCW(W),g!==!1&&S.removeCollinearPoints(W,g),y!==!1&&S.removeDuplicatePoints&&S.removeDuplicatePoints(W,y);var $=S.quickDecomp(W);for(D=0;D<$.length;D++){var K=$[D],Z=K.map(function(te){return{x:te[0],y:te[1]}});p>0&&u.area(Z)<p||M.push({position:u.centre(Z),vertices:Z})}}for(D=0;D<M.length;D++)M[D]=r.create(n.extend(M[D],f));if(m){var X=5;for(D=0;D<M.length;D++){var j=M[D];for(I=D+1;I<M.length;I++){var Y=M[I];if(a.overlaps(j.bounds,Y.bounds)){var U=j.vertices,J=Y.vertices;for(F=0;F<j.vertices.length;F++)for(k=0;k<Y.vertices.length;k++){var q=s.magnitudeSquared(s.sub(U[(F+1)%U.length],J[k])),_=s.magnitudeSquared(s.sub(U[F],J[(k+1)%J.length]));q<X&&_<X&&(U[F].isInternal=!0,J[k].isInternal=!0)}}}}}return M.length>1?(A=r.create(n.extend({parts:M.slice(0)},f)),r.setPosition(A,{x:o,y:d}),A):M[0]},i.flagCoincidentParts=function(o,d){d===void 0&&(d=5);for(var l=0;l<o.length;l++)for(var f=o[l],m=l+1;m<o.length;m++){var g=o[m];if(a.overlaps(f.bounds,g.bounds))for(var p=f.vertices,y=g.vertices,S=0;S<f.vertices.length;S++)for(var C=0;C<g.vertices.length;C++){var A=s.magnitudeSquared(s.sub(p[(S+1)%p.length],y[C])),M=s.magnitudeSquared(s.sub(p[S],y[(C+1)%y.length]));A<d&&M<d&&(p[S].isInternal=!0,y[C].isInternal=!0)}}return o}})()},74116:(h,w,e)=>{var i={};h.exports=i;var u=e(69351),n=e(48140),r=e(53402),a=e(22562),s=e(66280);(function(){i.stack=function(o,d,l,f,m,g,p){for(var y=u.create({label:"Stack"}),S=o,C=d,A,M=0,L=0;L<f;L++){for(var P=0,O=0;O<l;O++){var D=p(S,C,O,L,A,M);if(D){var I=D.bounds.max.y-D.bounds.min.y,F=D.bounds.max.x-D.bounds.min.x;I>P&&(P=I),a.translate(D,{x:F*.5,y:I*.5}),S=D.bounds.max.x+m,u.addBody(y,D),A=D,M+=1}else S+=m}C+=P+g,S=o}return y},i.chain=function(o,d,l,f,m,g){for(var p=o.bodies,y=1;y<p.length;y++){var S=p[y-1],C=p[y],A=S.bounds.max.y-S.bounds.min.y,M=S.bounds.max.x-S.bounds.min.x,L=C.bounds.max.y-C.bounds.min.y,P=C.bounds.max.x-C.bounds.min.x,O={bodyA:S,pointA:{x:M*d,y:A*l},bodyB:C,pointB:{x:P*f,y:L*m}},D=r.extend(O,g);u.addConstraint(o,n.create(D))}return o.label+=" Chain",o},i.mesh=function(o,d,l,f,m){var g=o.bodies,p,y,S,C,A;for(p=0;p<l;p++){for(y=1;y<d;y++)S=g[y-1+p*d],C=g[y+p*d],u.addConstraint(o,n.create(r.extend({bodyA:S,bodyB:C},m)));if(p>0)for(y=0;y<d;y++)S=g[y+(p-1)*d],C=g[y+p*d],u.addConstraint(o,n.create(r.extend({bodyA:S,bodyB:C},m))),f&&y>0&&(A=g[y-1+(p-1)*d],u.addConstraint(o,n.create(r.extend({bodyA:A,bodyB:C},m)))),f&&y<d-1&&(A=g[y+1+(p-1)*d],u.addConstraint(o,n.create(r.extend({bodyA:A,bodyB:C},m))))}return o.label+=" Mesh",o},i.pyramid=function(o,d,l,f,m,g,p){return i.stack(o,d,l,f,m,g,function(y,S,C,A,M,L){var P=Math.min(f,Math.ceil(l/2)),O=M?M.bounds.max.x-M.bounds.min.x:0;if(!(A>P)){A=P-A;var D=A,I=l-1-A;if(!(C<D||C>I)){L===1&&a.translate(M,{x:(C+(l%2===1?1:-1))*O,y:0});var F=M?C*O:0;return p(o+F+C*m,S,C,A,M,L)}}})},i.newtonsCradle=function(o,d,l,f,m){for(var g=u.create({label:"Newtons Cradle"}),p=0;p<l;p++){var y=1.9,S=s.circle(o+p*(f*y),d+m,f,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),C=n.create({pointA:{x:o+p*(f*y),y:d},bodyB:S});u.addBody(g,S),u.addConstraint(g,C)}return g},i.car=function(o,d,l,f,m){var g=a.nextGroup(!0),p=20,y=-l*.5+p,S=l*.5-p,C=0,A=u.create({label:"Car"}),M=s.rectangle(o,d,l,f,{collisionFilter:{group:g},chamfer:{radius:f*.5},density:2e-4}),L=s.circle(o+y,d+C,m,{collisionFilter:{group:g},friction:.8}),P=s.circle(o+S,d+C,m,{collisionFilter:{group:g},friction:.8}),O=n.create({bodyB:M,pointB:{x:y,y:C},bodyA:L,stiffness:1,length:0}),D=n.create({bodyB:M,pointB:{x:S,y:C},bodyA:P,stiffness:1,length:0});return u.addBody(A,M),u.addBody(A,L),u.addBody(A,P),u.addConstraint(A,O),u.addConstraint(A,D),A},i.softBody=function(o,d,l,f,m,g,p,y,S,C){S=r.extend({inertia:1/0},S),C=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},C);var A=i.stack(o,d,l,f,m,g,function(M,L){return s.circle(M,L,y,S)});return i.mesh(A,l,f,p,C),A.label="Soft Body",A}})()},66615:(h,w,e)=>{var i={};h.exports=i;var u=e(31725),n=e(53402);(function(){i.fromVertices=function(r){for(var a={},s=0;s<r.length;s++){var o=(s+1)%r.length,d=u.normalise({x:r[o].y-r[s].y,y:r[s].x-r[o].x}),l=d.y===0?1/0:d.x/d.y;l=l.toFixed(3).toString(),a[l]=d}return n.values(a)},i.rotate=function(r,a){if(a!==0)for(var s=Math.cos(a),o=Math.sin(a),d=0;d<r.length;d++){var l=r[d],f;f=l.x*s-l.y*o,l.y=l.x*o+l.y*s,l.x=f}}})()},15647:h=>{var w={};h.exports=w,function(){w.create=function(e){var i={min:{x:0,y:0},max:{x:0,y:0}};return e&&w.update(i,e),i},w.update=function(e,i,u){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<i.length;n++){var r=i[n];r.x>e.max.x&&(e.max.x=r.x),r.x<e.min.x&&(e.min.x=r.x),r.y>e.max.y&&(e.max.y=r.y),r.y<e.min.y&&(e.min.y=r.y)}u&&(u.x>0?e.max.x+=u.x:e.min.x+=u.x,u.y>0?e.max.y+=u.y:e.min.y+=u.y)},w.contains=function(e,i){return i.x>=e.min.x&&i.x<=e.max.x&&i.y>=e.min.y&&i.y<=e.max.y},w.overlaps=function(e,i){return e.min.x<=i.max.x&&e.max.x>=i.min.x&&e.max.y>=i.min.y&&e.min.y<=i.max.y},w.translate=function(e,i){e.min.x+=i.x,e.max.x+=i.x,e.min.y+=i.y,e.max.y+=i.y},w.shift=function(e,i){var u=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=i.x,e.max.x=i.x+u,e.min.y=i.y,e.max.y=i.y+n},w.wrap=function(e,i,u){var n=null,r=null;if(typeof i.min.x<"u"&&typeof i.max.x<"u"&&(e.min.x>i.max.x?n=i.min.x-e.max.x:e.max.x<i.min.x&&(n=i.max.x-e.min.x)),typeof i.min.y<"u"&&typeof i.max.y<"u"&&(e.min.y>i.max.y?r=i.min.y-e.max.y:e.max.y<i.min.y&&(r=i.max.y-e.min.y)),n!==null||r!==null)return{x:n||0,y:r||0}}}()},74058:(h,w,e)=>{var i={};h.exports=i,e(15647);var u=e(53402);(function(){i.pathToVertices=function(n,r){typeof window<"u"&&!("SVGPathSeg"in window)&&u.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var a,s,o,d,l,f,m,g,p,y,S=[],C,A,M=0,L=0,P=0;r=r||15;var O=function(I,F,H){var k=H%2===1&&H>1;if(!p||I!=p.x||F!=p.y){p&&k?(C=p.x,A=p.y):(C=0,A=0);var W={x:C+I,y:A+F};(k||!p)&&(p=W),S.push(W),L=C+I,P=A+F}},D=function(I){var F=I.pathSegTypeAsLetter.toUpperCase();if(F!=="Z"){switch(F){case"M":case"L":case"T":case"C":case"S":case"Q":L=I.x,P=I.y;break;case"H":L=I.x;break;case"V":P=I.y;break}O(L,P,I.pathSegType)}};for(i._svgPathToAbsolute(n),o=n.getTotalLength(),f=[],a=0;a<n.pathSegList.numberOfItems;a+=1)f.push(n.pathSegList.getItem(a));for(m=f.concat();M<o;){if(y=n.getPathSegAtLength(M),l=f[y],l!=g){for(;m.length&&m[0]!=l;)D(m.shift());g=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=n.getPointAtLength(M),O(d.x,d.y,0);break}M+=r}for(a=0,s=m.length;a<s;++a)D(m[a]);return S},i._svgPathToAbsolute=function(n){for(var r,a,s,o,d,l,f=n.pathSegList,m=0,g=0,p=f.numberOfItems,y=0;y<p;++y){var S=f.getItem(y),C=S.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(C))"x"in S&&(m=S.x),"y"in S&&(g=S.y);else switch("x1"in S&&(s=m+S.x1),"x2"in S&&(d=m+S.x2),"y1"in S&&(o=g+S.y1),"y2"in S&&(l=g+S.y2),"x"in S&&(m+=S.x),"y"in S&&(g+=S.y),C){case"m":f.replaceItem(n.createSVGPathSegMovetoAbs(m,g),y);break;case"l":f.replaceItem(n.createSVGPathSegLinetoAbs(m,g),y);break;case"h":f.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(m),y);break;case"v":f.replaceItem(n.createSVGPathSegLinetoVerticalAbs(g),y);break;case"c":f.replaceItem(n.createSVGPathSegCurvetoCubicAbs(m,g,s,o,d,l),y);break;case"s":f.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(m,g,d,l),y);break;case"q":f.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(m,g,s,o),y);break;case"t":f.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(m,g),y);break;case"a":f.replaceItem(n.createSVGPathSegArcAbs(m,g,S.r1,S.r2,S.angle,S.largeArcFlag,S.sweepFlag),y);break;case"z":case"Z":m=r,g=a;break}(C=="M"||C=="m")&&(r=m,a=g)}}})()},31725:h=>{var w={};h.exports=w,function(){w.create=function(e,i){return{x:e||0,y:i||0}},w.clone=function(e){return{x:e.x,y:e.y}},w.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},w.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},w.rotate=function(e,i,u){var n=Math.cos(i),r=Math.sin(i);u||(u={});var a=e.x*n-e.y*r;return u.y=e.x*r+e.y*n,u.x=a,u},w.rotateAbout=function(e,i,u,n){var r=Math.cos(i),a=Math.sin(i);n||(n={});var s=u.x+((e.x-u.x)*r-(e.y-u.y)*a);return n.y=u.y+((e.x-u.x)*a+(e.y-u.y)*r),n.x=s,n},w.normalise=function(e){var i=w.magnitude(e);return i===0?{x:0,y:0}:{x:e.x/i,y:e.y/i}},w.dot=function(e,i){return e.x*i.x+e.y*i.y},w.cross=function(e,i){return e.x*i.y-e.y*i.x},w.cross3=function(e,i,u){return(i.x-e.x)*(u.y-e.y)-(i.y-e.y)*(u.x-e.x)},w.add=function(e,i,u){return u||(u={}),u.x=e.x+i.x,u.y=e.y+i.y,u},w.sub=function(e,i,u){return u||(u={}),u.x=e.x-i.x,u.y=e.y-i.y,u},w.mult=function(e,i){return{x:e.x*i,y:e.y*i}},w.div=function(e,i){return{x:e.x/i,y:e.y/i}},w.perp=function(e,i){return i=i===!0?-1:1,{x:i*-e.y,y:i*e.x}},w.neg=function(e){return{x:-e.x,y:-e.y}},w.angle=function(e,i){return Math.atan2(i.y-e.y,i.x-e.x)},w._temp=[w.create(),w.create(),w.create(),w.create(),w.create(),w.create()]}()},41598:(h,w,e)=>{var i={};h.exports=i;var u=e(31725),n=e(53402);(function(){i.create=function(r,a){for(var s=[],o=0;o<r.length;o++){var d=r[o],l={x:d.x,y:d.y,index:o,body:a,isInternal:!1};s.push(l)}return s},i.fromPath=function(r,a){var s=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,o=[];return r.replace(s,function(d,l,f){o.push({x:parseFloat(l),y:parseFloat(f)})}),i.create(o,a)},i.centre=function(r){for(var a=i.area(r,!0),s={x:0,y:0},o,d,l,f=0;f<r.length;f++)l=(f+1)%r.length,o=u.cross(r[f],r[l]),d=u.mult(u.add(r[f],r[l]),o),s=u.add(s,d);return u.div(s,6*a)},i.mean=function(r){for(var a={x:0,y:0},s=0;s<r.length;s++)a.x+=r[s].x,a.y+=r[s].y;return u.div(a,r.length)},i.area=function(r,a){for(var s=0,o=r.length-1,d=0;d<r.length;d++)s+=(r[o].x-r[d].x)*(r[o].y+r[d].y),o=d;return a?s/2:Math.abs(s)/2},i.inertia=function(r,a){for(var s=0,o=0,d=r,l,f,m=0;m<d.length;m++)f=(m+1)%d.length,l=Math.abs(u.cross(d[f],d[m])),s+=l*(u.dot(d[f],d[f])+u.dot(d[f],d[m])+u.dot(d[m],d[m])),o+=l;return a/6*(s/o)},i.translate=function(r,a,s){s=typeof s<"u"?s:1;var o=r.length,d=a.x*s,l=a.y*s,f;for(f=0;f<o;f++)r[f].x+=d,r[f].y+=l;return r},i.rotate=function(r,a,s){if(a!==0){var o=Math.cos(a),d=Math.sin(a),l=s.x,f=s.y,m=r.length,g,p,y,S;for(S=0;S<m;S++)g=r[S],p=g.x-l,y=g.y-f,g.x=l+(p*o-y*d),g.y=f+(p*d+y*o);return r}},i.contains=function(r,a){for(var s=a.x,o=a.y,d=r.length,l=r[d-1],f,m=0;m<d;m++){if(f=r[m],(s-l.x)*(f.y-l.y)+(o-l.y)*(l.x-f.x)>0)return!1;l=f}return!0},i.scale=function(r,a,s,o){if(a===1&&s===1)return r;o=o||i.centre(r);for(var d,l,f=0;f<r.length;f++)d=r[f],l=u.sub(d,o),r[f].x=o.x+l.x*a,r[f].y=o.y+l.y*s;return r},i.chamfer=function(r,a,s,o,d){typeof a=="number"?a=[a]:a=a||[8],s=typeof s<"u"?s:-1,o=o||2,d=d||14;for(var l=[],f=0;f<r.length;f++){var m=r[f-1>=0?f-1:r.length-1],g=r[f],p=r[(f+1)%r.length],y=a[f<a.length?f:a.length-1];if(y===0){l.push(g);continue}var S=u.normalise({x:g.y-m.y,y:m.x-g.x}),C=u.normalise({x:p.y-g.y,y:g.x-p.x}),A=Math.sqrt(2*Math.pow(y,2)),M=u.mult(n.clone(S),y),L=u.normalise(u.mult(u.add(S,C),.5)),P=u.sub(g,u.mult(L,A)),O=s;s===-1&&(O=Math.pow(y,.32)*1.75),O=n.clamp(O,o,d),O%2===1&&(O+=1);for(var D=Math.acos(u.dot(S,C)),I=D/O,F=0;F<O;F++)l.push(u.add(u.rotate(M,I*F),P))}return l},i.clockwiseSort=function(r){var a=i.mean(r);return r.sort(function(s,o){return u.angle(a,s)-u.angle(a,o)}),r},i.isConvex=function(r){var a=0,s=r.length,o,d,l,f;if(s<3)return null;for(o=0;o<s;o++)if(d=(o+1)%s,l=(o+2)%s,f=(r[d].x-r[o].x)*(r[l].y-r[d].y),f-=(r[d].y-r[o].y)*(r[l].x-r[d].x),f<0?a|=1:f>0&&(a|=2),a===3)return!1;return a!==0?!0:null},i.hull=function(r){var a=[],s=[],o,d;for(r=r.slice(0),r.sort(function(l,f){var m=l.x-f.x;return m!==0?m:l.y-f.y}),d=0;d<r.length;d+=1){for(o=r[d];s.length>=2&&u.cross3(s[s.length-2],s[s.length-1],o)<=0;)s.pop();s.push(o)}for(d=r.length-1;d>=0;d-=1){for(o=r[d];a.length>=2&&u.cross3(a[a.length-2],a[a.length-1],o)<=0;)a.pop();a.push(o)}return a.pop(),s.pop(),a.concat(s)}})()},55973:h=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={decomp:D,quickDecomp:k,isSimple:F,removeCollinearPoints:W,removeDuplicatePoints:$,makeCCW:p};function w(X,j,Y){Y=Y||0;var U=[0,0],J,q,_,te,se,ne,he;return J=X[1][1]-X[0][1],q=X[0][0]-X[1][0],_=J*X[0][0]+q*X[0][1],te=j[1][1]-j[0][1],se=j[0][0]-j[1][0],ne=te*j[0][0]+se*j[0][1],he=J*se-te*q,K(he,0,Y)||(U[0]=(se*_-q*ne)/he,U[1]=(J*ne-te*_)/he),U}function e(X,j,Y,U){var J=j[0]-X[0],q=j[1]-X[1],_=U[0]-Y[0],te=U[1]-Y[1];if(_*q-te*J===0)return!1;var se=(J*(Y[1]-X[1])+q*(X[0]-Y[0]))/(_*q-te*J),ne=(_*(X[1]-Y[1])+te*(Y[0]-X[0]))/(te*J-_*q);return se>=0&&se<=1&&ne>=0&&ne<=1}function i(X,j,Y){return(j[0]-X[0])*(Y[1]-X[1])-(Y[0]-X[0])*(j[1]-X[1])}function u(X,j,Y){return i(X,j,Y)>0}function n(X,j,Y){return i(X,j,Y)>=0}function r(X,j,Y){return i(X,j,Y)<0}function a(X,j,Y){return i(X,j,Y)<=0}var s=[],o=[];function d(X,j,Y,U){if(U){var J=s,q=o;J[0]=j[0]-X[0],J[1]=j[1]-X[1],q[0]=Y[0]-j[0],q[1]=Y[1]-j[1];var _=J[0]*q[0]+J[1]*q[1],te=Math.sqrt(J[0]*J[0]+J[1]*J[1]),se=Math.sqrt(q[0]*q[0]+q[1]*q[1]),ne=Math.acos(_/(te*se));return ne<U}else return i(X,j,Y)===0}function l(X,j){var Y=j[0]-X[0],U=j[1]-X[1];return Y*Y+U*U}function f(X,j){var Y=X.length;return X[j<0?j%Y+Y:j%Y]}function m(X){X.length=0}function g(X,j,Y,U){for(var J=Y;J<U;J++)X.push(j[J])}function p(X){for(var j=0,Y=X,U=1;U<X.length;++U)(Y[U][1]<Y[j][1]||Y[U][1]===Y[j][1]&&Y[U][0]>Y[j][0])&&(j=U);return u(f(X,j-1),f(X,j),f(X,j+1))?!1:(y(X),!0)}function y(X){for(var j=[],Y=X.length,U=0;U!==Y;U++)j.push(X.pop());for(var U=0;U!==Y;U++)X[U]=j[U]}function S(X,j){return r(f(X,j-1),f(X,j),f(X,j+1))}var C=[],A=[];function M(X,j,Y){var U,J,q=C,_=A;if(n(f(X,j+1),f(X,j),f(X,Y))&&a(f(X,j-1),f(X,j),f(X,Y)))return!1;J=l(f(X,j),f(X,Y));for(var te=0;te!==X.length;++te)if(!((te+1)%X.length===j||te===j)&&n(f(X,j),f(X,Y),f(X,te+1))&&a(f(X,j),f(X,Y),f(X,te))&&(q[0]=f(X,j),q[1]=f(X,Y),_[0]=f(X,te),_[1]=f(X,te+1),U=w(q,_),l(f(X,j),U)<J))return!1;return!0}function L(X,j,Y){for(var U=0;U!==X.length;++U)if(!(U===j||U===Y||(U+1)%X.length===j||(U+1)%X.length===Y)&&e(f(X,j),f(X,Y),f(X,U),f(X,U+1)))return!1;return!0}function P(X,j,Y,U){var J=U||[];if(m(J),j<Y)for(var q=j;q<=Y;q++)J.push(X[q]);else{for(var q=0;q<=Y;q++)J.push(X[q]);for(var q=j;q<X.length;q++)J.push(X[q])}return J}function O(X){for(var j=[],Y=[],U=[],J=[],q=Number.MAX_VALUE,_=0;_<X.length;++_)if(S(X,_)){for(var te=0;te<X.length;++te)if(M(X,_,te)){Y=O(P(X,_,te,J)),U=O(P(X,te,_,J));for(var se=0;se<U.length;se++)Y.push(U[se]);Y.length<q&&(j=Y,q=Y.length,j.push([f(X,_),f(X,te)]))}}return j}function D(X){var j=O(X);return j.length>0?I(X,j):[X]}function I(X,j){if(j.length===0)return[X];if(j instanceof Array&&j.length&&j[0]instanceof Array&&j[0].length===2&&j[0][0]instanceof Array){for(var Y=[X],U=0;U<j.length;U++)for(var J=j[U],q=0;q<Y.length;q++){var _=Y[q],te=I(_,J);if(te){Y.splice(q,1),Y.push(te[0],te[1]);break}}return Y}else{var J=j,U=X.indexOf(J[0]),q=X.indexOf(J[1]);return U!==-1&&q!==-1?[P(X,U,q),P(X,q,U)]:!1}}function F(X){var j=X,Y;for(Y=0;Y<j.length-1;Y++)for(var U=0;U<Y-1;U++)if(e(j[Y],j[Y+1],j[U],j[U+1]))return!1;for(Y=1;Y<j.length-2;Y++)if(e(j[0],j[j.length-1],j[Y],j[Y+1]))return!1;return!0}function H(X,j,Y,U,J){J=J||0;var q=j[1]-X[1],_=X[0]-j[0],te=q*X[0]+_*X[1],se=U[1]-Y[1],ne=Y[0]-U[0],he=se*Y[0]+ne*Y[1],le=q*ne-se*_;return K(le,0,J)?[0,0]:[(ne*te-_*he)/le,(q*he-se*te)/le]}function k(X,j,Y,U,J,q,_){q=q||100,_=_||0,J=J||25,j=typeof j<"u"?j:[],Y=Y||[],U=U||[];var te=[0,0],se=[0,0],ne=[0,0],he=0,le=0,ge=0,re=0,fe=0,Ae=0,Ie=0,Ne=[],Fe=[],Se=X,Oe=X;if(Oe.length<3)return j;if(_++,_>q)return console.warn("quickDecomp: max level ("+q+") reached."),j;for(var Be=0;Be<X.length;++Be)if(S(Se,Be)){Y.push(Se[Be]),he=le=Number.MAX_VALUE;for(var Pt=0;Pt<X.length;++Pt)u(f(Se,Be-1),f(Se,Be),f(Se,Pt))&&a(f(Se,Be-1),f(Se,Be),f(Se,Pt-1))&&(ne=H(f(Se,Be-1),f(Se,Be),f(Se,Pt),f(Se,Pt-1)),r(f(Se,Be+1),f(Se,Be),ne)&&(ge=l(Se[Be],ne),ge<le&&(le=ge,se=ne,Ae=Pt))),u(f(Se,Be+1),f(Se,Be),f(Se,Pt+1))&&a(f(Se,Be+1),f(Se,Be),f(Se,Pt))&&(ne=H(f(Se,Be+1),f(Se,Be),f(Se,Pt),f(Se,Pt+1)),u(f(Se,Be-1),f(Se,Be),ne)&&(ge=l(Se[Be],ne),ge<he&&(he=ge,te=ne,fe=Pt)));if(Ae===(fe+1)%X.length)ne[0]=(se[0]+te[0])/2,ne[1]=(se[1]+te[1])/2,U.push(ne),Be<fe?(g(Ne,Se,Be,fe+1),Ne.push(ne),Fe.push(ne),Ae!==0&&g(Fe,Se,Ae,Se.length),g(Fe,Se,0,Be+1)):(Be!==0&&g(Ne,Se,Be,Se.length),g(Ne,Se,0,fe+1),Ne.push(ne),Fe.push(ne),g(Fe,Se,Ae,Be+1));else{if(Ae>fe&&(fe+=X.length),re=Number.MAX_VALUE,fe<Ae)return j;for(var Pt=Ae;Pt<=fe;++Pt)n(f(Se,Be-1),f(Se,Be),f(Se,Pt))&&a(f(Se,Be+1),f(Se,Be),f(Se,Pt))&&(ge=l(f(Se,Be),f(Se,Pt)),ge<re&&L(Se,Be,Pt)&&(re=ge,Ie=Pt%X.length));Be<Ie?(g(Ne,Se,Be,Ie+1),Ie!==0&&g(Fe,Se,Ie,Oe.length),g(Fe,Se,0,Be+1)):(Be!==0&&g(Ne,Se,Be,Oe.length),g(Ne,Se,0,Ie+1),g(Fe,Se,Ie,Be+1))}return Ne.length<Fe.length?(k(Ne,j,Y,U,J,q,_),k(Fe,j,Y,U,J,q,_)):(k(Fe,j,Y,U,J,q,_),k(Ne,j,Y,U,J,q,_)),j}return j.push(X),j}function W(X,j){for(var Y=0,U=X.length-1;X.length>3&&U>=0;--U)d(f(X,U-1),f(X,U),f(X,U+1),j)&&(X.splice(U%X.length,1),Y++);return Y}function $(X,j){for(var Y=X.length-1;Y>=1;--Y)for(var U=X[Y],J=Y-1;J>=0;--J)if(Z(U,X[J],j)){X.splice(Y,1);continue}}function K(X,j,Y){return Y=Y||0,Math.abs(X-j)<=Y}function Z(X,j,Y){return K(X[0],j[0],Y)&&K(X[1],j[1],Y)}},52018:(h,w,e)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2024 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var i=e(83419),u=new i({initialize:function(r){this.pluginManager=r,this.game=r.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});h.exports=u},42363:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};h.exports=w},37277:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={},e={},i={};i.register=function(u,n,r,a){a===void 0&&(a=!1),w[u]={plugin:n,mapping:r,custom:a}},i.registerCustom=function(u,n,r,a){e[u]={plugin:n,mapping:r,data:a}},i.hasCore=function(u){return w.hasOwnProperty(u)},i.hasCustom=function(u){return e.hasOwnProperty(u)},i.getCore=function(u){return w[u]},i.getCustom=function(u){return e[u]},i.getCustomClass=function(u){return e.hasOwnProperty(u)?e[u].plugin:null},i.remove=function(u){w.hasOwnProperty(u)&&delete w[u]},i.removeCustom=function(u){e.hasOwnProperty(u)&&delete e[u]},i.destroyCorePlugins=function(){for(var u in w)w.hasOwnProperty(u)&&delete w[u]},i.destroyCustomPlugins=function(){for(var u in e)e.hasOwnProperty(u)&&delete e[u]},h.exports=i},77332:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(8443),n=e(50792),r=e(74099),a=e(44603),s=e(39429),o=e(95540),d=e(37277),l=e(72905),f=new i({Extends:n,initialize:function(g){n.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(u.BOOT,this.boot,this)},boot:function(){var m,g,p,y,S,C,A,M=this.game.config,L=M.installGlobalPlugins;for(L=L.concat(this._pendingGlobal),m=0;m<L.length;m++)g=L[m],p=o(g,"key",null),y=o(g,"plugin",null),S=o(g,"start",!1),C=o(g,"mapping",null),A=o(g,"data",null),p&&(y?this.install(p,y,S,C,A):console.warn("Missing `plugin` for key: "+p));for(L=M.installScenePlugins,L=L.concat(this._pendingScene),m=0;m<L.length;m++)g=L[m],p=o(g,"key",null),y=o(g,"plugin",null),C=o(g,"mapping",null),p&&(y?this.installScenePlugin(p,y,C):console.warn("Missing `plugin` for key: "+p));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(u.DESTROY,this.destroy,this)},addToScene:function(m,g,p){var y,S,C,A=this.game,M=m.scene,L=m.settings.map,P=m.settings.isBooted;for(y=0;y<g.length;y++)S=g[y],A[S]?(m[S]=A[S],L.hasOwnProperty(S)&&(M[L[S]]=m[S])):S==="game"&&L.hasOwnProperty(S)&&(M[L[S]]=A);for(var O=0;O<p.length;O++)for(C=p[O],y=0;y<C.length;y++)if(S=C[y],!!d.hasCore(S)){var D=d.getCore(S),I=D.mapping,F=new D.plugin(M,this,I);m[I]=F,D.custom?M[I]=F:L.hasOwnProperty(I)&&(M[L[I]]=F),P&&F.boot()}for(C=this.plugins,y=0;y<C.length;y++){var H=C[y];H.mapping&&(M[H.mapping]=H.plugin)}},getDefaultScenePlugins:function(){var m=this.game.config.defaultPlugins;return m=m.concat(this.scenePlugins),m},installScenePlugin:function(m,g,p,y,S){if(S===void 0&&(S=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+m);return}if(d.hasCore(m)||d.register(m,g,p,!0),this.scenePlugins.indexOf(m)===-1)this.scenePlugins.push(m);else if(!S&&d.hasCore(m)){console.warn("Scene Plugin key in use: "+m);return}if(y){var C=new g(y,this,m);y.sys[m]=C,p&&p!==""&&(y[p]=C),C.boot()}},install:function(m,g,p,y,S){if(p===void 0&&(p=!1),y===void 0&&(y=null),S===void 0&&(S=null),typeof g!="function")return console.warn("Invalid Plugin: "+m),null;if(d.hasCustom(m))return console.warn("Plugin key in use: "+m),null;if(y!==null&&(p=!0),!this.game.isBooted)this._pendingGlobal.push({key:m,plugin:g,start:p,mapping:y,data:S});else if(d.registerCustom(m,g,y,S),p)return this.start(m);return null},getIndex:function(m){for(var g=this.plugins,p=0;p<g.length;p++){var y=g[p];if(y.key===m)return p}return-1},getEntry:function(m){var g=this.getIndex(m);if(g!==-1)return this.plugins[g]},isActive:function(m){var g=this.getEntry(m);return g&&g.active},start:function(m,g){g===void 0&&(g=m);var p=this.getEntry(g);return p&&!p.active?(p.active=!0,p.plugin.start()):p||(p=this.createEntry(m,g)),p?p.plugin:null},createEntry:function(m,g){var p=d.getCustom(m);if(p){var y=new p.plugin(this);p={key:g,plugin:y,active:!0,mapping:p.mapping,data:p.data},this.plugins.push(p),y.init(p.data),y.start()}return p},stop:function(m){var g=this.getEntry(m);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(m,g){g===void 0&&(g=!0);var p=this.getEntry(m);if(p)return p.plugin;var y=this.getClass(m);return y&&g?(p=this.createEntry(m,m),p?p.plugin:null):y||null},getClass:function(m){return d.getCustomClass(m)},removeGlobalPlugin:function(m){var g=this.getEntry(m);g&&l(this.plugins,g),d.removeCustom(m)},removeScenePlugin:function(m){l(this.scenePlugins,m),d.remove(m)},registerGameObject:function(m,g,p){return g&&s.register(m,g),p&&a.register(m,p),this},removeGameObject:function(m,g,p){return g===void 0&&(g=!0),p===void 0&&(p=!0),g&&s.remove(m),p&&a.remove(m),this},registerFileType:function(m,g,p){r.register(m,g),p&&p.sys.load&&(p.sys.load[m]=g)},destroy:function(){for(var m=0;m<this.plugins.length;m++)this.plugins[m].plugin.destroy();d.destroyCustomPlugins(),this.game.noReturn&&d.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});h.exports=f},45145:(h,w,e)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2024 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var i=e(52018),u=e(83419),n=e(44594),r=new u({Extends:i,initialize:function(s,o,d){i.call(this,o),this.scene=s,this.systems=s.sys,this.pluginKey=d,s.sys.events.once(n.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});h.exports=r},18922:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BasePlugin:e(52018),DefaultPlugins:e(42363),PluginCache:e(37277),PluginManager:e(77332),ScenePlugin:e(45145)}},63595:()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(h){const w=performance.now(),e=this.getVideoPlaybackQuality(),i=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,u=(n,r)=>{const a=this.getVideoPlaybackQuality(),s=this.mozPresentedFrames||this.mozPaintedFrames||a.totalVideoFrames-a.droppedVideoFrames;if(s>i){const o=this.mozFrameDelay||a.totalFrameDelay-e.totalFrameDelay||0,d=r-n;h(r,{presentationTime:r+o*1e3,expectedDisplayTime:r+d,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+d/1e3,presentedFrames:s,processingDuration:o}),delete this._rvfcpolyfillmap[w]}else this._rvfcpolyfillmap[w]=requestAnimationFrame(o=>u(r,o))};return this._rvfcpolyfillmap[w]=requestAnimationFrame(n=>u(w,n)),w},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(h){cancelAnimationFrame(this._rvfcpolyfillmap[h]),delete this._rvfcpolyfillmap[h]})},10312:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={DEFAULT:0,LINEAR:0,NEAREST:1};h.exports=w},68627:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(19715),u=e(32880),n=e(83419),r=e(8054),a=e(50792),s=e(92503),o=e(56373),d=e(97480),l=e(69442),f=e(61340),m=new n({Extends:a,initialize:function(p){a.call(this);var y=p.config;this.config={clearBeforeRender:y.clearBeforeRender,backgroundColor:y.backgroundColor,antialias:y.antialias,roundPixels:y.roundPixels},this.game=p,this.type=r.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=p.canvas;var S={alpha:p.config.transparent,desynchronized:p.config.desynchronized,willReadFrequently:!1};this.gameContext=y.context?y.context:this.gameCanvas.getContext("2d",S),this.currentContext=this.gameContext,this.antialias=p.config.antialias,this.blendModes=o(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(l.READY,this.boot,this)},boot:function(){var g=this.game,p=g.scale.baseSize;this.width=p.width,this.height=p.height,this.isBooted=!0,g.scale.on(d.RESIZE,this.onResize,this),this.resize(p.width,p.height)},onResize:function(g,p){(p.width!==this.width||p.height!==this.height)&&this.resize(p.width,p.height)},resize:function(g,p){this.width=g,this.height=p,this.emit(s.RESIZE,g,p)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,p=this.config,y=this.width,S=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),this.emit(s.PRE_RENDER_CLEAR),p.clearBeforeRender&&(g.clearRect(0,0,y,S),p.transparent||(g.fillStyle=p.backgroundColor.rgba,g.fillRect(0,0,y,S))),g.save(),this.drawCount=0,this.emit(s.PRE_RENDER)},render:function(g,p,y){var S=p.length;this.emit(s.RENDER,g,y);var C=y.x,A=y.y,M=y.width,L=y.height,P=y.renderToTexture?y.context:g.sys.context;P.save(),this.game.scene.customViewports&&(P.beginPath(),P.rect(C,A,M,L),P.clip()),y.emit(i.PRE_RENDER,y),this.currentContext=P;var O=y.mask;O&&O.preRenderCanvas(this,null,y._maskCamera),y.transparent||(P.fillStyle=y.backgroundColor.rgba,P.fillRect(C,A,M,L)),P.globalAlpha=y.alpha,P.globalCompositeOperation="source-over",this.drawCount+=S,y.renderToTexture&&y.emit(i.PRE_RENDER,y),y.matrix.copyToContext(P);for(var D=0;D<S;D++){var I=p[D];I.mask&&I.mask.preRenderCanvas(this,I,y),I.renderCanvas(this,I,y),I.mask&&I.mask.postRenderCanvas(this,I,y)}P.setTransform(1,0,0,1,0,0),P.globalCompositeOperation="source-over",P.globalAlpha=1,y.flashEffect.postRenderCanvas(P),y.fadeEffect.postRenderCanvas(P),y.dirty=!1,O&&O.postRenderCanvas(this),P.restore(),y.renderToTexture&&(y.emit(i.POST_RENDER,y),y.renderToGame&&g.sys.context.drawImage(y.canvas,C,A)),y.emit(i.POST_RENDER,y)},postRender:function(){var g=this.gameContext;g.restore(),this.emit(s.POST_RENDER);var p=this.snapshotState;p.callback&&(u(this.gameCanvas,p),p.callback=null)},snapshotCanvas:function(g,p,y,S,C,A,M,L,P){y===void 0&&(y=!1),this.snapshotArea(S,C,A,M,p,L,P);var O=this.snapshotState;return O.getPixel=y,u(g,O),O.callback=null,this},snapshot:function(g,p,y){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,p,y)},snapshotArea:function(g,p,y,S,C,A,M){var L=this.snapshotState;return L.callback=C,L.type=A,L.encoder=M,L.getPixel=!1,L.x=g,L.y=p,L.width=Math.min(y,this.gameCanvas.width),L.height=Math.min(S,this.gameCanvas.height),this},snapshotPixel:function(g,p,y){return this.snapshotArea(g,p,1,1,y),this.snapshotState.getPixel=!0,this},batchSprite:function(g,p,y,S){var C=y.alpha*g.alpha;if(C!==0){var A=this.currentContext,M=this._tempMatrix1,L=this._tempMatrix2,P=p.canvasData,O=P.x,D=P.y,I=p.cutWidth,F=p.cutHeight,H=p.customPivot,k=p.source.resolution,W=g.displayOriginX,$=g.displayOriginY,K=-W+p.x,Z=-$+p.y;if(g.isCropped){var X=g._crop;(X.flipX!==g.flipX||X.flipY!==g.flipY)&&p.updateCropUVs(X,g.flipX,g.flipY),I=X.cw,F=X.ch,O=X.cx,D=X.cy,K=-W+X.x,Z=-$+X.y,g.flipX&&(K>=0?K=-(K+I):K<0&&(K=Math.abs(K)-I)),g.flipY&&(Z>=0?Z=-(Z+F):Z<0&&(Z=Math.abs(Z)-F))}var j=1,Y=1;g.flipX&&(H||(K+=-p.realWidth+W*2),j=-1),g.flipY&&(H||(Z+=-p.realHeight+$*2),Y=-1);var U=g.x,J=g.y;if(y.roundPixels&&(U=Math.floor(U),J=Math.floor(J)),L.applyITRS(U,J,g.rotation,g.scaleX*j,g.scaleY*Y),M.copyFrom(y.matrix),S?(M.multiplyWithOffset(S,-y.scrollX*g.scrollFactorX,-y.scrollY*g.scrollFactorY),L.e=U,L.f=J):(L.e-=y.scrollX*g.scrollFactorX,L.f-=y.scrollY*g.scrollFactorY),M.multiply(L),y.renderRoundPixels&&(M.e=Math.floor(M.e+.5),M.f=Math.floor(M.f+.5)),A.save(),M.setToContext(A),A.globalCompositeOperation=this.blendModes[g.blendMode],A.globalAlpha=C,A.imageSmoothingEnabled=!p.source.scaleMode,g.mask&&g.mask.preRenderCanvas(this,g,y),I>0&&F>0){var q=I/k,_=F/k;y.roundPixels&&(K=Math.floor(K+.5),Z=Math.floor(Z+.5),q+=.5,_+=.5),A.drawImage(p.source.image,O,D,I,F,K,Z,q,_)}g.mask&&g.mask.postRenderCanvas(this,g,y),A.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});h.exports=m},55830:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CanvasRenderer:e(68627),GetBlendModes:e(56373),SetTransform:e(20926)}},56373:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(10312),u=e(89289),n=function(){var r=[],a=u.supportNewBlendModes,s="source-over";return r[i.NORMAL]=s,r[i.ADD]="lighter",r[i.MULTIPLY]=a?"multiply":s,r[i.SCREEN]=a?"screen":s,r[i.OVERLAY]=a?"overlay":s,r[i.DARKEN]=a?"darken":s,r[i.LIGHTEN]=a?"lighten":s,r[i.COLOR_DODGE]=a?"color-dodge":s,r[i.COLOR_BURN]=a?"color-burn":s,r[i.HARD_LIGHT]=a?"hard-light":s,r[i.SOFT_LIGHT]=a?"soft-light":s,r[i.DIFFERENCE]=a?"difference":s,r[i.EXCLUSION]=a?"exclusion":s,r[i.HUE]=a?"hue":s,r[i.SATURATION]=a?"saturation":s,r[i.COLOR]=a?"color":s,r[i.LUMINOSITY]=a?"luminosity":s,r[i.ERASE]="destination-out",r[i.SOURCE_IN]="source-in",r[i.SOURCE_OUT]="source-out",r[i.SOURCE_ATOP]="source-atop",r[i.DESTINATION_OVER]="destination-over",r[i.DESTINATION_IN]="destination-in",r[i.DESTINATION_OUT]="destination-out",r[i.DESTINATION_ATOP]="destination-atop",r[i.LIGHTER]="lighter",r[i.COPY]="copy",r[i.XOR]="xor",r};h.exports=n},20926:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91296),u=function(n,r,a,s,o){var d=s.alpha*a.alpha;if(d<=0)return!1;var l=i(a,s,o).calc;return r.globalCompositeOperation=n.blendModes[a.blendMode],r.globalAlpha=d,r.save(),l.setToContext(r),r.imageSmoothingEnabled=a.frame?!a.frame.source.scaleMode:n.antialias,!0};h.exports=u},63899:h=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="losewebgl"},6119:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postrender"},48070:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prerender"},15640:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="render"},8912:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resize"},87124:h=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="restorewebgl"},92503:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={LOSE_WEBGL:e(63899),POST_RENDER:e(6119),PRE_RENDER:e(48070),RENDER:e(15640),RESIZE:e(8912),RESTORE_WEBGL:e(87124)}},36909:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Events:e(92503),Snapshot:e(89966)},h.exports.Canvas=e(55830),h.exports.WebGL=e(4159)},32880:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(27919),u=e(40987),n=e(95540),r=function(a,s){var o=n(s,"callback"),d=n(s,"type","image/png"),l=n(s,"encoder",.92),f=Math.abs(Math.round(n(s,"x",0))),m=Math.abs(Math.round(n(s,"y",0))),g=Math.floor(n(s,"width",a.width)),p=Math.floor(n(s,"height",a.height)),y=n(s,"getPixel",!1);if(y){var S=a.getContext("2d",{willReadFrequently:!1}),C=S.getImageData(f,m,1,1),A=C.data;o.call(null,new u(A[0],A[1],A[2],A[3]))}else if(f!==0||m!==0||g!==a.width||p!==a.height){var M=i.createWebGL(this,g,p),L=M.getContext("2d",{willReadFrequently:!0});g>0&&p>0&&L.drawImage(a,f,m,g,p,0,0,g,p);var P=new Image;P.onerror=function(){o.call(null),i.remove(M)},P.onload=function(){o.call(null,P),i.remove(M)},P.src=M.toDataURL(d,l)}else{var O=new Image;O.onerror=function(){o.call(null)},O.onload=function(){o.call(null,O)},O.src=a.toDataURL(d,l)}};h.exports=r},88815:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(27919),u=e(40987),n=e(95540),r=function(a,s){var o=a,d=n(s,"callback"),l=n(s,"type","image/png"),f=n(s,"encoder",.92),m=Math.abs(Math.round(n(s,"x",0))),g=Math.abs(Math.round(n(s,"y",0))),p=n(s,"getPixel",!1),y=n(s,"isFramebuffer",!1),S=y?n(s,"bufferWidth",1):o.drawingBufferWidth,C=y?n(s,"bufferHeight",1):o.drawingBufferHeight;if(p){var A=new Uint8Array(4),M=y?g:C-g;o.readPixels(m,M,1,1,o.RGBA,o.UNSIGNED_BYTE,A),d.call(null,new u(A[0],A[1],A[2],A[3]))}else{var L=Math.floor(n(s,"width",S)),P=Math.floor(n(s,"height",C)),O=L*P*4,D=new Uint8Array(O);o.readPixels(m,C-g-P,L,P,o.RGBA,o.UNSIGNED_BYTE,D);for(var I=i.createWebGL(this,L,P),F=I.getContext("2d",{willReadFrequently:!0}),H=F.getImageData(0,0,L,P),k=H.data,W=0;W<P;W++)for(var $=0;$<L;$++){var K=((P-W-1)*L+$)*4,Z=y?O-(W*L+(L-$))*4:(W*L+$)*4;k[Z+0]=D[K+0],k[Z+1]=D[K+1],k[Z+2]=D[K+2],k[Z+3]=D[K+3]}F.putImageData(H,0,0);var X=new Image;X.onerror=function(){d.call(null),i.remove(I)},X.onload=function(){d.call(null,X),i.remove(I)},X.src=I.toDataURL(l,f)}};h.exports=r},89966:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Canvas:e(32880),WebGL:e(88815)}},7530:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(36060),n=e(90330),r=e(82264),a=e(95540),s=e(32302),o=e(63448),d=e(31302),l=e(58918),f=e(14811),m=e(92651),g=e(96569),p=e(56527),y=e(57516),S=e(43439),C=e(81041),A=e(12385),M=e(7589),L=e(95428),P=e(72905),O=new i({initialize:function(I){this.game=I.game,this.renderer=I,this.classes=new n([[u.UTILITY_PIPELINE,M],[u.MULTI_PIPELINE,y],[u.BITMAPMASK_PIPELINE,d],[u.SINGLE_PIPELINE,A],[u.ROPE_PIPELINE,C],[u.LIGHT_PIPELINE,g],[u.POINTLIGHT_PIPELINE,S],[u.MOBILE_PIPELINE,p]]),this.postPipelineClasses=new n,this.pipelines=new n,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(D,I,F){var H=this.renderer,k=this.renderTargets;this.frameInc=Math.floor(a(D,"frameInc",32));var W=H.width,$=H.height,K=this.game.config.disablePreFX,Z=this.game.config.disablePostFX;if(Z||this.postPipelineClasses.setAll([[String(f.BARREL),l.Barrel],[String(f.BLOOM),l.Bloom],[String(f.BLUR),l.Blur],[String(f.BOKEH),l.Bokeh],[String(f.CIRCLE),l.Circle],[String(f.COLOR_MATRIX),l.ColorMatrix],[String(f.DISPLACEMENT),l.Displacement],[String(f.GLOW),l.Glow],[String(f.GRADIENT),l.Gradient],[String(f.PIXELATE),l.Pixelate],[String(f.SHADOW),l.Shadow],[String(f.SHINE),l.Shine],[String(f.VIGNETTE),l.Vignette],[String(f.WIPE),l.Wipe]]),!K){this.classes.set(u.FX_PIPELINE,m);for(var X=Math.min(W,$),j=Math.ceil(X/this.frameInc),Y=1;Y<j;Y++){var U=Y*this.frameInc;k.push(new s(H,U,U)),k.push(new s(H,U,U)),k.push(new s(H,U,U)),this.maxDimension=U}k.push(new s(H,W,$,1,0,!0,!0)),k.push(new s(H,W,$,1,0,!0,!0)),k.push(new s(H,W,$,1,0,!0,!0))}var J,q,_=this,te=this.game;if(this.classes.each(function(ne,he){J=_.add(ne,new he({game:te})),ne===u.UTILITY_PIPELINE&&(_.UTILITY_PIPELINE=J,_.fullFrame1=J.fullFrame1,_.fullFrame2=J.fullFrame2,_.halfFrame1=J.halfFrame1,_.halfFrame2=J.halfFrame2)}),this.MULTI_PIPELINE=this.get(u.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(u.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(u.MOBILE_PIPELINE),K||(this.FX_PIPELINE=this.get(u.FX_PIPELINE)),D)for(q in D){var se=D[q];J=new se(te),J.name=q,J.isPostFX?this.postPipelineClasses.set(q,se):this.has(q)||(this.classes.set(q,se),this.add(q,J))}this.default=this.get(I),F&&!r.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(D){var I=this.get(D);return I&&(this.default=I),I},add:function(D,I){if(I.isPostFX){console.warn(D+" is a Post Pipeline. Use `addPostPipeline` instead");return}var F=this.pipelines,H=this.renderer;return F.has(D)?console.warn("Pipeline exists: "+D):(I.name=D,I.manager=this,F.set(D,I)),I.hasBooted||I.boot(),H.width!==0&&H.height!==0&&!I.isPreFX&&I.resize(H.width,H.height),I},addPostPipeline:function(D,I){this.postPipelineClasses.has(D)||this.postPipelineClasses.set(D,I)},flush:function(){this.current&&this.current.flush()},has:function(D){var I=this.pipelines;return typeof D=="string"?I.has(D):!!I.contains(D)},get:function(D){var I=this.pipelines;if(typeof D=="string")return I.get(D);if(I.contains(D))return D},getPostPipeline:function(D,I,F){var H=this.postPipelineClasses,k,W="",$=typeof D;if($==="string"||$==="number"?(k=H.get(D),W=D):$==="function"?(H.contains(D)&&(k=D),W=D.name):$==="object"&&(k=H.get(D.name),W=D.name),k){var K=new k(this.game,F);return K.name=W,I&&(K.gameObject=I),this.postPipelineInstances.push(K),K}},removePostPipeline:function(D){P(this.postPipelineInstances,D)},remove:function(D,I,F){I===void 0&&(I=!0),F===void 0&&(F=!0),this.pipelines.delete(D),I&&this.classes.delete(D),F&&this.postPipelineClasses.delete(D)},set:function(D,I,F){if(!D.isPostFX)return this.isCurrent(D,F)||(this.flush(),this.current&&this.current.unbind(),this.current=D,D.bind(F)),D.updateProjectionMatrix(),D.onBind(I),D},preBatch:function(D){if(D.hasPostPipeline){this.flush();for(var I=D.postPipelines,F=I.length-1;F>=0;F--){var H=I[F];H.active&&H.preBatch(D)}}},postBatch:function(D){if(D.hasPostPipeline){this.flush();for(var I=D.postPipelines,F=0;F<I.length;F++){var H=I[F];H.active&&H.postBatch(D)}}},preBatchCamera:function(D){if(D.hasPostPipeline){this.flush();for(var I=D.postPipelines,F=I.length-1;F>=0;F--){var H=I[F];H.active&&H.preBatch(D)}}},postBatchCamera:function(D){if(D.hasPostPipeline){this.flush();for(var I=D.postPipelines,F=0;F<I.length;F++){var H=I[F];H.active&&H.postBatch(D)}}},isCurrent:function(D,I){var F=this.renderer,H=this.current;return H&&!I&&(I=H.currentShader),!(H!==D||I.program!==F.currentProgram)},copyFrame:function(D,I,F,H,k){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(D,I,F,H,k),this},copyToGame:function(D){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(D),this},drawFrame:function(D,I,F,H){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(D,I,F,H),this},blendFrames:function(D,I,F,H,k){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(D,I,F,H,k),this},blendFramesAdditive:function(D,I,F,H,k){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(D,I,F,H,k),this},clearFrame:function(D,I){return this.UTILITY_PIPELINE.clearFrame(D,I),this},blitFrame:function(D,I,F,H,k,W){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(D,I,F,H,k,W),this},copyFrameRect:function(D,I,F,H,k,W,$,K){return this.UTILITY_PIPELINE.copyFrameRect(D,I,F,H,k,W,$,K),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(D){return this.UTILITY_PIPELINE.bind(D)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(D,I){I.restoreContext()}),L(this.postPipelineInstances,function(D){D.restoreContext()})},rebind:function(D){D===void 0&&this.previous&&(D=this.previous);var I=this.renderer,F=I.gl;F.disable(F.DEPTH_TEST),F.disable(F.CULL_FACE),I.hasActiveStencilMask()?F.clear(F.DEPTH_BUFFER_BIT):(F.disable(F.STENCIL_TEST),F.clear(F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT)),F.viewport(0,0,I.width,I.height),I.currentProgram=null,I.setBlendMode(0,!0);var H=I.vaoExtension;H&&H.bindVertexArrayOES(null);var k=this.pipelines.entries;for(var W in k)k[W].glReset=!0;D&&(this.current=D,D.rebind())},clear:function(){var D=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,D.currentProgram=null,D.setBlendMode(0,!0);var I=D.vaoExtension;I&&I.bindVertexArrayOES(null)},getRenderTarget:function(D){var I=this.renderTargets,F=3;if(D>this.maxDimension)return this.targetIndex=I.length-F,I[this.targetIndex];var H=(o(D,this.frameInc,0,!0)-1)*F;return this.targetIndex=H,I[H]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});h.exports=O},32302:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(92503),n=new i({initialize:function(a,s,o,d,l,f,m,g,p){d===void 0&&(d=1),l===void 0&&(l=0),f===void 0&&(f=!0),m===void 0&&(m=!1),g===void 0&&(g=!0),p===void 0&&(p=!0),this.renderer=a,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=d,this.minFilter=l,this.autoClear=f,this.autoResize=!0,this.hasDepthBuffer=g,this.forceClamp=p,this.init(s,o),m?this.renderer.on(u.RESIZE,this.resize,this):this.autoResize=!1},init:function(r,a){var s=this.renderer;this.texture=s.createTextureFromSource(null,r,a,this.minFilter,this.forceClamp),this.framebuffer=s.createFramebuffer(r,a,this.texture,this.hasDepthBuffer),this.width=r,this.height=a},setAutoResize:function(r){return r&&!this.autoResize?(this.renderer.on(u.RESIZE,this.resize,this),this.autoResize=!0):!r&&this.autoResize&&(this.renderer.off(u.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(r,a){if(this.autoResize&&this.willResize(r,a)){var s=this.renderer;s.deleteFramebuffer(this.framebuffer),s.deleteTexture(this.texture),this.texture=s.createTextureFromSource(null,r,a,this.minFilter,this.forceClamp),this.framebuffer=s.createFramebuffer(r,a,this.texture,this.hasDepthBuffer),this.width=r,this.height=a}return this},willResize:function(r,a){return typeof r!="number"||typeof a!="number"?!1:(r=Math.round(r*this.scale),a=Math.round(a*this.scale),r=Math.max(r,1),a=Math.max(a,1),r!==this.width||a!==this.height)},bind:function(r,a,s){r===void 0&&(r=!1);var o=this.renderer;if(r&&o.flush(),a&&s&&this.resize(a,s),o.pushFramebuffer(this.framebuffer,!1,!1),r&&this.adjustViewport(),this.autoClear){var d=this.renderer.gl;d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT)}o.clearStencilMask()},adjustViewport:function(){var r=this.renderer.gl;r.viewport(0,0,this.width,this.height),r.disable(r.SCISSOR_TEST)},clear:function(r,a,s,o){var d=this.renderer,l=d.gl;d.pushFramebuffer(this.framebuffer),r!==void 0&&a!==void 0&&s!==void 0&&o!==void 0?(l.enable(l.SCISSOR_TEST),l.scissor(r,a,s,o)):l.disable(l.SCISSOR_TEST),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),d.popFramebuffer(),d.resetScissor()},unbind:function(r){r===void 0&&(r=!1);var a=this.renderer;return r&&a.flush(),a.popFramebuffer()},destroy:function(){var r=this.renderer;r.off(u.RESIZE,this.resize,this),r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});h.exports=n},70554:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={getTintFromFloats:function(w,e,i,u){var n=(w*255|0)&255,r=(e*255|0)&255,a=(i*255|0)&255,s=(u*255|0)&255;return(s<<24|n<<16|r<<8|a)>>>0},getTintAppendFloatAlpha:function(w,e){var i=(e*255|0)&255;return(i<<24|w)>>>0},getTintAppendFloatAlphaAndSwap:function(w,e){var i=(w>>16|0)&255,u=(w>>8|0)&255,n=(w|0)&255,r=(e*255|0)&255;return(r<<24|n<<16|u<<8|i)>>>0},getFloatsFromUintRGB:function(w){var e=(w>>16|0)&255,i=(w>>8|0)&255,u=(w|0)&255;return[e/255,i/255,u/255]},checkShaderMax:function(w,e){var i=Math.min(16,w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?i:Math.min(i,e)},parseFragmentShaderMaxTextures:function(w,e){if(!w)return"";for(var i="",u=0;u<e;u++)u>0&&(i+=`
	else `),u<e-1&&(i+="if (outTexId < "+u+".5)"),i+=`
	{`,i+=`
		texture = texture2D(uMainSampler[`+u+"], outTexCoord);",i+=`
	}`;return w=w.replace(/%count%/gi,e.toString()),w.replace(/%forloop%/gi,i)},setGlowQuality:function(w,e,i,u){return i===void 0&&(i=e.config.glowFXQuality),u===void 0&&(u=e.config.glowFXDistance),w=w.replace(/__SIZE__/gi,(1/i/u).toFixed(7)),w=w.replace(/__DIST__/gi,u.toFixed(0)+".0"),w}}},29100:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(62644),n=e(50792),r=e(77085),a=e(95540),s=e(37867),o=e(92503),d=e(32302),l=e(70554),f=e(38683),m=new i({Extends:n,initialize:function(p){n.call(this);var y=p.game,S=y.renderer,C=S.gl;this.name=a(p,"name","WebGLPipeline"),this.game=y,this.renderer=S,this.manager,this.gl=C,this.view=y.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=a(p,"topology",C.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=a(p,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=p,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=a(p,"resizeUniform","")},boot:function(){var g,p=this.gl,y=this.config,S=this.renderer;this.isPostFX||(this.projectionMatrix=new s().identity());var C=this.renderTargets,A=a(y,"renderTarget",!1);typeof A=="boolean"&&A&&(A=1);var M=S.width,L=S.height;if(typeof A=="number")for(g=0;g<A;g++)C.push(new d(S,M,L,1,0,!0));else if(Array.isArray(A))for(g=0;g<A.length;g++){var P=a(A[g],"scale",1),O=a(A[g],"minFilter",0),D=a(A[g],"autoClear",1),I=a(A[g],"autoResize",!1),F=a(A[g],"width",null),H=a(A[g],"height",F);F?C.push(new d(S,F,H,1,O,D,I)):C.push(new d(S,M,L,P,O,D,I))}C.length&&(this.currentRenderTarget=C[0]),this.setShadersFromConfig(y);var k=this.shaders,W=0;for(g=0;g<k.length;g++)k[g].vertexSize>W&&(W=k[g].vertexSize);var $=a(y,"batchSize",S.config.batchSize);this.vertexCapacity=$*6;var K=new ArrayBuffer(this.vertexCapacity*W);this.vertexData=K,this.bytes=new Uint8Array(K),this.vertexViewF32=new Float32Array(K),this.vertexViewU32=new Uint32Array(K);var Z=a(y,"vertices",null);for(Z?(this.vertexViewF32.set(Z),this.vertexBuffer=S.createVertexBuffer(K,p.STATIC_DRAW)):this.vertexBuffer=S.createVertexBuffer(K.byteLength,p.DYNAMIC_DRAW),this.setVertexBuffer(),g=k.length-1;g>=0;g--)k[g].rebind();this.hasBooted=!0,S.on(o.RESIZE,this.resize,this),S.on(o.PRE_RENDER,this.onPreRender,this),S.on(o.RENDER,this.onRender,this),S.on(o.POST_RENDER,this.onPostRender,this),this.emit(r.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,p,y){var S=this.renderer;if(g!==this.currentShader||S.currentProgram!==this.currentShader.program){this.flush();var C=this.setVertexBuffer(y);C&&!p&&(p=!0),g.bind(p,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var p=this.shaders,y=0;y<p.length;y++)if(p[y].name===g)return p[y]},setShadersFromConfig:function(g){var p,y=this.shaders,S=this.renderer;for(p=0;p<y.length;p++)y[p].destroy();var C="vertShader",A="fragShader",M="attributes",L=a(g,C,null),P=l.parseFragmentShaderMaxTextures(a(g,A,null),S.maxTextures),O=a(g,M,null),D=a(g,"shaders",[]),I=D.length;if(I===0)L&&P&&(this.shaders=[new f(this,"default",L,P,u(O))]);else{var F=[];for(p=0;p<I;p++){var H=D[p],k,W,$,K;if(typeof H=="string"?(k="default",W=L,$=l.parseFragmentShaderMaxTextures(H,S.maxTextures),K=O):(k=a(H,"name","default"),W=a(H,C,L),$=l.parseFragmentShaderMaxTextures(a(H,A,P),S.maxTextures),K=a(H,M,O)),k==="default"){var Z=$.split(`
`),X=Z[0].trim();X.indexOf("#define SHADER_NAME")>-1&&(k=X.substring(20))}W&&$&&F.push(new f(this,k,W,$,u(K)))}this.shaders=F}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(g){return this.currentBatch={start:this.vertexCount,count:0,texture:[g],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=g,this.batch.push(this.currentBatch),0},addTextureToBatch:function(g){var p=this.currentBatch;p&&(p.texture.push(g),p.unit++,p.maxUnit++)},pushBatch:function(g){if(!this.currentBatch||this.forceZero&&g!==this.currentTexture)return this.createBatch(g);if(g===this.currentTexture)return this.currentUnit;var p=this.currentBatch,y=p.texture.indexOf(g);return y===-1?p.texture.length===this.renderer.maxTextures?this.createBatch(g):(p.unit++,p.maxUnit++,p.texture.push(g),this.currentUnit=p.unit,this.currentTexture=g,p.unit):(this.currentUnit=y,this.currentTexture=g,y)},setGameObject:function(g,p){return p===void 0&&(p=g.frame),this.pushBatch(p.source.glTexture)},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(g,p){(g!==this.width||p!==this.height)&&this.flush(),this.width=g,this.height=p;for(var y=this.renderTargets,S=0;S<y.length;S++)y[S].resize(g,p);return this.setProjectionMatrix(g,p),this.resizeUniform&&this.set2f(this.resizeUniform,g,p),this.emit(r.RESIZE,g,p,this),this.onResize(g,p),this},setProjectionMatrix:function(g,p){var y=this.projectionMatrix;if(!y)return this;this.projectionWidth=g,this.projectionHeight=p,y.ortho(0,g,p,0,-1e3,1e3);for(var S=this.shaders,C="uProjectionMatrix",A=0;A<S.length;A++){var M=S[A];M.hasUniform(C)&&(M.resetUniform(C),M.setMatrix4fv(C,!1,y.val,M))}return this},flipProjectionMatrix:function(g){g===void 0&&(g=!0);var p=this.projectionMatrix;if(!p)return this;var y=this.projectionWidth,S=this.projectionHeight;g?p.ortho(0,y,0,S,-1e3,1e3):p.ortho(0,y,S,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,p.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,p=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==p)&&this.setProjectionMatrix(g,p)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var p=!1,y=this.gl;return y.getParameter(y.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(y.bindBuffer(y.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,p=!0),g.bind(p),this.currentShader=g,this.activeTextures.length=0,this.emit(r.BIND,this,g),this.onActive(g),this},rebind:function(g){this.activeBuffer=null,this.setVertexBuffer();for(var p=this.shaders,y=p.length-1;y>=0;y--){var S=p[y].rebind();(!g||S===g)&&(this.currentShader=S)}return this.activeTextures.length=0,this.emit(r.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var g=this.shaders,p=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,p&&this.setVertexBuffer();for(var y=0;y<g.length;y++){var S=g[y];S.syncUniforms(),p&&S.rebind()}},setVertexBuffer:function(g){if(g===void 0&&(g=this.vertexBuffer),g!==this.activeBuffer){var p=this.gl;return this.gl.bindBuffer(p.ARRAY_BUFFER,g.webGLBuffer),this.activeBuffer=g,!0}return!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(r.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var p=this.gl,y=this.vertexCount,S=this.currentShader.vertexSize,C=this.topology;if(this.active){this.setVertexBuffer(),y===this.vertexCapacity?p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.DYNAMIC_DRAW):p.bufferSubData(p.ARRAY_BUFFER,0,this.bytes.subarray(0,y*S));var A,M,L,P=this.batch,O=this.activeTextures;if(this.forceZero)for(O[0]||p.activeTexture(p.TEXTURE0),A=0;A<P.length;A++)M=P[A],L=M.texture[0],O[0]!==L&&(p.bindTexture(p.TEXTURE_2D,L.webGLTexture),O[0]=L),p.drawArrays(C,M.start,M.count);else for(A=0;A<P.length;A++){M=P[A];for(var D=0;D<=M.maxUnit;D++)L=M.texture[D],O[D]!==L&&(p.activeTexture(p.TEXTURE0+D),p.bindTexture(p.TEXTURE_2D,L.webGLTexture),O[D]=L);p.drawArrays(C,M.start,M.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(r.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,p,y,S,C,A,M){var L=this.vertexViewF32,P=this.vertexViewU32,O=this.vertexCount*this.currentShader.vertexComponentCount-1;L[++O]=g,L[++O]=p,L[++O]=y,L[++O]=S,L[++O]=C,L[++O]=A,P[++O]=M,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(g,p,y,S,C,A,M,L,P,O,D,I,F,H,k,W,$,K,Z,X){X===void 0&&(X=this.currentUnit);var j=!1;this.shouldFlush(6)&&(this.flush(),j=!0),this.currentBatch||(X=this.setTexture2D(Z));var Y=this.vertexViewF32,U=this.vertexViewU32,J=this.vertexCount*this.currentShader.vertexComponentCount-1;return Y[++J]=p,Y[++J]=y,Y[++J]=O,Y[++J]=D,Y[++J]=X,Y[++J]=K,U[++J]=H,Y[++J]=S,Y[++J]=C,Y[++J]=O,Y[++J]=F,Y[++J]=X,Y[++J]=K,U[++J]=W,Y[++J]=A,Y[++J]=M,Y[++J]=I,Y[++J]=F,Y[++J]=X,Y[++J]=K,U[++J]=$,Y[++J]=p,Y[++J]=y,Y[++J]=O,Y[++J]=D,Y[++J]=X,Y[++J]=K,U[++J]=H,Y[++J]=A,Y[++J]=M,Y[++J]=I,Y[++J]=F,Y[++J]=X,Y[++J]=K,U[++J]=$,Y[++J]=L,Y[++J]=P,Y[++J]=I,Y[++J]=D,Y[++J]=X,Y[++J]=K,U[++J]=k,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(g),j},batchTri:function(g,p,y,S,C,A,M,L,P,O,D,I,F,H,k,W,$){$===void 0&&($=this.currentUnit);var K=!1;this.shouldFlush(3)&&(this.flush(),K=!0),this.currentBatch||($=this.setTexture2D(W));var Z=this.vertexViewF32,X=this.vertexViewU32,j=this.vertexCount*this.currentShader.vertexComponentCount-1;return Z[++j]=p,Z[++j]=y,Z[++j]=L,Z[++j]=P,Z[++j]=$,Z[++j]=k,X[++j]=I,Z[++j]=S,Z[++j]=C,Z[++j]=L,Z[++j]=D,Z[++j]=$,Z[++j]=k,X[++j]=F,Z[++j]=A,Z[++j]=M,Z[++j]=O,Z[++j]=D,Z[++j]=$,Z[++j]=k,X[++j]=H,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(g),K},drawFillRect:function(g,p,y,S,C,A,M,L){M===void 0&&(M=this.renderer.whiteTexture),L===void 0&&(L=!0),g=Math.floor(g),p=Math.floor(p);var P=Math.floor(g+y),O=Math.floor(p+S),D=this.setTexture2D(M),I=l.getTintAppendFloatAlphaAndSwap(C,A),F=0,H=0,k=1,W=1;L&&(H=1,W=0),this.batchQuad(null,g,p,g,O,P,O,P,p,F,H,k,W,I,I,I,I,0,M,D)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture),this.pushBatch(g)},bindTexture:function(g,p){p===void 0&&(p=0);var y=this.gl;return y.activeTexture(y.TEXTURE0+p),y.bindTexture(y.TEXTURE_2D,g.webGLTexture),this},bindRenderTarget:function(g,p){return this.bindTexture(g.texture,p)},setTime:function(g,p){return this.set1f(g,this.game.loop.getDuration(),p),this},setBoolean:function(g,p,y){return y===void 0&&(y=this.currentShader),y.setBoolean(g,p),this},set1f:function(g,p,y){return y===void 0&&(y=this.currentShader),y.set1f(g,p),this},set2f:function(g,p,y,S){return S===void 0&&(S=this.currentShader),S.set2f(g,p,y),this},set3f:function(g,p,y,S,C){return C===void 0&&(C=this.currentShader),C.set3f(g,p,y,S),this},set4f:function(g,p,y,S,C,A){return A===void 0&&(A=this.currentShader),A.set4f(g,p,y,S,C),this},set1fv:function(g,p,y){return y===void 0&&(y=this.currentShader),y.set1fv(g,p),this},set2fv:function(g,p,y){return y===void 0&&(y=this.currentShader),y.set2fv(g,p),this},set3fv:function(g,p,y){return y===void 0&&(y=this.currentShader),y.set3fv(g,p),this},set4fv:function(g,p,y){return y===void 0&&(y=this.currentShader),y.set4fv(g,p),this},set1iv:function(g,p,y){return y===void 0&&(y=this.currentShader),y.set1iv(g,p),this},set2iv:function(g,p,y){return y===void 0&&(y=this.currentShader),y.set2iv(g,p),this},set3iv:function(g,p,y){return y===void 0&&(y=this.currentShader),y.set3iv(g,p),this},set4iv:function(g,p,y){return y===void 0&&(y=this.currentShader),y.set4iv(g,p),this},set1i:function(g,p,y){return y===void 0&&(y=this.currentShader),y.set1i(g,p),this},set2i:function(g,p,y,S){return S===void 0&&(S=this.currentShader),S.set2i(g,p,y),this},set3i:function(g,p,y,S,C){return C===void 0&&(C=this.currentShader),C.set3i(g,p,y,S),this},set4i:function(g,p,y,S,C,A){return A===void 0&&(A=this.currentShader),A.set4i(g,p,y,S,C),this},setMatrix2fv:function(g,p,y,S){return S===void 0&&(S=this.currentShader),S.setMatrix2fv(g,p,y),this},setMatrix3fv:function(g,p,y,S){return S===void 0&&(S=this.currentShader),S.setMatrix3fv(g,p,y),this},setMatrix4fv:function(g,p,y,S){return S===void 0&&(S=this.currentShader),S.setMatrix4fv(g,p,y),this},destroy:function(){this.emit(r.DESTROY,this);var g,p=this.shaders;for(g=0;g<p.length;g++)p[g].destroy();var y=this.renderTargets;for(g=0;g<y.length;g++)y[g].destroy();var S=this.renderer;return S.deleteBuffer(this.vertexBuffer),S.off(o.RESIZE,this.resize,this),S.off(o.PRE_RENDER,this.onPreRender,this),S.off(o.RENDER,this.onRender,this),S.off(o.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});h.exports=m},74797:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(95428),u=e(72905),n=e(19715),r=e(83419),a=e(8054),s=e(50792),o=e(92503),d=e(50030),l=e(37867),f=e(29747),m=e(7530),g=e(32302),p=e(97480),y=e(69442),S=e(70554),C=e(88815),A=e(26128),M=e(1482),L=e(82751),P=e(84387),O=e(93567),D=e(57183),I=new r({Extends:s,initialize:function(H){s.call(this);var k=H.config,W={alpha:k.transparent,desynchronized:k.desynchronized,depth:!0,antialias:k.antialiasGL,premultipliedAlpha:k.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:k.failIfMajorPerformanceCaveat,powerPreference:k.powerPreference,preserveDrawingBuffer:k.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:k.clearBeforeRender,antialias:k.antialias,backgroundColor:k.backgroundColor,contextCreation:W,roundPixels:k.roundPixels,maxTextures:k.maxTextures,maxTextureSize:k.maxTextureSize,batchSize:k.batchSize,maxLights:k.maxLights,mipmapFilter:k.mipmapFilter},this.game=H,this.type=a.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=H.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=f,this.contextRestoredHandler=f,this.previousContextLostHandler=f,this.previousContextRestoredHandler=f,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(F){var H,k=this.game,W=this.canvas,$=F.backgroundColor;if(k.config.context?H=k.config.context:H=W.getContext("webgl",F.contextCreation)||W.getContext("experimental-webgl",F.contextCreation),!H||H.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=H,this.setExtensions(),this.setContextHandlers(),k.context=H;for(var K=0;K<=27;K++)this.blendModes.push({func:[H.ONE,H.ONE_MINUS_SRC_ALPHA],equation:H.FUNC_ADD});this.blendModes[1].func=[H.ONE,H.DST_ALPHA],this.blendModes[2].func=[H.DST_COLOR,H.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[H.ONE,H.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[H.ZERO,H.ONE_MINUS_SRC_ALPHA],equation:H.FUNC_REVERSE_SUBTRACT},this.glFormats=[H.BYTE,H.SHORT,H.UNSIGNED_BYTE,H.UNSIGNED_SHORT,H.FLOAT],this.glFuncMap={mat2:{func:H.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:H.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:H.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:H.uniform1f,length:1},"1fv":{func:H.uniform1fv,length:1},"1i":{func:H.uniform1i,length:1},"1iv":{func:H.uniform1iv,length:1},"2f":{func:H.uniform2f,length:2},"2fv":{func:H.uniform2fv,length:1},"2i":{func:H.uniform2i,length:2},"2iv":{func:H.uniform2iv,length:1},"3f":{func:H.uniform3f,length:3},"3fv":{func:H.uniform3fv,length:1},"3i":{func:H.uniform3i,length:3},"3iv":{func:H.uniform3iv,length:1},"4f":{func:H.uniform4f,length:4},"4fv":{func:H.uniform4fv,length:1},"4i":{func:H.uniform4i,length:4},"4iv":{func:H.uniform4iv,length:1}},(!F.maxTextures||F.maxTextures===-1)&&(F.maxTextures=H.getParameter(H.MAX_TEXTURE_IMAGE_UNITS)),F.maxTextureSize||(F.maxTextureSize=H.getParameter(H.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),H.disable(H.DEPTH_TEST),H.disable(H.CULL_FACE),H.enable(H.BLEND),H.clearColor($.redGL,$.greenGL,$.blueGL,$.alphaGL);var Z=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return Z.indexOf(F.mipmapFilter)!==-1&&(this.mipmapFilter=H[F.mipmapFilter]),this.maxTextures=S.checkShaderMax(H,F.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new m(this),this.setBlendMode(a.BlendModes.NORMAL),this.projectionMatrix=new l().identity(),k.textures.once(y.READY,this.boot,this),this},boot:function(){var F=this.game,H=this.pipelines,k=F.scale.baseSize,W=k.width,$=k.height;this.width=W,this.height=$,this.isBooted=!0,this.renderTarget=new g(this,W,$,1,0,!0,!0),this.maskTarget=new g(this,W,$,1,0,!0,!0),this.maskSource=new g(this,W,$,1,0,!0,!0);var K=F.config;H.boot(K.pipeline,K.defaultPipeline,K.autoMobilePipeline),this.blankTexture=F.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=F.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=F.textures.getFrame("__WHITE").glTexture;var Z=this.gl;Z.bindFramebuffer(Z.FRAMEBUFFER,null),Z.enable(Z.SCISSOR_TEST),F.scale.on(p.RESIZE,this.onResize,this),this.resize(W,$)},setExtensions:function(){var F=this.gl,H=F.getSupportedExtensions();this.supportedExtensions=H;var k="ANGLE_instanced_arrays";this.instancedArraysExtension=H.indexOf(k)>-1?F.getExtension(k):null;var W="OES_vertex_array_object";this.vaoExtension=H.indexOf(W)>-1?F.getExtension(W):null},setContextHandlers:function(F,H){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof F=="function"?this.contextLostHandler=F.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof H=="function"?this.contextRestoredHandler=H.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(F){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(o.LOSE_WEBGL,this),F.preventDefault()},dispatchContextRestored:function(F){var H=this.gl;if(H.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(a.BlendModes.NORMAL),H.disable(H.BLEND),H.disable(H.DEPTH_TEST),H.enable(H.CULL_FACE),this.compression=this.getCompressedTextures();var k=function(W){W.createResource()};i(this.glTextureWrappers,k),i(this.glBufferWrappers,k),i(this.glFramebufferWrappers,k),i(this.glProgramWrappers,k),i(this.glAttribLocationWrappers,k),i(this.glUniformLocationWrappers,k),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(o.RESTORE_WEBGL,this),F.preventDefault()},createTemporaryTextures:function(){for(var F=this.gl,H=0;H<this.maxTextures;H++){var k=F.createTexture();F.activeTexture(F.TEXTURE0+H),F.bindTexture(F.TEXTURE_2D,k),F.texImage2D(F.TEXTURE_2D,0,F.RGBA,1,1,0,F.RGBA,F.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(H)}},captureFrame:function(F,H){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(F,H,k){},stopCapture:function(){},onCapture:function(F){},onResize:function(F,H){(H.width!==this.width||H.height!==this.height)&&this.resize(H.width,H.height)},beginCapture:function(F,H){F===void 0&&(F=this.width),H===void 0&&(H=this.height),this.renderTarget.bind(!0,F,H),this.setProjectionMatrix(F,H)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(F,H){var k=this.gl;return this.width=F,this.height=H,this.setProjectionMatrix(F,H),k.viewport(0,0,F,H),this.drawingBufferHeight=k.drawingBufferHeight,k.scissor(0,k.drawingBufferHeight-H,F,H),this.defaultScissor[2]=F,this.defaultScissor[3]=H,this.emit(o.RESIZE,F,H),this},getCompressedTextures:function(){var F="WEBGL_compressed_texture_",H="WEBKIT_"+F,k="EXT_texture_compression_",W=function(K,Z){var X=K.getExtension(F+Z)||K.getExtension(H+Z)||K.getExtension(k+Z);if(X){var j={};for(var Y in X)j[X[Y]]=Y;return j}},$=this.gl;return{ETC:W($,"etc"),ETC1:W($,"etc1"),ATC:W($,"atc"),ASTC:W($,"astc"),BPTC:W($,"bptc"),RGTC:W($,"rgtc"),PVRTC:W($,"pvrtc"),S3TC:W($,"s3tc"),S3TCSRGB:W($,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(F,H){var k=this.compression[F.toUpperCase()];if(H in k)return k[H]},supportsCompressedTexture:function(F,H){var k=this.compression[F.toUpperCase()];return k?H?H in k:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(F,H){return(F!==this.projectionWidth||H!==this.projectionHeight)&&(this.projectionWidth=F,this.projectionHeight=H,this.projectionMatrix.ortho(0,F,H,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(F){return this.supportedExtensions?this.supportedExtensions.indexOf(F):!1},getExtension:function(F){return this.hasExtension(F)?(F in this.extensions||(this.extensions[F]=this.gl.getExtension(F)),this.extensions[F]):null},flush:function(){this.pipelines.flush()},pushScissor:function(F,H,k,W,$){$===void 0&&($=this.drawingBufferHeight);var K=this.scissorStack,Z=[F,H,k,W];return K.push(Z),this.setScissor(F,H,k,W,$),this.currentScissor=Z,Z},setScissor:function(F,H,k,W,$){$===void 0&&($=this.drawingBufferHeight);var K=this.gl,Z=this.currentScissor,X=k>0&&W>0;if(Z&&X){var j=Z[0],Y=Z[1],U=Z[2],J=Z[3];X=j!==F||Y!==H||U!==k||J!==W}X&&(this.flush(),K.scissor(F,$-H-W,k,W))},resetScissor:function(){var F=this.gl;F.enable(F.SCISSOR_TEST);var H=this.currentScissor;if(H){var k=H[0],W=H[1],$=H[2],K=H[3];$>0&&K>0&&F.scissor(k,this.drawingBufferHeight-W-K,$,K)}},popScissor:function(){var F=this.scissorStack;F.pop();var H=F[F.length-1];H&&this.setScissor(H[0],H[1],H[2],H[3]),this.currentScissor=H},hasActiveStencilMask:function(){var F=this.currentMask.mask,H=this.currentCameraMask.mask;return F&&F.isStencil||H&&H.isStencil},resetViewport:function(){var F=this.gl;F.viewport(0,0,this.width,this.height),this.drawingBufferHeight=F.drawingBufferHeight},setBlendMode:function(F,H){H===void 0&&(H=!1);var k=this.gl,W=this.blendModes[F];return H||F!==a.BlendModes.SKIP_CHECK&&this.currentBlendMode!==F?(this.flush(),k.enable(k.BLEND),k.blendEquation(W.equation),W.func.length>2?k.blendFuncSeparate(W.func[0],W.func[1],W.func[2],W.func[3]):k.blendFunc(W.func[0],W.func[1]),this.currentBlendMode=F,!0):!1},addBlendMode:function(F,H){var k=this.blendModes.push({func:F,equation:H});return k-1},updateBlendMode:function(F,H,k){return this.blendModes[F]&&(this.blendModes[F].func=H,k&&(this.blendModes[F].equation=k)),this},removeBlendMode:function(F){return F>17&&this.blendModes[F]&&this.blendModes.splice(F,1),this},pushFramebuffer:function(F,H,k,W,$){return F===this.currentFramebuffer?this:(this.fboStack.push(F),this.setFramebuffer(F,H,k,W,$))},setFramebuffer:function(F,H,k,W,$){if(H===void 0&&(H=!1),k===void 0&&(k=!0),W===void 0&&(W=null),$===void 0&&($=!1),F===this.currentFramebuffer)return this;var K=this.gl,Z=this.width,X=this.height;return F&&F.renderTexture&&k?(Z=F.renderTexture.width,X=F.renderTexture.height):this.flush(),F?K.bindFramebuffer(K.FRAMEBUFFER,F.webGLFramebuffer):K.bindFramebuffer(K.FRAMEBUFFER,null),k&&K.viewport(0,0,Z,X),W&&K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,W.webGLTexture,0),$&&(K.clearColor(0,0,0,0),K.clear(K.COLOR_BUFFER_BIT)),H&&(F?(this.drawingBufferHeight=X,this.pushScissor(0,0,Z,X)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=F,this},popFramebuffer:function(F,H){F===void 0&&(F=!1),H===void 0&&(H=!0);var k=this.fboStack;k.pop();var W=k[k.length-1];return W||(W=null),this.setFramebuffer(W,F,H),W},restoreFramebuffer:function(F,H){F===void 0&&(F=!1),H===void 0&&(H=!0);var k=this.fboStack,W=k[k.length-1];W||(W=null),this.currentFramebuffer=null,this.setFramebuffer(W,F,H)},setProgram:function(F){return F!==this.currentProgram?(this.flush(),this.gl.useProgram(F.webGLProgram),this.currentProgram=F,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(F,H,k,W,$){$===void 0&&($=!1);var K=this.gl,Z=K.NEAREST,X=K.NEAREST,j=K.CLAMP_TO_EDGE,Y=null;H=F?F.width:H,k=F?F.height:k;var U=d(H,k);if(U&&!$&&(j=K.REPEAT),W===a.ScaleModes.LINEAR&&this.config.antialias){var J=F&&F.compressed,q=!J&&U||J&&F.mipmaps.length>1;Z=this.mipmapFilter&&q?this.mipmapFilter:K.LINEAR,X=K.LINEAR}return!F&&typeof H=="number"&&typeof k=="number"?Y=this.createTexture2D(0,Z,X,j,j,K.RGBA,null,H,k):Y=this.createTexture2D(0,Z,X,j,j,K.RGBA,F),Y},createTexture2D:function(F,H,k,W,$,K,Z,X,j,Y,U,J){typeof X!="number"&&(X=Z?Z.width:1),typeof j!="number"&&(j=Z?Z.height:1);var q=new L(this.gl,F,H,k,W,$,K,Z,X,j,Y,U,J);return this.glTextureWrappers.push(q),q},createFramebuffer:function(F,H,k,W){this.currentFramebuffer=null;var $=new P(this.gl,F,H,k,W);return this.glFramebufferWrappers.push($),$},beginBitmapMask:function(F,H){var k=this.gl;k&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==F&&(this.currentMask.mask=F,this.currentMask.camera=H))},drawBitmapMask:function(F,H,k){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),F.renderWebGL(this,F,H),this.maskSource.unbind(!0),this.maskTarget.unbind();var W=this.gl,$=this.getCurrentStencilMask();$?(W.enable(W.STENCIL_TEST),$.mask.applyStencil(this,$.camera,!0)):this.currentMask.mask=null,this.pipelines.set(k),W.activeTexture(W.TEXTURE0),W.bindTexture(W.TEXTURE_2D,this.maskTarget.texture.webGLTexture),W.activeTexture(W.TEXTURE1),W.bindTexture(W.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(F,H){var k=new M(this.gl,F,H);return this.glProgramWrappers.push(k),k},createVertexBuffer:function(F,H){var k=this.gl,W=new A(k,F,k.ARRAY_BUFFER,H);return this.glBufferWrappers.push(W),W},createAttribLocation:function(F,H){var k=new O(this.gl,F,H);return this.glAttribLocationWrappers.push(k),k},createUniformLocation:function(F,H){var k=new D(this.gl,F,H);return this.glUniformLocationWrappers.push(k),k},createIndexBuffer:function(F,H){var k=this.gl,W=new A(k,F,k.ELEMENT_ARRAY_BUFFER,H);return this.glBufferWrappers.push(W),W},deleteTexture:function(F){if(F)return u(this.glTextureWrappers,F),F.destroy(),this},deleteFramebuffer:function(F){return F?(u(this.fboStack,F),u(this.glFramebufferWrappers,F),F.destroy(),this):this},deleteProgram:function(F){return F&&(u(this.glProgramWrappers,F),F.destroy()),this},deleteAttribLocation:function(F){return F&&(u(this.glAttribLocationWrappers,F),F.destroy()),this},deleteUniformLocation:function(F){return F&&(u(this.glUniformLocationWrappers,F),F.destroy()),this},deleteBuffer:function(F){return F?(u(this.glBufferWrappers,F),F.destroy(),this):this},preRenderCamera:function(F){var H=F.x,k=F.y,W=F.width,$=F.height,K=F.backgroundColor;if(F.emit(n.PRE_RENDER,F),this.pipelines.preBatchCamera(F),this.pushScissor(H,k,W,$),F.mask&&(this.currentCameraMask.mask=F.mask,this.currentCameraMask.camera=F._maskCamera,F.mask.preRenderWebGL(this,F,F._maskCamera)),K.alphaGL>0){var Z=this.pipelines.setMulti();Z.drawFillRect(H,k,W,$,S.getTintFromFloats(K.blueGL,K.greenGL,K.redGL,1),K.alphaGL)}},getCurrentStencilMask:function(){var F=null,H=this.maskStack,k=this.currentCameraMask;return H.length>0?F=H[H.length-1]:k.mask&&k.mask.isStencil&&(F=k),F},postRenderCamera:function(F){var H=F.flashEffect,k=F.fadeEffect;if(H.isRunning||k.isRunning||k.isComplete){var W=this.pipelines.setMulti();H.postRenderWebGL(W,S.getTintFromFloats),k.postRenderWebGL(W,S.getTintFromFloats)}F.dirty=!1,this.popScissor(),F.mask&&(this.currentCameraMask.mask=null,F.mask.postRenderWebGL(this,F._maskCamera)),this.pipelines.postBatchCamera(F),F.emit(n.POST_RENDER,F)},preRender:function(){if(!this.contextLost){var F=this.gl;if(F.bindFramebuffer(F.FRAMEBUFFER,null),this.emit(o.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var H=this.config.backgroundColor;F.clearColor(H.redGL,H.greenGL,H.blueGL,H.alphaGL),F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT)}F.enable(F.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&F.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(o.PRE_RENDER)}},render:function(F,H,k){if(!this.contextLost){var W=H.length;if(this.emit(o.RENDER,F,k),this.preRenderCamera(k),W===0){this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(k);return}this.currentType="";for(var $=this.currentMask,K=0;K<W;K++){this.finalType=K===W-1;var Z=H[K],X=Z.mask;$=this.currentMask,$.mask&&$.mask!==X&&$.mask.postRenderWebGL(this,$.camera),X&&$.mask!==X&&X.preRenderWebGL(this,Z,k),Z.blendMode!==this.currentBlendMode&&this.setBlendMode(Z.blendMode);var j=Z.type;j!==this.currentType&&(this.newType=!0,this.currentType=j),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=H[K+1].type===this.currentType,Z.renderWebGL(this,Z,k),this.newType=!1}$=this.currentMask,$.mask&&$.mask.postRenderWebGL(this,$.camera),this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(k)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(o.POST_RENDER);var F=this.snapshotState;F.callback&&(C(this.gl,F),F.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var F=this.gl,H=this.getCurrentStencilMask();if(H){var k=H.mask;F.enable(F.STENCIL_TEST),k.invertAlpha?F.stencilFunc(F.NOTEQUAL,k.level,255):F.stencilFunc(F.EQUAL,k.level,255)}},snapshot:function(F,H,k){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,F,H,k)},snapshotArea:function(F,H,k,W,$,K,Z){var X=this.snapshotState;return X.callback=$,X.type=K,X.encoder=Z,X.getPixel=!1,X.x=F,X.y=H,X.width=k,X.height=W,this},snapshotPixel:function(F,H,k){return this.snapshotArea(F,H,1,1,k),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(F,H,k,W,$,K,Z,X,j,Y,U){$===void 0&&($=!1),K===void 0&&(K=0),Z===void 0&&(Z=0),X===void 0&&(X=H),j===void 0&&(j=k),Y==="pixel"&&($=!0,Y="image/png");var J=this.currentFramebuffer;this.snapshotArea(K,Z,X,j,W,Y,U);var q=this.snapshotState;return q.getPixel=$,q.isFramebuffer=!0,q.bufferWidth=H,q.bufferHeight=k,q.width=Math.min(q.width,H),q.height=Math.min(q.height,k),this.setFramebuffer(F),C(this.gl,q),this.setFramebuffer(J),q.callback=null,q.isFramebuffer=!1,this},canvasToTexture:function(F,H,k,W){k===void 0&&(k=!1),W===void 0&&(W=!1);var $=this.gl,K=$.NEAREST,Z=$.NEAREST,X=F.width,j=F.height,Y=$.CLAMP_TO_EDGE,U=d(X,j);return!k&&U&&(Y=$.REPEAT),this.config.antialias&&(K=U&&this.mipmapFilter?this.mipmapFilter:$.LINEAR,Z=$.LINEAR),H?(H.update(F,X,j,W,Y,Y,K,Z,H.format),H):this.createTexture2D(0,K,Z,Y,Y,$.RGBA,F,X,j,!0,!1,W)},createCanvasTexture:function(F,H,k){return H===void 0&&(H=!1),k===void 0&&(k=!1),this.canvasToTexture(F,null,H,k)},updateCanvasTexture:function(F,H,k,W){return k===void 0&&(k=!1),W===void 0&&(W=!1),this.canvasToTexture(F,H,W,k)},videoToTexture:function(F,H,k,W){k===void 0&&(k=!1),W===void 0&&(W=!1);var $=this.gl,K=$.NEAREST,Z=$.NEAREST,X=F.videoWidth,j=F.videoHeight,Y=$.CLAMP_TO_EDGE,U=d(X,j);return!k&&U&&(Y=$.REPEAT),this.config.antialias&&(K=U&&this.mipmapFilter?this.mipmapFilter:$.LINEAR,Z=$.LINEAR),H?(H.update(F,X,j,W,Y,Y,K,Z,H.format),H):this.createTexture2D(0,K,Z,Y,Y,$.RGBA,F,X,j,!0,!0,W)},createVideoTexture:function(F,H,k){return H===void 0&&(H=!1),k===void 0&&(k=!1),this.videoToTexture(F,null,H,k)},updateVideoTexture:function(F,H,k,W){return k===void 0&&(k=!1),W===void 0&&(W=!1),this.videoToTexture(F,H,W,k)},createUint8ArrayTexture:function(F,H,k){var W=this.gl,$=W.NEAREST,K=W.NEAREST,Z=W.CLAMP_TO_EDGE,X=d(H,k);return X&&(Z=W.REPEAT),this.createTexture2D(0,$,K,Z,Z,W.RGBA,F,H,k)},setTextureFilter:function(F,H){var k=this.gl,W=H===0?k.LINEAR:k.NEAREST;k.activeTexture(k.TEXTURE0);var $=k.getParameter(k.TEXTURE_BINDING_2D);return k.bindTexture(k.TEXTURE_2D,F.webGLTexture),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,W),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,W),F.minFilter=W,F.magFilter=W,$&&k.bindTexture(k.TEXTURE_2D,$),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var F=function(H){H.destroy()};i(this.glAttribLocationWrappers,F),i(this.glBufferWrappers,F),i(this.glFramebufferWrappers,F),i(this.glProgramWrappers,F),i(this.glTextureWrappers,F),i(this.glUniformLocationWrappers,F),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});h.exports=I},38683:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(95428),n=e(95540),r=e(14500),a=new i({initialize:function(o,d,l,f,m){this.pipeline=o,this.name=d,this.renderer=o.renderer,this.gl=this.renderer.gl,this.fragSrc=f,this.vertSrc=l,this.program=this.renderer.createProgram(l,f),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(m),this.createUniforms()},createAttributes:function(s){var o=0,d=0,l=[];this.vertexComponentCount=0;for(var f=0;f<s.length;f++){var m=s[f],g=m.name,p=n(m,"size",1),y=n(m,"type",r.FLOAT),S=y.enum,C=y.size,A=!!m.normalized;l.push({name:g,size:p,type:S,normalized:A,offset:d,enabled:!1,location:-1}),C===4?o+=p:o++,d+=p*C}this.vertexSize=d,this.vertexComponentCount=o,this.attributes=l},bind:function(s,o){return s===void 0&&(s=!1),o===void 0&&(o=!1),o&&this.pipeline.flush(),this.renderer.setProgram(this.program),s&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(s){s===void 0&&(s=!1);for(var o=this.gl,d=this.renderer,l=this.vertexSize,f=this.attributes,m=this.program,g=0;g<f.length;g++){var p=f[g],y=p.size,S=p.type,C=p.offset,A=p.enabled,M=p.location,L=!!p.normalized;if(s){M!==-1&&d.deleteAttribLocation(M);var P=this.renderer.createAttribLocation(m,p.name);P.webGLAttribLocation>=0?(o.enableVertexAttribArray(P.webGLAttribLocation),o.vertexAttribPointer(P.webGLAttribLocation,y,S,L,l,C),p.enabled=!0,p.location=P):P.webGLAttribLocation!==-1&&o.disableVertexAttribArray(P.webGLAttribLocation)}else A?o.vertexAttribPointer(M.webGLAttribLocation,y,S,L,l,C):!A&&M!==-1&&M.webGLAttribLocation>-1&&(o.disableVertexAttribArray(M.webGLAttribLocation),p.location=-1)}return this},createUniforms:function(){var s=this.gl,o=this.program,d=this.uniforms,l,f,m,g=s.getProgramParameter(o.webGLProgram,s.ACTIVE_UNIFORMS);for(l=0;l<g;l++){var p=s.getActiveUniform(o.webGLProgram,l);if(p){f=p.name,m=this.renderer.createUniformLocation(o,f),m!==null&&(d[f]={name:f,location:m,setter:null,value1:null,value2:null,value3:null,value4:null});var y=f.indexOf("[");y>0&&(f=f.substr(0,y),d.hasOwnProperty(f)||(m=this.renderer.createUniformLocation(o,f),m!==null&&(d[f]={name:f,location:m,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var s=this.gl;this.renderer.setProgram(this.program);for(var o in this.uniforms){var d=this.uniforms[o];d.setter&&d.setter.call(s,d.location.webGLUniformLocation,d.value1,d.value2,d.value3,d.value4)}},hasUniform:function(s){return this.uniforms.hasOwnProperty(s)},resetUniform:function(s){var o=this.uniforms[s];return o&&(o.value1=null,o.value2=null,o.value3=null,o.value4=null),this},setUniform1:function(s,o,d,l){var f=this.uniforms[o];return f?((l||f.value1!==d)&&(f.setter||(f.setter=s),f.value1=d,this.renderer.setProgram(this.program),s.call(this.gl,f.location.webGLUniformLocation,d),this.pipeline.currentShader=this),this):this},setUniform2:function(s,o,d,l,f){var m=this.uniforms[o];return m?((f||m.value1!==d||m.value2!==l)&&(m.setter||(m.setter=s),m.value1=d,m.value2=l,this.renderer.setProgram(this.program),s.call(this.gl,m.location.webGLUniformLocation,d,l),this.pipeline.currentShader=this),this):this},setUniform3:function(s,o,d,l,f,m){var g=this.uniforms[o];return g?((m||g.value1!==d||g.value2!==l||g.value3!==f)&&(g.setter||(g.setter=s),g.value1=d,g.value2=l,g.value3=f,this.renderer.setProgram(this.program),s.call(this.gl,g.location.webGLUniformLocation,d,l,f),this.pipeline.currentShader=this),this):this},setUniform4:function(s,o,d,l,f,m,g){var p=this.uniforms[o];return p?((g||p.value1!==d||p.value2!==l||p.value3!==f||p.value4!==m)&&(p.setter||(p.setter=s),p.value1=d,p.value2=l,p.value3=f,p.value4=m,this.renderer.setProgram(this.program),s.call(this.gl,p.location.webGLUniformLocation,d,l,f,m),this.pipeline.currentShader=this),this):this},setBoolean:function(s,o){return this.setUniform1(this.gl.uniform1i,s,Number(o))},set1f:function(s,o){return this.setUniform1(this.gl.uniform1f,s,o)},set2f:function(s,o,d){return this.setUniform2(this.gl.uniform2f,s,o,d)},set3f:function(s,o,d,l){return this.setUniform3(this.gl.uniform3f,s,o,d,l)},set4f:function(s,o,d,l,f){return this.setUniform4(this.gl.uniform4f,s,o,d,l,f)},set1fv:function(s,o){return this.setUniform1(this.gl.uniform1fv,s,o,!0)},set2fv:function(s,o){return this.setUniform1(this.gl.uniform2fv,s,o,!0)},set3fv:function(s,o){return this.setUniform1(this.gl.uniform3fv,s,o,!0)},set4fv:function(s,o){return this.setUniform1(this.gl.uniform4fv,s,o,!0)},set1iv:function(s,o){return this.setUniform1(this.gl.uniform1iv,s,o,!0)},set2iv:function(s,o){return this.setUniform1(this.gl.uniform2iv,s,o,!0)},set3iv:function(s,o){return this.setUniform1(this.gl.uniform3iv,s,o,!0)},set4iv:function(s,o){return this.setUniform1(this.gl.uniform4iv,s,o,!0)},set1i:function(s,o){return this.setUniform1(this.gl.uniform1i,s,o)},set2i:function(s,o,d){return this.setUniform2(this.gl.uniform2i,s,o,d)},set3i:function(s,o,d,l){return this.setUniform3(this.gl.uniform3i,s,o,d,l)},set4i:function(s,o,d,l,f){return this.setUniform4(this.gl.uniform4i,s,o,d,l,f)},setMatrix2fv:function(s,o,d){return this.setUniform2(this.gl.uniformMatrix2fv,s,o,d,!0)},setMatrix3fv:function(s,o,d){return this.setUniform2(this.gl.uniformMatrix3fv,s,o,d,!0)},setMatrix4fv:function(s,o,d){return this.setUniform2(this.gl.uniformMatrix4fv,s,o,d,!0)},createProgram:function(s,o){return s===void 0&&(s=this.vertSrc),o===void 0&&(o=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=s,this.fragSrc=o,this.program=this.renderer.createProgram(s,o),this.createUniforms(),this.rebind()},destroy:function(){var s=this.renderer;u(this.uniforms,function(o){s.deleteUniformLocation(o.location)}),this.uniforms=null,u(this.attributes,function(o){s.deleteAttribLocation(o.location)}),this.attributes=null,s.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});h.exports=a},14500:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};h.exports=w},4159:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(14500),u=e(79291),n={PipelineManager:e(7530),Pipelines:e(96615),RenderTarget:e(32302),Utils:e(70554),WebGLPipeline:e(29100),WebGLRenderer:e(74797),WebGLShader:e(38683),Wrappers:e(9503)};n=u(!1,n,i),h.exports=n},31302:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(95540),n=e(78908),r=e(85191),a=e(14500),s=e(29100),o=new i({Extends:s,initialize:function(l){l.fragShader=u(l,"fragShader",n),l.vertShader=u(l,"vertShader",r),l.batchSize=u(l,"batchSize",1),l.vertices=u(l,"vertices",[-1,1,-1,-7,7,1]),l.attributes=u(l,"attributes",[{name:"inPosition",size:2,type:a.FLOAT}]),s.call(this,l)},boot:function(){s.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(d,l){s.prototype.resize.call(this,d,l),this.set2f("uResolution",d,l)},beginMask:function(d,l,f){this.renderer.beginBitmapMask(d,f)},endMask:function(d,l,f){var m=this.gl,g=this.renderer,p=d.bitmapMask;p&&m&&(g.drawBitmapMask(p,l,this),f&&this.set2f("uResolution",f.width,f.height),this.set1i("uInvertMaskAlpha",d.invertAlpha),m.drawArrays(this.topology,0,3),f&&this.set2f("uResolution",this.width,this.height),m.bindTexture(m.TEXTURE_2D,null))}});h.exports=o},92651:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(58918),n=e(14811),r=e(95540),a=e(43558),s=e(89350),o=e(70554),d=new i({Extends:a,initialize:function(f){f.shaders=[o.setGlowQuality(s.FXGlowFrag,f.game),s.FXShadowFrag,s.FXPixelateFrag,s.FXVignetteFrag,s.FXShineFrag,s.FXBlurLowFrag,s.FXBlurMedFrag,s.FXBlurHighFrag,s.FXGradientFrag,s.FXBloomFrag,s.ColorMatrixFrag,s.FXCircleFrag,s.FXBarrelFrag,s.FXDisplacementFrag,s.FXWipeFrag,s.FXBokehFrag],a.call(this,f);var m=this.game;this.glow=new u.Glow(m),this.shadow=new u.Shadow(m),this.pixelate=new u.Pixelate(m),this.vignette=new u.Vignette(m),this.shine=new u.Shine(m),this.gradient=new u.Gradient(m),this.circle=new u.Circle(m),this.barrel=new u.Barrel(m),this.wipe=new u.Wipe(m),this.bokeh=new u.Bokeh(m);var g=[];g[n.GLOW]=this.onGlow,g[n.SHADOW]=this.onShadow,g[n.PIXELATE]=this.onPixelate,g[n.VIGNETTE]=this.onVignette,g[n.SHINE]=this.onShine,g[n.BLUR]=this.onBlur,g[n.GRADIENT]=this.onGradient,g[n.BLOOM]=this.onBloom,g[n.COLOR_MATRIX]=this.onColorMatrix,g[n.CIRCLE]=this.onCircle,g[n.BARREL]=this.onBarrel,g[n.DISPLACEMENT]=this.onDisplacement,g[n.WIPE]=this.onWipe,g[n.BOKEH]=this.onBokeh,this.fxHandlers=g,this.source,this.target,this.swap},onDraw:function(l,f,m){this.source=l,this.target=f,this.swap=m;var g=l.width,p=l.height,y=this.tempSprite,S=this.fxHandlers;if(y&&y.preFX)for(var C=y.preFX.list,A=0;A<C.length;A++){var M=C[A];M.active&&S[M.type].call(this,M,g,p)}this.drawToGame(this.source)},runDraw:function(){var l=this.source,f=this.target;this.copy(l,f),this.source=f,this.target=l},onGlow:function(l,f,m){var g=this.shaders[n.GLOW];this.setShader(g),this.glow.onPreRender(l,g,f,m),this.runDraw()},onShadow:function(l){var f=this.shaders[n.SHADOW];this.setShader(f),this.shadow.onPreRender(l,f),this.runDraw()},onPixelate:function(l,f,m){var g=this.shaders[n.PIXELATE];this.setShader(g),this.pixelate.onPreRender(l,g,f,m),this.runDraw()},onVignette:function(l){var f=this.shaders[n.VIGNETTE];this.setShader(f),this.vignette.onPreRender(l,f),this.runDraw()},onShine:function(l,f,m){var g=this.shaders[n.SHINE];this.setShader(g),this.shine.onPreRender(l,g,f,m),this.runDraw()},onBlur:function(l,f,m){var g=r(l,"quality"),p=this.shaders[n.BLUR+g];this.setShader(p),this.set1i("uMainSampler",0),this.set2f("resolution",f,m),this.set1f("strength",r(l,"strength")),this.set3fv("color",r(l,"glcolor"));for(var y=r(l,"x"),S=r(l,"y"),C=r(l,"steps"),A=0;A<C;A++)this.set2f("offset",y,0),this.runDraw(),this.set2f("offset",0,S),this.runDraw()},onGradient:function(l){var f=this.shaders[n.GRADIENT];this.setShader(f),this.gradient.onPreRender(l,f),this.runDraw()},onBloom:function(l,f,m){var g=this.shaders[n.BLOOM];this.copySprite(this.source,this.swap),this.setShader(g),this.set1i("uMainSampler",0),this.set1f("strength",r(l,"blurStrength")),this.set3fv("color",r(l,"glcolor"));for(var p=2/f*r(l,"offsetX"),y=2/m*r(l,"offsetY"),S=r(l,"steps"),C=0;C<S;C++)this.set2f("offset",p,0),this.runDraw(),this.set2f("offset",0,y),this.runDraw();this.blendFrames(this.swap,this.source,this.target,r(l,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(l){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",l.getData()),this.set1f("uAlpha",l.alpha),this.runDraw()},onCircle:function(l,f,m){var g=this.shaders[n.CIRCLE];this.setShader(g),this.circle.onPreRender(l,g,f,m),this.runDraw()},onBarrel:function(l){var f=this.shaders[n.BARREL];this.setShader(f),this.barrel.onPreRender(l,f),this.runDraw()},onDisplacement:function(l){this.setShader(this.shaders[n.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",l.x,l.y),this.bindTexture(l.glTexture,1),this.runDraw()},onWipe:function(l){var f=this.shaders[n.WIPE];this.setShader(f),this.wipe.onPreRender(l,f),this.runDraw()},onBokeh:function(l,f,m){var g=this.shaders[n.BOKEH];this.setShader(g),this.bokeh.onPreRender(l,g,f,m),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,a.prototype.destroy.call(this),this}});h.exports=d},96569:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(95540),n=e(31063),r=e(57516),a=e(61340),s=e(26099),o=e(29100),d=new i({Extends:r,initialize:function(f){var m=u(f,"fragShader",n);f.fragShader=m.replace("%LIGHT_COUNT%",f.game.renderer.config.maxLights),r.call(this,f),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new s,this._tempMatrix=new a,this._tempMatrix2=new a},boot:function(){o.prototype.boot.call(this)},onRender:function(l,f){var m=l.sys.lights;if(this.lightsActive=!1,!(!m||!m.active)){var g=m.getLights(f),p=g.length;this.lightsActive=!0;var y,S=this.renderer,C=S.height,A=f.matrix,M=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",f.x,f.y,f.rotation,f.zoom),this.set3f("uAmbientLightColor",m.ambientColor.r,m.ambientColor.g,m.ambientColor.b),this.set1i("uLightCount",p),y=0;y<p;y++){var L=g[y].light,P=L.color,O="uLights["+y+"].";A.transformPoint(L.x,L.y,M),this.set2f(O+"position",M.x-f.scrollX*L.scrollFactorX*f.zoom,C-(M.y-f.scrollY*L.scrollFactorY*f.zoom)),this.set3f(O+"color",P.r,P.g,P.b),this.set1f(O+"intensity",L.intensity),this.set1f(O+"radius",L.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(l){if(l!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var f=this.inverseRotationMatrix;if(l){var m=-l,g=Math.cos(m),p=Math.sin(m);f[1]=p,f[3]=-p,f[0]=f[4]=g}else f[0]=f[4]=1,f[1]=f[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,f),this.currentNormalMapRotation=l}},setTexture2D:function(l,f){var m=this.renderer;l===void 0&&(l=m.whiteTexture);var g=this.getNormalMap(f);this.isNewNormalMap(l,g)&&(this.flush(),this.createBatch(l),this.addTextureToBatch(g),this.currentNormalMap=g);var p=0;if(f&&f.parentContainer){var y=f.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);p=y.rotationNormalized}else f&&(p=f.rotation);return this.currentBatch===null&&(this.createBatch(l),this.addTextureToBatch(g)),this.setNormalMapRotation(p),0},setGameObject:function(l,f){f===void 0&&(f=l.frame);var m=f.glTexture,g=this.getNormalMap(l);if(this.isNewNormalMap(m,g)&&(this.flush(),this.createBatch(m),this.addTextureToBatch(g),this.currentNormalMap=g),l.parentContainer){var p=l.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(p.rotationNormalized)}else this.setNormalMapRotation(l.rotation);return this.currentBatch===null&&(this.createBatch(m),this.addTextureToBatch(g)),0},isNewNormalMap:function(l,f){return this.currentTexture!==l||this.currentNormalMap!==f},getNormalMap:function(l){var f;if(l)l.displayTexture?f=l.displayTexture.dataSource[l.displayFrame.sourceIndex]:l.texture?f=l.texture.dataSource[l.frame.sourceIndex]:l.tileset&&(Array.isArray(l.tileset)?f=l.tileset[0].image.dataSource[0]:f=l.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return f?f.glTexture:this.renderer.normalTexture},batchSprite:function(l,f,m){this.lightsActive&&r.prototype.batchSprite.call(this,l,f,m)},batchTexture:function(l,f,m,g,p,y,S,C,A,M,L,P,O,D,I,F,H,k,W,$,K,Z,X,j,Y,U,J,q,_,te,se,ne){this.lightsActive&&r.prototype.batchTexture.call(this,l,f,m,g,p,y,S,C,A,M,L,P,O,D,I,F,H,k,W,$,K,Z,X,j,Y,U,J,q,_,te,se,ne)},batchTextureFrame:function(l,f,m,g,p,y,S){this.lightsActive&&r.prototype.batchTextureFrame.call(this,l,f,m,g,p,y,S)}});h.exports=d},56527:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(95540),n=e(57516),r=e(45561),a=e(60722),s=e(14500),o=e(29100),d=new i({Extends:n,initialize:function(f){f.fragShader=u(f,"fragShader",r),f.vertShader=u(f,"vertShader",a),f.attributes=u(f,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:s.UNSIGNED_BYTE,normalized:!0}]),f.forceZero=!0,f.resizeUniform="uResolution",n.call(this,f)},boot:function(){o.prototype.boot.call(this);var l=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",l.width,l.height)}});h.exports=d},57516:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(94811),n=e(95540),r=e(98840),a=e(44667),s=e(61340),o=e(70554),d=e(14500),l=e(29100),f=new i({Extends:l,initialize:function(g){var p=g.game.renderer,y=n(g,"fragShader",r);g.fragShader=o.parseFragmentShaderMaxTextures(y,p.maxTextures),g.vertShader=n(g,"vertShader",a),g.attributes=n(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:d.UNSIGNED_BYTE,normalized:!0}]),g.resizeUniform="uResolution",l.call(this,g),this._tempMatrix1=new s,this._tempMatrix2=new s,this._tempMatrix3=new s,this.calcMatrix=new s,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){l.prototype.boot.call(this);var m=this.renderer;this.set1iv("uMainSampler",m.textureIndexes),this.set2f("uResolution",m.width,m.height)},batchSprite:function(m,g,p){this.manager.set(this,m);var y=this._tempMatrix1,S=this._tempMatrix2,C=this._tempMatrix3,A=m.frame,M=A.glTexture,L=A.u0,P=A.v0,O=A.u1,D=A.v1,I=A.x,F=A.y,H=A.cutWidth,k=A.cutHeight,W=A.customPivot,$=m.displayOriginX,K=m.displayOriginY,Z=-$+I,X=-K+F;if(m.isCropped){var j=m._crop;(j.flipX!==m.flipX||j.flipY!==m.flipY)&&A.updateCropUVs(j,m.flipX,m.flipY),L=j.u0,P=j.v0,O=j.u1,D=j.v1,H=j.width,k=j.height,I=j.x,F=j.y,Z=-$+I,X=-K+F}var Y=1,U=1;m.flipX&&(W||(Z+=-A.realWidth+$*2),Y=-1),m.flipY&&(W||(X+=-A.realHeight+K*2),U=-1);var J=m.x,q=m.y;g.roundPixels&&(J=Math.floor(J),q=Math.floor(q)),S.applyITRS(J,q,m.rotation,m.scaleX*Y,m.scaleY*U),y.copyFrom(g.matrix),p?(y.multiplyWithOffset(p,-g.scrollX*m.scrollFactorX,-g.scrollY*m.scrollFactorY),S.e=J,S.f=q):(S.e-=g.scrollX*m.scrollFactorX,S.f-=g.scrollY*m.scrollFactorY),y.multiply(S,C);var _=C.setQuad(Z,X,Z+H,X+k,g.renderRoundPixels),te=o.getTintAppendFloatAlpha,se=g.alpha,ne=te(m.tintTopLeft,se*m._alphaTL),he=te(m.tintTopRight,se*m._alphaTR),le=te(m.tintBottomLeft,se*m._alphaBL),ge=te(m.tintBottomRight,se*m._alphaBR);this.shouldFlush(6)&&this.flush();var re=this.setGameObject(m,A);this.manager.preBatch(m),this.batchQuad(m,_[0],_[1],_[2],_[3],_[4],_[5],_[6],_[7],L,P,O,D,ne,he,le,ge,m.tintFill,M,re),this.manager.postBatch(m)},batchTexture:function(m,g,p,y,S,C,A,M,L,P,O,D,I,F,H,k,W,$,K,Z,X,j,Y,U,J,q,_,te,se,ne,he,le,ge){ge===void 0&&(ge=!1),this.manager.set(this,m);var re=this._tempMatrix1,fe=this._tempMatrix2,Ae=this._tempMatrix3,Ie=$/p+_,Ne=K/y+te,Fe=($+Z)/p+_,Se=(K+X)/y+te,Oe=A,Be=M,Pt=-k,Gt=-W;if(m.isCropped){var si=m._crop,It=si.width,Ht=si.height;Oe=It,Be=Ht,A=It,M=Ht,$=si.x,K=si.y;var hi=$,Ai=K;D&&(hi=Z-si.x-It),I&&(Ai=X-si.y-Ht),Ie=hi/p+_,Ne=Ai/y+te,Fe=(hi+It)/p+_,Se=(Ai+Ht)/y+te,Pt=-k+$,Gt=-W+K}I=I^(!he&&g.isRenderTexture?1:0),D&&(Oe*=-1,Pt+=A),I&&(Be*=-1,Gt+=M),se.roundPixels&&(S=Math.floor(S),C=Math.floor(C)),fe.applyITRS(S,C,O,L,P),re.copyFrom(se.matrix),ne?(re.multiplyWithOffset(ne,-se.scrollX*F,-se.scrollY*H),fe.e=S,fe.f=C):(fe.e-=se.scrollX*F,fe.f-=se.scrollY*H),re.multiply(fe,Ae);var Ot=Ae.setQuad(Pt,Gt,Pt+Oe,Gt+Be,se.renderRoundPixels);le==null&&(le=this.setTexture2D(g)),m&&!ge&&this.manager.preBatch(m),this.batchQuad(m,Ot[0],Ot[1],Ot[2],Ot[3],Ot[4],Ot[5],Ot[6],Ot[7],Ie,Ne,Fe,Se,j,Y,U,J,q,g,le),m&&!ge&&this.manager.postBatch(m)},batchTextureFrame:function(m,g,p,y,S,C,A){this.manager.set(this);var M=this._tempMatrix1.copyFrom(C),L=this._tempMatrix2;A?M.multiply(A,L):L=M;var P=L.setQuad(g,p,g+m.width,p+m.height),O=this.setTexture2D(m.source.glTexture);y=o.getTintAppendFloatAlpha(y,S),this.batchQuad(null,P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],m.u0,m.v0,m.u1,m.v1,y,y,y,y,0,m.glTexture,O)},batchFillRect:function(m,g,p,y,S,C){this.renderer.pipelines.set(this);var A=this.calcMatrix;C&&C.multiply(S,A);var M=A.setQuad(m,g,m+p,g+y),L=this.fillTint;this.batchQuad(null,M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],0,0,1,1,L.TL,L.TR,L.BL,L.BR,2)},batchFillTriangle:function(m,g,p,y,S,C,A,M){this.renderer.pipelines.set(this);var L=this.calcMatrix;M&&M.multiply(A,L);var P=L.getX(m,g),O=L.getY(m,g),D=L.getX(p,y),I=L.getY(p,y),F=L.getX(S,C),H=L.getY(S,C),k=this.fillTint;this.batchTri(null,P,O,D,I,F,H,0,0,1,1,k.TL,k.TR,k.BL,2)},batchStrokeTriangle:function(m,g,p,y,S,C,A,M,L){var P=this.tempTriangle;P[0].x=m,P[0].y=g,P[0].width=A,P[1].x=p,P[1].y=y,P[1].width=A,P[2].x=S,P[2].y=C,P[2].width=A,P[3].x=m,P[3].y=g,P[3].width=A,this.batchStrokePath(P,A,!1,M,L)},batchFillPath:function(m,g,p){this.renderer.pipelines.set(this);var y=this.calcMatrix;p&&p.multiply(g,y);for(var S=m.length,C=this.polygonCache,A,M,L=this.fillTint.TL,P=this.fillTint.TR,O=this.fillTint.BL,D=0;D<S;++D)M=m[D],C.push(M.x,M.y);A=u(C),S=A.length;for(var I=0;I<S;I+=3){var F=A[I+0]*2,H=A[I+1]*2,k=A[I+2]*2,W=C[F+0],$=C[F+1],K=C[H+0],Z=C[H+1],X=C[k+0],j=C[k+1],Y=y.getX(W,$),U=y.getY(W,$),J=y.getX(K,Z),q=y.getY(K,Z),_=y.getX(X,j),te=y.getY(X,j);this.batchTri(null,Y,U,J,q,_,te,0,0,1,1,L,P,O,2)}C.length=0},batchStrokePath:function(m,g,p,y,S){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var C=m.length-1,A=0;A<C;A++){var M=m[A],L=m[A+1];this.batchLine(M.x,M.y,L.x,L.y,M.width/2,L.width/2,g,A,!p&&A===C-1,y,S)}},batchLine:function(m,g,p,y,S,C,A,M,L,P,O){this.renderer.pipelines.set(this);var D=this.calcMatrix;O&&O.multiply(P,D);var I=p-m,F=y-g,H=Math.sqrt(I*I+F*F);if(H!==0){var k=S*(y-g)/H,W=S*(m-p)/H,$=C*(y-g)/H,K=C*(m-p)/H,Z=p-$,X=y-K,j=m-k,Y=g-W,U=p+$,J=y+K,q=m+k,_=g+W,te=D.getX(Z,X),se=D.getY(Z,X),ne=D.getX(j,Y),he=D.getY(j,Y),le=D.getX(U,J),ge=D.getY(U,J),re=D.getX(q,_),fe=D.getY(q,_),Ae=this.strokeTint,Ie=Ae.TL,Ne=Ae.TR,Fe=Ae.BL,Se=Ae.BR;if(this.batchQuad(null,re,fe,ne,he,te,se,le,ge,0,0,1,1,Ie,Ne,Fe,Se,2),!(A<=2)){var Oe=this.prevQuad,Be=this.firstQuad;M>0&&Oe[4]?this.batchQuad(null,re,fe,ne,he,Oe[0],Oe[1],Oe[2],Oe[3],0,0,1,1,Ie,Ne,Fe,Se,2):(Be[0]=re,Be[1]=fe,Be[2]=ne,Be[3]=he,Be[4]=1),L&&Be[4]?this.batchQuad(null,te,se,le,ge,Be[0],Be[1],Be[2],Be[3],0,0,1,1,Ie,Ne,Fe,Se,2):(Oe[0]=te,Oe[1]=se,Oe[2]=le,Oe[3]=ge,Oe[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,l.prototype.destroy.call(this),this}});h.exports=f},43439:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(95540),n=e(4127),r=e(89924),a=e(29100),s=new i({Extends:a,initialize:function(d){d.vertShader=u(d,"vertShader",r),d.fragShader=u(d,"fragShader",n),d.attributes=u(d,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),a.call(this,d)},onRender:function(o,d){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",d.zoom)},batchPointLight:function(o,d,l,f,m,g,p,y,S,C,A,M){var L=o.color,P=o.intensity,O=o.radius,D=o.attenuation,I=L.r*P,F=L.g*P,H=L.b*P,k=d.alpha*o.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(l,f,A,M,O,D,I,F,H,k),this.batchLightVert(m,g,A,M,O,D,I,F,H,k),this.batchLightVert(p,y,A,M,O,D,I,F,H,k),this.batchLightVert(l,f,A,M,O,D,I,F,H,k),this.batchLightVert(p,y,A,M,O,D,I,F,H,k),this.batchLightVert(S,C,A,M,O,D,I,F,H,k),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(o,d,l,f,m,g,p,y,S,C){var A=this.vertexViewF32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;A[++M]=o,A[++M]=d,A[++M]=l,A[++M]=f,A[++M]=m,A[++M]=g,A[++M]=p,A[++M]=y,A[++M]=S,A[++M]=C,this.vertexCount++}});h.exports=s},84057:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(89422),n=e(95540),r=e(27681),a=e(49627),s=e(29100),o=new i({Extends:s,initialize:function(l){l.renderTarget=n(l,"renderTarget",1),l.fragShader=n(l,"fragShader",r),l.vertShader=n(l,"vertShader",a),l.attributes=n(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),l.batchSize=1,l.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],s.call(this,l),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new u,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){s.prototype.boot.call(this);var d=this.manager.UTILITY_PIPELINE;this.fullFrame1=d.fullFrame1,this.fullFrame2=d.fullFrame2,this.halfFrame1=d.halfFrame1,this.halfFrame2=d.halfFrame2;var l=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",l.width,l.height);for(var f=this.renderTargets,m=0;m<f.length;m++)f[m].autoResize=!0},postBatch:function(d){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(d){this.bindAndDraw(d)},getController:function(d){return d!==void 0?d:this.controller?this.controller:this},copySprite:function(d,l,f){f===void 0&&(f=!1);var m=this.gl;m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,d.texture.webGLTexture);var g=m.getParameter(m.FRAMEBUFFER_BINDING);m.bindFramebuffer(m.FRAMEBUFFER,l.framebuffer.webGLFramebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,l.texture.webGLTexture,0),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),f&&(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,g))},copyFrame:function(d,l,f,m,g){this.manager.copyFrame(d,l,f,m,g)},copyToGame:function(d){this.manager.copyToGame(d)},drawFrame:function(d,l,f){this.manager.drawFrame(d,l,f,this.colorMatrix)},blendFrames:function(d,l,f,m,g){this.manager.blendFrames(d,l,f,m,g)},blendFramesAdditive:function(d,l,f,m,g){this.manager.blendFramesAdditive(d,l,f,m,g)},clearFrame:function(d,l){this.manager.clearFrame(d,l)},blitFrame:function(d,l,f,m,g,p){this.manager.blitFrame(d,l,f,m,g,p)},copyFrameRect:function(d,l,f,m,g,p,y,S){this.manager.copyFrameRect(d,l,f,m,g,p,y,S)},bindAndDraw:function(d,l,f,m,g){f===void 0&&(f=!0),m===void 0&&(m=!0);var p=this.gl,y=this.renderer;this.bind(g),this.set1i("uMainSampler",0),l?(p.viewport(0,0,l.width,l.height),p.bindFramebuffer(p.FRAMEBUFFER,l.framebuffer.webGLFramebuffer),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l.texture.webGLTexture,0),f&&(m?p.clearColor(0,0,0,0):p.clearColor(0,0,0,1),p.clear(p.COLOR_BUFFER_BIT))):(y.popFramebuffer(!1,!1),y.currentFramebuffer||p.viewport(0,0,y.width,y.height)),y.restoreStencilMask(),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,d.texture.webGLTexture),p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.STATIC_DRAW),p.drawArrays(p.TRIANGLES,0,6),l&&(p.bindTexture(p.TEXTURE_2D,null),p.bindFramebuffer(p.FRAMEBUFFER,y.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),s.prototype.destroy.call(this),this}});h.exports=o},43558:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(10312),u=e(67502),n=e(83419),r=e(96293),a=e(95540),s=e(57516),o=e(27681),d=e(87841),l=e(32302),f=e(45561),m=e(60722),g=e(29100),p=new n({Extends:s,initialize:function(S){var C=a(S,"fragShader",o),A=a(S,"vertShader",m),M=a(S,"drawShader",o),L=[{name:"DrawSprite",fragShader:f,vertShader:m},{name:"CopySprite",fragShader:C,vertShader:A},{name:"DrawGame",fragShader:M,vertShader:m},{name:"ColorMatrix",fragShader:r}],P=a(S,"shaders",[]);S.shaders=L.concat(P),S.vertShader||(S.vertShader=A),S.batchSize=1,s.call(this,S),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new d,this.targetBounds=new d,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){g.prototype.boot.call(this);var y=this.shaders,S=this.renderer;this.drawSpriteShader=y[0],this.copyShader=y[1],this.gameShader=y[2],this.colorMatrixShader=y[3],this.fsTarget=new l(S,S.width,S.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var C=new ArrayBuffer(168);this.quadVertexData=C,this.quadVertexViewF32=new Float32Array(C),this.quadVertexBuffer=S.createVertexBuffer(C,this.gl.STATIC_DRAW),this.onResize(S.width,S.height),this.currentShader=this.copyShader,this.set2f("uResolution",S.width,S.height)},onResize:function(y,S){var C=this.quadVertexViewF32;C[1]=S,C[22]=S,C[14]=y,C[28]=y,C[35]=y,C[36]=S},batchQuad:function(y,S,C,A,M,L,P,O,D,I,F,H,k,W,$,K,Z,X,j){var Y=Math.min(S,A,L,O),U=Math.min(C,M,P,D),J=Math.max(S,A,L,O),q=Math.max(C,M,P,D),_=J-Y,te=q-U,se=this.spriteBounds.setTo(Y,U,_,te),ne=y?y.preFX.padding:0,he=_+ne*2,le=te+ne*2,ge=Math.abs(Math.max(he,le)),re=this.manager.getRenderTarget(ge),fe=this.targetBounds.setTo(0,0,re.width,re.height);u(fe,Math.round(se.centerX),Math.round(se.centerY)),this.tempSprite=y;var Ae=this.gl,Ie=this.renderer;Ie.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",Ie.width,Ie.height),this.flipProjectionMatrix(!0),y&&(this.onDrawSprite(y,re),y.preFX.onFX(this));var Ne=this.fsTarget;return this.flush(),Ae.viewport(0,0,Ie.width,Ie.height),Ae.bindFramebuffer(Ae.FRAMEBUFFER,Ne.framebuffer.webGLFramebuffer),Ae.framebufferTexture2D(Ae.FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,Ae.TEXTURE_2D,Ne.texture.webGLTexture,0),Ae.clearColor(0,0,0,0),Ae.clear(Ae.COLOR_BUFFER_BIT),this.setTexture2D(j),this.batchVert(S,C,I,F,0,X,W),this.batchVert(A,M,I,k,0,X,K),this.batchVert(L,P,H,k,0,X,Z),this.batchVert(S,C,I,F,0,X,W),this.batchVert(L,P,H,k,0,X,Z),this.batchVert(O,D,H,F,0,X,$),this.flush(),this.flipProjectionMatrix(!1),Ae.activeTexture(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_2D,re.texture.webGLTexture),Ae.copyTexSubImage2D(Ae.TEXTURE_2D,0,0,0,fe.x,fe.y,fe.width,fe.height),Ae.bindFramebuffer(Ae.FRAMEBUFFER,null),Ae.bindTexture(Ae.TEXTURE_2D,null),this.onBatch(y),this.currentShader=this.copyShader,this.onDraw(re,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(y,S,C,A,M,L,P){C===void 0&&(C=!0),A===void 0&&(A=!0),M===void 0&&(M=!1),P===void 0&&(P=this.copyShader);var O=this.gl,D=this.tempSprite;L&&(P=this.colorMatrixShader),this.currentShader=P;var I=this.setVertexBuffer(this.quadVertexBuffer);P.bind(I,!1);var F=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",F.width,F.height),D.preFX.onFXCopy(this),this.onCopySprite(y,S,D),L&&(this.set1fv("uColorMatrix",L.getData()),this.set1f("uAlpha",L.alpha)),O.activeTexture(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,y.texture.webGLTexture),y.height>S.height)O.viewport(0,0,y.width,y.height),this.setTargetUVs(y,S);else{var H=S.height-y.height;O.viewport(0,H,y.width,y.height),this.resetUVs()}if(O.bindFramebuffer(O.FRAMEBUFFER,S.framebuffer.webGLFramebuffer),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,S.texture.webGLTexture,0),C&&(O.clearColor(0,0,0,+!A),O.clear(O.COLOR_BUFFER_BIT)),M){var k=this.renderer.currentBlendMode;this.renderer.setBlendMode(i.ERASE)}O.bufferData(O.ARRAY_BUFFER,this.quadVertexData,O.STATIC_DRAW),O.drawArrays(O.TRIANGLES,0,6),M&&this.renderer.setBlendMode(k),O.bindFramebuffer(O.FRAMEBUFFER,null)},copy:function(y,S){var C=this.gl;this.set1i("uMainSampler",0),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,y.texture.webGLTexture),C.viewport(0,0,y.width,y.height),this.setUVs(0,0,0,1,1,1,1,0),C.bindFramebuffer(C.FRAMEBUFFER,S.framebuffer.webGLFramebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,S.texture.webGLTexture,0),C.clearColor(0,0,0,0),C.clear(C.COLOR_BUFFER_BIT),C.bufferData(C.ARRAY_BUFFER,this.quadVertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null)},blendFrames:function(y,S,C,A,M){this.manager.blendFrames(y,S,C,A,M)},blendFramesAdditive:function(y,S,C,A,M){this.manager.blendFramesAdditive(y,S,C,A,M)},drawToGame:function(y){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(y)},copyToGame:function(y){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(y)},bindAndDraw:function(y){var S=this.gl,C=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(y.texture);var A=this._tempMatrix1.loadIdentity(),M=this.targetBounds.x,L=this.targetBounds.y,P=M+y.width,O=L+y.height,D=A.getX(M,L),I=A.getX(M,O),F=A.getX(P,O),H=A.getX(P,L),k=A.getY(M,L),W=A.getY(M,O),$=A.getY(P,O),K=A.getY(P,L),Z=16777215;this.batchVert(D,k,0,0,0,0,Z),this.batchVert(I,W,0,1,0,0,Z),this.batchVert(F,$,1,1,0,0,Z),this.batchVert(D,k,0,0,0,0,Z),this.batchVert(F,$,1,1,0,0,Z),this.batchVert(H,K,1,0,0,0,Z),C.restoreFramebuffer(!1,!0),C.currentFramebuffer||S.viewport(0,0,C.width,C.height),C.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(y){this.drawToGame(y)},setUVs:function(y,S,C,A,M,L,P,O){var D=this.quadVertexViewF32;D[2]=y,D[3]=S,D[9]=C,D[10]=A,D[16]=M,D[17]=L,D[23]=y,D[24]=S,D[30]=M,D[31]=L,D[37]=P,D[38]=O},setTargetUVs:function(y,S){var C=S.height/y.height;C>.5?C=.5-(C-.5):C=.5+(.5-C),this.setUVs(0,C,0,1+C,1,1+C,1,C)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,s.prototype.destroy.call(this),this}});h.exports=p},81041:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(95540),n=e(57516),r=new i({Extends:n,initialize:function(s){s.topology=5,s.batchSize=u(s,"batchSize",256),n.call(this,s)}});h.exports=r},12385:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(95540),n=e(57516),r=e(45561),a=e(60722),s=e(29100),o=new i({Extends:n,initialize:function(l){l.fragShader=u(l,"fragShader",r),l.vertShader=u(l,"vertShader",a),l.forceZero=!0,n.call(this,l)},boot:function(){s.prototype.boot.call(this);var d=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",d.width,d.height)}});h.exports=o},7589:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35407),u=e(10312),n=e(83419),r=e(89422),a=e(96293),s=e(36682),o=e(95540),d=e(48247),l=e(49627),f=e(29100),m=new n({Extends:f,initialize:function(p){p.renderTarget=o(p,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),p.vertShader=o(p,"vertShader",l),p.shaders=o(p,"shaders",[{name:"Copy",fragShader:s},{name:"AddBlend",fragShader:i},{name:"LinearBlend",fragShader:d},{name:"ColorMatrix",fragShader:a}]),p.attributes=o(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),p.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],p.batchSize=1,f.call(this,p),this.colorMatrix=new r,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){f.prototype.boot.call(this);var g=this.shaders,p=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=p[0],this.fullFrame2=p[1],this.halfFrame1=p[2],this.halfFrame2=p[3]},copyFrame:function(g,p,y,S,C){y===void 0&&(y=1),S===void 0&&(S=!0),C===void 0&&(C=!0);var A=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",y),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,g.texture.webGLTexture),p?(A.viewport(0,0,p.width,p.height),A.bindFramebuffer(A.FRAMEBUFFER,p.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,p.texture.webGLTexture,0)):A.viewport(0,0,g.width,g.height),S&&(C?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},blitFrame:function(g,p,y,S,C,A,M){y===void 0&&(y=1),S===void 0&&(S=!0),C===void 0&&(C=!0),A===void 0&&(A=!1),M===void 0&&(M=!1);var L=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",y),L.activeTexture(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,g.texture.webGLTexture),g.height>p.height)L.viewport(0,0,g.width,g.height),this.setTargetUVs(g,p);else{var P=p.height-g.height;L.viewport(0,P,g.width,g.height)}if(L.bindFramebuffer(L.FRAMEBUFFER,p.framebuffer.webGLFramebuffer),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,p.texture.webGLTexture,0),S&&(C?L.clearColor(0,0,0,0):L.clearColor(0,0,0,1),L.clear(L.COLOR_BUFFER_BIT)),A){var O=this.renderer.currentBlendMode;this.renderer.setBlendMode(u.ERASE)}M&&this.flipY(),L.bufferData(L.ARRAY_BUFFER,this.vertexData,L.STATIC_DRAW),L.drawArrays(L.TRIANGLES,0,6),A&&this.renderer.setBlendMode(O),L.bindFramebuffer(L.FRAMEBUFFER,null),L.bindTexture(L.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,p,y,S,C,A,M,L){M===void 0&&(M=!0),L===void 0&&(L=!0);var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,g.texture.webGLTexture,0),M&&(L?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,p.texture.webGLTexture),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,y,S,C,A),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},copyToGame:function(g){var p=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,g.texture.webGLTexture),p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.STATIC_DRAW),p.drawArrays(p.TRIANGLES,0,6)},drawFrame:function(g,p,y,S){y===void 0&&(y=!0),S===void 0&&(S=this.colorMatrix);var C=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",S.getData()),this.set1f("uAlpha",S.alpha),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture.webGLTexture),p?(C.viewport(0,0,p.width,p.height),C.bindFramebuffer(C.FRAMEBUFFER,p.framebuffer.webGLFramebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,p.texture.webGLTexture,0)):C.viewport(0,0,g.width,g.height),y?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blendFrames:function(g,p,y,S,C,A){S===void 0&&(S=1),C===void 0&&(C=!0),A===void 0&&(A=this.linearShader);var M=this.gl;this.setShader(A),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",S),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,g.texture.webGLTexture),M.activeTexture(M.TEXTURE1),M.bindTexture(M.TEXTURE_2D,p.texture.webGLTexture),y?(M.bindFramebuffer(M.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,y.texture.webGLTexture,0),M.viewport(0,0,y.width,y.height)):M.viewport(0,0,g.width,g.height),C?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT),M.bufferData(M.ARRAY_BUFFER,this.vertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},blendFramesAdditive:function(g,p,y,S,C){this.blendFrames(g,p,y,S,C,this.addShader)},clearFrame:function(g,p){p===void 0&&(p=!0);var y=this.gl;y.viewport(0,0,g.width,g.height),y.bindFramebuffer(y.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),p?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT);var S=this.renderer.currentFramebuffer;y.bindFramebuffer(y.FRAMEBUFFER,S.webGLFramebuffer)},setUVs:function(g,p,y,S,C,A,M,L){var P=this.vertexViewF32;P[2]=g,P[3]=p,P[6]=y,P[7]=S,P[10]=C,P[11]=A,P[14]=g,P[15]=p,P[18]=C,P[19]=A,P[22]=M,P[23]=L},setTargetUVs:function(g,p){var y=p.height/g.height;y>.5?y=.5-(y-.5):y=.5+(.5-y),this.setUVs(0,y,0,1+y,1,1+y,1,y)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});h.exports=m},36060:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};h.exports=w},84817:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelineafterflush"},36712:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelinebeforeflush"},40285:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelinebind"},65918:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelineboot"},92852:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelinedestroy"},56072:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelinerebind"},57566:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelineresize"},77085:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AFTER_FLUSH:e(84817),BEFORE_FLUSH:e(36712),BIND:e(40285),BOOT:e(65918),DESTROY:e(92852),REBIND:e(56072),RESIZE:e(57566)}},54812:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(99155),n=e(84057),r=new i({Extends:n,initialize:function(s){n.call(this,{game:s,fragShader:u}),this.amount=1},onPreRender:function(a,s){a=this.getController(a),this.set1f("amount",a.amount,s)}});h.exports=r},67329:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(24400),n=e(84057),r=new i({Extends:n,initialize:function(s){n.call(this,{game:s,fragShader:u}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(a){a=this.getController(a),this.set1f("strength",a.blurStrength),this.set3fv("color",a.glcolor)},onDraw:function(a){var s=this.getController(),o=this.fullFrame1,d=this.fullFrame2;this.copyFrame(a,d);for(var l=2/a.width*s.offsetX,f=2/a.height*s.offsetY,m=0;m<s.steps;m++)this.set2f("offset",l,0),this.copySprite(a,o),this.set2f("offset",0,f),this.copySprite(o,a);this.blendFrames(d,a,o,s.strength),this.copyToGame(o)}});h.exports=r},8861:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(41514),n=e(51078),r=e(94328),a=e(84057),s=new i({Extends:a,initialize:function(d){a.call(this,{game:d,shaders:[{name:"Gaussian5",fragShader:u},{name:"Gaussian9",fragShader:n},{name:"Gaussian13",fragShader:r}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(o){var d=this.getController(),l=this.gl,f=this.fullFrame1,m=l.getParameter(l.FRAMEBUFFER_BINDING);this.bind(this.shaders[d.quality]),l.activeTexture(l.TEXTURE0),l.viewport(0,0,o.width,o.height),this.set1i("uMainSampler",0),this.set2f("resolution",o.width,o.height),this.set1f("strength",d.strength),this.set3fv("color",d.glcolor);for(var g=0;g<d.steps;g++)this.set2f("offset",d.x,0),this.copySprite(o,f),this.set2f("offset",0,d.y),this.copySprite(f,o);l.bindFramebuffer(l.FRAMEBUFFER,m),l.bindTexture(l.TEXTURE_2D,null),this.copyToGame(o)}});h.exports=s},51051:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(90610),n=e(84057),r=new i({Extends:n,initialize:function(s){n.call(this,{game:s,fragShader:u}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(a,s,o,d){a=this.getController(a),this.set1f("radius",a.radius,s),this.set1f("amount",a.amount,s),this.set1f("contrast",a.contrast,s),this.set1f("strength",a.strength,s),this.set2f("blur",a.blurX,a.blurY,s),this.setBoolean("isTiltShift",a.isTiltShift,s),o&&d&&this.set2f("resolution",o,d,s)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});h.exports=r},89428:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(91899),n=e(84057),r=new i({Extends:n,initialize:function(s){n.call(this,{game:s,fragShader:u}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(a,s,o,d){a=this.getController(a),this.set1f("scale",a.scale,s),this.set1f("feather",a.feather,s),this.set1f("thickness",a.thickness,s),this.set3fv("color",a.glcolor,s),this.set4fv("backgroundColor",a.glcolor2,s),o&&d&&this.set2f("resolution",o,d,s)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});h.exports=r},88904:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(84057),n=new i({Extends:u,initialize:function(a){u.call(this,{game:a})},onDraw:function(r){var a=this.fullFrame1;this.controller?this.manager.drawFrame(r,a,!0,this.controller):this.drawFrame(r,a),this.copyToGame(a)}});h.exports=n},63563:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(47838),n=e(84057),r=new i({Extends:n,initialize:function(s){n.call(this,{game:s,fragShader:u}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(a){var s=this.game.textures.getFrame(a);s&&(this.glTexture=s.glTexture)},onDraw:function(a){var s=this.getController(),o=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",s.x,s.y),this.bindTexture(s.glTexture,1),this.copySprite(a,o),this.copyToGame(o)}});h.exports=r},94045:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(95540),n=e(98656),r=e(84057),a=e(70554),s=new i({Extends:r,initialize:function(d,l){var f=u(l,"quality",.1),m=u(l,"distance",10);r.call(this,{game:d,fragShader:a.setGlowQuality(n,d,f,m)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(o,d,l,f){o=this.getController(o),this.set1f("outerStrength",o.outerStrength,d),this.set1f("innerStrength",o.innerStrength,d),this.set4fv("glowColor",o.glcolor,d),this.setBoolean("knockout",o.knockout,d),l&&f&&this.set2f("resolution",l,f,d)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});h.exports=s},74088:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(70463),n=e(84057),r=new i({Extends:n,initialize:function(s){n.call(this,{game:s,fragShader:u}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(a,s){a=this.getController(a),this.set1f("alpha",a.alpha,s),this.set1i("size",a.size,s),this.set3fv("color1",a.glcolor1,s),this.set3fv("color2",a.glcolor2,s),this.set2f("positionFrom",a.fromX,a.fromY,s),this.set2f("positionTo",a.toX,a.toY,s)}});h.exports=r},99636:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(50831),n=e(84057),r=new i({Extends:n,initialize:function(s){n.call(this,{game:s,fragShader:u}),this.amount=1},onPreRender:function(a,s,o,d){a=this.getController(a),this.set1f("amount",a.amount,s),o&&d&&this.set2f("resolution",o,d,s)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});h.exports=r},34700:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(92595),n=e(84057),r=new i({Extends:n,initialize:function(s){n.call(this,{game:s,fragShader:u}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(a,s){a=this.getController(a);var o=a.samples;this.set1i("samples",o,s),this.set1f("intensity",a.intensity,s),this.set1f("decay",a.decay,s),this.set1f("power",a.power/o,s),this.set2f("lightPosition",a.x,a.y,s),this.set4fv("color",a.glcolor,s)}});h.exports=r},91157:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(72464),n=e(84057),r=new i({Extends:n,initialize:function(s){n.call(this,{game:s,fragShader:u}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(a,s,o,d){a=this.getController(a),this.setTime("time",s),this.set1f("speed",a.speed,s),this.set1f("lineWidth",a.lineWidth,s),this.set1f("gradient",a.gradient,s),this.setBoolean("reveal",a.reveal,s),o&&d&&this.set2f("resolution",o,d,s)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});h.exports=r},27797:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(39249),n=e(84057),r=new i({Extends:n,initialize:function(s){n.call(this,{game:s,fragShader:u}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(a,s){a=this.getController(a),this.set1f("radius",a.radius,s),this.set1f("strength",a.strength,s),this.set2f("position",a.x,a.y,s)}});h.exports=r},67603:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(2878),n=e(84057),r=new i({Extends:n,initialize:function(s){n.call(this,{game:s,fragShader:u}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(a,s){a=this.getController(a);var o=a.progress,d=a.wipeWidth,l=a.direction,f=a.axis;this.set4f("config",o,d,l,f,s),this.setBoolean("reveal",a.reveal,s)}});h.exports=r},58918:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={Barrel:e(54812),Bloom:e(67329),Blur:e(8861),Bokeh:e(51051),Circle:e(89428),ColorMatrix:e(88904),Displacement:e(63563),Glow:e(94045),Gradient:e(74088),Pixelate:e(99636),Shadow:e(34700),Shine:e(91157),Vignette:e(27797),Wipe:e(67603)};h.exports=i},96615:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(36060),u=e(79291),n={FX:e(58918),BitmapMaskPipeline:e(31302),Events:e(77085),FXPipeline:e(92651),LightPipeline:e(96569),MobilePipeline:e(56527),MultiPipeline:e(57516),PointLightPipeline:e(43439),PostFXPipeline:e(84057),PreFXPipeline:e(43558),RopePipeline:e(81041),SinglePipeline:e(12385),UtilityPipeline:e(7589)};n=u(!1,n,i),h.exports=n},35407:h=>{h.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},78908:h=>{h.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},85191:h=>{h.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},96293:h=>{h.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},36682:h=>{h.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},99155:h=>{h.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},24400:h=>{h.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},94328:h=>{h.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},41514:h=>{h.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},51078:h=>{h.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},90610:h=>{h.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},91899:h=>{h.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},47838:h=>{h.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},98656:h=>{h.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},70463:h=>{h.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},50831:h=>{h.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},92595:h=>{h.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},72464:h=>{h.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},39249:h=>{h.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},2878:h=>{h.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},31063:h=>{h.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},48247:h=>{h.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},41214:h=>{h.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},39653:h=>{h.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},62143:h=>{h.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},47940:h=>{h.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},98840:h=>{h.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},44667:h=>{h.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},4127:h=>{h.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},89924:h=>{h.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},27681:h=>{h.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},49627:h=>{h.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},45561:h=>{h.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},60722:h=>{h.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},89350:(h,w,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AddBlendFrag:e(35407),BitmapMaskFrag:e(78908),BitmapMaskVert:e(85191),ColorMatrixFrag:e(96293),CopyFrag:e(36682),FXBarrelFrag:e(99155),FXBloomFrag:e(24400),FXBlurHighFrag:e(94328),FXBlurLowFrag:e(41514),FXBlurMedFrag:e(51078),FXBokehFrag:e(90610),FXCircleFrag:e(91899),FXDisplacementFrag:e(47838),FXGlowFrag:e(98656),FXGradientFrag:e(70463),FXPixelateFrag:e(50831),FXShadowFrag:e(92595),FXShineFrag:e(72464),FXVignetteFrag:e(39249),FXWipeFrag:e(2878),LightFrag:e(31063),LinearBlendFrag:e(48247),MeshFrag:e(41214),MeshVert:e(39653),MobileFrag:e(62143),MobileVert:e(47940),MultiFrag:e(98840),MultiVert:e(44667),PointLightFrag:e(4127),PointLightVert:e(89924),PostFXFrag:e(27681),QuadVert:e(49627),SingleFrag:e(45561),SingleVert:e(60722)}},93567:(h,w,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a,s){this.webGLAttribLocation=-1,this.gl=r,this.program=a,this.name=s,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var n=this.gl;n.isContextLost()||(this.webGLAttribLocation=n.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});h.exports=u},26128:(h,w,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a,s,o){this.webGLBuffer=null,this.gl=r,this.initialDataOrSize=a,this.bufferType=s,this.bufferUsage=o,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var n=this.gl;if(!n.isContextLost()){var r=this.bufferType,a=n.createBuffer();this.webGLBuffer=a,n.bindBuffer(r,this.webGLBuffer),n.bufferData(r,this.initialDataOrSize,this.bufferUsage),n.bindBuffer(r,null)}}},destroy:function(){var n=this.gl;n.isContextLost()||n.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});h.exports=u},84387:(h,w,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},n=new i({initialize:function(a,s,o,d,l){this.webGLFramebuffer=null,this.gl=a,this.width=s,this.height=o,this.renderTexture=d,this.addDepthStencilBuffer=!!l,this.createResource()},createResource:function(){var r=this.gl;if(!r.isContextLost()){var a=this.renderTexture,s=0,o=r.createFramebuffer();if(this.webGLFramebuffer=o,r.bindFramebuffer(r.FRAMEBUFFER,o),a.isRenderTexture=!0,a.isAlphaPremultiplied=!1,r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a.webGLTexture,0),s=r.checkFramebufferStatus(r.FRAMEBUFFER),s!==r.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(u[s]||s));if(this.addDepthStencilBuffer){var d=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,d),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,this.width,this.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,d)}r.bindFramebuffer(r.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var r=this.gl;if(!r.isContextLost()){r.bindFramebuffer(r.FRAMEBUFFER,this.webGLFramebuffer);var a=r.getFramebufferAttachmentParameter(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);a!==null&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0),r.deleteTexture(a));var s=r.getFramebufferAttachmentParameter(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);s!==null&&r.deleteRenderbuffer(s),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});h.exports=n},1482:(h,w,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a,s){this.webGLProgram=null,this.gl=r,this.vertexSource=a,this.fragmentSource=s,this.createResource()},createResource:function(){var n=this.gl;if(!n.isContextLost()){var r=n.createProgram(),a=n.createShader(n.VERTEX_SHADER),s=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(a,this.vertexSource),n.shaderSource(s,this.fragmentSource),n.compileShader(a),n.compileShader(s);var o=`Shader failed:
`;if(!n.getShaderParameter(a,n.COMPILE_STATUS))throw new Error("Vertex "+o+n.getShaderInfoLog(a));if(!n.getShaderParameter(s,n.COMPILE_STATUS))throw new Error("Fragment "+o+n.getShaderInfoLog(s));if(n.attachShader(r,a),n.attachShader(r,s),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw new Error("Link "+o+n.getProgramInfoLog(r));n.useProgram(r),this.webGLProgram=r}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});h.exports=u},82751:(h,w,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(50030),n=new i({initialize:function(a,s,o,d,l,f,m,g,p,y,S,C,A){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=a,this.mipLevel=s,this.minFilter=o,this.magFilter=d,this.wrapT=l,this.wrapS=f,this.format=m,this.pixels=g,this.width=p,this.height=y,this.pma=S??!0,this.forceSize=!!C,this.flipY=!!A,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var r=this.gl;if(!r.isContextLost()){if(this.pixels instanceof n){this.webGLTexture=this.pixels.webGLTexture;return}var a=r.createTexture();a.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=a,this._processTexture()}},update:function(r,a,s,o,d,l,f,m,g){if(!(a===0||s===0)){this.pixels=r,this.width=a,this.height=s,this.flipY=o,this.wrapS=d,this.wrapT=l,this.minFilter=f,this.magFilter=m,this.format=g;var p=this.gl;p.isContextLost()||this._processTexture()}},_processTexture:function(){var r=this.gl;r.activeTexture(r.TEXTURE0);var a=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,this.webGLTexture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.minFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,this.magFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this.wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this.wrapT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.flipY);var s=this.pixels,o=this.mipLevel,d=this.width,l=this.height,f=this.format,m=!1;if(s==null)r.texImage2D(r.TEXTURE_2D,o,f,d,l,0,f,r.UNSIGNED_BYTE,null),m=u(d,l);else if(s.compressed){d=s.width,l=s.height,m=s.generateMipmap;for(var g=0;g<s.mipmaps.length;g++)r.compressedTexImage2D(r.TEXTURE_2D,g,s.internalFormat,s.mipmaps[g].width,s.mipmaps[g].height,0,s.mipmaps[g].data)}else s instanceof Uint8Array?(r.texImage2D(r.TEXTURE_2D,o,f,d,l,0,f,r.UNSIGNED_BYTE,s),m=u(d,l)):(this.forceSize||(d=s.width,l=s.height),r.texImage2D(r.TEXTURE_2D,o,f,f,r.UNSIGNED_BYTE,s),m=u(d,l));m&&r.generateMipmap(r.TEXTURE_2D),a?r.bindTexture(r.TEXTURE_2D,a):r.bindTexture(r.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(r){this.__SPECTOR_Metadata=r,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=r)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof n||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});h.exports=n},57183:(h,w,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a,s){this.webGLUniformLocation=null,this.gl=r,this.program=a,this.name=s,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var n=this.gl;n.isContextLost()||(this.webGLUniformLocation=n.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});h.exports=u},9503:(h,w,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={WebGLAttribLocationWrapper:e(93567),WebGLBufferWrapper:e(26128),WebGLProgramWrapper:e(1482),WebGLTextureWrapper:e(82751),WebGLFramebufferWrapper:e(84387),WebGLUniformLocationWrapper:e(57183)};h.exports=i},76531:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(13560),u=e(83419),n=e(50792),r=e(97480),a=e(8443),s=e(57811),o=e(74403),d=e(45818),l=e(29747),f=e(87841),m=e(86555),g=e(56583),p=e(26099),y=e(38058),S=new u({Extends:n,initialize:function(A){n.call(this),this.game=A,this.canvas,this.canvasBounds=new f,this.parent=null,this.parentIsWindow=!1,this.parentSize=new m,this.gameSize=new m,this.baseSize=new m,this.displaySize=new m,this.scaleMode=i.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new p(1,1),this.autoRound=!1,this.autoCenter=i.CENTER.NO_CENTER,this.orientation=i.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:l,windowResize:l,fullScreenChange:l,fullScreenError:l}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(a.BOOT,this.boot,this)},boot:function(){var C=this.game;this.canvas=C.canvas,this.fullscreen=C.device.fullscreen;var A=this.scaleMode;A!==i.SCALE_MODE.RESIZE&&A!==i.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(A),A===i.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),C.events.on(a.PRE_STEP,this.step,this),C.events.once(a.READY,this.refresh,this),C.events.once(a.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(C){this.getParent(C),this.getParentBounds();var A=C.width,M=C.height,L=C.scaleMode,P=C.zoom,O=C.autoRound;if(typeof A=="string")if(A.substr(-1)!=="%")A=parseInt(A,10);else{var D=this.parentSize.width;D===0&&(D=window.innerWidth);var I=parseInt(A,10)/100;A=Math.floor(D*I)}if(typeof M=="string")if(M.substr(-1)!=="%")M=parseInt(M,10);else{var F=this.parentSize.height;F===0&&(F=window.innerHeight);var H=parseInt(M,10)/100;M=Math.floor(F*H)}this.scaleMode=L,this.autoRound=O,this.autoCenter=C.autoCenter,this.resizeInterval=C.resizeInterval,O&&(A=Math.floor(A),M=Math.floor(M)),this.gameSize.setSize(A,M),P===i.ZOOM.MAX_ZOOM&&(P=this.getMaxZoom()),this.zoom=P,P!==1&&(this._resetZoom=!0),this.baseSize.setSize(A,M),O&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),C.minWidth>0&&this.displaySize.setMin(C.minWidth*P,C.minHeight*P),C.maxWidth>0&&this.displaySize.setMax(C.maxWidth*P,C.maxHeight*P),this.displaySize.setSize(A,M),(C.snapWidth>0||C.snapHeight>0)&&this.displaySize.setSnap(C.snapWidth,C.snapHeight),this.orientation=d(A,M)},getParent:function(C){var A=C.parent;if(A!==null){if(this.parent=o(A),this.parentIsWindow=this.parent===document.body,C.expandParent&&C.scaleMode!==i.SCALE_MODE.NONE){var M=this.parent.getBoundingClientRect();(this.parentIsWindow||M.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",M=this.parent.getBoundingClientRect(),!this.parentIsWindow&&M.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}C.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=o(C.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var C=this.parentSize,A=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(A.height=s(!0));var M=A.width,L=A.height;if(C.width!==M||C.height!==L)return C.setSize(M,L),!0;if(this.canvas){var P=this.canvasBounds,O=this.canvas.getBoundingClientRect();if(O.x!==P.x||O.y!==P.y)return!0}return!1},lockOrientation:function(C){var A=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return A?A.call(screen,C):!1},setParentSize:function(C,A){return this.parentSize.setSize(C,A),this.refresh()},setGameSize:function(C,A){var M=this.autoRound;M&&(C=Math.floor(C),A=Math.floor(A));var L=this.width,P=this.height;return this.gameSize.resize(C,A),this.baseSize.resize(C,A),M&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(C/A),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(L,P)},resize:function(C,A){var M=this.zoom,L=this.autoRound;L&&(C=Math.floor(C),A=Math.floor(A));var P=this.width,O=this.height;this.gameSize.resize(C,A),this.baseSize.resize(C,A),L&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(C*M,A*M),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var D=this.canvas.style,I=C*M,F=A*M;return L&&(I=Math.floor(I),F=Math.floor(F)),(I!==C||F!==A)&&(D.width=I+"px",D.height=F+"px"),this.refresh(P,O)},setZoom:function(C){return this.zoom=C,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(C,A){return C===void 0&&(C=0),A===void 0&&(A=C),this.displaySize.setSnap(C,A),this.refresh()},refresh:function(C,A){C===void 0&&(C=this.width),A===void 0&&(A=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var M=this.game.domContainer;if(M){this.baseSize.setCSS(M);var L=this.canvas.style,P=M.style;P.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",P.marginLeft=L.marginLeft,P.marginTop=L.marginTop}return this.emit(r.RESIZE,this.gameSize,this.baseSize,this.displaySize,C,A),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var C=d(this.width,this.height);C!==this.orientation&&(this.orientation=C,this.emit(r.ORIENTATION_CHANGE,C))}},updateScale:function(){var C=this.canvas.style,A=this.gameSize.width,M=this.gameSize.height,L,P,O=this.zoom,D=this.autoRound;if(this.scaleMode===i.SCALE_MODE.NONE)this.displaySize.setSize(A*O,M*O),L=this.displaySize.width,P=this.displaySize.height,D&&(L=Math.floor(L),P=Math.floor(P)),this._resetZoom&&(C.width=L+"px",C.height=P+"px",this._resetZoom=!1);else if(this.scaleMode===i.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),L=this.displaySize.width,P=this.displaySize.height,D&&(L=Math.floor(L),P=Math.floor(P)),this.canvas.width=L,this.canvas.height=P;else if(this.scaleMode===i.SCALE_MODE.EXPAND){var I=this.game.config.width,F=this.game.config.height;this.displaySize.setSize(this.parentSize.width,this.parentSize.height),L=this.displaySize.width,P=this.displaySize.height,D&&(L=Math.floor(L),P=Math.floor(P)),C.width=L+"px",C.height=P+"px";var H=this.parentSize.width/I,k=this.parentSize.height/F;H<k&&H!==0?this.baseSize.setSize(I,this.parentSize.height/H):k!==0&&this.baseSize.setSize(this.displaySize.width/k,F),this.gameSize.setSize(this.baseSize.width,this.baseSize.height),L=this.baseSize.width,P=this.baseSize.height,D&&(L=Math.floor(L),P=Math.floor(P)),this.canvas.width=L,this.canvas.height=P}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),L=this.displaySize.width,P=this.displaySize.height,D&&(L=Math.floor(L),P=Math.floor(P)),C.width=L+"px",C.height=P+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var C=g(this.parentSize.width,this.gameSize.width,0,!0),A=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(C,A),1)},updateCenter:function(){var C=this.autoCenter;if(C!==i.CENTER.NO_CENTER){var A=this.canvas,M=A.style,L=A.getBoundingClientRect(),P=L.width,O=L.height,D=Math.floor((this.parentSize.width-P)/2),I=Math.floor((this.parentSize.height-O)/2);C===i.CENTER.CENTER_HORIZONTALLY?I=0:C===i.CENTER.CENTER_VERTICALLY&&(D=0),M.marginLeft=D+"px",M.marginTop=I+"px"}},updateBounds:function(){var C=this.canvasBounds,A=this.canvas.getBoundingClientRect();C.x=A.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),C.y=A.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),C.width=A.width,C.height=A.height},transformX:function(C){return(C-this.canvasBounds.left)*this.displayScale.x},transformY:function(C){return(C-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(C){C===void 0&&(C={navigationUI:"hide"});var A=this.fullscreen;if(!A.available){this.emit(r.FULLSCREEN_UNSUPPORTED);return}if(!A.active){var M=this.getFullscreenTarget();A.keyboard?M[A.request](Element.ALLOW_KEYBOARD_INPUT):M[A.request](C)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(r.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(C){this.removeFullscreenTarget(),this.emit(r.FULLSCREEN_FAILED,C)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var C=document.createElement("div");C.style.margin="0",C.style.padding="0",C.style.width="100%",C.style.height="100%",this.fullscreenTarget=C,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var A=this.canvas.parentNode;A.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var C=this.fullscreenTarget;if(C&&C.parentNode){var A=C.parentNode;A.insertBefore(this.canvas,C),A.removeChild(C)}}},stopFullscreen:function(){var C=this.fullscreen;if(!C.available)return this.emit(r.FULLSCREEN_UNSUPPORTED),!1;C.active&&document[C.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(r.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(C){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(C)},startListeners:function(){var C=this,A=this.domlisteners;if(A.orientationChange=function(){C.updateBounds(),C._checkOrientation=!0,C.dirty=!0,C.refresh()},A.windowResize=function(){C.updateBounds(),C.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",A.orientationChange,!1):window.addEventListener("orientationchange",A.orientationChange,!1),window.addEventListener("resize",A.windowResize,!1),this.fullscreen.available){A.fullScreenChange=function(L){return C.onFullScreenChange(L)},A.fullScreenError=function(L){return C.onFullScreenError(L)};var M=["webkit","moz",""];M.forEach(function(L){document.addEventListener(L+"fullscreenchange",A.fullScreenChange,!1),document.addEventListener(L+"fullscreenerror",A.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",A.fullScreenChange,!1),document.addEventListener("MSFullscreenError",A.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(C,A){C instanceof y||(A=C,C=void 0),A===void 0&&(A=new f);var M=this.baseSize,L=this.parentSize,P=this.canvasBounds,O=this.displayScale,D=P.x>=0?0:-(P.x*O.x),I=P.y>=0?0:-(P.y*O.y),F;L.width>=P.width?F=M.width:F=M.width-(P.width-L.width)*O.x;var H;return L.height>=P.height?H=M.height:H=M.height-(P.height-L.height)*O.y,A.setTo(D,I,F,H),C&&(A.width/=C.zoomX,A.height/=C.zoomY,A.centerX=C.centerX+C.scrollX,A.centerY=C.centerY+C.scrollY),A},step:function(C,A){this.parent&&(this._lastCheck+=A,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var C=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",C.orientationChange,!1):window.removeEventListener("orientationchange",C.orientationChange,!1),window.removeEventListener("resize",C.windowResize,!1);var A=["webkit","moz",""];A.forEach(function(M){document.removeEventListener(M+"fullscreenchange",C.fullScreenChange,!1),document.removeEventListener(M+"fullscreenerror",C.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",C.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",C.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===i.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===i.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});h.exports=S},64743:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}},81050:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={CENTER:e(64743),ORIENTATION:e(39218),SCALE_MODE:e(81050),ZOOM:e(80805)};h.exports=i},56139:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="enterfullscreen"},2336:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="fullscreenfailed"},47412:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="fullscreenunsupported"},51452:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="leavefullscreen"},20666:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="orientationchange"},47945:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resize"},97480:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ENTER_FULLSCREEN:e(56139),FULLSCREEN_FAILED:e(2336),FULLSCREEN_UNSUPPORTED:e(47412),LEAVE_FULLSCREEN:e(51452),ORIENTATION_CHANGE:e(20666),RESIZE:e(47945)}},93364:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(79291),u=e(13560),n={Center:e(64743),Events:e(97480),Orientation:e(39218),ScaleManager:e(76531),ScaleModes:e(81050),Zoom:e(80805)};n=i(!1,n,u.CENTER),n=i(!1,n,u.ORIENTATION),n=i(!1,n,u.SCALE_MODE),n=i(!1,n,u.ZOOM),h.exports=n},27397:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(95540),u=e(35355),n=function(r){var a=r.game.config.defaultPhysicsSystem,s=i(r.settings,"physics",!1);if(!(!a&&!s)){var o=[];if(a&&o.push(u(a+"Physics")),s)for(var d in s)d=u(d.concat("Physics")),o.indexOf(d)===-1&&o.push(d);return o}};h.exports=n},52106:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(95540),u=function(n){var r=n.plugins.getDefaultScenePlugins(),a=i(n.settings,"plugins",!1);return Array.isArray(a)?a:r||[]};h.exports=u},87033:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};h.exports=w},97482:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(2368),n=new i({initialize:function(a){this.sys=new u(this,a),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});h.exports=n},60903:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(89993),n=e(44594),r=e(8443),a=e(35154),s=e(54899),o=e(29747),d=e(97482),l=e(2368),f=new i({initialize:function(g,p){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,p){Array.isArray(p)||(p=[p]);for(var y=0;y<p.length;y++)this._pending.push({key:"default",scene:p[y],autoStart:y===0,data:{}})}g.events.once(r.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new d),this.game.events.emit(r.SYSTEM_READY,this.systemScene,this);var m,g,p,y;for(m=0;m<this._pending.length;m++){g=this._pending[m],p=g.key,y=g.scene;var S;y instanceof d?S=this.createSceneFromInstance(p,y):typeof y=="object"?S=this.createSceneFromObject(p,y):typeof y=="function"&&(S=this.createSceneFromFunction(p,y)),p=S.sys.settings.key,this.keys[p]=S,this.scenes.push(S),this._data[p]&&(S.sys.settings.data=this._data[p].data,this._data[p].autoStart&&(g.autoStart=!0)),(g.autoStart||S.sys.settings.active)&&this._start.push(p)}for(this._pending.length=0,this._data={},this.isBooted=!0,m=0;m<this._start.length;m++)g=this._start[m],this.start(g);this._start.length=0}},processQueue:function(){var m=this._pending.length,g=this._queue.length;if(!(m===0&&g===0)){var p,y;if(m){for(p=0;p<m;p++)y=this._pending[p],this.add(y.key,y.scene,y.autoStart,y.data);for(p=0;p<this._start.length;p++)y=this._start[p],this.start(y);this._start.length=0,this._pending.length=0}for(p=0;p<this._queue.length;p++)y=this._queue[p],this[y.op](y.keyA,y.keyB,y.data);this._queue.length=0}},add:function(m,g,p,y){if(p===void 0&&(p=!1),y===void 0&&(y={}),this.isProcessing||!this.isBooted)return this._pending.push({key:m,scene:g,autoStart:p,data:y}),this.isBooted||(this._data[m]={data:y}),null;m=this.getKey(m,g);var S;return g instanceof d?S=this.createSceneFromInstance(m,g):typeof g=="object"?(g.key=m,S=this.createSceneFromObject(m,g)):typeof g=="function"&&(S=this.createSceneFromFunction(m,g)),S.sys.settings.data=y,m=S.sys.settings.key,this.keys[m]=S,this.scenes.push(S),(p||S.sys.settings.active)&&(this._pending.length?this._start.push(m):this.start(m)),S},remove:function(m){if(this.isProcessing)return this.queueOp("remove",m);var g=this.getScene(m);if(!g||g.sys.isTransitioning())return this;var p=this.scenes.indexOf(g),y=g.sys.settings.key;return p>-1&&(delete this.keys[y],this.scenes.splice(p,1),this._start.indexOf(y)>-1&&(p=this._start.indexOf(y),this._start.splice(p,1)),g.sys.destroy()),this},bootScene:function(m){var g=m.sys,p=g.settings;g.sceneUpdate=o,m.init&&(m.init.call(m,p.data),p.status=u.INIT,p.isTransition&&g.events.emit(n.TRANSITION_INIT,p.transitionFrom,p.transitionDuration));var y;g.load&&(y=g.load,y.reset()),y&&m.preload?(m.preload.call(m),p.status=u.LOADING,y.once(s.COMPLETE,this.loadComplete,this),y.start()):this.create(m)},loadComplete:function(m){this.create(m.scene)},payloadComplete:function(m){this.bootScene(m.scene)},update:function(m,g){this.processQueue(),this.isProcessing=!0;for(var p=this.scenes.length-1;p>=0;p--){var y=this.scenes[p].sys;y.settings.status>u.START&&y.settings.status<=u.RUNNING&&y.step(m,g),y.scenePlugin&&y.scenePlugin._target&&y.scenePlugin.step(m,g)}},render:function(m){for(var g=0;g<this.scenes.length;g++){var p=this.scenes[g].sys;p.settings.visible&&p.settings.status>=u.LOADING&&p.settings.status<u.SLEEPING&&p.render(m)}this.isProcessing=!1},create:function(m){var g=m.sys,p=g.settings;m.create&&(p.status=u.CREATING,m.create.call(m,p.data),p.status===u.DESTROYED)||(p.isTransition&&g.events.emit(n.TRANSITION_START,p.transitionFrom,p.transitionDuration),m.update&&(g.sceneUpdate=m.update),p.status=u.RUNNING,g.events.emit(n.CREATE,m))},createSceneFromFunction:function(m,g){var p=new g;if(p instanceof d){var y=p.sys.settings.key;if(y!==""&&(m=y),this.keys.hasOwnProperty(m))throw new Error("Cannot add Scene with duplicate key: "+m);return this.createSceneFromInstance(m,p)}else return p.sys=new l(p),p.sys.settings.key=m,p.sys.init(this.game),p},createSceneFromInstance:function(m,g){var p=g.sys.settings.key;return p===""&&(g.sys.settings.key=m),g.sys.init(this.game),g},createSceneFromObject:function(m,g){var p=new d(g),y=p.sys.settings.key;y!==""?m=y:p.sys.settings.key=m,p.sys.init(this.game);for(var S=["init","preload","create","update","render"],C=0;C<S.length;C++){var A=a(g,S[C],null);A&&(p[S[C]]=A)}if(g.hasOwnProperty("extend")){for(var M in g.extend)if(g.extend.hasOwnProperty(M)){var L=g.extend[M];M==="data"&&p.hasOwnProperty("data")&&typeof L=="object"?p.data.merge(L):M!=="sys"&&(p[M]=L)}}return p},getKey:function(m,g){if(m||(m="default"),typeof g=="function")return m;if(g instanceof d?m=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(m=g.key),this.keys.hasOwnProperty(m))throw new Error("Cannot add Scene with duplicate key: "+m);return m},getScenes:function(m,g){m===void 0&&(m=!0),g===void 0&&(g=!1);for(var p=[],y=this.scenes,S=0;S<y.length;S++){var C=y[S];C&&(!m||m&&C.sys.isActive())&&p.push(C)}return g?p.reverse():p},getScene:function(m){if(typeof m=="string"){if(this.keys[m])return this.keys[m]}else for(var g=0;g<this.scenes.length;g++)if(m===this.scenes[g])return m;return null},isActive:function(m){var g=this.getScene(m);return g?g.sys.isActive():null},isPaused:function(m){var g=this.getScene(m);return g?g.sys.isPaused():null},isVisible:function(m){var g=this.getScene(m);return g?g.sys.isVisible():null},isSleeping:function(m){var g=this.getScene(m);return g?g.sys.isSleeping():null},pause:function(m,g){var p=this.getScene(m);return p&&p.sys.pause(g),this},resume:function(m,g){var p=this.getScene(m);return p&&p.sys.resume(g),this},sleep:function(m,g){var p=this.getScene(m);return p&&!p.sys.isTransitioning()&&p.sys.sleep(g),this},wake:function(m,g){var p=this.getScene(m);return p&&p.sys.wake(g),this},run:function(m,g){var p=this.getScene(m);if(!p){for(var y=0;y<this._pending.length;y++)if(this._pending[y].key===m){this.queueOp("start",m,g);break}return this}p.sys.isSleeping()?p.sys.wake(g):p.sys.isPaused()?p.sys.resume(g):this.start(m,g)},start:function(m,g){if(!this.isBooted)return this._data[m]={autoStart:!0,data:g},this;var p=this.getScene(m);if(!p)return console.warn("Scene key not found: "+m),this;var y=p.sys,S=y.settings.status;if(S>=u.START&&S<=u.CREATING)return this;if(S>=u.RUNNING&&S<=u.SLEEPING)y.shutdown(),y.sceneUpdate=o,y.start(g);else{y.sceneUpdate=o,y.start(g);var C;if(y.load&&(C=y.load),C&&y.settings.hasOwnProperty("pack")&&(C.reset(),C.addPack({payload:y.settings.pack})))return y.settings.status=u.LOADING,C.once(s.COMPLETE,this.payloadComplete,this),C.start(),this}return this.bootScene(p),this},stop:function(m,g){var p=this.getScene(m);if(p&&!p.sys.isTransitioning()&&p.sys.settings.status!==u.SHUTDOWN){var y=p.sys.load;y&&(y.off(s.COMPLETE,this.loadComplete,this),y.off(s.COMPLETE,this.payloadComplete,this)),p.sys.shutdown(g)}return this},switch:function(m,g,p){var y=this.getScene(m),S=this.getScene(g);return y&&S&&y!==S&&(this.sleep(m),this.isSleeping(g)?this.wake(g,p):this.start(g,p)),this},getAt:function(m){return this.scenes[m]},getIndex:function(m){var g=this.getScene(m);return this.scenes.indexOf(g)},bringToTop:function(m){if(this.isProcessing)return this.queueOp("bringToTop",m);var g=this.getIndex(m),p=this.scenes;if(g!==-1&&g<p.length){var y=this.getScene(m);p.splice(g,1),p.push(y)}return this},sendToBack:function(m){if(this.isProcessing)return this.queueOp("sendToBack",m);var g=this.getIndex(m);if(g!==-1&&g>0){var p=this.getScene(m);this.scenes.splice(g,1),this.scenes.unshift(p)}return this},moveDown:function(m){if(this.isProcessing)return this.queueOp("moveDown",m);var g=this.getIndex(m);if(g>0){var p=g-1,y=this.getScene(m),S=this.getAt(p);this.scenes[g]=S,this.scenes[p]=y}return this},moveUp:function(m){if(this.isProcessing)return this.queueOp("moveUp",m);var g=this.getIndex(m);if(g<this.scenes.length-1){var p=g+1,y=this.getScene(m),S=this.getAt(p);this.scenes[g]=S,this.scenes[p]=y}return this},moveAbove:function(m,g){if(m===g)return this;if(this.isProcessing)return this.queueOp("moveAbove",m,g);var p=this.getIndex(m),y=this.getIndex(g);if(p!==-1&&y!==-1&&y<p){var S=this.getAt(y);this.scenes.splice(y,1),this.scenes.splice(p+(y>p),0,S)}return this},moveBelow:function(m,g){if(m===g)return this;if(this.isProcessing)return this.queueOp("moveBelow",m,g);var p=this.getIndex(m),y=this.getIndex(g);if(p!==-1&&y!==-1&&y>p){var S=this.getAt(y);this.scenes.splice(y,1),p===0?this.scenes.unshift(S):this.scenes.splice(p-(y<p),0,S)}return this},queueOp:function(m,g,p,y){return this._queue.push({op:m,keyA:g,keyB:p,data:y}),this},swapPosition:function(m,g){if(m===g)return this;if(this.isProcessing)return this.queueOp("swapPosition",m,g);var p=this.getIndex(m),y=this.getIndex(g);if(p!==y&&p!==-1&&y!==-1){var S=this.getAt(p);this.scenes[p]=this.scenes[y],this.scenes[y]=S}return this},dump:function(){for(var m=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],p=0;p<this.scenes.length;p++){var y=this.scenes[p].sys,S=y.settings.visible&&(y.settings.status===u.RUNNING||y.settings.status===u.PAUSED)?"[*] ":"[-] ";S+=y.settings.key+" ("+g[y.settings.status]+")",m.push(S)}console.log(m.join(`
`))},destroy:function(){for(var m=0;m<this.scenes.length;m++){var g=this.scenes[m].sys;g.destroy()}this.systemScene.sys.destroy(),this.update=o,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});h.exports=f},52209:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=e(83419),n=e(44594),r=e(95540),a=e(37277),s=new u({initialize:function(d){this.scene=d,this.systems=d.sys,this.settings=d.sys.settings,this.key=d.sys.settings.key,this.manager=d.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,d.sys.events.once(n.BOOT,this.boot,this),d.sys.events.on(n.START,this.pluginStart,this)},boot:function(){this.systems.events.once(n.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(n.SHUTDOWN,this.shutdown,this)},start:function(o,d){return o===void 0&&(o=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",o,d),this},restart:function(o){var d=this.key;return this.manager.queueOp("stop",d),this.manager.queueOp("start",d,o),this},transition:function(o){o===void 0&&(o={});var d=r(o,"target",!1),l=this.manager.getScene(d);if(!d||!this.checkValidTransition(l))return!1;var f=r(o,"duration",1e3);this._elapsed=0,this._target=l,this._duration=f,this._willSleep=r(o,"sleep",!1),this._willRemove=r(o,"remove",!1);var m=r(o,"onUpdate",null);m&&(this._onUpdate=m,this._onUpdateScope=r(o,"onUpdateScope",this.scene));var g=r(o,"allowInput",!1);this.settings.transitionAllowInput=g;var p=l.sys.settings;p.isTransition=!0,p.transitionFrom=this.scene,p.transitionDuration=f,p.transitionAllowInput=g,r(o,"moveAbove",!1)?this.manager.moveAbove(this.key,d):r(o,"moveBelow",!1)&&this.manager.moveBelow(this.key,d),l.sys.isSleeping()?l.sys.wake(r(o,"data")):this.manager.start(d,r(o,"data"));var y=r(o,"onStart",null),S=r(o,"onStartScope",this.scene);return y&&y.call(S,this.scene,l,f),this.systems.events.emit(n.TRANSITION_OUT,l,f),!0},checkValidTransition:function(o){return!(!o||o.sys.isActive()||o.sys.isTransitioning()||o===this.scene||this.systems.isTransitioning())},step:function(o,d){this._elapsed+=d,this.transitionProgress=i(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var o=this._target.sys,d=this._target.sys.settings;o.events.emit(n.TRANSITION_COMPLETE,this.scene),d.isTransition=!1,d.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(o,d,l,f){return this.manager.add(o,d,l,f)},launch:function(o,d){return o&&o!==this.key&&this.manager.queueOp("start",o,d),this},run:function(o,d){return o&&o!==this.key&&this.manager.queueOp("run",o,d),this},pause:function(o,d){return o===void 0&&(o=this.key),this.manager.queueOp("pause",o,d),this},resume:function(o,d){return o===void 0&&(o=this.key),this.manager.queueOp("resume",o,d),this},sleep:function(o,d){return o===void 0&&(o=this.key),this.manager.queueOp("sleep",o,d),this},wake:function(o,d){return o===void 0&&(o=this.key),this.manager.queueOp("wake",o,d),this},switch:function(o,d){return o!==this.key&&this.manager.queueOp("switch",this.key,o,d),this},stop:function(o,d){return o===void 0&&(o=this.key),this.manager.queueOp("stop",o,d),this},setActive:function(o,d,l){d===void 0&&(d=this.key);var f=this.manager.getScene(d);return f&&f.sys.setActive(o,l),this},setVisible:function(o,d){d===void 0&&(d=this.key);var l=this.manager.getScene(d);return l&&l.sys.setVisible(o),this},isSleeping:function(o){return o===void 0&&(o=this.key),this.manager.isSleeping(o)},isActive:function(o){return o===void 0&&(o=this.key),this.manager.isActive(o)},isPaused:function(o){return o===void 0&&(o=this.key),this.manager.isPaused(o)},isVisible:function(o){return o===void 0&&(o=this.key),this.manager.isVisible(o)},swapPosition:function(o,d){return d===void 0&&(d=this.key),o!==d&&this.manager.swapPosition(o,d),this},moveAbove:function(o,d){return d===void 0&&(d=this.key),o!==d&&this.manager.moveAbove(o,d),this},moveBelow:function(o,d){return d===void 0&&(d=this.key),o!==d&&this.manager.moveBelow(o,d),this},remove:function(o){return o===void 0&&(o=this.key),this.manager.remove(o),this},moveUp:function(o){return o===void 0&&(o=this.key),this.manager.moveUp(o),this},moveDown:function(o){return o===void 0&&(o=this.key),this.manager.moveDown(o),this},bringToTop:function(o){return o===void 0&&(o=this.key),this.manager.bringToTop(o),this},sendToBack:function(o){return o===void 0&&(o=this.key),this.manager.sendToBack(o),this},get:function(o){return this.manager.getScene(o)},getStatus:function(o){var d=this.manager.getScene(o);if(d)return d.sys.getStatus()},getIndex:function(o){return o===void 0&&(o=this.key),this.manager.getIndex(o)},shutdown:function(){var o=this.systems.events;o.off(n.SHUTDOWN,this.shutdown,this),o.off(n.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});a.register("ScenePlugin",s,"scenePlugin"),h.exports=s},55681:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(89993),u=e(35154),n=e(46975),r=e(87033),a={create:function(s){return typeof s=="string"?s={key:s}:s===void 0&&(s={}),{status:i.PENDING,key:u(s,"key",""),active:u(s,"active",!1),visible:u(s,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:u(s,"pack",!1),cameras:u(s,"cameras",null),map:u(s,"map",n(r,u(s,"mapAdd",{}))),physics:u(s,"physics",{}),loader:u(s,"loader",{}),plugins:u(s,"plugins",!1),input:u(s,"input",{})}}};h.exports=a},2368:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(89993),n=e(42363),r=e(44594),a=e(27397),s=e(52106),o=e(29747),d=e(55681),l=new i({initialize:function(m,g){this.scene=m,this.game,this.renderer,this.config=g,this.settings=d.create(g),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=o},init:function(f){this.settings.status=u.INIT,this.sceneUpdate=o,this.game=f,this.renderer=f.renderer,this.canvas=f.canvas,this.context=f.context;var m=f.plugins;this.plugins=m,m.addToScene(this,n.Global,[n.CoreScene,s(this),a(this)]),this.events.emit(r.BOOT,this),this.settings.isBooted=!0},step:function(f,m){var g=this.events;g.emit(r.PRE_UPDATE,f,m),g.emit(r.UPDATE,f,m),this.sceneUpdate.call(this.scene,f,m),g.emit(r.POST_UPDATE,f,m)},render:function(f){var m=this.displayList;m.depthSort(),this.events.emit(r.PRE_RENDER,f),this.cameras.render(f,m),this.events.emit(r.RENDER,f)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(f){var m=this.settings,g=this.getStatus();return g!==u.CREATING&&g!==u.RUNNING?console.warn("Cannot pause non-running Scene",m.key):this.settings.active&&(m.status=u.PAUSED,m.active=!1,this.events.emit(r.PAUSE,this,f)),this},resume:function(f){var m=this.events,g=this.settings;return this.settings.active||(g.status=u.RUNNING,g.active=!0,m.emit(r.RESUME,this,f)),this},sleep:function(f){var m=this.settings,g=this.getStatus();return g!==u.CREATING&&g!==u.RUNNING?console.warn("Cannot sleep non-running Scene",m.key):(m.status=u.SLEEPING,m.active=!1,m.visible=!1,this.events.emit(r.SLEEP,this,f)),this},wake:function(f){var m=this.events,g=this.settings;return g.status=u.RUNNING,g.active=!0,g.visible=!0,m.emit(r.WAKE,this,f),g.isTransition&&m.emit(r.TRANSITION_WAKE,g.transitionFrom,g.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var f=this.settings.status;return f>u.PENDING&&f<=u.RUNNING},isSleeping:function(){return this.settings.status===u.SLEEPING},isActive:function(){return this.settings.status===u.RUNNING},isPaused:function(){return this.settings.status===u.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(f){return this.settings.visible=f,this},setActive:function(f,m){return f?this.resume(m):this.pause(m)},start:function(f){var m=this.events,g=this.settings;f&&(g.data=f),g.status=u.START,g.active=!0,g.visible=!0,m.emit(r.START,this),m.emit(r.READY,this,f)},shutdown:function(f){var m=this.events,g=this.settings;m.off(r.TRANSITION_INIT),m.off(r.TRANSITION_START),m.off(r.TRANSITION_COMPLETE),m.off(r.TRANSITION_OUT),g.status=u.SHUTDOWN,g.active=!1,g.visible=!1,m.emit(r.SHUTDOWN,this,f)},destroy:function(){var f=this.events,m=this.settings;m.status=u.DESTROYED,m.active=!1,m.visible=!1,f.emit(r.DESTROY,this),f.removeAllListeners();for(var g=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],p=0;p<g.length;p++)this[g[p]]=null}});h.exports=l},89993:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};h.exports=w},69830:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addedtoscene"},7919:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="boot"},46763:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="create"},11763:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},71555:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},36735:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postupdate"},3809:h=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prerender"},90716:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="preupdate"},58262:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="ready"},91633:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removedfromscene"},10319:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="render"},87132:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},81961:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="shutdown"},90194:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="sleep"},6265:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},33178:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitioncomplete"},43063:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitioninit"},11259:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitionout"},61611:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitionstart"},45209:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitionwake"},22966:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},21747:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="wake"},44594:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADDED_TO_SCENE:e(69830),BOOT:e(7919),CREATE:e(46763),DESTROY:e(11763),PAUSE:e(71555),POST_UPDATE:e(36735),PRE_RENDER:e(3809),PRE_UPDATE:e(90716),READY:e(58262),REMOVED_FROM_SCENE:e(91633),RENDER:e(10319),RESUME:e(87132),SHUTDOWN:e(81961),SLEEP:e(90194),START:e(6265),TRANSITION_COMPLETE:e(33178),TRANSITION_INIT:e(43063),TRANSITION_OUT:e(11259),TRANSITION_START:e(61611),TRANSITION_WAKE:e(45209),UPDATE:e(22966),WAKE:e(21747)}},62194:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(89993),u=e(79291),n={Events:e(44594),GetPhysicsPlugins:e(27397),GetScenePlugins:e(52106),SceneManager:e(60903),ScenePlugin:e(52209),Settings:e(55681),Systems:e(2368)};n=u(!1,n,i),h.exports=n},30341:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(50792),n=e(14463),r=e(79291),a=e(29747),s=new i({Extends:u,initialize:function(d,l,f){u.call(this),this.manager=d,this.key=l,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=r(this.config,f),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(o){return!o||!o.name||typeof o.name!="string"?!1:this.markers[o.name]?(console.error("addMarker "+o.name+" already exists in Sound"),!1):(o=r(!0,{name:"",start:0,duration:this.totalDuration-(o.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},o),this.markers[o.name]=o,!0)},updateMarker:function(o){return!o||!o.name||typeof o.name!="string"?!1:this.markers[o.name]?(this.markers[o.name]=r(!0,this.markers[o.name],o),!0):(console.warn("Audio Marker: "+o.name+" missing in Sound: "+this.key),!1)},removeMarker:function(o){var d=this.markers[o];return d?(this.markers[o]=null,d):null},play:function(o,d){if(o===void 0&&(o=""),typeof o=="object"&&(d=o,o=""),typeof o!="string")return!1;if(!o)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[o])return console.warn("Marker: "+o+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[o],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=r(this.currentConfig,d),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:a,calculateRate:function(){var o=1.0005777895065548,d=this.currentConfig.detune+this.manager.detune,l=Math.pow(o,d);this.totalRate=this.currentConfig.rate*this.manager.rate*l},destroy:function(){this.pendingRemove||(this.stop(),this.emit(n.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});h.exports=s},85034:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(41786),n=e(50792),r=e(14463),a=e(8443),s=e(46710),o=e(58731),d=e(29747),l=e(26099),f=new i({Extends:n,initialize:function(g){n.call(this),this.game=g,this.jsonCache=g.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new l,g.events.on(a.BLUR,this.onGameBlur,this),g.events.on(a.FOCUS,this.onGameFocus,this),g.events.on(a.PRE_STEP,this.update,this),g.events.once(a.DESTROY,this.destroy,this)},add:d,addAudioSprite:function(m,g){g===void 0&&(g={});var p=this.add(m,g);p.spritemap=this.jsonCache.get(m).spritemap;for(var y in p.spritemap)if(p.spritemap.hasOwnProperty(y)){var S=u(g),C=p.spritemap[y];S.loop=C.hasOwnProperty("loop")?C.loop:!1,p.addMarker({name:y,start:C.start,duration:C.end-C.start,config:S})}return p},get:function(m){return o(this.sounds,"key",m)},getAll:function(m){return m?s(this.sounds,"key",m):s(this.sounds)},getAllPlaying:function(){return s(this.sounds,"isPlaying",!0)},play:function(m,g){var p=this.add(m);return p.once(r.COMPLETE,p.destroy,p),g?g.name?(p.addMarker(g),p.play(g.name)):p.play(g):p.play()},playAudioSprite:function(m,g,p){var y=this.addAudioSprite(m);return y.once(r.COMPLETE,y.destroy,y),y.play(g,p)},remove:function(m){var g=this.sounds.indexOf(m);return g!==-1?(m.destroy(),this.sounds.splice(g,1),!0):!1},removeAll:function(){this.sounds.forEach(function(m){m.destroy()}),this.sounds.length=0},removeByKey:function(m){for(var g=0,p=this.sounds.length-1;p>=0;p--){var y=this.sounds[p];y.key===m&&(y.destroy(),this.sounds.splice(p,1),g++)}return g},pauseAll:function(){this.forEachActiveSound(function(m){m.pause()}),this.emit(r.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(m){m.resume()}),this.emit(r.RESUME_ALL,this)},setListenerPosition:d,stopAll:function(){this.forEachActiveSound(function(m){m.stop()}),this.emit(r.STOP_ALL,this)},stopByKey:function(m){var g=0;return this.getAll(m).forEach(function(p){p.stop()&&g++}),g},isPlaying:function(m){var g=this.sounds,p=g.length-1,y;if(m===void 0){for(;p>=0;p--)if(y=this.sounds[p],y.isPlaying)return!0}else for(;p>=0;p--)if(y=this.sounds[p],y.key===m&&y.isPlaying)return!0;return!1},unlock:d,onBlur:d,onFocus:d,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(m,g){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(r.UNLOCKED,this));for(var p=this.sounds.length-1;p>=0;p--)this.sounds[p].pendingRemove&&this.sounds.splice(p,1);this.sounds.forEach(function(y){y.update(m,g)})},destroy:function(){this.game.events.off(a.BLUR,this.onGameBlur,this),this.game.events.off(a.FOCUS,this.onGameFocus,this),this.game.events.off(a.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(m,g){var p=this;this.sounds.forEach(function(y,S){y&&!y.pendingRemove&&m.call(g||p,y,S,p.sounds)})},setRate:function(m){return this.rate=m,this},rate:{get:function(){return this._rate},set:function(m){this._rate=m,this.forEachActiveSound(function(g){g.calculateRate()}),this.emit(r.GLOBAL_RATE,this,m)}},setDetune:function(m){return this.detune=m,this},detune:{get:function(){return this._detune},set:function(m){this._detune=m,this.forEachActiveSound(function(g){g.calculateRate()}),this.emit(r.GLOBAL_DETUNE,this,m)}}});h.exports=f},14747:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(33684),u=e(25960),n=e(57490),r={create:function(a){var s=a.config.audio,o=a.device.audio;return s.noAudio||!o.webAudio&&!o.audioData?new u(a):o.webAudio&&!s.disableWebAudio?new n(a):new i(a)}};h.exports=r},19723:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},98882:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="decodedall"},57506:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="decoded"},73146:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},11305:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="detune"},40577:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="detune"},30333:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="mute"},20394:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="rate"},21802:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="volume"},1299:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="looped"},99190:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loop"},97125:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="mute"},89259:h=>{/**
 * @author       pi-kei
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pan"},79986:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pauseall"},17586:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},19618:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="play"},42306:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="rate"},10387:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resumeall"},48959:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},9960:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="seek"},19180:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stopall"},98328:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stop"},50401:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="unlocked"},52498:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="volume"},14463:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={COMPLETE:e(19723),DECODED:e(57506),DECODED_ALL:e(98882),DESTROY:e(73146),DETUNE:e(11305),GLOBAL_DETUNE:e(40577),GLOBAL_MUTE:e(30333),GLOBAL_RATE:e(20394),GLOBAL_VOLUME:e(21802),LOOP:e(99190),LOOPED:e(1299),MUTE:e(97125),PAN:e(89259),PAUSE_ALL:e(79986),PAUSE:e(17586),PLAY:e(19618),RATE:e(42306),RESUME_ALL:e(10387),RESUME:e(48959),SEEK:e(9960),STOP_ALL:e(19180),STOP:e(98328),UNLOCKED:e(50401),VOLUME:e(52498)}},64895:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(30341),u=e(83419),n=e(14463),r=e(45319),a=new u({Extends:i,initialize:function(o,d,l){if(l===void 0&&(l={}),this.tags=o.game.cache.audio.get(d),!this.tags)throw new Error('No cached audio asset with key "'+d);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,i.call(this,o,d,l)},play:function(s,o){return this.manager.isLocked(this,"play",[s,o])||!i.prototype.play.call(this,s,o)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!i.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!i.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!i.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(n.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var s=this.currentConfig.seek,o=this.currentConfig.delay,d=(this.currentMarker?this.currentMarker.start:0)+s;return this.previousTime=d,this.audio.currentTime=d,this.applyConfig(),o===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+o*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var s=0;s<this.tags.length;s++){var o=this.tags[s];if(o.dataset.used==="false")return o.dataset.used="true",this.audio=o,!0}if(!this.manager.override)return!1;var d=[];this.manager.forEachActiveSound(function(f){f.key===this.key&&f.audio&&d.push(f)},this),d.sort(function(f,m){return f.loop===m.loop?m.seek/m.duration-f.seek/f.duration:f.loop?1:-1});var l=d[0];return this.audio=l.audio,l.reset(),l.audio=null,l.startTime=0,l.previousTime=0,!0},playCatchPromise:function(){var s=this.audio.play();s&&s.catch(function(o){console.warn(o)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){i.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(s){if(this.isPlaying){if(this.startTime>0){this.startTime<s-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,s-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var o=this.currentMarker?this.currentMarker.start:0,d=o+this.duration,l=this.audio.currentTime;if(this.currentConfig.loop)l>=d-this.manager.loopEndOffset?(this.audio.currentTime=o+Math.max(0,l-d),l=this.audio.currentTime):l<o&&(this.audio.currentTime+=o,l=this.audio.currentTime),l<this.previousTime&&this.emit(n.LOOPED,this);else if(l>=d){this.reset(),this.stopAndReleaseAudioTag(),this.emit(n.COMPLETE,this);return}this.previousTime=l}},destroy:function(){i.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=r(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){i.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(s){this.currentConfig.mute=s,!this.manager.isLocked(this,"mute",s)&&(this.updateMute(),this.emit(n.MUTE,this,s))}},setMute:function(s){return this.mute=s,this},volume:{get:function(){return this.currentConfig.volume},set:function(s){this.currentConfig.volume=s,!this.manager.isLocked(this,"volume",s)&&(this.updateVolume(),this.emit(n.VOLUME,this,s))}},setVolume:function(s){return this.volume=s,this},rate:{get:function(){return this.currentConfig.rate},set:function(s){this.currentConfig.rate=s,!this.manager.isLocked(this,n.RATE,s)&&(this.calculateRate(),this.emit(n.RATE,this,s))}},setRate:function(s){return this.rate=s,this},detune:{get:function(){return this.currentConfig.detune},set:function(s){this.currentConfig.detune=s,!this.manager.isLocked(this,n.DETUNE,s)&&(this.calculateRate(),this.emit(n.DETUNE,this,s))}},setDetune:function(s){return this.detune=s,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(s){this.manager.isLocked(this,"seek",s)||this.startTime>0||(this.isPlaying||this.isPaused)&&(s=Math.min(Math.max(0,s),this.duration),this.isPlaying?(this.previousTime=s,this.audio.currentTime=s):this.isPaused&&(this.currentConfig.seek=s),this.emit(n.SEEK,this,s))}},setSeek:function(s){return this.seek=s,this},loop:{get:function(){return this.currentConfig.loop},set:function(s){this.currentConfig.loop=s,!this.manager.isLocked(this,"loop",s)&&(this.audio&&(this.audio.loop=s),this.emit(n.LOOP,this,s))}},setLoop:function(s){return this.loop=s,this},pan:{get:function(){return this.currentConfig.pan},set:function(s){this.currentConfig.pan=s,this.emit(n.PAN,this,s)}},setPan:function(s){return this.pan=s,this}});h.exports=a},33684:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(85034),u=e(83419),n=e(14463),r=e(64895),a=new u({Extends:i,initialize:function(o){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,i.call(this,o)},add:function(s,o){var d=new r(this,s,o);return this.sounds.push(d),d},unlock:function(){this.locked=!1;var s=this;if(this.game.cache.audio.entries.each(function(f,m){for(var g=0;g<m.length;g++)if(m[g].dataset.locked==="true")return s.locked=!0,!1;return!0}),!!this.locked){var o=!1,d=function(){o=!0},l=function(){if(o){o=!1;return}document.body.removeEventListener("touchmove",d),document.body.removeEventListener("touchend",l);var f=[];if(s.game.cache.audio.entries.each(function(g,p){for(var y=0;y<p.length;y++){var S=p[y];S.dataset.locked==="true"&&f.push(S)}return!0}),f.length!==0){var m=f[f.length-1];m.oncanplaythrough=function(){m.oncanplaythrough=null,f.forEach(function(g){g.dataset.locked="false"}),s.unlocked=!0},f.forEach(function(g){g.load()})}};this.once(n.UNLOCKED,function(){for(this.forEachActiveSound(function(m){m.currentMarker===null&&m.duration===0&&(m.duration=m.tags[0].duration),m.totalDuration=m.tags[0].duration});this.lockedActionsQueue.length;){var f=this.lockedActionsQueue.shift();f.sound[f.prop].apply?f.sound[f.prop].apply(f.sound,f.value||[]):f.sound[f.prop]=f.value}},this),document.body.addEventListener("touchmove",d,!1),document.body.addEventListener("touchend",l,!1)}},onBlur:function(){this.forEachActiveSound(function(s){s.isPlaying&&(this.onBlurPausedSounds.push(s),s.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(s){s.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){i.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(s,o,d){return s.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:s,prop:o,value:d}),!0):!1},setMute:function(s){return this.mute=s,this},mute:{get:function(){return this._mute},set:function(s){this._mute=s,this.forEachActiveSound(function(o){o.updateMute()}),this.emit(n.GLOBAL_MUTE,this,s)}},setVolume:function(s){return this.volume=s,this},volume:{get:function(){return this._volume},set:function(s){this._volume=s,this.forEachActiveSound(function(o){o.updateVolume()}),this.emit(n.GLOBAL_VOLUME,this,s)}}});h.exports=a},23717:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={SoundManagerCreator:e(14747),Events:e(14463),BaseSound:e(30341),BaseSoundManager:e(85034),WebAudioSound:e(71741),WebAudioSoundManager:e(57490),HTML5AudioSound:e(64895),HTML5AudioSoundManager:e(33684),NoAudioSound:e(4603),NoAudioSoundManager:e(25960)}},4603:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(30341),u=e(83419),n=e(50792),r=e(79291),a=e(29747),s=function(){return!1},o=function(){return null},d=function(){return this},l=new u({Extends:n,initialize:function(m,g,p){p===void 0&&(p={}),n.call(this),this.manager=m,this.key=g,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=r({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},p),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:s,updateMarker:s,removeMarker:o,play:s,pause:s,resume:s,stop:s,setMute:d,setVolume:d,setRate:d,setDetune:d,setSeek:d,setLoop:d,setPan:d,applyConfig:o,resetConfig:o,update:a,calculateRate:o,destroy:function(){i.prototype.destroy.call(this)}});h.exports=l},25960:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(85034),u=e(83419),n=e(50792),r=e(4603),a=e(29747),s=new u({Extends:n,initialize:function(d){n.call(this),this.game=d,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(o,d){var l=new r(this,o,d);return this.sounds.push(l),l},addAudioSprite:function(o,d){var l=this.add(o,d);return l.spritemap={},l},get:function(o){return i.prototype.get.call(this,o)},getAll:function(o){return i.prototype.getAll.call(this,o)},play:function(o,d){return!1},playAudioSprite:function(o,d,l){return!1},remove:function(o){return i.prototype.remove.call(this,o)},removeAll:function(){return i.prototype.removeAll.call(this)},removeByKey:function(o){return i.prototype.removeByKey.call(this,o)},stopByKey:function(o){return i.prototype.stopByKey.call(this,o)},onBlur:a,onFocus:a,onGameBlur:a,onGameFocus:a,pauseAll:a,resumeAll:a,stopAll:a,update:a,setRate:a,setDetune:a,setMute:a,setVolume:a,unlock:a,forEachActiveSound:function(o,d){i.prototype.forEachActiveSound.call(this,o,d)},destroy:function(){i.prototype.destroy.call(this)}});h.exports=s},71741:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(30341),u=e(83419),n=e(14463),r=e(95540),a=new u({Extends:i,initialize:function(o,d,l){if(l===void 0&&(l={}),this.audioBuffer=o.game.cache.audio.get(d),!this.audioBuffer)throw new Error('Audio key "'+d+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=o.context.createGain(),this.volumeNode=o.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),o.context.createPanner&&(this.spatialNode=o.context.createPanner(),this.volumeNode.connect(this.spatialNode)),o.context.createStereoPanner?(this.pannerNode=o.context.createStereoPanner(),o.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(o.destination)):o.context.createPanner?this.spatialNode.connect(o.destination):this.volumeNode.connect(o.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,i.call(this,o,d,l)},play:function(s,o){return i.prototype.play.call(this,s,o)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(n.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!i.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!i.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(n.RESUME,this),!0)},stop:function(){return i.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(n.STOP,this),!0):!1},createAndStartBufferSource:function(){var s=this.currentConfig.seek,o=this.currentConfig.delay,d=this.manager.context.currentTime+o,l=(this.currentMarker?this.currentMarker.start:0)+s,f=this.duration-s;this.playTime=d-s,this.startTime=d,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,d),Math.max(0,l),Math.max(0,f)),this.resetConfig()},createAndStartLoopBufferSource:function(){var s=this.getLoopTime(),o=this.currentMarker?this.currentMarker.start:0,d=this.duration;this.loopTime=s,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,s),Math.max(0,o),Math.max(0,d))},createBufferSource:function(){var s=this,o=this.manager.context.createBufferSource();return o.buffer=this.audioBuffer,o.connect(this.muteNode),o.onended=function(d){var l=d.target;(l===s.source||l===s.loopSource)&&(s.currentConfig.loop?s.hasLooped=!0:s.hasEnded=!0)},o},stopAndRemoveBufferSource:function(){if(this.source){var s=this.source;this.source=null,s.stop(),s.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var s=this.currentConfig.source;if(s&&this.manager.context.createPanner){var o=this.spatialNode;o.panningModel=r(s,"panningModel","equalpower"),o.distanceModel=r(s,"distanceModel","inverse"),o.orientationX.value=r(s,"orientationX",0),o.orientationY.value=r(s,"orientationY",0),o.orientationZ.value=r(s,"orientationZ",-1),o.refDistance=r(s,"refDistance",1),o.maxDistance=r(s,"maxDistance",1e4),o.rolloffFactor=r(s,"rolloffFactor",1),o.coneInnerAngle=r(s,"coneInnerAngle",360),o.coneOuterAngle=r(s,"coneOuterAngle",0),o.coneOuterGain=r(s,"coneOuterGain",0),this.spatialSource=r(s,"follow",null),this.spatialSource||(o.positionX.value=r(s,"x",0),o.positionY.value=r(s,"y",0),o.positionZ.value=r(s,"z",0))}i.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(s){this.spatialNode&&(this.spatialNode.positionX.value=s)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(s){this.spatialNode&&(this.spatialNode.positionY.value=s)}},update:function(){if(this.isPlaying&&this.spatialSource){var s=r(this.spatialSource,"x",null),o=r(this.spatialSource,"y",null);s&&s!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=s),o&&o!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=o)}this.hasEnded?(i.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(n.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(n.LOOPED,this))},destroy:function(){this.pendingRemove||(i.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){i.prototype.calculateRate.call(this);var s=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,s),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,s)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var s=0,o=0;o<this.rateUpdates.length;o++){var d=0;o<this.rateUpdates.length-1?d=this.rateUpdates[o+1].time:d=this.manager.context.currentTime-this.playTime,s+=(d-this.rateUpdates[o].time)*this.rateUpdates[o].rate}return s},getLoopTime:function(){for(var s=0,o=0;o<this.rateUpdates.length-1;o++)s+=(this.rateUpdates[o+1].time-this.rateUpdates[o].time)*this.rateUpdates[o].rate;var d=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+d.time+(this.duration-s)/d.rate},rate:{get:function(){return this.currentConfig.rate},set:function(s){this.currentConfig.rate=s,this.calculateRate(),this.emit(n.RATE,this,s)}},setRate:function(s){return this.rate=s,this},detune:{get:function(){return this.currentConfig.detune},set:function(s){this.currentConfig.detune=s,this.calculateRate(),this.emit(n.DETUNE,this,s)}},setDetune:function(s){return this.detune=s,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(s){this.currentConfig.mute=s,this.muteNode.gain.setValueAtTime(s?0:1,0),this.emit(n.MUTE,this,s)}},setMute:function(s){return this.mute=s,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(s){this.currentConfig.volume=s,this.volumeNode.gain.setValueAtTime(s,0),this.emit(n.VOLUME,this,s)}},setVolume:function(s){return this.volume=s,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(s){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(s=Math.min(Math.max(0,s),this.duration),this.currentConfig.seek=s,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(n.SEEK,this,s))}},setSeek:function(s){return this.seek=s,this},loop:{get:function(){return this.currentConfig.loop},set:function(s){this.currentConfig.loop=s,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),s&&this.createAndStartLoopBufferSource()),this.emit(n.LOOP,this,s)}},setLoop:function(s){return this.loop=s,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(s){this.currentConfig.pan=s,this.pannerNode&&this.pannerNode.pan.setValueAtTime(s,this.manager.context.currentTime),this.emit(n.PAN,this,s)}},setPan:function(s){return this.pan=s,this}});h.exports=a},57490:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(53134),u=e(85034),n=e(83419),r=e(14463),a=e(8443),s=e(71741),o=e(95540),d=new n({Extends:u,initialize:function(f){this.context=this.createAudioContext(f),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),u.call(this,f),this.locked&&f.isBooted?this.unlock():f.events.once(a.BOOT,this.unlock,this)},createAudioContext:function(l){var f=l.config.audio;if(f.context)return f.context.resume(),f.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(l){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=l,this.masterMuteNode=l.createGain(),this.masterVolumeNode=l.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(l.destination),this.destination=this.masterMuteNode,this},add:function(l,f){var m=new s(this,l,f);return this.sounds.push(m),m},decodeAudio:function(l,f){var m;Array.isArray(l)?m=l:m=[{key:l,data:f}];for(var g=this.game.cache.audio,p=m.length,y=0;y<m.length;y++){var S=m[y],C=S.key,A=S.data;typeof A=="string"&&(A=i(A));var M=(function(P,O){g.add(P,O),this.emit(r.DECODED,P),p--,p===0&&this.emit(r.DECODED_ALL)}).bind(this,C),L=(function(P,O){console.error("Error decoding audio: "+P+" - ",O?O.message:""),p--,p===0&&this.emit(r.DECODED_ALL)}).bind(this,C);this.context.decodeAudioData(A,M,L)}},setListenerPosition:function(l,f){return l===void 0&&(l=this.game.scale.width/2),f===void 0&&(f=this.game.scale.height/2),this.listenerPosition.set(l,f),this},unlock:function(){var l=this,f=document.body,m=function g(){if(l.context&&f){var p=f.removeEventListener.bind(f);l.context.resume().then(function(){p("touchstart",g),p("touchend",g),p("click",g),p("keydown",g),l.unlocked=!0},function(){p("touchstart",g),p("touchend",g),p("click",g),p("keydown",g)})}};f&&(f.addEventListener("touchstart",m,!1),f.addEventListener("touchend",m,!1),f.addEventListener("click",m,!1),f.addEventListener("keydown",m,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var l=this.context;l&&!this.locked&&(l.state==="suspended"||l.state==="interrupted")&&l.resume()},update:function(l,f){var m=this.context.listener;if(m&&m.positionX!==void 0){var g=o(this.listenerPosition,"x",null),p=o(this.listenerPosition,"y",null);g&&g!==this._spatialx&&(this._spatialx=m.positionX.value=g),p&&p!==this._spatialy&&(this._spatialy=m.positionY.value=p)}u.prototype.update.call(this,l,f),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var l=this;this.context.close().then(function(){l.context=null})}u.prototype.destroy.call(this)},setMute:function(l){return this.mute=l,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(l){this.masterMuteNode.gain.setValueAtTime(l?0:1,0),this.emit(r.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(l){this.masterVolumeNode.gain.setValueAtTime(l,0),this.emit(r.GLOBAL_VOLUME,this,l)}}});h.exports=d},73162:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37105),u=e(83419),n=e(29747),r=e(19186),a=new u({initialize:function(o){this.parent=o,this.list=[],this.position=0,this.addCallback=n,this.removeCallback=n,this._sortKey=""},add:function(s,o){return o?i.Add(this.list,s):i.Add(this.list,s,0,this.addCallback,this)},addAt:function(s,o,d){return d?i.AddAt(this.list,s,o):i.AddAt(this.list,s,o,0,this.addCallback,this)},getAt:function(s){return this.list[s]},getIndex:function(s){return this.list.indexOf(s)},sort:function(s,o){return s?(o===void 0&&(o=function(d,l){return d[s]-l[s]}),r(this.list,o),this):this},getByName:function(s){return i.GetFirst(this.list,"name",s)},getRandom:function(s,o){return i.GetRandom(this.list,s,o)},getFirst:function(s,o,d,l){return i.GetFirst(this.list,s,o,d,l)},getAll:function(s,o,d,l){return i.GetAll(this.list,s,o,d,l)},count:function(s,o){return i.CountAllMatching(this.list,s,o)},swap:function(s,o){i.Swap(this.list,s,o)},moveTo:function(s,o){return i.MoveTo(this.list,s,o)},moveAbove:function(s,o){return i.MoveAbove(this.list,s,o)},moveBelow:function(s,o){return i.MoveBelow(this.list,s,o)},remove:function(s,o){return o?i.Remove(this.list,s):i.Remove(this.list,s,this.removeCallback,this)},removeAt:function(s,o){return o?i.RemoveAt(this.list,s):i.RemoveAt(this.list,s,this.removeCallback,this)},removeBetween:function(s,o,d){return d?i.RemoveBetween(this.list,s,o):i.RemoveBetween(this.list,s,o,this.removeCallback,this)},removeAll:function(s){for(var o=this.list.length;o--;)this.remove(this.list[o],s);return this},bringToTop:function(s){return i.BringToTop(this.list,s)},sendToBack:function(s){return i.SendToBack(this.list,s)},moveUp:function(s){return i.MoveUp(this.list,s),s},moveDown:function(s){return i.MoveDown(this.list,s),s},reverse:function(){return this.list.reverse(),this},shuffle:function(){return i.Shuffle(this.list),this},replace:function(s,o){return i.Replace(this.list,s,o)},exists:function(s){return this.list.indexOf(s)>-1},setAll:function(s,o,d,l){return i.SetAll(this.list,s,o,d,l),this},each:function(s,o){for(var d=[null],l=2;l<arguments.length;l++)d.push(arguments[l]);for(l=0;l<this.list.length;l++)d[0]=this.list[l],s.apply(o,d)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});h.exports=a},90330:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r){this.entries={},this.size=0,this.setAll(r)},setAll:function(n){if(Array.isArray(n))for(var r=0;r<n.length;r++)this.set(n[r][0],n[r][1]);return this},set:function(n,r){return this.has(n)||this.size++,this.entries[n]=r,this},get:function(n){if(this.has(n))return this.entries[n]},getArray:function(){var n=[],r=this.entries;for(var a in r)n.push(r[a]);return n},has:function(n){return this.entries.hasOwnProperty(n)},delete:function(n){return this.has(n)&&(delete this.entries[n],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(n){delete this.entries[n]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var n=[],r=this.entries;for(var a in r)n.push(r[a]);return n},dump:function(){var n=this.entries;console.group("Map");for(var r in n)console.log(r,n[r]);console.groupEnd()},each:function(n){var r=this.entries;for(var a in r)if(n(a,r[a])===!1)break;return this},contains:function(n){var r=this.entries;for(var a in r)if(r[a]===n)return!0;return!1},merge:function(n,r){r===void 0&&(r=!1);var a=this.entries,s=n.entries;for(var o in s)a.hasOwnProperty(o)&&r?a[o]=s[o]:this.set(o,s[o]);return this}});h.exports=u},25774:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(50792),n=e(82348),r=new i({Extends:u,initialize:function(){u.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(a){return this._active.indexOf(a)>-1},isPending:function(a){return this._toProcess>0&&this._pending.indexOf(a)>-1},isDestroying:function(a){return this._destroy.indexOf(a)>-1},add:function(a){return this.checkQueue&&this.isActive(a)&&!this.isDestroying(a)||this.isPending(a)||(this._pending.push(a),this._toProcess++),a},remove:function(a){if(this.isPending(a)){var s=this._pending,o=s.indexOf(a);o!==-1&&s.splice(o,1)}else this.isActive(a)&&(this._destroy.push(a),this._toProcess++);return a},removeAll:function(){for(var a=this._active,s=this._destroy,o=a.length;o--;)s.push(a[o]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var a=this._destroy,s=this._active,o,d;for(o=0;o<a.length;o++){d=a[o];var l=s.indexOf(d);l!==-1&&(s.splice(l,1),this.emit(n.PROCESS_QUEUE_REMOVE,d))}for(a.length=0,a=this._pending,o=0;o<a.length;o++)d=a[o],(!this.checkQueue||this.checkQueue&&s.indexOf(d)===-1)&&(s.push(d),this.emit(n.PROCESS_QUEUE_ADD,d));return a.length=0,this._toProcess=0,s},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});h.exports=r},59542:(h,w,e)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(43886);function u(A){if(!(this instanceof u))return new u(A);this._maxEntries=Math.max(4,A||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}u.prototype={all:function(){return this._all(this.data,[])},search:function(A){var M=this.data,L=[],P=this.toBBox;if(!y(A,M))return L;for(var O=[],D,I,F,H;M;){for(D=0,I=M.children.length;D<I;D++)F=M.children[D],H=M.leaf?P(F):F,y(A,H)&&(M.leaf?L.push(F):p(A,H)?this._all(F,L):O.push(F));M=O.pop()}return L},collides:function(A){var M=this.data,L=this.toBBox;if(!y(A,M))return!1;for(var P=[],O,D,I,F;M;){for(O=0,D=M.children.length;O<D;O++)if(I=M.children[O],F=M.leaf?L(I):I,y(A,F)){if(M.leaf||p(A,F))return!0;P.push(I)}M=P.pop()}return!1},load:function(A){if(!(A&&A.length))return this;if(A.length<this._minEntries){for(var M=0,L=A.length;M<L;M++)this.insert(A[M]);return this}var P=this._build(A.slice(),0,A.length-1,0);if(!this.data.children.length)this.data=P;else if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var O=this.data;this.data=P,P=O}this._insert(P,this.data.height-P.height-1,!0)}return this},insert:function(A){return A&&this._insert(A,this.data.height-1),this},clear:function(){return this.data=S([]),this},remove:function(A,M){if(!A)return this;for(var L=this.data,P=this.toBBox(A),O=[],D=[],I,F,H,k;L||O.length;){if(L||(L=O.pop(),F=O[O.length-1],I=D.pop(),k=!0),L.leaf&&(H=n(A,L.children,M),H!==-1))return L.children.splice(H,1),O.push(L),this._condense(O),this;!k&&!L.leaf&&p(L,P)?(O.push(L),D.push(I),I=0,F=L,L=L.children[0]):F?(I++,L=F.children[I],k=!1):L=null}return this},toBBox:function(A){return A},compareMinX:o,compareMinY:d,toJSON:function(){return this.data},fromJSON:function(A){return this.data=A,this},_all:function(A,M){for(var L=[];A;)A.leaf?M.push.apply(M,A.children):L.push.apply(L,A.children),A=L.pop();return M},_build:function(A,M,L,P){var O=L-M+1,D=this._maxEntries,I;if(O<=D)return I=S(A.slice(M,L+1)),r(I,this.toBBox),I;P||(P=Math.ceil(Math.log(O)/Math.log(D)),D=Math.ceil(O/Math.pow(D,P-1))),I=S([]),I.leaf=!1,I.height=P;var F=Math.ceil(O/D),H=F*Math.ceil(Math.sqrt(D)),k,W,$,K;for(C(A,M,L,H,this.compareMinX),k=M;k<=L;k+=H)for($=Math.min(k+H-1,L),C(A,k,$,F,this.compareMinY),W=k;W<=$;W+=F)K=Math.min(W+F-1,$),I.children.push(this._build(A,W,K,P-1));return r(I,this.toBBox),I},_chooseSubtree:function(A,M,L,P){for(var O,D,I,F,H,k,W,$;P.push(M),!(M.leaf||P.length-1===L);){for(W=$=1/0,O=0,D=M.children.length;O<D;O++)I=M.children[O],H=l(I),k=m(A,I)-H,k<$?($=k,W=H<W?H:W,F=I):k===$&&H<W&&(W=H,F=I);M=F||M.children[0]}return M},_insert:function(A,M,L){var P=this.toBBox,O=L?A:P(A),D=[],I=this._chooseSubtree(O,this.data,M,D);for(I.children.push(A),s(I,O);M>=0&&D[M].children.length>this._maxEntries;)this._split(D,M),M--;this._adjustParentBBoxes(O,D,M)},_split:function(A,M){var L=A[M],P=L.children.length,O=this._minEntries;this._chooseSplitAxis(L,O,P);var D=this._chooseSplitIndex(L,O,P),I=S(L.children.splice(D,L.children.length-D));I.height=L.height,I.leaf=L.leaf,r(L,this.toBBox),r(I,this.toBBox),M?A[M-1].children.push(I):this._splitRoot(L,I)},_splitRoot:function(A,M){this.data=S([A,M]),this.data.height=A.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(A,M,L){var P,O,D,I,F,H,k,W;for(H=k=1/0,P=M;P<=L-M;P++)O=a(A,0,P,this.toBBox),D=a(A,P,L,this.toBBox),I=g(O,D),F=l(O)+l(D),I<H?(H=I,W=P,k=F<k?F:k):I===H&&F<k&&(k=F,W=P);return W},_chooseSplitAxis:function(A,M,L){var P=A.leaf?this.compareMinX:o,O=A.leaf?this.compareMinY:d,D=this._allDistMargin(A,M,L,P),I=this._allDistMargin(A,M,L,O);D<I&&A.children.sort(P)},_allDistMargin:function(A,M,L,P){A.children.sort(P);var O=this.toBBox,D=a(A,0,M,O),I=a(A,L-M,L,O),F=f(D)+f(I),H,k;for(H=M;H<L-M;H++)k=A.children[H],s(D,A.leaf?O(k):k),F+=f(D);for(H=L-M-1;H>=M;H--)k=A.children[H],s(I,A.leaf?O(k):k),F+=f(I);return F},_adjustParentBBoxes:function(A,M,L){for(var P=L;P>=0;P--)s(M[P],A)},_condense:function(A){for(var M=A.length-1,L;M>=0;M--)A[M].children.length===0?M>0?(L=A[M-1].children,L.splice(L.indexOf(A[M]),1)):this.clear():r(A[M],this.toBBox)},compareMinX:function(A,M){return A.left-M.left},compareMinY:function(A,M){return A.top-M.top},toBBox:function(A){return{minX:A.left,minY:A.top,maxX:A.right,maxY:A.bottom}}};function n(A,M,L){if(!L)return M.indexOf(A);for(var P=0;P<M.length;P++)if(L(A,M[P]))return P;return-1}function r(A,M){a(A,0,A.children.length,M,A)}function a(A,M,L,P,O){O||(O=S(null)),O.minX=1/0,O.minY=1/0,O.maxX=-1/0,O.maxY=-1/0;for(var D=M,I;D<L;D++)I=A.children[D],s(O,A.leaf?P(I):I);return O}function s(A,M){return A.minX=Math.min(A.minX,M.minX),A.minY=Math.min(A.minY,M.minY),A.maxX=Math.max(A.maxX,M.maxX),A.maxY=Math.max(A.maxY,M.maxY),A}function o(A,M){return A.minX-M.minX}function d(A,M){return A.minY-M.minY}function l(A){return(A.maxX-A.minX)*(A.maxY-A.minY)}function f(A){return A.maxX-A.minX+(A.maxY-A.minY)}function m(A,M){return(Math.max(M.maxX,A.maxX)-Math.min(M.minX,A.minX))*(Math.max(M.maxY,A.maxY)-Math.min(M.minY,A.minY))}function g(A,M){var L=Math.max(A.minX,M.minX),P=Math.max(A.minY,M.minY),O=Math.min(A.maxX,M.maxX),D=Math.min(A.maxY,M.maxY);return Math.max(0,O-L)*Math.max(0,D-P)}function p(A,M){return A.minX<=M.minX&&A.minY<=M.minY&&M.maxX<=A.maxX&&M.maxY<=A.maxY}function y(A,M){return M.minX<=A.maxX&&M.minY<=A.maxY&&M.maxX>=A.minX&&M.maxY>=A.minY}function S(A){return{children:A,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function C(A,M,L,P,O){for(var D=[M,L],I;D.length;)L=D.pop(),M=D.pop(),!(L-M<=P)&&(I=M+Math.ceil((L-M)/P/2)*P,i(A,I,M,L,O),D.push(M,I,I,L))}h.exports=u},35072:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r){if(this.entries=[],Array.isArray(r))for(var a=0;a<r.length;a++)this.set(r[a])},set:function(n){return this.entries.indexOf(n)===-1&&this.entries.push(n),this},get:function(n,r){for(var a=0;a<this.entries.length;a++){var s=this.entries[a];if(s[n]===r)return s}},getArray:function(){return this.entries.slice(0)},delete:function(n){var r=this.entries.indexOf(n);return r>-1&&this.entries.splice(r,1),this},dump:function(){console.group("Set");for(var n=0;n<this.entries.length;n++){var r=this.entries[n];console.log(r)}console.groupEnd()},each:function(n,r){var a,s=this.entries.slice(),o=s.length;if(r)for(a=0;a<o&&n.call(r,s[a],a)!==!1;a++);else for(a=0;a<o&&n(s[a],a)!==!1;a++);return this},iterate:function(n,r){var a,s=this.entries.length;if(r)for(a=0;a<s&&n.call(r,this.entries[a],a)!==!1;a++);else for(a=0;a<s&&n(this.entries[a],a)!==!1;a++);return this},iterateLocal:function(n){var r,a=[];for(r=1;r<arguments.length;r++)a.push(arguments[r]);var s=this.entries.length;for(r=0;r<s;r++){var o=this.entries[r];o[n].apply(o,a)}return this},clear:function(){return this.entries.length=0,this},contains:function(n){return this.entries.indexOf(n)>-1},union:function(n){var r=new u;return n.entries.forEach(function(a){r.set(a)}),this.entries.forEach(function(a){r.set(a)}),r},intersect:function(n){var r=new u;return this.entries.forEach(function(a){n.contains(a)&&r.set(a)}),r},difference:function(n){var r=new u;return this.entries.forEach(function(a){n.contains(a)||r.set(a)}),r},size:{get:function(){return this.entries.length},set:function(n){return n<this.entries.length?this.entries.length=n:this.entries.length}}});h.exports=u},86555:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45319),u=e(83419),n=e(56583),r=e(26099),a=new u({initialize:function(o,d,l,f){o===void 0&&(o=0),d===void 0&&(d=o),l===void 0&&(l=0),f===void 0&&(f=null),this._width=o,this._height=d,this._parent=f,this.aspectMode=l,this.aspectRatio=d===0?1:o/d,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new r},setAspectMode:function(s){return s===void 0&&(s=0),this.aspectMode=s,this.setSize(this._width,this._height)},setSnap:function(s,o){return s===void 0&&(s=0),o===void 0&&(o=s),this.snapTo.set(s,o),this.setSize(this._width,this._height)},setParent:function(s){return this._parent=s,this.setSize(this._width,this._height)},setMin:function(s,o){return s===void 0&&(s=0),o===void 0&&(o=s),this.minWidth=i(s,0,this.maxWidth),this.minHeight=i(o,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(s,o){return s===void 0&&(s=Number.MAX_VALUE),o===void 0&&(o=s),this.maxWidth=i(s,this.minWidth,Number.MAX_VALUE),this.maxHeight=i(o,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(s,o){switch(s===void 0&&(s=0),o===void 0&&(o=s),this.aspectMode){case a.NONE:this._width=this.getNewWidth(n(s,this.snapTo.x)),this._height=this.getNewHeight(n(o,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case a.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(n(s,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case a.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(n(o,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case a.FIT:this.constrain(s,o,!0);break;case a.ENVELOP:this.constrain(s,o,!1);break}return this},setAspectRatio:function(s){return this.aspectRatio=s,this.setSize(this._width,this._height)},resize:function(s,o){return this._width=this.getNewWidth(n(s,this.snapTo.x)),this._height=this.getNewHeight(n(o,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(s,o){return o===void 0&&(o=!0),s=i(s,this.minWidth,this.maxWidth),o&&this._parent&&s>this._parent.width&&(s=Math.max(this.minWidth,this._parent.width)),s},getNewHeight:function(s,o){return o===void 0&&(o=!0),s=i(s,this.minHeight,this.maxHeight),o&&this._parent&&s>this._parent.height&&(s=Math.max(this.minHeight,this._parent.height)),s},constrain:function(s,o,d){s===void 0&&(s=0),o===void 0&&(o=s),d===void 0&&(d=!0),s=this.getNewWidth(s),o=this.getNewHeight(o);var l=this.snapTo,f=o===0?1:s/o;return d&&this.aspectRatio>f||!d&&this.aspectRatio<f?(s=n(s,l.x),o=s/this.aspectRatio,l.y>0&&(o=n(o,l.y),s=o*this.aspectRatio)):(d&&this.aspectRatio<f||!d&&this.aspectRatio>f)&&(o=n(o,l.y),s=o*this.aspectRatio,l.x>0&&(s=n(s,l.x),o=s*(1/this.aspectRatio))),this._width=s,this._height=o,this},fitTo:function(s,o){return this.constrain(s,o,!0)},envelop:function(s,o){return this.constrain(s,o,!1)},setWidth:function(s){return this.setSize(s,this._height)},setHeight:function(s){return this.setSize(this._width,s)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(s){s&&s.style&&(s.style.width=this._width+"px",s.style.height=this._height+"px")},copy:function(s){return s.setAspectMode(this.aspectMode),s.aspectRatio=this.aspectRatio,s.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(s){this.setSize(s,this._height)}},height:{get:function(){return this._height},set:function(s){this.setSize(this._width,s)}}});a.NONE=0,a.WIDTH_CONTROLS_HEIGHT=1,a.HEIGHT_CONTROLS_WIDTH=2,a.FIT=3,a.ENVELOP=4,h.exports=a},15238:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="add"},56187:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="remove"},82348:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={PROCESS_QUEUE_ADD:e(15238),PROCESS_QUEUE_REMOVE:e(56187)}},41392:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Events:e(82348),List:e(73162),Map:e(90330),ProcessQueue:e(25774),RTree:e(59542),Set:e(35072),Size:e(86555)}},57382:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(45319),n=e(40987),r=e(8054),a=e(50030),s=e(79237),o=new i({Extends:s,initialize:function(l,f,m,g,p){s.call(this,l,f,m,g,p),this.add("__BASE",0,0,0,g,p),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=g,this.height=p,this.imageData=this.context.getImageData(0,0,g,p),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===r.WEBGL&&this.refresh(),this},draw:function(d,l,f,m){return m===void 0&&(m=!0),this.context.drawImage(f,d,l),m&&this.update(),this},drawFrame:function(d,l,f,m,g){f===void 0&&(f=0),m===void 0&&(m=0),g===void 0&&(g=!0);var p=this.manager.getFrame(d,l);if(p){var y=p.canvasData,S=p.cutWidth,C=p.cutHeight,A=p.source.resolution;this.context.drawImage(p.source.image,y.x,y.y,S,C,f,m,S/A,C/A),g&&this.update()}return this},setPixel:function(d,l,f,m,g,p){p===void 0&&(p=255),d=Math.abs(Math.floor(d)),l=Math.abs(Math.floor(l));var y=this.getIndex(d,l);if(y>-1){var S=this.context.getImageData(d,l,1,1);S.data[0]=f,S.data[1]=m,S.data[2]=g,S.data[3]=p,this.context.putImageData(S,d,l)}return this},putData:function(d,l,f,m,g,p,y){return m===void 0&&(m=0),g===void 0&&(g=0),p===void 0&&(p=d.width),y===void 0&&(y=d.height),this.context.putImageData(d,l,f,m,g,p,y),this},getData:function(d,l,f,m){d=u(Math.floor(d),0,this.width-1),l=u(Math.floor(l),0,this.height-1),f=u(f,1,this.width-d),m=u(m,1,this.height-l);var g=this.context.getImageData(d,l,f,m);return g},getPixel:function(d,l,f){f||(f=new n);var m=this.getIndex(d,l);if(m>-1){var g=this.data,p=g[m+0],y=g[m+1],S=g[m+2],C=g[m+3];f.setTo(p,y,S,C)}return f},getPixels:function(d,l,f,m){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=this.width),m===void 0&&(m=f),d=Math.abs(Math.round(d)),l=Math.abs(Math.round(l));for(var g=u(d,0,this.width),p=u(d+f,0,this.width),y=u(l,0,this.height),S=u(l+m,0,this.height),C=new n,A=[],M=y;M<S;M++){for(var L=[],P=g;P<p;P++)C=this.getPixel(P,M,C),L.push({x:P,y:M,color:C.color,alpha:C.alphaGL});A.push(L)}return A},getIndex:function(d,l){return d=Math.abs(Math.round(d)),l=Math.abs(Math.round(l)),d<this.width&&l<this.height?(d+l*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(d,l,f,m,g){return d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=this.width),m===void 0&&(m=this.height),g===void 0&&(g=!0),this.context.clearRect(d,l,f,m),g&&this.update(),this},setSize:function(d,l){return l===void 0&&(l=d),(d!==this.width||l!==this.height)&&(this.canvas.width=d,this.canvas.height=l,this._source.width=d,this._source.height=l,this._source.isPowerOf2=a(d,l),this.frames.__BASE.setSize(d,l,0,0),this.width=d,this.height=l,this.refresh()),this},destroy:function(){s.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});h.exports=o},81320:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(10312),u=e(38058),n=e(27919),r=e(83419),a=e(8054),s=e(4327),o=e(95540),d=e(36060),l=e(32302),f=e(79237),m=e(70554),g=new r({Extends:f,initialize:function(y,S,C,A){C===void 0&&(C=256),A===void 0&&(A=256),this.type="DynamicTexture";var M=y.game.renderer,L=M&&M.type===a.CANVAS,P=L?n.create2D(this,C,A):[this];f.call(this,y,S,P,C,A),this.add("__BASE",0,0,0,C,A),this.renderer=M,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=L?P:null,this.context=L?P.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new u(0,0,C,A).setScene(y.game.scene.systemScene,!1),this.renderTarget=L?null:new l(M,C,A,1,0,!1,!1,!0,!1),this.pipeline=L?null:M.pipelines.get(d.SINGLE_PIPELINE),this.setSize(C,A)},setSize:function(p,y){y===void 0&&(y=p);var S=this.get(),C=S.source;if(p!==this.width||y!==this.height){this.canvas&&(this.canvas.width=p,this.canvas.height=y);var A=this.renderTarget;A&&(A.willResize(p,y)&&A.resize(p,y),A.texture!==C.glTexture&&this.renderer.deleteTexture(C.glTexture),this.setFromRenderTarget()),this.camera.setSize(p,y),C.width=p,C.height=y,S.setSize(p,y),this.width=p,this.height=y}else{var M=this.getSourceImage();S.cutX+p>M.width&&(p=M.width-S.cutX),S.cutY+y>M.height&&(y=M.height-S.cutY),S.setSize(p,y,S.cutX,S.cutY)}return this},setFromRenderTarget:function(){var p=this.get(),y=p.source,S=this.renderTarget;return y.isRenderTexture=!0,y.isGLTexture=!0,y.glTexture=S.texture,this},setIsSpriteTexture:function(p){return this.isSpriteTexture=p,this},fill:function(p,y,S,C,A,M){var L=this.camera,P=this.renderer;y===void 0&&(y=1),S===void 0&&(S=0),C===void 0&&(C=0),A===void 0&&(A=this.width),M===void 0&&(M=this.height);var O=p>>16&255,D=p>>8&255,I=p&255,F=this.renderTarget;if(L.preRender(),F){F.bind(!0);var H=this.pipeline.manager.set(this.pipeline),k=P.width/F.width,W=P.height/F.height,$=F.height-(C+M);H.drawFillRect(S*k,$*W,A*k,M*W,m.getTintFromFloats(I/255,D/255,O/255,1),y),F.unbind(!0)}else{var K=this.context;P.setContext(K),K.globalCompositeOperation="source-over",K.fillStyle="rgba("+O+","+D+","+I+","+y+")",K.fillRect(S,C,A,M),P.setContext()}return this.dirty=!0,this},clear:function(p,y,S,C){if(this.dirty){var A=this.context,M=this.renderTarget;M?M.clear(p,y,S,C):A&&(p!==void 0&&y!==void 0&&S!==void 0&&C!==void 0?A.clearRect(p,y,S,C):(A.save(),A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,this.width,this.height),A.restore())),this.dirty=!1}return this},stamp:function(p,y,S,C,A){S===void 0&&(S=0),C===void 0&&(C=0);var M=o(A,"alpha",1),L=o(A,"tint",16777215),P=o(A,"angle",0),O=o(A,"rotation",0),D=o(A,"scale",1),I=o(A,"scaleX",D),F=o(A,"scaleY",D),H=o(A,"originX",.5),k=o(A,"originY",.5),W=o(A,"blendMode",0),$=o(A,"erase",!1),K=o(A,"skipBatch",!1),Z=this.manager.resetStamp(M,L);return Z.setAngle(0),P!==0?Z.setAngle(P):O!==0&&Z.setRotation(O),Z.setScale(I,F),Z.setTexture(p,y),Z.setOrigin(H,k),Z.setBlendMode(W),$&&(this._eraseMode=!0),K?this.batchGameObject(Z,S,C):this.draw(Z,S,C),$&&(this._eraseMode=!1),this},erase:function(p,y,S){return this._eraseMode=!0,this.draw(p,y,S),this._eraseMode=!1,this},draw:function(p,y,S,C,A){return this.beginDraw(),this.batchDraw(p,y,S,C,A),this.endDraw(),this},drawFrame:function(p,y,S,C,A,M){return this.beginDraw(),this.batchDrawFrame(p,y,S,C,A,M),this.endDraw(),this},repeat:function(p,y,S,C,A,M,L,P,O){if(S===void 0&&(S=0),C===void 0&&(C=0),A===void 0&&(A=this.width),M===void 0&&(M=this.height),L===void 0&&(L=1),P===void 0&&(P=16777215),O===void 0&&(O=!1),p instanceof s?y=p:y=this.manager.getFrame(p,y),!y)return this;var D=this.manager.resetStamp(L,P);D.setFrame(y),D.setOrigin(0);var I=y.width,F=y.height;A=Math.floor(A),M=Math.floor(M);var H=Math.ceil(A/I),k=Math.ceil(M/F),W=H*I-A,$=k*F-M;W>0&&(W=I-W),$>0&&($=F-$),S<0&&(H+=Math.ceil(Math.abs(S)/I)),C<0&&(k+=Math.ceil(Math.abs(C)/F));var K=S,Z=C,X=!1,j=this.manager.stampCrop.setTo(0,0,I,F);O||this.beginDraw();for(var Y=0;Y<k;Y++){if(Z+F<0){Z+=F;continue}for(var U=0;U<H;U++){if(X=!1,K+I<0){K+=I;continue}else K<0&&(X=!0,j.width=I+K,j.x=I-j.width);Z<0&&(X=!0,j.height=F+Z,j.y=F-j.height),W>0&&U===H-1&&(X=!0,j.width=W),$>0&&Y===k-1&&(X=!0,j.height=$),X&&D.setCrop(j),this.batchGameObject(D,K,Z),D.isCropped=!1,j.setTo(0,0,I,F),K+=I}K=S,Z+=F}return O||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var p=this.camera,y=this.renderer,S=this.renderTarget;p.preRender(),S?y.beginCapture(S.width,S.height):y.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(p,y,S,C,A){return Array.isArray(p)||(p=[p]),this.batchList(p,y,S,C,A),this},batchDrawFrame:function(p,y,S,C,A,M){S===void 0&&(S=0),C===void 0&&(C=0),A===void 0&&(A=1),M===void 0&&(M=16777215);var L=this.manager.getFrame(p,y);return L&&(this.renderTarget?this.pipeline.batchTextureFrame(L,S,C,M,A,this.camera.matrix,null):this.batchTextureFrame(L,S,C,A,M)),this},endDraw:function(p){if(p===void 0&&(p=this._eraseMode),this.isDrawing){var y=this.renderer,S=this.renderTarget;if(S){var C=y.endCapture(),A=y.pipelines.setUtility();A.blitFrame(C,S,1,!1,!1,p,this.isSpriteTexture),y.resetScissor(),y.resetViewport()}else y.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(p,y,S,C,A){var M=p.length;if(M!==0)for(var L=0;L<M;L++){var P=p[L];!P||P===this||(P.renderWebGL||P.renderCanvas?this.batchGameObject(P,y,S):P.isParent||P.list?this.batchGroup(P.getChildren(),y,S):typeof P=="string"?this.batchTextureFrameKey(P,null,y,S,C,A):P instanceof s?this.batchTextureFrame(P,y,S,C,A):Array.isArray(P)&&this.batchList(P,y,S,C,A))}},batchGroup:function(p,y,S){y===void 0&&(y=0),S===void 0&&(S=0);for(var C=0;C<p.length;C++){var A=p[C];A.willRender(this.camera)&&this.batchGameObject(A,A.x+y,A.y+S)}},batchGameObject:function(p,y,S){y===void 0&&(y=p.x),S===void 0&&(S=p.y);var C=p.x,A=p.y,M=this.camera,L=this.renderer,P=this._eraseMode,O=p.mask;if(p.setPosition(y,S),this.canvas){if(P){var D=p.blendMode;p.blendMode=i.ERASE}O&&O.preRenderCanvas(L,p,M),p.renderCanvas(L,p,M,null),O&&O.postRenderCanvas(L,p,M),P&&(p.blendMode=D)}else L&&(O&&O.preRenderWebGL(L,p,M),P||L.setBlendMode(p.blendMode),p.renderWebGL(L,p,M),O&&O.postRenderWebGL(L,M,this.renderTarget));p.setPosition(C,A)},batchTextureFrameKey:function(p,y,S,C,A,M){var L=this.manager.getFrame(p,y);L&&this.batchTextureFrame(L,S,C,A,M)},batchTextureFrame:function(p,y,S,C,A){y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=1),A===void 0&&(A=16777215);var M=this.camera.matrix,L=this.renderTarget;if(L)this.pipeline.batchTextureFrame(p,y,S,A,C,M,null);else{var P=this.context,O=p.canvasData,D=p.source.image;P.save(),P.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",P.globalAlpha=C,M.setToContext(P),O.width>0&&O.height>0&&P.drawImage(D,O.x,O.y,O.width,O.height,y,S,O.width,O.height),P.restore()}},snapshotArea:function(p,y,S,C,A,M,L){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,A,!1,p,y,S,C,M,L):this.renderer.snapshotCanvas(this.canvas,A,!1,p,y,S,C,M,L),this},snapshot:function(p,y,S){return this.snapshotArea(0,0,this.width,this.height,p,y,S)},snapshotPixel:function(p,y,S){return this.snapshotArea(p,y,1,1,S,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(p,y,S,C){var A=this.manager.resetStamp();A.setTexture(this),A.setOrigin(0),A.renderWebGL(p,A,S,C)},renderCanvas:function(){},destroy:function(){var p=this.manager.stamp;p&&p.texture===this&&this.manager.resetStamp(),f.prototype.destroy.call(this),n.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});h.exports=g},4327:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(45319),n=e(79291),r=new i({initialize:function(s,o,d,l,f,m,g){this.texture=s,this.name=o,this.source=s.source[d],this.sourceIndex=d,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(m,g,l,f)},setCutPosition:function(a,s){return a===void 0&&(a=0),s===void 0&&(s=0),this.cutX=a,this.cutY=s,this.updateUVs()},setCutSize:function(a,s){return this.cutWidth=a,this.cutHeight=s,this.updateUVs()},setSize:function(a,s,o,d){o===void 0&&(o=0),d===void 0&&(d=0),this.setCutPosition(o,d),this.setCutSize(a,s),this.width=a,this.height=s,this.halfWidth=Math.floor(a*.5),this.halfHeight=Math.floor(s*.5),this.centerX=Math.floor(a/2),this.centerY=Math.floor(s/2);var l=this.data,f=l.cut;f.x=o,f.y=d,f.w=a,f.h=s,f.r=o+a,f.b=d+s,l.sourceSize.w=a,l.sourceSize.h=s,l.spriteSourceSize.w=a,l.spriteSourceSize.h=s,l.radius=.5*Math.sqrt(a*a+s*s);var m=l.drawImage;return m.x=o,m.y=d,m.width=a,m.height=s,this.updateUVs()},setTrim:function(a,s,o,d,l,f){var m=this.data,g=m.spriteSourceSize;return m.trim=!0,m.sourceSize.w=a,m.sourceSize.h=s,g.x=o,g.y=d,g.w=l,g.h=f,g.r=o+l,g.b=d+f,this.x=o,this.y=d,this.width=l,this.height=f,this.halfWidth=l*.5,this.halfHeight=f*.5,this.centerX=Math.floor(l/2),this.centerY=Math.floor(f/2),this.updateUVs()},setScale9:function(a,s,o,d){var l=this.data;return l.scale9=!0,l.is3Slice=s===0&&d===this.height,l.scale9Borders.x=a,l.scale9Borders.y=s,l.scale9Borders.w=o,l.scale9Borders.h=d,this},setCropUVs:function(a,s,o,d,l,f,m){var g=this.cutX,p=this.cutY,y=this.cutWidth,S=this.cutHeight,C=this.realWidth,A=this.realHeight;s=u(s,0,C),o=u(o,0,A),d=u(d,0,C-s),l=u(l,0,A-o);var M=g+s,L=p+o,P=d,O=l,D=this.data;if(D.trim){var I=D.spriteSourceSize;d=u(d,0,y-s),l=u(l,0,S-o);var F=s+d,H=o+l,k=!(I.r<s||I.b<o||I.x>F||I.y>H);if(k){var W=Math.max(I.x,s),$=Math.max(I.y,o),K=Math.min(I.r,F)-W,Z=Math.min(I.b,H)-$;P=K,O=Z,f?M=g+(y-(W-I.x)-K):M=g+(W-I.x),m?L=p+(S-($-I.y)-Z):L=p+($-I.y),s=W,o=$,d=K,l=Z}else M=0,L=0,P=0,O=0}else f&&(M=g+(y-s-d)),m&&(L=p+(S-o-l));var X=this.source.width,j=this.source.height;return a.u0=Math.max(0,M/X),a.v0=Math.max(0,L/j),a.u1=Math.min(1,(M+P)/X),a.v1=Math.min(1,(L+O)/j),a.x=s,a.y=o,a.cx=M,a.cy=L,a.cw=P,a.ch=O,a.width=d,a.height=l,a.flipX=f,a.flipY=m,a},updateCropUVs:function(a,s,o){return this.setCropUVs(a,a.x,a.y,a.width,a.height,s,o)},setUVs:function(a,s,o,d,l,f){var m=this.data.drawImage;return m.width=a,m.height=s,this.u0=o,this.v0=d,this.u1=l,this.v1=f,this},updateUVs:function(){var a=this.cutX,s=this.cutY,o=this.cutWidth,d=this.cutHeight,l=this.data.drawImage;l.width=o,l.height=d;var f=this.source.width,m=this.source.height;return this.u0=a/f,this.v0=s/m,this.u1=(a+o)/f,this.v1=(s+d)/m,this},updateUVsInverted:function(){var a=this.source.width,s=this.source.height;return this.u0=(this.cutX+this.cutHeight)/a,this.v0=this.cutY/s,this.u1=this.cutX/a,this.v1=(this.cutY+this.cutWidth)/s,this},clone:function(){var a=new r(this.texture,this.name,this.sourceIndex);return a.cutX=this.cutX,a.cutY=this.cutY,a.cutWidth=this.cutWidth,a.cutHeight=this.cutHeight,a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a.halfWidth=this.halfWidth,a.halfHeight=this.halfHeight,a.centerX=this.centerX,a.centerY=this.centerY,a.rotated=this.rotated,a.data=n(!0,a.data,this.data),a.updateUVs(),a},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});h.exports=r},79237:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(4327),n=e(11876),r='Texture "%s" has no frame "%s"',a=new i({initialize:function(o,d,l,f,m){Array.isArray(l)||(l=[l]),this.manager=o,this.key=d,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var g=0;g<l.length;g++)this.source.push(new n(this,l[g],f,m))},add:function(s,o,d,l,f,m){if(this.has(s))return null;var g=new u(this,s,o,d,l,f,m);return this.frames[s]=g,this.firstFrame==="__BASE"&&(this.firstFrame=s),this.frameTotal++,g},remove:function(s){if(this.has(s)){var o=this.get(s);return o.destroy(),delete this.frames[s],!0}return!1},has:function(s){return this.frames.hasOwnProperty(s)},get:function(s){s||(s=this.firstFrame);var o=this.frames[s];return o||(console.warn(r,this.key,s),o=this.frames[this.firstFrame]),o},getTextureSourceIndex:function(s){for(var o=0;o<this.source.length;o++)if(this.source[o]===s)return o;return-1},getFramesFromTextureSource:function(s,o){o===void 0&&(o=!1);var d=[];for(var l in this.frames)if(!(l==="__BASE"&&!o)){var f=this.frames[l];f.sourceIndex===s&&d.push(f)}return d},getFrameBounds:function(s){s===void 0&&(s=0);for(var o=this.getFramesFromTextureSource(s,!0),d=o[0],l=d.cutX,f=d.cutY,m=d.cutX+d.cutWidth,g=d.cutY+d.cutHeight,p=1;p<o.length;p++){var y=o[p];y.cutX<l&&(l=y.cutX),y.cutY<f&&(f=y.cutY),y.cutX+y.cutWidth>m&&(m=y.cutX+y.cutWidth),y.cutY+y.cutHeight>g&&(g=y.cutY+y.cutHeight)}return{x:l,y:f,width:m-l,height:g-f}},getFrameNames:function(s){s===void 0&&(s=!1);var o=Object.keys(this.frames);if(!s){var d=o.indexOf("__BASE");d!==-1&&o.splice(d,1)}return o},getSourceImage:function(s){(s==null||this.frameTotal===1)&&(s="__BASE");var o=this.frames[s];return o?o.source.image:(console.warn(r,this.key,s),this.frames.__BASE.source.image)},getDataSourceImage:function(s){(s==null||this.frameTotal===1)&&(s="__BASE");var o=this.frames[s],d;return o?d=o.sourceIndex:(console.warn(r,this.key,s),d=this.frames.__BASE.sourceIndex),this.dataSource[d].image},setDataSource:function(s){Array.isArray(s)||(s=[s]);for(var o=0;o<s.length;o++){var d=this.source[o];this.dataSource.push(new n(this,s[o],d.width,d.height))}},setFilter:function(s){var o;for(o=0;o<this.source.length;o++)this.source[o].setFilter(s);for(o=0;o<this.dataSource.length;o++)this.dataSource[o].setFilter(s)},destroy:function(){var s,o=this.source,d=this.dataSource;for(s=0;s<o.length;s++)o[s]&&o[s].destroy();for(s=0;s<d.length;s++)d[s]&&d[s].destroy();for(var l in this.frames){var f=this.frames[l];f&&f.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});h.exports=a},17130:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(27919),u=e(57382),n=e(83419),r=e(40987),a=e(8054),s=e(81320),o=e(50792),d=e(69442),l=e(4327),f=e(8443),m=e(99584),g=e(35154),p=e(88571),y=e(41212),S=e(61309),C=e(87841),A=e(79237),M=new n({Extends:o,initialize:function(P){o.call(this),this.game=P,this.name="TextureManager",this.list={},this._tempCanvas=i.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new C,this.silentWarnings=!1,P.events.once(f.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(d.LOAD,this.updatePending,this),this.on(d.ERROR,this.updatePending,this);var L=this.game.config;L.defaultImage!==null&&this.addBase64("__DEFAULT",L.defaultImage),L.missingImage!==null&&this.addBase64("__MISSING",L.missingImage),L.whiteImage!==null&&this.addBase64("__WHITE",L.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(f.DESTROY,this.destroy,this),this.game.events.once(f.SYSTEM_READY,function(P){this.stamp=new p(P).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(d.LOAD),this.off(d.ERROR),this.emit(d.READY))},checkKey:function(L){return!L||typeof L!="string"||this.exists(L)?(this.silentWarnings||console.error("Texture key already in use: "+L),!1):!0},remove:function(L){if(typeof L=="string")if(this.exists(L))L=this.get(L);else return this.silentWarnings||console.warn("No texture found matching key: "+L),this;var P=L.key;return this.list.hasOwnProperty(P)&&(L.destroy(),this.emit(d.REMOVE,P),this.emit(d.REMOVE_KEY+P)),this},removeKey:function(L){return this.list.hasOwnProperty(L)&&delete this.list[L],this},addBase64:function(L,P){if(this.checkKey(L)){var O=this,D=new Image;D.onerror=function(){O.emit(d.ERROR,L)},D.onload=function(){var I=O.create(L,D);S.Image(I,0),O.emit(d.ADD,L,I),O.emit(d.ADD_KEY+L,I),O.emit(d.LOAD,L,I)},D.src=P}return this},getBase64:function(L,P,O,D){O===void 0&&(O="image/png"),D===void 0&&(D=.92);var I="",F=this.getFrame(L,P);if(F&&(F.source.isRenderTexture||F.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(F){var H=F.canvasData,k=i.create2D(this,H.width,H.height),W=k.getContext("2d",{willReadFrequently:!0});H.width>0&&H.height>0&&W.drawImage(F.source.image,H.x,H.y,H.width,H.height,0,0,H.width,H.height),I=k.toDataURL(O,D),i.remove(k)}return I},addImage:function(L,P,O){var D=null;return this.checkKey(L)&&(D=this.create(L,P),S.Image(D,0),O&&D.setDataSource(O),this.emit(d.ADD,L,D),this.emit(d.ADD_KEY+L,D)),D},addGLTexture:function(L,P){var O=null;if(this.checkKey(L)){var D=P.width,I=P.height;O=this.create(L,P,D,I),O.add("__BASE",0,0,0,D,I),this.emit(d.ADD,L,O),this.emit(d.ADD_KEY+L,O)}return O},addCompressedTexture:function(L,P,O){var D=null;if(this.checkKey(L)){if(D=this.create(L,P),D.add("__BASE",0,0,0,P.width,P.height),O){var I=function(H,k,W){Array.isArray(W.textures)||Array.isArray(W.frames)?S.JSONArray(H,k,W):S.JSONHash(H,k,W)};if(Array.isArray(O))for(var F=0;F<O.length;F++)I(D,F,O[F]);else I(D,0,O)}this.emit(d.ADD,L,D),this.emit(d.ADD_KEY+L,D)}return D},addRenderTexture:function(L,P){var O=null;return this.checkKey(L)&&(O=this.create(L,P),O.add("__BASE",0,0,0,P.width,P.height),this.emit(d.ADD,L,O),this.emit(d.ADD_KEY+L,O)),O},generate:function(L,P){if(this.checkKey(L)){var O=i.create(this,1,1);return P.canvas=O,m(P),this.addCanvas(L,O)}else return null},createCanvas:function(L,P,O){if(P===void 0&&(P=256),O===void 0&&(O=256),this.checkKey(L)){var D=i.create(this,P,O,a.CANVAS,!0);return this.addCanvas(L,D)}return null},addCanvas:function(L,P,O){O===void 0&&(O=!1);var D=null;return O?D=new u(this,L,P,P.width,P.height):this.checkKey(L)&&(D=new u(this,L,P,P.width,P.height),this.list[L]=D,this.emit(d.ADD,L,D),this.emit(d.ADD_KEY+L,D)),D},addDynamicTexture:function(L,P,O){var D=null;return typeof L=="string"&&!this.exists(L)?D=new s(this,L,P,O):(D=L,L=D.key),this.checkKey(L)?(this.list[L]=D,this.emit(d.ADD,L,D),this.emit(d.ADD_KEY+L,D)):D=null,D},addAtlas:function(L,P,O,D){return Array.isArray(O.textures)||Array.isArray(O.frames)?this.addAtlasJSONArray(L,P,O,D):this.addAtlasJSONHash(L,P,O,D)},addAtlasJSONArray:function(L,P,O,D){var I=null;if(P instanceof A?(L=P.key,I=P):this.checkKey(L)&&(I=this.create(L,P)),I){if(Array.isArray(O))for(var F=O.length===1,H=0;H<I.source.length;H++){var k=F?O[0]:O[H];S.JSONArray(I,H,k)}else S.JSONArray(I,0,O);D&&I.setDataSource(D),this.emit(d.ADD,L,I),this.emit(d.ADD_KEY+L,I)}return I},addAtlasJSONHash:function(L,P,O,D){var I=null;if(P instanceof A?(L=P.key,I=P):this.checkKey(L)&&(I=this.create(L,P)),I){if(Array.isArray(O))for(var F=0;F<O.length;F++)S.JSONHash(I,F,O[F]);else S.JSONHash(I,0,O);D&&I.setDataSource(D),this.emit(d.ADD,L,I),this.emit(d.ADD_KEY+L,I)}return I},addAtlasXML:function(L,P,O,D){var I=null;return P instanceof A?(L=P.key,I=P):this.checkKey(L)&&(I=this.create(L,P)),I&&(S.AtlasXML(I,0,O),D&&I.setDataSource(D),this.emit(d.ADD,L,I),this.emit(d.ADD_KEY+L,I)),I},addUnityAtlas:function(L,P,O,D){var I=null;return P instanceof A?(L=P.key,I=P):this.checkKey(L)&&(I=this.create(L,P)),I&&(S.UnityYAML(I,0,O),D&&I.setDataSource(D),this.emit(d.ADD,L,I),this.emit(d.ADD_KEY+L,I)),I},addSpriteSheet:function(L,P,O,D){var I=null;if(P instanceof A?(L=P.key,I=P):this.checkKey(L)&&(I=this.create(L,P)),I){var F=I.source[0].width,H=I.source[0].height;S.SpriteSheet(I,0,0,0,F,H,O),D&&I.setDataSource(D),this.emit(d.ADD,L,I),this.emit(d.ADD_KEY+L,I)}return I},addSpriteSheetFromAtlas:function(L,P){if(!this.checkKey(L))return null;var O=g(P,"atlas",null),D=g(P,"frame",null);if(!(!O||!D)){var I=this.get(O),F=I.get(D);if(F){var H=F.source.image;H||(H=F.source.glTexture);var k=this.create(L,H);return F.trimmed?S.SpriteSheetFromAtlas(k,F,P):S.SpriteSheet(k,0,F.cutX,F.cutY,F.cutWidth,F.cutHeight,P),this.emit(d.ADD,L,k),this.emit(d.ADD_KEY+L,k),k}}},addUint8Array:function(L,P,O,D){if(!this.checkKey(L)||P.length/4!==O*D)return null;var I=this.create(L,P,O,D);return I.add("__BASE",0,0,0,O,D),this.emit(d.ADD,L,I),this.emit(d.ADD_KEY+L,I),I},create:function(L,P,O,D){var I=null;return this.checkKey(L)&&(I=new A(this,L,P,O,D),this.list[L]=I),I},exists:function(L){return this.list.hasOwnProperty(L)},get:function(L){return L===void 0&&(L="__DEFAULT"),this.list[L]?this.list[L]:L instanceof A?L:L instanceof l?L.texture:this.list.__MISSING},cloneFrame:function(L,P){if(this.list[L])return this.list[L].get(P).clone()},getFrame:function(L,P){if(this.list[L])return this.list[L].get(P)},parseFrame:function(L){if(L){if(typeof L=="string")return this.getFrame(L);if(Array.isArray(L)&&L.length===2)return this.getFrame(L[0],L[1]);if(y(L))return this.getFrame(L.key,L.frame);if(L instanceof A)return L.get();if(L instanceof l)return L}else return},getTextureKeys:function(){var L=[];for(var P in this.list)P!=="__DEFAULT"&&P!=="__MISSING"&&P!=="__WHITE"&&P!=="__NORMAL"&&L.push(P);return L},getPixel:function(L,P,O,D){var I=this.getFrame(O,D);if(I){L-=I.x,P-=I.y;var F=I.data.cut;if(L+=F.x,P+=F.y,L>=F.x&&L<F.r&&P>=F.y&&P<F.b){var H=this._tempContext;H.clearRect(0,0,1,1),H.drawImage(I.source.image,L,P,1,1,0,0,1,1);var k=H.getImageData(0,0,1,1);return new r(k.data[0],k.data[1],k.data[2],k.data[3])}}return null},getPixelAlpha:function(L,P,O,D){var I=this.getFrame(O,D);if(I){L-=I.x,P-=I.y;var F=I.data.cut;if(L+=F.x,P+=F.y,L>=F.x&&L<F.r&&P>=F.y&&P<F.b){var H=this._tempContext;H.clearRect(0,0,1,1),H.drawImage(I.source.image,L,P,1,1,0,0,1,1);var k=H.getImageData(0,0,1,1);return k.data[3]}}return null},setTexture:function(L,P,O){return this.list[P]&&(L.texture=this.list[P],L.frame=L.texture.get(O)),L},renameTexture:function(L,P){var O=this.get(L);return O&&L!==P?(O.key=P,this.list[P]=O,delete this.list[L],!0):!1},each:function(L,P){for(var O=[null],D=1;D<arguments.length;D++)O.push(arguments[D]);for(var I in this.list)O[0]=this.list[I],L.apply(P,O)},resetStamp:function(L,P){L===void 0&&(L=1),P===void 0&&(P=16777215);var O=this.stamp;return O.setCrop(),O.setPosition(0),O.setAngle(0),O.setScale(1),O.setAlpha(L),O.setTint(P),O.setTexture("__WHITE"),O},destroy:function(){for(var L in this.list)this.list[L].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,i.remove(this._tempCanvas)}});h.exports=M},11876:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(27919),u=e(83419),n=e(50030),r=e(29795),a=e(82751),s=new u({initialize:function(d,l,f,m,g){g===void 0&&(g=!1);var p=d.manager.game;this.renderer=p.renderer,this.texture=d,this.source=l,this.image=l.compressed?null:l,this.compressionAlgorithm=l.compressed?l.format:null,this.resolution=1,this.width=f||l.naturalWidth||l.videoWidth||l.width||0,this.height=m||l.naturalHeight||l.videoHeight||l.height||0,this.scaleMode=r.DEFAULT,this.isCanvas=l instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&l instanceof HTMLVideoElement,this.isRenderTexture=l.type==="RenderTexture"||l.type==="DynamicTexture",this.isGLTexture=l instanceof a,this.isPowerOf2=n(this.width,this.height),this.glTexture=null,this.flipY=g,this.init(p)},init:function(o){var d=this.renderer;if(d){var l=this.source;if(d.gl){var f=this.image,m=this.flipY,g=this.width,p=this.height,y=this.scaleMode;this.isCanvas?this.glTexture=d.createCanvasTexture(f,!1,m):this.isVideo?this.glTexture=d.createVideoTexture(f,!1,m):this.isRenderTexture?this.glTexture=d.createTextureFromSource(null,g,p,y):this.isGLTexture?this.glTexture=l:this.compressionAlgorithm?this.glTexture=d.createTextureFromSource(l,void 0,void 0,y):l instanceof Uint8Array?this.glTexture=d.createUint8ArrayTexture(l,g,p,y):this.glTexture=d.createTextureFromSource(f,g,p,y)}else this.isRenderTexture&&(this.image=l.canvas)}o.config.antialias||this.setFilter(1)},setFilter:function(o){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,o),this.scaleMode=o},setFlipY:function(o){return o===void 0&&(o=!0),o===this.flipY?this:(this.flipY=o,this.update(),this)},update:function(){var o=this.renderer,d=this.image,l=this.flipY,f=o.gl;f&&this.isCanvas?o.updateCanvasTexture(d,this.glTexture,l):f&&this.isVideo&&o.updateVideoTexture(d,this.glTexture,l)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&i.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});h.exports=s},19673:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={LINEAR:0,NEAREST:1};h.exports=w},44538:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addtexture"},63486:h=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addtexture-"},94851:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="onerror"},29099:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="onload"},8678:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="ready"},86415:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removetexture"},30879:h=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removetexture-"},69442:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADD:e(44538),ADD_KEY:e(63486),ERROR:e(94851),LOAD:e(29099),READY:e(8678),REMOVE:e(86415),REMOVE_KEY:e(30879)}},27458:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(79291),u=e(19673),n={CanvasTexture:e(57382),DynamicTexture:e(81320),Events:e(69442),FilterMode:u,Frame:e(4327),Parsers:e(61309),Texture:e(79237),TextureManager:e(17130),TextureSource:e(11876)};n=i(!1,n,u),h.exports=n},89905:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){if(!u.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var n=e.source[i];e.add("__BASE",i,0,0,n.width,n.height);for(var r=u.getElementsByTagName("SubTexture"),a,s=0;s<r.length;s++){var o=r[s].attributes,d=o.name.value,l=parseInt(o.x.value,10),f=parseInt(o.y.value,10),m=parseInt(o.width.value,10),g=parseInt(o.height.value,10);if(a=e.add(d,i,l,f,m,g),o.frameX){var p=Math.abs(parseInt(o.frameX.value,10)),y=Math.abs(parseInt(o.frameY.value,10)),S=parseInt(o.frameWidth.value,10),C=parseInt(o.frameHeight.value,10);a.setTrim(m,g,p,y,S,C)}}return e};h.exports=w},72893:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.source[i];return e.add("__BASE",i,0,0,u.width,u.height),e};h.exports=w},4832:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.source[i];return e.add("__BASE",i,0,0,u.width,u.height),e};h.exports=w},78566:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(41786),u=function(n,r,a){if(!a.frames&&!a.textures){console.warn("Invalid Texture Atlas JSON Array");return}var s=n.source[r];n.add("__BASE",r,0,0,s.width,s.height);for(var o=Array.isArray(a.textures)?a.textures[r].frames:a.frames,d,l=0;l<o.length;l++){var f=o[l];if(d=n.add(f.filename,r,f.frame.x,f.frame.y,f.frame.w,f.frame.h),!d){console.warn("Invalid atlas json, frame already exists: "+f.filename);continue}f.trimmed&&d.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(d.rotated=!0,d.updateUVsInverted());var m=f.anchor||f.pivot;m&&(d.customPivot=!0,d.pivotX=m.x,d.pivotY=m.y),f.scale9Borders&&d.setScale9(f.scale9Borders.x,f.scale9Borders.y,f.scale9Borders.w,f.scale9Borders.h),d.customData=i(f)}for(var g in a)g!=="frames"&&(Array.isArray(a[g])?n.customData[g]=a[g].slice(0):n.customData[g]=a[g]);return n};h.exports=u},39711:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(41786),u=function(n,r,a){if(!a.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var s=n.source[r];n.add("__BASE",r,0,0,s.width,s.height);var o=a.frames,d;for(var l in o)if(o.hasOwnProperty(l)){var f=o[l];if(d=n.add(l,r,f.frame.x,f.frame.y,f.frame.w,f.frame.h),!d){console.warn("Invalid atlas json, frame already exists: "+l);continue}f.trimmed&&d.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(d.rotated=!0,d.updateUVsInverted());var m=f.anchor||f.pivot;m&&(d.customPivot=!0,d.pivotX=m.x,d.pivotY=m.y),f.scale9Borders&&d.setScale9(f.scale9Borders.x,f.scale9Borders.y,f.scale9Borders.w,f.scale9Borders.h),d.customData=i(f)}for(var g in a)g!=="frames"&&(Array.isArray(a[g])?n.customData[g]=a[g].slice(0):n.customData[g]=a[g]);return n};h.exports=u},31403:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i=[171,75,84,88,32,49,49,187,13,10,26,10],u,n=new Uint8Array(e,0,12);for(u=0;u<n.length;u++)if(n[u]!==i[u]){console.warn("KTXParser - Invalid file format");return}var r=Uint32Array.BYTES_PER_ELEMENT,a=new DataView(e,12,13*r),s=a.getUint32(0,!0)===67305985,o=a.getUint32(1*r,s);if(o!==0){console.warn("KTXParser - Only compressed formats supported");return}var d=a.getUint32(4*r,s),l=a.getUint32(6*r,s),f=a.getUint32(7*r,s),m=Math.max(1,a.getUint32(11*r,s)),g=a.getUint32(12*r,s),p=new Array(m),y=12+13*4+g,S=l,C=f;for(u=0;u<m;u++){var A=new Int32Array(e,y,1)[0];y+=4,p[u]={data:new Uint8Array(e,y,A),width:S,height:C},S=Math.max(1,S>>1),C=Math.max(1,C>>1),y+=A}return{mipmaps:p,width:l,height:f,internalFormat:d,compressed:!0,generateMipmap:!1}};h.exports=w},82038:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(P,O,D,I,F,H,k){return k===void 0&&(k=16),Math.floor((P+D)/F)*Math.floor((O+I)/H)*k}function e(P,O){return P=Math.max(P,16),O=Math.max(O,8),P*O/4}function i(P,O){return P=Math.max(P,8),O=Math.max(O,8),P*O/2}function u(P,O){return Math.ceil(P/4)*Math.ceil(O/4)*16}function n(P,O){return w(P,O,3,3,4,4,8)}function r(P,O){return w(P,O,3,3,4,4)}function a(P,O){return w(P,O,4,3,5,4)}function s(P,O){return w(P,O,4,4,5,5)}function o(P,O){return w(P,O,5,4,6,5)}function d(P,O){return w(P,O,5,5,6,6)}function l(P,O){return w(P,O,7,4,8,5)}function f(P,O){return w(P,O,7,5,8,6)}function m(P,O){return w(P,O,7,7,8,8)}function g(P,O){return w(P,O,9,4,10,5)}function p(P,O){return w(P,O,9,5,10,6)}function y(P,O){return w(P,O,9,7,10,8)}function S(P,O){return w(P,O,9,9,10,10)}function C(P,O){return w(P,O,11,9,12,10)}function A(P,O){return w(P,O,11,11,12,12)}var M={0:{sizeFunc:e,glFormat:[35841]},1:{sizeFunc:e,glFormat:[35843]},2:{sizeFunc:i,glFormat:[35840]},3:{sizeFunc:i,glFormat:[35842]},6:{sizeFunc:n,glFormat:[36196]},7:{sizeFunc:n,glFormat:[33776,35916]},8:{sizeFunc:r,glFormat:[33777,35917]},9:{sizeFunc:r,glFormat:[33778,35918]},11:{sizeFunc:r,glFormat:[33779,35919]},14:{sizeFunc:u,glFormat:[36494,36495]},15:{sizeFunc:u,glFormat:[36492,36493]},22:{sizeFunc:n,glFormat:[37492,37493]},23:{sizeFunc:r,glFormat:[37496,37497]},24:{sizeFunc:n,glFormat:[37494,37495]},25:{sizeFunc:n,glFormat:[37488]},26:{sizeFunc:r,glFormat:[37490]},27:{sizeFunc:r,glFormat:[37808,37840]},28:{sizeFunc:a,glFormat:[37809,37841]},29:{sizeFunc:s,glFormat:[37810,37842]},30:{sizeFunc:o,glFormat:[37811,37843]},31:{sizeFunc:d,glFormat:[37812,37844]},32:{sizeFunc:l,glFormat:[37813,37845]},33:{sizeFunc:f,glFormat:[37814,37846]},34:{sizeFunc:m,glFormat:[37815,37847]},35:{sizeFunc:g,glFormat:[37816,37848]},36:{sizeFunc:p,glFormat:[37817,37849]},37:{sizeFunc:y,glFormat:[37818,37850]},38:{sizeFunc:S,glFormat:[37819,37851]},39:{sizeFunc:C,glFormat:[37820,37852]},40:{sizeFunc:A,glFormat:[37821,37853]}},L=function(P){for(var O=new Uint32Array(P,0,13),D=O[0],I=D===55727696,F=I?O[2]:O[3],H=O[4],k=M[F].glFormat[H],W=M[F].sizeFunc,$=O[11],K=O[7],Z=O[6],X=52+O[12],j=new Uint8Array(P,X),Y=new Array($),U=0,J=K,q=Z,_=0;_<$;_++){var te=W(J,q);Y[_]={data:new Uint8Array(j.buffer,j.byteOffset+U,te),width:J,height:q},J=Math.max(1,J>>1),q=Math.max(1,q>>1),U+=te}return{mipmaps:Y,width:K,height:Z,internalFormat:k,compressed:!0,generateMipmap:!1}};h.exports=L},75549:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(95540),u=function(n,r,a,s,o,d,l){var f=i(l,"frameWidth",null),m=i(l,"frameHeight",f);if(f===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=n.source[r];n.add("__BASE",r,0,0,g.width,g.height);var p=i(l,"startFrame",0),y=i(l,"endFrame",-1),S=i(l,"margin",0),C=i(l,"spacing",0),A=Math.floor((o-S+C)/(f+C)),M=Math.floor((d-S+C)/(m+C)),L=A*M;L===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",n.key),(p>L||p<-L)&&(p=0),p<0&&(p=L+p),(y===-1||y>L||y<p)&&(y=L);for(var P=S,O=S,D=0,I=0,F=0,H=0;H<L;H++){D=0,I=0;var k=P+f,W=O+m;k>o&&(D=k-o),W>d&&(I=W-d),H>=p&&H<=y&&(n.add(F,r,a+P,s+O,f-D,m-I),F++),P+=f+C,P+f>o&&(P=S,O+=m+C)}return n};h.exports=u},47534:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(95540),u=function(n,r,a){var s=i(a,"frameWidth",null),o=i(a,"frameHeight",s);if(!s)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var d=n.source[0];n.add("__BASE",0,0,0,d.width,d.height),i(a,"startFrame",0),i(a,"endFrame",-1);for(var l=i(a,"margin",0),f=i(a,"spacing",0),m=r.cutX,g=r.cutY,p=r.cutWidth,y=r.cutHeight,S=r.realWidth,C=r.realHeight,A=Math.floor((S-l+f)/(s+f)),M=Math.floor((C-l+f)/(o+f)),L=r.x,P=s-L,O=s-(S-p-L),D=r.y,I=o-D,F=o-(C-y-D),H,k=l,W=l,$=0,K=0,Z=0;Z<M;Z++){for(var X=Z===0,j=Z===M-1,Y=0;Y<A;Y++){var U=Y===0,J=Y===A-1;if(H=n.add($,K,m+k,g+W,s,o),U||X||J||j){var q=U?L:0,_=X?D:0,te=0,se=0;U&&(te+=s-P),J&&(te+=s-O),X&&(se+=o-I),j&&(se+=o-F);var ne=s-te,he=o-se;H.cutWidth=ne,H.cutHeight=he,H.setTrim(s,o,q,_,ne,he)}k+=f,U?k+=P:J?k+=O:k+=s,$++}k=l,W+=f,X?W+=I:j?W+=F:W+=o}return n};h.exports=u},86147:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=0,e=function(u,n,r,a){var s=w-a.y-a.height;u.add(r,n,a.x,s,a.width,a.height)},i=function(u,n,r){var a=u.source[n];u.add("__BASE",n,0,0,a.width,a.height),w=a.height;for(var s=r.split(`
`),o=/^[ ]*(- )*(\w+)+[: ]+(.*)/,d="",l="",f={x:0,y:0,width:0,height:0},m=0;m<s.length;m++){var g=s[m].match(o);if(g){var p=g[1]==="- ",y=g[2],S=g[3];if(p&&(l!==d&&(e(u,n,l,f),d=l),f={x:0,y:0,width:0,height:0}),y==="name"){l=S;continue}switch(y){case"x":case"y":case"width":case"height":f[y]=parseInt(S,10);break}}}return l!==d&&e(u,n,l,f),u};h.exports=i},55222:(h,w,e)=>{/**
 * @author       Ben Richards <benjamindrichards@gmail.com>
 * @copyright    2024 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(50030),u=function(d){for(var l=d.mipmaps,f=1;f<l.length;f++){var m=l[f].width,g=l[f].height;if(!i(m,g))return console.warn("Mip level "+f+" is not a power-of-two size: "+m+"x"+g),!1}var p=o[d.internalFormat];return p?p(d):(console.warn("No format checker found for internal format "+d.internalFormat+". Assuming valid."),!0)};function n(d){for(var l=d.mipmaps,f=0;f<l.length;f++){var m=l[f].width,g=l[f].height;if((m<<f)%4!==0||(g<<f)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+f+" is "+m+"x"+g),!1}return!0}function r(){return!0}function a(d){var l=d.mipmaps,f=l[0];return i(f.width,f.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+f.width+"x"+f.height),!1)}function s(d){var l=d.mipmaps,f=l[0];return f.width%4!==0||f.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+f.width+"x"+f.height+" pixels"),!1):!0}var o={37488:r,37489:r,37490:r,37491:r,37492:r,37493:r,37494:r,37495:r,37496:r,37497:r,36196:r,37808:r,37809:r,37810:r,37811:r,37812:r,37813:r,37814:r,37815:r,37816:r,37817:r,37818:r,37819:r,37820:r,37821:r,37840:r,37841:r,37842:r,37843:r,37844:r,37845:r,37846:r,37847:r,37848:r,37849:r,37850:r,37851:r,37852:r,37853:r,36492:n,36493:n,36494:n,36495:n,36283:n,36284:n,36285:n,36286:n,35840:a,35841:a,35842:a,35843:a,33776:n,33777:n,33778:n,33779:n,35916:s,35917:s,35918:s,35919:s};h.exports=u},61309:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AtlasXML:e(89905),Canvas:e(72893),Image:e(4832),JSONArray:e(78566),JSONHash:e(39711),KTXParser:e(31403),PVRParser:e(82038),SpriteSheet:e(75549),SpriteSheetFromAtlas:e(47534),UnityYAML:e(86147)}},80341:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r,a,s,o,d,l,f){(s===void 0||s<=0)&&(s=32),(o===void 0||o<=0)&&(o=32),d===void 0&&(d=0),l===void 0&&(l=0),this.name=r,this.firstgid=a|0,this.imageWidth=s|0,this.imageHeight=o|0,this.imageMargin=d|0,this.imageSpacing=l|0,this.properties=f||{},this.images=[],this.total=0},containsImageIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},addImage:function(n,r){return this.images.push({gid:n,image:r}),this.total++,this}});h.exports=u},27462:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=new i({initialize:function(r){if(this.gids=[],r!==void 0)for(var a=0;a<r.length;++a)for(var s=r[a],o=0;o<s.total;++o)this.gids[s.firstgid+o]=s;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(n){this.gids=n?this._gids:void 0}},getTypeIncludingTile:function(n){if(n.type!==void 0&&n.type!=="")return n.type;if(!(!this.gids||n.gid===void 0)){var r=this.gids[n.gid];if(r){var a=r.getTileData(n.gid);if(a)return a.type}}},setTextureAndFrame:function(n,r,a,s){if(r===null&&this.gids&&s.gid!==void 0){var o=this.gids[s.gid];o&&(r===null&&o.image!==void 0&&(r=o.image.key),a===null&&(a=s.gid-o.firstgid),n.scene.textures.getFrame(r,a)||(r=null,a=null))}n.setTexture(r,a)},setPropertiesFromTiledObject:function(n,r){if(this.gids!==void 0&&r.gid!==void 0){var a=this.gids[r.gid];a!==void 0&&this.setFromJSON(n,a.getTileProperties(r.gid))}this.setFromJSON(n,r.properties)},setFromJSON:function(n,r){if(r){if(Array.isArray(r)){for(var a=0;a<r.length;a++){var s=r[a];n[s.name]!==void 0?n[s.name]=s.value:n.setData(s.name,s.value)}return}for(var o in r)n[o]!==void 0?n[o]=r[o]:n.setData(o,r[o])}}});h.exports=u},31989:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(80341),u=e(87010),n=e(46177),r=e(49075),a=function(s,o,d,l,f,m,g,p){d===void 0&&(d=32),l===void 0&&(l=32),f===void 0&&(f=10),m===void 0&&(m=10),p===void 0&&(p=!1);var y=null;if(Array.isArray(g)){var S=o!==void 0?o:"map";y=n(S,i.ARRAY_2D,g,d,l,p)}else if(o!==void 0){var C=s.cache.tilemap.get(o);C?y=n(o,C.format,C.data,d,l,p):console.warn("No map data found for key "+o)}return y===null&&(y=new u({tileWidth:d,tileHeight:l,width:f,height:m})),new r(s,y)};h.exports=a},23029:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(31401),n=e(91907),r=e(62644),a=e(93232),s=new i({Mixins:[u.AlphaSingle,u.Flip,u.Visible],initialize:function(d,l,f,m,g,p,y,S){this.layer=d,this.index=l,this.x=f,this.y=m,this.width=g,this.height=p,this.right,this.bottom,this.baseWidth=y!==void 0?y:g,this.baseHeight=S!==void 0?S:p,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(o,d){return!(o<this.pixelX||d<this.pixelY||o>this.right||d>this.bottom)},copy:function(o){return this.index=o.index,this.alpha=o.alpha,this.properties=r(o.properties),this.visible=o.visible,this.setFlip(o.flipX,o.flipY),this.tint=o.tint,this.rotation=o.rotation,this.collideUp=o.collideUp,this.collideDown=o.collideDown,this.collideLeft=o.collideLeft,this.collideRight=o.collideRight,this.collisionCallback=o.collisionCallback,this.collisionCallbackContext=o.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(o){var d=this.tilemapLayer;if(d){var l=d.tileToWorldXY(this.x,this.y,void 0,o);return l.x}return this.x*this.baseWidth},getRight:function(o){var d=this.tilemapLayer;return d?this.getLeft(o)+this.width*d.scaleX:this.getLeft(o)+this.width},getTop:function(o){var d=this.tilemapLayer;if(d){var l=d.tileToWorldXY(this.x,this.y,void 0,o);return l.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(o){var d=this.tilemapLayer;return d?this.getTop(o)+this.height*d.scaleY:this.getTop(o)+this.height},getBounds:function(o,d){return d===void 0&&(d=new a),d.x=this.getLeft(o),d.y=this.getTop(o),d.width=this.getRight(o)-d.x,d.height=this.getBottom(o)-d.y,d},getCenterX:function(o){return(this.getLeft(o)+this.getRight(o))/2},getCenterY:function(o){return(this.getTop(o)+this.getBottom(o))/2},intersects:function(o,d,l,f){return!(l<=this.pixelX||f<=this.pixelY||o>=this.right||d>=this.bottom)},isInteresting:function(o,d){return o&&d?this.canCollide||this.hasInterestingFace:o?this.collides:d?this.hasInterestingFace:!1},resetCollision:function(o){if(o===void 0&&(o=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,o){var d=this.tilemapLayer;d&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(o,d,l,f,m){if(d===void 0&&(d=o),l===void 0&&(l=o),f===void 0&&(f=o),m===void 0&&(m=!0),this.collideLeft=o,this.collideRight=d,this.collideUp=l,this.collideDown=f,this.faceLeft=o,this.faceRight=d,this.faceTop=l,this.faceBottom=f,m){var g=this.tilemapLayer;g&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(o,d){return o===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=o,this.collisionCallbackContext=d),this},setSize:function(o,d,l,f){return o!==void 0&&(this.width=o),d!==void 0&&(this.height=d),l!==void 0&&(this.baseWidth=l),f!==void 0&&(this.baseHeight=f),this.updatePixelXY(),this},updatePixelXY:function(){var o=this.layer.orientation;if(o===n.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(o===n.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(o===n.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(o===n.HEXAGONAL){var d=this.layer.staggerAxis,l=this.layer.staggerIndex,f=this.layer.hexSideLength,m,g;d==="y"?(g=(this.baseHeight-f)/2+f,l==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*g):d==="x"&&(m=(this.baseWidth-f)/2+f,this.pixelX=this.x*m,l==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var o=this.layer.tilemapLayer;if(o){var d=o.gidMap[this.index];if(d)return d}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var o=this.tilemapLayer;return o?o.tilemap:null}}});h.exports=s},49075:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(84101),u=e(83419),n=e(39506),r=e(80341),a=e(95540),s=e(14977),o=e(27462),d=e(91907),l=e(36305),f=e(19133),m=e(68287),g=e(23029),p=e(81086),y=e(20442),S=e(33629),C=new u({initialize:function(M,L){this.scene=M,this.tileWidth=L.tileWidth,this.tileHeight=L.tileHeight,this.width=L.width,this.height=L.height,this.orientation=L.orientation,this.renderOrder=L.renderOrder,this.format=L.format,this.version=L.version,this.properties=L.properties,this.widthInPixels=L.widthInPixels,this.heightInPixels=L.heightInPixels,this.imageCollections=L.imageCollections,this.images=L.images,this.layers=L.layers,this.tiles=L.tiles,this.tilesets=L.tilesets,this.objects=L.objects,this.currentLayerIndex=0,this.hexSideLength=L.hexSideLength;var P=this.orientation;this._convert={WorldToTileXY:p.GetWorldToTileXYFunction(P),WorldToTileX:p.GetWorldToTileXFunction(P),WorldToTileY:p.GetWorldToTileYFunction(P),TileToWorldXY:p.GetTileToWorldXYFunction(P),TileToWorldX:p.GetTileToWorldXFunction(P),TileToWorldY:p.GetTileToWorldYFunction(P),GetTileCorners:p.GetTileCornersFunction(P)}},setRenderOrder:function(A){var M=["right-down","left-down","right-up","left-up"];return typeof A=="number"&&(A=M[A]),M.indexOf(A)>-1&&(this.renderOrder=A),this},addTilesetImage:function(A,M,L,P,O,D,I,F){if(A===void 0)return null;M==null&&(M=A);var H=this.scene.sys.textures;if(!H.exists(M))return console.warn('Texture key "%s" not found',M),null;var k=H.get(M),W=this.getTilesetIndex(A);if(W===null&&this.format===r.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',A,this.tilesets),null;var $=this.tilesets[W];return $?((L||P)&&$.setTileSize(L,P),(O||D)&&$.setSpacing(O,D),$.setImage(k),$):(L===void 0&&(L=this.tileWidth),P===void 0&&(P=this.tileHeight),O===void 0&&(O=0),D===void 0&&(D=0),I===void 0&&(I=0),F===void 0&&(F={x:0,y:0}),$=new S(A,I,L,P,O,D,void 0,void 0,F),$.setImage(k),this.tilesets.push($),this.tiles=i(this),$)},copy:function(A,M,L,P,O,D,I,F){return F=this.getLayer(F),F!==null?(p.Copy(A,M,L,P,O,D,I,F),this):null},createBlankLayer:function(A,M,L,P,O,D,I,F){L===void 0&&(L=0),P===void 0&&(P=0),O===void 0&&(O=this.width),D===void 0&&(D=this.height),I===void 0&&(I=this.tileWidth),F===void 0&&(F=this.tileHeight);var H=this.getLayerIndex(A);if(H!==null)return console.warn("Invalid Tilemap Layer ID: "+A),null;for(var k=new s({name:A,tileWidth:I,tileHeight:F,width:O,height:D,orientation:this.orientation}),W,$=0;$<D;$++){W=[];for(var K=0;K<O;K++)W.push(new g(k,-1,K,$,I,F,this.tileWidth,this.tileHeight));k.data.push(W)}this.layers.push(k),this.currentLayerIndex=this.layers.length-1;var Z=new y(this.scene,this,this.currentLayerIndex,M,L,P);return Z.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(Z),Z},createLayer:function(A,M,L,P){var O=this.getLayerIndex(A);if(O===null)return console.warn("Invalid Tilemap Layer ID: "+A),typeof A=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var D=this.layers[O];if(D.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+A),null;this.currentLayerIndex=O,L===void 0&&(L=D.x),P===void 0&&(P=D.y);var I=new y(this.scene,this,O,M,L,P);return I.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(I),I},createFromObjects:function(A,M,L){L===void 0&&(L=!0);var P=[],O=this.getObjectLayer(A);if(!O)return console.warn("createFromObjects: Invalid objectLayerName given: "+A),P;var D=new o(L?this.tilesets:void 0);Array.isArray(M)||(M=[M]);for(var I=O.objects,F=0;F<M.length;F++){var H=M[F],k=a(H,"id",null),W=a(H,"gid",null),$=a(H,"name",null),K=a(H,"type",null);D.enabled=!a(H,"ignoreTileset",null);for(var Z,X=[],j=0;j<I.length;j++)Z=I[j],(k===null&&W===null&&$===null&&K===null||k!==null&&Z.id===k||W!==null&&Z.gid===W||$!==null&&Z.name===$||K!==null&&D.getTypeIncludingTile(Z)===K)&&X.push(Z);for(var Y=a(H,"classType",m),U=a(H,"scene",this.scene),J=a(H,"container",null),q=a(H,"key",null),_=a(H,"frame",null),te=0;te<X.length;te++){Z=X[te];var se=new Y(U);if(se.setName(Z.name),se.setPosition(Z.x,Z.y),D.setTextureAndFrame(se,q,_,Z),Z.width&&(se.displayWidth=Z.width),Z.height&&(se.displayHeight=Z.height),this.orientation===d.ISOMETRIC){var ne=this.tileWidth/this.tileHeight,he={x:se.x-se.y,y:(se.x+se.y)/ne};se.x=he.x,se.y=he.y}var le={x:se.originX*Z.width,y:(se.originY-(Z.gid?1:0))*Z.height};if(Z.rotation){var ge=n(Z.rotation);l(le,ge),se.rotation=ge}se.x+=le.x,se.y+=le.y,(Z.flippedHorizontal!==void 0||Z.flippedVertical!==void 0)&&se.setFlip(Z.flippedHorizontal,Z.flippedVertical),Z.visible||(se.visible=!1),D.setPropertiesFromTiledObject(se,Z),J?J.add(se):U.add.existing(se),P.push(se)}}return P},createFromTiles:function(A,M,L,P,O,D){return D=this.getLayer(D),D===null?null:p.CreateFromTiles(A,M,L,P,O,D)},fill:function(A,M,L,P,O,D,I){return D===void 0&&(D=!0),I=this.getLayer(I),I===null?null:(p.Fill(A,M,L,P,O,D,I),this)},filterObjects:function(A,M,L){if(typeof A=="string"){var P=A;if(A=this.getObjectLayer(A),!A)return console.warn("No object layer found with the name: "+P),null}return A.objects.filter(M,L)},filterTiles:function(A,M,L,P,O,D,I,F){return F=this.getLayer(F),F===null?null:p.FilterTiles(A,M,L,P,O,D,I,F)},findByIndex:function(A,M,L,P){return P=this.getLayer(P),P===null?null:p.FindByIndex(A,M,L,P)},findObject:function(A,M,L){if(typeof A=="string"){var P=A;if(A=this.getObjectLayer(A),!A)return console.warn("No object layer found with the name: "+P),null}return A.objects.find(M,L)||null},findTile:function(A,M,L,P,O,D,I,F){return F=this.getLayer(F),F===null?null:p.FindTile(A,M,L,P,O,D,I,F)},forEachTile:function(A,M,L,P,O,D,I,F){return F=this.getLayer(F),F===null?null:(p.ForEachTile(A,M,L,P,O,D,I,F),this)},getImageIndex:function(A){return this.getIndex(this.images,A)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(A){return A.name})},getIndex:function(A,M){for(var L=0;L<A.length;L++)if(A[L].name===M)return L;return null},getLayer:function(A){var M=this.getLayerIndex(A);return M!==null?this.layers[M]:null},getObjectLayer:function(A){var M=this.getIndex(this.objects,A);return M!==null?this.objects[M]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(A){return A.name})},getLayerIndex:function(A){return A===void 0?this.currentLayerIndex:typeof A=="string"?this.getLayerIndexByName(A):typeof A=="number"&&A<this.layers.length?A:A instanceof y&&A.tilemap===this?A.layerIndex:null},getLayerIndexByName:function(A){return this.getIndex(this.layers,A)},getTileAt:function(A,M,L,P){return P=this.getLayer(P),P===null?null:p.GetTileAt(A,M,L,P)},getTileAtWorldXY:function(A,M,L,P,O){return O=this.getLayer(O),O===null?null:p.GetTileAtWorldXY(A,M,L,P,O)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(A){return A.name})},getTilesWithin:function(A,M,L,P,O,D){return D=this.getLayer(D),D===null?null:p.GetTilesWithin(A,M,L,P,O,D)},getTilesWithinShape:function(A,M,L,P){return P=this.getLayer(P),P===null?null:p.GetTilesWithinShape(A,M,L,P)},getTilesWithinWorldXY:function(A,M,L,P,O,D,I){return I=this.getLayer(I),I===null?null:p.GetTilesWithinWorldXY(A,M,L,P,O,D,I)},getTileset:function(A){var M=this.getIndex(this.tilesets,A);return M!==null?this.tilesets[M]:null},getTilesetIndex:function(A){return this.getIndex(this.tilesets,A)},hasTileAt:function(A,M,L){return L=this.getLayer(L),L===null?null:p.HasTileAt(A,M,L)},hasTileAtWorldXY:function(A,M,L,P){return P=this.getLayer(P),P===null?null:p.HasTileAtWorldXY(A,M,L,P)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(A){this.setLayer(A)}},putTileAt:function(A,M,L,P,O){return P===void 0&&(P=!0),O=this.getLayer(O),O===null?null:p.PutTileAt(A,M,L,P,O)},putTileAtWorldXY:function(A,M,L,P,O,D){return P===void 0&&(P=!0),D=this.getLayer(D),D===null?null:p.PutTileAtWorldXY(A,M,L,P,O,D)},putTilesAt:function(A,M,L,P,O){return P===void 0&&(P=!0),O=this.getLayer(O),O===null?null:(p.PutTilesAt(A,M,L,P,O),this)},randomize:function(A,M,L,P,O,D){return D=this.getLayer(D),D===null?null:(p.Randomize(A,M,L,P,O,D),this)},calculateFacesAt:function(A,M,L){return L=this.getLayer(L),L===null?null:(p.CalculateFacesAt(A,M,L),this)},calculateFacesWithin:function(A,M,L,P,O){return O=this.getLayer(O),O===null?null:(p.CalculateFacesWithin(A,M,L,P,O),this)},removeLayer:function(A){var M=this.getLayerIndex(A);if(M!==null){f(this.layers,M);for(var L=M;L<this.layers.length;L++)this.layers[L].tilemapLayer&&this.layers[L].tilemapLayer.layerIndex--;return this.currentLayerIndex===M&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(A){var M=this.getLayerIndex(A);return M!==null?(A=this.layers[M],A.tilemapLayer.destroy(),f(this.layers,M),this.currentLayerIndex===M&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var A=this.layers,M=0;M<A.length;M++)A[M].tilemapLayer&&A[M].tilemapLayer.destroy(!1);return A.length=0,this.currentLayerIndex=0,this},removeTile:function(A,M,L){M===void 0&&(M=-1),L===void 0&&(L=!0);var P=[];Array.isArray(A)||(A=[A]);for(var O=0;O<A.length;O++){var D=A[O];P.push(this.removeTileAt(D.x,D.y,!0,L,D.tilemapLayer)),M>-1&&this.putTileAt(M,D.x,D.y,L,D.tilemapLayer)}return P},removeTileAt:function(A,M,L,P,O){return L===void 0&&(L=!0),P===void 0&&(P=!0),O=this.getLayer(O),O===null?null:p.RemoveTileAt(A,M,L,P,O)},removeTileAtWorldXY:function(A,M,L,P,O,D){return L===void 0&&(L=!0),P===void 0&&(P=!0),D=this.getLayer(D),D===null?null:p.RemoveTileAtWorldXY(A,M,L,P,O,D)},renderDebug:function(A,M,L){return L=this.getLayer(L),L===null?null:(this.orientation===d.ORTHOGONAL&&p.RenderDebug(A,M,L),this)},renderDebugFull:function(A,M){for(var L=this.layers,P=0;P<L.length;P++)p.RenderDebug(A,M,L[P]);return this},replaceByIndex:function(A,M,L,P,O,D,I){return I=this.getLayer(I),I===null?null:(p.ReplaceByIndex(A,M,L,P,O,D,I),this)},setCollision:function(A,M,L,P,O){return M===void 0&&(M=!0),L===void 0&&(L=!0),O===void 0&&(O=!0),P=this.getLayer(P),P===null?null:(p.SetCollision(A,M,L,P,O),this)},setCollisionBetween:function(A,M,L,P,O){return L===void 0&&(L=!0),P===void 0&&(P=!0),O=this.getLayer(O),O===null?null:(p.SetCollisionBetween(A,M,L,P,O),this)},setCollisionByProperty:function(A,M,L,P){return M===void 0&&(M=!0),L===void 0&&(L=!0),P=this.getLayer(P),P===null?null:(p.SetCollisionByProperty(A,M,L,P),this)},setCollisionByExclusion:function(A,M,L,P){return M===void 0&&(M=!0),L===void 0&&(L=!0),P=this.getLayer(P),P===null?null:(p.SetCollisionByExclusion(A,M,L,P),this)},setCollisionFromCollisionGroup:function(A,M,L){return A===void 0&&(A=!0),M===void 0&&(M=!0),L=this.getLayer(L),L===null?null:(p.SetCollisionFromCollisionGroup(A,M,L),this)},setTileIndexCallback:function(A,M,L,P){return P=this.getLayer(P),P===null?null:(p.SetTileIndexCallback(A,M,L,P),this)},setTileLocationCallback:function(A,M,L,P,O,D,I){return I=this.getLayer(I),I===null?null:(p.SetTileLocationCallback(A,M,L,P,O,D,I),this)},setLayer:function(A){var M=this.getLayerIndex(A);return M!==null&&(this.currentLayerIndex=M),this},setBaseTileSize:function(A,M){this.tileWidth=A,this.tileHeight=M,this.widthInPixels=this.width*A,this.heightInPixels=this.height*M;for(var L=0;L<this.layers.length;L++){this.layers[L].baseTileWidth=A,this.layers[L].baseTileHeight=M;for(var P=this.layers[L].data,O=this.layers[L].width,D=this.layers[L].height,I=0;I<D;I++)for(var F=0;F<O;F++){var H=P[I][F];H!==null&&H.setSize(void 0,void 0,A,M)}}return this},setLayerTileSize:function(A,M,L){if(L=this.getLayer(L),L===null)return this;L.tileWidth=A,L.tileHeight=M;for(var P=L.data,O=L.width,D=L.height,I=0;I<D;I++)for(var F=0;F<O;F++){var H=P[I][F];H!==null&&H.setSize(A,M)}return this},shuffle:function(A,M,L,P,O){return O=this.getLayer(O),O===null?null:(p.Shuffle(A,M,L,P,O),this)},swapByIndex:function(A,M,L,P,O,D,I){return I=this.getLayer(I),I===null?null:(p.SwapByIndex(A,M,L,P,O,D,I),this)},tileToWorldX:function(A,M,L){return L=this.getLayer(L),L===null?null:this._convert.TileToWorldX(A,M,L)},tileToWorldY:function(A,M,L){return L=this.getLayer(L),L===null?null:this._convert.TileToWorldY(A,M,L)},tileToWorldXY:function(A,M,L,P,O){return O=this.getLayer(O),O===null?null:this._convert.TileToWorldXY(A,M,L,P,O)},getTileCorners:function(A,M,L,P){return P=this.getLayer(P),P===null?null:this._convert.GetTileCorners(A,M,L,P)},weightedRandomize:function(A,M,L,P,O,D){return D=this.getLayer(D),D===null?null:(p.WeightedRandomize(M,L,P,O,A,D),this)},worldToTileX:function(A,M,L,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileX(A,M,L,P)},worldToTileY:function(A,M,L,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileY(A,M,L,P)},worldToTileXY:function(A,M,L,P,O,D){return D=this.getLayer(D),D===null?null:this._convert.WorldToTileXY(A,M,L,P,O,D)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});h.exports=C},45939:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(44603),u=e(31989);i.register("tilemap",function(n){var r=n!==void 0?n:{};return u(this.scene,r.key,r.tileWidth,r.tileHeight,r.width,r.height,r.data,r.insertNull)})},46029:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(39429),u=e(31989);i.register("tilemap",function(n,r,a,s,o,d,l){return n===null&&(n=void 0),r===null&&(r=void 0),a===null&&(a=void 0),s===null&&(s=void 0),o===null&&(o=void 0),u(this.scene,n,r,a,s,o,d,l)})},20442:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(78389),n=e(31401),r=e(95643),a=e(81086),s=e(19218),o=e(26099),d=new i({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.Transform,n.Visible,n.ScrollFactor,u,s],initialize:function(f,m,g,p,y,S){r.call(this,f,"TilemapLayer"),this.isTilemap=!0,this.tilemap=m,this.layerIndex=g,this.layer=m.layers[g],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new o,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(p),this.setAlpha(this.layer.alpha),this.setPosition(y,S),this.setOrigin(0,0),this.setSize(m.tileWidth*this.layer.width,m.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(l){var f=[],m=[],g=this.tilemap;Array.isArray(l)||(l=[l]);for(var p=0;p<l.length;p++){var y=l[p];if(typeof y=="string"&&(y=g.getTileset(y)),y){m.push(y);for(var S=y.firstgid,C=0;C<y.total;C++)f[S+C]=y}}this.gidMap=f,this.tileset=m},setRenderOrder:function(l){var f=["right-down","left-down","right-up","left-up"];return typeof l=="string"&&(l=f.indexOf(l)),l>=0&&l<4&&(this._renderOrder=l),this},calculateFacesAt:function(l,f){return a.CalculateFacesAt(l,f,this.layer),this},calculateFacesWithin:function(l,f,m,g){return a.CalculateFacesWithin(l,f,m,g,this.layer),this},createFromTiles:function(l,f,m,g,p){return a.CreateFromTiles(l,f,m,g,p,this.layer)},cull:function(l){return this.cullCallback(this.layer,l,this.culledTiles,this._renderOrder)},copy:function(l,f,m,g,p,y,S){return a.Copy(l,f,m,g,p,y,S,this.layer),this},fill:function(l,f,m,g,p,y){return a.Fill(l,f,m,g,p,y,this.layer),this},filterTiles:function(l,f,m,g,p,y,S){return a.FilterTiles(l,f,m,g,p,y,S,this.layer)},findByIndex:function(l,f,m){return a.FindByIndex(l,f,m,this.layer)},findTile:function(l,f,m,g,p,y,S){return a.FindTile(l,f,m,g,p,y,S,this.layer)},forEachTile:function(l,f,m,g,p,y,S){return a.ForEachTile(l,f,m,g,p,y,S,this.layer),this},setTint:function(l,f,m,g,p,y){l===void 0&&(l=16777215);var S=function(C){C.tint=l,C.tintFill=!1};return this.forEachTile(S,this,f,m,g,p,y)},setTintFill:function(l,f,m,g,p,y){l===void 0&&(l=16777215);var S=function(C){C.tint=l,C.tintFill=!0};return this.forEachTile(S,this,f,m,g,p,y)},getTileAt:function(l,f,m){return a.GetTileAt(l,f,m,this.layer)},getTileAtWorldXY:function(l,f,m,g){return a.GetTileAtWorldXY(l,f,m,g,this.layer)},getIsoTileAtWorldXY:function(l,f,m,g,p){m===void 0&&(m=!0);var y=this.tempVec;return a.IsometricWorldToTileXY(l,f,!0,y,p,this.layer,m),this.getTileAt(y.x,y.y,g)},getTilesWithin:function(l,f,m,g,p){return a.GetTilesWithin(l,f,m,g,p,this.layer)},getTilesWithinShape:function(l,f,m){return a.GetTilesWithinShape(l,f,m,this.layer)},getTilesWithinWorldXY:function(l,f,m,g,p,y){return a.GetTilesWithinWorldXY(l,f,m,g,p,y,this.layer)},hasTileAt:function(l,f){return a.HasTileAt(l,f,this.layer)},hasTileAtWorldXY:function(l,f,m){return a.HasTileAtWorldXY(l,f,m,this.layer)},putTileAt:function(l,f,m,g){return a.PutTileAt(l,f,m,g,this.layer)},putTileAtWorldXY:function(l,f,m,g,p){return a.PutTileAtWorldXY(l,f,m,g,p,this.layer)},putTilesAt:function(l,f,m,g){return a.PutTilesAt(l,f,m,g,this.layer),this},randomize:function(l,f,m,g,p){return a.Randomize(l,f,m,g,p,this.layer),this},removeTileAt:function(l,f,m,g){return a.RemoveTileAt(l,f,m,g,this.layer)},removeTileAtWorldXY:function(l,f,m,g,p){return a.RemoveTileAtWorldXY(l,f,m,g,p,this.layer)},renderDebug:function(l,f){return a.RenderDebug(l,f,this.layer),this},replaceByIndex:function(l,f,m,g,p,y){return a.ReplaceByIndex(l,f,m,g,p,y,this.layer),this},setSkipCull:function(l){return l===void 0&&(l=!0),this.skipCull=l,this},setCullPadding:function(l,f){return l===void 0&&(l=1),f===void 0&&(f=1),this.cullPaddingX=l,this.cullPaddingY=f,this},setCollision:function(l,f,m,g){return a.SetCollision(l,f,m,this.layer,g),this},setCollisionBetween:function(l,f,m,g){return a.SetCollisionBetween(l,f,m,g,this.layer),this},setCollisionByProperty:function(l,f,m){return a.SetCollisionByProperty(l,f,m,this.layer),this},setCollisionByExclusion:function(l,f,m){return a.SetCollisionByExclusion(l,f,m,this.layer),this},setCollisionFromCollisionGroup:function(l,f){return a.SetCollisionFromCollisionGroup(l,f,this.layer),this},setTileIndexCallback:function(l,f,m){return a.SetTileIndexCallback(l,f,m,this.layer),this},setTileLocationCallback:function(l,f,m,g,p,y){return a.SetTileLocationCallback(l,f,m,g,p,y,this.layer),this},shuffle:function(l,f,m,g){return a.Shuffle(l,f,m,g,this.layer),this},swapByIndex:function(l,f,m,g,p,y){return a.SwapByIndex(l,f,m,g,p,y,this.layer),this},tileToWorldX:function(l,f){return this.tilemap.tileToWorldX(l,f,this)},tileToWorldY:function(l,f){return this.tilemap.tileToWorldY(l,f,this)},tileToWorldXY:function(l,f,m,g){return this.tilemap.tileToWorldXY(l,f,m,g,this)},getTileCorners:function(l,f,m){return this.tilemap.getTileCorners(l,f,m,this)},weightedRandomize:function(l,f,m,g,p){return a.WeightedRandomize(f,m,g,p,l,this.layer),this},worldToTileX:function(l,f,m){return this.tilemap.worldToTileX(l,f,m,this)},worldToTileY:function(l,f,m){return this.tilemap.worldToTileY(l,f,m,this)},worldToTileXY:function(l,f,m,g,p){return this.tilemap.worldToTileXY(l,f,m,g,p,this)},destroy:function(l){l===void 0&&(l=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),l&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});h.exports=d},16153:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(61340),u=new i,n=new i,r=new i,a=function(s,o,d,l){var f=o.cull(d),m=f.length,g=d.alpha*o.alpha;if(!(m===0||g<=0)){var p=u,y=n,S=r;y.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),p.copyFrom(d.matrix);var C=s.currentContext,A=o.gidMap;C.save(),l?(p.multiplyWithOffset(l,-d.scrollX*o.scrollFactorX,-d.scrollY*o.scrollFactorY),y.e=o.x,y.f=o.y,p.multiply(y,S),S.copyToContext(C)):(y.e-=d.scrollX*o.scrollFactorX,y.f-=d.scrollY*o.scrollFactorY,y.copyToContext(C)),(!s.antialias||o.scaleX>1||o.scaleY>1)&&(C.imageSmoothingEnabled=!1);for(var M=0;M<m;M++){var L=f[M],P=A[L.index];if(P){var O=P.image.getSourceImage(),D=P.getTileTextureCoordinates(L.index),I=P.tileWidth,F=P.tileHeight;if(!(D===null||I===0||F===0)){var H=I*.5,k=F*.5;D.x+=P.tileOffset.x,D.y+=P.tileOffset.y,C.save(),C.translate(L.pixelX+H,L.pixelY+k),L.rotation!==0&&C.rotate(L.rotation),(L.flipX||L.flipY)&&C.scale(L.flipX?-1:1,L.flipY?-1:1),C.globalAlpha=g*L.alpha,C.drawImage(O,D.x,D.y,I,F,-H,-k,I,F),C.restore()}}}C.restore()}};h.exports=a},19218:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(29747),u=i,n=i;u=e(99558),n=e(16153),h.exports={renderWebGL:u,renderCanvas:n}},99558:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(70554),u=function(n,r,a){var s=r.cull(a),o=s.length,d=a.alpha*r.alpha;if(!(o===0||d<=0)){var l=r.gidMap,f=n.pipelines.set(r.pipeline,r),m=i.getTintAppendFloatAlpha,g=r.scrollFactorX,p=r.scrollFactorY,y=r.x,S=r.y,C=r.scaleX,A=r.scaleY;n.pipelines.preBatch(r);for(var M=0;M<o;M++){var L=s[M],P=l[L.index];if(P){var O=P.getTileTextureCoordinates(L.index),D=P.tileWidth,I=P.tileHeight;if(!(!O||D===0||I===0)){var F=D*.5,H=I*.5,k=P.glTexture,W=f.setTexture2D(k,r),$=D,K=I,Z=O.x,X=O.y,j=P.tileOffset.x,Y=P.tileOffset.y,U=m(L.tint,d*L.alpha);f.batchTexture(r,k,k.width,k.height,y+L.pixelX*C+(F*C-j),S+L.pixelY*A+(H*A-Y),D,I,C,A,L.rotation,L.flipX,L.flipY,g,p,F,H,Z,X,$,K,U,U,U,U,L.tintFill,0,0,a,null,!0,W,!0)}}}n.pipelines.postBatch(r)}};h.exports=u},33629:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(26099),n=new i({initialize:function(a,s,o,d,l,f,m,g,p){(o===void 0||o<=0)&&(o=32),(d===void 0||d<=0)&&(d=32),l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m={}),g===void 0&&(g={}),this.name=a,this.firstgid=s,this.tileWidth=o,this.tileHeight=d,this.tileMargin=l,this.tileSpacing=f,this.tileProperties=m,this.tileData=g,this.tileOffset=new u,p!==void 0&&this.tileOffset.set(p.x,p.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(r){return this.containsTileIndex(r)?this.tileProperties[r-this.firstgid]:null},getTileData:function(r){return this.containsTileIndex(r)?this.tileData[r-this.firstgid]:null},getTileCollisionGroup:function(r){var a=this.getTileData(r);return a&&a.objectgroup?a.objectgroup:null},containsTileIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},getTileTextureCoordinates:function(r){return this.containsTileIndex(r)?this.texCoordinates[r-this.firstgid]:null},setImage:function(r){this.image=r;var a=r.get(),s=r.getFrameBounds();return this.glTexture=a.source.glTexture,a.width>s.width||a.height>s.height?this.updateTileData(a.width,a.height):this.updateTileData(s.width,s.height,s.x,s.y),this},setTileSize:function(r,a){return r!==void 0&&(this.tileWidth=r),a!==void 0&&(this.tileHeight=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(r,a){return r!==void 0&&(this.tileMargin=r),a!==void 0&&(this.tileSpacing=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(r,a,s,o){s===void 0&&(s=0),o===void 0&&(o=0);var d=(a-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),l=(r-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(d%1!==0||l%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),d=Math.floor(d),l=Math.floor(l),this.rows=d,this.columns=l,this.total=d*l,this.texCoordinates.length=0;for(var f=this.tileMargin+s,m=this.tileMargin+o,g=0;g<this.rows;g++){for(var p=0;p<this.columns;p++)this.texCoordinates.push({x:f,y:m}),f+=this.tileWidth+this.tileSpacing;f=this.tileMargin+s,m+=this.tileHeight+this.tileSpacing}return this}});h.exports=n},72023:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7423),u=function(n,r,a){var s=i(n,r,!0,a),o=i(n,r-1,!0,a),d=i(n,r+1,!0,a),l=i(n-1,r,!0,a),f=i(n+1,r,!0,a),m=s&&s.collides;return m&&(s.faceTop=!0,s.faceBottom=!0,s.faceLeft=!0,s.faceRight=!0),o&&o.collides&&(m&&(s.faceTop=!1),o.faceBottom=!m),d&&d.collides&&(m&&(s.faceBottom=!1),d.faceTop=!m),l&&l.collides&&(m&&(s.faceLeft=!1),l.faceRight=!m),f&&f.collides&&(m&&(s.faceRight=!1),f.faceLeft=!m),s&&!s.collides&&s.resetFaces(),s};h.exports=u},42573:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7423),u=e(7386),n=function(r,a,s,o,d){for(var l=null,f=null,m=null,g=null,p=u(r,a,s,o,null,d),y=0;y<p.length;y++){var S=p[y];S&&(S.collides?(l=i(S.x,S.y-1,!0,d),f=i(S.x,S.y+1,!0,d),m=i(S.x-1,S.y,!0,d),g=i(S.x+1,S.y,!0,d),S.faceTop=!(l&&l.collides),S.faceBottom=!(f&&f.collides),S.faceLeft=!(m&&m.collides),S.faceRight=!(g&&g.collides)):S.resetFaces())}};h.exports=n},33528:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099),u=new i,n=function(r,a,s,o){var d=s.tilemapLayer,l=d.cullPaddingX,f=d.cullPaddingY,m=d.tilemap.tileToWorldXY(r,a,u,o,d);return m.x>o.worldView.x+d.scaleX*s.tileWidth*(-l-.5)&&m.x<o.worldView.right+d.scaleX*s.tileWidth*(l-.5)&&m.y>o.worldView.y+d.scaleY*s.tileHeight*(-f-1)&&m.y<o.worldView.bottom+d.scaleY*s.tileHeight*(f-.5)};h.exports=n},1785:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(42573),u=e(7386),n=e(62991),r=e(23029),a=function(s,o,d,l,f,m,g,p){g===void 0&&(g=!0);var y=u(s,o,d,l,null,p),S=[];y.forEach(function(D){var I=new r(D.layer,D.index,D.x,D.y,D.width,D.height,D.baseWidth,D.baseHeight);I.copy(D),S.push(I)});for(var C=f-s,A=m-o,M=0;M<S.length;M++){var L=S[M],P=L.x+C,O=L.y+A;n(P,O,p)&&p.data[O][P]&&(L.x=P,L.y=O,L.updatePixelXY(),p.data[O][P]=L)}g&&i(f-1,m-1,d+2,l+2,p),y.length=0,S.length=0};h.exports=a},78419:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62644),u=e(7386),n=e(27987),r=function(a,s,o,d,l,f){o||(o={}),Array.isArray(a)||(a=[a]);var m=f.tilemapLayer;d||(d=m.scene),l||(l=d.cameras.main);var g=f.width,p=f.height,y=u(0,0,g,p,null,f),S=[],C,A=function(O,D,I){for(var F=0;F<I.length;F++){var H=I[F];O.hasOwnProperty(H)||(O[H]=D[H])}};for(C=0;C<y.length;C++){var M=y[C],L=i(o);if(a.indexOf(M.index)!==-1){var P=m.tileToWorldXY(M.x,M.y,void 0,l,f);L.x=P.x,L.y=P.y,A(L,M,["rotation","flipX","flipY","alpha","visible","tint"]),L.hasOwnProperty("origin")||(L.x+=M.width*.5,L.y+=M.height*.5),L.hasOwnProperty("useSpriteSheet")&&(L.key=M.tileset.image,L.frame=M.index-1),S.push(d.make.sprite(L))}}if(Array.isArray(s))for(C=0;C<a.length;C++)n(a[C],s[C],0,0,g,p,f);else if(s!==null)for(C=0;C<a.length;C++)n(a[C],s,0,0,g,p,f);return S};h.exports=r},19545:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(87841),u=e(63448),n=e(56583),r=new i,a=function(s,o){var d=s.tilemapLayer.tilemap,l=s.tilemapLayer,f=Math.floor(d.tileWidth*l.scaleX),m=Math.floor(d.tileHeight*l.scaleY),g=n(o.worldView.x-l.x,f,0,!0)-l.cullPaddingX,p=u(o.worldView.right-l.x,f,0,!0)+l.cullPaddingX,y=n(o.worldView.y-l.y,m,0,!0)-l.cullPaddingY,S=u(o.worldView.bottom-l.y,m,0,!0)+l.cullPaddingY;return r.setTo(g,y,p-g,S-y)};h.exports=a},30003:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(19545),u=e(32483),n=function(r,a,s,o){s===void 0&&(s=[]),o===void 0&&(o=0),s.length=0;var d=r.tilemapLayer,l=i(r,a);return(d.skipCull||d.scrollFactorX!==1||d.scrollFactorY!==1)&&(l.left=0,l.right=r.width,l.top=0,l.bottom=r.height),u(r,l,o,s),s};h.exports=n},35137:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7386),u=e(42573),n=e(20576),r=function(a,s,o,d,l,f,m){for(var g=m.collideIndexes.indexOf(a)!==-1,p=i(s,o,d,l,null,m),y=0;y<p.length;y++)p[y].index=a,n(p[y],g);f&&u(s-1,o-1,d+2,l+2,m)};h.exports=r},40253:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7386),u=function(n,r,a,s,o,d,l,f){var m=i(a,s,o,d,l,f);return m.filter(n,r)};h.exports=u},52692:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){i===void 0&&(i=0),u===void 0&&(u=!1);var r=0,a,s,o;if(u){for(s=n.height-1;s>=0;s--)for(a=n.width-1;a>=0;a--)if(o=n.data[s][a],o&&o.index===e){if(r===i)return o;r+=1}}else for(s=0;s<n.height;s++)for(a=0;a<n.width;a++)if(o=n.data[s][a],o&&o.index===e){if(r===i)return o;r+=1}return null};h.exports=w},66151:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7386),u=function(n,r,a,s,o,d,l,f){var m=i(a,s,o,d,l,f);return m.find(n,r)||null};h.exports=u},97560:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7386),u=function(n,r,a,s,o,d,l,f){var m=i(a,s,o,d,l,f);m.forEach(n,r)};h.exports=u},43305:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91907),u=e(30003),n=e(9474),r=e(14018),a=e(29747),s=e(54503),o=function(d){return d===i.ORTHOGONAL?u:d===i.HEXAGONAL?n:d===i.STAGGERED?s:d===i.ISOMETRIC?r:a};h.exports=o},7423:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62991),u=function(n,r,a,s){if(i(n,r,s)){var o=s.data[r][n]||null;return o?o.index===-1?a?o:null:o:null}else return null};h.exports=u},60540:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7423),u=e(26099),n=new u,r=function(a,s,o,d,l){return l.tilemapLayer.worldToTileXY(a,s,!0,n,d),i(n.x,n.y,o,l)};h.exports=r},55826:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099),u=function(n,r,a,s){var o=s.baseTileWidth,d=s.baseTileHeight,l=s.tilemapLayer,f=0,m=0;l&&(a||(a=l.scene.cameras.main),f=l.x+a.scrollX*(1-l.scrollFactorX),m=l.y+a.scrollY*(1-l.scrollFactorY),o*=l.scaleX,d*=l.scaleY);var g=f+n*o,p=m+r*d;return[new i(g,p),new i(g+o,p),new i(g+o,p+d),new i(g,p+d)]};h.exports=u},11758:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91907),u=e(27229),n=e(29747),r=e(55826),a=function(s){return s===i.ORTHOGONAL?r:s===i.ISOMETRIC?n:s===i.HEXAGONAL?u:(s===i.STAGGERED,n)};h.exports=a},39167:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91907),u=e(29747),n=e(97281),r=function(a){return a===i.ORTHOGONAL?n:u};h.exports=r},62e3:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91907),u=e(19951),n=e(14127),r=e(29747),a=e(97202),s=e(70326),o=function(d){return d===i.ORTHOGONAL?s:d===i.ISOMETRIC?n:d===i.HEXAGONAL?u:d===i.STAGGERED?a:r};h.exports=o},5984:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91907),u=e(29747),n=e(28054),r=e(29650),a=function(s){return s===i.ORTHOGONAL?r:s===i.STAGGERED?n:u};h.exports=a},7386:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(95540),u=function(n,r,a,s,o,d){n===void 0&&(n=0),r===void 0&&(r=0),a===void 0&&(a=d.width),s===void 0&&(s=d.height),o||(o={});var l=i(o,"isNotEmpty",!1),f=i(o,"isColliding",!1),m=i(o,"hasInterestingFace",!1);n<0&&(a+=n,n=0),r<0&&(s+=r,r=0),n+a>d.width&&(a=Math.max(d.width-n,0)),r+s>d.height&&(s=Math.max(d.height-r,0));for(var g=[],p=r;p<r+s;p++)for(var y=n;y<n+a;y++){var S=d.data[p][y];if(S!==null){if(l&&S.index===-1||f&&!S.collides||m&&!S.hasInterestingFace)continue;g.push(S)}}return g};h.exports=u},91141:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(55738),u=e(7386),n=e(91865),r=e(29747),a=e(26099),s=function(m,g){return n.RectangleToTriangle(g,m)},o=new a,d=new a,l=new a,f=function(m,g,p,y){if(m===void 0)return[];var S=r;m instanceof i.Circle?S=n.CircleToRectangle:m instanceof i.Rectangle?S=n.RectangleToRectangle:m instanceof i.Triangle?S=s:m instanceof i.Line&&(S=n.LineToRectangle),y.tilemapLayer.worldToTileXY(m.left,m.top,!0,d,p);var C=d.x,A=d.y;y.tilemapLayer.worldToTileXY(m.right,m.bottom,!1,l,p);var M=Math.ceil(l.x),L=Math.ceil(l.y),P=Math.max(M-C,1),O=Math.max(L-A,1),D=u(C,A,P,O,g,y),I=y.tileWidth,F=y.tileHeight;y.tilemapLayer&&(I*=y.tilemapLayer.scaleX,F*=y.tilemapLayer.scaleY);for(var H=[],k=new i.Rectangle(0,0,I,F),W=0;W<D.length;W++){var $=D[W];y.tilemapLayer.tileToWorldXY($.x,$.y,o,p),k.x=o.x,k.y=o.y,S(m,k)&&H.push($)}return H};h.exports=f},96523:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7386),u=e(26099),n=new u,r=new u,a=function(s,o,d,l,f,m,g){var p=g.tilemapLayer.tilemap._convert.WorldToTileXY;p(s,o,!0,n,m,g);var y=n.x,S=n.y;p(s+d,o+l,!1,r,m,g);var C=Math.ceil(r.x),A=Math.ceil(r.y);return i(y,S,C-y,A-S,f,g)};h.exports=a},96113:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91907),u=e(20242),n=e(10095),r=function(a){return a===i.ORTHOGONAL?n:u};h.exports=r},16926:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91907),u=e(86625),n=e(96897),r=e(29747),a=e(15108),s=e(85896),o=function(d){return d===i.ORTHOGONAL?s:d===i.ISOMETRIC?n:d===i.HEXAGONAL?u:d===i.STAGGERED?a:r};h.exports=o},55762:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91907),u=e(20242),n=e(51900),r=e(63288),a=function(s){return s===i.ORTHOGONAL?r:s===i.STAGGERED?n:u};h.exports=a},45091:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62991),u=function(n,r,a){if(i(n,r,a)){var s=a.data[r][n];return s!==null&&s.index>-1}else return!1};h.exports=u},24152:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(45091),u=e(26099),n=new u,r=function(a,s,o,d){d.tilemapLayer.worldToTileXY(a,s,!0,n,o);var l=n.x,f=n.y;return i(l,f,d)};h.exports=r},90454:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(63448),u=e(56583),n=function(r,a){var s=r.tilemapLayer.tilemap,o=r.tilemapLayer,d=Math.floor(s.tileWidth*o.scaleX),l=Math.floor(s.tileHeight*o.scaleY),f=r.hexSideLength,m,g,p,y;if(r.staggerAxis==="y"){var S=(l-f)/2+f;m=u(a.worldView.x-o.x,d,0,!0)-o.cullPaddingX,g=i(a.worldView.right-o.x,d,0,!0)+o.cullPaddingX,p=u(a.worldView.y-o.y,S,0,!0)-o.cullPaddingY,y=i(a.worldView.bottom-o.y,S,0,!0)+o.cullPaddingY}else{var C=(d-f)/2+f;m=u(a.worldView.x-o.x,C,0,!0)-o.cullPaddingX,g=i(a.worldView.right-o.x,C,0,!0)+o.cullPaddingX,p=u(a.worldView.y-o.y,l,0,!0)-o.cullPaddingY,y=i(a.worldView.bottom-o.y,l,0,!0)+o.cullPaddingY}return{left:m,right:g,top:p,bottom:y}};h.exports=n},9474:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(90454),u=e(32483),n=function(r,a,s,o){s===void 0&&(s=[]),o===void 0&&(o=0),s.length=0;var d=r.tilemapLayer,l=i(r,a);return d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1&&(l.left=0,l.right=r.width,l.top=0,l.bottom=r.height),u(r,l,o,s),s};h.exports=n},27229:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(19951),u=e(26099),n=new u,r=function(a,s,o,d){var l=d.baseTileWidth,f=d.baseTileHeight,m=d.tilemapLayer;m&&(l*=m.scaleX,f*=m.scaleY);var g=i(a,s,n,o,d),p=[],y=.5773502691896257,S,C;d.staggerAxis==="y"?(S=y*l,C=f/2):(S=l/2,C=y*f);for(var A=0;A<6;A++){var M=2*Math.PI*(.5-A)/6;p.push(new u(g.x+S*Math.cos(M),g.y+C*Math.sin(M)))}return p};h.exports=r},19951:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099),u=function(n,r,a,s,o){a||(a=new i);var d=o.baseTileWidth,l=o.baseTileHeight,f=o.tilemapLayer,m=0,g=0;f&&(s||(s=f.scene.cameras.main),m=f.x+s.scrollX*(1-f.scrollFactorX),g=f.y+s.scrollY*(1-f.scrollFactorY),d*=f.scaleX,l*=f.scaleY);var p=d/2,y=l/2,S,C,A=o.staggerAxis,M=o.staggerIndex;return A==="y"?(S=m+d*n+d,C=g+1.5*r*y+y,r%2===0&&(M==="odd"?S-=p:S+=p)):A==="x"&&M==="odd"&&(S=m+1.5*n*p+p,C=g+l*n+l,n%2===0&&(M==="odd"?C-=y:C+=y)),a.set(S,C)};h.exports=u},86625:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099),u=function(n,r,a,s,o,d){s||(s=new i);var l=d.baseTileWidth,f=d.baseTileHeight,m=d.tilemapLayer;m&&(o||(o=m.scene.cameras.main),n=n-(m.x+o.scrollX*(1-m.scrollFactorX)),r=r-(m.y+o.scrollY*(1-m.scrollFactorY)),l*=m.scaleX,f*=m.scaleY);var g=.5773502691896257,p=-.3333333333333333,y=0,S=.6666666666666666,C=l/2,A=f/2,M,L,P,O,D;d.staggerAxis==="y"?(M=(n-C)/(g*l),L=(r-A)/A,P=g*M+p*L,O=y*M+S*L):(M=(n-C)/C,L=(r-A)/(g*f),P=p*M+g*L,O=S*M+y*L),D=-P-O;var I=Math.round(P),F=Math.round(O),H=Math.round(D),k=Math.abs(I-P),W=Math.abs(F-O),$=Math.abs(H-D);k>W&&k>$?I=-F-H:W>$&&(F=-I-H);var K,Z=F;return d.staggerIndex==="odd"?K=Z%2===0?F/2+I:F/2+I-.5:K=Z%2===0?F/2+I:F/2+I+.5,s.set(K,Z)};h.exports=u},62991:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return e>=0&&e<u.width&&i>=0&&i<u.height};h.exports=w},14018:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(33528),u=function(n,r,a,s){a===void 0&&(a=[]),s===void 0&&(s=0),a.length=0;var o=n.tilemapLayer,d=n.data,l=n.width,f=n.height,m=o.skipCull,g=0,p=l,y=0,S=f,C,A,M;if(s===0)for(A=y;A<S;A++)for(C=g;C<p;C++)M=d[A][C],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!m&&!i(C,A,n,r)||a.push(M));else if(s===1)for(A=y;A<S;A++)for(C=p;C>=g;C--)M=d[A][C],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!m&&!i(C,A,n,r)||a.push(M));else if(s===2)for(A=S;A>=y;A--)for(C=g;C<p;C++)M=d[A][C],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!m&&!i(C,A,n,r)||a.push(M));else if(s===3)for(A=S;A>=y;A--)for(C=p;C>=g;C--)M=d[A][C],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!m&&!i(C,A,n,r)||a.push(M));return o.tilesDrawn=a.length,o.tilesTotal=l*f,a};h.exports=u},14127:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099),u=function(n,r,a,s,o){a||(a=new i);var d=o.baseTileWidth,l=o.baseTileHeight,f=o.tilemapLayer,m=0,g=0;f&&(s||(s=f.scene.cameras.main),m=f.x+s.scrollX*(1-f.scrollFactorX),d*=f.scaleX,g=f.y+s.scrollY*(1-f.scrollFactorY),l*=f.scaleY);var p=m+(n-r)*(d/2),y=g+(n+r)*(l/2);return a.set(p,y)};h.exports=u},96897:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099),u=function(n,r,a,s,o,d,l){s||(s=new i);var f=d.baseTileWidth,m=d.baseTileHeight,g=d.tilemapLayer;g&&(o||(o=g.scene.cameras.main),r=r-(g.y+o.scrollY*(1-g.scrollFactorY)),m*=g.scaleY,n=n-(g.x+o.scrollX*(1-g.scrollFactorX)),f*=g.scaleX);var p=f/2,y=m/2;n=n-p,l||(r=r-m);var S=.5*(n/p+r/y),C=.5*(-n/p+r/y);return a&&(S=Math.floor(S),C=Math.floor(C)),s.set(S,C)};h.exports=u},71558:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(23029),u=e(62991),n=e(72023),r=e(20576),a=function(s,o,d,l,f){if(l===void 0&&(l=!0),!u(o,d,f))return null;var m,g=f.data[d][o],p=g&&g.collides;s instanceof i?(f.data[d][o]===null&&(f.data[d][o]=new i(f,s.index,o,d,f.tileWidth,f.tileHeight)),f.data[d][o].copy(s)):(m=s,f.data[d][o]===null?f.data[d][o]=new i(f,m,o,d,f.tileWidth,f.tileHeight):f.data[d][o].index=m);var y=f.data[d][o],S=f.collideIndexes.indexOf(y.index)!==-1;if(m=s instanceof i?s.index:s,m===-1)y.width=f.tileWidth,y.height=f.tileHeight;else{var C=f.tilemapLayer.tilemap,A=C.tiles,M=A[m][2],L=C.tilesets[M];y.width=L.tileWidth,y.height=L.tileHeight}return r(y,S),l&&p!==y.collides&&n(o,d,f),y};h.exports=a},26303:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(71558),u=e(26099),n=new u,r=function(a,s,o,d,l,f){return f.tilemapLayer.worldToTileXY(s,o,!0,n,l,f),i(a,n.x,n.y,d,f)};h.exports=r},14051:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(42573),u=e(71558),n=function(r,a,s,o,d){if(o===void 0&&(o=!0),!Array.isArray(r))return null;Array.isArray(r[0])||(r=[r]);for(var l=r.length,f=r[0].length,m=0;m<l;m++)for(var g=0;g<f;g++){var p=r[m][g];u(p,a+g,s+m,!1,d)}o&&i(a-1,s-1,f+2,l+2,d)};h.exports=n},77389:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7386),u=e(26546),n=function(r,a,s,o,d,l){var f,m=i(r,a,s,o,{},l);if(!d)for(d=[],f=0;f<m.length;f++)d.indexOf(m[f].index)===-1&&d.push(m[f].index);for(f=0;f<m.length;f++)m[f].index=u(d)};h.exports=n},63557:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(23029),u=e(62991),n=e(72023),r=function(a,s,o,d,l){if(o===void 0&&(o=!0),d===void 0&&(d=!0),!u(a,s,l))return null;var f=l.data[s][a];if(f)l.data[s][a]=o?null:new i(l,-1,a,s,l.tileWidth,l.tileHeight);else return null;return d&&f&&f.collides&&n(a,s,l),f};h.exports=r},94178:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(63557),u=e(26099),n=new u,r=function(a,s,o,d,l,f){return f.tilemapLayer.worldToTileXY(a,s,!0,n,l,f),i(n.x,n.y,o,d,f)};h.exports=r},15533:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7386),u=e(3956),n=new u(105,210,231,150),r=new u(243,134,48,200),a=new u(40,39,37,150),s=function(o,d,l){d===void 0&&(d={});var f=d.tileColor!==void 0?d.tileColor:n,m=d.collidingTileColor!==void 0?d.collidingTileColor:r,g=d.faceColor!==void 0?d.faceColor:a,p=i(0,0,l.width,l.height,null,l);o.translateCanvas(l.tilemapLayer.x,l.tilemapLayer.y),o.scaleCanvas(l.tilemapLayer.scaleX,l.tilemapLayer.scaleY);for(var y=0;y<p.length;y++){var S=p[y],C=S.width,A=S.height,M=S.pixelX,L=S.pixelY,P=S.collides?m:f;P!==null&&(o.fillStyle(P.color,P.alpha/255),o.fillRect(M,L,C,A)),M+=1,L+=1,C-=2,A-=2,g!==null&&(o.lineStyle(1,g.color,g.alpha/255),S.faceTop&&o.lineBetween(M,L,M+C,L),S.faceRight&&o.lineBetween(M+C,L,M+C,L+A),S.faceBottom&&o.lineBetween(M,L+A,M+C,L+A),S.faceLeft&&o.lineBetween(M,L,M,L+A))}};h.exports=s},27987:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7386),u=function(n,r,a,s,o,d,l){for(var f=i(a,s,o,d,null,l),m=0;m<f.length;m++)f[m]&&f[m].index===n&&(f[m].index=r)};h.exports=u},32483:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r=e.data,a=e.width,s=e.height,o=e.tilemapLayer,d=Math.max(0,i.left),l=Math.min(a,i.right),f=Math.max(0,i.top),m=Math.min(s,i.bottom),g,p,y;if(u===0)for(p=f;p<m;p++)for(g=d;r[p]&&g<l;g++)y=r[p][g],!(!y||y.index===-1||!y.visible||y.alpha===0)&&n.push(y);else if(u===1)for(p=f;p<m;p++)for(g=l;r[p]&&g>=d;g--)y=r[p][g],!(!y||y.index===-1||!y.visible||y.alpha===0)&&n.push(y);else if(u===2)for(p=m;p>=f;p--)for(g=d;r[p]&&g<l;g++)y=r[p][g],!(!y||y.index===-1||!y.visible||y.alpha===0)&&n.push(y);else if(u===3)for(p=m;p>=f;p--)for(g=l;r[p]&&g>=d;g--)y=r[p][g],!(!y||y.index===-1||!y.visible||y.alpha===0)&&n.push(y);return o.tilesDrawn=n.length,o.tilesTotal=a*s,n};h.exports=w},57068:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(20576),u=e(42573),n=e(9589),r=function(a,s,o,d,l){s===void 0&&(s=!0),o===void 0&&(o=!0),l===void 0&&(l=!0),Array.isArray(a)||(a=[a]);for(var f=0;f<a.length;f++)n(a[f],s,d);if(l)for(var m=0;m<d.height;m++)for(var g=0;g<d.width;g++){var p=d.data[m][g];p&&a.indexOf(p.index)!==-1&&i(p,s)}o&&u(0,0,d.width,d.height,d)};h.exports=r},37266:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(20576),u=e(42573),n=e(9589),r=function(a,s,o,d,l,f){if(o===void 0&&(o=!0),d===void 0&&(d=!0),f===void 0&&(f=!0),!(a>s)){for(var m=a;m<=s;m++)n(m,o,l);if(f)for(var g=0;g<l.height;g++)for(var p=0;p<l.width;p++){var y=l.data[g][p];y&&y.index>=a&&y.index<=s&&i(y,o)}d&&u(0,0,l.width,l.height,l)}};h.exports=r},75661:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(20576),u=e(42573),n=e(9589),r=function(a,s,o,d){s===void 0&&(s=!0),o===void 0&&(o=!0),Array.isArray(a)||(a=[a]);for(var l=0;l<d.height;l++)for(var f=0;f<d.width;f++){var m=d.data[l][f];m&&a.indexOf(m.index)===-1&&(i(m,s),n(m.index,s,d))}o&&u(0,0,d.width,d.height,d)};h.exports=r},64740:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(20576),u=e(42573),n=e(97022),r=function(a,s,o,d){s===void 0&&(s=!0),o===void 0&&(o=!0);for(var l=0;l<d.height;l++)for(var f=0;f<d.width;f++){var m=d.data[l][f];if(m){for(var g in a)if(n(m.properties,g)){var p=a[g];Array.isArray(p)||(p=[p]);for(var y=0;y<p.length;y++)m.properties[g]===p[y]&&i(m,s)}}}o&&u(0,0,d.width,d.height,d)};h.exports=r},63307:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(20576),u=e(42573),n=function(r,a,s){r===void 0&&(r=!0),a===void 0&&(a=!0);for(var o=0;o<s.height;o++)for(var d=0;d<s.width;d++){var l=s.data[o][d];if(l){var f=l.getCollisionGroup();f&&f.objects&&f.objects.length>0&&i(l,r)}}a&&u(0,0,s.width,s.height,s)};h.exports=n},9589:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=u.collideIndexes.indexOf(e);i&&n===-1?u.collideIndexes.push(e):!i&&n!==-1&&u.collideIndexes.splice(n,1)};h.exports=w},20576:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};h.exports=w},79583:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){if(typeof e=="number")n.callbacks[e]=i!==null?{callback:i,callbackContext:u}:void 0;else for(var r=0,a=e.length;r<a;r++)n.callbacks[e[r]]=i!==null?{callback:i,callbackContext:u}:void 0};h.exports=w},93254:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7386),u=function(n,r,a,s,o,d,l){for(var f=i(n,r,a,s,null,l),m=0;m<f.length;m++)f[m].setCollisionCallback(o,d)};h.exports=u},32903:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7386),u=e(33680),n=function(r,a,s,o,d){var l=i(r,a,s,o,null,d),f=l.map(function(g){return g.index});u(f);for(var m=0;m<l.length;m++)l[m].index=f[m]};h.exports=n},61325:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(63448),u=e(56583),n=function(r,a){var s=r.tilemapLayer.tilemap,o=r.tilemapLayer,d=Math.floor(s.tileWidth*o.scaleX),l=Math.floor(s.tileHeight*o.scaleY),f=u(a.worldView.x-o.x,d,0,!0)-o.cullPaddingX,m=i(a.worldView.right-o.x,d,0,!0)+o.cullPaddingX,g=u(a.worldView.y-o.y,l/2,0,!0)-o.cullPaddingY,p=i(a.worldView.bottom-o.y,l/2,0,!0)+o.cullPaddingY;return{left:f,right:m,top:g,bottom:p}};h.exports=n},54503:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(61325),u=e(32483),n=function(r,a,s,o){s===void 0&&(s=[]),o===void 0&&(o=0),s.length=0;var d=r.tilemapLayer,l=i(r,a);return d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1&&(l.left=0,l.right=r.width,l.top=0,l.bottom=r.height),u(r,l,o,s),s};h.exports=n},97202:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099),u=function(n,r,a,s,o){a||(a=new i);var d=o.baseTileWidth,l=o.baseTileHeight,f=o.tilemapLayer,m=0,g=0;f&&(s||(s=f.scene.cameras.main),m=f.x+s.scrollX*(1-f.scrollFactorX),d*=f.scaleX,g=f.y+s.scrollY*(1-f.scrollFactorY),l*=f.scaleY);var p=m+n*d+r%2*(d/2),y=g+r*(l/2);return a.set(p,y)};h.exports=u},28054:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=u.baseTileHeight,r=u.tilemapLayer,a=0;return r&&(i===void 0&&(i=r.scene.cameras.main),a=r.y+i.scrollY*(1-r.scrollFactorY),n*=r.scaleY),a+e*(n/2)+n};h.exports=w},15108:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099),u=function(n,r,a,s,o,d){s||(s=new i);var l=d.baseTileWidth,f=d.baseTileHeight,m=d.tilemapLayer;m&&(o||(o=m.scene.cameras.main),r=r-(m.y+o.scrollY*(1-m.scrollFactorY)),f*=m.scaleY,n=n-(m.x+o.scrollX*(1-m.scrollFactorX)),l*=m.scaleX);var g=a?Math.floor(r/(f/2)):r/(f/2),p=a?Math.floor((n+g%2*.5*l)/l):(n+g%2*.5*l)/l;return s.set(p,g)};h.exports=u},51900:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r=n.baseTileHeight,a=n.tilemapLayer;return a&&(u||(u=a.scene.cameras.main),e=e-(a.y+u.scrollY*(1-a.scrollFactorY)),r*=a.scaleY),i?Math.floor(e/(r/2)):e/(r/2)};h.exports=w},86560:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7386),u=function(n,r,a,s,o,d,l){for(var f=i(a,s,o,d,null,l),m=0;m<f.length;m++)f[m]&&(f[m].index===n?f[m].index=r:f[m].index===r&&(f[m].index=n))};h.exports=u},97281:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=u.baseTileWidth,r=u.tilemapLayer,a=0;return r&&(i||(i=r.scene.cameras.main),a=r.x+i.scrollX*(1-r.scrollFactorX),n*=r.scaleX),a+e*n};h.exports=w},70326:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(97281),u=e(29650),n=e(26099),r=function(a,s,o,d,l){return o||(o=new n(0,0)),o.x=i(a,d,l),o.y=u(s,d,l),o};h.exports=r},29650:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=u.baseTileHeight,r=u.tilemapLayer,a=0;return r&&(i||(i=r.scene.cameras.main),a=r.y+i.scrollY*(1-r.scrollFactorY),n*=r.scaleY),a+e*n};h.exports=w},77366:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(7386),u=e(75508),n=function(r,a,s,o,d,l){if(d){var f,m=i(r,a,s,o,null,l),g=0;for(f=0;f<d.length;f++)g+=d[f].weight;if(!(g<=0))for(f=0;f<m.length;f++){for(var p=u.RND.frac()*g,y=0,S=-1,C=0;C<d.length;C++)if(y+=d[C].weight,p<=y){var A=d[C].index;S=Array.isArray(A)?A[Math.floor(u.RND.frac()*A.length)]:A;break}m[f].index=S}}};h.exports=n},10095:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(85896),u=e(26099),n=new u,r=function(a,s,o,d){return i(a,0,s,n,o,d),n.x};h.exports=r},85896:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(26099),u=function(n,r,a,s,o,d){a===void 0&&(a=!0),s||(s=new i);var l=d.baseTileWidth,f=d.baseTileHeight,m=d.tilemapLayer;m&&(o||(o=m.scene.cameras.main),n=n-(m.x+o.scrollX*(1-m.scrollFactorX)),r=r-(m.y+o.scrollY*(1-m.scrollFactorY)),l*=m.scaleX,f*=m.scaleY);var g=n/l,p=r/f;return a&&(g=Math.floor(g),p=Math.floor(p)),s.set(g,p)};h.exports=u},63288:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(85896),u=e(26099),n=new u,r=function(a,s,o,d){return i(0,a,s,n,o,d),n.y};h.exports=r},81086:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CalculateFacesAt:e(72023),CalculateFacesWithin:e(42573),CheckIsoBounds:e(33528),Copy:e(1785),CreateFromTiles:e(78419),CullBounds:e(19545),CullTiles:e(30003),Fill:e(35137),FilterTiles:e(40253),FindByIndex:e(52692),FindTile:e(66151),ForEachTile:e(97560),GetCullTilesFunction:e(43305),GetTileAt:e(7423),GetTileAtWorldXY:e(60540),GetTileCorners:e(55826),GetTileCornersFunction:e(11758),GetTilesWithin:e(7386),GetTilesWithinShape:e(91141),GetTilesWithinWorldXY:e(96523),GetTileToWorldXFunction:e(39167),GetTileToWorldXYFunction:e(62e3),GetTileToWorldYFunction:e(5984),GetWorldToTileXFunction:e(96113),GetWorldToTileXYFunction:e(16926),GetWorldToTileYFunction:e(55762),HasTileAt:e(45091),HasTileAtWorldXY:e(24152),HexagonalCullBounds:e(90454),HexagonalCullTiles:e(9474),HexagonalGetTileCorners:e(27229),HexagonalTileToWorldXY:e(19951),HexagonalWorldToTileXY:e(86625),IsInLayerBounds:e(62991),IsometricCullTiles:e(14018),IsometricTileToWorldXY:e(14127),IsometricWorldToTileXY:e(96897),PutTileAt:e(71558),PutTileAtWorldXY:e(26303),PutTilesAt:e(14051),Randomize:e(77389),RemoveTileAt:e(63557),RemoveTileAtWorldXY:e(94178),RenderDebug:e(15533),ReplaceByIndex:e(27987),RunCull:e(32483),SetCollision:e(57068),SetCollisionBetween:e(37266),SetCollisionByExclusion:e(75661),SetCollisionByProperty:e(64740),SetCollisionFromCollisionGroup:e(63307),SetLayerCollisionIndex:e(9589),SetTileCollision:e(20576),SetTileIndexCallback:e(79583),SetTileLocationCallback:e(93254),Shuffle:e(32903),StaggeredCullBounds:e(61325),StaggeredCullTiles:e(54503),StaggeredTileToWorldXY:e(97202),StaggeredTileToWorldY:e(28054),StaggeredWorldToTileXY:e(15108),StaggeredWorldToTileY:e(51900),SwapByIndex:e(86560),TileToWorldX:e(97281),TileToWorldXY:e(70326),TileToWorldY:e(29650),WeightedRandomize:e(77366),WorldToTileX:e(10095),WorldToTileXY:e(85896),WorldToTileY:e(63288)}},91907:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={ORIENTATION:e(91907)};h.exports=i},62501:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(79291),u=e(21829),n={Components:e(81086),Parsers:e(57442),Formats:e(80341),ImageCollection:e(16536),ParseToTilemap:e(31989),Tile:e(23029),Tilemap:e(49075),TilemapCreator:e(45939),TilemapFactory:e(46029),Tileset:e(33629),TilemapLayer:e(20442),Orientation:e(91907),LayerData:e(14977),MapData:e(87010),ObjectLayer:e(48700)};n=i(!1,n,u.ORIENTATION),h.exports=n},14977:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(91907),n=e(95540),r=new i({initialize:function(s){s===void 0&&(s={}),this.name=n(s,"name","layer"),this.id=n(s,"id",0),this.x=n(s,"x",0),this.y=n(s,"y",0),this.width=n(s,"width",0),this.height=n(s,"height",0),this.tileWidth=n(s,"tileWidth",0),this.tileHeight=n(s,"tileHeight",0),this.baseTileWidth=n(s,"baseTileWidth",this.tileWidth),this.baseTileHeight=n(s,"baseTileHeight",this.tileHeight),this.orientation=n(s,"orientation",u.ORTHOGONAL),this.widthInPixels=n(s,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=n(s,"heightInPixels",this.height*this.baseTileHeight),this.alpha=n(s,"alpha",1),this.visible=n(s,"visible",!0),this.properties=n(s,"properties",[]),this.indexes=n(s,"indexes",[]),this.collideIndexes=n(s,"collideIndexes",[]),this.callbacks=n(s,"callbacks",[]),this.bodies=n(s,"bodies",[]),this.data=n(s,"data",[]),this.tilemapLayer=n(s,"tilemapLayer",null),this.hexSideLength=n(s,"hexSideLength",0),this.staggerAxis=n(s,"staggerAxis","y"),this.staggerIndex=n(s,"staggerIndex","odd")}});h.exports=r},87010:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(91907),n=e(95540),r=new i({initialize:function(s){s===void 0&&(s={}),this.name=n(s,"name","map"),this.width=n(s,"width",0),this.height=n(s,"height",0),this.infinite=n(s,"infinite",!1),this.tileWidth=n(s,"tileWidth",0),this.tileHeight=n(s,"tileHeight",0),this.widthInPixels=n(s,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=n(s,"heightInPixels",this.height*this.tileHeight),this.format=n(s,"format",null),this.orientation=n(s,"orientation",u.ORTHOGONAL),this.renderOrder=n(s,"renderOrder","right-down"),this.version=n(s,"version","1"),this.properties=n(s,"properties",{}),this.layers=n(s,"layers",[]),this.images=n(s,"images",[]),this.objects=n(s,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=n(s,"collision",{}),this.tilesets=n(s,"tilesets",[]),this.imageCollections=n(s,"imageCollections",[]),this.tiles=n(s,"tiles",[]),this.hexSideLength=n(s,"hexSideLength",0),this.staggerAxis=n(s,"staggerAxis","y"),this.staggerIndex=n(s,"staggerIndex","odd")}});h.exports=r},48700:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(95540),n=new i({initialize:function(a){a===void 0&&(a={}),this.name=u(a,"name","object layer"),this.id=u(a,"id",0),this.opacity=u(a,"opacity",1),this.properties=u(a,"properties",{}),this.propertyTypes=u(a,"propertytypes",{}),this.type=u(a,"type","objectgroup"),this.visible=u(a,"visible",!0),this.objects=u(a,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});h.exports=n},6641:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(91907),u=function(n){return n=n.toLowerCase(),n==="isometric"?i.ISOMETRIC:n==="staggered"?i.STAGGERED:n==="hexagonal"?i.HEXAGONAL:i.ORTHOGONAL};h.exports=u},46177:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(80341),u=e(2342),n=e(82593),r=e(46594),a=e(87021),s=function(o,d,l,f,m,g){var p;switch(d){case i.ARRAY_2D:p=u(o,l,f,m,g);break;case i.CSV:p=n(o,l,f,m,g);break;case i.TILED_JSON:p=r(o,l,g);break;case i.WELTMEISTER:p=a(o,l,g);break;default:console.warn("Unrecognized tilemap data format: "+d),p=null}return p};h.exports=s},2342:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(80341),u=e(14977),n=e(87010),r=e(23029),a=function(s,o,d,l,f){for(var m=new u({tileWidth:d,tileHeight:l}),g=new n({name:s,tileWidth:d,tileHeight:l,format:i.ARRAY_2D,layers:[m]}),p=[],y=o.length,S=0,C=0;C<o.length;C++){p[C]=[];for(var A=o[C],M=0;M<A.length;M++){var L=parseInt(A[M],10);isNaN(L)||L===-1?p[C][M]=f?null:new r(m,-1,M,C,d,l):p[C][M]=new r(m,L,M,C,d,l)}S===0&&(S=A.length)}return g.width=m.width=S,g.height=m.height=y,g.widthInPixels=m.widthInPixels=S*d,g.heightInPixels=m.heightInPixels=y*l,m.data=p,g};h.exports=a},82593:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(80341),u=e(2342),n=function(r,a,s,o,d){var l=a.trim().split(`
`).map(function(m){return m.split(",")}),f=u(r,l,s,o,d);return f.format=i.CSV,f};h.exports=n},6656:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(14977),u=e(23029),n=function(r,a){for(var s=[],o=0;o<r.layer.length;o++){for(var d=r.layer[o],l=new i({name:d.name,width:d.width,height:d.height,tileWidth:d.tilesize,tileHeight:d.tilesize,visible:d.visible===1}),f=[],m=[],g=0;g<d.data.length;g++){for(var p=0;p<d.data[g].length;p++){var y=d.data[g][p]-1,S;y>-1?S=new u(l,y,p,g,d.tilesize,d.tilesize):S=a?null:new u(l,-1,p,g,d.tilesize,d.tilesize),f.push(S)}m.push(f),f=[]}l.data=m,s.push(l)}return s};h.exports=n},96483:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(33629),u=function(n){for(var r=[],a=[],s=0;s<n.layer.length;s++){var o=n.layer[s],d=o.tilesetName;d!==""&&a.indexOf(d)===-1&&(a.push(d),r.push(new i(d,0,o.tilesize,o.tilesize,0,0)))}return r};h.exports=u},87021:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(80341),u=e(87010),n=e(6656),r=e(96483),a=function(s,o,d){if(o.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+s),null;for(var l=0,f=0,m=0;m<o.layer.length;m++)o.layer[m].width>l&&(l=o.layer[m].width),o.layer[m].height>f&&(f=o.layer[m].height);var g=new u({width:l,height:f,name:s,tileWidth:o.layer[0].tilesize,tileHeight:o.layer[0].tilesize,format:i.WELTMEISTER});return g.layers=n(o,d),g.tilesets=r(o),g};h.exports=a},52833:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ParseTileLayers:e(6656),ParseTilesets:e(96483),ParseWeltmeister:e(87021)}},57442:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={FromOrientationString:e(6641),Parse:e(46177),Parse2DArray:e(2342),ParseCSV:e(82593),Impact:e(52833),Tiled:e(96761)}},51233:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(79291),u=function(n){for(var r,a,s,o,d,l=0;l<n.layers.length;l++){r=n.layers[l],o=null;for(var f=0;f<r.data.length;f++){d=r.data[f];for(var m=0;m<d.length;m++)a=d[m],!(a===null||a.index<0)&&(s=n.tiles[a.index][2],o=n.tilesets[s],a.width=o.tileWidth,a.height=o.tileHeight,o.tileProperties&&o.tileProperties[a.index-o.firstgid]&&(a.properties=i(a.properties,o.tileProperties[a.index-o.firstgid])))}}};h.exports=u},41868:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){for(var i=window.atob(e),u=i.length,n=new Array(u/4),r=0;r<u;r+=4)n[r/4]=(i.charCodeAt(r)|i.charCodeAt(r+1)<<8|i.charCodeAt(r+2)<<16|i.charCodeAt(r+3)<<24)>>>0;return n};h.exports=w},84101:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(33629),u=function(n){var r,a,s=[];for(r=0;r<n.imageCollections.length;r++)for(var o=n.imageCollections[r],d=o.images,l=0;l<d.length;l++){var f=d[l];a=new i(f.image,f.gid,o.imageWidth,o.imageHeight,0,0),a.updateTileData(o.imageWidth,o.imageHeight),n.tilesets.push(a)}for(r=0;r<n.tilesets.length;r++){a=n.tilesets[r];for(var m=a.tileMargin,g=a.tileMargin,p=0,y=0,S=0,C=a.firstgid;C<a.firstgid+a.total&&(s[C]=[m,g,r],m+=a.tileWidth+a.tileSpacing,p++,!(p===a.total||(y++,y===a.columns&&(m=a.tileMargin,g+=a.tileHeight+a.tileSpacing,y=0,S++,S===a.rows))));C++);}return s};h.exports=u},79677:(h,w,e)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(95540),u=function(n,r,a){if(!r)return{i:0,layers:n.layers,name:"",opacity:1,visible:!0,x:0,y:0};var s=r.x+i(r,"startx",0)*n.tilewidth+i(r,"offsetx",0),o=r.y+i(r,"starty",0)*n.tileheight+i(r,"offsety",0);return{i:0,layers:r.layers,name:a.name+r.name+"/",opacity:a.opacity*r.opacity,visible:a.visible&&r.visible,x:a.x+s,y:a.y+o}};h.exports=u},29920:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=2147483648,e=1073741824,i=536870912,u=function(n){var r=!!(n&w),a=!!(n&e),s=!!(n&i);n=n&536870911;var o=0,d=!1;return r&&a&&s?(o=Math.PI/2,d=!0):r&&a&&!s?(o=Math.PI,d=!1):r&&!a&&s?(o=Math.PI/2,d=!1):r&&!a&&!s?(o=0,d=!0):!r&&a&&s?(o=3*Math.PI/2,d=!1):!r&&a&&!s?(o=Math.PI,d=!0):!r&&!a&&s?(o=3*Math.PI/2,d=!0):!r&&!a&&!s&&(o=0,d=!1),{gid:n,flippedHorizontal:r,flippedVertical:a,flippedAntiDiagonal:s,rotation:o,flipped:d}};h.exports=u},12635:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(95540),u=e(79677),n=function(r){for(var a=[],s=[],o=u(r);o.i<o.layers.length||s.length>0;){if(o.i>=o.layers.length){if(s.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=s.pop();continue}var d=o.layers[o.i];if(o.i++,d.type!=="imagelayer"){if(d.type==="group"){var l=u(r,d,o);s.push(o),o=l}continue}var f=i(d,"offsetx",0)+i(d,"startx",0),m=i(d,"offsety",0)+i(d,"starty",0);a.push({name:o.name+d.name,image:d.image,x:o.x+f+d.x,y:o.y+m+d.y,alpha:o.opacity*d.opacity,visible:o.visible&&d.visible,properties:i(d,"properties",{})})}return a};h.exports=n},46594:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(51233),u=e(84101),n=e(91907),r=e(62644),a=e(80341),s=e(6641),o=e(87010),d=e(12635),l=e(22611),f=e(28200),m=e(24619),g=function(p,y,S){var C=r(y),A=new o({width:C.width,height:C.height,name:p,tileWidth:C.tilewidth,tileHeight:C.tileheight,orientation:s(C.orientation),format:a.TILED_JSON,version:C.version,properties:C.properties,renderOrder:C.renderorder,infinite:C.infinite});A.orientation===n.HEXAGONAL&&(A.hexSideLength=C.hexsidelength,A.staggerAxis=C.staggeraxis,A.staggerIndex=C.staggerindex),A.layers=f(C,S),A.images=d(C);var M=m(C);return A.tilesets=M.tilesets,A.imageCollections=M.imageCollections,A.objects=l(C),A.tiles=u(A),i(A),A};h.exports=g},52205:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(18254),u=e(29920),n=function(s){return{x:s.x,y:s.y}},r=["id","name","type","rotation","properties","visible","x","y","width","height"],a=function(s,o,d){o===void 0&&(o=0),d===void 0&&(d=0);var l=i(s,r);if(l.x+=o,l.y+=d,s.gid){var f=u(s.gid);l.gid=f.gid,l.flippedHorizontal=f.flippedHorizontal,l.flippedVertical=f.flippedVertical,l.flippedAntiDiagonal=f.flippedAntiDiagonal}else s.polyline?l.polyline=s.polyline.map(n):s.polygon?l.polygon=s.polygon.map(n):s.ellipse?l.ellipse=s.ellipse:s.text?l.text=s.text:s.point?l.point=!0:l.rectangle=!0;return l};h.exports=a},22611:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(95540),u=e(52205),n=e(48700),r=e(79677),a=function(s){for(var o=[],d=[],l=r(s);l.i<l.layers.length||d.length>0;){if(l.i>=l.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=d.pop();continue}var f=l.layers[l.i];if(l.i++,f.opacity*=l.opacity,f.visible=l.visible&&f.visible,f.type!=="objectgroup"){if(f.type==="group"){var m=r(s,f,l);d.push(l),l=m}continue}f.name=l.name+f.name;for(var g=l.x+i(f,"startx",0)+i(f,"offsetx",0),p=l.y+i(f,"starty",0)+i(f,"offsety",0),y=[],S=0;S<f.objects.length;S++){var C=u(f.objects[S],g,p);y.push(C)}var A=new n(f);A.objects=y,o.push(A)}return o};h.exports=a},28200:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(41868),u=e(91907),n=e(79677),r=e(6641),a=e(95540),s=e(14977),o=e(29920),d=e(23029),l=function(f,m){for(var g=a(f,"infinite",!1),p=[],y=[],S=n(f);S.i<S.layers.length||y.length>0;){if(S.i>=S.layers.length){if(y.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}S=y.pop();continue}var C=S.layers[S.i];if(S.i++,C.type!=="tilelayer"){if(C.type==="group"){var A=n(f,C,S);y.push(S),S=A}continue}if(C.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+C.name+"'");continue}else if(C.encoding&&C.encoding==="base64"){if(C.chunks)for(var M=0;M<C.chunks.length;M++)C.chunks[M].data=i(C.chunks[M].data);C.data&&(C.data=i(C.data)),delete C.encoding}var L,P,O,D,I=[],F=0;if(g){var H=a(C,"startx",0)+C.x,k=a(C,"starty",0)+C.y;L=new s({name:S.name+C.name,id:C.id,x:S.x+a(C,"offsetx",0)+H*f.tilewidth,y:S.y+a(C,"offsety",0)+k*f.tileheight,width:C.width,height:C.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:S.opacity*C.opacity,visible:S.visible&&C.visible,properties:a(C,"properties",[]),orientation:r(f.orientation)}),L.orientation===u.HEXAGONAL&&(L.hexSideLength=f.hexsidelength,L.staggerAxis=f.staggeraxis,L.staggerIndex=f.staggerindex);for(var W=0;W<C.height;W++){I[W]=[null];for(var $=0;$<C.width;$++)I[W][$]=null}for(W=0,se=C.chunks.length;W<se;W++)for(var K=C.chunks[W],Z=K.x-H,X=K.y-k,j=0,Y=0,U=K.data.length;Y<U;Y++){var J=F+Z,q=j+X;P=o(K.data[Y]),P.gid>0?(O=new d(L,P.gid,J,q,f.tilewidth,f.tileheight),O.rotation=P.rotation,O.flipX=P.flipped,I[q][J]=O):(D=m?null:new d(L,-1,J,q,f.tilewidth,f.tileheight),I[q][J]=D),F++,F===K.width&&(j++,F=0)}}else{L=new s({name:S.name+C.name,id:C.id,x:S.x+a(C,"offsetx",0)+C.x,y:S.y+a(C,"offsety",0)+C.y,width:C.width,height:C.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:S.opacity*C.opacity,visible:S.visible&&C.visible,properties:a(C,"properties",[]),orientation:r(f.orientation)}),L.orientation===u.HEXAGONAL&&(L.hexSideLength=f.hexsidelength,L.staggerAxis=f.staggeraxis,L.staggerIndex=f.staggerindex);for(var _=[],te=0,se=C.data.length;te<se;te++)P=o(C.data[te]),P.gid>0?(O=new d(L,P.gid,F,I.length,f.tilewidth,f.tileheight),O.rotation=P.rotation,O.flipX=P.flipped,_.push(O)):(D=m?null:new d(L,-1,F,I.length,f.tilewidth,f.tileheight),_.push(D)),F++,F===C.width&&(I.push(_),F=0,_=[])}L.data=I,p.push(L)}return p};h.exports=l},24619:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(33629),u=e(16536),n=e(52205),r=e(57880),a=function(s){for(var o=[],d=[],l=null,f,m=0;m<s.tilesets.length;m++){var g=s.tilesets[m];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var p=new i(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,void 0,void 0,g.tileoffset);if(s.version>1){var y=void 0,S=void 0;if(Array.isArray(g.tiles)){y=y||{},S=S||{};for(var C=0;C<g.tiles.length;C++){var A=g.tiles[C];if(A.properties){var M={};A.properties.forEach(function(W){M[W.name]=W.value}),S[A.id]=M}if(A.objectgroup&&((y[A.id]||(y[A.id]={})).objectgroup=A.objectgroup,A.objectgroup.objects)){var L=A.objectgroup.objects.map(function(W){return n(W)});y[A.id].objectgroup.objects=L}A.animation&&((y[A.id]||(y[A.id]={})).animation=A.animation),A.type&&((y[A.id]||(y[A.id]={})).type=A.type)}}Array.isArray(g.wangsets)&&(y=y||{},S=S||{},r(g.wangsets,y)),y&&(p.tileData=y,p.tileProperties=S)}else if(g.tileproperties&&(p.tileProperties=g.tileproperties),g.tiles){p.tileData=g.tiles;for(f in p.tileData){var P=p.tileData[f].objectgroup;if(P&&P.objects){var O=P.objects.map(function(W){return n(W)});p.tileData[f].objectgroup.objects=O}}}p.updateTileData(g.imagewidth,g.imageheight),o.push(p)}else{var D=new u(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),I=0;for(C=0;C<g.tiles.length;C++){A=g.tiles[C];var F=A.image,H=parseInt(A.id,10),k=g.firstgid+H;D.addImage(k,F),I=Math.max(H,I)}D.maxId=I,d.push(D)}l&&(l.lastgid=g.firstgid-1),l=g}return{tilesets:o,imageCollections:d}};h.exports=a},57880:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){for(var u=0;u<e.length;u++){var n=e[u],r=u;if(n.name&&n.name!==""&&(r=n.name),Array.isArray(n.wangtiles)&&n.wangtiles.length>0){var a={},s={},o,d,l;if(Array.isArray(n.edgecolors))for(o=0;o<n.edgecolors.length;o++)l=1+o,d=n.edgecolors[o],d.name!==""&&(a[l]=d.name);if(Array.isArray(n.cornercolors))for(o=0;o<n.cornercolors.length;o++)l=1+o,d=n.cornercolors[o],d.name!==""&&(s[l]=d.name);if(Array.isArray(n.colors))for(o=0;o<n.colors.length;o++)d=n.colors[o],l=1+o,d.name!==""&&(a[l]=s[l]=d.name);for(var f=[a,s,a,s,a,s,a,s],m=0;m<n.wangtiles.length;m++){var g=n.wangtiles[m],p=i[g.tileid]||(i[g.tileid]={});p=p.wangid||(p.wangid={});for(var y=[],S=0;S<Math.min(f.length,g.wangid.length);S++){if(d=g.wangid[S],d===0){y.push(void 0);continue}var C=f[S][d];if(C!==void 0){y.push(C);continue}y.push(d)}p[r]=y}}}};h.exports=w},96761:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AssignTileProperties:e(51233),Base64Decode:e(41868),BuildTilesetIndex:e(84101),CreateGroupLayer:e(79677),ParseGID:e(29920),ParseImageLayers:e(12635),ParseJSONTiled:e(46594),ParseObject:e(52205),ParseObjectLayers:e(22611),ParseTileLayers:e(28200),ParseTilesets:e(24619)}},33385:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(37277),n=e(44594),r=e(94880),a=e(72905),s=new i({initialize:function(d){this.scene=d,this.systems=d.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],d.sys.events.once(n.BOOT,this.boot,this),d.sys.events.on(n.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var o=this.systems.events;o.on(n.PRE_UPDATE,this.preUpdate,this),o.on(n.UPDATE,this.update,this),o.once(n.SHUTDOWN,this.shutdown,this)},addEvent:function(o){var d;return o instanceof r?(d=o,this.removeEvent(d),d.elapsed=d.startAt,d.hasDispatched=!1,d.repeatCount=d.repeat===-1||d.loop?999999999999:d.repeat):d=new r(o),this._pendingInsertion.push(d),d},delayedCall:function(o,d,l,f){return this.addEvent({delay:o,callback:d,args:l,callbackScope:f})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(o){Array.isArray(o)||(o=[o]);for(var d=0;d<o.length;d++){var l=o[d];a(this._pendingRemoval,l),a(this._pendingInsertion,l),a(this._active,l)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var o=this._pendingRemoval.length,d=this._pendingInsertion.length;if(!(o===0&&d===0)){var l,f;for(l=0;l<o;l++){f=this._pendingRemoval[l];var m=this._active.indexOf(f);m>-1&&this._active.splice(m,1),f.destroy()}for(l=0;l<d;l++)f=this._pendingInsertion[l],this._active.push(f);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(o,d){if(this.now=o,!this.paused){d*=this.timeScale;for(var l=0;l<this._active.length;l++){var f=this._active[l];if(!f.paused&&(f.elapsed+=d*f.timeScale,f.elapsed>=f.delay)){var m=f.elapsed-f.delay;if(f.elapsed=f.delay,!f.hasDispatched&&f.callback&&(f.hasDispatched=!0,f.callback.apply(f.callbackScope,f.args)),f.repeatCount>0){if(f.repeatCount--,m>=f.delay)for(;m>=f.delay&&f.repeatCount>0;)f.callback&&f.callback.apply(f.callbackScope,f.args),m-=f.delay,f.repeatCount--;f.elapsed=m,f.hasDispatched=!1}else f.hasDispatched&&this._pendingRemoval.push(f)}}}},shutdown:function(){var o;for(o=0;o<this._pendingInsertion.length;o++)this._pendingInsertion[o].destroy();for(o=0;o<this._active.length;o++)this._active[o].destroy();for(o=0;o<this._pendingRemoval.length;o++)this._pendingRemoval[o].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var d=this.systems.events;d.off(n.PRE_UPDATE,this.preUpdate,this),d.off(n.UPDATE,this.update,this),d.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});u.register("Clock",s,"time"),h.exports=s},96120:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(50792),n=e(39429),r=e(95540),a=e(44594),s=e(89809),o=new i({Extends:u,initialize:function(l,f){u.call(this),this.scene=l,this.systems=l.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var m=this.systems.events;m.on(a.PRE_UPDATE,this.preUpdate,this),m.on(a.UPDATE,this.update,this),m.once(a.SHUTDOWN,this.destroy,this),f&&this.add(f)},preUpdate:function(d,l){this.paused||(this.elapsed+=l*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var d,l=this.events,f=!1,m=this.systems,g;for(d=0;d<l.length;d++){var p=l[d];if(!p.complete&&p.time<=this.elapsed){if(p.complete=!0,this.totalComplete++,g=p.target?p.target:this,p.if&&!p.if.call(g,p))continue;if(p.once&&(f=!0),p.set&&p.target)for(var y in p.set)p.target[y]=p.set[y];this.iteration&&p.repeat++,p.loop&&p.repeat&&p.loop.call(g),p.tween&&(p.tweenInstance=m.tweens.add(p.tween)),p.sound&&(typeof p.sound=="string"?m.sound.play(p.sound):m.sound.play(p.sound.key,p.sound.config)),p.event&&this.emit(p.event,g),p.run&&p.run.call(g),p.stop&&this.stop()}}if(f)for(d=0;d<l.length;d++)l[d].complete&&l[d].once&&(l.splice(d,1),d--);this.totalComplete>=l.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(s.COMPLETE,this)}},play:function(d){return d===void 0&&(d=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,d&&this.reset(),this},pause:function(){this.paused=!0;for(var d=this.events,l=0;l<d.length;l++){var f=d[l];f.tweenInstance&&(f.tweenInstance.paused=!0)}return this},repeat:function(d){return(d===void 0||d===!0)&&(d=-1),d===!1&&(d=0),this.loop=d,this},resume:function(){this.paused=!1;for(var d=this.events,l=0;l<d.length;l++){var f=d[l];f.tweenInstance&&(f.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(d){d===void 0&&(d=!1),this.elapsed=0,d||(this.iteration=0);for(var l=this.events,f=0;f<l.length;f++){var m=l[f];m.complete=!1,d||(m.repeat=0),m.tweenInstance&&m.tweenInstance.stop()}return this.play(!1)},add:function(d){Array.isArray(d)||(d=[d]);var l=this.events,f=0;l.length>0&&(f=l[l.length-1].time);for(var m=0;m<d.length;m++){var g=d[m],p=r(g,"at",0),y=r(g,"in",null);y!==null&&(p=this.elapsed+y);var S=r(g,"from",null);S!==null&&(p=f+S),l.push({complete:!1,time:p,repeat:0,if:r(g,"if",null),run:r(g,"run",null),loop:r(g,"loop",null),event:r(g,"event",null),target:r(g,"target",null),set:r(g,"set",null),tween:r(g,"tween",null),sound:r(g,"sound",null),once:r(g,"once",!1),stop:r(g,"stop",!1)}),f=p}return this.complete=!1,this},clear:function(){for(var d=this.events,l=0;l<d.length;l++){var f=d[l];f.tweenInstance&&f.tweenInstance.stop()}return d=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var d=Math.min(this.totalComplete,this.events.length);return d/this.events.length},destroy:function(){var d=this.systems.events;d.off(a.PRE_UPDATE,this.preUpdate,this),d.off(a.UPDATE,this.update,this),d.off(a.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});n.register("timeline",function(d){return new o(this.scene,d)}),h.exports=o},94880:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(95540),n=new i({initialize:function(a){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(a)},reset:function(r){if(this.delay=u(r,"delay",0),this.repeat=u(r,"repeat",0),this.loop=u(r,"loop",!1),this.callback=u(r,"callback",void 0),this.callbackScope=u(r,"callbackScope",this),this.args=u(r,"args",[]),this.timeScale=u(r,"timeScale",1),this.startAt=u(r,"startAt",0),this.paused=u(r,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var r=this.delay+this.delay*this.repeat,a=this.elapsed+this.delay*(this.repeat-this.repeatCount);return a/r}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(r){r===void 0&&(r=!1),this.elapsed=this.delay,this.hasDispatched=!r,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});h.exports=n},35945:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},89809:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={COMPLETE:e(35945)}},90291:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Clock:e(33385),Events:e(89809),Timeline:e(96120),TimerEvent:e(94880)}},40382:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(72905),u=e(83419),n=e(43491),r=e(88032),a=e(37277),s=e(44594),o=e(93109),d=e(86081),l=e(8357),f=e(43960),m=e(26012),g=new u({initialize:function(y){this.scene=y,this.events=y.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(s.UPDATE,this.update,this),this.events.once(s.SHUTDOWN,this.shutdown,this)},create:function(p){Array.isArray(p)||(p=[p]);for(var y=[],S=0;S<p.length;S++){var C=p[S];C instanceof d||C instanceof f?y.push(C):Array.isArray(C.tweens)?y.push(m(this,C)):y.push(l(this,C))}return y.length===1?y[0]:y},add:function(p){var y=p,S=this.tweens;return y instanceof d||y instanceof f||(Array.isArray(y.tweens)?y=m(this,y):y=l(this,y)),S.push(y.reset()),y},addMultiple:function(p){for(var y,S=[],C=this.tweens,A=0;A<p.length;A++)y=p[A],y instanceof d||y instanceof f||(Array.isArray(y.tweens)?y=m(this,y):y=l(this,y)),C.push(y.reset()),S.push(y);return S},chain:function(p){var y=m(this,p);return this.tweens.push(y.init()),y},getChainedTweens:function(p){return p.getChainedTweens()},has:function(p){return this.tweens.indexOf(p)>-1},existing:function(p){return this.has(p)||this.tweens.push(p.reset()),this},addCounter:function(p){var y=r(this,p);return this.tweens.push(y.reset()),y},stagger:function(p,y){return o(p,y)},setLagSmooth:function(p,y){return p===void 0&&(p=1/1e-8),y===void 0&&(y=0),this.maxLag=p,this.lagSkip=Math.min(y,this.maxLag),this},setFps:function(p){return p===void 0&&(p=240),this.gap=1e3/p,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(p){var y=Date.now()-this.prevTime;y>this.maxLag&&(this.startTime+=y-this.lagSkip),this.prevTime+=y;var S=this.prevTime-this.startTime,C=S-this.nextTime,A=S-this.time*1e3;return C>0||p?(S/=1e3,this.time=S,this.nextTime+=C+(C>=this.gap?4:this.gap-C)):A=0,A},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(p){p===void 0&&(p=!1);var y=this.getDelta(p);if(!(y<=0)){this.processing=!0;var S,C,A=[],M=this.tweens;for(S=0;S<M.length;S++)C=M[S],C.update(y)&&A.push(C);var L=A.length;if(L&&M.length>0){for(S=0;S<L;S++){C=A[S];var P=M.indexOf(C);P>-1&&(C.isPendingRemove()||C.isDestroyed())&&(M.splice(P,1),C.destroy())}A.length=0}this.processing=!1}},remove:function(p){return this.processing?p.setPendingRemoveState():(i(this.tweens,p),p.setRemovedState()),this},reset:function(p){return this.existing(p),p.seek(),p.setActiveState(),this},makeActive:function(p){return this.existing(p),p.setActiveState(),this},each:function(p,y){var S,C=[null];for(S=1;S<arguments.length;S++)C.push(arguments[S]);return this.tweens.forEach(function(A){C[0]=A,p.apply(y,C)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(p){var y=[],S=this.tweens;Array.isArray(p)?p=n(p):p=[p];for(var C=p.length,A=0;A<S.length;A++)for(var M=S[A],L=0;L<C;L++)!M.isDestroyed()&&M.hasTarget(p[L])&&y.push(M);return y},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(p){return this.timeScale=p,this},isTweening:function(p){for(var y=this.tweens,S,C=0;C<y.length;C++)if(S=y[C],S.isPlaying()&&S.hasTarget(p))return!0;return!1},killAll:function(){for(var p=this.processing?this.getTweens():this.tweens,y=0;y<p.length;y++)p[y].destroy();return this.processing||(p.length=0),this},killTweensOf:function(p){for(var y=this.getTweensOf(p),S=0;S<y.length;S++)y[S].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(s.UPDATE,this.update,this),this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.events=null}});a.register("TweenManager",g,"tweens"),h.exports=g},57355:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){return e&&e.hasOwnProperty(i)?e[i]:u};h.exports=w},6113:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(62640),u=e(35355),n=function(r,a){var s=i.Power0;if(typeof r=="string")if(i.hasOwnProperty(r))s=i[r];else{var o="";if(r.indexOf(".")){o=r.substring(r.indexOf(".")+1);var d=o.toLowerCase();d==="in"?o="easeIn":d==="out"?o="easeOut":d==="inout"&&(o="easeInOut")}r=u(r.substring(0,r.indexOf(".")+1)+o),i.hasOwnProperty(r)&&(s=i[r])}else typeof r=="function"&&(s=r);if(!a)return s;var l=a.slice(0);return l.unshift(0),function(f){return l[0]=f,s.apply(this,l)}};h.exports=n},91389:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(89318),u=e(77259),n=e(28392),r={bezier:i,catmull:u,catmullrom:u,linear:n},a=function(s){if(s===null)return null;var o=r.linear;return typeof s=="string"?r.hasOwnProperty(s)&&(o=r[s]):typeof s=="function"&&(o=s),o};h.exports=a},55292:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n;if(e.hasOwnProperty(i)){var r=typeof e[i];r==="function"?n=function(a,s,o,d,l,f){return e[i](a,s,o,d,l,f)}:n=function(){return e[i]}}else typeof u=="function"?n=u:n=function(){return u};return n};h.exports=w},82985:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(81076),u=function(n){var r,a=[];if(n.hasOwnProperty("props"))for(r in n.props)r.substring(0,1)!=="_"&&a.push({key:r,value:n.props[r]});else for(r in n)i.indexOf(r)===-1&&r.substring(0,1)!=="_"&&a.push({key:r,value:n[r]});return a};h.exports=u},62329:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35154),u=function(n){var r=i(n,"targets",null);return r===null||(typeof r=="function"&&(r=r.call()),Array.isArray(r)||(r=[r])),r};h.exports=u},17777:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(30976),u=e(99472);function n(d){return!!d.getActive&&typeof d.getActive=="function"}function r(d){return!!d.getStart&&typeof d.getStart=="function"}function a(d){return!!d.getEnd&&typeof d.getEnd=="function"}function s(d){return r(d)||a(d)||n(d)}var o=function(d,l){var f,m=function(K,Z,X){return X},g=function(K,Z,X){return X},p=null,y=typeof l;if(y==="number")m=function(){return l};else if(Array.isArray(l))g=function(){return l[0]},m=function(){return l[l.length-1]};else if(y==="string"){var S=l.toLowerCase(),C=S.substring(0,6)==="random",A=S.substring(0,3)==="int";if(C||A){var M=S.indexOf("("),L=S.indexOf(")"),P=S.indexOf(",");if(M&&L&&P){var O=parseFloat(S.substring(M+1,P)),D=parseFloat(S.substring(P+1,L));C?m=function(){return u(O,D)}:m=function(){return i(O,D)}}else throw new Error("invalid random() format")}else{S=S[0];var I=parseFloat(l.substr(2));switch(S){case"+":m=function(K,Z,X){return X+I};break;case"-":m=function(K,Z,X){return X-I};break;case"*":m=function(K,Z,X){return X*I};break;case"/":m=function(K,Z,X){return X/I};break;default:m=function(){return parseFloat(l)}}}}else if(y==="function")m=l;else if(y==="object")if(s(l))n(l)&&(p=l.getActive),a(l)&&(m=l.getEnd),r(l)&&(g=l.getStart);else if(l.hasOwnProperty("value"))f=o(d,l.value);else{var F=l.hasOwnProperty("to"),H=l.hasOwnProperty("from"),k=l.hasOwnProperty("start");if(F&&(H||k)){if(f=o(d,l.to),k){var W=o(d,l.start);f.getActive=W.getEnd}if(H){var $=o(d,l.from);f.getStart=$.getEnd}}}return f||(f={getActive:p,getEnd:m,getStart:g}),f};h.exports=o},88032:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(70402),u=e(69902),n=e(23568),r=e(57355),a=e(6113),s=e(55292),o=e(35154),d=e(17777),l=e(269),f=e(86081),m=function(g,p,y){if(p instanceof f)return p.parent=g,p;y===void 0?y=u:y=l(u,y);var S=o(p,"from",0),C=o(p,"to",1),A=[{value:S}],M=o(p,"delay",y.delay),L=o(p,"easeParams",y.easeParams),P=o(p,"ease",y.ease),O=d("value",C),D=new f(g,A),I=D.add(0,"value",O.getEnd,O.getStart,O.getActive,a(o(p,"ease",P),o(p,"easeParams",L)),s(p,"delay",M),o(p,"duration",y.duration),r(p,"yoyo",y.yoyo),o(p,"hold",y.hold),o(p,"repeat",y.repeat),o(p,"repeatDelay",y.repeatDelay),!1,!1);I.start=S,I.current=S,D.completeDelay=n(p,"completeDelay",0),D.loop=Math.round(n(p,"loop",0)),D.loopDelay=Math.round(n(p,"loopDelay",0)),D.paused=r(p,"paused",!1),D.persist=r(p,"persist",!1),D.callbackScope=o(p,"callbackScope",D);for(var F=i.TYPES,H=0;H<F.length;H++){var k=F[H],W=o(p,k,!1);if(W){var $=o(p,k+"Params",[]);D.setCallback(k,W,$)}}return D};h.exports=m},93109:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(6113),u=e(35154),n=e(36383),r=function(a,s){s===void 0&&(s={});var o,d=u(s,"start",0),l=u(s,"ease",null),f=u(s,"grid",null),m=u(s,"from",0),g=m==="first",p=m==="center",y=m==="last",S=typeof m=="number",C=Array.isArray(a),A=parseFloat(C?a[0]:a),M=C?parseFloat(a[1]):0,L=Math.max(A,M);if(C&&(d+=A),f){var P=f[0],O=f[1],D=0,I=0,F=0,H=0,k=[];y?(D=P-1,I=O-1):S?(D=m%P,I=Math.floor(m/P)):p&&(D=(P-1)/2,I=(O-1)/2);for(var W=n.MIN_SAFE_INTEGER,$=0;$<O;$++){k[$]=[];for(var K=0;K<P;K++){F=D-K,H=I-$;var Z=Math.sqrt(F*F+H*H);Z>W&&(W=Z),k[$][K]=Z}}}var X=l?i(l):null;return f?o=function(j,Y,U,J){var q=0,_=J%P,te=Math.floor(J/P);_>=0&&_<P&&te>=0&&te<O&&(q=k[te][_]);var se;if(C){var ne=M-A;X?se=q/W*ne*X(q/W):se=q/W*ne}else X?se=q*A*X(q/W):se=q*A;return se+d}:o=function(j,Y,U,J,q){q--;var _;g?_=J:p?_=Math.abs(q/2-J):y?_=q-J:S&&(_=Math.abs(m-J));var te;if(C){var se;p?se=(M-A)/q*(_*2):se=(M-A)/q*_,X?te=se*X(_/q):te=se}else X?te=q*L*X(_/q):te=_*A;return te+d},o};h.exports=r},8357:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(70402),u=e(69902),n=e(23568),r=e(57355),a=e(6113),s=e(91389),o=e(55292),d=e(82985),l=e(62329),f=e(35154),m=e(17777),g=e(269),p=e(86081),y=function(S,C,A){if(C instanceof p)return C.parent=S,C;A===void 0?A=u:A=g(u,A);var M=l(C);!M&&A.targets&&(M=A.targets);for(var L=d(C),P=f(C,"delay",A.delay),O=f(C,"duration",A.duration),D=f(C,"easeParams",A.easeParams),I=f(C,"ease",A.ease),F=f(C,"hold",A.hold),H=f(C,"repeat",A.repeat),k=f(C,"repeatDelay",A.repeatDelay),W=r(C,"yoyo",A.yoyo),$=r(C,"flipX",A.flipX),K=r(C,"flipY",A.flipY),Z=f(C,"interpolation",A.interpolation),X=function(le,ge,re,fe){if(re==="texture"){var Ae=fe,Ie=void 0;Array.isArray(fe)?(Ae=fe[0],Ie=fe[1]):fe.hasOwnProperty("value")?(Ae=fe.value,Array.isArray(fe.value)?(Ae=fe.value[0],Ie=fe.value[1]):typeof fe.value=="string"&&(Ae=fe.value)):typeof fe=="string"&&(Ae=fe),le.addFrame(ge,Ae,Ie,o(fe,"delay",P),f(fe,"duration",O),f(fe,"hold",F),f(fe,"repeat",H),f(fe,"repeatDelay",k),r(fe,"flipX",$),r(fe,"flipY",K))}else{var Ne=m(re,fe),Fe=s(f(fe,"interpolation",Z));le.add(ge,re,Ne.getEnd,Ne.getStart,Ne.getActive,a(f(fe,"ease",I),f(fe,"easeParams",D)),o(fe,"delay",P),f(fe,"duration",O),r(fe,"yoyo",W),f(fe,"hold",F),f(fe,"repeat",H),f(fe,"repeatDelay",k),r(fe,"flipX",$),r(fe,"flipY",K),Fe,Fe?fe:null)}},j=new p(S,M),Y=0;Y<L.length;Y++)for(var U=L[Y].key,J=L[Y].value,q=0;q<M.length;q++)U==="scale"&&!M[q].hasOwnProperty("scale")?(X(j,q,"scaleX",J),X(j,q,"scaleY",J)):X(j,q,U,J);j.completeDelay=n(C,"completeDelay",0),j.loop=Math.round(n(C,"loop",0)),j.loopDelay=Math.round(n(C,"loopDelay",0)),j.paused=r(C,"paused",!1),j.persist=r(C,"persist",!1),j.callbackScope=f(C,"callbackScope",j);for(var _=i.TYPES,te=0;te<_.length;te++){var se=_[te],ne=f(C,se,!1);if(ne){var he=f(C,se+"Params",[]);j.setCallback(se,ne,he)}}return j};h.exports=y},26012:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(70402),u=e(23568),n=e(57355),r=e(62329),a=e(35154),s=e(8357),o=e(43960),d=function(l,f){if(f instanceof o)return f.parent=l,f;var m=new o(l);m.startDelay=a(f,"delay",0),m.completeDelay=u(f,"completeDelay",0),m.loop=Math.round(u(f,"loop",a(f,"repeat",0))),m.loopDelay=Math.round(u(f,"loopDelay",a(f,"repeatDelay",0))),m.paused=n(f,"paused",!1),m.persist=n(f,"persist",!1),m.callbackScope=a(f,"callbackScope",m);var g,p=i.TYPES;for(g=0;g<p.length;g++){var y=p[g],S=a(f,y,!1);if(S){var C=a(f,y+"Params",[]);m.setCallback(y,S,C)}}var A=a(f,"tweens",null);if(Array.isArray(A)){var M=[],L=r(f),P=void 0;for(L&&(P={targets:L}),g=0;g<A.length;g++)M.push(s(m,A[g],P));m.add(M)}return m};h.exports=d},30231:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={GetBoolean:e(57355),GetEaseFunction:e(6113),GetInterpolationFunction:e(91389),GetNewValue:e(55292),GetProps:e(82985),GetTargets:e(62329),GetValueOp:e(17777),NumberTweenBuilder:e(88032),StaggerBuilder:e(93109),TweenBuilder:e(8357)}},73685:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="active"},98540:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},67233:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loop"},2859:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},98336:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="repeat"},25764:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},32193:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},84371:h=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stop"},70766:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},55659:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="yoyo"},842:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={TWEEN_ACTIVE:e(73685),TWEEN_COMPLETE:e(98540),TWEEN_LOOP:e(67233),TWEEN_PAUSE:e(2859),TWEEN_RESUME:e(25764),TWEEN_REPEAT:e(98336),TWEEN_START:e(32193),TWEEN_STOP:e(84371),TWEEN_UPDATE:e(70766),TWEEN_YOYO:e(55659)}},43066:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={States:e(86353),Builders:e(30231),Events:e(842),TweenManager:e(40382),Tween:e(86081),TweenData:e(48177),TweenFrameData:e(42220),BaseTween:e(70402),TweenChain:e(43960)};h.exports=i},70402:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(50792),n=e(842),r=e(86353),a=new i({Extends:u,initialize:function(o){u.call(this),this.parent=o,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=r.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(s){return this.timeScale=s,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(n.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(n.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(n.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(n.TWEEN_COMPLETE,"onComplete")},complete:function(s){return s===void 0&&(s=0),s?(this.setCompleteDelayState(),this.countdown=s):this.onCompleteHandler(),this},completeAfterLoop:function(s){return s===void 0&&(s=0),this.loopCounter>s&&(this.loopCounter=s),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(n.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(s){this.countdown-=s,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(n.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(s){return this.countdown-=s,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(n.TWEEN_START,"onStart"),s=0),s},updateCompleteDelay:function(s){this.countdown-=s,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(s,o,d){return d===void 0&&(d=[]),this.callbacks.hasOwnProperty(s)&&(this.callbacks[s]={func:o,params:d}),this},setPendingState:function(){this.state=r.PENDING},setActiveState:function(){this.state=r.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=r.LOOP_DELAY},setCompleteDelayState:function(){this.state=r.COMPLETE_DELAY},setStartDelayState:function(){this.state=r.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=r.PENDING_REMOVE},setRemovedState:function(){this.state=r.REMOVED},setFinishedState:function(){this.state=r.FINISHED},setDestroyedState:function(){this.state=r.DESTROYED},isPending:function(){return this.state===r.PENDING},isActive:function(){return this.state===r.ACTIVE},isLoopDelayed:function(){return this.state===r.LOOP_DELAY},isCompleteDelayed:function(){return this.state===r.COMPLETE_DELAY},isStartDelayed:function(){return this.state===r.START_DELAY},isPendingRemove:function(){return this.state===r.PENDING_REMOVE},isRemoved:function(){return this.state===r.REMOVED},isFinished:function(){return this.state===r.FINISHED},isDestroyed:function(){return this.state===r.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(s){s.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});a.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],h.exports=a},95042:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(83419),u=e(842),n=e(86353),r=new i({initialize:function(s,o,d,l,f,m,g,p,y,S){this.tween=s,this.targetIndex=o,this.duration=l,this.totalDuration=0,this.delay=0,this.getDelay=d,this.yoyo=f,this.hold=m,this.repeat=g,this.repeatDelay=p,this.repeatCounter=0,this.flipX=y,this.flipY=S,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(a){a===void 0&&(a=this.current),this.tween.targets[this.targetIndex][this.key]=a},setCreatedState:function(){this.state=n.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=n.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=n.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=n.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=n.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=n.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=n.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=n.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===n.CREATED},isDelayed:function(){return this.state===n.DELAY},isPendingRender:function(){return this.state===n.PENDING_RENDER},isPlayingForward:function(){return this.state===n.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===n.PLAYING_BACKWARD},isHolding:function(){return this.state===n.HOLD_DELAY},isRepeating:function(){return this.state===n.REPEAT_DELAY},isComplete:function(){return this.state===n.COMPLETE},setStateFromEnd:function(a){this.yoyo?this.onRepeat(a,!0,!0):this.repeatCounter>0?this.onRepeat(a,!0,!1):this.setCompleteState()},setStateFromStart:function(a){this.repeatCounter>0?this.onRepeat(a,!1):this.setCompleteState()},reset:function(){var a=this.tween,s=a.totalTargets,o=this.targetIndex,d=a.targets[o],l=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(d,l,0,o,s,a),this.repeatCounter=this.repeat===-1?n.MAX:this.repeat,this.setPendingRenderState();var f=this.duration+this.hold;this.yoyo&&(f+=this.duration);var m=f+this.repeatDelay;this.totalDuration=this.delay+f,this.repeat===-1?(this.totalDuration+=m*n.MAX,a.isInfinite=!0):this.repeat>0&&(this.totalDuration+=m*this.repeat),this.totalDuration>a.duration&&(a.duration=this.totalDuration),this.delay<a.startDelay&&(a.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(a,s,o){var d=this.tween,l=d.totalTargets,f=this.targetIndex,m=d.targets[f],g=this.key,p=g!=="texture";if(this.elapsed=a,this.progress=a/this.duration,this.flipX&&m.toggleFlipX(),this.flipY&&m.toggleFlipY(),p&&(s||o)&&(this.start=this.getStartValue(m,g,this.start,f,l,d)),o){this.setPlayingBackwardState(),this.dispatchEvent(u.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,p&&(this.end=this.getEndValue(m,g,this.start,f,l,d)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-a,p&&(this.current=this.start,m[g]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});h.exports=r},69902:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};h.exports=w},81076:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(70402),u=e(83419),n=e(842),r=e(44603),a=e(39429),s=e(36383),o=e(86353),d=e(48177),l=e(42220),f=new u({Extends:i,initialize:function(g,p){i.call(this,g),this.targets=p,this.totalTargets=p.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(m,g,p,y,S,C,A,M,L,P,O,D,I,F,H,k){var W=new d(this,m,g,p,y,S,C,A,M,L,P,O,D,I,F,H,k);return this.totalData=this.data.push(W),W},addFrame:function(m,g,p,y,S,C,A,M,L,P){var O=new l(this,m,g,p,y,S,C,A,M,L,P);return this.totalData=this.data.push(O),O},getValue:function(m){m===void 0&&(m=0);var g=null;return this.data&&(g=this.data[m].current),g},hasTarget:function(m){return this.targets&&this.targets.indexOf(m)!==-1},updateTo:function(m,g,p){if(p===void 0&&(p=!1),m!=="texture")for(var y=0;y<this.totalData;y++){var S=this.data[y];S.key===m&&(S.isPlayingForward()||S.isPlayingBackward())&&(S.end=g,p&&(S.start=S.current))}return this},restart:function(){switch(this.state){case o.REMOVED:case o.FINISHED:this.seek(),this.parent.makeActive(this);break;case o.PENDING:case o.PENDING_REMOVE:this.parent.reset(this);break;case o.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(n.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,i.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(m,g,p){if(m===void 0&&(m=0),g===void 0&&(g=16.6),p===void 0&&(p=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;p||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(n.TWEEN_ACTIVE,"onActive");var y=this.paused;if(this.paused=!1,m>0){for(var S=Math.floor(m/g),C=m-S*g,A=0;A<S;A++)this.update(g);C>0&&this.update(C)}return this.paused=y,this.isSeeking=!1,this},initTweenData:function(m){m===void 0&&(m=!1),this.duration=0,this.startDelay=s.MAX_SAFE_INTEGER;for(var g=this.data,p=0;p<this.totalData;p++)g[p].reset(m);this.duration=Math.max(this.duration,.01);var y=this.duration,S=this.completeDelay,C=this.loopCounter,A=this.loopDelay;C>0?this.totalDuration=y+S+(y+A)*C:this.totalDuration=y+S},reset:function(m){return m===void 0&&(m=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=o.MAX),m||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(n.TWEEN_ACTIVE,"onActive")),this},update:function(m){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(m*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(m),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(m),!1;this.hasStarted||(this.startDelay-=m,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(n.TWEEN_START,"onStart"),m=0));var g=!1;if(this.isActive())for(var p=this.data,y=0;y<this.totalData;y++)p[y].update(m)&&(g=!0);this.elapsed+=m,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=m,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),g||this.nextState();var S=this.isPendingRemove();return S&&this.persist&&(this.setFinishedState(),S=!1),S},forward:function(m){return this.update(m),this},rewind:function(m){return this.update(-m),this},dispatchEvent:function(m,g){if(!this.isSeeking){this.emit(m,this,this.targets);var p=this.callbacks[g];p&&p.func.apply(this.callbackScope,[this,this.targets].concat(p.params))}},destroy:function(){i.prototype.destroy.call(this),this.targets=null}});a.register("tween",function(m){return this.scene.sys.tweens.add(m)}),r.register("tween",function(m){return this.scene.sys.tweens.create(m)}),h.exports=f},43960:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(72905),u=e(70402),n=e(83419),r=e(842),a=e(44603),s=e(39429),o=e(86353),d=new n({Extends:u,initialize:function(f){u.call(this,f),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?o.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(l){var f=this.parent.create(l);Array.isArray(f)||(f=[f]);for(var m=this.data,g=0;g<f.length;g++){var p=f[g];p.parent=this,m.push(p.reset())}return this.totalData=m.length,this},remove:function(l){return i(this.data,l),l.setRemovedState(),l===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(l){for(var f=this.data,m=0;m<this.totalData;m++)if(f[m].hasTarget(l))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(l){return l.seek(),l.setActiveState(),this},makeActive:function(l){return l.reset(),l.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(r.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var l=this.data,f=this.totalData,m=0;m<f;m++)l[m].reset(!1);this.setCurrentTween(0)},update:function(l){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;l*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(l):this.isCompleteDelayed()?this.updateCompleteDelay(l):this.isStartDelayed()&&(l=this.updateStartCountdown(l));var f=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(l)&&this.nextTween()&&this.nextState(),f=this.isPendingRemove(),f&&this.persist&&(this.setFinishedState(),f=!1)),f},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(l){this.currentIndex=l,this.currentTween=this.data[l],this.currentTween.setActiveState()},dispatchEvent:function(l,f){this.emit(l,this);var m=this.callbacks[f];m&&m.func.apply(this.callbackScope,[this].concat(m.params))},destroy:function(){u.prototype.destroy.call(this),this.currentTween=null}});s.register("tweenchain",function(l){return this.scene.sys.tweens.chain(l)}),a.register("tweenchain",function(l){return this.scene.sys.tweens.create(l)}),h.exports=d},48177:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(95042),u=e(45319),n=e(83419),r=e(842),a=new n({Extends:i,initialize:function(o,d,l,f,m,g,p,y,S,C,A,M,L,P,O,D,I){i.call(this,o,d,y,S,C,A,M,L,P,O),this.key=l,this.getActiveValue=g,this.getEndValue=f,this.getStartValue=m,this.ease=p,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=D,this.interpolationData=I},reset:function(s){i.prototype.reset.call(this);var o=this.tween.targets[this.targetIndex],d=this.key;s&&(o[d]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(o[d]=this.getActiveValue(o,d,0))},update:function(s){var o=this.tween,d=o.totalTargets,l=this.targetIndex,f=o.targets[l],m=this.key;if(!f)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=s,this.elapsed<=0&&(this.elapsed=0,s=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(r.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(f,m,f[m],l,d,o),this.end=this.getEndValue(f,m,this.start,l,d,o),this.current=this.start,f[m]=this.start,this.setPlayingForwardState(),!0;var g=this.isPlayingForward(),p=this.isPlayingBackward();if(g||p){var y=this.elapsed,S=this.duration,C=0,A=!1;y+=s,y>=S?(C=y-S,y=S,A=!0):y<0&&(y=0);var M=u(y/S,0,1);this.elapsed=y,this.progress=M,this.previous=this.current,g||(M=1-M);var L=this.ease(M);this.interpolation?this.current=this.interpolation(this.interpolationData,L):this.current=this.start+(this.end-this.start)*L,f[m]=this.current,A&&(g?this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(C):this.setStateFromStart(C)),this.dispatchEvent(r.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(s,o){var d=this.tween;if(!d.isSeeking){var l=d.targets[this.targetIndex],f=this.key,m=this.current,g=this.previous;d.emit(s,d,f,l,m,g);var p=d.callbacks[o];p&&p.func.apply(d.callbackScope,[d,l,f,m,g].concat(p.params))}},destroy:function(){i.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});h.exports=a},42220:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(95042),u=e(45319),n=e(83419),r=e(842),a=new n({Extends:i,initialize:function(o,d,l,f,m,g,p,y,S,C,A){i.call(this,o,d,m,g,!1,p,y,S,C,A),this.key="texture",this.startTexture=null,this.endTexture=l,this.startFrame=null,this.endFrame=f,this.yoyo=y!==0},reset:function(s){i.prototype.reset.call(this);var o=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=o.texture.key,this.startFrame=o.frame.name),s&&o.setTexture(this.startTexture,this.startFrame)},update:function(s){var o=this.tween,d=this.targetIndex,l=o.targets[d];if(!l)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=s,this.elapsed<=0&&(this.elapsed=0,s=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(r.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&l.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var f=this.isPlayingForward(),m=this.isPlayingBackward();if(f||m){var g=this.elapsed,p=this.duration,y=0,S=!1;g+=s,g>=p?(y=g-p,g=p,S=!0):g<0&&(g=0);var C=u(g/p,0,1);this.elapsed=g,this.progress=C,S&&(f?(l.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(y)):(l.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(y))),this.dispatchEvent(r.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(s,o){var d=this.tween;if(!d.isSeeking){var l=d.targets[this.targetIndex],f=this.key;d.emit(s,d,f,l);var m=d.callbacks[o];m&&m.func.apply(d.callbackScope,[d,l,f].concat(m.params))}},destroy:function(){i.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});h.exports=a},86353:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};h.exports=w},83419:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(a){return!!a.get&&typeof a.get=="function"||!!a.set&&typeof a.set=="function"}function e(a,s,o){var d=o?a[s]:Object.getOwnPropertyDescriptor(a,s);return!o&&d.value&&typeof d.value=="object"&&(d=d.value),d&&w(d)?(typeof d.enumerable>"u"&&(d.enumerable=!0),typeof d.configurable>"u"&&(d.configurable=!0),d):!1}function i(a,s){var o=Object.getOwnPropertyDescriptor(a,s);return o?(o.value&&typeof o.value=="object"&&(o=o.value),o.configurable===!1):!1}function u(a,s,o,d){for(var l in s)if(s.hasOwnProperty(l)){var f=e(s,l,o);if(f!==!1){var m=d||a;if(i(m.prototype,l)){if(r.ignoreFinals)continue;throw new Error("cannot override final property '"+l+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(a.prototype,l,f)}else a.prototype[l]=s[l]}}function n(a,s){if(s){Array.isArray(s)||(s=[s]);for(var o=0;o<s.length;o++)u(a,s[o].prototype||s[o])}}function r(a){a||(a={});var s,o;if(a.initialize){if(typeof a.initialize!="function")throw new Error("initialize must be a function");s=a.initialize,delete a.initialize}else if(a.Extends){var d=a.Extends;s=function(){d.apply(this,arguments)}}else s=function(){};a.Extends?(s.prototype=Object.create(a.Extends.prototype),s.prototype.constructor=s,o=a.Extends,delete a.Extends):s.prototype.constructor=s;var l=null;return a.Mixins&&(l=a.Mixins,delete a.Mixins),n(s,l),u(s,a,!0,o),s}r.extend=u,r.mixin=n,r.ignoreFinals=!1,h.exports=r},29747:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(){};h.exports=w},20242:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(){return null};h.exports=w},71146:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r){if(r===void 0&&(r=e),u>0){var a=u-e.length;if(a<=0)return null}if(!Array.isArray(i))return e.indexOf(i)===-1?(e.push(i),n&&n.call(r,i),i):null;for(var s=i.length-1;s>=0;)e.indexOf(i[s])!==-1&&i.splice(s,1),s--;if(s=i.length,s===0)return null;u>0&&s>a&&(i.splice(a),s=a);for(var o=0;o<s;o++){var d=i[o];e.push(d),n&&n.call(r,d)}return i};h.exports=w},51067:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n,r,a){if(u===void 0&&(u=0),a===void 0&&(a=e),n>0){var s=n-e.length;if(s<=0)return null}if(!Array.isArray(i))return e.indexOf(i)===-1?(e.splice(u,0,i),r&&r.call(a,i),i):null;for(var o=i.length-1;o>=0;)e.indexOf(i[o])!==-1&&i.pop(),o--;if(o=i.length,o===0)return null;n>0&&o>s&&(i.splice(s),o=s);for(var d=o-1;d>=0;d--){var l=i[d];e.splice(u,0,l),r&&r.call(a,l)}return i};h.exports=w},66905:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.indexOf(i);return u!==-1&&u<e.length&&(e.splice(u,1),e.push(i)),i};h.exports=w},21612:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(82011),u=function(n,r,a,s,o){s===void 0&&(s=0),o===void 0&&(o=n.length);var d=0;if(i(n,s,o))for(var l=s;l<o;l++){var f=n[l];f[r]===a&&d++}return d};h.exports=u},95428:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n,r=[null];for(n=3;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<e.length;n++)r[0]=e[n],i.apply(u,r);return e};h.exports=w},36914:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(82011),u=function(n,r,a,s,o){if(s===void 0&&(s=0),o===void 0&&(o=n.length),i(n,s,o)){var d,l=[null];for(d=5;d<arguments.length;d++)l.push(arguments[d]);for(d=s;d<o;d++)l[0]=n[d],r.apply(a,l)}return n};h.exports=u},81957:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){if(i.length){if(i.length===1)return i[0]}else return NaN;var n=1,r,a;if(u){if(e<i[0][u])return i[0];for(;i[n][u]<e;)n++}else for(;i[n]<e;)n++;return n>i.length&&(n=i.length),u?(r=i[n-1][u],a=i[n][u],a-e<=e-r?i[n]:i[n-1]):(r=i[n-1],a=i[n],a-e<=e-r?a:r)};h.exports=w},43491:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i===void 0&&(i=[]);for(var u=0;u<e.length;u++)Array.isArray(e[u])?w(e[u],i):i.push(e[u]);return i};h.exports=w},46710:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(82011),u=function(n,r,a,s,o){s===void 0&&(s=0),o===void 0&&(o=n.length);var d=[];if(i(n,s,o))for(var l=s;l<o;l++){var f=n[l];(!r||r&&a===void 0&&f.hasOwnProperty(r)||r&&a!==void 0&&f[r]===a)&&d.push(f)}return d};h.exports=u},58731:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(82011),u=function(n,r,a,s,o){if(s===void 0&&(s=0),o===void 0&&(o=n.length),i(n,s,o))for(var d=s;d<o;d++){var l=n[d];if(!r||r&&a===void 0&&l.hasOwnProperty(r)||r&&a!==void 0&&l[r]===a)return l}return null};h.exports=u},26546:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){i===void 0&&(i=0),u===void 0&&(u=e.length);var n=i+Math.floor(Math.random()*u);return e[n]===void 0?null:e[n]};h.exports=w},85835:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){if(i===u)return e;var n=e.indexOf(i),r=e.indexOf(u);if(n<0||r<0)throw new Error("Supplied items must be elements of the same array");return n>r||(e.splice(n,1),r=e.indexOf(u),e.splice(r+1,0,i)),e};h.exports=w},83371:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){if(i===u)return e;var n=e.indexOf(i),r=e.indexOf(u);if(n<0||r<0)throw new Error("Supplied items must be elements of the same array");return n<r||(e.splice(n,1),r===0?e.unshift(i):e.splice(r,0,i)),e};h.exports=w},70864:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.indexOf(i);if(u>0){var n=e[u-1],r=e.indexOf(n);e[u]=n,e[r]=i}return e};h.exports=w},69693:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=e.indexOf(i);if(n===-1||u<0||u>=e.length)throw new Error("Supplied index out of bounds");return n!==u&&(e.splice(n,1),e.splice(u,0,i)),i};h.exports=w},40853:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.indexOf(i);if(u!==-1&&u<e.length-1){var n=e[u+1],r=e.indexOf(n);e[u]=n,e[r]=i}return e};h.exports=w},20283:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r=[],a,s=!1;if((u||n)&&(s=!0,u||(u=""),n||(n="")),i<e)for(a=e;a>=i;a--)s?r.push(u+a.toString()+n):r.push(a);else for(a=e;a<=i;a++)s?r.push(u+a.toString()+n):r.push(a);return r};h.exports=w},593:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(2284),u=function(n,r,a){n===void 0&&(n=0),r===void 0&&(r=null),a===void 0&&(a=1),r===null&&(r=n,n=0);for(var s=[],o=Math.max(i((r-n)/(a||1)),0),d=0;d<o;d++)s.push(n),n+=a;return s};h.exports=u},43886:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(u,n,r){var a=u[n];u[n]=u[r],u[r]=a}function e(u,n){return u<n?-1:u>n?1:0}var i=function(u,n,r,a,s){for(r===void 0&&(r=0),a===void 0&&(a=u.length-1),s===void 0&&(s=e);a>r;){if(a-r>600){var o=a-r+1,d=n-r+1,l=Math.log(o),f=.5*Math.exp(2*l/3),m=.5*Math.sqrt(l*f*(o-f)/o)*(d-o/2<0?-1:1),g=Math.max(r,Math.floor(n-d*f/o+m)),p=Math.min(a,Math.floor(n+(o-d)*f/o+m));i(u,n,g,p,s)}var y=u[n],S=r,C=a;for(w(u,r,n),s(u[a],y)>0&&w(u,r,a);S<C;){for(w(u,S,C),S++,C--;s(u[S],y)<0;)S++;for(;s(u[C],y)>0;)C--}s(u[r],y)===0?w(u,r,C):(C++,w(u,C,a)),C<=n&&(r=C+1),n<=C&&(a=C-1)}};h.exports=i},88492:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35154),u=e(33680),n=function(a,s,o){for(var d=[],l=0;l<a.length;l++)for(var f=0;f<s.length;f++)for(var m=0;m<o;m++)d.push({a:a[l],b:s[f]});return d},r=function(a,s,o){var d=i(o,"max",0),l=i(o,"qty",1),f=i(o,"random",!1),m=i(o,"randomB",!1),g=i(o,"repeat",0),p=i(o,"yoyo",!1),y=[];if(m&&u(s),g===-1)if(d===0)g=0;else{var S=a.length*s.length*l;p&&(S*=2),g=Math.ceil(d/S)}for(var C=0;C<=g;C++){var A=n(a,s,l);f&&u(A),y=y.concat(A),p&&(A.reverse(),y=y.concat(A))}return d&&y.splice(d),y};h.exports=r},72905:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(19133),u=function(n,r,a,s){s===void 0&&(s=n);var o;if(!Array.isArray(r))return o=n.indexOf(r),o!==-1?(i(n,o),a&&a.call(s,r),r):null;for(var d=r.length-1,l=[];d>=0;){var f=r[d];o=n.indexOf(f),o!==-1&&(i(n,o),l.push(f),a&&a.call(s,f)),d--}return l};h.exports=u},60248:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(19133),u=function(n,r,a,s){if(s===void 0&&(s=n),r<0||r>n.length-1)throw new Error("Index out of bounds");var o=i(n,r);return a&&a.call(s,o),o};h.exports=u},81409:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(82011),u=function(n,r,a,s,o){if(r===void 0&&(r=0),a===void 0&&(a=n.length),o===void 0&&(o=n),i(n,r,a)){var d=a-r,l=n.splice(r,d);if(s)for(var f=0;f<l.length;f++){var m=l[f];s.call(o,m)}return l}else return[]};h.exports=u},31856:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(19133),u=function(n,r,a){r===void 0&&(r=0),a===void 0&&(a=n.length);var s=r+Math.floor(Math.random()*a);return i(n,s)};h.exports=u},42169:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=e.indexOf(i),r=e.indexOf(u);return n!==-1&&r===-1?(e[n]=u,!0):!1};h.exports=w},86003:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i===void 0&&(i=1);for(var u=null,n=0;n<i;n++)u=e.shift(),e.push(u);return u};h.exports=w},49498:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){i===void 0&&(i=1);for(var u=null,n=0;n<i;n++)u=e.pop(),e.unshift(u);return u};h.exports=w},82011:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){var r=e.length;if(i<0||i>r||i>=u||u>r){if(n)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};h.exports=w},89545:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){var u=e.indexOf(i);return u!==-1&&u>0&&(e.splice(u,1),e.unshift(i)),i};h.exports=w},17810:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(82011),u=function(n,r,a,s,o){if(s===void 0&&(s=0),o===void 0&&(o=n.length),i(n,s,o))for(var d=s;d<o;d++){var l=n[d];l.hasOwnProperty(r)&&(l[r]=a)}return n};h.exports=u},33680:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){for(var i=e.length-1;i>0;i--){var u=Math.floor(Math.random()*(i+1)),n=e[i];e[i]=e[u],e[u]=n}return e};h.exports=w},90126:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i=/\D/g;return e.sort(function(u,n){return parseInt(u.replace(i,""),10)-parseInt(n.replace(i,""),10)}),e};h.exports=w},19133:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){if(!(i>=e.length)){for(var u=e.length-1,n=e[i],r=i;r<u;r++)e[r]=e[r+1];return e.length=u,n}};h.exports=w},19186:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(82264);function u(s,o){return String(s).localeCompare(o)}function n(s,o){var d=s.length;if(d<=1)return s;for(var l=new Array(d),f=1;f<d;f*=2){r(s,o,f,l);var m=s;s=l,l=m}return s}function r(s,o,d,l){var f=s.length,m=0,g=d*2,p,y,S,C,A;for(p=0;p<f;p+=g)for(y=p+d,S=y+d,y>f&&(y=f),S>f&&(S=f),C=p,A=y;;)if(C<y&&A<S)o(s[C],s[A])<=0?l[m++]=s[C++]:l[m++]=s[A++];else if(C<y)l[m++]=s[C++];else if(A<S)l[m++]=s[A++];else break}var a=function(s,o){if(o===void 0&&(o=u),!s||s.length<2)return s;if(i.features.stableSort)return s.sort(o);var d=n(s,o);return d!==s&&r(d,null,s.length,s),s};h.exports=a},25630:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){if(i===u)return e;var n=e.indexOf(i),r=e.indexOf(u);if(n<0||r<0)throw new Error("Supplied items must be elements of the same array");return e[n]=u,e[r]=i,e};h.exports=w},37105:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Matrix:e(54915),Add:e(71146),AddAt:e(51067),BringToTop:e(66905),CountAllMatching:e(21612),Each:e(95428),EachInRange:e(36914),FindClosestInSorted:e(81957),Flatten:e(43491),GetAll:e(46710),GetFirst:e(58731),GetRandom:e(26546),MoveDown:e(70864),MoveTo:e(69693),MoveUp:e(40853),MoveAbove:e(85835),MoveBelow:e(83371),NumberArray:e(20283),NumberArrayStep:e(593),QuickSelect:e(43886),Range:e(88492),Remove:e(72905),RemoveAt:e(60248),RemoveBetween:e(81409),RemoveRandomElement:e(31856),Replace:e(42169),RotateLeft:e(86003),RotateRight:e(49498),SafeRange:e(82011),SendToBack:e(89545),SetAll:e(17810),Shuffle:e(33680),SortByDigits:e(90126),SpliceOne:e(19133),StableSort:e(19186),Swap:e(25630)}},86922:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var i=e[0].length,u=1;u<e.length;u++)if(e[u].length!==i)return!1;return!0};h.exports=w},63362:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(41836),u=e(86922),n=function(r){var a="";if(!u(r))return a;for(var s=0;s<r.length;s++){for(var o=0;o<r[s].length;o++){var d=r[s][o].toString();d!=="undefined"?a+=i(d,2):a+="?",o<r[s].length-1&&(a+=" |")}if(s<r.length-1){a+=`
`;for(var l=0;l<r[s].length;l++)a+="---",l<r[s].length-1&&(a+="+");a+=`
`}}return a};h.exports=n},92598:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.reverse()};h.exports=w},21224:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){for(var i=0;i<e.length;i++)e[i].reverse();return e};h.exports=w},98717:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37829),u=function(n){return i(n,180)};h.exports=u},44657:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37829),u=function(n,r){r===void 0&&(r=1);for(var a=0;a<r;a++)n=i(n,90);return n};h.exports=u},37829:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(86922),u=e(2429),n=function(r,a){if(a===void 0&&(a=90),!i(r))return null;if(typeof a!="string"&&(a=(a%360+360)%360),a===90||a===-270||a==="rotateLeft")r=u(r),r.reverse();else if(a===-90||a===270||a==="rotateRight")r.reverse(),r=u(r);else if(Math.abs(a)===180||a==="rotate180"){for(var s=0;s<r.length;s++)r[s].reverse();r.reverse()}return r};h.exports=n},92632:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(37829),u=function(n,r){r===void 0&&(r=1);for(var a=0;a<r;a++)n=i(n,-90);return n};h.exports=u},69512:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(86003),u=e(49498),n=function(r,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),s!==0&&(s<0?i(r,Math.abs(s)):u(r,s)),a!==0)for(var o=0;o<r.length;o++){var d=r[o];a<0?i(d,Math.abs(a)):u(d,a)}return r};h.exports=n},2429:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){for(var i=e.length,u=e[0].length,n=new Array(u),r=0;r<u;r++){n[r]=new Array(i);for(var a=i-1;a>-1;a--)n[r][a]=e[a][r]}return n};h.exports=w},54915:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CheckMatrix:e(86922),MatrixToString:e(63362),ReverseColumns:e(92598),ReverseRows:e(21224),Rotate180:e(98717),RotateLeft:e(44657),RotateMatrix:e(37829),RotateRight:e(92632),Translate:e(69512),TransposeMatrix:e(2429)}},71334:h=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(i,u){for(var n=new Uint8Array(i),r=n.length,a=u?"data:"+u+";base64,":"",s=0;s<r;s+=3)a+=w[n[s]>>2],a+=w[(n[s]&3)<<4|n[s+1]>>4],a+=w[(n[s+1]&15)<<2|n[s+2]>>6],a+=w[n[s+2]&63];return r%3===2?a=a.substring(0,a.length-1)+"=":r%3===1&&(a=a.substring(0,a.length-2)+"=="),a};h.exports=e},53134:h=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),i=0;i<w.length;i++)e[w.charCodeAt(i)]=i;var u=function(n){n=n.substr(n.indexOf(",")+1);var r=n.length,a=r*.75,s=0,o,d,l,f;n[r-1]==="="&&(a--,n[r-2]==="="&&a--);for(var m=new ArrayBuffer(a),g=new Uint8Array(m),p=0;p<r;p+=4)o=e[n.charCodeAt(p)],d=e[n.charCodeAt(p+1)],l=e[n.charCodeAt(p+2)],f=e[n.charCodeAt(p+3)],g[s++]=o<<2|d>>4,g[s++]=(d&15)<<4|l>>2,g[s++]=(l&3)<<6|f&63;return m};h.exports=u},65839:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ArrayBufferToBase64:e(71334),Base64ToArrayBuffer:e(53134)}},91799:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Array:e(37105),Base64:e(65839),Objects:e(1183),String:e(31749),NOOP:e(29747),NULL:e(20242)}},41786:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i={};for(var u in e)Array.isArray(e[u])?i[u]=e[u].slice(0):i[u]=e[u];return i};h.exports=w},62644:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){var i,u,n;if(typeof e!="object"||e===null)return e;i=Array.isArray(e)?[]:{};for(n in e)u=e[n],i[n]=w(u);return i};h.exports=w},79291:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(41212),u=function(){var n,r,a,s,o,d,l=arguments[0]||{},f=1,m=arguments.length,g=!1;for(typeof l=="boolean"&&(g=l,l=arguments[1]||{},f=2),m===f&&(l=this,--f);f<m;f++)if((n=arguments[f])!=null)for(r in n)a=l[r],s=n[r],l!==s&&(g&&s&&(i(s)||(o=Array.isArray(s)))?(o?(o=!1,d=a&&Array.isArray(a)?a:[]):d=a&&i(a)?a:{},l[r]=u(g,d,s)):s!==void 0&&(l[r]=s));return l};h.exports=u},23568:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(75508),u=e(35154),n=function(r,a,s){var o=u(r,a,null);if(o===null)return s;if(Array.isArray(o))return i.RND.pick(o);if(typeof o=="object"){if(o.hasOwnProperty("randInt"))return i.RND.integerInRange(o.randInt[0],o.randInt[1]);if(o.hasOwnProperty("randFloat"))return i.RND.realInRange(o.randFloat[0],o.randFloat[1])}else if(typeof o=="function")return o(a);return o};h.exports=n},95540:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){var n=typeof e;return!e||n==="number"||n==="string"?u:e.hasOwnProperty(i)&&e[i]!==void 0?e[i]:u};h.exports=w},82840:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(35154),u=e(45319),n=function(r,a,s,o,d){d===void 0&&(d=s);var l=i(r,a,d);return u(l,s,o)};h.exports=n},35154:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){if(!e&&!n||typeof e=="number")return u;if(e&&e.hasOwnProperty(i))return e[i];if(n&&n.hasOwnProperty(i))return n[i];if(i.indexOf(".")!==-1){for(var r=i.split("."),a=e,s=n,o=u,d=u,l=!0,f=!0,m=0;m<r.length;m++)a&&a.hasOwnProperty(r[m])?(o=a[r[m]],a=a[r[m]]):l=!1,s&&s.hasOwnProperty(r[m])?(d=s[r[m]],s=s[r[m]]):f=!1;return l?o:f?d:u}else return u};h.exports=w},69036:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){for(var u=0;u<i.length;u++)if(!e.hasOwnProperty(i[u]))return!1;return!0};h.exports=w},1985:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){for(var u=0;u<i.length;u++)if(e.hasOwnProperty(i[u]))return!0;return!1};h.exports=w},97022:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.hasOwnProperty(i)};h.exports=w},41212:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};h.exports=w},46975:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(41786),u=function(n,r){var a=i(n);for(var s in r)a.hasOwnProperty(s)||(a[s]=r[s]);return a};h.exports=u},269:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(41786),u=function(n,r){var a=i(n);for(var s in r)a.hasOwnProperty(s)&&(a[s]=r[s]);return a};h.exports=u},18254:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=e(97022),u=function(n,r){for(var a={},s=0;s<r.length;s++){var o=r[s];i(n,o)&&(a[o]=n[o])}return a};h.exports=u},61622:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(i))return e[i]=u,!0;if(i.indexOf(".")!==-1){for(var n=i.split("."),r=e,a=e,s=0;s<n.length;s++)if(r.hasOwnProperty(n[s]))a=r,r=r[n[s]];else return!1;return a[n[n.length-1]]=u,!0}return!1};h.exports=w},1183:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Clone:e(41786),DeepCopy:e(62644),Extend:e(79291),GetAdvancedValue:e(23568),GetFastValue:e(95540),GetMinMaxValue:e(82840),GetValue:e(35154),HasAll:e(69036),HasAny:e(1985),HasValue:e(97022),IsPlainObject:e(41212),Merge:e(46975),MergeRight:e(269),Pick:e(18254),SetValue:e(61622)}},27902:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return e.replace(/%([0-9]+)/g,function(u,n){return i[Number(n)-1]})};h.exports=w},41836:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i,u,n){i===void 0&&(i=0),u===void 0&&(u=" "),n===void 0&&(n=3),e=e.toString();var r=0;if(i+1>=e.length)switch(n){case 1:e=new Array(i+1-e.length).join(u)+e;break;case 3:var a=Math.ceil((r=i-e.length)/2),s=r-a;e=new Array(s+1).join(u)+e+new Array(a+1).join(u);break;default:e=e+new Array(i+1-e.length).join(u);break}return e};h.exports=w},33628:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e,i){return i===0?e.slice(1):e.slice(0,i)+e.slice(i+1)};h.exports=w},27671:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e.split("").reverse().join("")};h.exports=w},45650:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=Math.random()*16|0,u=e==="x"?i:i&3|8;return u.toString(16)})};h.exports=w},35355:h=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(e){return e&&e[0].toUpperCase()+e.slice(1)};h.exports=w},31749:(h,w,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Format:e(27902),Pad:e(41836),RemoveAt:e(33628),Reverse:e(27671),UppercaseFirst:e(35355),UUID:e(45650)}}},v={};function x(h){var w=v[h];if(w!==void 0)return w.exports;var e=v[h]={exports:{}};return c[h](e,e.exports,x),e.exports}x.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var b=x(85454);return b})())}(Lu)),Lu.exports}var _i=UC();const Ex=R=>{let t;const c=new Set,v=(i,u)=>{const n=typeof i=="function"?i(t):i;if(!Object.is(n,t)){const r=t;t=u??(typeof n!="object"||n===null)?n:Object.assign({},t,n),c.forEach(a=>a(t,r))}},x=()=>t,w={setState:v,getState:x,getInitialState:()=>e,subscribe:i=>(c.add(i),()=>c.delete(i))},e=t=R(v,x,w);return w},VC=R=>R?Ex(R):Ex,YC=R=>R;function XC(R,t=YC){const c=fi.useSyncExternalStore(R.subscribe,fi.useCallback(()=>t(R.getState()),[R,t]),fi.useCallback(()=>t(R.getInitialState()),[R,t]));return fi.useDebugValue(c),c}const Mx=R=>{const t=VC(R),c=v=>XC(t,v);return Object.assign(c,t),c},aw=R=>R?Mx(R):Mx,Sg={MaxHp:"MAX HP",CurrentHp:"HP",Attack:"ATK",Defense:"DEF",Speed:"SPD",Dodge:"DGE",Crit:"CRT",Level:"LVL",Gold:"GOLD",Gem:"GEM",GoldEarnRate:"GOLD EARN RATE",Lives:"LIVES",LastLifeTimeStamp:"LAST LIFE USED AT",LastClaimLoginBonusTimeStamp:"NEXT LOGIN TIME",LoginCombo:"LOGIN COMBO",ShadowResist:"SHADOW RESIST",IceResist:"ICE RESIST",LightningResist:"LIGHTNING RESIST",FireResist:"FIRE RESIST",ShadowMultiplier:"SHADOW DMG MULT",IceMultiplier:"ICE DMG MULT",LightningMultiplier:"LIGHTNING DMG MULT",FireMultiplier:"FIRE DMG MULT",KnifeMultiplier:"KNIFE DMG MULT"},zC={MaxHp:"Max Health",CurrentHp:"Health",Attack:"Attack",Defense:"Defense",Speed:"Speed",Dodge:"Dodge Rate",Crit:"Crit Rate",Level:"Level",Gold:"Gold",Gem:"Gem",GoldEarnRate:"Coin Earn Rate",Lives:"Lives",LastLifeTimeStamp:"Last Life Time Stamp",LastClaimLoginBonusTimeStamp:"Next Login Time Stamp",LoginCombo:"Login Combo",ShadowResist:"Shadow Resist",IceResist:"Ice Resist",LightningResist:"Lightning Resist",FireResist:"Fire Resist",ShadowMultiplier:"Shadow Damage Multiplier",IceMultiplier:"Ice Damage Multiplier",LightningMultiplier:"Lightning Damage Multiplier",FireMultiplier:"Fire Damage Multiplier",KnifeMultiplier:"Knife Damage Multiplier"},Ur=R=>`${(R*100).toFixed(2)}%`,WC={Dodge:Ur,Crit:Ur,ShadowResist:Ur,IceResist:Ur,LightningResist:Ur,FireResist:Ur},Km={MaxHp:R=>Math.round(R),CurrentHp:R=>Math.round(R),Attack:R=>Math.round(R),Defense:R=>Math.round(R),Speed:R=>Math.round(R)},jC=(R,t,c)=>{if(c===0)return"+0";let v=c.toString();switch(R){case"Crit":case"Dodge":case"ShadowResist":case"IceResist":case"LightningResist":case"FireResist":v=np(R,c);break}return`${c>0?"+":""}${v}`},KC=(R,t,c)=>{if(c===0)return"+0";let v=c*100,x=v.toFixed(2).toString();return`${v>0?"+":""}${x}%`},np=(R,t)=>{const c=WC[R];return c?c(t):t.toString()},Uh=R=>{const t=R.modifierType==="multiply"?Ur(R.value):np(R.stat,R.value);return R.value>0?`+${t}`:t},nw=["MaxHp","Attack","Defense","Speed","Dodge","Crit"],$C={GoldEarnRate:1};function hr(R,t,c,v){var i;let x=v.filter(u=>u.type==="multiplier").filter(u=>u.stat===t).reduce((u,n)=>u+n.amount,1);const b=c.filter(u=>!!u).map(u=>u.definition.statModifiers).flat().filter(u=>u.type==="StatModifier"&&u.stat===t),h=b.filter(u=>u.modifierType==="add").reduce((u,n)=>u+n.value,0),w=b.filter(u=>u.modifierType==="multiply").reduce((u,n)=>u+n.value,1),e=(R+h)*x*w;return((i=Km[t])==null?void 0:i.call(Km,e))??e}const dr={timeZone:9,getLocalStartOfDay(){const t=new Date().getTime(),c=dr.timeZone*60*60*1e3,v=new Date(t+c);return v.setUTCHours(0,0,0,0),v.getTime()-c},getLocalEndOfDay(){const t=new Date().getTime(),c=dr.timeZone*60*60*1e3,v=new Date(t+c);return v.setUTCHours(23,59,59,999),v.getTime()-c},getLocalNextClaimLoginDay(R){const t=dr.timeZone*60*60*1e3,c=new Date(R+t);c.setDate(c.getDate()+1),c.setUTCHours(0,0,0,0);const v=c.getTime()-t;c.setUTCHours(23,59,59,999);const x=c.getTime()-t;return{start:v,end:x}}};function QC(R){return{...R,timestamp:Date.now()}}function ss(R,t="*"){const c=QC(R);typeof window<"u"&&window.parent?window.parent.postMessage(c,t):console.warn("postMessageWithTimestamp called outside of browser environment")}const rw=["MaxHp","Attack","Defense"];function Tg(R){return rw.includes(R)}function ow(R,t){if(t.type==="playerStatIncreased"){const{stat:c}=t;if(!Tg(c))return{ok:!1,error:`invalid stat ${c}, must be one of ${JSON.stringify(rw)}`}}else if(t.type==="missionStarted"){const{Lives:c}=R;if(c<1)return{ok:!1,error:"cannot start mission, not enough lives"}}else if(t.type==="missionCleared"||t.type==="missionFailed"){const{Lives:c}=R;if(c<0)return{ok:!1,error:"invalid state: player Lives was negative and this should never happen"}}else if(t.type==="playerSubscribed"){const{hasSubscribed:c}=R;if(c)return{ok:!1,error:"invalid state: player has already subscribed to reddit"}}else if(t.type==="battlePassExpirationUpdated"){const{expiration:c}=t;if(c<=Date.now())return{ok:!1,error:"invalid battle pass expiration time, must be in the future"}}return{ok:!0}}const Ru=3,Zo={MaxHp:200,Attack:100,Defense:25,Speed:10,Crit:.05,Dodge:.03},JC=Number.POSITIVE_INFINITY,ZC=1,qC=1,lw=2*60*60*1e3,hw=7,_C={MaxHp:R=>Zo.MaxHp+36*R,Attack:R=>Zo.Attack+6*R,Defense:R=>Zo.Defense+5*R,Speed:R=>Math.min(JC,Zo.Speed+1*R),Crit:R=>Math.min(ZC,Zo.Crit+.005*R),Dodge:R=>Math.min(qC,Zo.Dodge+.005*R)},dw=[{day:1,gold:40},{day:2,gold:60},{day:3,gold:80},{day:4,gold:100},{day:5,gold:150},{day:6,gold:225},{day:7,gold:400}],eA={gem:15};function rp(R){if(R===1)return 40;if(R===2)return 85;if(R===3)return 140;const t=Math.ceil(200+.5*Math.pow(R-1,2.3));return Math.ceil(t/5)*5}function uw(R,t){return{key:R,level:t,value:_C[R](t)}}function tA(R,t){const{start:c,end:v}=dr.getLocalNextClaimLoginDay(R.LastClaimLoginBonusTimeStamp);return R.LastClaimLoginBonusTimeStamp==0||c<=t.timestamp&&t.timestamp<=v}function cw(R){const t=R.LoginCombo+1,c=dw[(t-1)%hw];return c!=null&&c.gold?{Gold:c.gold}:null}function iA(){return eA}function sA(R,t){let c=R.LoginCombo,v=R.LastClaimLoginBonusTimeStamp;const x=tA(R,t);let b=null;return x&&(v=t.timestamp,c+=1,b=cw(R)),{newClaimLoginBonusTimeStamp:v,newLoginCombo:c,nextReward:b}}function aA(R,t){const{end:c}=dr.getLocalNextClaimLoginDay(R.LastClaimLoginBonusTimeStamp);return t.timestamp>c&&(R.LastClaimLoginBonusTimeStamp=0,R.LoginCombo=0),R}function nA(R,t){if(!ow(R,t).ok)return R;if(t.type==="playerLogin"){if(R=aA(R,t),R.Lives<Ru){const x=(t.timestamp-R.LastLifeTimeStamp)/lw,b=Math.floor(x);if(b>0){const h=Math.min(Ru,R.Lives+b);return{...R,Lives:h,LastLifeTimeStamp:t.timestamp}}}return R}else if(t.type==="playerLoginBonusClaimed"){const{newClaimLoginBonusTimeStamp:v,newLoginCombo:x}=sA(R,t);return{...R,LastClaimLoginBonusTimeStamp:v,LoginCombo:x}}else{if(t.type==="playerSubscribed")return{...R,hasSubscribed:!0};if(t.type==="playerLivesUpdated"){const{amount:v}=t;return{...R,Lives:Math.max(0,R.Lives+v)}}else if(t.type==="playerStatIncreased"){const{stat:v}=t,{Level:x}=R,b={...R.stats};return b[v]=uw(v,b[v].level+1),{...R,stats:b,Level:x+1}}else if(t.type==="missionStarted"){const v=R.Lives===Ru?t.timestamp:R.LastLifeTimeStamp,x=Math.max(0,R.Lives-1);return{...R,startedMissions:{...R.startedMissions,[t.seed]:t.timestamp},LastLifeTimeStamp:v,Lives:x}}else if(t.type==="missionCleared"){const{seed:v,timestamp:x}=t,b={...R.clearedMissions},h=R.startedMissions[v],w=isNaN(h)?0:x-h;b[v]={seed:v,cleared_timestamp:x,duration:w};const e={...R.startedMissions};delete e[v];const i=R.Lives+1;return{...R,clearedMissions:b,clearedMissionsCount:R.clearedMissionsCount+1,startedMissions:e,Lives:i}}else{if(t.type==="missionFailed")return{...R};if(t.type==="profileReset"){const{key:v}=t;if(v==="all")return pl();{const x=pl(),b={...R,[v]:x[v]};return v==="stats"?b.Level=x.Level:v==="clearedMissions"&&(b.clearedMissionsCount=0),b}}else if(t.type==="battlePassExpirationUpdated"){const{expiration:v}=t;return{...R,battlePassExpiration:v}}}}return R}function $m(R){ss(R)}function rA(){return new Promise(R=>{const t=c=>{const{type:v,data:x}=c.data??{};if(v==="devvit-message"){const{message:b}=x;if(b.type==="playerProfile"){window.removeEventListener("message",t);const h={...b.data.stats};R(h)}}};window.addEventListener("message",t)})}const oA=(R,t=!1)=>{const c=v=>{const{type:x,data:b}=v.data;if(x==="devvit-message"){const{message:h}=b;if(h.type==="playerProfile"){const w={...h.data.stats};R(w)}}};return window.addEventListener("message",c,{once:t}),()=>{window.removeEventListener("message",c)}};class lA{constructor(){this.profile=pl()}async getPlayerStatsAsync(){const t=new Promise((c,v)=>{const x=b=>{const{type:h,data:w}=b.data;if(h==="devvit-message"){const{message:e}=w;e.type==="playerProfile"&&(window.removeEventListener("message",x),this.profile={...e.data.stats},c(this.profile))}};window.addEventListener("message",x)});return $m({type:"getPlayerProfile"}),t}registerStatsListener(t,c=!1){return oA(t,c)}async subscribeSubRedditAsync(){const t=rA();return $m({type:"playerSubscribed"}),t}async initialLoginAsync(){return this.dispatchPlayerAction({type:"playerLogin"})}async dispatchPlayerAction(t){const c=this.profile,v=ow(c,t);if(!v.ok)return console.error("devvitPostMessage: invalid message",t,"profile",c,"error",v.error),Promise.resolve(c);$m(t);const x=nA(c,{...t,timestamp:Date.now()});return this.profile=x,Promise.resolve(x)}async claimLoginBonusAsync(){return this.dispatchPlayerAction({type:"playerLoginBonusClaimed"})}async updateLivesAsync(t){return this.dispatchPlayerAction({type:"playerLivesUpdated",amount:t})}async increaseStatAsync(t){return this.dispatchPlayerAction({type:"playerStatIncreased",stat:t})}startMissionAsync(t){return this.dispatchPlayerAction({type:"missionStarted",seed:t})}clearMissionAsync(t,c){return this.dispatchPlayerAction({type:"missionCleared",seed:t,playerHp:c})}failMissionAsync(t){return this.dispatchPlayerAction({type:"missionFailed",seed:t})}profileResetAsync(t){return this.dispatchPlayerAction({type:"profileReset",key:t})}getUpgradeCost(t){return rp(t)}async getNextRewardAsync(){const t=await this.getPlayerStatsAsync();return cw(t)}}const hA=nw.map(R=>{const t=uw(R,0);return[R,t]}),dA=Object.fromEntries(hA),uA={stats:dA,clearedMissions:{},clearedMissionsCount:0,startedMissions:{},Level:1,Lives:3,LastLifeTimeStamp:Date.now(),LastClaimLoginBonusTimeStamp:0,LoginCombo:0,hasSubscribed:!1,battlePassExpiration:0};function pl(){return{...uA}}function Vh(R){return new lA}const cA={mossy_forest:"mossyForestLoot",ruined_path:"ruinedPathLoot",fields:"fieldsLoot",mountain_pass:"mountainPassLoot",seaside_cliffs:"seasideCliffsLoot",outer_temple:"outerTempleLoot",forbidden_city:"forbiddenCityLoot",new_eden:"newEdenLoot",haunted_forest:"hauntedForestLoot"},fA={mossy_forest:"bossRushMossyForestLoot",ruined_path:"bossRushRuinedPathLoot",fields:"bossRushFieldsLoot",mountain_pass:"bossRushMountainPassLoot",seaside_cliffs:"bossRushSeasideCliffsLoot",outer_temple:"bossRushOuterTempleLoot",forbidden_city:"bossRushForbiddenCityLoot",new_eden:"bossRushNewEdenLoot",haunted_forest:"bossRushMossyForestLoot"},vt={emptyDropLoot:{type:"always",tiers:[{minLevel:1,items:[]}]},missionGoldLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:5,items:[{id:"Gold",weight:9,quantity:[100,125]},{id:"Gem",weight:1,quantity:[2,5]}]},{minLevel:6,maxLevel:20,items:[{id:"Gold",weight:9,quantity:[75,150]},{id:"Gem",weight:1,quantity:[2,5]}]},{minLevel:21,maxLevel:23,items:[{id:"Gold",weight:1,quantity:[125,150]}]},{minLevel:24,maxLevel:40,items:[{id:"Gold",weight:9,quantity:[150,175]},{id:"Gem",weight:1,quantity:[2,5]}]},{minLevel:41,maxLevel:43,items:[{id:"Gold",weight:1,quantity:[150,200]}]},{minLevel:44,maxLevel:60,items:[{id:"Gold",weight:9,quantity:[200,250]},{id:"Gem",weight:1,quantity:[2,5]}]},{minLevel:61,maxLevel:63,items:[{id:"Gold",weight:1,quantity:[200,300]}]},{minLevel:64,maxLevel:80,items:[{id:"Gold",weight:9,quantity:[300,350]},{id:"Gem",weight:1,quantity:[2,5]}]},{minLevel:81,maxLevel:83,items:[{id:"Gold",weight:1,quantity:[300,400]}]},{minLevel:84,maxLevel:100,items:[{id:"Gold",weight:9,quantity:[400,450]},{id:"Gem",weight:1,quantity:[2,5]}]},{minLevel:101,maxLevel:103,items:[{id:"Gold",weight:1,quantity:[400,500]}]},{minLevel:104,maxLevel:120,items:[{id:"Gold",weight:9,quantity:[500,600]},{id:"Gem",weight:1,quantity:[2,5]}]},{minLevel:121,maxLevel:123,items:[{id:"Gold",weight:1,quantity:[600,700]}]},{minLevel:124,maxLevel:140,items:[{id:"Gold",weight:9,quantity:[700,1050]},{id:"Gem",weight:1,quantity:[2,5]}]},{minLevel:141,maxLevel:143,items:[{id:"Gold",weight:1,quantity:[800,1100]}]},{minLevel:144,maxLevel:160,items:[{id:"Gold",weight:9,quantity:[900,1250]},{id:"Gem",weight:1,quantity:[2,5]}]},{minLevel:161,maxLevel:163,items:[{id:"Gold",weight:1,quantity:[1250,2e3]}]},{minLevel:164,maxLevel:180,items:[{id:"Gold",weight:9,quantity:[2e3,3e3]},{id:"Gem",weight:1,quantity:[2,5]}]},{minLevel:181,items:[{id:"Gold",weight:9,quantity:[3e3,5e3]},{id:"Gem",weight:1,quantity:[2,5]}]}]},missionMapLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:5,items:[{id:"MapFieldsUncommon",weight:16},{id:"MapMossyForestUncommon",weight:2},{id:"MapHauntedForestMythic",weight:5},{tableId:"emptyDropLoot",weight:7},{id:"MapFieldsRare",weight:1}]},{minLevel:6,maxLevel:20,items:[{id:"MapFieldsUncommon",weight:8},{id:"MapMossyForestUncommon",weight:16},{id:"MapRuinedPathUncommon",weight:8},{id:"MapHauntedForestMythic",weight:9},{tableId:"emptyDropLoot",weight:22},{id:"MapFieldsRare",weight:1},{id:"MapMossyForestRare",weight:1},{id:"MapRuinedPathRare",weight:1}]},{minLevel:21,maxLevel:40,items:[{id:"MapRuinedPathUncommon",weight:12},{id:"MapMossyForestUncommon",weight:4},{id:"MapHauntedForestMythic",weight:6},{id:"MapMountainPassUncommon",weight:4},{tableId:"emptyDropLoot",weight:23},{id:"MapRuinedPathRare",weight:1},{id:"MapMossyForestRare",weight:1},{id:"MapMountainPassRare",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"MapMountainPassUncommon",weight:12},{id:"MapRuinedPathUncommon",weight:4},{id:"MapHauntedForestMythic",weight:6},{id:"MapSeasideCliffsUncommon",weight:4},{tableId:"emptyDropLoot",weight:26},{id:"MapMountainPassRare",weight:1},{id:"MapRuinedPathRare",weight:1},{id:"MapSeasideCliffsRare",weight:1}]},{minLevel:61,maxLevel:80,items:[{id:"MapSeasideCliffsUncommon",weight:12},{id:"MapOuterTempleUncommon",weight:4},{id:"MapHauntedForestMythic",weight:6},{id:"MapMountainPassUncommon",weight:4},{tableId:"emptyDropLoot",weight:35},{id:"MapSeasideCliffsRare",weight:1},{id:"MapOuterTempleRare",weight:1},{id:"MapMountainPassRare",weight:1}]},{minLevel:81,maxLevel:120,items:[{id:"MapOuterTempleUncommon",weight:8},{id:"MapSeasideCliffsUncommon",weight:8},{id:"MapRuinedPathUncommon",weight:8},{id:"MapHauntedForestMythic",weight:9},{id:"MapForbiddenCityUncommon",weight:3},{id:"MapMountainPassUncommon",weight:8},{id:"MapOuterTempleRare",weight:1},{id:"MapSeasideCliffsRare",weight:1},{id:"MapRuinedPathRare",weight:1},{id:"MapMountainPassRare",weight:1},{tableId:"emptyDropLoot",weight:70}]},{minLevel:121,maxLevel:140,items:[{id:"MapMountainPassRare",weight:1},{id:"MapMountainPassUncommon",weight:8},{id:"MapMountainPassUncommon",weight:8},{id:"MapHauntedForestMythic",weight:21},{id:"MapOuterTempleUncommon",weight:8},{id:"MapRuinedPathRare",weight:1},{id:"MapRuinedPathUncommon",weight:8},{id:"MapSeasideCliffsRare",weight:1},{id:"MapSeasideCliffsUncommon",weight:8},{id:"MapNewEdenUncommon",weight:8},{id:"MapForbiddenCityRare",weight:2},{id:"MapForbiddenCityUncommon",weight:32},{tableId:"emptyDropLoot",weight:150}]},{minLevel:141,items:[{id:"MapForbiddenCityRare",weight:1},{id:"MapMountainPassRare",weight:1},{id:"MapOuterTempleRare",weight:1},{id:"MapNewEdenRare",weight:2},{id:"MapSeasideCliffsRare",weight:1},{id:"MapForbiddenCityUncommon",weight:16},{id:"MapMountainPassUncommon",weight:8},{id:"MapHauntedForestMythic",weight:18},{id:"MapNewEdenUncommon",weight:24},{id:"MapOuterTempleUncommon",weight:8},{id:"MapSeasideCliffsUncommon",weight:8},{tableId:"emptyDropLoot",weight:130}]}]},fieldsEquipLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:5,items:[{id:"ChippedPendant",weight:10},{id:"BlazingAmulet",weight:10},{id:"RopeBraid",weight:10},{id:"BladedBelt",weight:10},{id:"ProtectiveMantle",weight:10},{id:"LeatherTunic",weight:10},{id:"ShieldingHelm",weight:10},{id:"TwineCinch",weight:10},{id:"RawhideCap",weight:10},{id:"TarnishedBand",weight:10},{id:"HeavyBand",weight:10},{id:"SimpleCutlass",weight:18},{id:"RusticSword",weight:20},{id:"RusticBelt",weight:10},{id:"ChippedShortsword",weight:15},{id:"VengefulLocket",weight:4},{id:"ConjurersCap",weight:4},{id:"HardenedGarb",weight:4},{id:"ToughHelmet",weight:4},{id:"BronzeAmulet",weight:2},{id:"FragmentOfTheGreatSword",weight:2}]},{minLevel:6,maxLevel:20,items:[{id:"BlazingAmulet",weight:7},{id:"ChippedPendant",weight:7},{id:"RopeBraid",weight:7},{id:"ShieldingHelm",weight:7},{id:"TwineCinch",weight:7},{id:"SimpleCutlass",weight:15},{id:"ProtectiveMantle",weight:7},{id:"TarnishedBand",weight:7},{id:"BladedBelt",weight:7},{id:"LeatherTunic",weight:7},{id:"RawhideCap",weight:7},{id:"RusticSword",weight:15},{id:"HeavyBand",weight:7},{id:"RuggedJerkin",weight:7},{id:"ChippedShortsword",weight:20},{id:"HardenedGarb",weight:4},{id:"TwineCord",weight:2},{id:"ToughHelmet",weight:4},{id:"BattlereadyBlade",weight:2},{id:"VengefulLocket",weight:7},{id:"BlueprintShieldingBand",weight:1},{id:"BronzeAmulet",weight:4},{id:"ChargedFalchion",weight:2},{id:"BlueprintBlazingShortsword",weight:2},{id:"BlueprintFrozenShortsword",weight:1},{id:"BlueprintElectricShortsword",weight:1},{id:"BlueprintDarkShortsword",weight:1},{id:"PhantomBladeSword",weight:1},{id:"FragmentOfTheGreatSword",weight:1},{id:"IntricateHeadgear",weight:1},{id:"PowerVest",weight:1},{id:"Soulplate",weight:1},{id:"KnifeCollectorsBelt",weight:1},{id:"HeavyBelt",weight:7},{id:"AmberfireRing",weight:1},{id:"LuckstoneRing",weight:7},{id:"HastySash",weight:7},{id:"WrathfulLocket",weight:7},{id:"BenevolentCharm",weight:1}]},{minLevel:21,items:[{id:"BlazingAmulet",weight:2},{id:"ConfoundingMask",weight:4},{id:"ChippedPendant",weight:2},{id:"RopeBraid",weight:2},{id:"BladedBelt",weight:2},{id:"ProtectiveMantle",weight:2},{id:"LeatherTunic",weight:2},{id:"ShieldingHelm",weight:2},{id:"TarnishedBand",weight:2},{id:"RawhideCap",weight:2},{id:"HeavyBand",weight:2},{id:"RuggedJerkin",weight:6},{id:"TwineCinch",weight:6},{id:"SimpleCutlass",weight:2},{id:"RusticSword",weight:2},{id:"ChippedShortsword",weight:2},{id:"VengefulLocket",weight:2},{id:"HardenedGarb",weight:4},{id:"ToughHelmet",weight:4},{id:"HastySash",weight:3},{id:"BattlereadyBlade",weight:4},{id:"BronzeAmulet",weight:3},{id:"ChargedFalchion",weight:2},{id:"TwineCord",weight:2},{id:"PhantomBladeSword",weight:1},{id:"IntricateHeadgear",weight:2},{id:"PowerVest",weight:4},{id:"ConjurersCap",weight:4},{id:"Soulplate",weight:1},{id:"KnifeCollectorsBelt",weight:2},{id:"FragmentOfTheGreatSword",weight:2},{id:"HeavyBelt",weight:2},{id:"AmberfireRing",weight:3},{id:"LuckstoneRing",weight:2},{id:"WrathfulLocket",weight:2},{id:"BenevolentCharm",weight:2}]}]},fieldsEquipWrapperLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{tableId:"fieldsEquipLoot",weight:9},{tableId:"emptyDropLoot",weight:1}]},{minLevel:4,maxLevel:20,items:[{tableId:"fieldsEquipLoot",weight:9},{tableId:"emptyDropLoot",weight:1}]},{minLevel:21,maxLevel:23,items:[{tableId:"fieldsEquipLoot",weight:4},{tableId:"emptyDropLoot",weight:6}]},{minLevel:24,maxLevel:40,items:[{tableId:"fieldsEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:41,maxLevel:43,items:[{tableId:"fieldsEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:44,maxLevel:60,items:[{tableId:"fieldsEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:61,maxLevel:63,items:[{tableId:"fieldsEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:64,maxLevel:80,items:[{tableId:"fieldsEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:81,maxLevel:83,items:[{tableId:"fieldsEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:84,maxLevel:100,items:[{tableId:"fieldsEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:101,maxLevel:103,items:[{tableId:"fieldsEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:104,maxLevel:120,items:[{tableId:"fieldsEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:121,maxLevel:123,items:[{tableId:"fieldsEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:124,items:[{tableId:"fieldsEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]}]},fieldsLoot:{type:"always",tiers:[{minLevel:1,items:[{tableId:"missionGoldLoot"},{tableId:"fieldsEquipWrapperLoot"},{tableId:"missionMapLoot"}]}]},mossyForestEquipLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:20,items:[{id:"PhaseCharm",weight:8},{id:"HastySash",weight:8},{id:"RuggedJerkin",weight:8},{id:"BloodiedChainMail",weight:8},{id:"SturdyHeadguard",weight:8},{id:"LeatherCap",weight:8},{id:"MuscleRing",weight:8},{id:"CopperRing",weight:8},{id:"SturdyCleaver",weight:10},{id:"SerratedSword",weight:10},{id:"WarpstoneAmulet",weight:5},{id:"BulwarkChain",weight:5},{id:"FlawedClasp",weight:5},{id:"SilkenRobe",weight:5},{id:"BrightPlate",weight:5},{id:"RestorationHelm",weight:5},{id:"ConfoundingMask",weight:3},{id:"JaggedRing",weight:5},{id:"BluntBludgeon",weight:5},{id:"AdventurersBlade",weight:5},{id:"BrutalBlade",weight:5},{id:"WraithSash",weight:4},{id:"DefensiveCharm",weight:2},{id:"AudacityChain",weight:2},{id:"ShadowbaneCirclet",weight:2},{id:"BattlereadyBlade",weight:5},{id:"RazorRing",weight:2},{id:"Forgefang",weight:2},{id:"PhantomBladeSword",weight:2},{id:"IntricateHeadgear",weight:2},{id:"PowerVest",weight:3},{id:"Soulplate",weight:1},{id:"KnifeCollectorsBelt",weight:2},{id:"HeavyBelt",weight:8},{id:"AmberfireRing",weight:3},{id:"LuckstoneRing",weight:8},{id:"WrathfulLocket",weight:8},{id:"BenevolentCharm",weight:2}]},{minLevel:21,maxLevel:40,items:[{id:"PhaseCharm",weight:3},{id:"HastySash",weight:6},{id:"RuggedJerkin",weight:6},{id:"ChippedShortsword",weight:6},{id:"BrutalBlade",weight:4},{id:"BloodiedChainMail",weight:3},{id:"SturdyHeadguard",weight:3},{id:"LeatherCap",weight:6},{id:"MuscleRing",weight:3},{id:"CopperRing",weight:3},{id:"SturdyCleaver",weight:3},{id:"SerratedSword",weight:3},{id:"CordovanHood",weight:3},{id:"WarpstoneAmulet",weight:6},{id:"BulwarkChain",weight:6},{id:"FlawedClasp",weight:6},{id:"SilkenRobe",weight:6},{id:"BrightPlate",weight:6},{id:"RingOfRepair",weight:6},{id:"RestorationHelm",weight:6},{id:"ConfoundingMask",weight:6},{id:"JaggedRing",weight:6},{id:"BluntBludgeon",weight:6},{id:"AdventurersBlade",weight:6},{id:"WraithSash",weight:4},{id:"BlueprintStormWrathBelt",weight:2},{id:"DefensiveCharm",weight:3},{id:"AudacityChain",weight:3},{id:"ShadowbaneCirclet",weight:3},{id:"RazorRing",weight:3},{id:"Forgefang",weight:3},{id:"BlueprintBattlethirstyVest",weight:1},{id:"BattlereadyBlade",weight:6},{id:"BlueprintDeadlyRelic",weight:2},{id:"BlueprintThunderHelm",weight:2},{id:"PhantomBladeSword",weight:3},{id:"IntricateHeadgear",weight:3},{id:"PowerVest",weight:6},{id:"Soulplate",weight:1},{id:"KnifeCollectorsBelt",weight:3},{id:"HeavyBelt",weight:8},{id:"AmberfireRing",weight:6},{id:"LuckstoneRing",weight:8},{id:"WrathfulLocket",weight:8},{id:"BenevolentCharm",weight:3},{id:"HeavyBand",weight:6},{id:"TwineCinch",weight:6},{id:"ChargedFalchion",weight:6}]},{minLevel:41,items:[{id:"HastySash",weight:6},{id:"PhaseCharm",weight:3},{id:"RuggedJerkin",weight:6},{id:"RusticBelt",weight:6},{id:"ChippedShortsword",weight:6},{id:"LeatherCap",weight:6},{id:"BulwarkChain",weight:6},{id:"BrightPlate",weight:6},{id:"CopperRing",weight:3},{id:"SerratedSword",weight:3},{id:"SilkenRobe",weight:6},{id:"RingOfRepair",weight:6},{id:"RestorationHelm",weight:6},{id:"SturdyCleaver",weight:3},{id:"WarpstoneAmulet",weight:6},{id:"BlueprintStormWrathBelt",weight:2},{id:"BluntBludgeon",weight:6},{id:"BloodiedChainMail",weight:3},{id:"AdventurersBlade",weight:6},{id:"FlawedClasp",weight:6},{id:"SturdyHeadguard",weight:3},{id:"MuscleRing",weight:3},{id:"ConfoundingMask",weight:6},{id:"ConjurersCap",weight:6},{id:"JaggedRing",weight:6},{id:"DefensiveCharm",weight:4},{id:"AudacityChain",weight:4},{id:"ShadowbaneCirclet",weight:4},{id:"RazorRing",weight:4},{id:"Forgefang",weight:4},{id:"BlueprintBattlethirstyVest",weight:1},{id:"BattlereadyBlade",weight:6},{id:"BlueprintDeadlyRelic",weight:2},{id:"BlueprintThunderHelm",weight:2},{id:"PhantomBladeSword",weight:4},{id:"IntricateHeadgear",weight:4},{id:"PowerVest",weight:6},{id:"Soulplate",weight:2},{id:"KnifeCollectorsBelt",weight:4},{id:"HeavyBelt",weight:3},{id:"AmberfireRing",weight:6},{id:"LuckstoneRing",weight:3},{id:"WrathfulLocket",weight:3},{id:"BenevolentCharm",weight:4},{id:"HeavyBand",weight:6},{id:"TwineCinch",weight:6},{id:"ChargedFalchion",weight:6},{id:"FragmentOfTheGreatSword",weight:6}]}]},mossyForestEquipWrapperLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{tableId:"mossyForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:4,maxLevel:20,items:[{tableId:"mossyForestEquipLoot",weight:8},{tableId:"emptyDropLoot",weight:2}]},{minLevel:21,maxLevel:23,items:[{tableId:"mossyForestEquipLoot",weight:4},{tableId:"emptyDropLoot",weight:6}]},{minLevel:24,maxLevel:40,items:[{tableId:"mossyForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:41,maxLevel:43,items:[{tableId:"mossyForestEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:44,maxLevel:60,items:[{tableId:"mossyForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:61,maxLevel:63,items:[{tableId:"mossyForestEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:64,maxLevel:80,items:[{tableId:"mossyForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:81,maxLevel:83,items:[{tableId:"mossyForestEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:84,maxLevel:100,items:[{tableId:"mossyForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:101,maxLevel:103,items:[{tableId:"mossyForestEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:104,maxLevel:120,items:[{tableId:"mossyForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:121,maxLevel:123,items:[{tableId:"mossyForestEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:124,items:[{tableId:"mossyForestEquipLoot",weight:8},{tableId:"emptyDropLoot",weight:2}]}]},mossyForestLoot:{type:"always",tiers:[{minLevel:1,items:[{tableId:"missionGoldLoot"},{tableId:"mossyForestEquipWrapperLoot"},{tableId:"missionMapLoot"}]}]},mountainPassEquipLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:40,items:[{id:"PlatedBelt",weight:10},{id:"CrystalHeartCharm",weight:10},{id:"LifevineBelt",weight:10},{id:"InsulatedWrap",weight:10},{id:"RustedHelm",weight:10},{id:"GroundedPlate",weight:10},{id:"AcuityHelm",weight:10},{id:"GlacialShard2",weight:10},{id:"GlacialShard",weight:10},{id:"WizardSigil",weight:5},{id:"GroundingBelt",weight:5},{id:"GuardianPlate",weight:5},{id:"FlameguardJacket",weight:5},{id:"FuryBlade",weight:5},{id:"FlameguardSword",weight:5},{id:"GhostlyPendant",weight:1},{id:"RoughRazor",weight:10},{id:"MercenaryCuirass",weight:10},{id:"StackedSignet",weight:1},{id:"SalvationScimitar",weight:1},{id:"DoublePoleAxe",weight:1},{id:"SturdyCleaver",weight:10},{id:"PhaseCharm",weight:10},{id:"BloodiedChainMail",weight:10},{id:"SturdyHeadguard",weight:10},{id:"LeatherCap",weight:10},{id:"BlazingRing",weight:10}]},{minLevel:41,maxLevel:60,items:[{id:"PlatedBelt",weight:5},{id:"RustedHelm",weight:5},{id:"LifevineBelt",weight:5},{id:"CrystalHeartCharm",weight:5},{id:"InsulatedWrap",weight:5},{id:"GroundedPlate",weight:5},{id:"AcuityHelm",weight:5},{id:"GlacialShard2",weight:5},{id:"GlacialShard2",weight:5},{id:"GlacialShard",weight:5},{id:"WizardSigil",weight:3},{id:"RoughRazor",weight:2},{id:"MercenaryCuirass",weight:2},{id:"GroundingBelt",weight:3},{id:"GuardianPlate",weight:3},{id:"FlameguardJacket",weight:3},{id:"FuryBlade",weight:3},{id:"FlameguardSword",weight:3},{id:"GhostlyPendant",weight:1},{id:"StackedSignet",weight:1},{id:"SalvationScimitar",weight:1},{id:"DoublePoleAxe",weight:1}]},{minLevel:61,maxLevel:80,items:[{id:"PlatedBelt",weight:6},{id:"CrystalHeartCharm",weight:6},{id:"LifevineBelt",weight:6},{id:"InsulatedWrap",weight:6},{id:"GuardsBelt",weight:6},{id:"GroundedPlate",weight:6},{id:"AcuityHelm",weight:3},{id:"RustedHelm",weight:5},{id:"GlacialShard2",weight:6},{id:"GlacialShard",weight:6},{id:"WizardSigil",weight:16},{id:"BlueprintSmitingEdge",weight:1},{id:"GroundingBelt",weight:16},{id:"GuardianPlate",weight:16},{id:"FlameguardJacket",weight:16},{id:"FuryBlade",weight:16},{id:"FlameguardSword",weight:16},{id:"RoughRazor",weight:4},{id:"GhostlyPendant",weight:4},{id:"StackedSignet",weight:4},{id:"SalvationScimitar",weight:4},{id:"DoublePoleAxe",weight:4},{id:"BlueprintDrainingEdge",weight:1},{id:"BlueprintPhantomEdge",weight:1},{id:"BlueprintFerocityRing",weight:1},{id:"BlueprintDarkBargainCharm",weight:1}]},{minLevel:81,items:[{id:"FlameguardJacket",weight:20},{id:"PlatedBelt",weight:6},{id:"LifevineBelt",weight:6},{id:"GlacialShard2",weight:6},{id:"InsulatedWrap",weight:6},{id:"GuardsBelt",weight:6},{id:"CrystalHeartCharm",weight:6},{id:"GroundedPlate",weight:6},{id:"AcuityHelm",weight:6},{id:"GlacialShard",weight:6},{id:"RoughRazor",weight:4},{id:"WizardSigil",weight:20},{id:"BlueprintDarkBargainCharm",weight:1},{id:"GroundingBelt",weight:20},{id:"GuardianPlate",weight:20},{id:"FuryBlade",weight:20},{id:"FlameguardSword",weight:20},{id:"TwistedCharm",weight:4},{id:"GhostlyPendant",weight:8},{id:"StackedSignet",weight:8},{id:"SalvationScimitar",weight:8},{id:"DoublePoleAxe",weight:8},{id:"BlueprintDrainingEdge",weight:1},{id:"RustedHelm",weight:4},{id:"BlueprintFerocityRing",weight:1},{id:"BlueprintPhantomEdge",weight:1},{id:"BlueprintSmitingEdge",weight:1}]}]},mountainPassEquipWrapperLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{tableId:"mountainPassEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:4,maxLevel:20,items:[{tableId:"mountainPassEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:21,maxLevel:23,items:[{tableId:"mountainPassEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:24,maxLevel:40,items:[{tableId:"mountainPassEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:41,maxLevel:43,items:[{tableId:"mountainPassEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:44,maxLevel:60,items:[{tableId:"mountainPassEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:61,maxLevel:63,items:[{tableId:"mountainPassEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:64,maxLevel:80,items:[{tableId:"mountainPassEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:81,maxLevel:83,items:[{tableId:"mountainPassEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:84,maxLevel:100,items:[{tableId:"mountainPassEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:101,maxLevel:103,items:[{tableId:"mountainPassEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:104,maxLevel:120,items:[{tableId:"mountainPassEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:121,maxLevel:123,items:[{tableId:"mountainPassEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:124,items:[{tableId:"mountainPassEquipLoot",weight:8},{tableId:"emptyDropLoot",weight:2}]}]},mountainPassLoot:{type:"always",tiers:[{minLevel:1,items:[{tableId:"missionGoldLoot"},{tableId:"mountainPassEquipWrapperLoot"},{tableId:"missionMapLoot"}]}]},outerTempleEquipLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:40,items:[{id:"SturdyCleaver",weight:10},{id:"LuckyLocket",weight:7},{id:"SharkskinShirt",weight:3},{id:"LifevineBelt",weight:7},{id:"SerratedSword",weight:10},{id:"RawhideCap",weight:10},{id:"LeatherTunic",weight:10},{id:"GuardianPlate",weight:3},{id:"SawtoothAxe",weight:7},{id:"AudacityChain",weight:7},{id:"FlawedClasp",weight:7},{id:"GhostlyPendant",weight:1},{id:"StackedSignet",weight:1},{id:"SalvationScimitar",weight:1},{id:"DoublePoleAxe",weight:1},{id:"FuryBlade",weight:3}]},{minLevel:41,maxLevel:80,items:[{id:"SturdyCleaver",weight:1},{id:"SerratedSword",weight:1},{id:"AudacityChain",weight:5},{id:"RawhideCap",weight:1},{id:"LeatherTunic",weight:1},{id:"LuckyLocket",weight:5},{id:"LifevineBelt",weight:5},{id:"SawtoothAxe",weight:5},{id:"SharkskinShirt",weight:2},{id:"GuardianPlate",weight:4},{id:"FlawedClasp",weight:5},{id:"FuryBlade",weight:4},{id:"GhostlyPendant",weight:1},{id:"StackedSignet",weight:1},{id:"SalvationScimitar",weight:1},{id:"DoublePoleAxe",weight:1}]},{minLevel:81,items:[{id:"WizardSigil",weight:16},{id:"BlueprintSmitingEdge",weight:1},{id:"SurvivalCharm",weight:16},{id:"LifevineBelt",weight:8},{id:"GroundingBelt",weight:16},{id:"SharkskinShirt",weight:8},{id:"FlameguardJacket",weight:16},{id:"AcuityHelm",weight:8},{id:"TwilightBand",weight:8},{id:"FocusRing",weight:16},{id:"FlameguardSword",weight:16},{id:"GhostlyPendant",weight:4},{id:"PlatedBelt",weight:8},{id:"GuardianPlate",weight:16},{id:"StackedSignet",weight:4},{id:"SalvationScimitar",weight:4},{id:"DoublePoleAxe",weight:4},{id:"FuryBlade",weight:16},{id:"Shatterblade",weight:4},{id:"SeethingSash",weight:4},{id:"FuryVest",weight:4},{id:"BlueprintDrainingEdge",weight:1},{id:"BlueprintPhantomEdge",weight:1},{id:"BlueprintFerocityRing",weight:1},{id:"BlueprintDarkBargainCharm",weight:1},{id:"BlueprintCursedNaginata",weight:1}]}]},outerTempleEquipWrapperLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{tableId:"outerTempleEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:4,maxLevel:20,items:[{tableId:"outerTempleEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:21,maxLevel:23,items:[{tableId:"outerTempleEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:24,maxLevel:40,items:[{tableId:"outerTempleEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:41,maxLevel:43,items:[{tableId:"outerTempleEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:44,maxLevel:60,items:[{tableId:"outerTempleEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:61,maxLevel:63,items:[{tableId:"outerTempleEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:64,maxLevel:80,items:[{tableId:"outerTempleEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:81,maxLevel:83,items:[{tableId:"outerTempleEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:84,maxLevel:100,items:[{tableId:"outerTempleEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:101,maxLevel:103,items:[{tableId:"outerTempleEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:104,maxLevel:120,items:[{tableId:"outerTempleEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:121,maxLevel:123,items:[{tableId:"outerTempleEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:124,items:[{tableId:"outerTempleEquipLoot",weight:8},{tableId:"emptyDropLoot",weight:2}]}]},outerTempleLoot:{type:"always",tiers:[{minLevel:1,items:[{tableId:"missionGoldLoot"},{tableId:"outerTempleEquipWrapperLoot"},{tableId:"missionMapLoot"}]}]},ruinedPathEquipLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:40,items:[{id:"BlazingRing",weight:8},{id:"BatteredBroadsword",weight:8},{id:"CordovanHood",weight:8},{id:"RoughRazor",weight:3},{id:"CrystalHeartCharm",weight:5},{id:"WraithSash",weight:5},{id:"PainfulWrap",weight:5},{id:"RingOfRepair",weight:5},{id:"SharkskinShirt",weight:5},{id:"ChippedShortsword",weight:5},{id:"HastySash",weight:5},{id:"LeatherCap",weight:5},{id:"RustedHelm",weight:5},{id:"PaddedHelmet",weight:5},{id:"TwilightBand",weight:5},{id:"Stormseeker",weight:5},{id:"SawtoothAxe",weight:5},{id:"SurvivalCharm",weight:1},{id:"TwineCord",weight:1},{id:"SwiftCowl",weight:1},{id:"VanishingHood",weight:1},{id:"QuicksilverRing",weight:1},{id:"RuinedRod",weight:1},{id:"FocusRing",weight:1},{id:"ShadowSlicer",weight:1},{id:"HeavyBand",weight:5},{id:"RuggedJerkin",weight:5},{id:"TwineCinch",weight:5},{id:"ChargedFalchion",weight:5},{id:"GroundedPlate",weight:5}]},{minLevel:41,maxLevel:60,items:[{id:"BlazingRing",weight:5},{id:"BatteredBroadsword",weight:5},{id:"CrystalHeartCharm",weight:8},{id:"WraithSash",weight:8},{id:"BlueprintBattlethirstyVest",weight:1},{id:"RuinedRod",weight:1},{id:"PainfulWrap",weight:8},{id:"SharkskinShirt",weight:8},{id:"ChippedShortsword",weight:8},{id:"CordovanHood",weight:8},{id:"MercenaryCuirass",weight:8},{id:"RustedHelm",weight:8},{id:"PaddedHelmet",weight:8},{id:"GroundedPlate",weight:8},{id:"RoughRazor",weight:6},{id:"TwilightBand",weight:8},{id:"Stormseeker",weight:8},{id:"SawtoothAxe",weight:8},{id:"SurvivalCharm",weight:2},{id:"TwineCord",weight:2},{id:"ChargedFalchion",weight:2},{id:"SwiftCowl",weight:2},{id:"VanishingHood",weight:2},{id:"QuicksilverRing",weight:2},{id:"FocusRing",weight:2},{id:"ShadowSlicer",weight:2},{id:"BlueprintDeadlyRelic",weight:1},{id:"BlueprintStormWrathBelt",weight:1},{id:"BlueprintThunderHelm",weight:1},{id:"HeavyBand",weight:6},{id:"HastySash",weight:6},{id:"RuggedJerkin",weight:6},{id:"TwineCinch",weight:6},{id:"LeatherCap",weight:6}]},{minLevel:61,items:[{id:"BlazingRing",weight:3},{id:"RoughRazor",weight:6},{id:"CordovanHood",weight:6},{id:"BatteredBroadsword",weight:3},{id:"WraithSash",weight:9},{id:"BlueprintBattlethirstyVest",weight:1},{id:"CrystalHeartCharm",weight:9},{id:"PainfulWrap",weight:9},{id:"SharkskinShirt",weight:9},{id:"ChippedShortsword",weight:9},{id:"RustedHelm",weight:9},{id:"PaddedHelmet",weight:9},{id:"TwilightBand",weight:9},{id:"Stormseeker",weight:9},{id:"GroundedPlate",weight:9},{id:"SawtoothAxe",weight:9},{id:"SurvivalCharm",weight:3},{id:"TwineCord",weight:3},{id:"ChargedFalchion",weight:3},{id:"SwiftCowl",weight:3},{id:"VanishingHood",weight:3},{id:"QuicksilverRing",weight:3},{id:"FocusRing",weight:3},{id:"ShadowSlicer",weight:3},{id:"BlueprintDeadlyRelic",weight:1},{id:"RuinedRod",weight:1},{id:"BlueprintStormWrathBelt",weight:1},{id:"BlueprintThunderHelm",weight:1},{id:"HeavyBand",weight:6},{id:"MercenaryCuirass",weight:6},{id:"RuggedJerkin",weight:6},{id:"HastySash",weight:6},{id:"TwineCinch",weight:6},{id:"LeatherCap",weight:6}]}]},ruinedPathEquipWrapperLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{tableId:"ruinedPathEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:4,maxLevel:20,items:[{tableId:"ruinedPathEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:21,maxLevel:23,items:[{tableId:"ruinedPathEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:24,maxLevel:40,items:[{tableId:"ruinedPathEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:41,maxLevel:43,items:[{tableId:"ruinedPathEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:44,maxLevel:60,items:[{tableId:"ruinedPathEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:61,maxLevel:63,items:[{tableId:"ruinedPathEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:64,maxLevel:80,items:[{tableId:"ruinedPathEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:81,maxLevel:83,items:[{tableId:"ruinedPathEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:84,maxLevel:100,items:[{tableId:"ruinedPathEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:101,maxLevel:103,items:[{tableId:"ruinedPathEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:104,maxLevel:120,items:[{tableId:"ruinedPathEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:121,maxLevel:123,items:[{tableId:"ruinedPathEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:124,items:[{tableId:"ruinedPathEquipLoot",weight:8},{tableId:"emptyDropLoot",weight:2}]}]},ruinedPathLoot:{type:"always",tiers:[{minLevel:1,items:[{tableId:"missionGoldLoot"},{tableId:"ruinedPathEquipWrapperLoot"},{tableId:"missionMapLoot"}]}]},seasideCliffsEquipLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:60,items:[{id:"SturdyCleaver",weight:5},{id:"PhaseCharm",weight:5},{id:"BloodiedChainMail",weight:5},{id:"SturdyHeadguard",weight:5},{id:"LeatherCap",weight:5},{id:"CrystalHeartCharm",weight:1},{id:"BlazingRing",weight:5},{id:"GuardsBelt",weight:1},{id:"FlawedClasp",weight:1},{id:"SilkenRobe",weight:1},{id:"BluntBludgeon",weight:1},{id:"BrightPlate",weight:1},{id:"RestorationHelm",weight:1},{id:"PaddedHelmet",weight:1},{id:"JaggedRing",weight:1}]},{minLevel:61,maxLevel:80,items:[{id:"PlatedBelt",weight:6},{id:"CrystalHeartCharm",weight:6},{id:"InsulatedWrap",weight:6},{id:"GroundedPlate",weight:6},{id:"LeatherCap",weight:3},{id:"GlacialShard2",weight:6},{id:"BrutalBlade",weight:3},{id:"WizardSigil",weight:3},{id:"GroundingBelt",weight:3},{id:"GuardianPlate",weight:3},{id:"GuardianPlate",weight:3},{id:"FuryBlade",weight:3},{id:"FlameguardSword",weight:3},{id:"FuryBlade",weight:3},{id:"GhostlyPendant",weight:1},{id:"FuryVest",weight:1},{id:"StackedSignet",weight:1},{id:"SalvationScimitar",weight:1},{id:"DoublePoleAxe",weight:1},{id:"Shatterblade",weight:1},{id:"BuccaneersFriend",weight:1}]},{minLevel:81,items:[{id:"GroundedPlate",weight:12},{id:"LeatherCap",weight:8},{id:"PlatedBelt",weight:12},{id:"CrystalHeartCharm",weight:12},{id:"GlacialShard2",weight:12},{id:"InsulatedWrap",weight:12},{id:"WizardSigil",weight:24},{id:"BlueprintSmitingEdge",weight:1},{id:"GuardianPlate",weight:24},{id:"FuryBlade",weight:24},{id:"FlameguardSword",weight:24},{id:"GroundingBelt",weight:24},{id:"BrutalBlade",weight:12},{id:"GhostlyPendant",weight:8},{id:"GuardianPlate",weight:24},{id:"FuryBlade",weight:24},{id:"StackedSignet",weight:8},{id:"SalvationScimitar",weight:8},{id:"TwistedCharm",weight:24},{id:"DoublePoleAxe",weight:8},{id:"BuccaneersFriend",weight:8},{id:"FuryVest",weight:8},{id:"Shatterblade",weight:8},{id:"BlueprintDrainingEdge",weight:1},{id:"BlueprintPhantomEdge",weight:1},{id:"BlueprintFerocityRing",weight:1},{id:"BlueprintDarkBargainCharm",weight:1},{id:"BlueprintCursedNaginata",weight:1}]}]},seasideCliffsEquipWrapperLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{tableId:"seasideCliffsEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:4,maxLevel:20,items:[{tableId:"seasideCliffsEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:21,maxLevel:23,items:[{tableId:"seasideCliffsEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:24,maxLevel:40,items:[{tableId:"seasideCliffsEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:41,maxLevel:43,items:[{tableId:"seasideCliffsEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:44,maxLevel:60,items:[{tableId:"seasideCliffsEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:61,maxLevel:63,items:[{tableId:"seasideCliffsEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:64,maxLevel:80,items:[{tableId:"seasideCliffsEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:81,maxLevel:83,items:[{tableId:"seasideCliffsEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:84,maxLevel:100,items:[{tableId:"seasideCliffsEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:101,maxLevel:103,items:[{tableId:"seasideCliffsEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:104,maxLevel:120,items:[{tableId:"seasideCliffsEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:121,maxLevel:123,items:[{tableId:"seasideCliffsEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:124,items:[{tableId:"seasideCliffsEquipLoot",weight:8},{tableId:"emptyDropLoot",weight:2}]}]},seasideCliffsLoot:{type:"always",tiers:[{minLevel:1,items:[{tableId:"missionGoldLoot"},{tableId:"seasideCliffsEquipWrapperLoot"},{tableId:"missionMapLoot"}]}]},forbiddenCityEquipLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:40,items:[{id:"AudacityChain",weight:7},{id:"DoublePoleAxe",weight:1},{id:"FlawedClasp",weight:7},{id:"FuryBlade",weight:3},{id:"GhostlyPendant",weight:1},{id:"GuardianPlate",weight:3},{id:"LuckyLocket",weight:7},{id:"LifevineBelt",weight:7},{id:"SalvationScimitar",weight:1},{id:"SawtoothAxe",weight:7},{id:"SharkskinShirt",weight:3},{id:"StackedSignet",weight:1}]},{minLevel:41,maxLevel:80,items:[{id:"AudacityChain",weight:5},{id:"DoublePoleAxe",weight:1},{id:"FlawedClasp",weight:5},{id:"LifevineBelt",weight:5},{id:"FuryBlade",weight:4},{id:"GhostlyPendant",weight:1},{id:"GuardianPlate",weight:4},{id:"LuckyLocket",weight:5},{id:"SalvationScimitar",weight:1},{id:"SawtoothAxe",weight:5},{id:"SharkskinShirt",weight:3},{id:"StackedSignet",weight:1}]},{minLevel:81,items:[{id:"AcuityHelm",weight:2},{id:"DoublePoleAxe",weight:1},{id:"FlameguardJacket",weight:4},{id:"FlameguardSword",weight:4},{id:"FocusRing",weight:4},{id:"FuryBlade",weight:4},{id:"FuryVest",weight:1},{id:"GhostlyPendant",weight:1},{id:"GroundingBelt",weight:4},{id:"GuardianPlate",weight:4},{id:"LifevineBelt",weight:2},{id:"PlatedBelt",weight:2},{id:"SalvationScimitar",weight:1},{id:"SharkskinShirt",weight:2},{id:"Shatterblade",weight:1},{id:"StackedSignet",weight:1},{id:"TwinbladeBand",weight:1},{id:"SurvivalCharm",weight:4},{id:"TwilightBand",weight:2},{id:"WizardSigil",weight:4},{id:"ShadowDrinkerHelmUltimate",weight:2},{id:"DeadlyRelic",weight:2},{id:"ThunderHelm",weight:2},{id:"DarkBargainCharm",weight:2},{id:"ConductiveChestplate",weight:2},{id:"FrenziedSash",weight:2},{id:"FerocityRing",weight:2},{id:"SmitingEdge",weight:2},{id:"DrainingEdge",weight:2},{id:"PhantomEdge",weight:2}]}]},forbiddenCityEquipWrapperLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{tableId:"forbiddenCityEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:4,maxLevel:20,items:[{tableId:"forbiddenCityEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:21,maxLevel:23,items:[{tableId:"forbiddenCityEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:24,maxLevel:40,items:[{tableId:"forbiddenCityEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:41,maxLevel:43,items:[{tableId:"forbiddenCityEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:44,maxLevel:60,items:[{tableId:"forbiddenCityEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:61,maxLevel:63,items:[{tableId:"forbiddenCityEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:64,maxLevel:80,items:[{tableId:"forbiddenCityEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:81,maxLevel:83,items:[{tableId:"forbiddenCityEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:84,maxLevel:100,items:[{tableId:"forbiddenCityEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:101,maxLevel:103,items:[{tableId:"forbiddenCityEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:104,maxLevel:120,items:[{tableId:"forbiddenCityEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:121,maxLevel:123,items:[{tableId:"forbiddenCityEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:124,items:[{tableId:"forbiddenCityEquipLoot",weight:8},{tableId:"emptyDropLoot",weight:2}]}]},forbiddenCityLoot:{type:"always",tiers:[{minLevel:1,items:[{tableId:"missionGoldLoot"},{tableId:"forbiddenCityEquipWrapperLoot"},{tableId:"missionMapLoot"}]}]},newEdenEquipLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:40,items:[{id:"AudacityChain",weight:7},{id:"FuryBlade",weight:3},{id:"GuardianPlate",weight:3},{id:"DoublePoleAxe",weight:1},{id:"GhostlyPendant",weight:1},{id:"SalvationScimitar",weight:1},{id:"StackedSignet",weight:1}]},{minLevel:41,maxLevel:80,items:[{id:"AudacityChain",weight:5},{id:"FuryBlade",weight:4},{id:"GuardianPlate",weight:4},{id:"DoublePoleAxe",weight:1},{id:"GhostlyPendant",weight:1},{id:"SalvationScimitar",weight:1},{id:"StackedSignet",weight:1}]},{minLevel:81,items:[{id:"FocusRing",weight:4},{id:"SurvivalCharm",weight:4},{id:"FlameguardJacket",weight:4},{id:"FlameguardSword",weight:4},{id:"FuryBlade",weight:4},{id:"GroundingBelt",weight:4},{id:"GuardianPlate",weight:4},{id:"ShadowDrinkerHelmUltimate",weight:2},{id:"ThunderHelm",weight:2},{id:"WizardSigil",weight:4},{id:"DoublePoleAxe",weight:1},{id:"GhostlyPendant",weight:1},{id:"StalwartSolidus",weight:1},{id:"SalvationScimitar",weight:1},{id:"StackedSignet",weight:1},{id:"DarkBargainCharm",weight:2},{id:"FerocityRing",weight:2},{id:"FuryVest",weight:1},{id:"Shatterblade",weight:1},{id:"Plowshare",weight:1},{id:"WindPoweredBlade",weight:1},{id:"ConductiveChestplate",weight:1},{id:"DeathzoneNecklet",weight:4},{id:"RecoveryVest",weight:4},{id:"TwinForkedSash",weight:2},{id:"UntouchableMantle",weight:1},{id:"TwinbladeBand",weight:1},{id:"WastelandBlade",weight:4},{id:"Fangblade",weight:2},{id:"FiligreeBand",weight:2},{id:"WrathfulVisor",weight:2}]}]},newEdenEquipWrapperLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{tableId:"newEdenEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:4,maxLevel:20,items:[{tableId:"newEdenEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:21,maxLevel:23,items:[{tableId:"newEdenEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:24,maxLevel:40,items:[{tableId:"newEdenEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:41,maxLevel:43,items:[{tableId:"newEdenEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:44,maxLevel:60,items:[{tableId:"newEdenEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:61,maxLevel:63,items:[{tableId:"newEdenEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:64,maxLevel:80,items:[{tableId:"newEdenEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:81,maxLevel:83,items:[{tableId:"newEdenEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:84,maxLevel:100,items:[{tableId:"newEdenEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:101,maxLevel:103,items:[{tableId:"newEdenEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:104,maxLevel:120,items:[{tableId:"newEdenEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:121,maxLevel:123,items:[{tableId:"newEdenEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:124,items:[{tableId:"newEdenEquipLoot",weight:8},{tableId:"emptyDropLoot",weight:2}]}]},newEdenLoot:{type:"always",tiers:[{minLevel:0,items:[{tableId:"missionGoldLoot"},{tableId:"newEdenEquipWrapperLoot"},{tableId:"missionMapLoot"}]}]},hauntedForestEquipLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:20,items:[{id:"PhaseCharm",weight:8},{id:"HastySash",weight:8},{id:"RuggedJerkin",weight:8},{id:"BloodiedChainMail",weight:16},{id:"SturdyHeadguard",weight:8},{id:"LeatherCap",weight:8},{id:"MuscleRing",weight:8},{id:"CopperRing",weight:8},{id:"SturdyCleaver",weight:10},{id:"SerratedSword",weight:10},{id:"WarpstoneAmulet",weight:5},{id:"BulwarkChain",weight:5},{id:"FlawedClasp",weight:5},{id:"SilkenRobe",weight:5},{id:"BrightPlate",weight:5},{id:"RestorationHelm",weight:5},{id:"ConfoundingMask",weight:6},{id:"JaggedRing",weight:5},{id:"BluntBludgeon",weight:5},{id:"AdventurersBlade",weight:5},{id:"BrutalBlade",weight:5},{id:"WraithSash",weight:4},{id:"DefensiveCharm",weight:2},{id:"AudacityChain",weight:2},{id:"ShadowbaneCirclet",weight:2},{id:"BattlereadyBlade",weight:5},{id:"RazorRing",weight:2},{id:"Forgefang",weight:2},{id:"PhantomBladeSword",weight:2},{id:"IntricateHeadgear",weight:2},{id:"PowerVest",weight:3},{id:"Soulplate",weight:1},{id:"KnifeCollectorsBelt",weight:2},{id:"HeavyBelt",weight:8},{id:"AmberfireRing",weight:3},{id:"LuckstoneRing",weight:8},{id:"WrathfulLocket",weight:8},{id:"BenevolentCharm",weight:2}]},{minLevel:21,maxLevel:40,items:[{id:"PhaseCharm",weight:3},{id:"HastySash",weight:6},{id:"RuggedJerkin",weight:6},{id:"ChippedShortsword",weight:6},{id:"BrutalBlade",weight:4},{id:"BloodiedChainMail",weight:3},{id:"SturdyHeadguard",weight:3},{id:"LeatherCap",weight:6},{id:"MuscleRing",weight:3},{id:"CopperRing",weight:3},{id:"SturdyCleaver",weight:3},{id:"SerratedSword",weight:3},{id:"CordovanHood",weight:3},{id:"WarpstoneAmulet",weight:6},{id:"BulwarkChain",weight:6},{id:"FlawedClasp",weight:6},{id:"SilkenRobe",weight:6},{id:"BrightPlate",weight:6},{id:"RingOfRepair",weight:6},{id:"RestorationHelm",weight:6},{id:"ConfoundingMask",weight:12},{id:"JaggedRing",weight:6},{id:"BluntBludgeon",weight:6},{id:"AdventurersBlade",weight:6},{id:"WraithSash",weight:4},{id:"DefensiveCharm",weight:3},{id:"AudacityChain",weight:3},{id:"ShadowbaneCirclet",weight:3},{id:"StormCurseWrap",weight:12},{id:"RazorRing",weight:3},{id:"Forgefang",weight:3},{id:"DarksteelPlate",weight:6},{id:"DarkWard",weight:6},{id:"HatefulDarkness",weight:6},{id:"BattlereadyBlade",weight:6},{id:"PhantomBladeSword",weight:3},{id:"IntricateHeadgear",weight:3},{id:"PowerVest",weight:6},{id:"Soulplate",weight:1},{id:"KnifeCollectorsBelt",weight:3},{id:"PainfulWrap",weight:6},{id:"HeavyBelt",weight:8},{id:"AmberfireRing",weight:6},{id:"LuckstoneRing",weight:8},{id:"WrathfulLocket",weight:8},{id:"BenevolentCharm",weight:3},{id:"HeavyBand",weight:6},{id:"TwineCinch",weight:6},{id:"ChargedFalchion",weight:6}]},{minLevel:41,maxLevel:60,items:[{id:"DarksteelPlate",weight:4},{id:"DarkWard",weight:4},{id:"HatefulDarkness",weight:4},{id:"PainfulWrap",weight:4},{id:"HastySash",weight:6},{id:"PhaseCharm",weight:3},{id:"RuggedJerkin",weight:6},{id:"Duskbringer",weight:3},{id:"RuinedRod",weight:3},{id:"RusticBelt",weight:6},{id:"ChippedShortsword",weight:6},{id:"LeatherCap",weight:6},{id:"BulwarkChain",weight:6},{id:"BrightPlate",weight:6},{id:"CopperRing",weight:3},{id:"SerratedSword",weight:3},{id:"SilkenRobe",weight:6},{id:"RingOfRepair",weight:6},{id:"RestorationHelm",weight:6},{id:"SturdyCleaver",weight:3},{id:"WarpstoneAmulet",weight:6},{id:"BluntBludgeon",weight:6},{id:"BloodiedChainMail",weight:3},{id:"AdventurersBlade",weight:6},{id:"FlawedClasp",weight:6},{id:"SturdyHeadguard",weight:3},{id:"MuscleRing",weight:3},{id:"ConjurersCap",weight:6},{id:"JaggedRing",weight:6},{id:"DefensiveCharm",weight:4},{id:"AudacityChain",weight:4},{id:"ShadowbaneCirclet",weight:4},{id:"RazorRing",weight:4},{id:"ShadowSlicer",weight:8},{id:"Forgefang",weight:8},{id:"BattlereadyBlade",weight:6},{id:"PhantomBladeSword",weight:4},{id:"IntricateHeadgear",weight:4},{id:"PowerVest",weight:6},{id:"Soulplate",weight:2},{id:"KnifeCollectorsBelt",weight:4},{id:"HeavyBelt",weight:3},{id:"AmberfireRing",weight:6},{id:"LuckstoneRing",weight:3},{id:"WrathfulLocket",weight:3},{id:"BenevolentCharm",weight:4},{id:"HeavyBand",weight:6},{id:"TwineCinch",weight:6},{id:"ChargedFalchion",weight:6},{id:"FragmentOfTheGreatSword",weight:6}]},{minLevel:61,maxLevel:80,items:[{id:"HastySash",weight:2},{id:"PhaseCharm",weight:2},{id:"RuggedJerkin",weight:2},{id:"Duskbringer",weight:3},{id:"RuinedRod",weight:3},{id:"LeatherCap",weight:2},{id:"BulwarkChain",weight:6},{id:"BrightPlate",weight:6},{id:"CopperRing",weight:2},{id:"SerratedSword",weight:2},{id:"SilkenRobe",weight:6},{id:"RingOfRepair",weight:6},{id:"RestorationHelm",weight:6},{id:"SturdyCleaver",weight:2},{id:"WarpstoneAmulet",weight:6},{id:"BluntBludgeon",weight:6},{id:"AdventurersBlade",weight:6},{id:"FlawedClasp",weight:6},{id:"SturdyHeadguard",weight:2},{id:"MuscleRing",weight:2},{id:"ConjurersCap",weight:6},{id:"JaggedRing",weight:6},{id:"DefensiveCharm",weight:4},{id:"AudacityChain",weight:4},{id:"ShadowbaneCirclet",weight:4},{id:"RazorRing",weight:4},{id:"ShadowSlicer",weight:3},{id:"SouldrainAxe",weight:3},{id:"WatchersSpark",weight:3},{id:"BattlethirstyVest",weight:3},{id:"DeadlyRelic",weight:6},{id:"BattlereadyBlade",weight:6},{id:"PhantomBladeSword",weight:4},{id:"IntricateHeadgear",weight:4},{id:"PowerVest",weight:6},{id:"Soulplate",weight:2},{id:"KnifeCollectorsBelt",weight:4},{id:"AmberfireRing",weight:6},{id:"BenevolentCharm",weight:4},{id:"ChargedFalchion",weight:6},{id:"FragmentOfTheGreatSword",weight:6}]},{minLevel:81,maxLevel:100,items:[{id:"ConjurersCap",weight:6},{id:"BattlereadyBlade",weight:6},{id:"PowerVest",weight:6},{id:"AmberfireRing",weight:6},{id:"DefensiveCharm",weight:4},{id:"RazorRing",weight:4},{id:"PhantomBladeSword",weight:4},{id:"IntricateHeadgear",weight:4},{id:"KnifeCollectorsBelt",weight:4},{id:"BenevolentCharm",weight:4},{id:"ChargedFalchion",weight:6},{id:"FragmentOfTheGreatSword",weight:6},{id:"Soulplate",weight:2},{id:"DarkBargainCharm",weight:5},{id:"SeethingSash",weight:5},{id:"BulwarkChain",weight:6},{id:"BrightPlate",weight:6},{id:"SilkenRobe",weight:6},{id:"RingOfRepair",weight:6},{id:"RestorationHelm",weight:6},{id:"WarpstoneAmulet",weight:6},{id:"BluntBludgeon",weight:6},{id:"AdventurersBlade",weight:6},{id:"FlawedClasp",weight:6},{id:"JaggedRing",weight:6},{id:"AudacityChain",weight:4},{id:"ShadowbaneCirclet",weight:4},{id:"ShadowSlicer",weight:3},{id:"Duskbringer",weight:3},{id:"RuinedRod",weight:3},{id:"DeadlyRelic",weight:3},{id:"WatchersSpark",weight:3},{id:"SouldrainAxe",weight:3},{id:"BattlethirstyVest",weight:3}]},{minLevel:101,items:[{id:"ConjurersCap",weight:6},{id:"BattlereadyBlade",weight:6},{id:"PowerVest",weight:6},{id:"AmberfireRing",weight:6},{id:"DefensiveCharm",weight:4},{id:"RazorRing",weight:4},{id:"PhantomBladeSword",weight:4},{id:"IntricateHeadgear",weight:4},{id:"KnifeCollectorsBelt",weight:4},{id:"BenevolentCharm",weight:4},{id:"ChargedFalchion",weight:6},{id:"FragmentOfTheGreatSword",weight:6},{id:"Soulplate",weight:2},{id:"BulwarkChain",weight:6},{id:"BrightPlate",weight:6},{id:"SilkenRobe",weight:6},{id:"RingOfRepair",weight:6},{id:"RestorationHelm",weight:6},{id:"WarpstoneAmulet",weight:6},{id:"BluntBludgeon",weight:6},{id:"AdventurersBlade",weight:6},{id:"FlawedClasp",weight:6},{id:"JaggedRing",weight:6},{id:"AudacityChain",weight:4},{id:"ShadowbaneCirclet",weight:4},{id:"DeadlyRelic",weight:3},{id:"WatchersSpark",weight:3},{id:"SouldrainAxe",weight:3},{id:"BattlethirstyVest",weight:3},{id:"CursedNaginata",weight:5},{id:"DarkBargainCharm",weight:5},{id:"SeethingSash",weight:5},{id:"Fangblade",weight:5},{id:"WrathfulVisor",weight:5},{id:"DeathzoneNecklet",weight:8},{id:"SowersLament",weight:3}]}]},hauntedForestEquipWrapperLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{tableId:"hauntedForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:4,maxLevel:20,items:[{tableId:"hauntedForestEquipLoot",weight:8},{tableId:"emptyDropLoot",weight:2}]},{minLevel:21,maxLevel:23,items:[{tableId:"hauntedForestEquipLoot",weight:4},{tableId:"emptyDropLoot",weight:6}]},{minLevel:24,maxLevel:40,items:[{tableId:"hauntedForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:41,maxLevel:43,items:[{tableId:"hauntedForestEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:44,maxLevel:60,items:[{tableId:"hauntedForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:61,maxLevel:63,items:[{tableId:"hauntedForestEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:64,maxLevel:80,items:[{tableId:"hauntedForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:81,maxLevel:83,items:[{tableId:"hauntedForestEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:84,maxLevel:100,items:[{tableId:"hauntedForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:101,maxLevel:103,items:[{tableId:"hauntedForestEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:104,maxLevel:120,items:[{tableId:"hauntedForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]},{minLevel:121,maxLevel:123,items:[{tableId:"hauntedForestEquipLoot",weight:3},{tableId:"emptyDropLoot",weight:7}]},{minLevel:124,items:[{tableId:"hauntedForestEquipLoot",weight:7},{tableId:"emptyDropLoot",weight:3}]}]},hauntedForestLoot:{type:"always",tiers:[{minLevel:1,items:[{tableId:"missionGoldLoot"},{tableId:"hauntedForestEquipWrapperLoot"},{tableId:"missionMapLoot"}]}]},bossRushGoldLoot:{type:"always",tiers:[{minLevel:1,maxLevel:5,items:[{id:"Gold",weight:1,quantity:[125,200]}]},{minLevel:6,maxLevel:20,items:[{id:"Gold",weight:1,quantity:[150,200]}]},{minLevel:21,maxLevel:23,items:[{id:"Gold",weight:1,quantity:[150,250]}]},{minLevel:24,maxLevel:40,items:[{id:"Gold",weight:1,quantity:[175,275]}]},{minLevel:41,maxLevel:43,items:[{id:"Gold",weight:1,quantity:[200,300]}]},{minLevel:44,maxLevel:60,items:[{id:"Gold",weight:1,quantity:[250,325]}]},{minLevel:61,maxLevel:63,items:[{id:"Gold",weight:1,quantity:[300,350]}]},{minLevel:64,maxLevel:80,items:[{id:"Gold",weight:1,quantity:[350,400]}]},{minLevel:81,maxLevel:83,items:[{id:"Gold",weight:1,quantity:[400,450]}]},{minLevel:84,maxLevel:100,items:[{id:"Gold",weight:1,quantity:[450,500]}]},{minLevel:101,maxLevel:103,items:[{id:"Gold",weight:1,quantity:[500,550]}]},{minLevel:104,maxLevel:120,items:[{id:"Gold",weight:1,quantity:[600,800]}]},{minLevel:121,maxLevel:123,items:[{id:"Gold",weight:1,quantity:[800,900]}]},{minLevel:124,maxLevel:140,items:[{id:"Gold",weight:1,quantity:[900,1100]}]},{minLevel:141,maxLevel:143,items:[{id:"Gold",weight:1,quantity:[1100,1250]}]},{minLevel:144,maxLevel:160,items:[{id:"Gold",weight:1,quantity:[1250,2e3]}]},{minLevel:161,maxLevel:163,items:[{id:"Gold",weight:1,quantity:[2e3,3e3]}]},{minLevel:164,maxLevel:180,items:[{id:"Gold",weight:1,quantity:[3e3,4e3]}]},{minLevel:181,items:[{id:"Gold",weight:1,quantity:[4e3,6e3]}]}]},bossRushFieldsEquipLoot:{type:"manyOf",count:[1,3],tiers:[{minLevel:1,maxLevel:20,items:[{id:"FirststrikeVest",weight:2},{id:"FragmentOfTheGreatSword",weight:2},{id:"TwineCinch",weight:12},{id:"StoneBlade",weight:6},{id:"ConjurersCap",weight:6},{id:"PhaseCharm",weight:6},{id:"RazorRing",weight:3},{id:"HastySash",weight:2},{id:"RuggedJerkin",weight:2},{id:"TatteredCuirass",weight:8},{id:"VengefulLocket",weight:8},{id:"SuddenVengeance",weight:1},{id:"BattlereadyBlade",weight:5},{id:"FatalFarewell",weight:1},{id:"PhantomBladeSword",weight:2},{id:"IntricateHeadgear",weight:2},{id:"PowerVest",weight:5},{id:"Soulplate",weight:1},{id:"KnifeCollectorsBelt",weight:2},{id:"HeavyBelt",weight:6},{id:"AmberfireRing",weight:5},{id:"LuckstoneRing",weight:6},{id:"WrathfulLocket",weight:6},{id:"BenevolentCharm",weight:2}]},{minLevel:21,maxLevel:40,items:[{id:"TwineCinch",weight:6},{id:"StoneBlade",weight:6},{id:"TatteredCuirass",weight:8},{id:"VengefulLocket",weight:8},{id:"RazorRing",weight:3},{id:"HastySash",weight:2},{id:"RuggedJerkin",weight:2},{id:"FirststrikeVest",weight:4},{id:"SuddenVengeance",weight:2},{id:"FatalFarewell",weight:2},{id:"Duskbringer",weight:2},{id:"BraveheartHelm",weight:1},{id:"BattleHardendedVest",weight:1},{id:"ThermalBinding",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"HastySash",weight:3},{id:"RuggedJerkin",weight:3},{id:"RoughRazor",weight:3},{id:"FirststrikeVest",weight:10},{id:"SuddenVengeance",weight:6},{id:"FatalFarewell",weight:6},{id:"Duskbringer",weight:4},{id:"Stormseeker",weight:8},{id:"CrystalHeartCharm",weight:8},{id:"BraveheartHelm",weight:2},{id:"BattleHardendedVest",weight:2},{id:"ThermalBinding",weight:2},{id:"GuardsBelt",weight:1},{id:"HelmOfBlades",weight:1},{id:"HerosLongSword",weight:1},{id:"SmitingRing",weight:2}]},{minLevel:61,maxLevel:80,items:[{id:"Duskbringer",weight:10},{id:"BraveheartHelm",weight:6},{id:"BattleHardendedVest",weight:6},{id:"ThermalBinding",weight:6},{id:"GuardsBelt",weight:6},{id:"BlazingRing",weight:6},{id:"Stormseeker",weight:6},{id:"GroundedPlate",weight:6},{id:"CrystalHeartCharm",weight:6},{id:"HelmOfBlades",weight:6},{id:"HerosLongSword",weight:10},{id:"SmitingRing",weight:6},{id:"FlameHood",weight:8},{id:"Bloodseeker",weight:4}]},{minLevel:81,items:[{id:"GuardsBelt",weight:8},{id:"GlacialShard",weight:8},{id:"AcuityHelm",weight:8},{id:"InsulatedWrap",weight:8},{id:"PlatedBelt",weight:8},{id:"GroundedPlate",weight:8},{id:"HelmOfBlades",weight:6},{id:"HerosLongSword",weight:6},{id:"SmitingRing",weight:12},{id:"FlameHood",weight:6},{id:"Bloodseeker",weight:6}]}]},bossRushFieldsLoot:{type:"always",tiers:[{minLevel:0,items:[{tableId:"bossRushGoldLoot"},{tableId:"bossRushFieldsEquipLoot"}]}]},bossRushMossyForestEquipLoot:{type:"manyOf",count:[1,3],tiers:[{minLevel:1,maxLevel:20,items:[{id:"TwineCinch",weight:8},{id:"BlazingAmulet",weight:8},{id:"ChippedPendant",weight:8},{id:"StoneBlade",weight:8},{id:"TatteredCuirass",weight:6},{id:"RazorRing",weight:6},{id:"HastySash",weight:2},{id:"RuggedJerkin",weight:2},{id:"FirststrikeVest",weight:1},{id:"SuddenVengeance",weight:1},{id:"FatalFarewell",weight:1}]},{minLevel:21,maxLevel:40,items:[{id:"TwineCinch",weight:6},{id:"StoneBlade",weight:12},{id:"TatteredCuirass",weight:6},{id:"ConfoundingMask",weight:6},{id:"RazorRing",weight:6},{id:"HastySash",weight:2},{id:"RuggedJerkin",weight:2},{id:"FirststrikeVest",weight:2},{id:"SuddenVengeance",weight:2},{id:"FatalFarewell",weight:2},{id:"Duskbringer",weight:1},{id:"BraveheartHelm",weight:1},{id:"BattleHardendedVest",weight:2},{id:"ThermalBinding",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"HastySash",weight:6},{id:"RuggedJerkin",weight:6},{id:"BatteredBroadsword",weight:6},{id:"FirststrikeVest",weight:6},{id:"SuddenVengeance",weight:6},{id:"FatalFarewell",weight:6},{id:"Duskbringer",weight:2},{id:"BraveheartHelm",weight:2},{id:"BattleHardendedVest",weight:4},{id:"ThermalBinding",weight:2},{id:"GuardsBelt",weight:1},{id:"PaddedHelmet",weight:8},{id:"SharkskinShirt",weight:8},{id:"HelmOfBlades",weight:1},{id:"HerosLongSword",weight:2},{id:"SmitingRing",weight:1}]},{minLevel:61,maxLevel:80,items:[{id:"Duskbringer",weight:6},{id:"BraveheartHelm",weight:6},{id:"BattleHardendedVest",weight:10},{id:"ThermalBinding",weight:6},{id:"BatteredBroadsword",weight:6},{id:"BlazingRing",weight:6},{id:"GuardsBelt",weight:6},{id:"GroundedPlate",weight:6},{id:"Stormseeker",weight:6},{id:"HelmOfBlades",weight:6},{id:"HerosLongSword",weight:6},{id:"SmitingRing",weight:10},{id:"FlameHood",weight:4},{id:"Bloodseeker",weight:4}]},{minLevel:81,items:[{id:"GuardsBelt",weight:6},{id:"PlatedBelt",weight:6},{id:"HerosLongSword",weight:12},{id:"SmitingRing",weight:6},{id:"GroundedPlate",weight:12},{id:"InsulatedWrap",weight:6},{id:"HelmOfBlades",weight:6},{id:"FlameHood",weight:12},{id:"Bloodseeker",weight:6}]}]},bossRushMossyForestLoot:{type:"always",tiers:[{minLevel:0,items:[{tableId:"bossRushGoldLoot"},{tableId:"bossRushMossyForestEquipLoot"}]}]},bossRushMountainPassEquipLoot:{type:"manyOf",count:[1,3],tiers:[{minLevel:1,maxLevel:20,items:[{id:"PiercingBlade",weight:2},{id:"InfernoRing",weight:2},{id:"DefensiveCharm",weight:10},{id:"CopperRing",weight:8},{id:"SturdyHeadguard",weight:8},{id:"BloodiedChainMail",weight:8},{id:"MuscleRing",weight:8},{id:"LuckyLocket",weight:16},{id:"Forgefang",weight:4},{id:"ShadowbaneCirclet",weight:2},{id:"FragileRing",weight:10},{id:"AdventurersBlade",weight:10},{id:"StormCurseWrap",weight:2}]},{minLevel:21,maxLevel:40,items:[{id:"LuckyLocket",weight:10},{id:"FragileRing",weight:6},{id:"FlawedClasp",weight:6},{id:"DefensiveCharm",weight:6},{id:"CopperRing",weight:6},{id:"MuscleRing",weight:6},{id:"HastySash",weight:6},{id:"PiercingBlade",weight:2},{id:"InfernoRing",weight:2},{id:"Forgefang",weight:4},{id:"ShadowbaneCirclet",weight:2},{id:"StormCurseWrap",weight:2},{id:"BerserkerAxe",weight:1},{id:"EvasionAmulet",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"CopperRing",weight:2},{id:"MuscleRing",weight:2},{id:"PaddedHelmet",weight:4},{id:"RustedHelm",weight:4},{id:"PainfulWrap",weight:4},{id:"WraithSash",weight:4},{id:"PiercingBlade",weight:2},{id:"InfernoRing",weight:2},{id:"Forgefang",weight:8},{id:"ShadowbaneCirclet",weight:2},{id:"StormCurseWrap",weight:2},{id:"BerserkerAxe",weight:2},{id:"EvasionAmulet",weight:8},{id:"Furybringer",weight:1},{id:"EternityMace",weight:2},{id:"ShadowDrinkerHelm",weight:4}]},{minLevel:61,maxLevel:80,items:[{id:"RustedHelm",weight:2},{id:"GroundedPlate",weight:2},{id:"Furybringer",weight:2},{id:"SurvivalCharm",weight:2},{id:"EternityMace",weight:2},{id:"AcuityHelm",weight:2},{id:"GlacialShard",weight:2},{id:"BlazingRing",weight:2},{id:"RadiantCharm",weight:1},{id:"BerserkerAxe",weight:1},{id:"EvasionAmulet",weight:2},{id:"FuryVest",weight:1},{id:"Shatterblade",weight:1},{id:"SunstoneHelmet",weight:2},{id:"RadiantCharm",weight:1},{id:"FlutteringCape",weight:1},{id:"ElementalRing",weight:2},{id:"SecondChanceBelt",weight:1},{id:"ShadowDrinkerHelm",weight:2}]},{minLevel:81,items:[{id:"Furybringer",weight:2},{id:"EternityMace",weight:3},{id:"AcuityHelm",weight:2},{id:"GuardsBelt",weight:2},{id:"SunstoneHelmet",weight:4},{id:"RadiantCharm",weight:2},{id:"FlutteringCape",weight:2},{id:"ElementalRing",weight:2},{id:"LifevineBelt",weight:2},{id:"GlacialShard",weight:2},{id:"FuryVest",weight:2},{id:"Shatterblade",weight:2},{id:"SecondChanceBelt",weight:1}]}]},bossRushMountainPassLoot:{type:"always",tiers:[{minLevel:0,items:[{tableId:"bossRushGoldLoot"},{tableId:"bossRushMountainPassEquipLoot"}]}]},bossRushOuterTempleEquipLoot:{type:"manyOf",count:[1,3],tiers:[{minLevel:1,maxLevel:20,items:[{id:"DefensiveCharm",weight:8},{id:"LuckyLocket",weight:10},{id:"FragileRing",weight:10},{id:"BrightPlate",weight:10},{id:"PiercingBlade",weight:2},{id:"InfernoRing",weight:2},{id:"CopperRing",weight:6},{id:"BladedBelt",weight:6},{id:"RopeBraid",weight:6},{id:"MuscleRing",weight:6},{id:"Forgefang",weight:4},{id:"ShadowbaneCirclet",weight:2},{id:"StormCurseWrap",weight:2}]},{minLevel:21,maxLevel:40,items:[{id:"BrutalBlade",weight:8},{id:"HastySash",weight:8},{id:"DefensiveCharm",weight:6},{id:"CopperRing",weight:8},{id:"MuscleRing",weight:8},{id:"FlawedClasp",weight:8},{id:"LuckyLocket",weight:8},{id:"FragileRing",weight:8},{id:"PiercingBlade",weight:2},{id:"InfernoRing",weight:6},{id:"Forgefang",weight:6},{id:"ShadowbaneCirclet",weight:2},{id:"StormCurseWrap",weight:2},{id:"BerserkerAxe",weight:1},{id:"EvasionAmulet",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"CopperRing",weight:2},{id:"MuscleRing",weight:2},{id:"PiercingBlade",weight:2},{id:"SharkskinShirt",weight:6},{id:"WraithSash",weight:6},{id:"RustedHelm",weight:6},{id:"InfernoRing",weight:8},{id:"Forgefang",weight:8},{id:"ShadowbaneCirclet",weight:2},{id:"StormCurseWrap",weight:2},{id:"BerserkerAxe",weight:1},{id:"EvasionAmulet",weight:1},{id:"Furybringer",weight:3},{id:"EternityMace",weight:1}]},{minLevel:61,maxLevel:80,items:[{id:"SawtoothAxe",weight:2},{id:"LifevineBelt",weight:2},{id:"Furybringer",weight:2},{id:"EternityMace",weight:1},{id:"PlatedBelt",weight:2},{id:"GroundedPlate",weight:2},{id:"AcuityHelm",weight:2},{id:"GlacialShard",weight:2},{id:"BerserkerAxe",weight:1},{id:"EvasionAmulet",weight:1},{id:"FuryVest",weight:1},{id:"Shatterblade",weight:2},{id:"SunstoneHelmet",weight:1},{id:"RadiantCharm",weight:1},{id:"FlutteringCape",weight:1},{id:"ElementalRing",weight:2},{id:"SecondChanceBelt",weight:1}]},{minLevel:81,items:[{id:"Furybringer",weight:4},{id:"EternityMace",weight:1},{id:"AcuityHelm",weight:4},{id:"GlacialShard",weight:4},{id:"GroundedPlate",weight:4},{id:"GuardsBelt",weight:4},{id:"FuryVest",weight:2},{id:"Shatterblade",weight:4},{id:"SunstoneHelmet",weight:2},{id:"RadiantCharm",weight:2},{id:"FlutteringCape",weight:1},{id:"ElementalRing",weight:2},{id:"SecondChanceBelt",weight:1}]}]},bossRushOuterTempleLoot:{type:"always",tiers:[{minLevel:0,items:[{tableId:"bossRushGoldLoot"},{tableId:"bossRushOuterTempleEquipLoot"}]}]},bossRushRuinedPathEquipLoot:{type:"manyOf",count:[1,3],tiers:[{minLevel:1,maxLevel:20,items:[{id:"TwineCinch",weight:8},{id:"RestorationHelm",weight:6},{id:"JaggedRing",weight:6},{id:"StoneBlade",weight:6},{id:"TatteredCuirass",weight:8},{id:"RazorRing",weight:3},{id:"HastySash",weight:4},{id:"RuggedJerkin",weight:4},{id:"FirststrikeVest",weight:1},{id:"SuddenVengeance",weight:2},{id:"FatalFarewell",weight:2}]},{minLevel:21,maxLevel:40,items:[{id:"TwineCinch",weight:6},{id:"StoneBlade",weight:6},{id:"TatteredCuirass",weight:6},{id:"RestorationHelm",weight:6},{id:"JaggedRing",weight:6},{id:"RazorRing",weight:3},{id:"HastySash",weight:2},{id:"RuggedJerkin",weight:2},{id:"FirststrikeVest",weight:2},{id:"SuddenVengeance",weight:4},{id:"FatalFarewell",weight:4},{id:"Duskbringer",weight:1},{id:"BraveheartHelm",weight:2},{id:"BattleHardendedVest",weight:1},{id:"DarkWard",weight:1},{id:"ThermalBinding",weight:2}]},{minLevel:41,maxLevel:60,items:[{id:"HastySash",weight:3},{id:"RuggedJerkin",weight:3},{id:"FirststrikeVest",weight:6},{id:"SuddenVengeance",weight:10},{id:"FatalFarewell",weight:10},{id:"Duskbringer",weight:2},{id:"BraveheartHelm",weight:4},{id:"BattleHardendedVest",weight:4},{id:"ThermalBinding",weight:4},{id:"TwilightBand",weight:5},{id:"BlazingRing",weight:3},{id:"CrystalHeartCharm",weight:5},{id:"GuardsBelt",weight:5},{id:"HelmOfBlades",weight:1},{id:"HerosLongSword",weight:1},{id:"SmitingRing",weight:1},{id:"DarkWard",weight:1}]},{minLevel:41,items:[{id:"ShadowDrinkerHelm",weight:5}]},{minLevel:61,maxLevel:80,items:[{id:"Duskbringer",weight:6},{id:"BraveheartHelm",weight:6},{id:"BattleHardendedVest",weight:10},{id:"ThermalBinding",weight:10},{id:"GuardsBelt",weight:6},{id:"Stormseeker",weight:6},{id:"HerosLongSword",weight:6},{id:"SmitingRing",weight:6},{id:"BlazingRing",weight:4},{id:"TwilightBand",weight:6},{id:"HelmOfBlades",weight:6},{id:"FlameHood",weight:4},{id:"Bloodseeker",weight:8}]},{minLevel:61,items:[{id:"ShadowDrinkerHelm",weight:6}]},{minLevel:81,items:[{id:"GuardsBelt",weight:6},{id:"HelmOfBlades",weight:6},{id:"HerosLongSword",weight:6},{id:"SmitingRing",weight:6},{id:"FlameHood",weight:6},{id:"Bloodseeker",weight:12},{id:"GlacialShard",weight:6},{id:"AcuityHelm",weight:6},{id:"GroundedPlate",weight:6},{id:"LifevineBelt",weight:12}]}]},bossRushRuinedPathLoot:{type:"always",tiers:[{minLevel:0,items:[{tableId:"bossRushGoldLoot"},{tableId:"bossRushRuinedPathEquipLoot"}]}]},bossRushSeasideCliffsEquipLoot:{type:"manyOf",count:[1,3],tiers:[{minLevel:1,maxLevel:20,items:[{id:"PiercingBlade",weight:4},{id:"InfernoRing",weight:1},{id:"DefensiveCharm",weight:8},{id:"CopperRing",weight:8},{id:"MuscleRing",weight:8},{id:"ShieldingHelm",weight:8},{id:"TarnishedBand",weight:8},{id:"BluntBludgeon",weight:6},{id:"SilkenRobe",weight:6},{id:"LuckyLocket",weight:10},{id:"Forgefang",weight:4},{id:"ShadowbaneCirclet",weight:2},{id:"FragileRing",weight:16},{id:"StormCurseWrap",weight:2}]},{minLevel:21,maxLevel:40,items:[{id:"BladedBelt",weight:6},{id:"FragileRing",weight:10},{id:"DefensiveCharm",weight:6},{id:"CopperRing",weight:2},{id:"MuscleRing",weight:8},{id:"ToughHelmet",weight:6},{id:"LuckyLocket",weight:6},{id:"PiercingBlade",weight:4},{id:"InfernoRing",weight:2},{id:"Forgefang",weight:2},{id:"ShadowbaneCirclet",weight:2},{id:"StormCurseWrap",weight:2},{id:"BerserkerAxe",weight:1},{id:"EvasionAmulet",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"CopperRing",weight:2},{id:"MuscleRing",weight:6},{id:"RoughRazor",weight:6},{id:"RustedHelm",weight:6},{id:"WraithSash",weight:6},{id:"SharkskinShirt",weight:6},{id:"PiercingBlade",weight:6},{id:"InfernoRing",weight:2},{id:"Forgefang",weight:2},{id:"ShadowbaneCirclet",weight:8},{id:"StormCurseWrap",weight:8},{id:"BerserkerAxe",weight:2},{id:"EvasionAmulet",weight:2},{id:"Furybringer",weight:1},{id:"EternityMace",weight:1}]},{minLevel:61,maxLevel:80,items:[{id:"RoughRazor",weight:2},{id:"PainfulWrap",weight:2},{id:"Furybringer",weight:2},{id:"EternityMace",weight:1},{id:"BatteredBroadsword",weight:2},{id:"TwilightBand",weight:2},{id:"PaddedHelmet",weight:2},{id:"CrystalHeartCharm",weight:2},{id:"BerserkerAxe",weight:2},{id:"EvasionAmulet",weight:1},{id:"FuryVest",weight:1},{id:"Shatterblade",weight:1},{id:"SunstoneHelmet",weight:1},{id:"RadiantCharm",weight:2},{id:"FlutteringCape",weight:1},{id:"ElementalRing",weight:2},{id:"SecondChanceBelt",weight:2}]},{minLevel:81,items:[{id:"Furybringer",weight:2},{id:"GlacialShard",weight:4},{id:"FuryVest",weight:2},{id:"Shatterblade",weight:2},{id:"SunstoneHelmet",weight:2},{id:"RadiantCharm",weight:4},{id:"PlatedBelt",weight:4},{id:"LifevineBelt",weight:4},{id:"GroundedPlate",weight:4},{id:"AcuityHelm",weight:4},{id:"EternityMace",weight:1},{id:"FlutteringCape",weight:1},{id:"ElementalRing",weight:2},{id:"SecondChanceBelt",weight:2}]}]},bossRushSeasideCliffsLoot:{type:"always",tiers:[{minLevel:0,items:[{tableId:"bossRushGoldLoot"},{tableId:"bossRushSeasideCliffsEquipLoot"}]}]},bossRushForbiddenCityEquipLoot:{type:"manyOf",count:[1,3],tiers:[{minLevel:1,maxLevel:20,items:[{id:"FragileRing",weight:10},{id:"LuckyLocket",weight:10},{id:"DefensiveCharm",weight:8},{id:"BrightPlate",weight:10},{id:"Forgefang",weight:4},{id:"InfernoRing",weight:2},{id:"PiercingBlade",weight:2},{id:"ShadowbaneCirclet",weight:2},{id:"StormCurseWrap",weight:2}]},{minLevel:21,maxLevel:40,items:[{id:"FragileRing",weight:8},{id:"LuckyLocket",weight:8},{id:"DefensiveCharm",weight:6},{id:"BrutalBlade",weight:8},{id:"FlawedClasp",weight:8},{id:"Forgefang",weight:6},{id:"InfernoRing",weight:6},{id:"PiercingBlade",weight:2},{id:"ShadowbaneCirclet",weight:2},{id:"StormCurseWrap",weight:2},{id:"BerserkerAxe",weight:1},{id:"EvasionAmulet",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"WraithSash",weight:6},{id:"Forgefang",weight:8},{id:"InfernoRing",weight:8},{id:"PiercingBlade",weight:2},{id:"ShadowbaneCirclet",weight:2},{id:"StormCurseWrap",weight:2},{id:"RustedHelm",weight:6},{id:"SharkskinShirt",weight:6},{id:"BerserkerAxe",weight:1},{id:"EvasionAmulet",weight:1},{id:"Furybringer",weight:3},{id:"EternityMace",weight:1}]},{minLevel:61,maxLevel:80,items:[{id:"SawtoothAxe",weight:2},{id:"BerserkerAxe",weight:1},{id:"EvasionAmulet",weight:1},{id:"AcuityHelm",weight:2},{id:"GlacialShard",weight:2},{id:"GroundedPlate",weight:2},{id:"LifevineBelt",weight:2},{id:"PlatedBelt",weight:2},{id:"Furybringer",weight:2},{id:"EternityMace",weight:1},{id:"FuryVest",weight:1},{id:"RadiantCharm",weight:1},{id:"Shatterblade",weight:2},{id:"SunstoneHelmet",weight:1},{id:"FlutteringCape",weight:1},{id:"ElementalRing",weight:2},{id:"SecondChanceBelt",weight:1}]},{minLevel:81,items:[{id:"AcuityHelm",weight:4},{id:"GlacialShard",weight:4},{id:"GroundedPlate",weight:4},{id:"GuardsBelt",weight:4},{id:"Furybringer",weight:4},{id:"EternityMace",weight:1},{id:"FuryVest",weight:2},{id:"RadiantCharm",weight:2},{id:"Shatterblade",weight:4},{id:"SunstoneHelmet",weight:2},{id:"StalwartSolidus",weight:2},{id:"FlutteringCape",weight:1},{id:"ElementalRing",weight:2},{id:"SecondChanceBelt",weight:1},{id:"ShadowDrinkerHelmUltimate",weight:1},{id:"BattlethirstyVest",weight:1},{id:"DeadlyRelic",weight:1},{id:"ThunderHelm",weight:1},{id:"DarkBargainCharm",weight:1},{id:"FrenziedSash",weight:1},{id:"FerocityRing",weight:1},{id:"FiligreeBand",weight:1},{id:"SmitingEdge",weight:1},{id:"DrainingEdge",weight:1},{id:"PhantomEdge",weight:1},{id:"CursedNaginata",weight:1},{id:"TwinbladeBandEX",weight:2}]}]},bossRushForbiddenCityLoot:{type:"always",tiers:[{minLevel:0,items:[{tableId:"bossRushGoldLoot"},{tableId:"bossRushForbiddenCityEquipLoot"}]}]},bossRushNewEdenEquipLoot:{type:"manyOf",count:[1,3],tiers:[{minLevel:1,maxLevel:20,items:[{id:"DefensiveCharm",weight:16},{id:"Forgefang",weight:8},{id:"InfernoRing",weight:4},{id:"PiercingBlade",weight:4},{id:"ShadowbaneCirclet",weight:4},{id:"StormCurseWrap",weight:4}]},{minLevel:21,maxLevel:40,items:[{id:"DefensiveCharm",weight:12},{id:"Forgefang",weight:12},{id:"InfernoRing",weight:12},{id:"PiercingBlade",weight:4},{id:"ShadowbaneCirclet",weight:4},{id:"StormCurseWrap",weight:4},{id:"BerserkerAxe",weight:2},{id:"EvasionAmulet",weight:2}]},{minLevel:41,maxLevel:60,items:[{id:"Forgefang",weight:16},{id:"InfernoRing",weight:16},{id:"PiercingBlade",weight:4},{id:"ShadowbaneCirclet",weight:4},{id:"StormCurseWrap",weight:4},{id:"BerserkerAxe",weight:2},{id:"EvasionAmulet",weight:2},{id:"Furybringer",weight:6},{id:"EternityMace",weight:2}]},{minLevel:61,maxLevel:80,items:[{id:"BerserkerAxe",weight:2},{id:"EvasionAmulet",weight:2},{id:"Furybringer",weight:4},{id:"EternityMace",weight:2},{id:"FuryVest",weight:2},{id:"RadiantCharm",weight:2},{id:"Shatterblade",weight:4},{id:"SunstoneHelmet",weight:2},{id:"FlutteringCape",weight:2},{id:"ElementalRing",weight:4},{id:"SecondChanceBelt",weight:2}]},{minLevel:81,items:[{id:"Furybringer",weight:16},{id:"EternityMace",weight:8},{id:"FuryVest",weight:16},{id:"RadiantCharm",weight:16},{id:"Shatterblade",weight:32},{id:"SunstoneHelmet",weight:16},{id:"FlutteringCape",weight:8},{id:"ElementalRing",weight:16},{id:"SecondChanceBelt",weight:8},{id:"ShadowDrinkerHelmUltimate",weight:8},{id:"BattlethirstyVest",weight:8},{id:"ThunderHelm",weight:8},{id:"DarkBargainCharm",weight:8},{id:"FerocityRing",weight:8},{id:"CursedNaginata",weight:8},{id:"DeathzoneNecklet",weight:4},{id:"Fangblade",weight:2},{id:"FangbladeEX",weight:1},{id:"RecoveryVest",weight:4},{id:"RecoveryVestEX",weight:2},{id:"TwinForkedSash",weight:4},{id:"TwinForkedSashEX",weight:2},{id:"UntouchableMantle",weight:1},{id:"UntouchableMantleEX",weight:1},{id:"VectraEdge",weight:1},{id:"VectraEdgeEX",weight:1},{id:"WastelandBlade",weight:2},{id:"WastelandBladeEX",weight:1},{id:"WrathfulVisor",weight:2},{id:"Plowshare",weight:3},{id:"WrathfulVisorEX",weight:1},{id:"ConductiveChestplate",weight:1},{id:"FiligreeBand",weight:1},{id:"StalwartSolidus",weight:1},{id:"SowersLament",weight:1},{id:"TwinbladeBandEX",weight:1},{id:"WindPoweredBlade",weight:2}]}]},bossRushNewEdenLoot:{type:"always",tiers:[{minLevel:0,items:[{tableId:"bossRushGoldLoot"},{tableId:"bossRushNewEdenEquipLoot"}]}]},darkBossLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:20,items:[{id:"Gold",quantity:200}]},{minLevel:21,maxLevel:40,items:[{id:"Gold",quantity:400}]},{minLevel:41,maxLevel:60,items:[{id:"Gold",quantity:600}]},{minLevel:61,maxLevel:80,items:[{id:"Gold",quantity:1e3}]},{minLevel:81,items:[{id:"Gold",quantity:2e3}]}]},darkDemonBossLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:40,items:[{id:"HatefulDarkness",weight:6},{id:"DarksteelPlate",weight:6},{id:"DarkWard",weight:6},{id:"WarpstoneAmulet",weight:8},{id:"SpikedCowl",weight:6},{id:"RubyClawedRing",weight:6},{id:"BulwarkChain",weight:8},{id:"FlawedClasp",weight:8},{id:"SilkenRobe",weight:8},{id:"BrightPlate",weight:8},{id:"RestorationHelm",weight:8},{id:"ConfoundingMask",weight:8},{id:"JaggedRing",weight:8},{id:"BluntBludgeon",weight:8},{id:"AdventurersBlade",weight:8},{id:"BrutalBlade",weight:8},{id:"AudacityChain",weight:8},{id:"ShadowbaneCirclet",weight:8},{id:"Forgefang",weight:8}]},{minLevel:41,maxLevel:60,items:[{id:"RubyClawedRing",weight:6},{id:"SpikedCowl",weight:6},{id:"DarksteelPlate",weight:6},{id:"HatefulDarkness",weight:6},{id:"DarkWard",weight:6},{id:"WarpstoneAmulet",weight:6},{id:"BulwarkChain",weight:6},{id:"FlawedClasp",weight:6},{id:"SilkenRobe",weight:6},{id:"BrightPlate",weight:6},{id:"RestorationHelm",weight:6},{id:"ConfoundingMask",weight:6},{id:"JaggedRing",weight:6},{id:"BluntBludgeon",weight:6},{id:"AdventurersBlade",weight:6},{id:"BrutalBlade",weight:6},{id:"AudacityChain",weight:6},{id:"ShadowbaneCirclet",weight:6},{id:"Forgefang",weight:6}]},{minLevel:61,maxLevel:80,items:[{id:"RubyClawedRing",weight:6},{id:"SpikedCowl",weight:6},{id:"DarksteelPlate",weight:6},{id:"HatefulDarkness",weight:6},{id:"SpikedCowlEX",weight:6},{id:"RubyClawedRingEX",weight:5},{id:"DarksteelPlateEX",weight:6},{id:"HatefulDarknessEX",weight:6},{id:"WarpstoneAmulet",weight:5},{id:"BulwarkChain",weight:5},{id:"FlawedClasp",weight:5},{id:"SilkenRobe",weight:5},{id:"BrightPlate",weight:5},{id:"RestorationHelm",weight:5},{id:"ConfoundingMask",weight:5},{id:"JaggedRing",weight:5},{id:"BluntBludgeon",weight:5},{id:"AdventurersBlade",weight:5},{id:"BrutalBlade",weight:5},{id:"AudacityChain",weight:5},{id:"ShadowbaneCirclet",weight:5},{id:"Forgefang",weight:5}]},{minLevel:81,items:[{id:"BulwarkChain",weight:2},{id:"FlawedClasp",weight:2},{id:"WarpstoneAmulet",weight:2},{id:"SilkenRobe",weight:2},{id:"BrightPlate",weight:2},{id:"RestorationHelm",weight:2},{id:"RubyClawedRing",weight:5},{id:"SpikedCowl",weight:5},{id:"DarksteelPlate",weight:5},{id:"HatefulDarkness",weight:5},{id:"RubyClawedRingEX",weight:4},{id:"SpikedCowlEX",weight:4},{id:"DarksteelPlateEX",weight:4},{id:"HatefulDarknessEX",weight:4},{id:"ConfoundingMask",weight:2},{id:"JaggedRing",weight:2},{id:"BluntBludgeon",weight:2},{id:"AdventurersBlade",weight:2},{id:"BrutalBlade",weight:2},{id:"AudacityChain",weight:4},{id:"ShadowbaneCirclet",weight:4},{id:"Forgefang",weight:4}]}]},darkLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{id:"Gold",weight:1,quantity:[15,20]}]},{minLevel:4,maxLevel:5,items:[{id:"Gold",weight:16,quantity:[10,20]},{id:"Wood",weight:3,quantity:[1,2]},{id:"Ore",weight:3,quantity:[1,2]}]},{minLevel:6,maxLevel:20,items:[{id:"Gold",weight:16,quantity:[10,25]},{id:"Wood",weight:3,quantity:[1,2]},{id:"Stone",weight:3,quantity:[1,2]}]},{minLevel:21,maxLevel:40,items:[{id:"Gold",weight:48,quantity:[15,25]},{id:"Wood",weight:9,quantity:[1,3]},{id:"BlueprintStormWrathBelt",weight:1,quantity:1},{id:"Iron",weight:9,quantity:[1,3]},{id:"BlueprintBattlethirstyVest",weight:1,quantity:1},{id:"BlueprintDeadlyRelic",weight:1,quantity:1},{id:"BlueprintThunderHelm",weight:1,quantity:1}]},{minLevel:41,maxLevel:60,items:[{id:"Gold",weight:48,quantity:[20,30]},{id:"Wood",weight:9,quantity:[2,4]},{id:"BlueprintBattlethirstyVest",weight:2,quantity:1},{id:"Stone",weight:9,quantity:[2,4]},{id:"BlueprintDeadlyRelic",weight:2,quantity:1},{id:"BlueprintStormWrathBelt",weight:2,quantity:1},{id:"BlueprintThunderHelm",weight:2,quantity:1}]},{minLevel:61,items:[{id:"Gold",weight:16,quantity:[30,40]},{id:"Wood",weight:3,quantity:[3,5]},{id:"Ore",weight:3,quantity:[3,5]}]}]},darkLuckyLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:40,items:[{id:"DefensiveCharm",weight:6},{id:"RazorRing",weight:6},{id:"PhaseCharm",weight:8},{id:"InfernoRing",weight:1},{id:"HastySash",weight:8},{id:"RuggedJerkin",weight:8},{id:"BloodiedChainMail",weight:8},{id:"SturdyHeadguard",weight:8},{id:"LeatherCap",weight:8},{id:"MuscleRing",weight:8},{id:"CopperRing",weight:8},{id:"SturdyCleaver",weight:8},{id:"SerratedSword",weight:8},{id:"WarpstoneAmulet",weight:2},{id:"BulwarkChain",weight:2},{id:"FlawedClasp",weight:2},{id:"SilkenRobe",weight:2},{id:"BrightPlate",weight:2},{id:"RestorationHelm",weight:2},{id:"ConfoundingMask",weight:2},{id:"JaggedRing",weight:2},{id:"BluntBludgeon",weight:2},{id:"AdventurersBlade",weight:2},{id:"BrutalBlade",weight:2},{id:"AudacityChain",weight:1},{id:"ShadowbaneCirclet",weight:1},{id:"Forgefang",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"RazorRing",weight:1},{id:"DefensiveCharm",weight:1},{id:"PhaseCharm",weight:2},{id:"HastySash",weight:2},{id:"RuggedJerkin",weight:2},{id:"BloodiedChainMail",weight:2},{id:"SturdyHeadguard",weight:2},{id:"LeatherCap",weight:2},{id:"MuscleRing",weight:2},{id:"CopperRing",weight:2},{id:"SturdyCleaver",weight:2},{id:"SerratedSword",weight:2},{id:"WarpstoneAmulet",weight:5},{id:"BulwarkChain",weight:5},{id:"FlawedClasp",weight:5},{id:"SilkenRobe",weight:5},{id:"BrightPlate",weight:5},{id:"RestorationHelm",weight:5},{id:"ConfoundingMask",weight:5},{id:"JaggedRing",weight:5},{id:"BluntBludgeon",weight:5},{id:"AdventurersBlade",weight:5},{id:"BrutalBlade",weight:5},{id:"AudacityChain",weight:1},{id:"ShadowbaneCirclet",weight:1},{id:"InfernoRing",weight:1},{id:"Forgefang",weight:1}]},{minLevel:61,items:[{id:"DefensiveCharm",weight:1},{id:"RazorRing",weight:1},{id:"PhaseCharm",weight:1},{id:"HastySash",weight:1},{id:"RuggedJerkin",weight:1},{id:"BloodiedChainMail",weight:1},{id:"SturdyHeadguard",weight:1},{id:"LeatherCap",weight:1},{id:"MuscleRing",weight:1},{id:"CopperRing",weight:1},{id:"SturdyCleaver",weight:1},{id:"SerratedSword",weight:1},{id:"WarpstoneAmulet",weight:5},{id:"BulwarkChain",weight:5},{id:"FlawedClasp",weight:5},{id:"SilkenRobe",weight:5},{id:"BrightPlate",weight:5},{id:"RestorationHelm",weight:5},{id:"ConfoundingMask",weight:5},{id:"JaggedRing",weight:5},{id:"BluntBludgeon",weight:5},{id:"AdventurersBlade",weight:5},{id:"BrutalBlade",weight:5},{id:"AudacityChain",weight:2},{id:"ShadowbaneCirclet",weight:2},{id:"InfernoRing",weight:2},{id:"Forgefang",weight:2}]}]},fireHeadBossLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:60,items:[{id:"InfernoCaller",weight:1},{id:"HeartyBelt",weight:1},{id:"BlazingRing",weight:8},{id:"BolsteringHeadgear",weight:1},{id:"RuinedRod",weight:1},{id:"RestorationChainmail",weight:2},{id:"RoughRazor",weight:8},{id:"BatteredBroadsword",weight:8},{id:"CrystalHeartCharm",weight:4},{id:"WraithSash",weight:4},{id:"PainfulWrap",weight:4},{id:"SharkskinShirt",weight:4},{id:"RustedHelm",weight:4},{id:"PaddedHelmet",weight:4},{id:"RingOfRepair",weight:4},{id:"TwilightBand",weight:4},{id:"Stormseeker",weight:4},{id:"SawtoothAxe",weight:4},{id:"SurvivalCharm",weight:2},{id:"TwineCord",weight:2},{id:"SwiftCowl",weight:2},{id:"VanishingHood",weight:2},{id:"QuicksilverRing",weight:2},{id:"FocusRing",weight:2},{id:"ShadowSlicer",weight:1}]},{minLevel:61,maxLevel:80,items:[{id:"CrystalHeartCharm",weight:4},{id:"WraithSash",weight:4},{id:"PainfulWrap",weight:4},{id:"SharkskinShirt",weight:4},{id:"RustedHelm",weight:4},{id:"PaddedHelmet",weight:4},{id:"TwilightBand",weight:4},{id:"Stormseeker",weight:4},{id:"SawtoothAxe",weight:4},{id:"RestorationChainmail",weight:2},{id:"SurvivalCharm",weight:2},{id:"TwineCord",weight:2},{id:"SwiftCowl",weight:2},{id:"VanishingHood",weight:2},{id:"QuicksilverRing",weight:2},{id:"FocusRing",weight:2},{id:"ShadowSlicer",weight:2},{id:"BolsteringHeadgear",weight:2},{id:"RuinedRod",weight:2},{id:"InfernoCaller",weight:2},{id:"HeartyBelt",weight:2}]},{minLevel:81,maxLevel:100,items:[{id:"RestorationChainmailEX",weight:1},{id:"BolsteringHeadgearEX",weight:1},{id:"HeartyBeltEX",weight:1},{id:"InfernoCallerEX",weight:1},{id:"CrystalHeartCharm",weight:1},{id:"WraithSash",weight:1},{id:"PainfulWrap",weight:1},{id:"SharkskinShirt",weight:1},{id:"RustedHelm",weight:1},{id:"PaddedHelmet",weight:1},{id:"TwilightBand",weight:1},{id:"Stormseeker",weight:1},{id:"SawtoothAxe",weight:1},{id:"RestorationChainmail",weight:3},{id:"SurvivalCharm",weight:3},{id:"TwineCord",weight:3},{id:"SwiftCowl",weight:3},{id:"VanishingHood",weight:3},{id:"QuicksilverRing",weight:3},{id:"FocusRing",weight:3},{id:"ShadowSlicer",weight:3},{id:"BolsteringHeadgear",weight:3},{id:"RuinedRod",weight:3},{id:"InfernoCaller",weight:3},{id:"HeartyBelt",weight:3}]},{minLevel:101,items:[{id:"RestorationChainmail",weight:3},{id:"SurvivalCharm",weight:3},{id:"TwineCord",weight:3},{id:"SwiftCowl",weight:3},{id:"VanishingHood",weight:3},{id:"QuicksilverRing",weight:3},{id:"FocusRing",weight:3},{id:"ShadowSlicer",weight:3},{id:"BolsteringHeadgear",weight:3},{id:"InfernoCaller",weight:3},{id:"HeartyBelt",weight:3},{id:"RestorationChainmailEX",weight:3},{id:"BolsteringHeadgearEX",weight:3},{id:"HeartyBeltEX",weight:3},{id:"InfernoCallerEX",weight:3}]}]},golemLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{id:"Gold",weight:1,quantity:[15,20]}]},{minLevel:4,maxLevel:5,items:[{id:"Gold",weight:6,quantity:[10,20]},{id:"Stone",weight:4,quantity:1}]},{minLevel:6,maxLevel:20,items:[{id:"Gold",weight:6,quantity:[10,25]},{id:"Stone",weight:4,quantity:1}]},{minLevel:21,maxLevel:40,items:[{id:"Gold",weight:6,quantity:[15,25]},{id:"Stone",weight:4,quantity:[1,2]}]},{minLevel:41,maxLevel:60,items:[{id:"Gold",weight:6,quantity:[20,30]},{id:"Stone",weight:4,quantity:[2,4]}]},{minLevel:61,items:[{id:"Gold",weight:96,quantity:[30,40]},{id:"Stone",weight:64,quantity:4},{id:"BlueprintDarkBargainCharm",weight:1,quantity:1},{id:"BlueprintDrainingEdge",weight:1,quantity:1},{id:"BlueprintFerocityRing",weight:1,quantity:1},{id:"BlueprintPhantomEdge",weight:1,quantity:1},{id:"BlueprintSmitingEdge",weight:1,quantity:1}]}]},golemLuckyLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:40,items:[{id:"PlatedBelt",weight:6},{id:"LifevineBelt",weight:6},{id:"InsulatedWrap",weight:6},{id:"GroundedPlate",weight:6},{id:"AcuityHelm",weight:6},{id:"GlacialShard2",weight:6},{id:"GlacialShard",weight:6},{id:"WizardSigil",weight:3},{id:"GroundingBelt",weight:3},{id:"GuardianPlate",weight:3},{id:"FlameguardJacket",weight:3},{id:"FuryBlade",weight:3},{id:"FlameguardSword",weight:3},{id:"GhostlyPendant",weight:1},{id:"StackedSignet",weight:1},{id:"SalvationScimitar",weight:1},{id:"DoublePoleAxe",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"Duskbringer",weight:2},{id:"BraveheartHelm",weight:2},{id:"PlatedBelt",weight:3},{id:"LifevineBelt",weight:3},{id:"InsulatedWrap",weight:3},{id:"GroundedPlate",weight:3},{id:"AcuityHelm",weight:3},{id:"GlacialShard2",weight:3},{id:"GlacialShard",weight:3},{id:"WizardSigil",weight:4},{id:"GroundingBelt",weight:4},{id:"GuardianPlate",weight:4},{id:"FlameguardJacket",weight:4},{id:"FuryBlade",weight:4},{id:"FlameguardSword",weight:4},{id:"GhostlyPendant",weight:1},{id:"StackedSignet",weight:1},{id:"SalvationScimitar",weight:1},{id:"DoublePoleAxe",weight:1}]},{minLevel:61,items:[{id:"Duskbringer",weight:1},{id:"BraveheartHelm",weight:1},{id:"PlatedBelt",weight:1},{id:"LifevineBelt",weight:1},{id:"InsulatedWrap",weight:1},{id:"GuardsBelt",weight:1},{id:"GroundedPlate",weight:1},{id:"AcuityHelm",weight:1},{id:"GlacialShard2",weight:1},{id:"GlacialShard",weight:1},{id:"WizardSigil",weight:6},{id:"GroundingBelt",weight:6},{id:"GuardianPlate",weight:6},{id:"FlameguardJacket",weight:6},{id:"FuryBlade",weight:6},{id:"FlameguardSword",weight:6},{id:"GhostlyPendant",weight:1},{id:"StackedSignet",weight:1},{id:"SalvationScimitar",weight:1},{id:"DoublePoleAxe",weight:1}]}]},livingArmorBossLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:100,items:[{id:"SwordOfRespite",weight:1},{id:"MantleofNeed",weight:1},{id:"BrutalBlade",weight:6},{id:"BlastingRing",weight:2},{id:"WardingBelt",weight:4},{id:"PlatedBelt",weight:6},{id:"InsulatedWrap",weight:6},{id:"GroundedPlate",weight:6},{id:"GlacialShard2",weight:6},{id:"WizardSigil",weight:4},{id:"GroundingBelt",weight:4},{id:"TwistedCharm",weight:4},{id:"GuardianPlate",weight:4},{id:"FuryBlade",weight:4},{id:"FlameguardSword",weight:4},{id:"FuryBlade",weight:4},{id:"GhostlyPendant",weight:2},{id:"StackedSignet",weight:2},{id:"SalvationScimitar",weight:2},{id:"DoublePoleAxe",weight:2},{id:"FuryVest",weight:2},{id:"BuccaneersFriend",weight:2},{id:"Shatterblade",weight:2}]},{minLevel:101,items:[{id:"WardingBeltEX",weight:2},{id:"BrutalBlade",weight:1},{id:"BlastingRingEX",weight:2},{id:"MantleofNeedEX",weight:2},{id:"SwordOfRespiteEX",weight:2},{id:"PlatedBelt",weight:1},{id:"InsulatedWrap",weight:1},{id:"GroundedPlate",weight:1},{id:"GlacialShard2",weight:1},{id:"WizardSigil",weight:4},{id:"GroundingBelt",weight:4},{id:"GuardianPlate",weight:4},{id:"TwistedCharm",weight:4},{id:"FuryBlade",weight:4},{id:"FlameguardSword",weight:4},{id:"FuryBlade",weight:4},{id:"WardingBelt",weight:2},{id:"GhostlyPendant",weight:2},{id:"StackedSignet",weight:2},{id:"SalvationScimitar",weight:2},{id:"DoublePoleAxe",weight:2},{id:"BlastingRing",weight:2},{id:"BuccaneersFriend",weight:2},{id:"FuryVest",weight:2},{id:"Shatterblade",weight:2},{id:"SeethingSash",weight:2},{id:"SwordOfRespite",weight:2},{id:"MantleofNeed",weight:2}]}]},mushroomLargeBossLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:20,items:[{id:"RagingCharm",weight:2},{id:"VolatileSash",weight:2},{id:"SurgeBlade",weight:2},{id:"SurgeHelm",weight:2},{id:"RawhideCap",weight:8},{id:"HeavyBand",weight:8},{id:"SimpleCutlass",weight:8},{id:"RusticSword",weight:8},{id:"ChippedShortsword",weight:8},{id:"RusticBelt",weight:8},{id:"VengefulLocket",weight:2},{id:"HardenedGarb",weight:6},{id:"ConjurersCap",weight:6},{id:"ToughHelmet",weight:6},{id:"BronzeAmulet",weight:4},{id:"ChargedFalchion",weight:4},{id:"FragmentOfTheGreatSword",weight:4}]},{minLevel:21,maxLevel:40,items:[{id:"RawhideCap",weight:6},{id:"HeavyBand",weight:6},{id:"SimpleCutlass",weight:6},{id:"RusticSword",weight:6},{id:"RusticBelt",weight:6},{id:"ChippedShortsword",weight:6},{id:"RagingCharm",weight:4},{id:"VengefulLocket",weight:4},{id:"ConjurersCap",weight:4},{id:"HardenedGarb",weight:6},{id:"ToughHelmet",weight:6},{id:"VolatileSash",weight:4},{id:"BronzeAmulet",weight:4},{id:"ChargedFalchion",weight:4},{id:"FragmentOfTheGreatSword",weight:4},{id:"SurgeBlade",weight:4},{id:"SurgeHelm",weight:4}]},{minLevel:41,maxLevel:60,items:[{id:"RagingCharmEX",weight:1},{id:"VolatileSashEX",weight:1},{id:"SurgeHelmEX",weight:1},{id:"SurgeBladeEX",weight:1},{id:"RagingCharm",weight:3},{id:"VengefulLocket",weight:3},{id:"HardenedGarb",weight:6},{id:"ToughHelmet",weight:6},{id:"VolatileSash",weight:6},{id:"BronzeAmulet",weight:6},{id:"ChargedFalchion",weight:6},{id:"SurgeBlade",weight:3},{id:"SurgeHelm",weight:3}]},{minLevel:61,items:[{id:"RagingCharm",weight:6},{id:"HardenedGarb",weight:6},{id:"VengefulLocket",weight:6},{id:"ToughHelmet",weight:6},{id:"VolatileSash",weight:6},{id:"BronzeAmulet",weight:6},{id:"ChargedFalchion",weight:6},{id:"SurgeBlade",weight:6},{id:"SurgeHelm",weight:6},{id:"RagingCharmEX",weight:6},{id:"VolatileSashEX",weight:6},{id:"SurgeHelmEX",weight:6},{id:"SurgeBladeEX",weight:6}]}]},mushroomLargeEliteLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:20,items:[{id:"Gold",quantity:200}]},{minLevel:21,maxLevel:40,items:[{id:"Gold",quantity:400}]},{minLevel:41,maxLevel:60,items:[{id:"Gold",quantity:600}]},{minLevel:61,maxLevel:80,items:[{id:"Gold",quantity:1e3}]},{minLevel:81,items:[{id:"Gold",quantity:2e3}]}]},mushroomLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{id:"Gold",weight:1,quantity:[15,20]}]},{minLevel:4,maxLevel:5,items:[{id:"Gold",weight:9,quantity:[10,20]},{id:"Wood",weight:2,quantity:[1,2]},{id:"Stone",weight:2,quantity:[1,2]}]},{minLevel:6,maxLevel:20,items:[{id:"Gold",weight:9,quantity:[10,25]},{id:"Wood",weight:2,quantity:[1,2]},{id:"BlueprintBlazingShortsword",weight:1,quantity:1},{id:"Iron",weight:2,quantity:[1,2]},{id:"BlueprintDarkShortsword",weight:1,quantity:1},{id:"BlueprintElectricShortsword",weight:1,quantity:1},{id:"BlueprintFrozenShortsword",weight:1,quantity:1},{id:"BlueprintShieldingBand",weight:1,quantity:1}]},{minLevel:21,maxLevel:40,items:[{id:"Gold",weight:9,quantity:[15,25]},{id:"Wood",weight:2,quantity:[1,3]},{id:"Ore",weight:2,quantity:[1,3]}]},{minLevel:41,maxLevel:60,items:[{id:"Gold",weight:9,quantity:[20,30]},{id:"Wood",weight:2,quantity:[2,3]},{id:"Iron",weight:2,quantity:[2,3]}]},{minLevel:61,items:[{id:"Gold",weight:9,quantity:[30,40]},{id:"Wood",weight:2,quantity:[3,5]},{id:"Iron",weight:2,quantity:[3,5]}]}]},mushroomLuckyLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:20,items:[{id:"BlazingAmulet",weight:9},{id:"ChippedPendant",weight:9},{id:"RopeBraid",weight:9},{id:"StoneBlade",weight:1},{id:"BladedBelt",weight:9},{id:"ProtectiveMantle",weight:9},{id:"LeatherTunic",weight:9},{id:"ShieldingHelm",weight:9},{id:"RawhideCap",weight:9},{id:"TarnishedBand",weight:9},{id:"HeavyBand",weight:9},{id:"RusticBelt",weight:9},{id:"SimpleCutlass",weight:9},{id:"RusticSword",weight:9},{id:"ChippedShortsword",weight:14},{id:"VengefulLocket",weight:1},{id:"HardenedGarb",weight:1},{id:"ConjurersCap",weight:1},{id:"ToughHelmet",weight:1}]},{minLevel:21,maxLevel:40,items:[{id:"BlazingAmulet",weight:6},{id:"ChippedPendant",weight:6},{id:"RopeBraid",weight:6},{id:"StoneBlade",weight:3},{id:"FirststrikeVest",weight:3},{id:"FragmentOfTheGreatSword",weight:3},{id:"BladedBelt",weight:6},{id:"ProtectiveMantle",weight:6},{id:"LeatherTunic",weight:6},{id:"ShieldingHelm",weight:6},{id:"RawhideCap",weight:6},{id:"TarnishedBand",weight:6},{id:"HeavyBand",weight:6},{id:"SimpleCutlass",weight:6},{id:"RusticSword",weight:6},{id:"ChippedShortsword",weight:9},{id:"VengefulLocket",weight:3},{id:"HardenedGarb",weight:3},{id:"ToughHelmet",weight:3}]},{minLevel:41,items:[{id:"ProtectiveMantle",weight:3},{id:"BlazingAmulet",weight:3},{id:"ChippedPendant",weight:3},{id:"RopeBraid",weight:3},{id:"BladedBelt",weight:3},{id:"LeatherTunic",weight:3},{id:"ShieldingHelm",weight:3},{id:"RawhideCap",weight:3},{id:"TarnishedBand",weight:3},{id:"HeavyBand",weight:3},{id:"SimpleCutlass",weight:3},{id:"RusticSword",weight:3},{id:"ChippedShortsword",weight:6},{id:"VengefulLocket",weight:5},{id:"HardenedGarb",weight:5},{id:"ToughHelmet",weight:5},{id:"StoneBlade",weight:5},{id:"FirststrikeVest",weight:3}]}]},robotBossBossLoot:{type:"oneOf",tiers:[{minLevel:1,items:[{id:"FlameguardSword",weight:8},{id:"FuryBlade",weight:8},{id:"FuryBlade",weight:8},{id:"GroundingBelt",weight:8},{id:"GuardianPlate",weight:8},{id:"ShadowDrinkerHelmUltimate",weight:8},{id:"ThunderHelm",weight:8},{id:"WizardSigil",weight:8},{id:"DoublePoleAxe",weight:4},{id:"GhostlyPendant",weight:4},{id:"SalvationScimitar",weight:4},{id:"StackedSignet",weight:4},{id:"BattlethirstyVest",weight:1},{id:"WardingBelt",weight:4},{id:"BlastingRing",weight:4},{id:"DarkBargainCharm",weight:4},{id:"FerocityRing",weight:4},{id:"FuryVest",weight:4},{id:"Shatterblade",weight:4},{id:"MantleofNeed",weight:4},{id:"SwordOfRespite",weight:4},{id:"WardingBeltEX",weight:4},{id:"BlastingRingEX",weight:4},{id:"CursedNaginata",weight:4},{id:"MantleofNeedEX",weight:4},{id:"SwordOfRespiteEX",weight:4},{id:"DeathzoneNecklet",weight:8},{id:"Fangblade",weight:6},{id:"RecoveryVest",weight:8},{id:"TwinForkedSash",weight:6},{id:"UntouchableMantle",weight:4},{id:"VectraEdge",weight:4},{id:"DeathzoneLocketEX",weight:1},{id:"WastelandBlade",weight:8},{id:"WrathfulVisor",weight:6},{id:"FangbladeEX",weight:1},{id:"RecoveryVestEX",weight:1},{id:"TwinForkedSashEX",weight:1},{id:"UntouchableMantleEX",weight:1},{id:"VectraEdgeEX",weight:1},{id:"WastelandBladeEX",weight:1},{id:"WrathfulVisorEX",weight:1}]}]},robotLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{id:"Gold",weight:1,quantity:[15,20]}]},{minLevel:4,maxLevel:5,items:[{id:"Gold",weight:16,quantity:[10,20]},{id:"Iron",weight:3,quantity:[1,2]},{id:"Ore",weight:3,quantity:[1,2]}]},{minLevel:6,maxLevel:20,items:[{id:"Gold",weight:16,quantity:[10,25]},{id:"Iron",weight:3,quantity:[1,3]},{id:"Stone",weight:3,quantity:[1,3]}]},{minLevel:21,maxLevel:40,items:[{id:"Gold",weight:16,quantity:[15,25]},{id:"Ore",weight:3,quantity:[2,4]},{id:"Iron",weight:3,quantity:[2,4]}]},{minLevel:41,maxLevel:60,items:[{id:"Gold",weight:16,quantity:[20,30]},{id:"Iron",weight:3,quantity:[3,4]},{id:"Stone",weight:3,quantity:[3,4]}]},{minLevel:61,items:[{id:"Gold",weight:30,quantity:[30,70]},{id:"Iron",weight:3,quantity:[3,5]},{id:"Stone",weight:3,quantity:[3,5]},{id:"Wood",weight:3,quantity:[3,5]},{id:"Ore",weight:3,quantity:[3,5]}]}]},robotLuckyLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:60,items:[{id:"PlatedBelt",weight:6},{id:"InsulatedWrap",weight:6},{id:"GroundedPlate",weight:6},{id:"BrutalBlade",weight:6},{id:"GlacialShard2",weight:6},{id:"WizardSigil",weight:1},{id:"GroundingBelt",weight:1},{id:"GuardianPlate",weight:1},{id:"FuryBlade",weight:1},{id:"FlameguardSword",weight:1},{id:"FuryBlade",weight:1}]},{minLevel:61,items:[{id:"EternityMace",weight:9},{id:"PlatedBelt",weight:3},{id:"InsulatedWrap",weight:3},{id:"GroundedPlate",weight:3},{id:"BrutalBlade",weight:3},{id:"GlacialShard2",weight:3},{id:"WizardSigil",weight:6},{id:"GroundingBelt",weight:6},{id:"GuardianPlate",weight:6},{id:"FuryBlade",weight:6},{id:"FlameguardSword",weight:6},{id:"FuryBlade",weight:6}]}]},robotNo6BossLoot:{type:"oneOf",tiers:[{minLevel:1,items:[{id:"BlastingRing",weight:2},{id:"BlastingRingEX",weight:2},{id:"DoublePoleAxe",weight:2},{id:"FlameguardSword",weight:4},{id:"FuryBlade",weight:4},{id:"FuryBlade",weight:4},{id:"FuryVest",weight:2},{id:"GhostlyPendant",weight:2},{id:"GroundingBelt",weight:4},{id:"GuardianPlate",weight:4},{id:"MantleofNeed",weight:2},{id:"MantleofNeedEX",weight:2},{id:"SalvationScimitar",weight:2},{id:"Shatterblade",weight:2},{id:"StackedSignet",weight:2},{id:"SwordOfRespite",weight:2},{id:"SwordOfRespiteEX",weight:2},{id:"WardingBelt",weight:2},{id:"WardingBeltEX",weight:2},{id:"WizardSigil",weight:4},{id:"ShadowDrinkerHelmUltimate",weight:4},{id:"BattlethirstyVest",weight:1},{id:"DeadlyRelic",weight:4},{id:"ThunderHelm",weight:4},{id:"DarkBargainCharm",weight:2},{id:"FrenziedSash",weight:4},{id:"FerocityRing",weight:2},{id:"SmitingEdge",weight:2},{id:"DrainingEdge",weight:2},{id:"PhantomEdge",weight:2},{id:"CursedNaginata",weight:2}]}]},skeletonLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{id:"Gold",weight:1,quantity:[15,20]}]},{minLevel:4,maxLevel:5,items:[{id:"Gold",weight:7,quantity:[10,20]},{tableId:"skeletonResourceWrapperLoot",weight:3}]},{minLevel:6,maxLevel:20,items:[{id:"Gold",weight:7,quantity:[10,25]},{tableId:"skeletonResourceWrapperLoot",weight:3}]},{minLevel:21,maxLevel:40,items:[{id:"Gold",weight:42,quantity:[15,25]},{tableId:"skeletonResourceWrapperLoot",weight:18},{id:"BlueprintBattlethirstyVest",weight:1,quantity:1},{id:"BlueprintDeadlyRelic",weight:1,quantity:1},{id:"BlueprintStormWrathBelt",weight:1,quantity:1},{id:"BlueprintThunderHelm",weight:1,quantity:1}]},{minLevel:41,maxLevel:60,items:[{id:"Gold",weight:42,quantity:[20,30]},{tableId:"skeletonResourceWrapperLoot",weight:18},{id:"BlueprintBattlethirstyVest",weight:1,quantity:1},{id:"BlueprintDeadlyRelic",weight:1,quantity:1},{id:"BlueprintStormWrathBelt",weight:1,quantity:1},{id:"BlueprintThunderHelm",weight:1,quantity:1}]},{minLevel:61,items:[{id:"Gold",weight:7,quantity:[30,40]},{tableId:"skeletonResourceWrapperLoot",weight:3}]}]},skeletonLuckyLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:40,items:[{id:"BlazingRing",weight:14},{id:"RoughRazor",weight:14},{id:"BatteredBroadsword",weight:14},{id:"CrystalHeartCharm",weight:4},{id:"WraithSash",weight:4},{id:"PainfulWrap",weight:4},{id:"SharkskinShirt",weight:4},{id:"RustedHelm",weight:4},{id:"PaddedHelmet",weight:4},{id:"TwilightBand",weight:4},{id:"Stormseeker",weight:4},{id:"SawtoothAxe",weight:4},{id:"SurvivalCharm",weight:1},{id:"TwineCord",weight:1},{id:"SwiftCowl",weight:1},{id:"VanishingHood",weight:1},{id:"QuicksilverRing",weight:1},{id:"FocusRing",weight:1},{id:"ShadowSlicer",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"BlazingRing",weight:3},{id:"BerserkerAxe",weight:1},{id:"RoughRazor",weight:3},{id:"BatteredBroadsword",weight:3},{id:"CrystalHeartCharm",weight:7},{id:"WraithSash",weight:7},{id:"PainfulWrap",weight:7},{id:"SharkskinShirt",weight:7},{id:"RustedHelm",weight:7},{id:"PaddedHelmet",weight:7},{id:"TwilightBand",weight:7},{id:"Stormseeker",weight:7},{id:"SawtoothAxe",weight:7},{id:"SurvivalCharm",weight:2},{id:"TwineCord",weight:2},{id:"SwiftCowl",weight:2},{id:"VanishingHood",weight:2},{id:"QuicksilverRing",weight:2},{id:"FocusRing",weight:2},{id:"ShadowSlicer",weight:2}]},{minLevel:61,items:[{id:"PainfulWrap",weight:3},{id:"CrystalHeartCharm",weight:3},{id:"WraithSash",weight:3},{id:"SharkskinShirt",weight:3},{id:"RustedHelm",weight:3},{id:"PaddedHelmet",weight:3},{id:"TwilightBand",weight:3},{id:"Stormseeker",weight:3},{id:"SawtoothAxe",weight:3},{id:"SurvivalCharm",weight:5},{id:"TwineCord",weight:5},{id:"SwiftCowl",weight:5},{id:"VanishingHood",weight:5},{id:"QuicksilverRing",weight:5},{id:"FocusRing",weight:5},{id:"ShadowSlicer",weight:5},{id:"BerserkerAxe",weight:2},{id:"HerosLongSword",weight:2}]}]},skeletonResourceWrapperLoot:{type:"always",tiers:[{minLevel:4,maxLevel:5,items:[{id:"Iron",weight:1,quantity:[1,3]},{id:"Pumpkin",weight:1,quantity:[1,7]}]},{minLevel:6,maxLevel:20,items:[{id:"Iron",weight:1,quantity:[1,4]},{id:"Pumpkin",weight:1,quantity:[1,7]}]},{minLevel:21,maxLevel:40,items:[{id:"Iron",weight:1,quantity:[1,4]},{id:"Pumpkin",weight:1,quantity:[1,7]}]},{minLevel:41,maxLevel:60,items:[{id:"Iron",weight:1,quantity:[1,6]},{id:"Pumpkin",weight:1,quantity:[1,7]}]},{minLevel:61,items:[{id:"Iron",weight:1,quantity:[1,8]},{id:"Pumpkin",weight:1,quantity:[1,7]}]}]},slimeLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:3,items:[{id:"Gold",weight:1,quantity:[15,20]}]},{minLevel:4,maxLevel:5,items:[{id:"Gold",weight:6,quantity:[10,20]},{id:"Ore",weight:4,quantity:[1,2]}]},{minLevel:6,maxLevel:20,items:[{id:"Gold",weight:6,quantity:[10,25]},{id:"Ore",weight:4,quantity:[1,2]}]},{minLevel:21,maxLevel:40,items:[{id:"Gold",weight:6,quantity:[15,25]},{id:"Ore",weight:4,quantity:[1,3]}]},{minLevel:41,maxLevel:60,items:[{id:"Gold",weight:6,quantity:[20,30]},{id:"Ore",weight:4,quantity:[2,4]}]},{minLevel:61,items:[{id:"Gold",weight:96,quantity:[30,40]},{id:"Ore",weight:64,quantity:4},{id:"BlueprintSmitingEdge",weight:1,quantity:1},{id:"BlueprintDrainingEdge",weight:1,quantity:1},{id:"BlueprintPhantomEdge",weight:1,quantity:1},{id:"BlueprintFerocityRing",weight:1,quantity:1},{id:"BlueprintDarkBargainCharm",weight:1,quantity:1},{id:"BlueprintCursedNaginata",weight:1,quantity:1}]}]},slimeLuckyLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:60,items:[{id:"PlatedBelt",weight:6},{id:"InsulatedWrap",weight:6},{id:"GroundedPlate",weight:6},{id:"BrutalBlade",weight:6},{id:"GlacialShard2",weight:6},{id:"WizardSigil",weight:1},{id:"GroundingBelt",weight:1},{id:"GuardianPlate",weight:1},{id:"FuryBlade",weight:1},{id:"FlameguardSword",weight:1},{id:"FuryBlade",weight:1}]},{minLevel:61,items:[{id:"EternityMace",weight:9},{id:"PlatedBelt",weight:3},{id:"InsulatedWrap",weight:3},{id:"GroundedPlate",weight:3},{id:"BrutalBlade",weight:3},{id:"GlacialShard2",weight:3},{id:"WizardSigil",weight:6},{id:"GroundingBelt",weight:6},{id:"GuardianPlate",weight:6},{id:"FuryBlade",weight:6},{id:"FlameguardSword",weight:6},{id:"FuryBlade",weight:6}]}]},woodGolemBossLoot:{type:"oneOf",tiers:[{minLevel:1,maxLevel:80,items:[{id:"SouldrainAxe",weight:1},{id:"WatchersLocket",weight:1},{id:"PlatedBelt",weight:8},{id:"AdrenalineCap",weight:2},{id:"WatchersSpark",weight:4},{id:"LifevineBelt",weight:8},{id:"InsulatedWrap",weight:8},{id:"GuardsBelt",weight:8},{id:"GroundedPlate",weight:8},{id:"AcuityHelm",weight:8},{id:"GlacialShard2",weight:8},{id:"GlacialShard",weight:8},{id:"WizardSigil",weight:4},{id:"GroundingBelt",weight:4},{id:"GuardianPlate",weight:4},{id:"FlameguardJacket",weight:4},{id:"FuryBlade",weight:4},{id:"FlameguardSword",weight:4},{id:"GhostlyPendant",weight:2},{id:"StackedSignet",weight:2},{id:"SalvationScimitar",weight:2},{id:"DoublePoleAxe",weight:2}]},{minLevel:81,maxLevel:100,items:[{id:"WatchersSpark",weight:4},{id:"WizardSigil",weight:4},{id:"GroundingBelt",weight:4},{id:"GuardianPlate",weight:4},{id:"FlameguardJacket",weight:4},{id:"FuryBlade",weight:4},{id:"FlameguardSword",weight:4},{id:"AdrenalineCap",weight:2},{id:"GhostlyPendant",weight:2},{id:"StackedSignet",weight:2},{id:"SalvationScimitar",weight:2},{id:"DoublePoleAxe",weight:2},{id:"SouldrainAxe",weight:1},{id:"WatchersLocket",weight:1}]},{minLevel:101,items:[{id:"WatchersSparkEX",weight:2},{id:"WatchersSpark",weight:4},{id:"AdrenalineCapEX",weight:2},{id:"WatchersLocketEX",weight:2},{id:"SouldrainAxeEX",weight:2},{id:"WizardSigil",weight:4},{id:"GroundingBelt",weight:4},{id:"GuardianPlate",weight:4},{id:"FlameguardJacket",weight:4},{id:"FuryBlade",weight:4},{id:"FlameguardSword",weight:4},{id:"AdrenalineCap",weight:3},{id:"GhostlyPendant",weight:3},{id:"StackedSignet",weight:3},{id:"SalvationScimitar",weight:3},{id:"SeethingSash",weight:3},{id:"DoublePoleAxe",weight:3},{id:"SouldrainAxe",weight:2},{id:"WatchersLocket",weight:2}]}]},smallResourceBundle:{type:"always",tiers:[{minLevel:1,items:[{id:"Ore",weight:1,quantity:130},{id:"Stone",weight:1,quantity:130},{id:"Wood",weight:1,quantity:130},{id:"Iron",weight:1,quantity:130}]}]},bigResourceBundle:{type:"always",tiers:[{minLevel:1,items:[{id:"Ore",weight:1,quantity:350},{id:"Stone",weight:1,quantity:350},{id:"Wood",weight:1,quantity:350},{id:"Iron",weight:1,quantity:350}]}]},smallMapBundle:{type:"always",tiers:[{minLevel:1,items:[{id:"MapFieldsUncommon",weight:1},{id:"MapMossyForestUncommon",weight:1},{id:"MapRuinedPathUncommon",weight:1},{id:"MapMountainPassUncommon",weight:1}]}]},mediumMapBundle:{type:"always",tiers:[{minLevel:1,items:[{id:"MapNewEdenUncommon",weight:1},{id:"MapSeasideCliffsUncommon",weight:1},{id:"MapOuterTempleUncommon",weight:1},{id:"MapNewEdenUncommon",weight:1},{id:"MapSeasideCliffsUncommon",weight:1},{id:"MapOuterTempleUncommon",weight:1},{id:"MapForbiddenCityUncommon",weight:1},{id:"MapForbiddenCityUncommon",weight:1}]}]},rareMapBundle:{type:"always",tiers:[{minLevel:1,items:[{id:"MapFieldsRare",weight:1},{id:"MapMossyForestRare",weight:1},{id:"MapRuinedPathRare",weight:1},{id:"MapMountainPassRare",weight:1},{id:"MapSeasideCliffsRare",weight:1},{id:"MapOuterTempleRare",weight:1},{id:"MapFieldsRare",weight:1},{id:"MapMossyForestRare",weight:1},{id:"MapRuinedPathRare",weight:1},{id:"MapMountainPassRare",weight:1},{id:"MapSeasideCliffsRare",weight:1},{id:"MapNewEdenRare",weight:1},{id:"MapNewEdenRare",weight:1},{id:"MapForbiddenCityRare",weight:1},{id:"MapForbiddenCityRare",weight:1},{id:"MapOuterTempleRare",weight:1}]}]},noviceRareMapBundle:{type:"always",tiers:[{minLevel:1,items:[{id:"MapFieldsRare",weight:1},{id:"MapMossyForestRare",weight:1},{id:"MapRuinedPathRare",weight:1},{id:"MapMountainPassRare",weight:1}]}]},veteranRareMapBundle:{type:"always",tiers:[{minLevel:1,items:[{id:"MapSeasideCliffsRare",weight:1},{id:"MapOuterTempleRare",weight:1},{id:"MapForbiddenCityRare",weight:1},{id:"MapNewEdenRare",weight:1}]}]},massiveResourceBundle:{type:"always",tiers:[{minLevel:1,items:[{id:"Iron",weight:1,quantity:900},{id:"Ore",weight:1,quantity:900},{id:"Stone",weight:1,quantity:900},{id:"Wood",weight:1,quantity:900}]}]},premiumCosmeticGentlemansBowler:{type:"always",tiers:[{minLevel:1,items:[{id:"GentlemansBowler",weight:1}]}]},premiumCosmeticWizardlyHat:{type:"always",tiers:[{minLevel:1,items:[{id:"WizardlyHat",weight:1}]}]},premiumCosmeticHelmOfTheSkyguard:{type:"always",tiers:[{minLevel:1,items:[{id:"HelmOfTheSkyguard",weight:1}]}]},premiumCosmeticBarbaricHelm:{type:"always",tiers:[{minLevel:1,items:[{id:"BarbaricHelm",weight:1}]}]},premiumCosmeticHornedKettle:{type:"always",tiers:[{minLevel:1,items:[{id:"HornedKettle",weight:1}]}]},premiumCosmeticKethricVigilHood:{type:"always",tiers:[{minLevel:1,items:[{id:"KethricVigilHood",weight:1}]}]},premiumCosmeticMorhulMask:{type:"always",tiers:[{minLevel:1,items:[{id:"MorhulMask",weight:1}]}]},premiumCosmeticSpikedIronHelm:{type:"always",tiers:[{minLevel:1,items:[{id:"SpikedIronHelm",weight:1}]}]},premiumCosmeticDragonRitualMask:{type:"always",tiers:[{minLevel:1,items:[{id:"DragonRitualMask",weight:1}]}]},premiumCosmeticMarkIVHelmet:{type:"always",tiers:[{minLevel:1,items:[{id:"MarkIVHelmet",weight:1}]}]},premiumCosmeticCrestedDrakhelm:{type:"always",tiers:[{minLevel:1,items:[{id:"CrestedDrakhelm",weight:1}]}]},premiumCosmeticWanderersSugegasa:{type:"always",tiers:[{minLevel:1,items:[{id:"WanderersSugegasa",weight:1}]}]},premiumCosmeticHairOfTheChosenOne:{type:"always",tiers:[{minLevel:1,items:[{id:"HairOfTheChosenOne",weight:1}]}]},premiumCosmeticPrincelyCrown:{type:"always",tiers:[{minLevel:1,items:[{id:"PrincelyCrown",weight:1}]}]},premiumCosmeticViperGuildGarb:{type:"always",tiers:[{minLevel:1,items:[{id:"ViperGuildVest",weight:1},{id:"ViperGuildCloak",weight:1},{id:"ViperGuildHood",weight:1}]}]}};var He=(R=>(R.Enemy="enemy",R.Boss="boss",R.SkillChoice="skillChoice",R.StatsChoice="statsChoice",R.AbilityChoice="abilityChoice",R.SkillBargain="skillBargain",R.Treasure="treasure",R.CreatorBonus="creatorBonus",R.Investigate="investigate",R.CrossroadsFight="crossroadsFight",R.RushBoss="rushBoss",R))(He||{});const mA=2;function gA(R){return R==="Wood"||R==="Stone"||R==="Iron"||R==="Ore"||R==="Candy"||R==="Pumpkin"}function op(R){const t=new Map,c=[];for(const x of R)if(Lt.ItemDefinitions[x.id].isStackable){const h=t.get(x.id)||0;t.set(x.id,h+(x.quantity||1))}else for(let h=0;h<(x.quantity||1);h++)c.push({...x,quantity:1});return[...Array.from(t.entries()).map(([x,b])=>({id:x,quantity:b})),...c]}function fw({postId:R,sessionId:t,encounterIndex:c}){return new bl(`${R}_${t}_${c}`)}function mw(R,t,c=1,v,x,b){let h=[];if(t.type===He.RushBoss)return h;t.enemies.forEach((i,u)=>{const n=yn[i.type];if(!n)throw new Error(`Enemy definition not found for ID: ${i.type}`);const r=Fw(i,R,c),a=n.lootTables,s=nr(a,r,vt,b);h=h.concat(s)});const w=x>Date.now()?mA:1,e=op(h);return e.forEach(i=>{i.id==="Gold"?i.quantity=Math.floor(i.quantity*v):gA(i.id)&&(i.quantity=Math.floor(i.quantity*w))}),e}function gw(R,t,c){const v=t.reward.tier,x=R.type==="bossRush"?fA[R.environment]:cA[R.environment];return op(fB([x],v,vt,c)).concat(t.reward.essences)}function pA(R){const t=nr([vt[R]],1,vt);return op(t)}var ci=(R=>(R.Chest="Chest",R.Lives="Lives",R.BattlePass="BattlePass",R))(ci||{}),Pu={exports:{}},vA=Pu.exports,Lx;function yA(){return Lx||(Lx=1,function(R){(function(t,c,v){function x(e){var i=this,u=w();i.next=function(){var n=2091639*i.s0+i.c*23283064365386963e-26;return i.s0=i.s1,i.s1=i.s2,i.s2=n-(i.c=n|0)},i.c=1,i.s0=u(" "),i.s1=u(" "),i.s2=u(" "),i.s0-=u(e),i.s0<0&&(i.s0+=1),i.s1-=u(e),i.s1<0&&(i.s1+=1),i.s2-=u(e),i.s2<0&&(i.s2+=1),u=null}function b(e,i){return i.c=e.c,i.s0=e.s0,i.s1=e.s1,i.s2=e.s2,i}function h(e,i){var u=new x(e),n=i&&i.state,r=u.next;return r.int32=function(){return u.next()*4294967296|0},r.double=function(){return r()+(r()*2097152|0)*11102230246251565e-32},r.quick=r,n&&(typeof n=="object"&&b(n,u),r.state=function(){return b(u,{})}),r}function w(){var e=4022871197,i=function(u){u=String(u);for(var n=0;n<u.length;n++){e+=u.charCodeAt(n);var r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=r*4294967296}return(e>>>0)*23283064365386963e-26};return i}c&&c.exports?c.exports=h:this.alea=h})(vA,R)}(Pu)),Pu.exports}var Bu={exports:{}},xA=Bu.exports,Rx;function wA(){return Rx||(Rx=1,function(R){(function(t,c,v){function x(w){var e=this,i="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var n=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^n^n>>>8},w===(w|0)?e.x=w:i+=w;for(var u=0;u<i.length+64;u++)e.x^=i.charCodeAt(u)|0,e.next()}function b(w,e){return e.x=w.x,e.y=w.y,e.z=w.z,e.w=w.w,e}function h(w,e){var i=new x(w),u=e&&e.state,n=function(){return(i.next()>>>0)/4294967296};return n.double=function(){do var r=i.next()>>>11,a=(i.next()>>>0)/4294967296,s=(r+a)/(1<<21);while(s===0);return s},n.int32=i.next,n.quick=n,u&&(typeof u=="object"&&b(u,i),n.state=function(){return b(i,{})}),n}c&&c.exports?c.exports=h:this.xor128=h})(xA,R)}(Bu)),Bu.exports}var Du={exports:{}},SA=Du.exports,Px;function TA(){return Px||(Px=1,function(R){(function(t,c,v){function x(w){var e=this,i="";e.next=function(){var n=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^(n^n<<1))|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,w===(w|0)?e.x=w:i+=w;for(var u=0;u<i.length+64;u++)e.x^=i.charCodeAt(u)|0,u==i.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function b(w,e){return e.x=w.x,e.y=w.y,e.z=w.z,e.w=w.w,e.v=w.v,e.d=w.d,e}function h(w,e){var i=new x(w),u=e&&e.state,n=function(){return(i.next()>>>0)/4294967296};return n.double=function(){do var r=i.next()>>>11,a=(i.next()>>>0)/4294967296,s=(r+a)/(1<<21);while(s===0);return s},n.int32=i.next,n.quick=n,u&&(typeof u=="object"&&b(u,i),n.state=function(){return b(i,{})}),n}c&&c.exports?c.exports=h:this.xorwow=h})(SA,R)}(Du)),Du.exports}var Fu={exports:{}},CA=Fu.exports,Bx;function AA(){return Bx||(Bx=1,function(R){(function(t,c,v){function x(w){var e=this;e.next=function(){var u=e.x,n=e.i,r,a;return r=u[n],r^=r>>>7,a=r^r<<24,r=u[n+1&7],a^=r^r>>>10,r=u[n+3&7],a^=r^r>>>3,r=u[n+4&7],a^=r^r<<7,r=u[n+7&7],r=r^r<<13,a^=r^r<<9,u[n]=a,e.i=n+1&7,a};function i(u,n){var r,a=[];if(n===(n|0))a[0]=n;else for(n=""+n,r=0;r<n.length;++r)a[r&7]=a[r&7]<<15^n.charCodeAt(r)+a[r+1&7]<<13;for(;a.length<8;)a.push(0);for(r=0;r<8&&a[r]===0;++r);for(r==8?a[7]=-1:a[r],u.x=a,u.i=0,r=256;r>0;--r)u.next()}i(e,w)}function b(w,e){return e.x=w.x.slice(),e.i=w.i,e}function h(w,e){w==null&&(w=+new Date);var i=new x(w),u=e&&e.state,n=function(){return(i.next()>>>0)/4294967296};return n.double=function(){do var r=i.next()>>>11,a=(i.next()>>>0)/4294967296,s=(r+a)/(1<<21);while(s===0);return s},n.int32=i.next,n.quick=n,u&&(u.x&&b(u,i),n.state=function(){return b(i,{})}),n}c&&c.exports?c.exports=h:this.xorshift7=h})(CA,R)}(Fu)),Fu.exports}var Iu={exports:{}},bA=Iu.exports,Dx;function EA(){return Dx||(Dx=1,function(R){(function(t,c,v){function x(w){var e=this;e.next=function(){var u=e.w,n=e.X,r=e.i,a,s;return e.w=u=u+1640531527|0,s=n[r+34&127],a=n[r=r+1&127],s^=s<<13,a^=a<<17,s^=s>>>15,a^=a>>>12,s=n[r]=s^a,e.i=r,s+(u^u>>>16)|0};function i(u,n){var r,a,s,o,d,l=[],f=128;for(n===(n|0)?(a=n,n=null):(n=n+"\0",a=0,f=Math.max(f,n.length)),s=0,o=-32;o<f;++o)n&&(a^=n.charCodeAt((o+32)%n.length)),o===0&&(d=a),a^=a<<10,a^=a>>>15,a^=a<<4,a^=a>>>13,o>=0&&(d=d+1640531527|0,r=l[o&127]^=a+d,s=r==0?s+1:0);for(s>=128&&(l[(n&&n.length||0)&127]=-1),s=127,o=4*128;o>0;--o)a=l[s+34&127],r=l[s=s+1&127],a^=a<<13,r^=r<<17,a^=a>>>15,r^=r>>>12,l[s]=a^r;u.w=d,u.X=l,u.i=s}i(e,w)}function b(w,e){return e.i=w.i,e.w=w.w,e.X=w.X.slice(),e}function h(w,e){w==null&&(w=+new Date);var i=new x(w),u=e&&e.state,n=function(){return(i.next()>>>0)/4294967296};return n.double=function(){do var r=i.next()>>>11,a=(i.next()>>>0)/4294967296,s=(r+a)/(1<<21);while(s===0);return s},n.int32=i.next,n.quick=n,u&&(u.X&&b(u,i),n.state=function(){return b(i,{})}),n}c&&c.exports?c.exports=h:this.xor4096=h})(bA,R)}(Iu)),Iu.exports}var Ou={exports:{}},MA=Ou.exports,Fx;function LA(){return Fx||(Fx=1,function(R){(function(t,c,v){function x(w){var e=this,i="";e.next=function(){var n=e.b,r=e.c,a=e.d,s=e.a;return n=n<<25^n>>>7^r,r=r-a|0,a=a<<24^a>>>8^s,s=s-n|0,e.b=n=n<<20^n>>>12^r,e.c=r=r-a|0,e.d=a<<16^r>>>16^s,e.a=s-n|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,w===Math.floor(w)?(e.a=w/4294967296|0,e.b=w|0):i+=w;for(var u=0;u<i.length+20;u++)e.b^=i.charCodeAt(u)|0,e.next()}function b(w,e){return e.a=w.a,e.b=w.b,e.c=w.c,e.d=w.d,e}function h(w,e){var i=new x(w),u=e&&e.state,n=function(){return(i.next()>>>0)/4294967296};return n.double=function(){do var r=i.next()>>>11,a=(i.next()>>>0)/4294967296,s=(r+a)/(1<<21);while(s===0);return s},n.int32=i.next,n.quick=n,u&&(typeof u=="object"&&b(u,i),n.state=function(){return b(i,{})}),n}c&&c.exports?c.exports=h:this.tychei=h})(MA,R)}(Ou)),Ou.exports}var Nu={exports:{}};const RA={},PA=Object.freeze(Object.defineProperty({__proto__:null,default:RA},Symbol.toStringTag,{value:"Module"})),BA=RC(PA);var DA=Nu.exports,Ix;function FA(){return Ix||(Ix=1,function(R){(function(t,c,v){var x=256,b=6,h=52,w="random",e=v.pow(x,b),i=v.pow(2,h),u=i*2,n=x-1,r;function a(g,p,y){var S=[];p=p==!0?{entropy:!0}:p||{};var C=l(d(p.entropy?[g,m(c)]:g??f(),3),S),A=new s(S),M=function(){for(var L=A.g(b),P=e,O=0;L<i;)L=(L+O)*x,P*=x,O=A.g(1);for(;L>=u;)L/=2,P/=2,O>>>=1;return(L+O)/P};return M.int32=function(){return A.g(4)|0},M.quick=function(){return A.g(4)/4294967296},M.double=M,l(m(A.S),c),(p.pass||y||function(L,P,O,D){return D&&(D.S&&o(D,A),L.state=function(){return o(A,{})}),O?(v[w]=L,P):L})(M,C,"global"in p?p.global:this==v,p.state)}function s(g){var p,y=g.length,S=this,C=0,A=S.i=S.j=0,M=S.S=[];for(y||(g=[y++]);C<x;)M[C]=C++;for(C=0;C<x;C++)M[C]=M[A=n&A+g[C%y]+(p=M[C])],M[A]=p;(S.g=function(L){for(var P,O=0,D=S.i,I=S.j,F=S.S;L--;)P=F[D=n&D+1],O=O*x+F[n&(F[D]=F[I=n&I+P])+(F[I]=P)];return S.i=D,S.j=I,O})(x)}function o(g,p){return p.i=g.i,p.j=g.j,p.S=g.S.slice(),p}function d(g,p){var y=[],S=typeof g,C;if(p&&S=="object")for(C in g)try{y.push(d(g[C],p-1))}catch{}return y.length?y:S=="string"?g:g+"\0"}function l(g,p){for(var y=g+"",S,C=0;C<y.length;)p[n&C]=n&(S^=p[n&C]*19)+y.charCodeAt(C++);return m(p)}function f(){try{var g;return r&&(g=r.randomBytes)?g=g(x):(g=new Uint8Array(x),(t.crypto||t.msCrypto).getRandomValues(g)),m(g)}catch{var p=t.navigator,y=p&&p.plugins;return[+new Date,t,y,t.screen,m(c)]}}function m(g){return String.fromCharCode.apply(0,g)}if(l(v.random(),c),R.exports){R.exports=a;try{r=BA}catch{}}else v["seed"+w]=a})(typeof self<"u"?self:DA,[],Math)}(Nu)),Nu.exports}var Qm,Ox;function IA(){if(Ox)return Qm;Ox=1;var R=yA(),t=wA(),c=TA(),v=AA(),x=EA(),b=LA(),h=FA();return h.alea=R,h.xor128=t,h.xorwow=c,h.xorshift7=v,h.xor4096=x,h.tychei=b,Qm=h,Qm}var OA=IA();const Gu=gc(OA);class bl{constructor(t){this.rng=Gu(t)}next(){return this.rng()}intBetween(t,c){return Math.floor(this.rng()*(c-t+1))+t}floatBetween(t,c){return t+this.rng()*(c-t)}}const NA="equipment",pw="blueprint",GA="material",vw="map",HA="usable",Nx="resource",kA={type:"ItemDefinition",rarity:"common",abilities:[],tags:[],statModifiers:[],equipSlots:[],isStackable:!1,amount:1,upgrades:[],retainOnUpgrade:!1,requiredLevel:1,sellPrice:50};function ie(R){return{...kA,...R}}const UA=ie({name:"Coins",description:"The currency of the realm.",sellPrice:1,isStackable:!0,tags:["currency"]}),VA=ie({name:"Gem",description:"The premium currency of the realm.",sellPrice:1,isStackable:!0,tags:["currency"]}),YA=ie({name:"Benevolent Charm",assetName:"BenevolentCharm",rarity:"rare",description:"A charm that protects against fire and lightning.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.03,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:.5,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.5,modifierType:"add"}],sellPrice:65,tags:["equipment"]}),XA=ie({name:"Blazing Amulet Lvl 1",assetName:"BlazingAmulet",rarity:"common",description:"This Amulet is unbearably hot, but keeps the wearer on their toes.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.03,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:-.1,modifierType:"add"}],sellPrice:22,upgrades:[{requires:[{id:"EssenceSpicy",amount:5},{id:"Iron",amount:22}],yields:"BlazingAmulet2"}],tags:["equipment"]}),zA=ie({name:"Blazing Amulet Lvl 2",assetName:"BlazingAmulet",rarity:"common",description:"This Amulet is unbearably hot, but keeps the wearer on their toes.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.035,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:-.08,modifierType:"add"}],sellPrice:27,upgrades:[{requires:[{id:"EssenceSpicy",amount:8},{id:"Iron",amount:80}],yields:"BlazingAmulet3"}],tags:["equipment"]}),WA=ie({name:"Blazing Amulet Lvl 3",assetName:"BlazingAmulet",rarity:"common",description:"This Amulet is unbearably hot, but keeps the wearer on their toes.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.04,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:-.05,modifierType:"add"}],sellPrice:27,tags:["equipment"]}),jA=ie({name:"Bronze Amulet",assetName:"BronzeAmulet",rarity:"rare",description:"This amulet makes it easier to dodge incoming attacks.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.035,modifierType:"add"}],requiredLevel:5,sellPrice:40,tags:["equipment"]}),KA=ie({name:"Bulwark Chain Lvl 1",assetName:"BulwarkChain",rarity:"uncommon",description:"A heavy chain that reduces Dodge but steals the lifeforce of dying enemies.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:-.05,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnEnemyDeath"}],requiredLevel:18,sellPrice:32,upgrades:[{requires:[{id:"Ore",amount:18},{id:"Stone",amount:18},{id:"EssenceTangy",amount:9}],yields:"BulwarkChain2"}],tags:["equipment"]}),$A=ie({name:"Bulwark Chain Lvl 2",assetName:"BulwarkChain",rarity:"uncommon",description:"A heavy chain that reduces Dodge but steals the lifeforce of dying enemies.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:-.03,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnEnemyDeath"}],requiredLevel:23,sellPrice:39,tags:["equipment"]}),QA=ie({name:"Chipped Pendant Lvl 1",assetName:"ChippedPendant",rarity:"common",description:"A basic amulet that boosts Dodge.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.02,modifierType:"add"}],sellPrice:30,upgrades:[{requires:[{id:"Ore",amount:30},{id:"EssenceCreamy",amount:1}],yields:"ChippedPendant2"}],tags:["equipment"]}),JA=ie({name:"Chipped Pendant Lvl 2",assetName:"ChippedPendant",rarity:"common",description:"A basic amulet that boosts Dodge.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.03,modifierType:"add"}],sellPrice:50,upgrades:[{requires:[{id:"Ore",amount:100},{id:"EssenceCreamy",amount:4}],yields:"ChippedPendant3"}],tags:["equipment"]}),ZA=ie({name:"Chipped Pendant Lvl 3",assetName:"ChippedPendant",rarity:"common",description:"A basic amulet that boosts Dodge.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.04,modifierType:"add"}],sellPrice:100,tags:["equipment"]}),qA=ie({name:"Crystal Heart Charm",assetName:"CrystalHeartCharm",rarity:"uncommon",description:"A charm that gives life and swiftness.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:25,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.035,modifierType:"add"}],requiredLevel:32,sellPrice:34,tags:["equipment"]}),_A=ie({name:"Dark Bargain Charm",assetName:"DarkBargainCharm",rarity:"epic",description:"An eldritch charm that may heal the wearer when receiving shadow damage.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.05,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.13,modifierType:"add"}],abilities:[{type:"Ability",id:"HealChanceOnShadowDamage"}],requiredLevel:81,sellPrice:90,tags:["equipment"]}),eb=ie({name:"Deadly Relic",assetName:"DeadlyRelic",rarity:"uncommon",description:"A neck piece that channels the energy of dead enemies to heal the wearer.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.03,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnEnemyDeath"}],requiredLevel:61,sellPrice:55,tags:["equipment"]}),tb=ie({name:"Deathzone Necklet EX",assetName:"DeathzoneNecklet",rarity:"rare",description:"An enchanted neck piece that attacks foes when things get dire.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"LowHPKnives"},{type:"Ability",id:"LowHpDodgeBoostAbility"}],requiredLevel:121,sellPrice:270,tags:["equipment"]}),ib=ie({name:"Deathzone Necklet",assetName:"DeathzoneNecklet",rarity:"rare",description:"An enchanted neck piece that attacks foes when things get dire.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"LowHPKnives"}],requiredLevel:121,sellPrice:240,tags:["equipment"]}),sb=ie({name:"Defensive Charm Lvl 1",assetName:"DefensiveCharm",rarity:"rare",description:"A protective charm with an unlockable Ability.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.025,modifierType:"add"}],requiredLevel:4,sellPrice:33,upgrades:[{requires:[{id:"EssenceHearty",amount:11},{id:"Stone",amount:120}],yields:"DefensiveCharmUltimate"}],tags:["equipment"]}),ab=ie({name:"Defensive Charm Ultimate",assetName:"DefensiveCharm",rarity:"epic",description:"A protective charm that provides a shield when HP is low.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.035,modifierType:"add"}],abilities:[{type:"Ability",id:"ShieldOnLowHP"}],requiredLevel:21,sellPrice:41,tags:["equipment"]}),nb=ie({name:"Evasion Amulet",assetName:"EvasionAmulet",rarity:"epic",description:"An amulet to help dodge attacks which heals the wearer when a foe is defeated.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:-25,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnEnemyDeath"}],requiredLevel:33,sellPrice:70,tags:["equipment"]}),rb=ie({name:"Furybringer Lvl 1",assetName:"Furybringer",rarity:"rare",description:"A locket that gives Dodge and has an unlockable ability.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.025,modifierType:"add"}],requiredLevel:52,sellPrice:45,upgrades:[{requires:[{id:"Ore",amount:650},{id:"EssenceCreamy",amount:30},{id:"EssenceSpicy",amount:30}],yields:"FurybringerUltimate"}],tags:["equipment"]}),ob=ie({name:"Furybringer Ultimate",assetName:"Furybringer",rarity:"rare",description:"A locket that gives Dodge and casts Lightning on Rage.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.035,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnRage"}],requiredLevel:57,sellPrice:80,tags:["equipment"]}),lb=ie({name:"Ghostly Pendant Lvl 1",assetName:"GhostlyPendant",rarity:"epic",description:"An eldritch pendant with an unlockable Ability.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.0575,modifierType:"add"}],requiredLevel:41,sellPrice:130,upgrades:[{requires:[{id:"Stone",amount:900},{id:"EssenceCreamy",amount:18},{id:"EssenceTangy",amount:18}],yields:"GhostlyPendant2"}],tags:["equipment"]}),hb=ie({name:"Ghostly Pendant Lvl 2",assetName:"GhostlyPendant",rarity:"epic",description:"An eldritch pendant with an unlockable Ability.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.08,modifierType:"add"}],requiredLevel:49,sellPrice:165,upgrades:[{requires:[{id:"Stone",amount:1400},{id:"EssenceTangy",amount:18},{id:"EssenceCreamy",amount:33}],yields:"GhostlyPendantUltimate"}],tags:["equipment"]}),db=ie({name:"Ghostly Pendant Ultimate",assetName:"GhostlyPendant",rarity:"legendary",description:"An eldritch pendant which boosts Dodge when HP is low.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.1,modifierType:"add"}],abilities:[{type:"Ability",id:"LowHpDodgeBoostAbility"}],requiredLevel:57,sellPrice:290,tags:["equipment"]}),ub=ie({name:"Lucky Locket",assetName:"LuckyLocket",rarity:"uncommon",description:"A mysterious necklace which grants improved Crit and Dodge chances.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.015,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.025,modifierType:"add"}],sellPrice:20,tags:["equipment"]}),cb=ie({name:"Phase Charm Lvl 1",assetName:"PhaseCharm",rarity:"common",description:"Protects the wearer by boosting Dodge rate.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.03,modifierType:"add"}],requiredLevel:4,sellPrice:70,upgrades:[{requires:[{id:"Ore",amount:40},{id:"EssenceCreamy",amount:2}],yields:"PhaseCharm2"}],tags:["equipment"]}),fb=ie({name:"Phase Charm Lvl 2",assetName:"PhaseCharm",rarity:"common",description:"Protects the wearer by boosting Dodge rate.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.035,modifierType:"add"}],requiredLevel:8,sellPrice:90,upgrades:[{requires:[{id:"Ore",amount:260},{id:"EssenceCreamy",amount:4}],yields:"PhaseCharm3"}],tags:["equipment"]}),mb=ie({name:"Phase Charm Lvl 3",assetName:"PhaseCharm",rarity:"common",description:"Protects the wearer by boosting Dodge rate.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.05,modifierType:"add"}],requiredLevel:19,sellPrice:140,tags:["equipment"]}),gb=ie({name:"Radiant Charm",assetName:"RadiantCharm",rarity:"epic",description:"A bright charm to protect against darkness.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.045,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.13,modifierType:"add"}],requiredLevel:72,sellPrice:45,tags:["equipment"]}),pb=ie({name:"Raging Charm",assetName:"RagingCharm",rarity:"uncommon",description:"A shadowy amulet that heals the wearer when they Rage.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"ShadowResist",value:.05,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnRage"}],requiredLevel:8,sellPrice:60,tags:["equipment"]}),vb=ie({name:"Raging Charm EX",assetName:"RagingCharm",rarity:"uncommon",description:"A shadowy amulet that heals the wearer when they Rage.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"ShadowResist",value:.12,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnRage"}],requiredLevel:32,sellPrice:140,tags:["equipment"]}),yb=ie({name:"Stalwart Solidus Lvl 1",assetName:"StalwartSolidus",rarity:"epic",description:"An ancient coin which marks the wearer as a tough, resilient warrior.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:100,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:75,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"}],requiredLevel:121,sellPrice:325,upgrades:[{requires:[{id:"Ore",amount:1e3},{id:"Iron",amount:1e3},{id:"EssenceHearty",amount:40}],yields:"StalwartSolidus2"}],tags:["equipment"]}),xb=ie({name:"Stalwart Solidus Lvl 2",assetName:"StalwartSolidus",rarity:"epic",description:"An ancient coin which marks the wearer as a tough, resilient warrior.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:115,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:90,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.03,modifierType:"add"}],requiredLevel:121,sellPrice:400,upgrades:[{requires:[{id:"Ore",amount:1250},{id:"Iron",amount:1250},{id:"EssenceHearty",amount:55}],yields:"StalwartSolidus3"}],tags:["equipment"]}),wb=ie({name:"Stalwart Solidus Lvl 3",assetName:"StalwartSolidus",rarity:"epic",description:"An ancient coin which marks the wearer as a tough, resilient warrior.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:140,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:120,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.035,modifierType:"add"}],requiredLevel:121,sellPrice:520,tags:["equipment"]}),Sb=ie({name:"Survival Charm Lvl 1",assetName:"SurvivalCharm",rarity:"rare",description:"A charm that makes its wearer more resilient.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:45,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:15,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.05,modifierType:"add"}],requiredLevel:35,sellPrice:55,upgrades:[{requires:[{id:"EssenceChewy",amount:32},{id:"EssenceHearty",amount:32},{id:"EssenceCreamy",amount:32}],yields:"SurvivalCharm2"}],tags:["equipment"]}),Tb=ie({name:"Survival Charm Lvl 2",assetName:"SurvivalCharm",rarity:"rare",description:"A charm that makes its wearer more resilient.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:65,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:35,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.06,modifierType:"add"}],requiredLevel:43,sellPrice:70,upgrades:[{requires:[{id:"EssenceChewy",amount:88},{id:"EssenceHearty",amount:88},{id:"EssenceCreamy",amount:88}],yields:"SurvivalCharm3"}],tags:["equipment"]}),Cb=ie({name:"Survival Charm Ultimate",assetName:"SurvivalCharm",rarity:"rare",description:"A charm that makes its wearer more resilient.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:85,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:44,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.08,modifierType:"add"}],requiredLevel:51,sellPrice:100,tags:["equipment"]}),Ab=ie({name:"Twisted Charm Lvl 1",assetName:"TwistedCharm",rarity:"rare",description:"A coiled amulet that brings blessings and banes.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:-160,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:-50,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.04,modifierType:"add"}],requiredLevel:60,sellPrice:275,upgrades:[{requires:[{id:"Stone",amount:600},{id:"Iron",amount:700},{id:"EssenceHearty",amount:15}],yields:"TwistedCharm2"}],tags:["equipment"]}),bb=ie({name:"Twisted Charm Lvl 2",assetName:"TwistedCharm",rarity:"rare",description:"A coiled amulet that brings blessings and banes.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:-200,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:-65,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.045,modifierType:"add"}],requiredLevel:67,sellPrice:230,upgrades:[{requires:[{id:"Stone",amount:900},{id:"Iron",amount:850},{id:"EssenceHearty",amount:22}],yields:"TwistedCharm3"}],tags:["equipment"]}),Eb=ie({name:"Twisted Charm Lvl 3",assetName:"TwistedCharm",rarity:"rare",description:"A coiled amulet that brings blessings and banes.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:-220,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:-75,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.0325,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.055,modifierType:"add"}],requiredLevel:79,sellPrice:300,tags:["equipment"]}),Mb=ie({name:"Vengeful Locket",assetName:"VengefulLocket",rarity:"uncommon",description:"A locket that fills the wearer with Rage.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"EveryOtherTurnAddRage"}],requiredLevel:5,sellPrice:24,tags:["equipment"]}),Lb=ie({name:"Warpstone Amulet Lvl 1",assetName:"WarpstoneAmulet",rarity:"uncommon",description:"A powerful relic which boosts Dodge.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.05,modifierType:"add"}],requiredLevel:21,sellPrice:25,upgrades:[{requires:[{id:"Iron",amount:400},{id:"EssenceCreamy",amount:12}],yields:"WarpstoneAmulet2"}],tags:["equipment"]}),Rb=ie({name:"Warpstone Amulet Lvl 2",assetName:"WarpstoneAmulet",rarity:"uncommon",description:"A powerful relic which boosts Dodge.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.06,modifierType:"add"}],requiredLevel:26,sellPrice:60,upgrades:[{requires:[{id:"Iron",amount:800},{id:"EssenceCreamy",amount:27}],yields:"WarpstoneAmulet3"}],tags:["equipment"]}),Pb=ie({name:"Warpstone Amulet Ultimate",assetName:"WarpstoneAmulet",rarity:"uncommon",description:"A powerful relic which boosts Dodge.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.07,modifierType:"add"}],requiredLevel:35,sellPrice:105,tags:["equipment"]}),Bb=ie({name:"Watcher’s Locket",assetName:"WatchersLocket",rarity:"legendary",description:"A protective locket which grants Rage when enemies are felled.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:-50,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:75,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.05,modifierType:"add"}],abilities:[{type:"Ability",id:"AddRageOnEnemyDeath"}],requiredLevel:54,sellPrice:300,tags:["equipment"]}),Db=ie({name:"Watcher’s Locket EX",assetName:"WatchersLocket",rarity:"legendary",description:"A protective locket which grants Rage when enemies are felled.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:-35,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:98,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.06,modifierType:"add"}],abilities:[{type:"Ability",id:"AddRageOnEnemyDeath"}],requiredLevel:77,sellPrice:440,tags:["equipment"]}),Fb=ie({name:"Wizard Sigil Lvl 1",assetName:"WizardSigil",rarity:"rare",description:"An enchanted amulet with an unlockable Ability.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.055,modifierType:"add"}],requiredLevel:55,sellPrice:70,upgrades:[{requires:[{id:"EssenceSpicy",amount:22},{id:"Stone",amount:555},{id:"EssenceCreamy",amount:22}],yields:"WizardSigil2"}],tags:["equipment"]}),Ib=ie({name:"Wizard Sigil Lvl 2",assetName:"WizardSigil",rarity:"rare",description:"An enchanted amulet with an unlockable Ability.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.07,modifierType:"add"}],requiredLevel:62,sellPrice:150,upgrades:[{requires:[{id:"EssenceSpicy",amount:55},{id:"Stone",amount:2222},{id:"EssenceCreamy",amount:55}],yields:"WizardSigilUltimate"}],tags:["equipment"]}),Ob=ie({name:"Wizard Sigil Ultimate",assetName:"WizardSigil",rarity:"epic",description:"An enchanted amulet that adds a bolt to Rage attacks.",equipSlots:["Amulet"],statModifiers:[{type:"StatModifier",stat:"Dodge",value:.09,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnRage"}],requiredLevel:74,sellPrice:275,tags:["equipment"]}),Nb=ie({name:"Wrathful Locket",assetName:"WrathfulLocket",rarity:"common",description:"A weighty locket that gives the wearer additional rage every other attack.",equipSlots:["Amulet"],abilities:[{type:"Ability",id:"EveryOtherTurnAddRage"}],sellPrice:35,tags:["equipment"]}),Gb=ie({name:"Audacity Chain Lvl 1",assetName:"AudacityChain",rarity:"rare",description:"An enchanted chain with an unlockable Ability.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:3,modifierType:"add"}],requiredLevel:16,sellPrice:45,upgrades:[{requires:[{id:"Stone",amount:100},{id:"EssenceCrunchy",amount:6},{id:"EssenceFluffy",amount:2}],yields:"AudacityChain2"}],tags:["equipment"]}),Hb=ie({name:"Audacity Chain Lvl 2",assetName:"AudacityChain",rarity:"rare",description:"An enchanted chain with an unlockable Ability.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:4,modifierType:"add"}],requiredLevel:20,sellPrice:50,upgrades:[{requires:[{id:"EssenceCrunchy",amount:22},{id:"EssenceFluffy",amount:15},{id:"Stone",amount:280}],yields:"AudacityChain3"}],tags:["equipment"]}),kb=ie({name:"Audacity Chain Lvl 3",assetName:"AudacityChain",rarity:"rare",description:"An enchanted chain with an unlockable Ability.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"}],requiredLevel:28,sellPrice:70,upgrades:[{requires:[{id:"Stone",amount:525},{id:"EssenceCrunchy",amount:33},{id:"EssenceFluffy",amount:28}],yields:"AudacityChain4"}],tags:["equipment"]}),Ub=ie({name:"Audacity Chain Lvl 4",assetName:"AudacityChain",rarity:"rare",description:"An enchanted chain with an unlockable Ability.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:7,modifierType:"add"}],requiredLevel:32,sellPrice:100,upgrades:[{requires:[{id:"Stone",amount:800},{id:"EssenceCrunchy",amount:44},{id:"EssenceFluffy",amount:48}],yields:"AudacityChainUltimate"}],tags:["equipment"]}),Vb=ie({name:"Audacity Chain Ultimate",assetName:"AudacityChain",rarity:"epic",description:"An enchanted chain that boosts Crit when health is low.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:10,modifierType:"add"}],abilities:[{type:"Ability",id:"LowHpCritBoostAbility"}],requiredLevel:40,sellPrice:140,tags:["equipment"]}),Yb=ie({name:"Bladed Belt Lvl 1",assetName:"BladedBelt",rarity:"common",description:"A deadly belt with an unlockable Ability.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"}],sellPrice:30,upgrades:[{requires:[{id:"Iron",amount:20},{id:"EssenceSpicy",amount:9}],yields:"BladedBeltUltimate"}],tags:["equipment"]}),Xb=ie({name:"Bladed Belt Ultimate",assetName:"BladedBelt",rarity:"uncommon",description:"A belt that conjures a Shadow Knife on hit 2.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:3,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnHitCount"}],sellPrice:25,tags:["equipment"]}),zb=ie({name:"Flawed Clasp",assetName:"FlawedClasp",rarity:"uncommon",description:"A belt which greatly boosts Speed, but decreases Defense.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Defense",value:-8,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:6,modifierType:"add"}],requiredLevel:16,sellPrice:40,tags:["equipment"]}),Wb=ie({name:"Frenzied Sash",assetName:"FrenziedSash",rarity:"uncommon",description:"An energizing sash which grants Triple Attack.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"}],abilities:[{type:"Ability",id:"TripleAttack"}],requiredLevel:81,sellPrice:100,tags:["equipment"]}),jb=ie({name:"Grounding Belt Lvl 1",assetName:"GroundingBelt",rarity:"rare",description:"A magical belt which resists Lightning.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:6,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.03,modifierType:"add"}],requiredLevel:24,sellPrice:70,upgrades:[{requires:[{id:"Stone",amount:560},{id:"EssenceSpicy",amount:5},{id:"EssenceFluffy",amount:5}],yields:"GroundingBelt2"}],tags:["equipment"]}),Kb=ie({name:"Grounding Belt Lvl 2",assetName:"GroundingBelt",rarity:"rare",description:"A magical belt which resists Lightning.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:8,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.05,modifierType:"add"}],requiredLevel:30,sellPrice:70,upgrades:[{requires:[{id:"Stone",amount:800},{id:"EssenceSpicy",amount:21},{id:"EssenceFluffy",amount:21}],yields:"GroundingBelt3"}],tags:["equipment"]}),$b=ie({name:"Grounding Belt Lvl 3",assetName:"GroundingBelt",rarity:"rare",description:"A magical belt which resists Lightning.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:10,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.05,modifierType:"add"}],requiredLevel:37,sellPrice:139,tags:["equipment"]}),Qb=ie({name:"Guard’s Belt",assetName:"GuardsBelt",rarity:"uncommon",description:"A sturdy belt made for guards.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Defense",value:11,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"}],requiredLevel:32,sellPrice:72,tags:["equipment"]}),Jb=ie({name:"Hasty Sash",assetName:"HastySash",rarity:"common",description:"A speedy belt that renders its wearer a little clumsy.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:6,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:-.02,modifierType:"add"}],sellPrice:40,tags:["equipment"]}),Zb=ie({name:"Hearty Belt",assetName:"HeartyBelt",rarity:"legendary",description:"A belt that allows the wearer to strike true when at full health.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"MaxHpCritBoostAbility"}],requiredLevel:21,sellPrice:200,tags:["equipment"]}),qb=ie({name:"Hearty Belt EX",assetName:"HeartyBelt",rarity:"legendary",description:"A belt that allows the wearer to strike true when at full health.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:8,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.035,modifierType:"add"}],abilities:[{type:"Ability",id:"MaxHpCritBoostAbility"}],requiredLevel:71,sellPrice:420,tags:["equipment"]}),_b=ie({name:"Heavy Belt",assetName:"HeavyBelt",rarity:"common",description:"A belt that slows the wearer but provides additional Defense.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Defense",value:25,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:-3,modifierType:"add"}],sellPrice:35,tags:["equipment"]}),eE=ie({name:"Insulated Wrap",assetName:"InsulatedWrap",rarity:"uncommon",description:"A light wrap that helps keep the wearer warm.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:6,modifierType:"add"},{type:"StatModifier",stat:"IceResist",value:.05,modifierType:"add"}],requiredLevel:35,sellPrice:67,tags:["equipment"]}),tE=ie({name:"Knife Collector’s Belt Lvl 1",assetName:"KnifeCollectorsBelt",rarity:"rare",description:"A belt with an unlockable ability.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:-.07,modifierType:"add"}],sellPrice:70,upgrades:[{requires:[{id:"Iron",amount:66},{id:"EssenceDecadent",amount:8},{id:"Ore",amount:66}],yields:"KnifeCollectorsBeltUltimate"}],tags:["equipment"]}),iE=ie({name:"Knife Collector’s Belt Ultimate",assetName:"KnifeCollectorsBelt",rarity:"rare",description:"A belt that confers the Imperfect Knife Doubler ability.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:-.03,modifierType:"add"}],abilities:[{type:"Ability",id:"KnifeDoubler"}],sellPrice:110,tags:["equipment"]}),sE=ie({name:"Lifevine Belt Lvl 1",assetName:"LifevineBelt",rarity:"uncommon",description:"A delicate belt which boosts HP.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:125,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:3,modifierType:"add"}],requiredLevel:51,sellPrice:70,upgrades:[{requires:[{id:"Wood",amount:460},{id:"EssenceFresh",amount:2},{id:"EssenceFluffy",amount:18}],yields:"LifevineBelt2"}],tags:["equipment"]}),aE=ie({name:"Lifevine Belt Lvl 2",assetName:"LifevineBelt",rarity:"uncommon",description:"A delicate belt which boosts HP.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:155,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:4,modifierType:"add"}],requiredLevel:58,sellPrice:70,upgrades:[{requires:[{id:"Wood",amount:360},{id:"EssenceFresh",amount:5},{id:"EssenceFluffy",amount:25}],yields:"LifevineBelt3"}],tags:["equipment"]}),nE=ie({name:"Lifevine Belt Lvl 3",assetName:"LifevineBelt",rarity:"uncommon",description:"A delicate belt which boosts HP.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:205,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"}],requiredLevel:64,sellPrice:100,tags:["equipment"]}),rE=ie({name:"Painful Wrap",assetName:"PainfulWrap",rarity:"uncommon",description:"A constricting belt that enrages the wearer.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:3,modifierType:"add"}],abilities:[{type:"Ability",id:"BonusRageOnAttack"}],requiredLevel:32,sellPrice:55,tags:["equipment"]}),oE=ie({name:"Plated Belt Lvl 1",assetName:"PlatedBelt",rarity:"uncommon",description:"A tough belt which boosts Defense.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Defense",value:35,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:7,modifierType:"add"}],requiredLevel:66,sellPrice:65,upgrades:[{requires:[{id:"Wood",amount:440},{id:"EssenceHearty",amount:12},{id:"EssenceFluffy",amount:32}],yields:"PlatedBelt2"}],tags:["equipment"]}),lE=ie({name:"Plated Belt Lvl 2",assetName:"PlatedBelt",rarity:"uncommon",description:"A tough belt which boosts Defense.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Defense",value:65,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:8,modifierType:"add"}],requiredLevel:66,sellPrice:100,upgrades:[{requires:[{id:"Wood",amount:840},{id:"EssenceHearty",amount:32},{id:"EssenceFluffy",amount:48}],yields:"PlatedBelt3"}],tags:["equipment"]}),hE=ie({name:"Plated Belt Lvl 3",assetName:"PlatedBelt",rarity:"uncommon",description:"A tough belt which boosts Defense.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Defense",value:55,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:9,modifierType:"add"}],requiredLevel:72,sellPrice:160,tags:["equipment"]}),dE=ie({name:"Rope Braid Lvl 1",assetName:"RopeBraid",rarity:"common",description:"A basic belt that boosts Speed.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:3,modifierType:"add"}],sellPrice:25,upgrades:[{requires:[{id:"Wood",amount:15},{id:"EssenceFluffy",amount:1}],yields:"RopeBraid2"}],tags:["equipment"]}),uE=ie({name:"Rope Braid Lvl 2",assetName:"RopeBraid",rarity:"common",description:"A basic belt that boosts Speed.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:4,modifierType:"add"}],sellPrice:40,upgrades:[{requires:[{id:"Wood",amount:100},{id:"EssenceFluffy",amount:2}],yields:"RopeBraid3"}],tags:["equipment"]}),cE=ie({name:"Rope Braid Lvl 3",assetName:"RopeBraid",rarity:"common",description:"A basic belt that boosts speed.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"}],sellPrice:60,tags:["equipment"]}),fE=ie({name:"Rustic Belt Lvl 1",assetName:"RusticBelt",rarity:"common",description:"A rough hewn belt that boosts Speed and HP.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:6,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:1,modifierType:"add"}],sellPrice:25,upgrades:[{requires:[{id:"Wood",amount:5},{id:"Ore",amount:3}],yields:"RusticBelt2"}],tags:["equipment"]}),mE=ie({name:"Rustic Belt Lvl 2",assetName:"RusticBelt",rarity:"common",description:"A rough hewn belt that boosts Speed and HP.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:11,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"}],sellPrice:40,upgrades:[{requires:[{id:"Wood",amount:10},{id:"Ore",amount:7}],yields:"RusticBelt3"}],tags:["equipment"]}),gE=ie({name:"Rustic Belt Lvl 3",assetName:"RusticBelt",rarity:"common",description:"A rough hewn belt that boosts Speed and HP.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:20,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:3,modifierType:"add"}],sellPrice:50,tags:["equipment"]}),pE=ie({name:"Second Chance Belt",assetName:"SecondChanceBelt",rarity:"legendary",description:"A belt that gives Speed and the Second Wind ability.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:7,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.015,modifierType:"add"}],abilities:[{type:"Ability",id:"SecondWindAbility"},{type:"Ability",id:"ShieldOnLowHP"}],requiredLevel:88,sellPrice:320,tags:["equipment"]}),vE=ie({name:"Seething Sash Lvl 1",assetName:"SeethingSash",rarity:"epic",description:"A sash for adventurers who seethe with rage.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Attack",value:-50,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"}],abilities:[{type:"Ability",id:"BonusRageOnAttack"},{type:"Ability",id:"RageOnFirstTurn"}],requiredLevel:81,sellPrice:200,upgrades:[{requires:[{id:"Iron",amount:1100},{id:"EssenceHearty",amount:67}],yields:"SeethingSash2"}],tags:["equipment"]}),yE=ie({name:"Seething Sash Lvl 2",assetName:"SeethingSash",rarity:"epic",description:"A sash for adventurers who seethe with rage.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Attack",value:-60,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:6,modifierType:"add"}],abilities:[{type:"Ability",id:"BonusRageOnAttack"},{type:"Ability",id:"RageOnFirstTurn"}],requiredLevel:90,sellPrice:240,upgrades:[{requires:[{id:"Iron",amount:1430},{id:"EssenceHearty",amount:81}],yields:"SeethingSash3"}],tags:["equipment"]}),xE=ie({name:"Seething Sash Lvl 3",assetName:"SeethingSash",rarity:"epic",description:"A sash for adventurers who seethe with rage.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Attack",value:-75,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:7,modifierType:"add"}],abilities:[{type:"Ability",id:"BonusRageOnAttack"},{type:"Ability",id:"RageOnFirstTurn"}],requiredLevel:103,sellPrice:300,tags:["equipment"]}),wE=ie({name:"Storm Curse Wrap",assetName:"StormCurseWrap",rarity:"rare",description:"Cursed with storm energy, this wrap crackles with lightning at the start of each turn.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:4,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:-.15,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnTurnStart"}],requiredLevel:12,sellPrice:55,tags:["equipment"]}),SE=ie({name:"StormWrathBelt",assetName:"StormWrathBelt",rarity:"epic",description:"Enchanted with lightning, this belt triggers lightning bolts on turn start and on enemy death.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:4,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.015,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnTurnStart"},{type:"Ability",id:"LightningOnEnemyDeath"}],requiredLevel:41,sellPrice:65,tags:["equipment"]}),TE=ie({name:"Thermal Binding",assetName:"ThermalBinding",rarity:"epic",description:"A warm shawl to keep out the cold with an unlockable ability.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:7,modifierType:"add"},{type:"StatModifier",stat:"IceResist",value:.04,modifierType:"add"}],requiredLevel:31,sellPrice:80,upgrades:[{requires:[{id:"Wood",amount:625},{id:"EssenceFluffy",amount:34}],yields:"ThermalBindingUltimate"}],tags:["equipment"]}),CE=ie({name:"Thermal Binding Ultimate",assetName:"ThermalBinding",rarity:"epic",description:"A warm shawl to keep out the cold that stokes the wearer’s Rage.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:7,modifierType:"add"},{type:"StatModifier",stat:"IceResist",value:.09,modifierType:"add"}],abilities:[{type:"Ability",id:"EveryOtherTurnAddRage"}],requiredLevel:37,sellPrice:125,tags:["equipment"]}),AE=ie({name:"Twine Cinch Lvl 1",assetName:"TwineCinch",rarity:"common",description:"A basic belt that boosts Speed.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:1,modifierType:"add"}],sellPrice:30,upgrades:[{requires:[{id:"Wood",amount:60},{id:"EssenceFluffy",amount:2}],yields:"TwineCinch2"}],tags:["equipment"]}),bE=ie({name:"Twine Cinch Lvl 2",assetName:"TwineCinch",rarity:"common",description:"A basic belt that boosts Speed.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"}],sellPrice:50,upgrades:[{requires:[{id:"Wood",amount:200},{id:"EssenceFluffy",amount:4}],yields:"TwineCinch3"}],tags:["equipment"]}),EE=ie({name:"Twine Cinch Lvl 3",assetName:"TwineCinch",rarity:"common",description:"A basic belt that boosts Speed.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:3,modifierType:"add"}],sellPrice:55,tags:["equipment"]}),ME=ie({name:"Twine Cord Lvl 1",assetName:"TwineCord",rarity:"rare",description:"A light braided twine belt that gives Speed, Crit, and Dodge.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.02,modifierType:"add"}],requiredLevel:10,sellPrice:55,upgrades:[{requires:[{id:"Ore",amount:350},{id:"Wood",amount:350},{id:"EssenceFluffy",amount:15}],yields:"TwineCord2"}],tags:["equipment"]}),LE=ie({name:"Twine Cord Lvl 2",assetName:"TwineCord",rarity:"rare",description:"A light braided twine belt that gives Speed, Crit, and Dodge.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.04,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.035,modifierType:"add"}],requiredLevel:26,sellPrice:60,tags:["equipment"]}),RE=ie({name:"Twin-Forked Sash",assetName:"TwinForkedSash",rarity:"epic",description:"A sash that summons double lightning on your second turn.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Defense",value:-60,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"}],abilities:[{type:"Ability",id:"DoubleLightningOnTurn"}],requiredLevel:121,sellPrice:280,tags:["equipment"]}),PE=ie({name:"Twin-Forked Sash EX",assetName:"TwinForkedSash",rarity:"epic",description:"A sash that summons double lightning on your second turn.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Defense",value:-45,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:6,modifierType:"add"}],abilities:[{type:"Ability",id:"DoubleLightningOnTurn"}],requiredLevel:141,sellPrice:380,tags:["equipment"]}),BE=ie({name:"Volatile Sash",assetName:"VolatileSash",rarity:"rare",description:"A belt that gives Rage when the player is healed.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:3,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.05,modifierType:"add"}],abilities:[{type:"Ability",id:"AddRageOnHeal"}],requiredLevel:6,sellPrice:85,tags:["equipment"]}),DE=ie({name:"Volatile Sash EX",assetName:"VolatileSash",rarity:"rare",description:"A belt that gives Rage when the player is healed.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:4,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.1,modifierType:"add"}],abilities:[{type:"Ability",id:"AddRageOnHeal"}],requiredLevel:43,sellPrice:125,tags:["equipment"]}),FE=ie({name:"Warding Belt",assetName:"WardingBelt",rarity:"rare",description:"A belt that provides the Second Wind ability.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:8,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.08,modifierType:"add"}],abilities:[{type:"Ability",id:"SecondWindAbility"}],requiredLevel:35,sellPrice:165,tags:["equipment"]}),IE=ie({name:"Warding Belt EX",assetName:"WardingBelt",rarity:"rare",description:"A belt that provides the Second Wind ability.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:10,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.14,modifierType:"add"}],abilities:[{type:"Ability",id:"SecondWindAbility"}],requiredLevel:91,sellPrice:278,tags:["equipment"]}),OE=ie({name:"Wraith Sash Lvl 1",assetName:"WraithSash",rarity:"uncommon",description:"A dark sash which boosts Speed and Dodge.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.015,modifierType:"add"}],requiredLevel:22,sellPrice:45,upgrades:[{requires:[{id:"Iron",amount:210},{id:"EssenceFluffy",amount:9}],yields:"WraithSash2"}],tags:["equipment"]}),NE=ie({name:"Wraith Sash Lvl 2",assetName:"WraithSash",rarity:"uncommon",description:"A dark sash which boosts Speed and Dodge.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:6,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.025,modifierType:"add"}],requiredLevel:26,sellPrice:60,upgrades:[{requires:[{id:"Iron",amount:525},{id:"EssenceFluffy",amount:19}],yields:"WraithSash3"}],tags:["equipment"]}),GE=ie({name:"Wraith Sash Lvl 3",assetName:"WraithSash",rarity:"uncommon",description:"A dark sash which boosts Speed and Dodge.",equipSlots:["Belt"],statModifiers:[{type:"StatModifier",stat:"Speed",value:7,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.023,modifierType:"add"}],requiredLevel:32,sellPrice:85,tags:["equipment"]}),HE=ie({name:"Battle Hardened Vest",assetName:"BattleHardendedVest",rarity:"epic",description:"A vest that fuels the wearer’s rage when striking down their foes.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:40,modifierType:"add"}],abilities:[{type:"Ability",id:"AddRageOnEnemyDeath"}],requiredLevel:24,sellPrice:60,tags:["equipment"]}),kE=ie({name:"Battlethirsty Vest",assetName:"BattlethirstyVest",rarity:"legendary",description:"A vest that fuels the wearer’s rage when striking down their foes.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:50,modifierType:"add"}],abilities:[{type:"Ability",id:"AddRageOnEnemyDeath"},{type:"Ability",id:"HealOnRage"}],requiredLevel:61,sellPrice:80,tags:["equipment"]}),UE=ie({name:"Bloodied Chain Mail Lvl 1",assetName:"BloodiedChainMail",rarity:"common",description:"A battleworn chestplate with an unlockable Ability.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:14,modifierType:"add"}],sellPrice:28,upgrades:[{requires:[{id:"EssenceHearty",amount:2},{id:"EssenceSpicy",amount:2},{id:"Ore",amount:30}],yields:"BloodiedChainMailUltimate"}],tags:["equipment"]}),VE=ie({name:"Bloodied Chain Mail Ultimate",assetName:"BloodiedChainMail",rarity:"uncommon",description:"A chestplate that enrages the wearer when they get weak.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:24,modifierType:"add"}],abilities:[{type:"Ability",id:"LowHPRageFill"}],sellPrice:34,tags:["equipment"]}),YE=ie({name:"Bright Plate",assetName:"BrightPlate",rarity:"uncommon",description:"Reflective armor that defends against darkness.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:13,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.12,modifierType:"add"}],requiredLevel:14,sellPrice:26,tags:["equipment"]}),XE=ie({name:"Conductive Chestplate Lvl 1",assetName:"ConductiveChestplate",rarity:"epic",description:"Armor which reacts whenever the wearer summons Lightning.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:75,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnLightning"},{type:"Ability",id:"AddRageOnLightning"}],requiredLevel:141,sellPrice:280,upgrades:[{requires:[{id:"Iron",amount:780},{id:"Ore",amount:890},{id:"EssenceFluffy",amount:55}],yields:"ConductiveChestplate2"}],tags:["equipment"]}),zE=ie({name:"Conductive Chestplate Lvl 2",assetName:"ConductiveChestplate",rarity:"epic",description:"Armor which reacts whenever the wearer summons Lightning.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:90,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnLightning"},{type:"Ability",id:"AddRageOnLightning"}],requiredLevel:141,sellPrice:340,upgrades:[{requires:[{id:"Iron",amount:1050},{id:"Ore",amount:1200},{id:"EssenceFluffy",amount:70}],yields:"ConductiveChestplate3"}],tags:["equipment"]}),WE=ie({name:"Conductive Chestplate Lvl 3",assetName:"ConductiveChestplate",rarity:"epic",description:"Armor which reacts whenever the wearer summons Lightning.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:112,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnLightning"},{type:"Ability",id:"AddRageOnLightning"}],requiredLevel:141,sellPrice:440,tags:["equipment"]}),jE=ie({name:"Darksteel Plate",assetName:"DarksteelPlate",rarity:"legendary",description:"Powerfully fire-retardant armor that adds Rage when Magic Knives are summoned.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:30,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:.12,modifierType:"add"}],abilities:[{type:"Ability",id:"AddRageOnMagicKnife"}],requiredLevel:21,sellPrice:150,tags:["equipment"]}),KE=ie({name:"Darksteel Plate EX",assetName:"DarksteelPlate",rarity:"legendary",description:"Powerfully fire-retardant armor that adds Rage when Magic Knives are summoned.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:48,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:.16,modifierType:"add"}],abilities:[{type:"Ability",id:"AddRageOnMagicKnife"}],requiredLevel:44,sellPrice:280,tags:["equipment"]}),$E=ie({name:"Firststrike Vest",assetName:"FirststrikeVest",rarity:"rare",description:"A dashing vest that boosts ATK while at Max HP.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:44,modifierType:"add"}],abilities:[{type:"Ability",id:"BoostAttackOnHighHP"}],requiredLevel:21,sellPrice:70,tags:["equipment"]}),QE=ie({name:"Flameguard Jacket Lvl 1",assetName:"FlameguardJacket",rarity:"rare",description:"A padded jacket that wards against Fire damage.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:65,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:.05,modifierType:"add"}],requiredLevel:55,sellPrice:60,upgrades:[{requires:[{id:"Iron",amount:650},{id:"EssenceHearty",amount:14},{id:"EssenceTangy",amount:4}],yields:"FlameguardJacket2"}],tags:["equipment"]}),JE=ie({name:"Flameguard Jacket Lvl 2",assetName:"FlameguardJacket",rarity:"rare",description:"A padded jacket that wards against fire damage.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:85,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:.08,modifierType:"add"}],requiredLevel:55,sellPrice:140,upgrades:[{requires:[{id:"Iron",amount:850},{id:"EssenceHearty",amount:18},{id:"EssenceTangy",amount:8}],yields:"FlameguardJacket3"}],tags:["equipment"]}),ZE=ie({name:"Flameguard Jacket Lvl 3",assetName:"FlameguardJacket",rarity:"rare",description:"A padded jacket that wards against Fire damage.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:115,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:.12,modifierType:"add"}],requiredLevel:55,sellPrice:250,tags:["equipment"]}),qE=ie({name:"Fluttering Cape",assetName:"FlutteringCape",rarity:"legendary",description:"A cape that boost defense and makes the wearer fleet of foot.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:92,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.02,modifierType:"add"}],requiredLevel:74,sellPrice:50,tags:["equipment"]}),_E=ie({name:"Fury Vest Lvl 1",assetName:"FuryVest",rarity:"epic",description:"A powerful vest with an unlockable Ability.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:105,modifierType:"add"}],requiredLevel:66,sellPrice:120,upgrades:[{requires:[{id:"Ore",amount:700},{id:"Stone",amount:600},{id:"EssenceSpicy",amount:44}],yields:"FuryVest2"}],tags:["equipment"]}),eM=ie({name:"Fury Vest Lvl 2",assetName:"FuryVest",rarity:"epic",description:"A powerful vest with an unlockable Ability.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:125,modifierType:"add"}],requiredLevel:73,sellPrice:150,upgrades:[{requires:[{id:"Ore",amount:1200},{id:"Stone",amount:1400},{id:"EssenceSpicy",amount:68}],yields:"FuryVest3"}],tags:["equipment"]}),tM=ie({name:"Fury Vest Lvl 3",assetName:"FuryVest",rarity:"legendary",description:"A powerful vest that adds Rage on attack.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:145,modifierType:"add"}],abilities:[{type:"Ability",id:"BonusRageOnAttack"}],requiredLevel:80,sellPrice:275,tags:["equipment"]}),iM=ie({name:"Grounded Plate",assetName:"GroundedPlate",rarity:"uncommon",description:"Plate that is especially powerful against lighting.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:67,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.09,modifierType:"add"}],requiredLevel:58,sellPrice:64,tags:["equipment"]}),sM=ie({name:"Guardian Plate Lvl 1",assetName:"GuardianPlate",rarity:"rare",description:"Heavy armor with an unlockable Ability.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:64,modifierType:"add"}],requiredLevel:53,sellPrice:60,upgrades:[{requires:[{id:"Iron",amount:340},{id:"Stone",amount:340},{id:"EssenceHearty",amount:21}],yields:"GuardianPlate2"}],tags:["equipment"]}),aM=ie({name:"Guardian Plate Lvl 2",assetName:"GuardianPlate",rarity:"rare",description:"Heavy armor with an unlockable Ability.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:86,modifierType:"add"}],requiredLevel:58,sellPrice:120,upgrades:[{requires:[{id:"Iron",amount:880},{id:"Stone",amount:920},{id:"EssenceHearty",amount:48}],yields:"GuardianPlateUltimate"}],tags:["equipment"]}),nM=ie({name:"Guardian Plate Ultimate",assetName:"GuardianPlate",rarity:"epic",description:"Heavy armor that can trigger a Shield.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:110,modifierType:"add"}],abilities:[{type:"Ability",id:"ShieldOnLowHP"}],requiredLevel:64,sellPrice:300,tags:["equipment"]}),rM=ie({name:"Hardened Garb",assetName:"HardenedGarb",rarity:"uncommon",description:"Shields the wearer in long battles.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:10,modifierType:"add"}],abilities:[{type:"Ability",id:"GainShieldOnTurn"}],sellPrice:35,tags:["equipment"]}),oM=ie({name:"Leather Tunic Lvl 1",assetName:"LeatherTunic",rarity:"common",description:"A simple chestpiece which aids survival.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:12,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:10,modifierType:"add"}],sellPrice:20,upgrades:[{requires:[{id:"Wood",amount:12},{id:"EssenceHearty",amount:1}],yields:"LeatherTunic2"}],tags:["equipment"]}),lM=ie({name:"Leather Tunic Lvl 2",assetName:"LeatherTunic",rarity:"common",description:"A simple chestpiece which aids survival.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:20,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:18,modifierType:"add"}],sellPrice:30,upgrades:[{requires:[{id:"Wood",amount:50},{id:"EssenceHearty",amount:5}],yields:"LeatherTunic3"}],tags:["equipment"]}),hM=ie({name:"Leather Tunic Lvl 3",assetName:"LeatherTunic",rarity:"common",description:"A simple chestpiece which aids survival.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:36,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:30,modifierType:"add"}],sellPrice:45,tags:["equipment"]}),dM=ie({name:"Mantle of Need",assetName:"MantleofNeed",rarity:"legendary",description:"Armor that protects the wearer when in need.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:120,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:80,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.1,modifierType:"add"}],abilities:[{type:"Ability",id:"ShieldOnLowHP"}],requiredLevel:42,sellPrice:450,tags:["equipment"]}),uM=ie({name:"Mantle of Need EX",assetName:"MantleofNeed",rarity:"legendary",description:"Armor that protects the wearer when in need.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:210,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:104,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.12,modifierType:"add"}],abilities:[{type:"Ability",id:"ShieldOnLowHP"}],requiredLevel:92,sellPrice:650,tags:["equipment"]}),cM=ie({name:"Mercenary Cuirass Lvl 1",assetName:"MercenaryCuirass",rarity:"common",description:"A tough chest piece relied on by hired fighters.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:45,modifierType:"add"}],requiredLevel:19,sellPrice:90,upgrades:[{requires:[{id:"Wood",amount:200},{id:"Iron",amount:200},{id:"EssenceTangy",amount:3}],yields:"MercenaryCuirass2"}],tags:["equipment"]}),fM=ie({name:"Mercenary Cuirass Lvl 2",assetName:"MercenaryCuirass",rarity:"common",description:"A tough chest piece relied on by hired fighters.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:54,modifierType:"add"}],requiredLevel:24,sellPrice:110,upgrades:[{requires:[{id:"Wood",amount:275},{id:"Iron",amount:275},{id:"EssenceTangy",amount:5}],yields:"MercenaryCuirass3"}],tags:["equipment"]}),mM=ie({name:"Mercenary Cuirass Lvl 3",assetName:"MercenaryCuirass",rarity:"common",description:"A tough chest piece relied on by hired fighters.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:72,modifierType:"add"}],requiredLevel:30,sellPrice:140,tags:["equipment"]}),gM=ie({name:"Power Vest",assetName:"PowerVest",rarity:"uncommon",description:"A vest that gives bonus rage on turn 1.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:15,modifierType:"add"}],abilities:[{type:"Ability",id:"RageOnFirstTurn"}],sellPrice:55,tags:["equipment"]}),pM=ie({name:"Protective Mantle Lvl 1",assetName:"ProtectiveMantle",rarity:"common",description:"A mantle that protects against blows from foes.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:7,modifierType:"add"}],sellPrice:15,upgrades:[{requires:[{id:"Wood",amount:10},{id:"Ore",amount:10},{id:"Iron",amount:10}],yields:"ProtectiveMantle2"}],tags:["equipment"]}),vM=ie({name:"Protective Mantle Lvl 2",assetName:"ProtectiveMantle",rarity:"common",description:"A mantle to protect against blows from foes.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:15,modifierType:"add"}],sellPrice:29,tags:["equipment"]}),yM=ie({name:"Recovery Vest",assetName:"RecoveryVest",rarity:"rare",description:"A vest that heals when throwing knives.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:80,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnMagicKnife"}],requiredLevel:121,sellPrice:400,tags:["equipment"]}),xM=ie({name:"Recovery Vest EX",assetName:"RecoveryVest",rarity:"rare",description:"A vest that heals when throwing knives.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:100,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnMagicKnife"}],requiredLevel:141,sellPrice:400,tags:["equipment"]}),wM=ie({name:"Restoration Chainmail",assetName:"RestorationChainmail",rarity:"rare",description:"Heals the wearer when they strike decisive blows.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:40,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.03,modifierType:"add"},{type:"StatModifier",stat:"IceResist",value:.05,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnCritAbility"}],requiredLevel:34,sellPrice:90,tags:["equipment"]}),SM=ie({name:"Restoration Chainmail EX",assetName:"RestorationChainmail",rarity:"rare",description:"Heals the wearer when they strike decisive blows.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:88,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.04,modifierType:"add"},{type:"StatModifier",stat:"IceResist",value:.05,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnCritAbility"}],requiredLevel:52,sellPrice:180,tags:["equipment"]}),TM=ie({name:"Rugged Jerkin Lvl 1",assetName:"RuggedJerkin",rarity:"common",description:"A rugged jerkin that boosts Defense.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:28,modifierType:"add"}],sellPrice:30,upgrades:[{requires:[{id:"Ore",amount:150},{id:"EssenceHearty",amount:1}],yields:"RuggedJerkin2"}],tags:["equipment"]}),CM=ie({name:"Rugged Jerkin Lvl 2",assetName:"RuggedJerkin",rarity:"common",description:"A rugged jerkin that boosts Defense.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:42,modifierType:"add"}],requiredLevel:24,sellPrice:70,upgrades:[{requires:[{id:"Ore",amount:350},{id:"EssenceHearty",amount:5}],yields:"RuggedJerkin3"}],tags:["equipment"]}),AM=ie({name:"Rugged Jerkin Lvl 3",assetName:"RuggedJerkin",rarity:"common",description:"A rugged jerkin that boosts defense.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:60,modifierType:"add"}],requiredLevel:24,sellPrice:100,tags:["equipment"]}),bM=ie({name:"Sharkskin Shirt Lvl 1",assetName:"SharkskinShirt",rarity:"uncommon",description:"A streamlined shirt that boosts speed.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:33,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"}],requiredLevel:26,sellPrice:40,upgrades:[{requires:[{id:"Stone",amount:500},{id:"EssenceHearty",amount:12}],yields:"SharkskinShirt2"}],tags:["equipment"]}),EM=ie({name:"Sharkskin Shirt Lvl 2",assetName:"SharkskinShirt",rarity:"uncommon",description:"A streamlined shirt that boosts Speed.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:47,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:3,modifierType:"add"}],requiredLevel:26,sellPrice:60,upgrades:[{requires:[{id:"Stone",amount:800},{id:"EssenceHearty",amount:24}],yields:"SharkskinShirt3"}],tags:["equipment"]}),MM=ie({name:"Sharkskin Shirt Lvl 3",assetName:"SharkskinShirt",rarity:"uncommon",description:"A streamlined shirt that boosts Speed.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:77,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:4,modifierType:"add"}],requiredLevel:26,sellPrice:110,tags:["equipment"]}),LM=ie({name:"Silken Robe Lvl 1",assetName:"SilkenRobe",rarity:"uncommon",description:"A lightweight robe that boosts Dodge.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:15,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.005,modifierType:"add"}],requiredLevel:12,sellPrice:30,upgrades:[{requires:[{id:"Wood",amount:70},{id:"EssenceCreamy",amount:3},{id:"EssenceHearty",amount:8}],yields:"SilkenRobe2"}],tags:["equipment"]}),RM=ie({name:"Silken Robe Lvl 2",assetName:"SilkenRobe",rarity:"uncommon",description:"A lightweight robe that boosts Dodge.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:28,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.008,modifierType:"add"}],requiredLevel:17,sellPrice:50,upgrades:[{requires:[{id:"Wood",amount:285},{id:"EssenceCreamy",amount:5},{id:"EssenceHearty",amount:16}],yields:"SilkenRobe3"}],tags:["equipment"]}),PM=ie({name:"Silken Robe Lvl 3",assetName:"SilkenRobe",rarity:"uncommon",description:"A lightweight robe that boosts dodge.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:45,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.015,modifierType:"add"}],requiredLevel:24,sellPrice:100,tags:["equipment"]}),BM=ie({name:"Soulplate",assetName:"Soulplate",rarity:"epic",description:"A chestplate that provides a shield when taking down a foe.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:20,modifierType:"add"}],abilities:[{type:"Ability",id:"GainShieldOnEnemyDeath"}],sellPrice:90,tags:["equipment"]}),DM=ie({name:"Swift Cowl ",assetName:"SwiftCowl",rarity:"rare",description:"A fluttering cowl that increases Dodge chance.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:41,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.025,modifierType:"add"}],requiredLevel:34,sellPrice:41,tags:["equipment"]}),FM=ie({name:"Tattered Cuirass",assetName:"TatteredCuirass",rarity:"uncommon",description:"A basic garment in need of some repair.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:15,modifierType:"add"},{type:"StatModifier",stat:"IceResist",value:-.7,modifierType:"add"}],sellPrice:30,upgrades:[{requires:[{id:"EssenceHearty",amount:4},{id:"Iron",amount:15},{id:"Stone",amount:15}],yields:"TatteredCuirassUltimate"}],tags:["equipment"]}),IM=ie({name:"Tattered Cuirass Ultimate",assetName:"TatteredCuirass",rarity:"uncommon",description:"A basic garment in need of some repair.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"Defense",value:28,modifierType:"add"}],sellPrice:45,tags:["equipment"]}),OM=ie({name:"Untouchable Mantle",assetName:"UntouchableMantle",rarity:"legendary",description:"A mantle that creates a shield both when slaying an enemy and when raging.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:100,modifierType:"add"}],abilities:[{type:"Ability",id:"GainShieldOnEnemyDeath"},{type:"Ability",id:"GainShieldOnRage"}],requiredLevel:121,sellPrice:420,tags:["equipment"]}),NM=ie({name:"Untouchable Mantle EX",assetName:"UntouchableMantle",rarity:"legendary",description:"A mantle that creates a shield both when slaying an enemy and when raging.",equipSlots:["Chest"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:140,modifierType:"add"}],abilities:[{type:"Ability",id:"GainShieldOnEnemyDeath"},{type:"Ability",id:"GainShieldOnRage"}],requiredLevel:141,sellPrice:600,tags:["equipment"]}),GM=ie({name:"Acuity Helm Lvl 1",assetName:"AcuityHelm",rarity:"uncommon",description:"A focusing helm with an unlockable Ability.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:110,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.015,modifierType:"add"}],requiredLevel:45,sellPrice:90,upgrades:[{requires:[{id:"Ore",amount:550},{id:"EssenceChewy",amount:13},{id:"EssenceDecadent",amount:28}],yields:"AcuityHelm2"}],tags:["equipment"]}),HM=ie({name:"Acuity Helm Lvl 2",assetName:"AcuityHelm",rarity:"uncommon",description:"A focusing helm with an unlockable Ability.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:150,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"}],requiredLevel:45,sellPrice:100,upgrades:[{requires:[{id:"Ore",amount:880},{id:"EssenceChewy",amount:27},{id:"EssenceDecadent",amount:38}],yields:"AcuityHelmUltimate"}],tags:["equipment"]}),kM=ie({name:"Acuity Helm Ultimate",assetName:"AcuityHelm",rarity:"rare",description:"A focusing helm which heals on Crit.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:190,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.04,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnCritAbility"}],requiredLevel:50,sellPrice:400,tags:["equipment"]}),UM=ie({name:"Adrenaline Cap",assetName:"AdrenalineCap",rarity:"epic",description:"A helmet that grants Rage when becoming weak.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:235,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.05,modifierType:"add"}],abilities:[{type:"Ability",id:"LowHPRageFill"}],requiredLevel:63,sellPrice:150,tags:["equipment"]}),VM=ie({name:"Adrenaline Cap EX",assetName:"AdrenalineCap",rarity:"epic",description:"A helmet that grants Rage when becoming weak.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:280,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.12,modifierType:"add"}],abilities:[{type:"Ability",id:"LowHPRageFill"}],requiredLevel:85,sellPrice:250,tags:["equipment"]}),YM=ie({name:"Bolstering Headgear",assetName:"BolsteringHeadgear",rarity:"epic",description:"A helmet that increases ATK when wearer is at full health.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:105,modifierType:"add"},{type:"StatModifier",stat:"IceResist",value:.07,modifierType:"add"}],abilities:[{type:"Ability",id:"BoostAttackOnHighHP"}],requiredLevel:35,sellPrice:110,tags:["equipment"]}),XM=ie({name:"Bolstering Headgear EX",assetName:"BolsteringHeadgear",rarity:"epic",description:"A helmet that increases ATK when wearer is at full health.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:175,modifierType:"add"},{type:"StatModifier",stat:"IceResist",value:.13,modifierType:"add"}],abilities:[{type:"Ability",id:"BoostAttackOnHighHP"}],requiredLevel:84,sellPrice:200,tags:["equipment"]}),zM=ie({name:"Braveheart Helm Lvl 1",assetName:"BraveheartHelm",rarity:"epic",description:"A powerful helm with an unlockable Ability.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:160,modifierType:"add"}],requiredLevel:33,sellPrice:100,upgrades:[{requires:[{id:"EssenceHearty",amount:34},{id:"Iron",amount:800},{id:"EssenceFresh",amount:11}],yields:"BraveheartHelm2"}],tags:["equipment"]}),WM=ie({name:"Braveheart Helm Lvl 2",assetName:"BraveheartHelm",rarity:"epic",description:"A powerful helm with an unlockable Ability.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:220,modifierType:"add"}],requiredLevel:40,sellPrice:275,upgrades:[{requires:[{id:"EssenceHearty",amount:25},{id:"Iron",amount:1250},{id:"EssenceFresh",amount:38}],yields:"BraveheartHelmUltimate"}],tags:["equipment"]}),jM=ie({name:"Braveheart Helm Ultimate",assetName:"BraveheartHelm",rarity:"legendary",description:"A powerful helm that restores health on Rage.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:330,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnRage"}],requiredLevel:48,sellPrice:500,tags:["equipment"]}),KM=ie({name:"Confounding Mask Lvl 1",assetName:"ConfoundingMask",rarity:"uncommon",description:"A strangely patterned mask that distracts enemies.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:35,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.03,modifierType:"add"}],requiredLevel:9,sellPrice:35,upgrades:[{requires:[{id:"Wood",amount:80},{id:"EssenceCreamy",amount:5}],yields:"ConfoundingMask2"}],tags:["equipment"]}),$M=ie({name:"Confounding Mask Lvl 2",assetName:"ConfoundingMask",rarity:"uncommon",description:"A strangely patterned mask that distracts enemies.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:60,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.04,modifierType:"add"}],requiredLevel:13,sellPrice:40,tags:["equipment"]}),QM=ie({name:"Conjurer’s Cap Lvl 1",assetName:"ConjurersCap",rarity:"uncommon",description:"A flimsy cap with an unlockable ability.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:22,modifierType:"add"}],requiredLevel:4,sellPrice:20,upgrades:[{requires:[{id:"Iron",amount:3},{id:"Stone",amount:3}],yields:"ConjurersCap2"}],tags:["equipment"]}),JM=ie({name:"Conjurer’s Cap Lvl 2",assetName:"ConjurersCap",rarity:"uncommon",description:"A flimsy cap with an unlockable ability.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:30,modifierType:"add"}],requiredLevel:6,sellPrice:30,upgrades:[{requires:[{id:"Iron",amount:5},{id:"Stone",amount:5},{id:"EssenceCreamy",amount:1}],yields:"ConjurersCapUltimate"}],tags:["equipment"]}),ZM=ie({name:"Conjurer’s Cap Ultimate",assetName:"ConjurersCap",rarity:"uncommon",description:"A flimsy cap that summons a Magic Knife on Attack.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:35,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeAbility"}],requiredLevel:10,sellPrice:50,tags:["equipment"]}),qM=ie({name:"Cordovan Hood Lvl 1",assetName:"CordovanHood",rarity:"common",description:"A tough hood that offers decent protection.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:80,modifierType:"add"}],requiredLevel:18,sellPrice:55,upgrades:[{requires:[{id:"Stone",amount:40},{id:"Ore",amount:40},{id:"EssenceCreamy",amount:5}],yields:"CordovanHood2"}],tags:["equipment"]}),_M=ie({name:"Cordovan Hood Lvl 2",assetName:"CordovanHood",rarity:"common",description:"A tough hood that offers decent protection.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:97,modifierType:"add"}],requiredLevel:22,sellPrice:75,upgrades:[{requires:[{id:"Stone",amount:65},{id:"Ore",amount:65},{id:"EssenceCreamy",amount:7}],yields:"CordovanHood3"}],tags:["equipment"]}),eL=ie({name:"Cordovan Hood Lvl 3",assetName:"CordovanHood",rarity:"common",description:"A tough hood that offers decent protection.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:129,modifierType:"add"}],requiredLevel:27,sellPrice:92,tags:["equipment"]}),tL=ie({name:"Flame Hood",assetName:"FlameHood",rarity:"rare",description:"A protective helm which protects against flames.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:135,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:24,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:.12,modifierType:"add"}],requiredLevel:76,sellPrice:150,tags:["equipment"]}),iL=ie({name:"Helm of Blades",assetName:"HelmOfBlades",rarity:"rare",description:"A helm that provides Health and healing with an unlockable ability.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:95,modifierType:"add"}],requiredLevel:65,upgrades:[{requires:[{id:"Stone",amount:1800},{id:"EssenceChewy",amount:33},{id:"EssenceDecadent",amount:33}],yields:"HelmofBladesUltimate"}],tags:["equipment"]}),sL=ie({name:"Helm of Blades Ultimate",assetName:"HelmOfBlades",rarity:"rare",description:"A helm that provides Health and healing and throws a Magic Knife on Crit.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:146,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.01,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnCrit"}],requiredLevel:72,sellPrice:124,tags:["equipment"]}),aL=ie({name:"Intricate Headgear",assetName:"IntricateHeadgear",rarity:"rare",description:"This helmet heals the wearer when dealing a critical blow.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:50,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnCritAbility"}],sellPrice:40,tags:["equipment"]}),nL=ie({name:"Leather Cap Lvl 1",assetName:"LeatherCap",rarity:"common",description:"A plain cap which grants a small HP boost.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:52,modifierType:"add"}],requiredLevel:15,sellPrice:35,upgrades:[{requires:[{id:"Iron",amount:30},{id:"EssenceChewy",amount:2}],yields:"LeatherCap2"}],tags:["equipment"]}),rL=ie({name:"Leather Cap Lvl 2",assetName:"LeatherCap",rarity:"common",description:"A plain cap which grants a small HP boost.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:78,modifierType:"add"}],requiredLevel:18,sellPrice:40,upgrades:[{requires:[{id:"Iron",amount:200},{id:"EssenceChewy",amount:5}],yields:"LeatherCap3"}],tags:["equipment"]}),oL=ie({name:"Leather Cap Lvl 3",assetName:"LeatherCap",rarity:"common",description:"A plain cap which grants a small HP boost.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:104,modifierType:"add"}],requiredLevel:30,sellPrice:60,tags:["equipment"]}),lL=ie({name:"PaddedHelmet",assetName:"PaddedHelmet",rarity:"uncommon",description:"A sturdy helmet that gives HP but reduces Crit.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:135,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:-.04,modifierType:"add"}],requiredLevel:36,sellPrice:55,tags:["equipment"]}),hL=ie({name:"Rawhide Cap Lvl 1",assetName:"RawhideCap",rarity:"common",description:"A basic cap that boosts HP.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:40,modifierType:"add"}],sellPrice:30,upgrades:[{requires:[{id:"Stone",amount:20},{id:"EssenceChewy",amount:1}],yields:"RawhideCap2"}],tags:["equipment"]}),dL=ie({name:"Rawhide Cap Lvl 2",assetName:"RawhideCap",rarity:"common",description:"A basic cap that boosts HP.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:60,modifierType:"add"}],sellPrice:50,upgrades:[{requires:[{id:"Stone",amount:95},{id:"EssenceChewy",amount:4}],yields:"RawhideCap3"}],tags:["equipment"]}),uL=ie({name:"Rawhide Cap Lvl 3",assetName:"RawhideCap",rarity:"common",description:"A basic cap that boosts HP.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:100,modifierType:"add"}],sellPrice:80,tags:["equipment"]}),cL=ie({name:"Restoration Helm",assetName:"RestorationHelm",rarity:"uncommon",description:"A helmet that gives health when Rage is unleashed.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:50,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnRage"}],requiredLevel:17,sellPrice:40,tags:["equipment"]}),fL=ie({name:"Rusted Helm",assetName:"RustedHelm",rarity:"uncommon",description:"A battered old helm that aids overall vitality.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:110,modifierType:"add"}],requiredLevel:38,sellPrice:60,tags:["equipment"]}),mL=ie({name:"Shadownbane Circlet",assetName:"ShadowbaneCirclet",rarity:"rare",description:"Enchanted hood to keep shadows at bay.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:76,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.1,modifierType:"add"}],requiredLevel:17,sellPrice:50,tags:["equipment"]}),gL=ie({name:"Shadow Drinker Helm Lvl 1",assetName:"ShadowDrinkerHelm",rarity:"uncommon",description:"An enchanted helmet with an unlockable ability.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:120,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.05,modifierType:"add"}],requiredLevel:41,sellPrice:65,upgrades:[{requires:[{id:"Iron",amount:350},{id:"Wood",amount:350},{id:"EssenceTangy",amount:22}],yields:"ShadowDrinkerHelmUltimate"}],tags:["equipment"]}),pL=ie({name:"Shadow Drinker Helm Ultimate",assetName:"ShadowDrinkerHelm",rarity:"rare",description:"An enchanted helmet that can heal the wearer when receiving Shadow damage.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:160,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.08,modifierType:"add"}],abilities:[{type:"Ability",id:"HealChanceOnShadowDamage"}],requiredLevel:61,sellPrice:90,tags:["equipment"]}),vL=ie({name:"Shielding Helm",assetName:"ShieldingHelm",rarity:"common",description:"A sturdy helmet with an unlockable Ability.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:35,modifierType:"add"}],sellPrice:20,upgrades:[{requires:[{id:"Iron",amount:38},{id:"EssenceChewy",amount:2}],yields:"ShieldingHelmUltimate"}],tags:["equipment"]}),yL=ie({name:"Shielding Helm Ultimate",assetName:"ShieldingHelm",rarity:"uncommon",description:"A helmet that grants a shield in times of danger.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:85,modifierType:"add"}],abilities:[{type:"Ability",id:"ShieldOnLowHP"}],requiredLevel:18,sellPrice:40,tags:["equipment"]}),xL=ie({name:"Spiked Cowl",assetName:"SpikedCowl",rarity:"epic",description:"A cowl that provides a defensive boost and heals when summoning Magic Knife.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:70,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:30,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:.04,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnMagicKnife"}],requiredLevel:24,sellPrice:40,tags:["equipment"]}),wL=ie({name:"Spiked Cowl EX",assetName:"SpikedCowl",rarity:"epic",description:"A cowl that provides a defensive boost and heals when summoning Magic Knife.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:105,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:62,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:.08,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnMagicKnife"}],requiredLevel:55,sellPrice:220,tags:["equipment"]}),SL=ie({name:"Sturdy Headguard Lvl 1",assetName:"SturdyHeadguard",rarity:"common",description:"A heavy helmet with an unlockable Ability.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:30,modifierType:"add"}],sellPrice:35,upgrades:[{requires:[{id:"Wood",amount:30},{id:"EssenceFresh",amount:10}],yields:"SturdyHeadguardUltimate"}],tags:["equipment"]}),TL=ie({name:"Sturdy Headguard Ultimate",assetName:"SturdyHeadguard",rarity:"uncommon",description:"A heavy helmet that heals when rage is unleashed.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:75,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnRage"}],requiredLevel:18,sellPrice:50,tags:["equipment"]}),CL=ie({name:"Sunstone Helmet",assetName:"SunstoneHelmet",rarity:"epic",description:"A helmet designed for battling Shadow creatures, crowned with a glowing Sunstone.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:142,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.15,modifierType:"add"}],requiredLevel:82,sellPrice:125,tags:["equipment"]}),AL=ie({name:"Surge Helm",assetName:"SurgeHelm",rarity:"epic",description:"A protective helmet that absorbs Lightning and heals the wearer.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:90,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:10,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.03,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnLightning"}],requiredLevel:7,sellPrice:100,tags:["equipment"]}),bL=ie({name:"Surge Helm EX",assetName:"SurgeHelm",rarity:"epic",description:"A protective helmet that absorbs Lightning and heals the wearer.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:140,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:22,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.03,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnLightning"}],requiredLevel:44,sellPrice:225,tags:["equipment"]}),EL=ie({name:"Thunder Helm",assetName:"ThunderHelm",rarity:"rare",description:"A lightning infused helmet which grants Two For Two Lightning and protects the wearer from electric damage.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:95,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.15,modifierType:"add"}],abilities:[{type:"Ability",id:"DoubleLightningOnTurn"}],requiredLevel:61,sellPrice:120,tags:["equipment"]}),ML=ie({name:"Tough Helmet Lvl 1",assetName:"ToughHelmet",rarity:"uncommon",description:"A rugged helmet with added Defense boost.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:90,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:10,modifierType:"add"}],requiredLevel:17,sellPrice:40,upgrades:[{requires:[{id:"Iron",amount:180},{id:"EssenceHearty",amount:5}],yields:"ToughHelmet2"}],tags:["equipment"]}),LL=ie({name:"Tough Helmet Lvl 2",assetName:"ToughHelmet",rarity:"uncommon",description:"A rugged helmet with added Defense boost.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:115,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:17,modifierType:"add"}],requiredLevel:20,sellPrice:70,upgrades:[{requires:[{id:"Iron",amount:400},{id:"EssenceHearty",amount:15}],yields:"ToughHelmet3"}],tags:["equipment"]}),RL=ie({name:"Tough Helmet Lvl 3",assetName:"ToughHelmet",rarity:"uncommon",description:"A rugged helmet with added Defense boost.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:120,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:36,modifierType:"add"}],requiredLevel:30,sellPrice:100,tags:["equipment"]}),PL=ie({name:"Vanishing Hood Lvl 1",assetName:"VanishingHood",rarity:"rare",description:"A thief’s hood which adds Dodge.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:90,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.02,modifierType:"add"}],requiredLevel:32,sellPrice:60,upgrades:[{requires:[{id:"Wood",amount:380},{id:"EssenceCreamy",amount:5},{id:"EssenceHearty",amount:5}],yields:"VanishingHood2"}],tags:["equipment"]}),BL=ie({name:"Vanishing Hood Lvl 2",assetName:"VanishingHood",rarity:"rare",description:"A thief’s hood which adds Dodge.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:112,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.025,modifierType:"add"}],requiredLevel:37,sellPrice:90,upgrades:[{requires:[{id:"Wood",amount:680},{id:"EssenceCreamy",amount:16},{id:"EssenceHearty",amount:16}],yields:"VanishingHood3"}],tags:["equipment"]}),DL=ie({name:"Vanishing Hood Lvl 3",assetName:"VanishingHood",rarity:"rare",description:"A thief’s hood which adds Dodge.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:134,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.04,modifierType:"add"}],requiredLevel:44,sellPrice:150,tags:["equipment"]}),FL=ie({name:"Wrathful Visor",assetName:"WrathfulVisor",rarity:"epic",description:"A visor that heals when raging.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:250,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:22,modifierType:"add"}],abilities:[{type:"Ability",id:"AddRageOnHeal"}],requiredLevel:121,sellPrice:270,tags:["equipment"]}),IL=ie({name:"Wrathful Visor EX",assetName:"WrathfulVisor",rarity:"epic",description:"A visor that heals when raging.",equipSlots:["Head"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:290,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:34,modifierType:"add"}],abilities:[{type:"Ability",id:"AddRageOnHeal"}],requiredLevel:141,sellPrice:320,tags:["equipment"]}),OL=ie({name:"Amberfire Ring",assetName:"AmberfireRing",rarity:"uncommon",description:"A smoldering ring that conjures a Fire Knife on turn start.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.01,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:.07,modifierType:"add"}],abilities:[{type:"Ability",id:"FireKnifeOnTurnStart"}],sellPrice:55,tags:["equipment"]}),NL=ie({name:"Blasting Ring",assetName:"BlastingRing",rarity:"epic",description:"Smite the enemy from behind a Shield.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Defense",value:55,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.07,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnShieldActivate"}],requiredLevel:52,sellPrice:200,tags:["equipment"]}),GL=ie({name:"Blasting Ring EX",assetName:"BlastingRing",rarity:"epic",description:"Smite the enemy from behind a Shield.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Defense",value:85,modifierType:"add"},{type:"StatModifier",stat:"Speed",value:6,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.07,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnShieldActivate"}],requiredLevel:89,sellPrice:240,tags:["equipment"]}),HL=ie({name:"Blazing Ring",assetName:"BlazingRing",rarity:"common",description:"An unbearably hot ring that makes the wearer strike true.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.055,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:-.25,modifierType:"add"}],requiredLevel:31,sellPrice:30,tags:["equipment"]}),kL=ie({name:"Copper Ring",assetName:"CopperRing",rarity:"common",description:"A ring that increases crit chance.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"}],sellPrice:16,tags:["equipment"]}),UL=ie({name:"Elemental Ring",assetName:"ElementalRing",rarity:"rare",description:"A ring to protect against the elements.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"FireResist",value:.05,modifierType:"add"},{type:"StatModifier",stat:"IceResist",value:.05,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.05,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.05,modifierType:"add"}],requiredLevel:84,sellPrice:50,tags:["equipment"]}),VL=ie({name:"Ferocity Ring",assetName:"FerocityRing",rarity:"epic",description:"A ring which adds Crit, and grants Rage on critical hits.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.04,modifierType:"add"}],abilities:[{type:"Ability",id:"AddRageOnCrit"}],requiredLevel:81,sellPrice:350,tags:["equipment"]}),YL=ie({name:"Filigree Band Lvl 1",assetName:"FiligreeBand",rarity:"epic",description:"A delicate ring with a deadly ability triggered by a foe’s demise.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.05,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnEnemyDeath"}],requiredLevel:121,sellPrice:280,upgrades:[{requires:[{id:"Ore",amount:1400},{id:"Wood",amount:1200},{id:"EssenceCreamy",amount:25}],yields:"FiligreeBand2"}],tags:["equipment"]}),XL=ie({name:"Filigree Band Lvl 2",assetName:"FiligreeBand",rarity:"epic",description:"A delicate ring with a deadly ability triggered by a foe’s demise.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.06,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnEnemyDeath"}],requiredLevel:121,sellPrice:340,upgrades:[{requires:[{id:"Ore",amount:1500},{id:"Wood",amount:1650},{id:"EssenceCreamy",amount:40}],yields:"FiligreeBand3"}],tags:["equipment"]}),zL=ie({name:"Filigree Band Lvl 3",assetName:"FiligreeBand",rarity:"epic",description:"A delicate ring with a deadly ability triggered by a foe’s demise.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.07,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnEnemyDeath"}],requiredLevel:121,sellPrice:500,tags:["equipment"]}),WL=ie({name:"Focus Ring",assetName:"FocusRing",rarity:"rare",description:"A fiery ring which boosts Rage on low HP.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.0375,modifierType:"add"}],abilities:[{type:"Ability",id:"LowHPRageFill"}],requiredLevel:26,sellPrice:70,tags:["equipment"]}),jL=ie({name:"Fragile Ring",assetName:"FragileRing",rarity:"uncommon",description:"A shattered ring that gives Crit but reduces Hp.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:-30,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.03,modifierType:"add"}],sellPrice:40,tags:["equipment"]}),KL=ie({name:"Heavy Band",assetName:"HeavyBand",rarity:"common",description:"A weighted ring that toughens the wearer.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Defense",value:6,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.015,modifierType:"add"}],sellPrice:17,tags:["equipment"]}),$L=ie({name:"Inferno Ring Lvl 1",assetName:"InfernoRing",rarity:"rare",description:"A powerful ring with an unlockable Ability.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.045,modifierType:"add"}],requiredLevel:20,sellPrice:70,upgrades:[{requires:[{id:"Wood",amount:240},{id:"EssenceDecadent",amount:45},{id:"EssenceSpicy",amount:4}],yields:"InfernoRing2"}],tags:["equipment"]}),QL=ie({name:"Inferno Ring Lvl 2",assetName:"InfernoRing",rarity:"rare",description:"A powerful ring with an unlockable Ability.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.07,modifierType:"add"}],requiredLevel:29,sellPrice:150,upgrades:[{requires:[{id:"Wood",amount:925},{id:"EssenceDecadent",amount:32},{id:"EssenceSpicy",amount:15}],yields:"InfernoRingUltimate"}],tags:["equipment"]}),JL=ie({name:"Inferno Ring Ultimate",assetName:"InfernoRing",rarity:"epic",description:"A powerful ring that boosts Crit and adds Rage.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.09,modifierType:"add"}],abilities:[{type:"Ability",id:"RageOnFirstTurn"}],requiredLevel:37,sellPrice:275,tags:["equipment"]}),ZL=ie({name:"Jagged Ring Lvl 1",assetName:"JaggedRing",rarity:"uncommon",description:"A brittle ring that increases Crit chance.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],sellPrice:50,upgrades:[{requires:[{id:"Wood",amount:100},{id:"EssenceFluffy",amount:2}],yields:"JaggedRing2"}],tags:["equipment"]}),qL=ie({name:"Jagged Ring Lvl 2",assetName:"JaggedRing",rarity:"uncommon",description:"A brittle ring that increases Crit chance.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.03,modifierType:"add"}],sellPrice:70,upgrades:[{requires:[{id:"Wood",amount:380},{id:"EssenceFluffy",amount:6}],yields:"JaggedRing3"}],tags:["equipment"]}),_L=ie({name:"Jagged Ring Lvl 3",assetName:"JaggedRing",rarity:"uncommon",description:"A brittle ring that increases Crit chance.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.0375,modifierType:"add"}],requiredLevel:24,sellPrice:100,tags:["equipment"]}),e3=ie({name:"Luckstone Ring",assetName:"LuckstoneRing",rarity:"common",description:"A ring that increases Crit chance and boosts HP.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:35,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],sellPrice:40,tags:["equipment"]}),t3=ie({name:"Muscle Ring Lvl 1",assetName:"MuscleRing",rarity:"common",description:"A strengthening ring that boosts Crit and HP.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:55,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.015,modifierType:"add"}],requiredLevel:10,sellPrice:30,upgrades:[{requires:[{id:"Wood",amount:190},{id:"Stone",amount:190},{id:"EssenceCrunchy",amount:15}],yields:"MuscleRing2"}],tags:["equipment"]}),i3=ie({name:"Muscle Ring Lvl 2",assetName:"MuscleRing",rarity:"common",description:"A strengthening ring that boosts Crit and HP.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:62,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"}],requiredLevel:18,sellPrice:70,upgrades:[{requires:[{id:"Wood",amount:390},{id:"Stone",amount:390},{id:"EssenceCrunchy",amount:25}],yields:"MuscleRing3"}],tags:["equipment"]}),s3=ie({name:"Muscle Ring Lvl 3",assetName:"MuscleRing",rarity:"common",description:"A strengthening ring that boosts Crit and HP.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:78,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.0325,modifierType:"add"}],requiredLevel:24,sellPrice:100,tags:["equipment"]}),a3=ie({name:"Quicksilver Ring",assetName:"QuicksilverRing",rarity:"rare",description:"A ring that grants is wearer improved Speed.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Speed",value:3,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"}],requiredLevel:32,sellPrice:65,tags:["equipment"]}),n3=ie({name:"Razor Ring",assetName:"RazorRing",rarity:"rare",description:"A deadly ring with an unlockable Ability.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.0175,modifierType:"add"}],requiredLevel:5,sellPrice:32,upgrades:[{requires:[{id:"Ore",amount:90},{id:"Iron",amount:90},{id:"EssenceSpicy",amount:15}],yields:"RazorRingUltimate"}],tags:["equipment"]}),r3=ie({name:"Razor Ring Ultimate",assetName:"RazorRing",rarity:"rare",description:"A deadly ring that summons a Magic Knife on Crit.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.0325,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnCrit"}],requiredLevel:13,sellPrice:44,tags:["equipment"]}),o3=ie({name:"Ring Of Repair Lvl 1",assetName:"RingOfRepair",rarity:"uncommon",description:"A simple ring with an unlockable ability.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.015,modifierType:"add"}],sellPrice:25,upgrades:[{requires:[{id:"Stone",amount:30},{id:"Ore",amount:40},{id:"EssenceFresh",amount:12}],yields:"RingOfRepair2"}],tags:["equipment"]}),l3=ie({name:"Ring Of Repair Lvl 2",assetName:"RingOfRepair",rarity:"uncommon",description:"A simple ring with an unlockable ability.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],requiredLevel:4,sellPrice:38,upgrades:[{requires:[{id:"Stone",amount:50},{id:"Ore",amount:60},{id:"EssenceFresh",amount:15}],yields:"RingOfRepairUltimate"}],tags:["equipment"]}),h3=ie({name:"Ring Of Repair Ultimate",assetName:"RingOfRepair",rarity:"uncommon",description:"A simple ring that heals on Critical attacks.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnCritAbility"}],requiredLevel:8,sellPrice:56,tags:["equipment"]}),d3=ie({name:"Ruby Clawed Ring",assetName:"RubyClawedRing",rarity:"rare",description:"A fire-resist ring that creates Magic Knives when enraged.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.035,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:.04,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnRage"}],requiredLevel:21,sellPrice:75,tags:["equipment"]}),u3=ie({name:"Ruby Clawed Ring EX",assetName:"RubyClawedRing",rarity:"rare",description:"A fire-resist ring that creates Magic Knives when enraged.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.05,modifierType:"add"},{type:"StatModifier",stat:"FireResist",value:.09,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnRage"}],requiredLevel:38,sellPrice:205,tags:["equipment"]}),c3=ie({name:"Shielding Band",assetName:"ShieldingBand",rarity:"uncommon",description:"A sturdy ring that toughens the wearer and grants a Shield when health is low.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Defense",value:12,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"ShieldOnLowHP"}],sellPrice:40,tags:["equipment"]}),f3=ie({name:"Smiting Ring",assetName:"SmitingRing",rarity:"epic",description:"A powerful grounded ring with an unlockable ability.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],requiredLevel:53,sellPrice:45,upgrades:[{requires:[{id:"Iron",amount:750},{id:"EssenceSpicy",amount:55}],yields:"SmitingRingUltimate"}],tags:["equipment"]}),m3=ie({name:"Smiting Ring Ultimate",assetName:"SmitingRing",rarity:"epic",description:"A powerful grounded ring that smites enemies with Lightning.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnAttack"}],requiredLevel:58,sellPrice:138,tags:["equipment"]}),g3=ie({name:"Stacked Signet Lvl 1",assetName:"StackedSignet",rarity:"epic",description:"A compound ring with an unlockable Ability.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:100,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:25,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.03,modifierType:"add"}],requiredLevel:47,sellPrice:125,upgrades:[{requires:[{id:"Iron",amount:1400},{id:"EssenceDecadent",amount:67},{id:"EssenceHearty",amount:20}],yields:"StackedSignet2"}],tags:["equipment"]}),p3=ie({name:"Stacked Signet Lvl 2",assetName:"StackedSignet",rarity:"epic",description:"A compound ring with an unlockable Ability.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:125,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:35,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.05,modifierType:"add"}],requiredLevel:52,sellPrice:125,upgrades:[{requires:[{id:"Iron",amount:2800},{id:"EssenceDecadent",amount:55},{id:"EssenceHearty",amount:40}],yields:"StackedSignetUltimate"}],tags:["equipment"]}),v3=ie({name:"Stacked Signet Ultimate",assetName:"StackedSignet",rarity:"legendary",description:"A compound ring that adds Rage on multiple hits.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"MaxHp",value:160,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:45,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.07,modifierType:"add"}],abilities:[{type:"Ability",id:"AddRageOnHitCount"}],requiredLevel:60,sellPrice:285,tags:["equipment"]}),y3=ie({name:"Stormseeker Lvl 1",assetName:"Stormseeker",rarity:"uncommon",description:"A conductive ring that protects against Lightning.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.05,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.08,modifierType:"add"}],requiredLevel:38,sellPrice:40,upgrades:[{requires:[{id:"Iron",amount:480},{id:"EssenceDecadent",amount:22},{id:"EssenceTangy",amount:22}],yields:"Stormseeker2"}],tags:["equipment"]}),x3=ie({name:"Stormseeker Lvl 2",assetName:"Stormseeker",rarity:"rare",description:"A conductive ring that protects against Lightning.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.07,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.13,modifierType:"add"}],requiredLevel:46,sellPrice:31,tags:["equipment"]}),w3=ie({name:"Tarnished Band Lvl 1",assetName:"TarnishedBand",rarity:"common",description:"A basic ring that boosts Crit.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.01,modifierType:"add"}],sellPrice:30,upgrades:[{requires:[{id:"Iron",amount:12},{id:"Ore",amount:12},{id:"EssenceDecadent",amount:2}],yields:"TarnishedBand2"}],tags:["equipment"]}),S3=ie({name:"Tarnished Band Lvl 2",assetName:"TarnishedBand",rarity:"common",description:"A basic ring that boosts Crit.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.015,modifierType:"add"}],sellPrice:50,upgrades:[{requires:[{id:"Iron",amount:50},{id:"Ore",amount:50},{id:"EssenceDecadent",amount:12}],yields:"TarnishedBand3"}],tags:["equipment"]}),T3=ie({name:"Tarnished Band Lvl 3",assetName:"TarnishedBand",rarity:"common",description:"A basic ring that boosts Crit.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"}],requiredLevel:18,sellPrice:100,tags:["equipment"]}),C3=ie({name:"Twilight Band Lvl 1",assetName:"TwilightBand",rarity:"uncommon",description:"A gloomy band which absorbs Shadow damage.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"ShadowResist",value:.05,modifierType:"add"}],requiredLevel:32,sellPrice:70,upgrades:[{requires:[{id:"Stone",amount:450},{id:"EssenceFluffy",amount:12},{id:"EssenceSpicy",amount:5}],yields:"TwilightBand2"}],tags:["equipment"]}),A3=ie({name:"Twilight Band Lvl 2",assetName:"TwilightBand",rarity:"uncommon",description:"A gloomy band which absorbs Shadow damage.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"ShadowResist",value:.08,modifierType:"add"}],requiredLevel:37,sellPrice:110,upgrades:[{requires:[{id:"Stone",amount:840},{id:"EssenceFluffy",amount:22},{id:"EssenceSpicy",amount:12}],yields:"TwilightBand3"}],tags:["equipment"]}),b3=ie({name:"Twilight Band Lvl 3",assetName:"TwilightBand",rarity:"uncommon",description:"A gloomy band which absorbs Shadow damage.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"ShadowResist",value:.12,modifierType:"add"}],requiredLevel:44,sellPrice:165,tags:["equipment"]}),E3=ie({name:"Twinblade Band",assetName:"TwinbladeBand",rarity:"rare",description:"A ring that enables double attacks.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.01,modifierType:"add"}],abilities:[{type:"Ability",id:"EveryOtherTurnDoubleAttack"}],requiredLevel:121,sellPrice:200,tags:["equipment"]}),M3=ie({name:"Twinblade Band EX",assetName:"TwinbladeBand",rarity:"rare",description:"A ring that enables double attacks.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"}],abilities:[{type:"Ability",id:"EveryOtherTurnDoubleAttack"}],requiredLevel:141,sellPrice:250,tags:["equipment"]}),L3=ie({name:"Watcher’s Spark",assetName:"WatchersSpark",rarity:"rare",description:"When an enemy falls, smite the next with Lightning.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Defense",value:40,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.05,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.03,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnEnemyDeath"}],requiredLevel:53,sellPrice:125,tags:["equipment"]}),R3=ie({name:"Watcher’s Spark EX",assetName:"WatchersSpark",rarity:"rare",description:"When an enemy falls, smite the next with Lightning.",equipSlots:["Ring"],statModifiers:[{type:"StatModifier",stat:"Defense",value:80,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.055,modifierType:"add"},{type:"StatModifier",stat:"LightningResist",value:.03,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnEnemyDeath"}],requiredLevel:83,sellPrice:275,tags:["equipment"]}),P3=ie({name:"Adventurer’s Blade Lvl 1",assetName:"AdventurersBlade",rarity:"uncommon",description:"A clean blade that boosts Speed.",equipSlots:["Weapon"],damage:{physical:20},statModifiers:[{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"}],requiredLevel:12,sellPrice:50,upgrades:[{requires:[{id:"EssenceFluffy",amount:6},{id:"Ore",amount:250},{id:"EssenceCrunchy",amount:22}],yields:"AdventurersBlade2"}],tags:["equipment"]}),B3=ie({name:"Adventurer’s Blade Lvl 2",assetName:"AdventurersBlade",rarity:"uncommon",description:"A clean blade that boosts Speed.",equipSlots:["Weapon"],damage:{physical:41},statModifiers:[{type:"StatModifier",stat:"Speed",value:3,modifierType:"add"}],requiredLevel:17,sellPrice:85,upgrades:[{requires:[{id:"Iron",amount:525},{id:"EssenceCrunchy",amount:22},{id:"EssenceFluffy",amount:8}],yields:"AdventurersBlade3"}],tags:["equipment"]}),D3=ie({name:"Adventurer’s Blade Lvl 3",assetName:"AdventurersBlade",rarity:"uncommon",description:"A clean blade that boosts Speed.",equipSlots:["Weapon"],damage:{physical:67},statModifiers:[{type:"StatModifier",stat:"Speed",value:4,modifierType:"add"}],requiredLevel:23,sellPrice:130,tags:["equipment"]}),F3=ie({name:"Battered Broadsword",assetName:"BatteredBroadsword",rarity:"common",description:"A hefty broadsword for offense and defense.",equipSlots:["Weapon"],damage:{physical:35},statModifiers:[{type:"StatModifier",stat:"Defense",value:35,modifierType:"add"}],requiredLevel:30,sellPrice:50,tags:["equipment"]}),I3=ie({name:"Battleready Blade Lvl 1",assetName:"BattlereadyBlade",rarity:"uncommon",description:"A reliable weapon that gives the wielder HP. Has an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:23},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:36,modifierType:"add"}],sellPrice:40,upgrades:[{requires:[{id:"Ore",amount:45},{id:"Stone",amount:45},{id:"EssenceSpicy",amount:6}],yields:"BattleReadyBladeUltimate"}],tags:["equipment"]}),O3=ie({name:"Battleready Blade Ultimate",assetName:"BattlereadyBlade",rarity:"uncommon",description:"A reliable weapon that gives the wielder HP and heals on first turn.",equipSlots:["Weapon"],damage:{physical:28},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:45,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnFirstTurn"}],sellPrice:60,tags:["equipment"]}),N3=ie({name:"Berserker Axe Lvl 1",assetName:"BerserkerAxe",rarity:"epic",description:"A crushing axe with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:70},statModifiers:[{type:"StatModifier",stat:"Defense",value:-25,modifierType:"add"}],requiredLevel:36,sellPrice:120,upgrades:[{requires:[{id:"Ore",amount:355},{id:"Stone",amount:490},{id:"EssenceChewy",amount:38}],yields:"BerserkerAxe2"}],tags:["equipment"]}),G3=ie({name:"Berserker Axe Lvl 2",assetName:"BerserkerAxe",rarity:"epic",description:"A crushing axe with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:87},statModifiers:[{type:"StatModifier",stat:"Defense",value:-15,modifierType:"add"}],requiredLevel:42,sellPrice:300,upgrades:[{requires:[{id:"Ore",amount:900},{id:"Stone",amount:800},{id:"EssenceChewy",amount:75}],yields:"BerserkerAxeUltimate"}],tags:["equipment"]}),H3=ie({name:"Berserker Axe Ultimate",assetName:"BerserkerAxe",rarity:"legendary",description:"Crush your enemies with boosted ATK while your health is full.",equipSlots:["Weapon"],damage:{physical:111},statModifiers:[{type:"StatModifier",stat:"Defense",value:-10,modifierType:"add"}],abilities:[{type:"Ability",id:"BoostAttackOnHighHP"}],requiredLevel:50,sellPrice:500,tags:["equipment"]}),k3=ie({name:"Blazing Shortsword",assetName:"BlazingShortsword",rarity:"uncommon",description:"A fiery shortsword for hacking down enemies.",equipSlots:["Weapon"],damage:{fire:15},statModifiers:[{type:"StatModifier",stat:"FireResist",value:.04,modifierType:"add"}],sellPrice:55,tags:["equipment"]}),U3=ie({name:"Bloodseeker",assetName:"Bloodseeker",rarity:"epic",description:"A dark blade that yearns for blood, and hides an unlockable Ability.",equipSlots:["Weapon"],damage:{shadow:25},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:-120,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"}],requiredLevel:71,sellPrice:50,upgrades:[{requires:[{id:"EssenceDecadent",amount:70},{id:"Ore",amount:2100},{id:"Wood",amount:2100}],yields:"BloodseekerUltimate"}],tags:["equipment"]}),V3=ie({name:"Bloodseeker Ultimate",assetName:"Bloodseeker",rarity:"epic",description:"A dark blade that yearns for blood. Boosts Crit when the wielder is hurt.",equipSlots:["Weapon"],damage:{shadow:32},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:-180,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.035,modifierType:"add"}],abilities:[{type:"Ability",id:"LowHpCritBoostAbility"}],requiredLevel:75,sellPrice:170,tags:["equipment"]}),Y3=ie({name:"Blunt Bludgeon Lvl 1",assetName:"BluntBludgeon",rarity:"uncommon",description:"A basic bludgeon that boosts HP.",equipSlots:["Weapon"],damage:{physical:22},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:12,modifierType:"add"}],requiredLevel:8,sellPrice:50,upgrades:[{requires:[{id:"Iron",amount:40},{id:"Stone",amount:35}],yields:"BluntBludgeon2"}],tags:["equipment"]}),X3=ie({name:"Blunt Bludgeon Lvl 2",assetName:"BluntBludgeon",rarity:"uncommon",description:"A basic bludgeon that boosts HP.",equipSlots:["Weapon"],damage:{physical:34},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:22,modifierType:"add"}],requiredLevel:14,sellPrice:50,upgrades:[{requires:[{id:"Iron",amount:200},{id:"Stone",amount:200}],yields:"BluntBludgeon3"}],tags:["equipment"]}),z3=ie({name:"Blunt Bludgeon Lvl 3",assetName:"BluntBludgeon",rarity:"uncommon",description:"A basic bludgeon that boosts HP.",equipSlots:["Weapon"],damage:{physical:54},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:40,modifierType:"add"}],requiredLevel:25,sellPrice:90,tags:["equipment"]}),W3=ie({name:"Brutal Blade Lvl 1",assetName:"BrutalBlade",rarity:"uncommon",description:"A merciless blade with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:32},requiredLevel:15,sellPrice:50,upgrades:[{requires:[{id:"Ore",amount:50},{id:"Stone",amount:20}],yields:"BrutalBlade2"}],tags:["equipment"]}),j3=ie({name:"Brutal Blade Lvl 2",assetName:"BrutalBlade",rarity:"uncommon",description:"A merciless blade with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:44},requiredLevel:20,sellPrice:70,upgrades:[{requires:[{id:"Iron",amount:180},{id:"Stone",amount:220}],yields:"BrutalBladeUltimate"}],tags:["equipment"]}),K3=ie({name:"Brutal Blade Ultimate",assetName:"BrutalBlade",rarity:"uncommon",description:"A merciless blade that summons a Magic Knife on Crit.",equipSlots:["Weapon"],damage:{physical:66},abilities:[{type:"Ability",id:"MagicKnifeOnCrit"}],requiredLevel:30,sellPrice:100,tags:["equipment"]}),$3=ie({name:"Buccaneer’s Friend Lvl 1",assetName:"BuccaneersFriend",rarity:"epic",description:"A swashbuckling blade that infuses its bearer with improved Crit and Dodge.",equipSlots:["Weapon"],damage:{physical:100},statModifiers:[{type:"StatModifier",stat:"Crit",value:.03,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.03,modifierType:"add"}],requiredLevel:81,sellPrice:175,upgrades:[{requires:[{id:"Stone",amount:700},{id:"Iron",amount:300},{id:"EssenceChewy",amount:19}],yields:"BuccaneersFriend2"}],tags:["equipment"]}),Q3=ie({name:"Buccaneer’s Friend Lvl 2",assetName:"BuccaneersFriend",rarity:"epic",description:"A swashbuckling blade that infuses its bearer with improved Crit and Dodge.",equipSlots:["Weapon"],damage:{physical:109},statModifiers:[{type:"StatModifier",stat:"Crit",value:.0325,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.03,modifierType:"add"}],requiredLevel:85,sellPrice:225,upgrades:[{requires:[{id:"Stone",amount:880},{id:"Iron",amount:430},{id:"EssenceChewy",amount:32}],yields:"BuccaneersFriend3"}],tags:["equipment"]}),J3=ie({name:"Buccaneer’s Friend Lvl 3",assetName:"BuccaneersFriend",rarity:"epic",description:"A swashbuckling blade that infuses its bearer with improved Crit and Dodge.",equipSlots:["Weapon"],damage:{physical:121},statModifiers:[{type:"StatModifier",stat:"Crit",value:.035,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.03,modifierType:"add"}],requiredLevel:90,sellPrice:260,tags:["equipment"]}),Z3=ie({name:"Charged Falchion",assetName:"ChargedFalchion",rarity:"rare",description:"A quick blade that smites your foes every turn.",equipSlots:["Weapon"],damage:{physical:5},abilities:[{type:"Ability",id:"LightningOnTurnStart"}],sellPrice:45,tags:["equipment"]}),q3=ie({name:"Chipped Shortsword",assetName:"ChippedShortsword",rarity:"common",description:"An old shortsword for hacking down enemies.",equipSlots:["Weapon"],damage:{physical:14},sellPrice:20,tags:["equipment"]}),_3=ie({name:"Cursed Naginata",assetName:"CursedNaginata",rarity:"legendary",description:"A blade that reduces health, but grants additional attacks, and frequent healing.",equipSlots:["Weapon"],damage:{physical:85},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:-400,modifierType:"add"}],abilities:[{type:"Ability",id:"EveryOtherTurnDoubleAttack"},{type:"Ability",id:"HealEveryHitCount"}],requiredLevel:121,sellPrice:900,tags:["equipment"]}),eR=ie({name:"Dark Shortsword",assetName:"DarkShortsword",rarity:"uncommon",description:"An shadowy shortsword for hacking down enemies.",equipSlots:["Weapon"],damage:{shadow:15},statModifiers:[{type:"StatModifier",stat:"ShadowResist",value:.04,modifierType:"add"}],sellPrice:55,tags:["equipment"]}),tR=ie({name:"Dark Ward Lvl 1",assetName:"DarkWard",rarity:"legendary",description:"A fabled sword which protects the wielder from shadow and phyical damage.",equipSlots:["Weapon"],damage:{physical:46},statModifiers:[{type:"StatModifier",stat:"Defense",value:15,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.025,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.15,modifierType:"add"}],requiredLevel:10,sellPrice:150,upgrades:[{requires:[{id:"Wood",amount:50},{id:"Ore",amount:50},{id:"EssenceSpicy",amount:3}],yields:"DarkWard2"}],tags:["equipment"]}),iR=ie({name:"Dark Ward Lvl 2",assetName:"DarkWard",rarity:"legendary",description:"A fabled sword which protects the wielder from shadow and phyical damage.",equipSlots:["Weapon"],damage:{physical:49},statModifiers:[{type:"StatModifier",stat:"Defense",value:22,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.025,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.15,modifierType:"add"}],requiredLevel:12,sellPrice:180,upgrades:[{requires:[{id:"Wood",amount:75},{id:"Ore",amount:75},{id:"EssenceSpicy",amount:5}],yields:"DarkWard3"}],tags:["equipment"]}),sR=ie({name:"Dark Ward Lvl 3",assetName:"DarkWard",rarity:"legendary",description:"A fabled sword which protects the wielder from shadow and phyical damage.",equipSlots:["Weapon"],damage:{physical:56},statModifiers:[{type:"StatModifier",stat:"Defense",value:29,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.025,modifierType:"add"},{type:"StatModifier",stat:"ShadowResist",value:.15,modifierType:"add"}],requiredLevel:14,sellPrice:225,tags:["equipment"]}),aR=ie({name:"Double Pole Axe Lvl 1",assetName:"DoublePoleAxe",rarity:"epic",description:"A two-headed axe with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:44},requiredLevel:58,sellPrice:140,upgrades:[{requires:[{id:"Iron",amount:450},{id:"Wood",amount:450},{id:"EssenceTangy",amount:15}],yields:"DoublePoleAxe2"}],tags:["equipment"]}),nR=ie({name:"Double Pole Axe Lvl 2",assetName:"DoublePoleAxe",rarity:"epic",description:"A two-headed axe with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:60},requiredLevel:61,sellPrice:275,upgrades:[{requires:[{id:"Iron",amount:1200},{id:"Wood",amount:1200},{id:"EssenceTangy",amount:25}],yields:"DoublePoleAxeUltimate"}],tags:["equipment"]}),rR=ie({name:"Double Pole Axe Ultimate",assetName:"DoublePoleAxe",rarity:"legendary",description:"A two-headed axe that hits twice every second turn.",equipSlots:["Weapon"],damage:{physical:78},abilities:[{type:"Ability",id:"EveryOtherTurnDoubleAttack"}],requiredLevel:61,sellPrice:500,tags:["equipment"]}),oR=ie({name:"Draining Edge",assetName:"DrainingEdge",rarity:"uncommon",description:"A swift blade that grants Lifesteal On Attack.",equipSlots:["Weapon"],damage:{physical:100},statModifiers:[{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"}],abilities:[{type:"Ability",id:"LifeStealOnAttack"}],requiredLevel:101,sellPrice:200,tags:["equipment"]}),lR=ie({name:"Duskbringer Lvl 1",assetName:"Duskbringer",rarity:"epic",description:"A mysterious blade which deals Shadow damage.",equipSlots:["Weapon"],damage:{shadow:31},requiredLevel:36,sellPrice:105,upgrades:[{requires:[{id:"Ore",amount:1400},{id:"EssenceSpicy",amount:27},{id:"EssenceCrunchy",amount:66}],yields:"Duskbringer2"}],tags:["equipment"]}),hR=ie({name:"Duskbringer Lvl 2",assetName:"Duskbringer",rarity:"epic",description:"A mysterious blade which deals Shadow damage.",equipSlots:["Weapon"],damage:{shadow:36},requiredLevel:40,sellPrice:200,upgrades:[{requires:[{id:"Ore",amount:4300},{id:"EssenceSpicy",amount:48},{id:"EssenceCrunchy",amount:88}],yields:"Duskbringer3"}],tags:["equipment"]}),dR=ie({name:"Duskbringer Lvl 3",assetName:"Duskbringer",rarity:"epic",description:"A mysterious blade which deals Shadow Damage.",equipSlots:["Weapon"],damage:{shadow:44},requiredLevel:47,sellPrice:320,tags:["equipment"]}),uR=ie({name:"Electric Shortsword",assetName:"ElectricShortsword",rarity:"uncommon",description:"An electrified shortsword for hacking down enemies.",equipSlots:["Weapon"],damage:{lightning:15},statModifiers:[{type:"StatModifier",stat:"LightningResist",value:.04,modifierType:"add"}],sellPrice:55,tags:["equipment"]}),cR=ie({name:"Eternity Mace Lvl 1",assetName:"EternityMace",rarity:"legendary",description:"Heal for a small amount of damage dealt every attack.",equipSlots:["Weapon"],damage:{physical:64},abilities:[{type:"Ability",id:"LifeStealOnAttack"}],requiredLevel:63,sellPrice:300,upgrades:[{requires:[{id:"Ore",amount:2500},{id:"Wood",amount:2500},{id:"EssenceFresh",amount:66}],yields:"EternityMace2"}],tags:["equipment"]}),fR=ie({name:"Eternity Mace Lvl 2",assetName:"EternityMace",rarity:"legendary",description:"Heal for a small amount of damage dealt every attack.",equipSlots:["Weapon"],damage:{physical:88},abilities:[{type:"Ability",id:"LifeStealOnAttack"}],requiredLevel:69,sellPrice:450,upgrades:[{requires:[{id:"Ore",amount:4e3},{id:"Wood",amount:4e3},{id:"EssenceFresh",amount:84}],yields:"EternityMace3"}],tags:["equipment"]}),mR=ie({name:"Eternity Mace Lvl 3",assetName:"EternityMace",rarity:"legendary",description:"Heal for a small amount of damage dealt every attack.",equipSlots:["Weapon"],damage:{physical:123},abilities:[{type:"Ability",id:"LifeStealOnAttack"}],requiredLevel:77,sellPrice:800,tags:["equipment"]}),gR=ie({name:"A-27 Fangblade",assetName:"A27Fangblade",rarity:"epic",description:"A machine-tooled blade that heals when making precise strikes.",equipSlots:["Weapon"],damage:{physical:93},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:60,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnCritAbility"}],requiredLevel:121,sellPrice:500,tags:["equipment"]}),pR=ie({name:"A-27 Fangblade EX",assetName:"A27Fangblade",rarity:"epic",description:"A machine-tooled blade that heals when making precise strikes.",equipSlots:["Weapon"],damage:{physical:105},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:110,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnCritAbility"},{type:"Ability",id:"LowHpCritBoostAbility"}],requiredLevel:141,sellPrice:750,tags:["equipment"]}),vR=ie({name:"Fatal Farewell",assetName:"FatalFarewell",rarity:"rare",description:"A charged blade that summons Lightning when an enemy dies.",equipSlots:["Weapon"],damage:{physical:24},abilities:[{type:"Ability",id:"LightningOnEnemyDeath"}],requiredLevel:18,sellPrice:40,tags:["equipment"]}),yR=ie({name:"Flameguard Sword Lvl 1",assetName:"FlameguardSword",rarity:"rare",description:"A sturdy sword that resists Fire damage.",equipSlots:["Weapon"],damage:{physical:63},statModifiers:[{type:"StatModifier",stat:"FireResist",value:.05,modifierType:"add"}],requiredLevel:50,sellPrice:110,upgrades:[{requires:[{id:"Iron",amount:650},{id:"EssenceTangy",amount:8},{id:"EssenceChewy",amount:33}],yields:"FlameguardSword2"}],tags:["equipment"]}),xR=ie({name:"Flameguard Sword Lvl 2",assetName:"FlameguardSword",rarity:"rare",description:"A sturdy sword that resists Fire damage.",equipSlots:["Weapon"],damage:{physical:78},statModifiers:[{type:"StatModifier",stat:"FireResist",value:.08,modifierType:"add"}],requiredLevel:50,sellPrice:140,upgrades:[{requires:[{id:"Iron",amount:1050},{id:"EssenceChewy",amount:22},{id:"EssenceTangy",amount:16}],yields:"FlameguardSword3"}],tags:["equipment"]}),wR=ie({name:"Flameguard Sword Lvl 3",assetName:"FlameguardSword",rarity:"rare",description:"A sturdy sword that resists Fire damage.",equipSlots:["Weapon"],damage:{physical:97},statModifiers:[{type:"StatModifier",stat:"FireResist",value:.12,modifierType:"add"}],requiredLevel:60,sellPrice:180,tags:["equipment"]}),SR=ie({name:"Forgefang Lvl 1",assetName:"Forgefang",rarity:"rare",description:"A fire-forged blade that wards against the looming shadows.",equipSlots:["Weapon"],damage:{fire:22},statModifiers:[{type:"StatModifier",stat:"ShadowResist",value:.05,modifierType:"add"}],requiredLevel:14,sellPrice:50,upgrades:[{requires:[{id:"Ore",amount:15},{id:"EssenceSpicy",amount:5}],yields:"Forgefang2"}],tags:["equipment"]}),TR=ie({name:"Forgefang Lvl 2",assetName:"Forgefang",rarity:"rare",description:"A fire-forged blade that wards against the looming shadows.",equipSlots:["Weapon"],damage:{fire:32},statModifiers:[{type:"StatModifier",stat:"ShadowResist",value:.08,modifierType:"add"}],requiredLevel:18,sellPrice:70,tags:["equipment"]}),CR=ie({name:"Fragment Of The Great Sword",assetName:"FragmentOfTheGreatSword",rarity:"rare",description:"The shattered remnant of a fabled weapon.",equipSlots:["Weapon"],damage:{physical:25},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:25,modifierType:"add"},{type:"StatModifier",stat:"Attack",value:10,modifierType:"add"},{type:"StatModifier",stat:"Defense",value:5,modifierType:"add"}],sellPrice:50,tags:["equipment"]}),AR=ie({name:"Frozen Shortsword",assetName:"FrozenShortsword",rarity:"uncommon",description:"An icy shortsword for hacking down enemies.",equipSlots:["Weapon"],damage:{ice:15},statModifiers:[{type:"StatModifier",stat:"IceResist",value:.04,modifierType:"add"}],sellPrice:55,tags:["equipment"]}),bR=ie({name:"Fury Blade Lvl 1",assetName:"FuryBlade",rarity:"rare",description:"A brutal blade with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:66},requiredLevel:61,sellPrice:105,upgrades:[{requires:[{id:"Iron",amount:300},{id:"Stone",amount:350},{id:"EssenceTangy",amount:19}],yields:"FuryBlade2"}],tags:["equipment"]}),ER=ie({name:"Fury Blade Lvl 2",assetName:"FuryBlade",rarity:"rare",description:"A brutal blade with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:74},requiredLevel:68,sellPrice:150,upgrades:[{requires:[{id:"Iron",amount:700},{id:"EssenceTangy",amount:36},{id:"Stone",amount:750}],yields:"FuryBlade3"}],tags:["equipment"]}),MR=ie({name:"Fury Blade Lvl 3",assetName:"FuryBlade",rarity:"rare",description:"A brutal blade that feeds your Rage every other turn and adds a small Defense boost.",equipSlots:["Weapon"],damage:{physical:88},statModifiers:[{type:"StatModifier",stat:"Defense",value:35,modifierType:"add"}],abilities:[{type:"Ability",id:"EveryOtherTurnAddRage"}],requiredLevel:74,sellPrice:180,tags:["equipment"]}),LR=ie({name:"Glacial Shard Lvl 1",assetName:"GlacialShard",rarity:"uncommon",description:"A jagged blade fashioned from ice.",equipSlots:["Weapon"],damage:{ice:21},statModifiers:[{type:"StatModifier",stat:"FireResist",value:-.03,modifierType:"add"}],requiredLevel:25,sellPrice:80,upgrades:[{requires:[{id:"Stone",amount:400},{id:"Ore",amount:400},{id:"EssenceTangy",amount:12}],yields:"GlacialShard2"}],tags:["equipment"]}),RR=ie({name:"Glacial Shard Lvl 2",assetName:"GlacialShard",rarity:"uncommon",description:"A jagged blade fashioned from ice.",equipSlots:["Weapon"],damage:{ice:31},requiredLevel:32,sellPrice:90,tags:["equipment"]}),PR=ie({name:"Hateful Darkness",assetName:"HatefulDarkness",rarity:"legendary",description:"A sword forged of darkness to strike down foes.",equipSlots:["Weapon"],damage:{shadow:15},statModifiers:[{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.035,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnHitCount"}],requiredLevel:18,sellPrice:150,tags:["equipment"]}),BR=ie({name:"Hateful Darkness EX",assetName:"HatefulDarkness",rarity:"legendary",description:"A sword forged of darkness to strike down foes.",equipSlots:["Weapon"],damage:{shadow:28},statModifiers:[{type:"StatModifier",stat:"Crit",value:.03,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.045,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnHitCount"}],requiredLevel:54,sellPrice:270,tags:["equipment"]}),DR=ie({name:"Hero’s Long Sword Lvl 1",assetName:"HerosLongSword",rarity:"epic",description:"A fabled blade with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:55},abilities:[{type:"Ability",id:"LightningOnCrit"}],requiredLevel:48,sellPrice:165,upgrades:[{requires:[{id:"Ore",amount:1200},{id:"Wood",amount:1200},{id:"EssenceSpicy",amount:22}],yields:"HerosLongSword2"}],tags:["equipment"]}),FR=ie({name:"Hero’s Long Sword Lvl 2",assetName:"HerosLongSword",rarity:"epic",description:"A fabled blade  with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:89},abilities:[{type:"Ability",id:"LightningOnCrit"}],requiredLevel:54,sellPrice:250,upgrades:[{requires:[{id:"EssenceSpicy",amount:55},{id:"Ore",amount:1950},{id:"Wood",amount:1950}],yields:"HerosLongSwordUltimate"}],tags:["equipment"]}),IR=ie({name:"Hero’s Long Sword Ultimate",assetName:"HerosLongSword",rarity:"legendary",description:"A fabled blade that adds a Lightning Bolt on Crit.",equipSlots:["Weapon"],damage:{physical:124},statModifiers:[{type:"StatModifier",stat:"Crit",value:.025,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnCrit"}],requiredLevel:62,sellPrice:275,tags:["equipment"]}),OR=ie({name:"Inferno Caller",assetName:"InfernoCaller",rarity:"legendary",description:"A fiery weapon that when health is low, fills the wielder with a fierce heat that boost Crit.",equipSlots:["Weapon"],damage:{fire:35},statModifiers:[{type:"StatModifier",stat:"Crit",value:.07,modifierType:"add"},{type:"StatModifier",stat:"IceResist",value:.05,modifierType:"add"}],abilities:[{type:"Ability",id:"LowHpCritBoostAbility"}],requiredLevel:38,sellPrice:200,tags:["equipment"]}),NR=ie({name:"Inferno Caller EX",assetName:"InfernoCaller",rarity:"legendary",description:"A fiery weapon that when health is low, fills the wielder with a fierce heat that boost Crit.",equipSlots:["Weapon"],damage:{fire:48},statModifiers:[{type:"StatModifier",stat:"Crit",value:.09,modifierType:"add"},{type:"StatModifier",stat:"IceResist",value:.1,modifierType:"add"}],abilities:[{type:"Ability",id:"LowHpCritBoostAbility"}],requiredLevel:101,sellPrice:450,tags:["equipment"]}),GR=ie({name:"Phantom Blade Sword",assetName:"PhantomBladeSword",rarity:"rare",description:"This blade launches a Magic Knife at the enemy when attacking.",equipSlots:["Weapon"],damage:{physical:20},statModifiers:[{type:"StatModifier",stat:"Crit",value:.035,modifierType:"add"}],abilities:[{type:"Ability",id:"KnifeOnAttack"}],requiredLevel:6,sellPrice:55,tags:["equipment"]}),HR=ie({name:"Phantom Edge",assetName:"PhantomEdge",rarity:"uncommon",description:"A swift blade that throws a Magic Knife on Attack.",equipSlots:["Weapon"],damage:{physical:100},statModifiers:[{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"}],abilities:[{type:"Ability",id:"KnifeOnAttack"}],requiredLevel:101,sellPrice:200,tags:["equipment"]}),kR=ie({name:"Piercing Blade Lvl 1",assetName:"PiercingBlade",rarity:"rare",description:"A penetrating blade that delivers high damage.",equipSlots:["Weapon"],damage:{physical:33},requiredLevel:25,sellPrice:70,upgrades:[{requires:[{id:"Iron",amount:250},{id:"EssenceTangy",amount:15},{id:"Wood",amount:150}],yields:"PiercingBlade2"}],tags:["equipment"]}),UR=ie({name:"Piercing Blade Lvl 2",assetName:"PiercingBlade",rarity:"rare",description:"A penetrating blade that delivers high damage.",equipSlots:["Weapon"],damage:{physical:65},statModifiers:[{type:"StatModifier",stat:"Dodge",value:.01,modifierType:"add"}],requiredLevel:36,sellPrice:105,upgrades:[{requires:[{id:"Iron",amount:460},{id:"Wood",amount:140},{id:"EssenceTangy",amount:25}],yields:"PiercingBlade3"}],tags:["equipment"]}),VR=ie({name:"Piercing Blade Lvl 3",assetName:"PiercingBlade",rarity:"rare",description:"A penetrating blade that delivers high damage.",equipSlots:["Weapon"],damage:{physical:114},statModifiers:[{type:"StatModifier",stat:"Dodge",value:.015,modifierType:"add"}],requiredLevel:43,sellPrice:135,tags:["equipment"]}),YR=ie({name:"Plowshare Lvl 1",assetName:"Plowshare",rarity:"epic",description:"A repurposed tool for harvesting defeat from your foes.",equipSlots:["Weapon"],damage:{physical:135},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:200,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnEnemyDeath"},{type:"Ability",id:"SecondWindAbility"}],requiredLevel:121,sellPrice:300,upgrades:[{requires:[{id:"Ore",amount:800},{id:"Stone",amount:500},{id:"EssenceCreamy",amount:22}],yields:"Plowshare2"}],tags:["equipment"]}),XR=ie({name:"Plowshare Lvl 2",assetName:"Plowshare",rarity:"epic",description:"A repurposed tool for harvesting defeat from your foes.",equipSlots:["Weapon"],damage:{physical:141},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:235,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnEnemyDeath"},{type:"Ability",id:"SecondWindAbility"}],requiredLevel:124,sellPrice:340,upgrades:[{requires:[{id:"Ore",amount:1050},{id:"Stone",amount:700},{id:"EssenceCreamy",amount:40}],yields:"Plowshare3"}],tags:["equipment"]}),zR=ie({name:"Plowshare Lvl 3",assetName:"Plowshare",rarity:"epic",description:"A repurposed tool for harvesting defeat from your foes.",equipSlots:["Weapon"],damage:{physical:150},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:280,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnEnemyDeath"},{type:"Ability",id:"SecondWindAbility"}],requiredLevel:127,sellPrice:400,tags:["equipment"]}),WR=ie({name:"Rough Razor Lvl 1",assetName:"RoughRazor",rarity:"common",description:"A cut-throat blade for dispatching foes.",equipSlots:["Weapon"],damage:{physical:56},requiredLevel:36,sellPrice:50,upgrades:[{requires:[{id:"Stone",amount:240},{id:"Wood",amount:240},{id:"EssenceChewy",amount:8}],yields:"RoughRazor2"}],tags:["equipment"]}),jR=ie({name:"Rough Razor Lvl 2",assetName:"RoughRazor",rarity:"common",description:"A cut-throat blade for dispatching foes.",equipSlots:["Weapon"],damage:{physical:71},requiredLevel:36,sellPrice:90,upgrades:[{requires:[{id:"Stone",amount:300},{id:"Wood",amount:250},{id:"EssenceChewy",amount:18}],yields:"RoughRazor3"}],tags:["equipment"]}),KR=ie({name:"Rough Razor Lvl 3",assetName:"RoughRazor",rarity:"common",description:"A cut-throat blade for dispatching foes.",equipSlots:["Weapon"],damage:{physical:88},requiredLevel:36,sellPrice:125,tags:["equipment"]}),$R=ie({name:"Ruined Rod Lvl 1",assetName:"RuinedRod",rarity:"epic",description:"A makeshift weapon pulled from the rubble.",equipSlots:["Weapon"],damage:{physical:90},statModifiers:[{type:"StatModifier",stat:"Speed",value:-3,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.015,modifierType:"add"}],requiredLevel:28,sellPrice:105,upgrades:[{requires:[{id:"Stone",amount:180},{id:"Iron",amount:180},{id:"EssenceHearty",amount:6}],yields:"RuinedRod2"}],tags:["equipment"]}),QR=ie({name:"Ruined Rod Lvl 2",assetName:"RuinedRod",rarity:"epic",description:"A makeshift weapon pulled from the rubble.",equipSlots:["Weapon"],damage:{physical:96},statModifiers:[{type:"StatModifier",stat:"Speed",value:-3,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],requiredLevel:34,sellPrice:140,upgrades:[{requires:[{id:"Stone",amount:240},{id:"Iron",amount:220},{id:"EssenceHearty",amount:8}],yields:"RuinedRod3"}],tags:["equipment"]}),JR=ie({name:"Ruined Rod Lvl 3",assetName:"RuinedRod",rarity:"epic",description:"A makeshift weapon pulled from the rubble.",equipSlots:["Weapon"],damage:{physical:103},statModifiers:[{type:"StatModifier",stat:"Speed",value:-3,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.0275,modifierType:"add"}],requiredLevel:40,sellPrice:200,tags:["equipment"]}),ZR=ie({name:"Rustic Sword ",assetName:"RusticSword",rarity:"common",description:"A homemade sword with a wooden blade.",equipSlots:["Weapon"],damage:{physical:12},sellPrice:10,tags:["equipment"]}),qR=ie({name:"Salvation Scimitar Lvl 1",assetName:"SalvationScimitar",rarity:"epic",description:"A slicing blade with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:57},abilities:[{type:"Ability",id:"HealOnCritAbility"}],requiredLevel:61,sellPrice:170,upgrades:[{requires:[{id:"Iron",amount:670},{id:"Wood",amount:670},{id:"EssenceFresh",amount:13}],yields:"SalvationScimitar2"}],tags:["equipment"]}),_R=ie({name:"Salvation Scimitar Lvl 2",assetName:"SalvationScimitar",rarity:"epic",description:"A slicing blade with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:81},abilities:[{type:"Ability",id:"HealOnCritAbility"}],requiredLevel:67,sellPrice:275,upgrades:[{requires:[{id:"Iron",amount:1200},{id:"Wood",amount:1200},{id:"EssenceFresh",amount:50}],yields:"SalvationScimitarUltimate"}],tags:["equipment"]}),e5=ie({name:"Salvation Scimitar Ultimate",assetName:"SalvationScimitar",rarity:"legendary",description:"Heals a small amount on every Crit.",equipSlots:["Weapon"],damage:{physical:120},statModifiers:[{type:"StatModifier",stat:"Crit",value:.01,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnCritAbility"}],requiredLevel:73,sellPrice:275,tags:["equipment"]}),t5=ie({name:"Sawtooth Axe Lvl 1",assetName:"SawtoothAxe",rarity:"uncommon",description:"A heavy axe that improves Crit rate.",equipSlots:["Weapon"],damage:{physical:43},statModifiers:[{type:"StatModifier",stat:"Crit",value:.005,modifierType:"add"}],requiredLevel:35,sellPrice:50,upgrades:[{requires:[{id:"Iron",amount:225},{id:"Stone",amount:125},{id:"EssenceTangy",amount:3}],yields:"SawtoothAxe2"}],tags:["equipment"]}),i5=ie({name:"Sawtooth Axe Lvl 2",assetName:"SawtoothAxe",rarity:"uncommon",description:"A heavy axe that improves Crit rate.",equipSlots:["Weapon"],damage:{physical:62},statModifiers:[{type:"StatModifier",stat:"Crit",value:.007,modifierType:"add"}],requiredLevel:42,sellPrice:50,upgrades:[{requires:[{id:"Iron",amount:450},{id:"Stone",amount:480},{id:"EssenceTangy",amount:14}],yields:"SawtoothAxe3"}],tags:["equipment"]}),s5=ie({name:"Sawtooth Axe Lvl 3",assetName:"SawtoothAxe",rarity:"uncommon",description:"A heavy axe that improves Crit rate.",equipSlots:["Weapon"],damage:{physical:90},statModifiers:[{type:"StatModifier",stat:"Crit",value:.01,modifierType:"add"}],requiredLevel:48,sellPrice:140,tags:["equipment"]}),a5=ie({name:"Scarsteel Lvl 1",assetName:"Scarsteel",rarity:"epic",description:"A battered blade awarded to veterans of the Closed Beta.",equipSlots:["Weapon"],damage:{physical:28},statModifiers:[{type:"StatModifier",stat:"Crit",value:.01,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnRage"}],sellPrice:1,upgrades:[{requires:[{id:"EssenceCrunchy",amount:22},{id:"Ore",amount:220},{id:"Wood",amount:440}],yields:"Scarsteel2"}],tags:["equipment"]}),n5=ie({name:"Scarsteel Lvl 2",assetName:"Scarsteel",rarity:"epic",description:"A battered blade awarded to veterans of the Closed Beta.",equipSlots:["Weapon"],damage:{physical:50},statModifiers:[{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnRage"}],sellPrice:1,upgrades:[{requires:[{id:"EssenceCrunchy",amount:88},{id:"Wood",amount:1200},{id:"Ore",amount:500}],yields:"ScarsteelUltimate"}],tags:["equipment"]}),r5=ie({name:"Scarsteel Ultimate",assetName:"Scarsteel",rarity:"epic",description:"A battered blade awarded to veterans of the Closed Beta.",equipSlots:["Weapon"],damage:{physical:120},statModifiers:[{type:"StatModifier",stat:"Crit",value:.03,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnRage"}],sellPrice:1,tags:["equipment"]}),o5=ie({name:"Serrated Sword Lvl 1",assetName:"SerratedSword",rarity:"common",description:"A sword with some real bite.",equipSlots:["Weapon"],damage:{physical:28},sellPrice:20,upgrades:[{requires:[{id:"Iron",amount:120},{id:"Ore",amount:120},{id:"EssenceChewy",amount:5}],yields:"SerratedSword2"}],tags:["equipment"]}),l5=ie({name:"Serrated Sword Lvl 2",assetName:"SerratedSword",rarity:"common",description:"A sword with some real bite.",equipSlots:["Weapon"],damage:{physical:44},requiredLevel:23,sellPrice:65,upgrades:[{requires:[{id:"Iron",amount:225},{id:"Ore",amount:200},{id:"EssenceChewy",amount:15}],yields:"SerratedSword3"}],tags:["equipment"]}),h5=ie({name:"Serrated Sword Lvl 3",assetName:"SerratedSword",rarity:"common",description:"A sword with some real bite.",equipSlots:["Weapon"],damage:{physical:62},requiredLevel:30,sellPrice:90,tags:["equipment"]}),d5=ie({name:"Shadow Slicer",assetName:"ShadowSlicer",rarity:"rare",description:"A slicing blade that deals swift and deadly Shadow damage.",equipSlots:["Weapon"],damage:{shadow:26},statModifiers:[{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.02,modifierType:"add"}],requiredLevel:36,sellPrice:80,tags:["equipment"]}),u5=ie({name:"Shatterblade Lvl 1",assetName:"Shatterblade",rarity:"epic",description:"A crystalline shard that reduces Defense.",equipSlots:["Weapon"],damage:{physical:68},statModifiers:[{type:"StatModifier",stat:"Defense",value:-25,modifierType:"add"}],requiredLevel:41,sellPrice:140,upgrades:[{requires:[{id:"Stone",amount:900},{id:"EssenceTangy",amount:35}],yields:"Shatterblade2"}],tags:["equipment"]}),c5=ie({name:"Shatterblade Lvl 2",assetName:"Shatterblade",rarity:"epic",description:"A crystalline shard that reduces Defense.",equipSlots:["Weapon"],damage:{physical:87},statModifiers:[{type:"StatModifier",stat:"Defense",value:-32,modifierType:"add"}],requiredLevel:51,sellPrice:180,upgrades:[{requires:[{id:"Stone",amount:1800},{id:"EssenceTangy",amount:56}],yields:"Shatterblade3"}],tags:["equipment"]}),f5=ie({name:"Shatterblade Lvl 3",assetName:"Shatterblade",rarity:"epic",description:"A crystalline shard that reduces Defense.",equipSlots:["Weapon"],damage:{physical:120},statModifiers:[{type:"StatModifier",stat:"Defense",value:-40,modifierType:"add"}],requiredLevel:61,sellPrice:220,tags:["equipment"]}),m5=ie({name:"Simple Cutlass Lvl 1",assetName:"SimpleCutlass",rarity:"common",description:"An old cutlass with a sharp edge.",equipSlots:["Weapon"],damage:{physical:15},sellPrice:20,upgrades:[{requires:[{id:"Iron",amount:30}],yields:"SimpleCutlass2"}],tags:["equipment"]}),g5=ie({name:"Simple Cutlass Lvl 2",assetName:"SimpleCutlass",rarity:"common",description:"An old cutlass with a sharp edge.",equipSlots:["Weapon"],damage:{physical:18},sellPrice:20,upgrades:[{requires:[{id:"Iron",amount:85}],yields:"SimpleCutlass3"}],tags:["equipment"]}),p5=ie({name:"Simple Cutlass Lvl 3",assetName:"SimpleCutlass",rarity:"common",description:"An old cutlass with a sharp edge.",equipSlots:["Weapon"],damage:{physical:24},sellPrice:30,tags:["equipment"]}),v5=ie({name:"Smiting Edge",assetName:"SmitingEdge",rarity:"uncommon",description:"A swift blade that grants Lightning On Attack.",equipSlots:["Weapon"],damage:{physical:100},statModifiers:[{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnAttack"}],requiredLevel:101,sellPrice:200,tags:["equipment"]}),y5=ie({name:"Souldrain Axe",assetName:"SouldrainAxe",rarity:"legendary",description:"A merciless icy axe that restores lifeforce from fallen enemies.",equipSlots:["Weapon"],damage:{ice:36},statModifiers:[{type:"StatModifier",stat:"Defense",value:50,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnEnemyDeath"}],requiredLevel:58,sellPrice:300,tags:["equipment"]}),x5=ie({name:"Souldrain Axe EX",assetName:"SouldrainAxe",rarity:"legendary",description:"A merciless ice axe which restore lifeforce from fallen enemies.",equipSlots:["Weapon"],damage:{ice:36},statModifiers:[{type:"StatModifier",stat:"Defense",value:85,modifierType:"add"}],abilities:[{type:"Ability",id:"HealOnEnemyDeath"}],requiredLevel:78,sellPrice:530,tags:["equipment"]}),w5=ie({name:"Sower’s Lament Lvl 1",assetName:"SowersLament",rarity:"legendary",description:"An axe whetted with the tears of a forgotten settler.",equipSlots:["Weapon"],damage:{physical:145},statModifiers:[{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"GainShieldOnHitCount"},{type:"Ability",id:"FireKnifeOnAttack"}],requiredLevel:141,sellPrice:400,upgrades:[{requires:[{id:"Wood",amount:800},{id:"Ore",amount:700},{id:"EssenceFresh",amount:22}],yields:"SowersLament2"}],tags:["equipment"]}),S5=ie({name:"Sower’s Lament Lvl 2",assetName:"SowersLament",rarity:"legendary",description:"An axe whetted with the tears of a forgotten settler.",equipSlots:["Weapon"],damage:{physical:150},statModifiers:[{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"GainShieldOnHitCount"},{type:"Ability",id:"FireKnifeOnAttack"}],requiredLevel:124,sellPrice:470,upgrades:[{requires:[{id:"Wood",amount:1100},{id:"Ore",amount:900},{id:"EssenceFresh",amount:30}],yields:"SowersLament3"}],tags:["equipment"]}),T5=ie({name:"Sower’s Lament Lvl 3",assetName:"SowersLament",rarity:"legendary",description:"An axe whetted with the tears of a forgotten settler.",equipSlots:["Weapon"],damage:{physical:158},statModifiers:[{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"GainShieldOnHitCount"},{type:"Ability",id:"FireKnifeOnAttack"}],requiredLevel:150,sellPrice:600,tags:["equipment"]}),C5=ie({name:"Stone Blade Lvl 1",assetName:"StoneBlade",rarity:"uncommon",description:"A deadly blade with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:17},sellPrice:25,upgrades:[{requires:[{id:"Stone",amount:130},{id:"EssenceSpicy",amount:24},{id:"Ore",amount:140}],yields:"StoneBlade2"}],tags:["equipment"]}),A5=ie({name:"Stone Blade Lvl 2",assetName:"StoneBlade",rarity:"uncommon",description:"A deadly blade with an unlockable Ability.",equipSlots:["Weapon"],damage:{physical:33},requiredLevel:15,sellPrice:50,upgrades:[{requires:[{id:"Stone",amount:280},{id:"Ore",amount:340},{id:"EssenceSpicy",amount:32}],yields:"StoneBladeUltimate"}],tags:["equipment"]}),b5=ie({name:"Stone Blade Ultimate",assetName:"StoneBlade",rarity:"uncommon",description:"A deadly blade that summons a Magic Knife when you unleash Rage.",equipSlots:["Weapon"],damage:{physical:54},statModifiers:[{type:"StatModifier",stat:"MaxHp",value:22,modifierType:"add"}],abilities:[{type:"Ability",id:"MagicKnifeOnRage"}],requiredLevel:22,sellPrice:90,tags:["equipment"]}),E5=ie({name:"Sturdy Cleaver Lvl 1",assetName:"SturdyCleaver",rarity:"common",description:"A tough blade for a tough job.",equipSlots:["Weapon"],damage:{physical:24},statModifiers:[{type:"StatModifier",stat:"Speed",value:-3,modifierType:"add"}],sellPrice:20,upgrades:[{requires:[{id:"Iron",amount:70},{id:"Wood",amount:60}],yields:"SturdyCleaver2"}],tags:["equipment"]}),M5=ie({name:"Sturdy Cleaver Lvl 2",assetName:"SturdyCleaver",rarity:"common",description:"A tough blade for a tough job.",equipSlots:["Weapon"],damage:{physical:35},statModifiers:[{type:"StatModifier",stat:"Speed",value:-2,modifierType:"add"}],sellPrice:40,upgrades:[{requires:[{id:"Iron",amount:200},{id:"Wood",amount:260}],yields:"SturdyCleaver3"}],tags:["equipment"]}),L5=ie({name:"Sturdy Cleaver Lvl 3",assetName:"SturdyCleaver",rarity:"common",description:"A tough blade for a tough job.",equipSlots:["Weapon"],damage:{physical:48},statModifiers:[{type:"StatModifier",stat:"Speed",value:-1,modifierType:"add"}],requiredLevel:21,sellPrice:80,tags:["equipment"]}),R5=ie({name:"Sudden Vengeance",assetName:"SuddenVengeance",rarity:"rare",description:"A ferocious blade that generates a Magic Knife on Rage.",equipSlots:["Weapon"],damage:{physical:31},abilities:[{type:"Ability",id:"MagicKnifeOnRage"}],requiredLevel:15,sellPrice:45,tags:["equipment"]}),P5=ie({name:"Surge Blade",assetName:"SurgeBlade",rarity:"epic",description:"A blade rippling with electrical potential.",equipSlots:["Weapon"],damage:{physical:25},statModifiers:[{type:"StatModifier",stat:"Speed",value:2,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.015,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.02,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnAttack"}],requiredLevel:6,sellPrice:100,tags:["equipment"]}),B5=ie({name:"Surge Blade EX",assetName:"SurgeBlade",rarity:"epic",description:"A blade rippling with electrical potential.",equipSlots:["Weapon"],damage:{physical:45},statModifiers:[{type:"StatModifier",stat:"Speed",value:3,modifierType:"add"},{type:"StatModifier",stat:"Crit",value:.02,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.025,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnAttack"}],requiredLevel:52,sellPrice:190,tags:["equipment"]}),D5=ie({name:"Sword Of Respite",assetName:"SwordOfRespite",rarity:"legendary",description:"A blade that protects when felling an enemy.",equipSlots:["Weapon"],damage:{physical:110},statModifiers:[{type:"StatModifier",stat:"Defense",value:75,modifierType:"add"}],abilities:[{type:"Ability",id:"GainShieldOnEnemyDeath"}],requiredLevel:63,sellPrice:500,tags:["equipment"]}),F5=ie({name:"Sword Of Respite EX",assetName:"SwordOfRespite",rarity:"legendary",description:"A blade that protects when felling an enemy.",equipSlots:["Weapon"],damage:{physical:125},statModifiers:[{type:"StatModifier",stat:"Defense",value:140,modifierType:"add"}],abilities:[{type:"Ability",id:"GainShieldOnEnemyDeath"}],requiredLevel:125,sellPrice:720,tags:["equipment"]}),I5=ie({name:"Vectra Edge",assetName:"VectraEdge",rarity:"legendary",description:"A hacked utility slicer which delivers a lightning bolt on attack.",equipSlots:["Weapon"],damage:{physical:95},statModifiers:[{type:"StatModifier",stat:"LightningResist",value:.18,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnAttack"}],requiredLevel:121,sellPrice:600,tags:["equipment"]}),O5=ie({name:"Vectra Edge EX",assetName:"VectraEdge",rarity:"legendary",description:"A hacked utility slicer which delivers a lightning bolt on attack and builds Rage.",equipSlots:["Weapon"],damage:{physical:105},statModifiers:[{type:"StatModifier",stat:"LightningResist",value:.23,modifierType:"add"}],abilities:[{type:"Ability",id:"LightningOnAttack"},{type:"Ability",id:"AddRageOnLightning"}],requiredLevel:141,sellPrice:200,tags:["equipment"]}),N5=ie({name:"Wasteland Blade",assetName:"WastelandBlade",rarity:"rare",description:"A rough and ready blade that spits a fire knife on turn start.",equipSlots:["Weapon"],damage:{physical:82},statModifiers:[{type:"StatModifier",stat:"FireResist",value:.15,modifierType:"add"}],abilities:[{type:"Ability",id:"FireKnifeOnTurnStart"}],requiredLevel:121,sellPrice:220,tags:["equipment"]}),G5=ie({name:"Wasteland Blade EX",assetName:"WastelandBlade",rarity:"rare",description:"A rough and ready blade that spits a fire knife on attack.",equipSlots:["Weapon"],damage:{physical:98},statModifiers:[{type:"StatModifier",stat:"FireResist",value:.2,modifierType:"add"}],abilities:[{type:"Ability",id:"FireKnifeOnAttack"}],requiredLevel:141,sellPrice:125,tags:["equipment"]}),H5=ie({name:"Wind Powered Blade Lvl 1",assetName:"WindPoweredBlade",rarity:"epic",description:"A broad blade recovered from a towering hilltop ruin.",equipSlots:["Weapon"],damage:{physical:150},statModifiers:[{type:"StatModifier",stat:"Speed",value:5,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.02,modifierType:"add"}],requiredLevel:121,sellPrice:350,upgrades:[{requires:[{id:"Stone",amount:800},{id:"Iron",amount:800},{id:"EssenceFluffy",amount:22}],yields:"WindPoweredBlade2"}],tags:["equipment"]}),k5=ie({name:"Wind Powered Blade Lvl 2",assetName:"WindPoweredBlade",rarity:"epic",description:"A broad blade recovered from a towering hilltop ruin.",equipSlots:["Weapon"],damage:{physical:156},statModifiers:[{type:"StatModifier",stat:"Speed",value:6,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.025,modifierType:"add"}],requiredLevel:124,sellPrice:410,upgrades:[{requires:[{id:"Stone",amount:800},{id:"Iron",amount:800},{id:"EssenceFluffy",amount:22}],yields:"WindPoweredBlade3"}],tags:["equipment"]}),U5=ie({name:"Wind Powered Blade Lvl 3",assetName:"WindPoweredBlade",rarity:"epic",description:"A broad blade recovered from a towering hilltop ruin.",equipSlots:["Weapon"],damage:{physical:164},statModifiers:[{type:"StatModifier",stat:"Speed",value:7,modifierType:"add"},{type:"StatModifier",stat:"Dodge",value:.03,modifierType:"add"}],requiredLevel:129,sellPrice:500,tags:["equipment"]}),V5=ie({name:"Blueprint: Battlethirsty Vest",assetName:"BlueprintBattlethirstyVest",rarity:"legendary",description:"A blueprint to craft a Battlethirsty Vest.",sellPrice:150,upgrades:[{requires:[{id:"RuggedJerkin",amount:1},{id:"SharkskinShirt",amount:1},{id:"Ore",amount:320},{id:"Wood",amount:140}],yields:"BattlethirstyVest"}],tags:["blueprint"]}),Y5=ie({name:"Blueprint: Blazing Shortsword",assetName:"BlueprintBlazingShortsword",rarity:"uncommon",description:"A blueprint to craft a Blazing Shortsword.",sellPrice:30,upgrades:[{requires:[{id:"ChippedShortsword",amount:1},{id:"EssenceSpicy",amount:4},{id:"Wood",amount:15}],yields:"BlazingShortsword"}],tags:["blueprint"]}),X5=ie({name:"Blueprint: Cursed Naginata",assetName:"BlueprintCursedNaginata",rarity:"legendary",description:"A blueprint to craft a Cursed Naginata.",sellPrice:150,upgrades:[{requires:[{id:"FuryBlade",amount:1},{id:"LifevineBelt",amount:1},{id:"EssenceChewy",amount:40}],yields:"CursedNaginata"}],tags:["blueprint"]}),z5=ie({name:"Blueprint: Dark Bargain Charm",assetName:"BlueprintDarkBargainCharm",rarity:"epic",description:"A blueprint to craft a Dark Bargain Charm.",sellPrice:90,upgrades:[{requires:[{id:"GhostlyPendant",amount:1},{id:"Duskbringer",amount:1}],yields:"DarkBargainCharm"}],tags:["blueprint"]}),W5=ie({name:"Blueprint: Dark Shortsword",assetName:"BlueprintDarkShortsword",rarity:"uncommon",description:"A blueprint to craft a Dark Shortsword.",sellPrice:30,upgrades:[{requires:[{id:"ChippedShortsword",amount:1},{id:"EssenceDecadent",amount:4},{id:"Ore",amount:15}],yields:"DarkShortsword"}],tags:["blueprint"]}),j5=ie({name:"Blueprint: Deadly Relic",assetName:"BlueprintDeadlyRelic",rarity:"uncommon",description:"A blueprint to craft a Deadly Relic.",sellPrice:30,upgrades:[{requires:[{id:"CrystalHeartCharm",amount:1},{id:"EssenceCreamy",amount:5},{id:"EssenceDecadent",amount:5}],yields:"DeadlyRelic"}],tags:["blueprint"]}),K5=ie({name:"Blueprint: Draining Edge",assetName:"BlueprintDrainingEdge",rarity:"uncommon",description:"A blueprint to craft a Draining Edge.",sellPrice:30,upgrades:[{requires:[{id:"RoughRazor",amount:1},{id:"RustedHelm",amount:1},{id:"Wood",amount:600}],yields:"DrainingEdge"}],tags:["blueprint"]}),$5=ie({name:"Blueprint: Electric Shortsword",assetName:"BlueprintElectricShortsword",rarity:"uncommon",description:"A blueprint to craft a Electric Shortsword.",sellPrice:30,upgrades:[{requires:[{id:"ChippedShortsword",amount:1},{id:"EssenceTangy",amount:4},{id:"Iron",amount:15}],yields:"ElectricShortsword"}],tags:["blueprint"]}),Q5=ie({name:"Blueprint: FerocityRing",assetName:"BlueprintFerocityRing",rarity:"epic",description:"A blueprint to craft a Ferocity Ring.",sellPrice:90,upgrades:[{requires:[{id:"MuscleRing",amount:1},{id:"EssenceSpicy",amount:12},{id:"InfernoRing",amount:1}],yields:"FerocityRing"}],tags:["blueprint"]}),J5=ie({name:"Blueprint: Frozen Shortsword",assetName:"BlueprintFrozenShortsword",rarity:"uncommon",description:"A blueprint to craft a Frozen Shortsword.",sellPrice:30,upgrades:[{requires:[{id:"ChippedShortsword",amount:1},{id:"EssenceFresh",amount:4},{id:"Stone",amount:15}],yields:"FrozenShortsword"}],tags:["blueprint"]}),Z5=ie({name:"Blueprint: Phantom Edge",assetName:"BlueprintPhantomEdge",rarity:"uncommon",description:"A blueprint to craft a Phantom Edge.",sellPrice:30,upgrades:[{requires:[{id:"RoughRazor",amount:1},{id:"Shatterblade",amount:1},{id:"Ore",amount:600}],yields:"PhantomEdge"}],tags:["blueprint"]}),q5=ie({name:"Blueprint: Shielding Band",assetName:"BlueprintShieldingBand",rarity:"uncommon",description:"A blueprint to craft a Shielding Band.",sellPrice:30,upgrades:[{requires:[{id:"HeavyBand",amount:1},{id:"TwineCinch",amount:1},{id:"EssenceDecadent",amount:8}],yields:"ShieldingBand"}],tags:["blueprint"]}),_5=ie({name:"Blueprint: Smiting Edge",assetName:"BlueprintSmitingEdge",rarity:"uncommon",description:"A blueprint to craft a Smiting Edge.",sellPrice:30,upgrades:[{requires:[{id:"RoughRazor",amount:1},{id:"GroundedPlate",amount:1},{id:"Iron",amount:600}],yields:"SmitingEdge"}],tags:["blueprint"]}),eP=ie({name:"Blueprint: StormWrath Belt",assetName:"BlueprintStormWrathBelt",rarity:"rare",description:"A blueprint to craft a StormWrath Belt.",sellPrice:50,upgrades:[{requires:[{id:"HastySash",amount:1},{id:"EssenceTangy",amount:6},{id:"EssenceFluffy",amount:6}],yields:"StormWrathBelt"}],tags:["blueprint"]}),tP=ie({name:"Blueprint: Thunder Helm",assetName:"BlueprintThunderHelm",rarity:"uncommon",description:"A blueprint to craft a Thunder Helm.",sellPrice:30,upgrades:[{requires:[{id:"ChargedFalchion",amount:1},{id:"LeatherCap",amount:1},{id:"Iron",amount:275}],yields:"ThunderHelm"}],tags:["blueprint"]}),iP=ie({name:"Blueprint: Spooky Scarf",assetName:"BlueprintSpookyScarf",rarity:"uncommon",description:"A blueprint to craft a Spooky Scarf.",sellPrice:30,upgrades:[{requires:[{id:"Pumpkin",amount:400},{id:"Candy",amount:900}],yields:"SpookyScarf"}],tags:["blueprint"]}),sP=ie({name:"Blueprint: Spooky Witch Hat",assetName:"BlueprintSpookyWitchHat",rarity:"uncommon",description:"A blueprint to craft a Spooky Witch Hat.",sellPrice:30,upgrades:[{requires:[{id:"Pumpkin",amount:280},{id:"Candy",amount:1400}],yields:"SpookyWitchHat"}],tags:["blueprint"]}),aP=ie({name:"Gentleman's Bowler",assetName:"GentlemansBowler",rarity:"epic",description:"A hat fit for a gentleman about town.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),nP=ie({name:"Kethric Vigil Hood",assetName:"KethricVigilHood",rarity:"rare",description:"The traditional headwear of pilgrims to the Temple of Kethra.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),rP=ie({name:"Helm of the Skyguard",assetName:"HelmOfTheSkyguard",rarity:"legendary",description:"An intricate helm worn by an ancient elite order.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),oP=ie({name:"Barbaric Helm",assetName:"BarbaricHelm",rarity:"epic",description:"A fearsome helm worn by the fiercest of warriors.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),lP=ie({name:"Spiked Iron Helm",assetName:"SpikedIronHelm",rarity:"epic",description:"A sturdy helm adorned with menacing spikes.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),hP=ie({name:"Wizardly Hat",assetName:"WizardlyHat",rarity:"rare",description:"A pointy hat worn by aspiring wizards.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),dP=ie({name:"Horned Kettle",assetName:"HornedKettle",rarity:"rare",description:"A kettle helm with horns, perfect for brewing up trouble.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),uP=ie({name:"Morhul Mask",assetName:"MorhulMask",rarity:"rare",description:"An intimidating mask fashioned after the skull of a Morhul.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),cP=ie({name:"Dragon Ritual Mask",assetName:"DragonRitualMask",rarity:"legendary",description:"A ceremonial mask used in ancient dragon rituals.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),fP=ie({name:"Wanderer's Sugegasa",assetName:"WanderersSugegasa",rarity:"epic",description:"A traditional straw hat worn by wandering travelers.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),mP=ie({name:"Mark IV Helmet",assetName:"MarkIVHelmet",rarity:"epic",description:"A high-tech helmet from scavenged from scraps of a bygone era.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),gP=ie({name:"Crested Drakhelm",assetName:"CrestedDrakhelm",rarity:"epic",description:"A functional and majestic helm with limited visibility.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),pP=ie({name:"Spooky Witch Hat",assetName:"SpookyWitchHat",rarity:"rare",description:"A spooky hat for spooky season.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),vP=ie({name:"Hair of the Chosen One",assetName:"HairOfTheChosenOne",rarity:"legendary",description:"The legendary hair of the prophesied hero.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),yP=ie({name:"Princely Crown",assetName:"PrincelyCrown",rarity:"epic",description:"A crown fit for a (frog) prince.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),xP=ie({name:"Viper Guild Hood",assetName:"ViperGuildHood",rarity:"legendary",description:"A hood worn by the elite members of the Viper Guild.",sellPrice:0,equipSlots:["Hat"],tags:["hat"]}),wP=ie({name:"Spooky Scarf",assetName:"SpookyScarf",rarity:"rare",description:"A spooky scarf for spooky season.",sellPrice:0,equipSlots:["Cloak"],tags:["cloak"]}),SP=ie({name:"Viper Guild Cloak",assetName:"ViperGuildCloak",rarity:"legendary",description:"A cloak worn by the elite members of the Viper Guild.",sellPrice:0,equipSlots:["Cloak"],tags:["cloak"]}),TP=ie({name:"Viper Guild Vest",assetName:"ViperGuildVest",rarity:"legendary",description:"A vest worn by the elite members of the Viper Guild.",sellPrice:0,equipSlots:["Shirt"],tags:["shirt"]}),CP=ie({name:"Chewy Essence",rarity:"rare",description:"One of the Flavor Essences: Chewy",sellPrice:10,isStackable:!0,tags:["material","essence"]}),AP=ie({name:"Creamy Essence",rarity:"rare",description:"One of the Flavor Essences: Creamy",sellPrice:10,isStackable:!0,tags:["material","essence"]}),bP=ie({name:"Crunchy Essence",rarity:"rare",description:"One of the Flavor Essences: Crunchy",sellPrice:10,isStackable:!0,tags:["material","essence"]}),EP=ie({name:"Decadent Essence",rarity:"rare",description:"One of the Flavor Essences: Decadent",sellPrice:10,isStackable:!0,tags:["material","essence"]}),MP=ie({name:"Fluffy Essence",rarity:"rare",description:"One of the Flavor Essences: Fluffy",sellPrice:10,isStackable:!0,tags:["material","essence"]}),LP=ie({name:"Fresh Essence",rarity:"rare",description:"One of the Flavor Essences: Fresh",sellPrice:10,isStackable:!0,tags:["material","essence"]}),RP=ie({name:"Hearty Essence",rarity:"rare",description:"One of the Flavor Essences: Hearty",sellPrice:10,isStackable:!0,tags:["material","essence"]}),PP=ie({name:"Spicy Essence",rarity:"rare",description:"One of the Flavor Essences: Spicy",sellPrice:10,isStackable:!0,tags:["material","essence"]}),BP=ie({name:"Tangy Essence",rarity:"rare",description:"One of the Flavor Essences: Tangy",sellPrice:10,isStackable:!0,tags:["material","essence"]}),DP=ie({name:"Iron",description:"A piece of iron.",sellPrice:10,isStackable:!0,tags:["material","resource"]}),FP=ie({name:"Ore",description:"A piece of ore.",sellPrice:10,isStackable:!0,tags:["material","resource"]}),IP=ie({name:"Stone",description:"A piece of stone.",sellPrice:10,isStackable:!0,tags:["material","resource"]}),OP=ie({name:"Wood",description:"A piece of wood.",sellPrice:10,isStackable:!0,tags:["material","resource"]}),NP=ie({name:"Pumpkin",description:"A spooky ingredient in seasonal blueprints.",sellPrice:10,isStackable:!0,tags:["material","resource","seasonal"]}),GP=ie({name:"Candy",description:"A treat (not a trick) used in seasonal blueprints.",sellPrice:2,isStackable:!0,tags:["material","resource","seasonal"]}),HP=ie({name:"Map: Fields",assetName:"map_fields",rarity:"uncommon",description:"A map to the Fields.",sellPrice:20,tags:["map","usable"]}),kP=ie({name:"Map: Forbidden City",assetName:"map_forbidden_city",rarity:"uncommon",description:"A map to the Forbidden City.",sellPrice:20,tags:["map","usable"]}),UP=ie({name:"Map: Mossy Forest",assetName:"map_mossy_forest",rarity:"uncommon",description:"A map to the Mossy Forest.",sellPrice:20,tags:["map","usable"]}),VP=ie({name:"Map: Mountain Pass",assetName:"map_mountain_pass",rarity:"uncommon",description:"A map to the Mountain Pass.",sellPrice:20,tags:["map","usable"]}),YP=ie({name:"Map: New Eden",assetName:"map_new_eden",rarity:"uncommon",description:"A map to New Eden.",sellPrice:20,tags:["map","usable"]}),XP=ie({name:"Map: Outer Temple",assetName:"map_outer_temple",rarity:"uncommon",description:"A map to the Outer Temple.",sellPrice:40,tags:["map","usable"]}),zP=ie({name:"Map: Ruined Path",assetName:"map_ruined_path",rarity:"uncommon",description:"A map to the Ruined Path.",sellPrice:20,tags:["map","usable"]}),WP=ie({name:"Map: Seaside Cliffs",assetName:"map_seaside_cliffs",rarity:"uncommon",description:"A map to the Seaside Cliffs.",sellPrice:20,tags:["map","usable"]}),jP=ie({name:"Map: Fields",assetName:"map_fields",rarity:"rare",description:"An unusual map to the Fields.",sellPrice:40,tags:["map","usable"]}),KP=ie({name:"Map: Forbidden City",assetName:"map_forbidden_city",rarity:"rare",description:"An unusual map to the Forbidden City.",sellPrice:40,tags:["map","usable"]}),$P=ie({name:"Map: Mossy Forest",assetName:"map_mossy_forest",rarity:"rare",description:"An unusual map to the Mossy Forest.",sellPrice:40,tags:["map","usable"]}),QP=ie({name:"Map: Mountain Pass",assetName:"map_mountain_pass",rarity:"rare",description:"An unusual map to the Mountain Pass.",sellPrice:40,tags:["map","usable"]}),JP=ie({name:"Map: New Eden",assetName:"map_new_eden",rarity:"rare",description:"An unusual map to New Eden.",sellPrice:40,tags:["map","usable"]}),ZP=ie({name:"Map: Outer Temple",assetName:"map_outer_temple",rarity:"rare",description:"An unusualmap to the Outer Temple.",sellPrice:20,tags:["map","usable"]}),qP=ie({name:"Map: Ruined Path",assetName:"map_ruined_path",rarity:"rare",description:"An unusual map to the Ruined Path.",sellPrice:40,tags:["map","usable"]}),_P=ie({name:"Map: Seaside Cliffs",assetName:"map_seaside_cliffs",rarity:"rare",description:"An unusual map to the Seaside Cliffs.",sellPrice:40,tags:["map","usable"]}),e4=ie({name:"Map: Haunted Forest",assetName:"map_haunted_forest",rarity:"mythic",description:"A limited time map to the Haunted Forest during Spooky Season.",sellPrice:40,tags:["map","usable"]}),t4={Gem:VA,Gold:UA,BenevolentCharm:YA,BlazingAmulet:XA,BlazingAmulet2:zA,BlazingAmulet3:WA,BronzeAmulet:jA,BulwarkChain:KA,BulwarkChain2:$A,ChippedPendant:QA,ChippedPendant2:JA,ChippedPendant3:ZA,CrystalHeartCharm:qA,DarkBargainCharm:_A,DeadlyRelic:eb,DeathzoneLocketEX:tb,DeathzoneNecklet:ib,DefensiveCharm:sb,DefensiveCharmUltimate:ab,EvasionAmulet:nb,Furybringer:rb,FurybringerUltimate:ob,GhostlyPendant:lb,GhostlyPendant2:hb,GhostlyPendantUltimate:db,LuckyLocket:ub,PhaseCharm:cb,PhaseCharm2:fb,PhaseCharm3:mb,RadiantCharm:gb,RagingCharm:pb,RagingCharmEX:vb,StalwartSolidus:yb,StalwartSolidus2:xb,StalwartSolidus3:wb,SurvivalCharm:Sb,SurvivalCharm2:Tb,SurvivalCharm3:Cb,TwistedCharm:Ab,TwistedCharm2:bb,TwistedCharm3:Eb,VengefulLocket:Mb,WarpstoneAmulet:Lb,WarpstoneAmulet2:Rb,WarpstoneAmulet3:Pb,WatchersLocket:Bb,WatchersLocketEX:Db,WizardSigil:Fb,WizardSigil2:Ib,WizardSigilUltimate:Ob,WrathfulLocket:Nb,AudacityChain:Gb,AudacityChain2:Hb,AudacityChain3:kb,AudacityChain4:Ub,AudacityChainUltimate:Vb,BladedBelt:Yb,BladedBeltUltimate:Xb,FlawedClasp:zb,FrenziedSash:Wb,GroundingBelt:jb,GroundingBelt2:Kb,GroundingBelt3:$b,GuardsBelt:Qb,HastySash:Jb,HeartyBelt:Zb,HeartyBeltEX:qb,HeavyBelt:_b,InsulatedWrap:eE,KnifeCollectorsBelt:tE,KnifeCollectorsBeltUltimate:iE,LifevineBelt:sE,LifevineBelt2:aE,LifevineBelt3:nE,PainfulWrap:rE,PlatedBelt:oE,PlatedBelt2:lE,PlatedBelt3:hE,RopeBraid:dE,RopeBraid2:uE,RopeBraid3:cE,RusticBelt:fE,RusticBelt2:mE,RusticBelt3:gE,SecondChanceBelt:pE,SeethingSash:vE,SeethingSash2:yE,SeethingSash3:xE,StormCurseWrap:wE,StormWrathBelt:SE,ThermalBinding:TE,ThermalBindingUltimate:CE,TwineCinch:AE,TwineCinch2:bE,TwineCinch3:EE,TwineCord:ME,TwineCord2:LE,TwinForkedSash:RE,TwinForkedSashEX:PE,VolatileSash:BE,VolatileSashEX:DE,WardingBelt:FE,WardingBeltEX:IE,WraithSash:OE,WraithSash2:NE,WraithSash3:GE,BattleHardendedVest:HE,BattlethirstyVest:kE,BloodiedChainMail:UE,BloodiedChainMailUltimate:VE,BrightPlate:YE,ConductiveChestplate:XE,ConductiveChestplate2:zE,ConductiveChestplate3:WE,DarksteelPlate:jE,DarksteelPlateEX:KE,FirststrikeVest:$E,FlameguardJacket:QE,FlameguardJacket2:JE,FlameguardJacket3:ZE,FlutteringCape:qE,FuryVest:_E,FuryVest2:eM,FuryVest3:tM,GroundedPlate:iM,GuardianPlate:sM,GuardianPlate2:aM,GuardianPlateUltimate:nM,HardenedGarb:rM,LeatherTunic:oM,LeatherTunic2:lM,LeatherTunic3:hM,MantleofNeed:dM,MantleofNeedEX:uM,MercenaryCuirass:cM,MercenaryCuirass2:fM,MercenaryCuirass3:mM,PowerVest:gM,ProtectiveMantle:pM,ProtectiveMantle2:vM,RecoveryVest:yM,RecoveryVestEX:xM,RestorationChainmail:wM,RestorationChainmailEX:SM,RuggedJerkin:TM,RuggedJerkin2:CM,RuggedJerkin3:AM,SharkskinShirt:bM,SharkskinShirt2:EM,SharkskinShirt3:MM,SilkenRobe:LM,SilkenRobe2:RM,SilkenRobe3:PM,Soulplate:BM,SwiftCowl:DM,TatteredCuirass:FM,TatteredCuirassUltimate:IM,UntouchableMantle:OM,UntouchableMantleEX:NM,AcuityHelm:GM,AcuityHelm2:HM,AcuityHelmUltimate:kM,AdrenalineCap:UM,AdrenalineCapEX:VM,BolsteringHeadgear:YM,BolsteringHeadgearEX:XM,BraveheartHelm:zM,BraveheartHelm2:WM,BraveheartHelmUltimate:jM,ConfoundingMask:KM,ConfoundingMask2:$M,ConjurersCap:QM,ConjurersCap2:JM,ConjurersCapUltimate:ZM,CordovanHood:qM,CordovanHood2:_M,CordovanHood3:eL,FlameHood:tL,HelmOfBlades:iL,HelmofBladesUltimate:sL,IntricateHeadgear:aL,LeatherCap:nL,LeatherCap2:rL,LeatherCap3:oL,PaddedHelmet:lL,RawhideCap:hL,RawhideCap2:dL,RawhideCap3:uL,RestorationHelm:cL,RustedHelm:fL,ShadowbaneCirclet:mL,ShadowDrinkerHelm:gL,ShadowDrinkerHelmUltimate:pL,ShieldingHelm:vL,ShieldingHelmUltimate:yL,SpikedCowl:xL,SpikedCowlEX:wL,SturdyHeadguard:SL,SturdyHeadguardUltimate:TL,SunstoneHelmet:CL,SurgeHelm:AL,SurgeHelmEX:bL,ThunderHelm:EL,ToughHelmet:ML,ToughHelmet2:LL,ToughHelmet3:RL,VanishingHood:PL,VanishingHood2:BL,VanishingHood3:DL,WrathfulVisor:FL,WrathfulVisorEX:IL,AmberfireRing:OL,BlastingRing:NL,BlastingRingEX:GL,BlazingRing:HL,CopperRing:kL,ElementalRing:UL,FerocityRing:VL,FiligreeBand:YL,FiligreeBand2:XL,FiligreeBand3:zL,FocusRing:WL,FragileRing:jL,HeavyBand:KL,InfernoRing:$L,InfernoRing2:QL,InfernoRingUltimate:JL,JaggedRing:ZL,JaggedRing2:qL,JaggedRing3:_L,LuckstoneRing:e3,MuscleRing:t3,MuscleRing2:i3,MuscleRing3:s3,QuicksilverRing:a3,RazorRing:n3,RazorRingUltimate:r3,RingOfRepair:o3,RingOfRepair2:l3,RingOfRepairUltimate:h3,RubyClawedRing:d3,RubyClawedRingEX:u3,ShieldingBand:c3,SmitingRing:f3,SmitingRingUltimate:m3,StackedSignet:g3,StackedSignet2:p3,StackedSignetUltimate:v3,Stormseeker:y3,Stormseeker2:x3,TarnishedBand:w3,TarnishedBand2:S3,TarnishedBand3:T3,TwilightBand:C3,TwilightBand2:A3,TwilightBand3:b3,TwinbladeBand:E3,TwinbladeBandEX:M3,WatchersSpark:L3,WatchersSparkEX:R3,AdventurersBlade:P3,AdventurersBlade2:B3,AdventurersBlade3:D3,BatteredBroadsword:F3,BattlereadyBlade:I3,BattleReadyBladeUltimate:O3,BerserkerAxe:N3,BerserkerAxe2:G3,BerserkerAxeUltimate:H3,BlazingShortsword:k3,Bloodseeker:U3,BloodseekerUltimate:V3,BluntBludgeon:Y3,BluntBludgeon2:X3,BluntBludgeon3:z3,BrutalBlade:W3,BrutalBlade2:j3,BrutalBladeUltimate:K3,BuccaneersFriend:$3,BuccaneersFriend2:Q3,BuccaneersFriend3:J3,ChargedFalchion:Z3,ChippedShortsword:q3,CursedNaginata:_3,DarkShortsword:eR,DarkWard:tR,DarkWard2:iR,DarkWard3:sR,DoublePoleAxe:aR,DoublePoleAxe2:nR,DoublePoleAxeUltimate:rR,DrainingEdge:oR,Duskbringer:lR,Duskbringer2:hR,Duskbringer3:dR,ElectricShortsword:uR,EternityMace:cR,EternityMace2:fR,EternityMace3:mR,Fangblade:gR,FangbladeEX:pR,FatalFarewell:vR,FlameguardSword:yR,FlameguardSword2:xR,FlameguardSword3:wR,Forgefang:SR,Forgefang2:TR,FragmentOfTheGreatSword:CR,FrozenShortsword:AR,FuryBlade:bR,FuryBlade2:ER,FuryBlade3:MR,GlacialShard:LR,GlacialShard2:RR,HatefulDarkness:PR,HatefulDarknessEX:BR,HerosLongSword:DR,HerosLongSword2:FR,HerosLongSwordUltimate:IR,InfernoCaller:OR,InfernoCallerEX:NR,PhantomBladeSword:GR,PhantomEdge:HR,PiercingBlade:kR,PiercingBlade2:UR,PiercingBlade3:VR,Plowshare:YR,Plowshare2:XR,Plowshare3:zR,RoughRazor:WR,RoughRazor2:jR,RoughRazor3:KR,RuinedRod:$R,RuinedRod2:QR,RuinedRod3:JR,RusticSword:ZR,SalvationScimitar:qR,SalvationScimitar2:_R,SalvationScimitarUltimate:e5,SawtoothAxe:t5,SawtoothAxe2:i5,SawtoothAxe3:s5,Scarsteel:a5,Scarsteel2:n5,ScarsteelUltimate:r5,SerratedSword:o5,SerratedSword2:l5,SerratedSword3:h5,ShadowSlicer:d5,Shatterblade:u5,Shatterblade2:c5,Shatterblade3:f5,SimpleCutlass:m5,SimpleCutlass2:g5,SimpleCutlass3:p5,SmitingEdge:v5,SouldrainAxe:y5,SouldrainAxeEX:x5,SowersLament:w5,SowersLament2:S5,SowersLament3:T5,StoneBlade:C5,StoneBlade2:A5,StoneBladeUltimate:b5,SturdyCleaver:E5,SturdyCleaver2:M5,SturdyCleaver3:L5,SuddenVengeance:R5,SurgeBlade:P5,SurgeBladeEX:B5,SwordOfRespite:D5,SwordOfRespiteEX:F5,VectraEdge:I5,VectraEdgeEX:O5,WastelandBlade:N5,WastelandBladeEX:G5,WindPoweredBlade:H5,WindPoweredBlade2:k5,WindPoweredBlade3:U5,BlueprintBattlethirstyVest:V5,BlueprintBlazingShortsword:Y5,BlueprintCursedNaginata:X5,BlueprintDarkBargainCharm:z5,BlueprintDarkShortsword:W5,BlueprintDeadlyRelic:j5,BlueprintDrainingEdge:K5,BlueprintElectricShortsword:$5,BlueprintFerocityRing:Q5,BlueprintFrozenShortsword:J5,BlueprintPhantomEdge:Z5,BlueprintShieldingBand:q5,BlueprintSmitingEdge:_5,BlueprintStormWrathBelt:eP,BlueprintThunderHelm:tP,BlueprintSpookyScarf:iP,BlueprintSpookyWitchHat:sP,EssenceChewy:CP,EssenceCreamy:AP,EssenceCrunchy:bP,EssenceDecadent:EP,EssenceFluffy:MP,EssenceFresh:LP,EssenceHearty:RP,EssenceSpicy:PP,EssenceTangy:BP,Iron:DP,Ore:FP,Stone:IP,Wood:OP,Pumpkin:NP,Candy:GP,MapFieldsUncommon:HP,MapForbiddenCityUncommon:kP,MapMossyForestUncommon:UP,MapMountainPassUncommon:VP,MapNewEdenUncommon:YP,MapOuterTempleUncommon:XP,MapRuinedPathUncommon:zP,MapSeasideCliffsUncommon:WP,MapFieldsRare:jP,MapForbiddenCityRare:KP,MapMossyForestRare:$P,MapMountainPassRare:QP,MapNewEdenRare:JP,MapOuterTempleRare:ZP,MapRuinedPathRare:qP,MapSeasideCliffsRare:_P,MapHauntedForestMythic:e4,GentlemansBowler:aP,KethricVigilHood:nP,HelmOfTheSkyguard:rP,BarbaricHelm:oP,SpikedIronHelm:lP,WizardlyHat:hP,HornedKettle:dP,MorhulMask:uP,DragonRitualMask:cP,WanderersSugegasa:fP,MarkIVHelmet:mP,CrestedDrakhelm:gP,SpookyWitchHat:pP,SpookyScarf:wP,HairOfTheChosenOne:vP,PrincelyCrown:yP,ViperGuildCloak:SP,ViperGuildHood:xP,ViperGuildVest:TP},i4=Object.entries(t4).map(([R,t])=>[R,{...t,id:R}]),ba=Object.fromEntries(i4);function s4(R){return{physical:(R==null?void 0:R.physical)??0,shadow:(R==null?void 0:R.shadow)??0,fire:(R==null?void 0:R.fire)??0,lightning:(R==null?void 0:R.lightning)??0,ice:(R==null?void 0:R.ice)??0}}function yw(R){switch(R){case"MainWeapon":return"Weapon";case"LeftHand":return"Ring"}return R in so?R:null}var so=(R=>(R.Weapon="Weapon",R.Head="Head",R.Chest="Chest",R.Amulet="Amulet",R.Belt="Belt",R.Ring="Ring",R.Hat="Hat",R.Shirt="Shirt",R.Cloak="Cloak",R))(so||{});const a4=[NA],n4=[pw],r4=[vw],o4=[GA],l4=["hat","shirt","cloak"];var Jm,Gx;function h4(){return Gx||(Gx=1,Jm={space:"",cycles:!1,replacer:(R,t)=>t,stringify:JSON.stringify}),Jm}var Zm,Hx;function Gr(){return Hx||(Hx=1,Zm={isArray:Array.isArray,assign:Object.assign,isObject:R=>typeof R=="object",isFunction:R=>typeof R=="function",isBoolean:R=>typeof R=="boolean",isRegex:R=>R instanceof RegExp,keys:Object.keys}),Zm}var qm,kx;function d4(){if(kx)return qm;kx=1;const R=h4(),t=Gr().isFunction,c=Gr().isBoolean,v=Gr().isObject,x=Gr().isArray,b=Gr().isRegex,h=Gr().assign,w=Gr().keys;function e(u){return u==null?u:b(u)?u.toString():u.toJSON?u.toJSON():u}function i(u,n){n=n||h({},R),t(n)&&(n={compare:n});const r=n.space||R.space,a=c(n.cycles)?n.cycles:R.cycles,s=n.replacer||R.replacer,o=n.stringify||R.stringify,d=n.compare&&function(f){return function(m){return function(g,p){const y={key:g,value:m[g]},S={key:p,value:m[p]};return f(y,S)}}}(n.compare);a||o(u);const l=[];return function f(m,g,p,y){const S=r?`
`+new Array(y+1).join(r):"",C=r?": ":":";if(p=e(p),p=s.call(m,g,p),p!==void 0){if(!v(p)||p===null)return o(p);if(x(p)){const A=[];for(let M=0;M<p.length;M++){const L=f(p,M,p[M],y+1)||o(null);A.push(S+r+L)}return"["+A.join(",")+S+"]"}else{if(a){if(l.indexOf(p)!==-1)return o("[Circular]");l.push(p)}const A=w(p).sort(d&&d(p)),M=[];for(let L=0;L<A.length;L++){const P=A[L],O=f(p,P,p[P],y+1);if(!O)continue;const D=o(P)+C+O;M.push(S+r+D)}return l.splice(l.indexOf(p),1),"{"+M.join(",")+S+"}"}}}({"":u},"",u,0)}return qm=i,qm}var u4=d4();const c4=gc(u4),Hu=[{sku:"game_refill_5lives",displayName:"Max Lives + Bonus 5",description:"Refill your lives plus 5 bonus lives. Can only be purchased when you have 0 lives.",price:50,images:{shopicon:"assets/ui/shop/ItemIcon_Lives_Group.png"},metadata:{shopItemId:"refillLivesBonus5",shopItemType:ci.Lives,bonusLives:"5"},tags:["item"]},{sku:"game_gold_frog_pass_30days",displayName:"Golden Frog Pass (30 Days)",description:"30 day pass. Unlocks 2x animation speed, 2x resource drops. (Update speed in settings).",price:2450,images:{shopicon:"assets/ui/shop/ItemIcon_GoldFrogPass.png"},metadata:{shopItemId:"battlePass",shopItemType:ci.BattlePass},tags:["battlepass"]},{sku:"game_small_resource_chest",displayName:"Small Resource Chest",description:"130 each of Ore, Stone, Wood, and Iron",price:100,images:{shopicon:"assets/ui/shop/ItemIcon_Chest_Gold.png"},metadata:{shopItemId:"smallResourceBundle",shopItemType:ci.Chest},tags:["item"]},{sku:"game_big_resource_chest",displayName:"Big Resource Chest",description:"350 each of Ore, Stone, Wood, and Iron",price:250,images:{shopicon:"assets/ui/shop/ItemIcon_Chest_Premium.png"},metadata:{shopItemId:"bigResourceBundle",shopItemType:ci.Chest},tags:["item"]},{sku:"game_massive_resource_chest",displayName:"Massive Resource Chest",description:"900 each of Ore, Stone, Wood, and Iron",price:450,images:{shopicon:"assets/ui/shop/chest_massive_resources.png"},metadata:{shopItemId:"massiveResourceBundle",shopItemType:ci.Chest},tags:["item"]},{sku:"game_small_map_chest",displayName:"Novice Map Chest",description:"4 Maps. Maps create new missions in Fields, Mossy Forest, Ruined Path and Mountain Pass (1 map per location)",price:100,images:{shopicon:"assets/ui/shop/shop_maps_novice.png"},metadata:{shopItemId:"smallMapBundle",shopItemType:ci.Chest},tags:["item"]},{sku:"game_medium_map_chest",displayName:"Veteran Map Chest",description:"8 Maps. Maps create new missions in Mountain Pass, Seaside Cliffs, Outer Temple, and Forbidden City (2 maps per location)",price:180,images:{shopicon:"assets/ui/shop/shop_maps_veteran.png"},metadata:{shopItemId:"mediumMapBundle",shopItemType:ci.Chest},tags:["item"]},{sku:"game_novice_rare_map_chest",displayName:"Novice Rare Map Chest",description:"4 [INFO:Rare] maps to create new missions in Fields, Mossy Forest, Ruined Path and Mountain Pass (1 map per location).",price:120,images:{shopicon:"assets/ui/shop/shop_maps_rare_novice.png"},metadata:{shopItemId:"noviceRareMapBundle",shopItemType:ci.Chest},tags:["item"]},{sku:"game_veteran_rare_map_chest",displayName:"Veteran Rare Map Chest",description:"4 [INFO:Rare] maps to create new missions in Seaside Cliffs, Outer Temple, Forbidden City and New Eden (1 map per location).",price:150,images:{shopicon:"assets/ui/shop/shop_maps_rare_vet.png"},metadata:{shopItemId:"veteranRareMapBundle",shopItemType:ci.Chest},tags:["item"]},{sku:"game_rare_map_chest",displayName:"Rare Map Chest",description:"16 [INFO:Rare] maps for new missions in all locations (2 maps each).",price:350,images:{shopicon:"assets/ui/shop/shop_maps_rare.png"},metadata:{shopItemId:"rareMapBundle",shopItemType:ci.Chest},tags:["item"]},{sku:"game_cosmetic_viper_guild_garb",displayName:"Viper Guild Garb",description:`[RARITY:legendary:Legendary] [INFO:cosmetic] set.

The garb of the elite Viper Guild. Contains: Viper Guild Hood, Viper Guild Cloak, and Viper Guild Vest.`,price:2600,images:{shopicon:"assets/ui/shop/cosmetics/ViperGuildGarb.png"},metadata:{shopItemId:"premiumCosmeticViperGuildGarb",shopItemType:ci.Chest},tags:["cosmetic","set"],badge:"new"},{sku:"game_cosmetic_hair_of_the_chosen_one",displayName:"Hair of the Chosen One",description:`[RARITY:legendary:Legendary] [INFO:cosmetic] headwear.

The legendary hair of the prophesied hero.`,price:1400,images:{shopicon:"assets/ui/shop/cosmetics/HairOfTheChosenOne.png"},metadata:{shopItemId:"premiumCosmeticHairOfTheChosenOne",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_princely_crown",displayName:"Princely Crown",description:`[RARITY:legendary:Legendary] [INFO:cosmetic] headwear.

A crown fit for (frog) prince.`,price:900,images:{shopicon:"assets/ui/shop/cosmetics/PrincelyCrown.png"},metadata:{shopItemId:"premiumCosmeticPrincelyCrown",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_gentlemans_bowler",displayName:"Gentleman's Bowler",description:`[RARITY:epic:Epic] [INFO:cosmetic] headwear.

A hat fit for a gentleman about town.`,price:900,images:{shopicon:"assets/ui/shop/cosmetics/GentlemansBowler.png"},metadata:{shopItemId:"premiumCosmeticGentlemansBowler",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_wizardly_hat",displayName:"Wizardly Hat",description:`[RARITY:rare:Rare] [INFO:cosmetic] headwear.

A pointy hat worn by aspiring wizards.`,price:600,images:{shopicon:"assets/ui/shop/cosmetics/WizardlyHat.png"},metadata:{shopItemId:"premiumCosmeticWizardlyHat",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_helm_of_the_skyguard",displayName:"Helm of the Skyguard",description:`[RARITY:legendary:Legendary] [INFO:cosmetic] headwear.

An intricate helm worn by an ancient elite order.`,price:1400,images:{shopicon:"assets/ui/shop/cosmetics/HelmOfTheSkyguard.png"},metadata:{shopItemId:"premiumCosmeticHelmOfTheSkyguard",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_barbaric_helm",displayName:"Barbaric Helm",description:`[RARITY:epic:Epic] [INFO:cosmetic] headwear.

A fearsome helm worn by the fiercest of warriors.`,price:900,images:{shopicon:"assets/ui/shop/cosmetics/BarbaricHelm.png"},metadata:{shopItemId:"premiumCosmeticBarbaricHelm",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_horned_kettle",displayName:"Horned Kettle",description:`[RARITY:rare:Rare] [INFO:cosmetic] headwear.

A kettle helm with horns, perfect for brewing up trouble.`,price:600,images:{shopicon:"assets/ui/shop/cosmetics/HornedKettle.png"},metadata:{shopItemId:"premiumCosmeticHornedKettle",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_kethric_vigil_hood",displayName:"Kethric Vigil Hood",description:`[RARITY:rare:Rare] [INFO:cosmetic] headwear.

The traditional headwear of pilgrims to the Temple of Kethra.`,price:600,images:{shopicon:"assets/ui/shop/cosmetics/KethricVigilHood.png"},metadata:{shopItemId:"premiumCosmeticKethricVigilHood",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_morhul_mask",displayName:"Morhul Mask",description:`[RARITY:rare:Rare] [INFO:cosmetic] headwear.

An intimidating mask fashioned after the skull of a Morhul.`,price:600,images:{shopicon:"assets/ui/shop/cosmetics/MorhulMask.png"},metadata:{shopItemId:"premiumCosmeticMorhulMask",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_spiked_iron_helm",displayName:"Spiked Iron Helm",description:`[RARITY:epic:Epic] [INFO:cosmetic] headwear.

A sturdy helm adorned with menacing spikes.`,price:900,images:{shopicon:"assets/ui/shop/cosmetics/SpikedIronHelm.png"},metadata:{shopItemId:"premiumCosmeticSpikedIronHelm",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_dragon_ritual_mask",displayName:"Dragon Ritual Mask",description:`[RARITY:legendary:Legendary] [INFO:cosmetic] headwear.

A ceremonial mask used in ancient dragon rituals.`,price:1400,images:{shopicon:"assets/ui/shop/cosmetics/DragonRitualMask.png"},metadata:{shopItemId:"premiumCosmeticDragonRitualMask",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_mark_iv_helmet",displayName:"Mark IV Helmet",description:`[RARITY:epic:Epic] [INFO:cosmetic] headwear.

A high-tech helmet from scavenged from scraps of a bygone era.`,price:900,images:{shopicon:"assets/ui/shop/cosmetics/MarkIVHelmet.png"},metadata:{shopItemId:"premiumCosmeticMarkIVHelmet",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_crested_drakhelm",displayName:"Crested Drakhelm",description:`[RARITY:epic:Epic] [INFO:cosmetic] headwear.

A functional and majestic helm with limited visibility.`,price:900,images:{shopicon:"assets/ui/shop/cosmetics/CrestedDrakhelm.png"},metadata:{shopItemId:"premiumCosmeticCrestedDrakhelm",shopItemType:ci.Chest},tags:["cosmetic","hat"]},{sku:"game_cosmetic_wanderers_sugegasa",displayName:"Wanderer's Sugegasa",description:`[RARITY:epic:Epic] [INFO:cosmetic] headwear.

A traditional straw hat worn by wandering travelers.`,price:900,images:{shopicon:"assets/ui/shop/cosmetics/WanderersSugegasa.png"},metadata:{shopItemId:"premiumCosmeticWanderersSugegasa",shopItemType:ci.Chest},tags:["cosmetic","hat"]}],f4={Gold:!0,Gem:!0};function mr(R){return f4[R]!==void 0}const pc=R=>R.intBetween(0,9999999999).toString(36);function xw(R){const t={equippedItems:{},Equipment:[],Currencies:[]};for(const[x,b]of Object.entries(R.equippedItems))b&&(t.equippedItems[x]=[b.id,b.definition.id,b.amount,b.createdAt]);const c=R.bags.Equipment;c&&(t.Equipment=c.items.map(x=>x?[x.id,x.definition.id,x.amount,x.createdAt]:void 0).filter(Boolean));const v=R.bags.Currencies;return v&&(t.Currencies=v.items.map(x=>x?[x.id,x.definition.id,x.amount,x.createdAt]:void 0).filter(Boolean)),t}const _m=(R,t)=>({type:"Item",id:R[0],definition:ba[R[1]],amount:R[2],createdAt:R[3]||t});function lp(R){const t=Object.fromEntries(Object.keys(so).map(v=>[v,void 0]));Object.entries(R.equippedItems).forEach(([v,x],b)=>{t[v]=_m(x,b)});const c={loaded:!0,equippedItems:t,bags:{Equipment:{type:"Bag",id:"Equipment",name:"Equipment",capacity:1e4,items:R.Equipment.map((v,x)=>_m(v,x))},Currencies:{type:"Bag",id:"Currencies",name:"Currencies",capacity:2,items:R.Currencies.map((v,x)=>_m(v,x))}},Gold:0,Gem:0};for(const v of R.Currencies){const[x,b,h,w]=v;mr(b)&&(c[b]+=h)}return c}const vl="Equipment",m4="Equipment",g4=1e4,En="Currencies",hp={loaded:!1,equippedItems:Object.values(so).reduce((R,t)=>(R[t]=void 0,R),{}),bags:{[vl]:{type:"Bag",id:vl,name:m4,capacity:g4,items:[]},[En]:{type:"Bag",id:En,name:"Currencies",capacity:2,items:[]}},Gold:0,Gem:0};function vc(R,t,c){const v=R.bags[t];if(!v)return null;if(c.definition.isStackable){const x=v.items.findIndex(b=>c.definition.id===(b==null?void 0:b.definition.id));if(x>-1)return x}for(let x=0;x<v.capacity;x++)if(!v.items[x])return x;return null}function ww(R,t){return R.equippedItems[t]?{ok:!1,error:`Slot ${t} is already occupied`}:{ok:!0}}function p4(R,t){return yc(R,t).type==="none"?{ok:!1,error:`Item ${t} not found in inventory`}:{ok:!0}}function Sw(R,t,c,v){const x=R.bags[t];if(!x)return R;const b=x.items.findIndex(u=>(u==null?void 0:u.id)===c);if(b===-1)return R;const h=[...x.items],w=h[b];w&&w.definition.isStackable&&w.amount>v?h[b]={...w,amount:w.amount-v}:h[b]=void 0;const e={...x,items:h};let i={};return w&&mr(w.definition.id)&&(i={[w.definition.id]:R[w.definition.id]-v}),{...R,...i,bags:{...R.bags,[t]:e}}}function dp(R,t){const c={...R.equippedItems};return c[t]=void 0,{...R,equippedItems:c}}function yc(R,t){const c=R.equippedItems,v=Object.values(so).find(b=>{var h;return((h=c[b])==null?void 0:h.id)===t});if(v)return{type:"slot",slot:v};const x=Object.values(R.bags).find(b=>b.items.some(h=>(h==null?void 0:h.id)===t));return x?{type:"bag",bagId:x.id}:{type:"none"}}function v4(R,t,c){const v=R.bags[c];return v?!t.definition.isStackable&&v.items.some(b=>t.id===(b==null?void 0:b.id))?{ok:!1,error:`Item ${t.id} already exists in bag ${c}`}:t.definition.isStackable&&v.items.find(h=>t.definition.id===(h==null?void 0:h.definition.id))?{ok:!0}:vc(R,c,t)===null?{ok:!1,error:`Bag ${c} is full`}:{ok:!0}:{ok:!1,error:`Bag ${c} not found`}}function Tw(R,t,c,v){const x=[...R.bags[c].items];if(v!==null){const b=x[v];b&&t.definition.isStackable&&(t.amount=Math.floor(t.amount+b.amount)),x[v]=t;const h={...R.bags[c],items:x};let w={};return mr(t.definition.id)&&(w={[t.definition.id]:t.amount}),{...R,...w,bags:{...R.bags,[c]:h}}}return R}function Cg(R,t,c){const v={...R.equippedItems};return v[c]=t,{...R,equippedItems:v}}function Cw(R){const{id:t,amount:c,itemDefinitionId:v,timestamp:x}=R,b=ba[v];return b?{type:"Item",id:t,definition:b,amount:c||1,createdAt:x}:null}function y4(R,t){const{itemDefinitionId:c,slot:v,bagId:x}=t,b=Cw(t);return b?v&&x?{ok:!1,error:"Either a bagId or a slot must be provided, not both"}:!v&&!x?{ok:!1,error:"Either a bagId or a slot must be provided"}:mr(b.definition.id)&&x!==En?{ok:!1,error:`Item ${b.definition.id} is a currency and must be added to the Currencies bag`}:t.amount&&t.amount>1&&!b.definition.isStackable?{ok:!1,error:`Must not specify amount for non-stackable item ${b.definition.id}`}:b.amount&&Math.floor(b.amount)!==b.amount?{ok:!1,error:`Item amount must be an integer, got ${b.amount}`}:v?ww(R,v):x?v4(R,b,x):{ok:!0}:{ok:!1,error:`Item ${c} not found`}}function x4(R,t){const{bagId:c,slot:v}=t,x=Cw(t);if(!x)return R;if(c){const b=vc(R,c,x);if(b!==null)return Tw(R,x,c,b)}return v?Cg(R,x,v):R}function w4(R,t){const{itemId:c}=t,v=yc(R,c);if(v.type==="none")return{ok:!1,error:`Item ${c} not found in inventory`};if(t.amount){if(t.amount<=0)return{ok:!1,error:"Amount must be greater than 0"};if(v.type==="slot")return{ok:!1,error:"Cannot specify drop amount of an equipped item"};if(v.type==="bag"){const b=R.bags[v.bagId].items.find(h=>(h==null?void 0:h.id)===c);if(b&&b.definition.isStackable&&b.amount<t.amount)return{ok:!1,error:`Cannot drop ${t.amount} of item ${c} (${b.definition.name}), only ${b.amount} available`}}}return{ok:!0}}function S4(R,t){const{itemId:c,amount:v=1}=t,x=yc(R,c);return x.type==="slot"?dp(R,x.slot):x.type==="bag"?Sw(R,x.bagId,c,v):R}function T4(R,t,c){return t.Level<c.definition.requiredLevel?{ok:!1,error:`Item ${c.definition.id} requires level ${c.definition.requiredLevel}, but player is level ${t.Level}`}:{ok:!0}}function C4(R,t){const{itemId:c,slot:v}=t,x=p4(R,c);if(!x.ok)return x;const b=ww(R,v);return b.ok?{ok:!0}:b}function A4(R,t){var h;const{itemId:c,slot:v}=t,x=yw(v);if(!x)return R;const b=yc(R,c);if(b.type==="slot"){const w=R.equippedItems[b.slot];if(w){const e=dp(R,b.slot);return Cg(e,w,x)}}if(b.type==="bag"){const w=(h=R.bags[b.bagId])==null?void 0:h.items.find(e=>(e==null?void 0:e.id)===c);if(w){const e=Sw(R,b.bagId,c,1),i=w.definition.isStackable?{...w,amount:1}:w;return Cg(e,i,x)}}return R}function b4(R,t){const{slot:c,destination:v}=t,x=R.equippedItems[c];return x?R.bags[v.id]?vc(R,v.id,x)===null?{ok:!1,error:`Bag ${v.id} is full`}:{ok:!0}:{ok:!1,error:`Bag ${v.id} not found`}:{ok:!1,error:`Slot ${c} is empty`}}function E4(R,t){const{slot:c,destination:v}=t,x=yw(c);if(!x)return R;const b=R.equippedItems[x];if(b){const h=vc(R,v.id,b);if(h!==null){const w=Tw(R,b,v.id,h);return dp(w,x)}}return R}const Ag=R=>{const t=Object.values(R.bags).map(v=>v.items).flat().filter(v=>!!v),c=Object.values(R.equippedItems).filter(v=>!!v);return[...t,...c]};function Aw(R,t,c){var r;const v=[],x=Ag(R).find(a=>a&&a.id===t);if(!x)return console.log(`Item ${t} not found in inventory`,R),[];const b=x.definition.upgrades.find(a=>a.yields===c);if(!b)return console.log(`Upgrade ${c} not found in item definition for item ${t}`),[];const h=new bl(`${t}-${c}`);for(const a of b.requires){const{id:s,amount:o}=a,d=ba[s],l=Ag(R).filter(f=>f&&f.definition.id===s);if(!l||!l.length)return console.log(`No items found for requirement ${s} in upgrade ${c}`),[];if(d.isStackable){const f=l[0];if(!f||f.amount<o)return console.log(`Not enough items for requirement ${s} in upgrade ${c}`),[];v.push({type:"itemDropped",itemId:f.id,amount:o})}else{if(l.length<o)return console.log(`Not enough items for requirement ${s} in upgrade ${c}`),[];l.slice(0,o).forEach(f=>{v.push({type:"itemDropped",itemId:f.id})})}}const w=x.definition.equipSlots[0],e=((r=R.equippedItems[w])==null?void 0:r.id)===t;if(e){const a={type:"itemUnequipped",slot:w,destination:{type:"bag",id:vl}};v.push(a)}x.definition.retainOnUpgrade||v.push({type:"itemDropped",itemId:x.id,amount:x.definition.isStackable?1:void 0});const i=pc(h),u=ba[b.yields],n={type:"itemAdded",id:i,itemDefinitionId:u.id,amount:u.isStackable?1:void 0,bagId:vl};if(v.push(n),e){const a={type:"itemEquipped",itemId:i,slot:u.equipSlots[0]};v.push(a)}return v}function bw(R,t,c){const v=[],x=Ag(R).find(w=>w&&w.id===t);if(!x)return console.log(`Item ${t} not found in inventory`,R),[];const b=x.definition.sellPrice*(c||1),h=new bl(t);return v.push({type:"itemAdded",id:pc(h),itemDefinitionId:"Gold",amount:b,bagId:En}),v.push({type:"itemDropped",itemId:t,amount:c}),v}function Ew(R,t,c,v){const x=[],b=[],h=R.bags[En].items.find(i=>i&&i.definition.id==="Gem");if(!h)return console.log("Gem not found in inventory",R),{inventoryActions:[],playerActions:[]};const w=Hu.find(i=>{var u;return((u=i.metadata)==null?void 0:u.shopItemId)===c});if(!w)return console.log(`Shop item ${c} not found`),{inventoryActions:[],playerActions:[]};const e=w.price;switch(x.push({type:"itemDropped",itemId:h.id,amount:e}),v){case ci.Chest:{const i=pA(c);if(i.length>0){const u=c4(R)+c,n=new bl(u);i.forEach(r=>{const a=ba[r.id],s=mr(a.id)?En:vl;x.push({type:"itemAdded",id:pc(n),itemDefinitionId:r.id,amount:r.quantity,bagId:s})})}break}case ci.Lives:{const u=Math.max(0,8-t.Lives);if(u<=0)return console.log("Player already has enough lives"),{inventoryActions:[],playerActions:[]};b.push({type:"playerLivesUpdated",amount:u});break}case ci.BattlePass:{const i=t.battlePassExpiration,u=Date.now(),n=30*24*60*60*1e3,r=i&&i>u?i+n:u+n;b.push({type:"battlePassExpirationUpdated",expiration:r})}}return{inventoryActions:x,playerActions:b}}function xc(R,t){return t.type==="itemAdded"?y4(R,t):t.type==="itemDropped"?w4(R,t):t.type==="itemEquipped"?C4(R,t):t.type==="itemUnequipped"?b4(R,t):{ok:!0}}function zr(R=hp,t){return t.type==="itemAdded"?x4(R,t):t.type==="itemDropped"?S4(R,t):t.type==="itemEquipped"?A4(R,t):t.type==="itemUnequipped"?E4(R,t):R}class M4{constructor(t){this.persistFn=t.persistFn,this.queryFn=t.queryFn,this.postMessageFn=t.postMessageFn}async queryAsync(){return this.inventory||(this.inventory=await this.queryFn()),this.inventory}invalidateCache(){this.inventory=void 0}async persistActionsAsync(t){let c=await this.queryAsync(),v=Date.now();const x=()=>v++,b=t.map(w=>({...w,timestamp:x()}));for(const w of b){const e=xc(c,w);if(!e.ok)return e;c=zr(c,w)}const h=await this.persistFn(b);return h.ok?(this.inventory=c,{ok:!0,inventory:this.inventory}):h}async sendClientUpdateAsync(){const t=await this.queryAsync(),c={type:"inventoryQueryResponse",ok:!0,transactionId:"server_push_sendClientUpdateAsync",cInv:xw(t)};this.postMessageFn(c)}}function L4(R){return new M4(R)}var eg={},Eh={},gu={},Ux;function Mw(){if(Ux)return gu;Ux=1,Object.defineProperty(gu,"__esModule",{value:!0}),gu.default=c;let R;const t=new Uint8Array(16);function c(){if(!R&&(R=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!R))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return R(t)}return gu}var qo={},Mh={},Lh={},Vx;function R4(){if(Vx)return Lh;Vx=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.default=void 0;var R=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return Lh.default=R,Lh}var Yx;function wc(){if(Yx)return Mh;Yx=1,Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.default=void 0;var R=t(R4());function t(x){return x&&x.__esModule?x:{default:x}}function c(x){return typeof x=="string"&&R.default.test(x)}var v=c;return Mh.default=v,Mh}var Xx;function Sc(){if(Xx)return qo;Xx=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.default=void 0,qo.unsafeStringify=v;var R=t(wc());function t(h){return h&&h.__esModule?h:{default:h}}const c=[];for(let h=0;h<256;++h)c.push((h+256).toString(16).slice(1));function v(h,w=0){return c[h[w+0]]+c[h[w+1]]+c[h[w+2]]+c[h[w+3]]+"-"+c[h[w+4]]+c[h[w+5]]+"-"+c[h[w+6]]+c[h[w+7]]+"-"+c[h[w+8]]+c[h[w+9]]+"-"+c[h[w+10]]+c[h[w+11]]+c[h[w+12]]+c[h[w+13]]+c[h[w+14]]+c[h[w+15]]}function x(h,w=0){const e=v(h,w);if(!(0,R.default)(e))throw TypeError("Stringified UUID is invalid");return e}var b=x;return qo.default=b,qo}var zx;function P4(){if(zx)return Eh;zx=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.default=void 0;var R=c(Mw()),t=Sc();function c(i){return i&&i.__esModule?i:{default:i}}let v,x,b=0,h=0;function w(i,u,n){let r=u&&n||0;const a=u||new Array(16);i=i||{};let s=i.node||v,o=i.clockseq!==void 0?i.clockseq:x;if(s==null||o==null){const p=i.random||(i.rng||R.default)();s==null&&(s=v=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),o==null&&(o=x=(p[6]<<8|p[7])&16383)}let d=i.msecs!==void 0?i.msecs:Date.now(),l=i.nsecs!==void 0?i.nsecs:h+1;const f=d-b+(l-h)/1e4;if(f<0&&i.clockseq===void 0&&(o=o+1&16383),(f<0||d>b)&&i.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");b=d,h=l,x=o,d+=122192928e5;const m=((d&268435455)*1e4+l)%4294967296;a[r++]=m>>>24&255,a[r++]=m>>>16&255,a[r++]=m>>>8&255,a[r++]=m&255;const g=d/4294967296*1e4&268435455;a[r++]=g>>>8&255,a[r++]=g&255,a[r++]=g>>>24&15|16,a[r++]=g>>>16&255,a[r++]=o>>>8|128,a[r++]=o&255;for(let p=0;p<6;++p)a[r+p]=s[p];return u||(0,t.unsafeStringify)(a)}var e=w;return Eh.default=e,Eh}var Rh={},tr={},Ph={},Wx;function Lw(){if(Wx)return Ph;Wx=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.default=void 0;var R=t(wc());function t(x){return x&&x.__esModule?x:{default:x}}function c(x){if(!(0,R.default)(x))throw TypeError("Invalid UUID");let b;const h=new Uint8Array(16);return h[0]=(b=parseInt(x.slice(0,8),16))>>>24,h[1]=b>>>16&255,h[2]=b>>>8&255,h[3]=b&255,h[4]=(b=parseInt(x.slice(9,13),16))>>>8,h[5]=b&255,h[6]=(b=parseInt(x.slice(14,18),16))>>>8,h[7]=b&255,h[8]=(b=parseInt(x.slice(19,23),16))>>>8,h[9]=b&255,h[10]=(b=parseInt(x.slice(24,36),16))/1099511627776&255,h[11]=b/4294967296&255,h[12]=b>>>24&255,h[13]=b>>>16&255,h[14]=b>>>8&255,h[15]=b&255,h}var v=c;return Ph.default=v,Ph}var jx;function Rw(){if(jx)return tr;jx=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.URL=tr.DNS=void 0,tr.default=h;var R=Sc(),t=c(Lw());function c(w){return w&&w.__esModule?w:{default:w}}function v(w){w=unescape(encodeURIComponent(w));const e=[];for(let i=0;i<w.length;++i)e.push(w.charCodeAt(i));return e}const x="6ba7b810-9dad-11d1-80b4-00c04fd430c8";tr.DNS=x;const b="6ba7b811-9dad-11d1-80b4-00c04fd430c8";tr.URL=b;function h(w,e,i){function u(n,r,a,s){var o;if(typeof n=="string"&&(n=v(n)),typeof r=="string"&&(r=(0,t.default)(r)),((o=r)===null||o===void 0?void 0:o.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+n.length);if(d.set(r),d.set(n,r.length),d=i(d),d[6]=d[6]&15|e,d[8]=d[8]&63|128,a){s=s||0;for(let l=0;l<16;++l)a[s+l]=d[l];return a}return(0,R.unsafeStringify)(d)}try{u.name=w}catch{}return u.DNS=x,u.URL=b,u}return tr}var Bh={},Kx;function B4(){if(Kx)return Bh;Kx=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.default=void 0;function R(a){if(typeof a=="string"){const s=unescape(encodeURIComponent(a));a=new Uint8Array(s.length);for(let o=0;o<s.length;++o)a[o]=s.charCodeAt(o)}return t(v(x(a),a.length*8))}function t(a){const s=[],o=a.length*32,d="0123456789abcdef";for(let l=0;l<o;l+=8){const f=a[l>>5]>>>l%32&255,m=parseInt(d.charAt(f>>>4&15)+d.charAt(f&15),16);s.push(m)}return s}function c(a){return(a+64>>>9<<4)+14+1}function v(a,s){a[s>>5]|=128<<s%32,a[c(s)-1]=s;let o=1732584193,d=-271733879,l=-1732584194,f=271733878;for(let m=0;m<a.length;m+=16){const g=o,p=d,y=l,S=f;o=e(o,d,l,f,a[m],7,-680876936),f=e(f,o,d,l,a[m+1],12,-389564586),l=e(l,f,o,d,a[m+2],17,606105819),d=e(d,l,f,o,a[m+3],22,-1044525330),o=e(o,d,l,f,a[m+4],7,-176418897),f=e(f,o,d,l,a[m+5],12,1200080426),l=e(l,f,o,d,a[m+6],17,-1473231341),d=e(d,l,f,o,a[m+7],22,-45705983),o=e(o,d,l,f,a[m+8],7,1770035416),f=e(f,o,d,l,a[m+9],12,-1958414417),l=e(l,f,o,d,a[m+10],17,-42063),d=e(d,l,f,o,a[m+11],22,-1990404162),o=e(o,d,l,f,a[m+12],7,1804603682),f=e(f,o,d,l,a[m+13],12,-40341101),l=e(l,f,o,d,a[m+14],17,-1502002290),d=e(d,l,f,o,a[m+15],22,1236535329),o=i(o,d,l,f,a[m+1],5,-165796510),f=i(f,o,d,l,a[m+6],9,-1069501632),l=i(l,f,o,d,a[m+11],14,643717713),d=i(d,l,f,o,a[m],20,-373897302),o=i(o,d,l,f,a[m+5],5,-701558691),f=i(f,o,d,l,a[m+10],9,38016083),l=i(l,f,o,d,a[m+15],14,-660478335),d=i(d,l,f,o,a[m+4],20,-405537848),o=i(o,d,l,f,a[m+9],5,568446438),f=i(f,o,d,l,a[m+14],9,-1019803690),l=i(l,f,o,d,a[m+3],14,-187363961),d=i(d,l,f,o,a[m+8],20,1163531501),o=i(o,d,l,f,a[m+13],5,-1444681467),f=i(f,o,d,l,a[m+2],9,-51403784),l=i(l,f,o,d,a[m+7],14,1735328473),d=i(d,l,f,o,a[m+12],20,-1926607734),o=u(o,d,l,f,a[m+5],4,-378558),f=u(f,o,d,l,a[m+8],11,-2022574463),l=u(l,f,o,d,a[m+11],16,1839030562),d=u(d,l,f,o,a[m+14],23,-35309556),o=u(o,d,l,f,a[m+1],4,-1530992060),f=u(f,o,d,l,a[m+4],11,1272893353),l=u(l,f,o,d,a[m+7],16,-155497632),d=u(d,l,f,o,a[m+10],23,-1094730640),o=u(o,d,l,f,a[m+13],4,681279174),f=u(f,o,d,l,a[m],11,-358537222),l=u(l,f,o,d,a[m+3],16,-722521979),d=u(d,l,f,o,a[m+6],23,76029189),o=u(o,d,l,f,a[m+9],4,-640364487),f=u(f,o,d,l,a[m+12],11,-421815835),l=u(l,f,o,d,a[m+15],16,530742520),d=u(d,l,f,o,a[m+2],23,-995338651),o=n(o,d,l,f,a[m],6,-198630844),f=n(f,o,d,l,a[m+7],10,1126891415),l=n(l,f,o,d,a[m+14],15,-1416354905),d=n(d,l,f,o,a[m+5],21,-57434055),o=n(o,d,l,f,a[m+12],6,1700485571),f=n(f,o,d,l,a[m+3],10,-1894986606),l=n(l,f,o,d,a[m+10],15,-1051523),d=n(d,l,f,o,a[m+1],21,-2054922799),o=n(o,d,l,f,a[m+8],6,1873313359),f=n(f,o,d,l,a[m+15],10,-30611744),l=n(l,f,o,d,a[m+6],15,-1560198380),d=n(d,l,f,o,a[m+13],21,1309151649),o=n(o,d,l,f,a[m+4],6,-145523070),f=n(f,o,d,l,a[m+11],10,-1120210379),l=n(l,f,o,d,a[m+2],15,718787259),d=n(d,l,f,o,a[m+9],21,-343485551),o=b(o,g),d=b(d,p),l=b(l,y),f=b(f,S)}return[o,d,l,f]}function x(a){if(a.length===0)return[];const s=a.length*8,o=new Uint32Array(c(s));for(let d=0;d<s;d+=8)o[d>>5]|=(a[d/8]&255)<<d%32;return o}function b(a,s){const o=(a&65535)+(s&65535);return(a>>16)+(s>>16)+(o>>16)<<16|o&65535}function h(a,s){return a<<s|a>>>32-s}function w(a,s,o,d,l,f){return b(h(b(b(s,a),b(d,f)),l),o)}function e(a,s,o,d,l,f,m){return w(s&o|~s&d,a,s,l,f,m)}function i(a,s,o,d,l,f,m){return w(s&d|o&~d,a,s,l,f,m)}function u(a,s,o,d,l,f,m){return w(s^o^d,a,s,l,f,m)}function n(a,s,o,d,l,f,m){return w(o^(s|~d),a,s,l,f,m)}var r=R;return Bh.default=r,Bh}var $x;function D4(){if($x)return Rh;$x=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.default=void 0;var R=c(Rw()),t=c(B4());function c(b){return b&&b.__esModule?b:{default:b}}var x=(0,R.default)("v3",48,t.default);return Rh.default=x,Rh}var Dh={},Fh={},Qx;function F4(){if(Qx)return Fh;Qx=1,Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return Fh.default=t,Fh}var Jx;function I4(){if(Jx)return Dh;Jx=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.default=void 0;var R=v(F4()),t=v(Mw()),c=Sc();function v(h){return h&&h.__esModule?h:{default:h}}function x(h,w,e){if(R.default.randomUUID&&!w&&!h)return R.default.randomUUID();h=h||{};const i=h.random||(h.rng||t.default)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,w){e=e||0;for(let u=0;u<16;++u)w[e+u]=i[u];return w}return(0,c.unsafeStringify)(i)}var b=x;return Dh.default=b,Dh}var Ih={},Oh={},Zx;function O4(){if(Zx)return Oh;Zx=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.default=void 0;function R(x,b,h,w){switch(x){case 0:return b&h^~b&w;case 1:return b^h^w;case 2:return b&h^b&w^h&w;case 3:return b^h^w}}function t(x,b){return x<<b|x>>>32-b}function c(x){const b=[1518500249,1859775393,2400959708,3395469782],h=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof x=="string"){const u=unescape(encodeURIComponent(x));x=[];for(let n=0;n<u.length;++n)x.push(u.charCodeAt(n))}else Array.isArray(x)||(x=Array.prototype.slice.call(x));x.push(128);const w=x.length/4+2,e=Math.ceil(w/16),i=new Array(e);for(let u=0;u<e;++u){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=x[u*64+r*4]<<24|x[u*64+r*4+1]<<16|x[u*64+r*4+2]<<8|x[u*64+r*4+3];i[u]=n}i[e-1][14]=(x.length-1)*8/Math.pow(2,32),i[e-1][14]=Math.floor(i[e-1][14]),i[e-1][15]=(x.length-1)*8&4294967295;for(let u=0;u<e;++u){const n=new Uint32Array(80);for(let l=0;l<16;++l)n[l]=i[u][l];for(let l=16;l<80;++l)n[l]=t(n[l-3]^n[l-8]^n[l-14]^n[l-16],1);let r=h[0],a=h[1],s=h[2],o=h[3],d=h[4];for(let l=0;l<80;++l){const f=Math.floor(l/20),m=t(r,5)+R(f,a,s,o)+d+b[f]+n[l]>>>0;d=o,o=s,s=t(a,30)>>>0,a=r,r=m}h[0]=h[0]+r>>>0,h[1]=h[1]+a>>>0,h[2]=h[2]+s>>>0,h[3]=h[3]+o>>>0,h[4]=h[4]+d>>>0}return[h[0]>>24&255,h[0]>>16&255,h[0]>>8&255,h[0]&255,h[1]>>24&255,h[1]>>16&255,h[1]>>8&255,h[1]&255,h[2]>>24&255,h[2]>>16&255,h[2]>>8&255,h[2]&255,h[3]>>24&255,h[3]>>16&255,h[3]>>8&255,h[3]&255,h[4]>>24&255,h[4]>>16&255,h[4]>>8&255,h[4]&255]}var v=c;return Oh.default=v,Oh}var qx;function N4(){if(qx)return Ih;qx=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.default=void 0;var R=c(Rw()),t=c(O4());function c(b){return b&&b.__esModule?b:{default:b}}var x=(0,R.default)("v5",80,t.default);return Ih.default=x,Ih}var Nh={},_x;function G4(){if(_x)return Nh;_x=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.default=void 0;var R="00000000-0000-0000-0000-000000000000";return Nh.default=R,Nh}var Gh={},e1;function H4(){if(e1)return Gh;e1=1,Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.default=void 0;var R=t(wc());function t(x){return x&&x.__esModule?x:{default:x}}function c(x){if(!(0,R.default)(x))throw TypeError("Invalid UUID");return parseInt(x.slice(14,15),16)}var v=c;return Gh.default=v,Gh}var t1;function k4(){return t1||(t1=1,function(R){Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"NIL",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(R,"parse",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(R,"stringify",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(R,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(R,"v3",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(R,"v4",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(R,"v5",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(R,"validate",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(R,"version",{enumerable:!0,get:function(){return h.default}});var t=u(P4()),c=u(D4()),v=u(I4()),x=u(N4()),b=u(G4()),h=u(H4()),w=u(wc()),e=u(Sc()),i=u(Lw());function u(n){return n&&n.__esModule?n:{default:n}}}(eg)),eg}var tg,i1;function U4(){if(i1)return tg;i1=1;function R(t,c){if(!t||!c||!t.length||!c.length)throw new Error("Bad alphabet");this.srcAlphabet=t,this.dstAlphabet=c}return R.prototype.convert=function(t){var c,v,x,b={},h=this.srcAlphabet.length,w=this.dstAlphabet.length,e=t.length,i=typeof t=="string"?"":[];if(!this.isValid(t))throw new Error('Number "'+t+'" contains of non-alphabetic digits ('+this.srcAlphabet+")");if(this.srcAlphabet===this.dstAlphabet)return t;for(c=0;c<e;c++)b[c]=this.srcAlphabet.indexOf(t[c]);do{for(v=0,x=0,c=0;c<e;c++)v=v*h+b[c],v>=w?(b[x++]=parseInt(v/w,10),v=v%w):x>0&&(b[x++]=0);e=x,i=this.dstAlphabet.slice(v,v+1).concat(i)}while(x!==0);return i},R.prototype.isValid=function(t){for(var c=0;c<t.length;++c)if(this.srcAlphabet.indexOf(t[c])===-1)return!1;return!0},tg=R,tg}var ig,s1;function V4(){if(s1)return ig;s1=1;var R=U4();function t(c,v){var x=new R(c,v);return function(b){return x.convert(b)}}return t.BIN="01",t.OCT="01234567",t.DEC="0123456789",t.HEX="0123456789abcdef",ig=t,ig}var sg,a1;function Y4(){if(a1)return sg;a1=1;const{v4:R,validate:t}=k4(),c=V4(),v={cookieBase90:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&'()*+-./:<=>?@[]^_`{|}~",flickrBase58:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",uuid25Base36:"0123456789abcdefghijklmnopqrstuvwxyz"},x={consistentLength:!0};let b;const h=(i,u,n)=>{const r=u(i.toLowerCase().replace(/-/g,""));return!n||!n.consistentLength?r:r.padStart(n.shortIdLength,n.paddingChar)},w=(i,u)=>{const r=u(i).padStart(32,"0").match(/(\w{8})(\w{4})(\w{4})(\w{4})(\w{12})/);return[r[1],r[2],r[3],r[4],r[5]].join("-")},e=i=>Math.ceil(Math.log(2**128)/Math.log(i));return sg=(()=>{const i=(u,n)=>{const r=u||v.flickrBase58,a={...x,...n};if([...new Set(Array.from(r))].length!==r.length)throw new Error("The provided Alphabet has duplicate characters resulting in unreliable results");const s=e(r.length),o={shortIdLength:s,consistentLength:a.consistentLength,paddingChar:r[0]},d=c(c.HEX,r),l=c(r,c.HEX),f=()=>h(R(),d,o),g={alphabet:r,fromUUID:p=>h(p,d,o),maxLength:s,generate:f,new:f,toUUID:p=>w(p,l),uuid:R,validate:(p,y=!1)=>{if(!p||typeof p!="string")return!1;const S=a.consistentLength?p.length===s:p.length<=s,C=p.split("").every(A=>r.includes(A));return y===!1?S&&C:S&&C&&t(w(p,l))}};return Object.freeze(g),g};return i.constants=v,i.uuid=R,i.generate=()=>(b||(b=i(v.flickrBase58).generate),b()),i})(),sg}var X4=Y4();const Jr=gc(X4);function ku(R,t,c){if(c.length===0)return{ok:!1,error:"No actions provided"};for(const v of c){const x=xc(R,v);if(!x.ok)return x;R=zr(R,v)}return{ok:!0}}const Pw=R=>{ss(R)},z4=async R=>{const t=Jr.generate(),c=new Promise((v,x)=>{const b=h=>{const{type:w,data:e}=h.data??{};if(w==="devvit-message"){const{message:i}=e;i.transactionId===t&&(window.removeEventListener("message",b),i.ok?v(lp(i.cInv)):x(i.error))}};window.addEventListener("message",b)});return Pw({type:"inventoryClientQuery",transactionId:t,query:R}),c};class W4{constructor(t,c=!1){this.inventory=hp,this.listeners=[],this.isDevvitClient=!1,this.isDevvitClient=c,this.profileProvider=t}async dispatch(t){let c=Date.now();const v=()=>c++,x={...t,timestamp:Date.now()},b=xc(this.inventory,x);if(!b.ok)return console.error(b.error),b;if(x.type==="itemUpgraded"){console.log("itemUpgraded action dispatched:",x);const h=Aw(this.inventory,x.itemId,x.upgradeId);console.log("Generated upgrade transaction:",h);const w=pl(),e=h.map(u=>({...u,timestamp:v()})),i=ku(this.inventory,w,e);if(!i.ok)return console.error("Invalid itemUpgraded transaction",i.error),i;this.inventory=e.reduce(zr,this.inventory)}else if(x.type==="itemSold"){const h=bw(this.inventory,x.itemId,x.amount),w=pl(),e=h.map(u=>({...u,timestamp:v()})),i=ku(this.inventory,w,e);if(!i.ok)return console.error("Invalid itemSold transaction",i.error),i;this.inventory=e.reduce(zr,this.inventory)}else if(x.type==="shopBuy"){const{shopItemId:h,shopItemType:w}=x;switch(w){case ci.Lives:console.log("Buying Lives:",h);break;default:const e=await this.profileProvider.getPlayerStatsAsync(),i=Ew(this.inventory,e,h,w),{inventoryActions:u}=i,n=u.map(a=>({...a,timestamp:v()})),r=ku(this.inventory,e,n);if(!r.ok)return console.error("Invalid shopBuy transaction",r.error),r;this.inventory=n.reduce(zr,this.inventory);break}}else this.inventory=zr(this.inventory,x);if(this.listeners.forEach(h=>h(this.inventory)),this.isDevvitClient){const h=Jr.generate();Pw({type:"inventoryClientAction",transactionId:h,action:x})}return b}async query(t){if(t.type==="getPlayerInventory")return this.isDevvitClient&&(this.inventory=await z4(t)),this.inventory;throw new Error(`Unknown query type: ${t.type}`)}subscribe(t){if(!this.pushListener){const v=x=>{const{type:b,data:h}=x.data??{};if(b==="devvit-message"){const{message:w}=h;console.log("devvit-message",w),w.type==="inventoryQueryResponse"&&w.ok&&(this.inventory=lp(w.cInv),console.log("Received inventory update from devvit:",this.inventory),this.listeners.forEach(e=>e(this.inventory)))}};window.addEventListener("message",v),this.pushListener=v}const c=()=>{this.listeners=this.listeners.filter(v=>v!==t),this.listeners.length===0&&this.pushListener&&(window.removeEventListener("message",this.pushListener),this.pushListener=void 0)};return this.listeners.push(t),c}}function j4(R){return new W4(R,!0)}class qh{constructor(t=100,c=t,v=10,x=10,b=10,h=10,w=10,e=1,i=0,u=0,n=1,r=3,a=Date.now(),s=0,o=0,d=0,l=0,f=0,m=0,g=1,p=1,y=1,S=1,C=1){this.MaxHp=t,this.CurrentHp=c,this.Attack=v,this.Defense=x,this.Speed=b,this.Dodge=h,this.Crit=w,this.Level=e,this.Gold=i,this.Gem=u,this.GoldEarnRate=n,this.Lives=r,this.LastLifeTimeStamp=a,this.LastClaimLoginBonusTimeStamp=s,this.LoginCombo=o,this.ShadowResist=d,this.IceResist=l,this.LightningResist=f,this.FireResist=m,this.ShadowMultiplier=g,this.IceMultiplier=p,this.LightningMultiplier=y,this.FireMultiplier=S,this.KnifeMultiplier=C}getStatDisplay(t){return Sg[t]}getStatValue(t){return this[t]}static fromCharacterStats(t){return new qh(t.MaxHp,t.CurrentHp,t.Attack,t.Defense,t.Speed,t.Dodge,t.Crit,t.Level,t.Gold,t.Gem,t.GoldEarnRate,t.Lives,t.LastLifeTimeStamp,t.LoginCombo,t.ShadowResist,t.IceResist,t.LightningResist,t.FireResist,t.ShadowMultiplier,t.IceMultiplier,t.LightningMultiplier,t.FireMultiplier,t.KnifeMultiplier)}setStatValue(t,c){if(c<0)throw new Error(`Stat value for ${t} cannot be negative.`);t in this?this[t]=c:console.warn(`Stat key "${t}" does not exist on CharacterModel.`)}}function K4(R,t,c){const v=R.find(x=>x.enemyId===t);return v?v.message=c:R.push({enemyId:t,message:c}),R}const ps=[{requiredPlays:2,reward:"Gold",amount:25},{requiredPlays:5,reward:"Gold",amount:75},{requiredPlays:10,reward:"Gold",amount:200},{requiredPlays:25,reward:"Gold",amount:650},{requiredPlays:50,reward:"Gold",amount:1500}],Bw=R=>{let t=-1;for(let c=0;c<ps.length;c++)R.plays>=ps[c].requiredPlays&&(t=c);return t>R.rewardCollectedIndex},pu={abilitiesByLevel:{type:"always",tiers:[{minLevel:1,maxLevel:20,items:[{id:"EveryOtherTurnDoubleAttack",weight:5},{id:"HealOnHitCount",weight:5},{id:"LifeStealOnAttack",weight:5},{id:"LightningOnCrit",weight:5},{id:"LightningOnTurnStart",weight:5},{id:"MagicKnifeOnTurn",weight:5},{id:"HealOnFirstTurn",weight:5},{id:"FireKnifeOnTurnStart",weight:5},{id:"RageOnFirstTurn",weight:5},{id:"SecondWindAbility",weight:5},{id:"IceKnifeOnTurnStart",weight:5},{id:"DoubleLightningOnTurn",weight:5}]},{minLevel:21,maxLevel:40,items:[{id:"AddRageOnEnemyDeath",weight:5},{id:"BonusRageOnAttack",weight:5},{id:"MagicKnifeOnTurn",weight:5},{id:"HealOnFirstTurn",weight:5},{id:"BoostAttackOnHighHP",weight:5},{id:"HealOnCritAbility",weight:5},{id:"IceKnifeOnTurnStart",weight:5},{id:"HealOnRage",weight:5},{id:"LowHPBoostDefense",weight:5},{id:"LightningOnCrit",weight:5},{id:"LightningOnEnemyDeath",weight:5},{id:"LowHpCritBoostAbility",weight:5},{id:"LowHPRageFill",weight:5},{id:"MagicKnifeAbility",weight:5},{id:"MagicKnifeOnHitCount",weight:5},{id:"MaxHpCritBoostAbility",weight:5},{id:"SecondWindAbility",weight:5},{id:"AddRageOnLightning",weight:5}]},{minLevel:41,items:[{id:"AddRageOnHeal",weight:5},{id:"AddRageOnHitCount",weight:5},{id:"AddRageOnMagicKnife",weight:5},{id:"HealOnFirstTurn",weight:5},{id:"GainShieldOnEnemyDeath",weight:5},{id:"GainShieldOnHitCount",weight:5},{id:"GainShieldOnRage",weight:5},{id:"GainShieldOnTurn",weight:5},{id:"HealOnCritAbility",weight:5},{id:"HealOnRage",weight:5},{id:"LightningEveryHitCount",weight:5},{id:"HealOnLightning",weight:5},{id:"HealOnMagicKnife",weight:5},{id:"AddRageOnLightning",weight:5},{id:"LightningOnEnemyDeath",weight:5},{id:"MagicKnifeOnTurn",weight:5},{id:"LowHPBoostDefense",weight:5},{id:"LightningOnRage",weight:5},{id:"MagicKnifeOnCrit",weight:5},{id:"MagicKnifeOnHitCount",weight:5},{id:"MagicKnifeOnRage",weight:5},{id:"MaxHpCritBoostAbility",weight:5},{id:"SecondWindAbility",weight:5},{id:"ShieldOnLowHP",weight:5}]}]},enchantedAbilitiesByLevel:{type:"always",tiers:[{minLevel:1,maxLevel:40,items:[{id:"DoubleLightningOnTurn",weight:5},{id:"EveryOtherTurnAddRage",weight:5},{id:"EveryOtherTurnDoubleAttack",weight:5},{id:"FireKnifeOnAttack",weight:5},{id:"HealOnEnemyDeath",weight:5},{id:"HealOnHitCount",weight:5},{id:"IceKnifeOnAttack",weight:5},{id:"KnifeDoubler",weight:5},{id:"KnifeOnAttack",weight:5},{id:"LightningOnCrit",weight:5},{id:"LightningOnEnemyDeath",weight:5},{id:"LowHpCritBoostAbility",weight:5},{id:"LowHpDodgeBoostAbility",weight:5},{id:"LowHPKnives",weight:5},{id:"MagicKnifeEveryHitCount",weight:5},{id:"MagicKnifeOnEnemyDeath",weight:5},{id:"RageOnFirstTurn",weight:5},{id:"SecondWindAbility",weight:5},{id:"TripleAttack",weight:5}]},{minLevel:41,maxLevel:80,items:[{id:"BonusRageOnAttack",weight:5},{id:"DoubleLightningOnTurn",weight:5},{id:"HealOnCritAbility",weight:5},{id:"HealOnMagicKnife",weight:5},{id:"HealOnRage",weight:5},{id:"LightningOnAttack",weight:5},{id:"LightningOnCrit",weight:5},{id:"LightningOnEnemyDeath",weight:5},{id:"LowHpCritBoostAbility",weight:5},{id:"LowHPRageFill",weight:5},{id:"MagicKnifeEveryHitCount",weight:5},{id:"EveryOtherTurnDoubleAttack",weight:5},{id:"MagicKnifeOnHitCount",weight:5},{id:"MagicKnifeOnTurn",weight:5},{id:"MaxHpCritBoostAbility",weight:5},{id:"SecondWindAbility",weight:5},{id:"TripleAttack",weight:5},{id:"FireKnifeOnAttack",weight:5},{id:"KnifeOnAttack"},{id:"IceKnifeOnAttack",weight:5}]},{minLevel:81,items:[{id:"AddRageOnHitCount",weight:5},{id:"AddRageOnLightning",weight:5},{id:"AddRageOnMagicKnife",weight:5},{id:"DoubleLightningOnTurn",weight:5},{id:"HealOnMagicKnife",weight:5},{id:"HealOnRage",weight:5},{id:"LightningEveryHitCount",weight:5},{id:"LightningOnEnemyDeath",weight:5},{id:"LightningOnRage",weight:5},{id:"MagicKnifeEveryHitCount",weight:5},{id:"EveryOtherTurnDoubleAttack",weight:5},{id:"MagicKnifeOnCrit",weight:5},{id:"MagicKnifeOnHitCount",weight:5},{id:"MagicKnifeOnRage",weight:5},{id:"SecondWindAbility",weight:5},{id:"ShieldOnLowHP",weight:5},{id:"TripleAttack",weight:5},{id:"LightningOnAttack",weight:5},{id:"FireKnifeOnAttack",weight:5},{id:"KnifeOnAttack",weight:5},{id:"IceKnifeOnAttack",weight:5}]}]}},n1={bosses:{type:"oneOf",tiers:[{minLevel:1,maxLevel:20,items:[{id:"darkDemon",weight:2},{id:"mushroomLargeBoss",weight:2},{id:"skelFireHead",weight:1}]},{minLevel:21,maxLevel:40,items:[{id:"skelFireHead",weight:3},{id:"darkDemon",weight:1},{id:"mushroomLargeBoss",weight:2}]},{minLevel:41,maxLevel:60,items:[{id:"skelFireHead",weight:2},{id:"skelIceHead",weight:2},{id:"darkDemon",weight:1},{id:"woodGolem",weight:2},{id:"mushroomLargeBoss",weight:1}]},{minLevel:61,maxLevel:80,items:[{id:"skelFireHead",weight:2},{id:"skelIceHead",weight:2},{id:"livingArmor",weight:2},{id:"darkDemon",weight:1},{id:"woodGolem",weight:2},{id:"icyWoodGolem",weight:2},{id:"mushroomLargeBoss",weight:1}]},{minLevel:81,maxLevel:100,items:[{id:"skelFireHead",weight:1},{id:"skelIceHead",weight:1},{id:"livingArmor",weight:1},{id:"darkDemon",weight:1},{id:"woodGolem",weight:1},{id:"icyWoodGolem",weight:1}]},{minLevel:101,maxLevel:120,items:[{id:"skelFireHead",weight:1},{id:"skelIceHead",weight:1},{id:"livingArmor",weight:1},{id:"darkDemon",weight:1},{id:"woodGolem",weight:1},{id:"icyWoodGolem",weight:1},{id:"robotNo6",weight:2}]},{minLevel:121,items:[{id:"skelFireHead",weight:1},{id:"skelIceHead",weight:1},{id:"livingArmor",weight:1},{id:"darkDemon",weight:1},{id:"woodGolem",weight:1},{id:"icyWoodGolem",weight:1},{id:"robotNo6",weight:2},{id:"robotBoss",weight:2}]}]}},bg=20,$4=.07,Q4=.1,J4=.15,Z4=.18,q4=.27;function r1(R){if(!R)return console.warn("getEnvironmentFromMapItem called with null mapItem"),"";switch(R.definition.id){case Lt.ItemDefinitions.MapFieldsUncommon.id:case Lt.ItemDefinitions.MapFieldsRare.id:return"fields";case Lt.ItemDefinitions.MapMossyForestUncommon.id:case Lt.ItemDefinitions.MapMossyForestRare.id:return"mossy_forest";case Lt.ItemDefinitions.MapMountainPassUncommon.id:case Lt.ItemDefinitions.MapMountainPassRare.id:return"mountain_pass";case Lt.ItemDefinitions.MapRuinedPathUncommon.id:case Lt.ItemDefinitions.MapRuinedPathRare.id:return"ruined_path";case Lt.ItemDefinitions.MapSeasideCliffsUncommon.id:case Lt.ItemDefinitions.MapSeasideCliffsRare.id:return"seaside_cliffs";case Lt.ItemDefinitions.MapOuterTempleUncommon.id:case Lt.ItemDefinitions.MapOuterTempleRare.id:return"outer_temple";case Lt.ItemDefinitions.MapForbiddenCityUncommon.id:case Lt.ItemDefinitions.MapForbiddenCityRare.id:return"forbidden_city";case Lt.ItemDefinitions.MapNewEdenUncommon.id:case Lt.ItemDefinitions.MapNewEdenRare.id:return"new_eden";case Lt.ItemDefinitions.MapHauntedForestMythic.id:return"haunted_forest";default:return""}}function Yh(R){return R<=5?1:R<=20?6:Math.floor((R-1)/bg)*bg+1}function o1(R){return R<=5?5:R<=20?20:R+bg-1}class up{constructor(t){this.environments=["new_eden","forbidden_city","outer_temple","seaside_cliffs","mossy_forest","ruined_path","fields","mountain_pass","haunted_forest"],this.missionAbilityIds=[],this.enchantedMissionAbilityIds=[],this.usedAbilityIds=new Set,this.rng=Gu(t)}randomInt(t,c){const v=Math.floor(c);return Math.floor(this.rng()*(v-t+1))+t}getRandomUnusedAbilityId(t=!1){const v=(t?this.enchantedMissionAbilityIds:this.missionAbilityIds).filter(b=>!this.usedAbilityIds.has(b));if(v.length===0)return null;const x=v[this.randomInt(0,v.length-1)];return this.usedAbilityIds.add(x),x}generateEnemy(t,c,v){const b=nr([d1[t]],c,d1)[0].id,h=this.randomInt(-2,2);return{id:`${b}-${v}`,type:b,level:h}}generateBoss(t,c,v){const x=nr([u1[t]],c,u1);if(!x)return;const b=x[0].id;return{id:`${b}-${v}`,type:b,level:1}}generateRushBoss(t,c){const x=nr([n1.bosses],t,n1)[0].id;return{id:`${x}-${c}`,type:x,level:0}}generateEnemyEncounter(t,c,v,x="uncommon"){const b=x==="rare"?q4:Z4,h=c<=5?this.rng()<.3?2:1:this.rng()<b?this.randomInt(1,3):this.randomInt(1,2),w=[];for(let e=0;e<h;e++)w.push(this.generateEnemy(t,c,`${v}-${e}`));return{type:He.Enemy,enemies:w}}generateBossEncounter(t,c,v){const x=this.generateBoss(t,c,`${v}-0`);if(!x){console.warn(`No boss generated for environment: ${t}, minLevel: ${c}`);return}return{type:He.Boss,enemies:[x]}}generateBossRushEncounter(t,c){const v=this.generateRushBoss(t,`${c}-0`);return{type:He.RushBoss,enemies:[v]}}generateStatsChoiceEncounter(t=!0){const v=[...t?["Attack","Defense","Speed","Crit","Dodge","Health"]:["Attack","Defense","Speed","Crit","Dodge"]],x=5,b=15,h=5,w=15,e=10,i=30,u=20,n=40,r=20,a=40,s=v.splice(this.randomInt(0,v.length-1),1)[0],o=s==="Crit"||s==="Dodge",d=s==="Health"?{id:`MissionBlessing - ${s}`,type:"health",amount:this.randomInt(e,i)/100}:{id:`MissionBlessing - ${s}`,type:"multiplier",stat:s,amount:o?this.randomInt(u,n)/100:this.randomInt(x,b)/100},l=v[this.randomInt(0,v.length-1)],f=l==="Crit"||l==="Dodge",m=l==="Health"?{id:`MissionBlessing - ${l}`,type:"health",amount:this.randomInt(e,i)/100}:{id:`MissionBlessing - ${l}`,type:"multiplier",stat:l,amount:f?this.randomInt(r,a)/100:this.randomInt(h,w)/100};return{type:He.StatsChoice,optionA:d,optionB:m}}generateAbilityChoiceEncounter(t="uncommon"){const c=t==="rare"&&this.rng()<.5,v=this.getRandomUnusedAbilityId(c),x=this.getRandomUnusedAbilityId(c),b=this.getRandomUnusedAbilityId(c);if(!v||!x||!b)return this.generateStatsChoiceEncounter();const h={id:"",type:"ability",abilityId:v},w={id:"",type:"ability",abilityId:x},e={id:"",type:"ability",abilityId:b};return{type:He.AbilityChoice,isEnchanted:c,optionA:h,optionB:w,optionC:e}}generateBargainEncounter(){const c=[...["Attack","Defense","Speed","Crit","Dodge","Health"]],v=c.splice(this.randomInt(0,c.length-1),1)[0],x=c[this.randomInt(0,c.length-1)],b=v==="Health"?{id:"",type:"health",amount:this.randomInt(10,30)/100}:{id:"",type:"multiplier",stat:v,amount:this.randomInt(15,30)/100},h=x==="Health"?{id:"",type:"health",amount:this.randomInt(-20,-5)/100}:{id:"",type:"multiplier",stat:x,amount:this.randomInt(-20,-8)/100};return{type:He.SkillBargain,positiveEffect:b,negativeEffect:h}}generateSkillEncounter(t){const c=[He.StatsChoice,He.AbilityChoice,He.SkillBargain],v=c[this.randomInt(0,c.length-1)];switch(v){case He.StatsChoice:return this.generateStatsChoiceEncounter();case He.AbilityChoice:return this.generateAbilityChoiceEncounter(t);case He.SkillBargain:return this.generateBargainEncounter();default:throw new Error(`Unknown encounter type: ${v}`)}}generateEndingEncounter(t,c,v,x=!1){return{type:He.Treasure,missionType:x?"bossRush":"standard",reward:{essences:mB[v],tier:t+c-1}}}generateCreatorBonusEncounter(){const c=[...["Attack","GoldEarnRate"]],v=c.splice(this.randomInt(0,c.length-1),1)[0],x=c[this.randomInt(0,c.length-1)],b={id:"",type:"multiplier",stat:v,amount:.1},h={id:"",type:"multiplier",stat:x,amount:.1};return{type:He.CreatorBonus,optionA:b,optionB:h}}generateInvestigateEncounter(t=!1){const v=this.randomInt(150,300),x=.3,h=t?Math.floor(v*.5):v;return{type:He.Investigate,bonusChance:.65,bonusGold:h,failHpPenaltyPct:x,bonusResourceType:t?"Candy":"Gold"}}generateCrossroadsFightEncounter(t){const c={id:"mushroomLarge",type:"mushroomLarge",level:this.randomInt(0,2)},v={id:"hollowhorn",type:"darkGiantHorns",level:this.randomInt(0,2)},x=[c,v],b=[x[this.randomInt(0,x.length-1)]];return{type:He.CrossroadsFight,enemies:b}}rateMissionDifficulty(t){let c=0;const v=t.some(e=>e.type===He.Boss)?1:0;v>0&&(c+=1);const x=t.filter(e=>e.type===He.Enemy).length;t.filter(e=>e.type===He.SkillChoice||e.type===He.SkillBargain).length<(x+v)/2&&(c+=1),t.filter(e=>e.type===He.Enemy&&e.enemies.length>=2).length>1&&(c+=1);const w=t.filter(e=>e.type===He.Enemy&&e.enemies.length>=3).length;return w>0&&(c+=1),w>1&&(c+=1),x>=5&&(c+=1),c<1?c=1:c>5&&(c=5),c}getEnvironment(){return this.environments[this.randomInt(0,this.environments.length-1)]}populateMissionAbilities(t){const c=nr([pu.abilitiesByLevel],t,pu);this.missionAbilityIds=c.map(x=>x.id);const v=nr([pu.enchantedAbilitiesByLevel],t,pu);this.enchantedMissionAbilityIds=v.map(x=>x.id)}debugPopulateMissionAbilities(t){const c=Yh(t);this.populateMissionAbilities(c)}getChef(t){const c=["chef_bird","chef_bird2","chef_cat","chef_french","chef_japanese"],v=["chef_bird","chef_bird2","chef_cat","chef_french","chef_japanese","chef_foodBot"],x=t>=120?v:c;return x[this.randomInt(0,x.length-1)]}getCart(){const t=["cart1","cart_awning","cart_umbrella","cart_trailer"];return t[this.randomInt(0,t.length-1)]}generateMission(t,c,v="uncommon",x,b="Ramen.png",h="Miso Ramen",w=void 0){const e=Math.random;Gu(t,{global:!0}),this.rng=Gu(t),this.usedAbilityIds.clear();const u=v==="rare"&&this.rng()<$4?this.makeBossRushMission(t,c,v,x,b,h,w):this.makeStandardMission(t,c,v,x,b,h,w);return Math.random=e,u}makeStandardMission(t,c,v="uncommon",x,b="Ramen.png",h="Miso Ramen",w=void 0){const e=Yh(c),i=o1(e),u=v=="rare"?this.randomInt(4,7):this.randomInt(3,7),n=this.randomInt(2,u/2),r=[],a=x||this.getEnvironment(),s=6;this.populateMissionAbilities(e);for(let y=0;y<u;y++)r.push(this.generateEnemyEncounter(a,e,y,v));for(let y=0;y<n;y++)r.push(this.generateSkillEncounter(v));const o=a==="haunted_forest",d=.2;this.rng()<d&&r.push(this.generateInvestigateEncounter(o)),this.rng()<d&&r.push(this.generateCrossroadsFightEncounter(e)),r.sort(()=>this.rng()-.5);const l=y=>[He.StatsChoice,He.SkillBargain,He.SkillChoice,He.AbilityChoice,He.Investigate].includes(y.type);for(;r.length>0&&l(r[r.length-1]);){const y=r.pop(),S=this.randomInt(0,r.length-1);r.splice(S,0,y)}const f=v==="rare"?J4:Q4;if(e>=s&&this.rng()<f){const y=this.generateBossEncounter(a,e,0);y?r.push(y):console.warn(`No boss encounter generated for environment: ${a}, minLevel: ${e}`)}const m=this.rateMissionDifficulty(r);r.push(this.generateEndingEncounter(e,m,b));const g=this.getChef(e),p=this.getCart();return{environment:a,encounters:r,minLevel:e,maxLevel:i,difficulty:m,foodImage:b,foodName:h,authorWeaponId:w,chef:g,cart:p}}makeBossRushMission(t,c,v="uncommon",x,b="Ramen.png",h="Miso Ramen",w=void 0){const e=Yh(c),i=o1(e),u=3,n=4,r=[],a=x||this.getEnvironment();this.populateMissionAbilities(e);for(let l=0;l<u;l++){const f=this.rng()<.5?this.generateAbilityChoiceEncounter(v):this.generateStatsChoiceEncounter(!1);r.push(f)}for(let l=0;l<n;l++)r.push(this.generateBossRushEncounter(e,l));const s=5;r.push(this.generateEndingEncounter(e,s,b));const o=this.getChef(e),d=this.getCart();return{environment:a,encounters:r,minLevel:e,maxLevel:i,difficulty:s,foodImage:b,foodName:h,authorWeaponId:w,chef:o,cart:d,type:"bossRush"}}addCreatorContent(t,c){const v=t.encounters;if(v.unshift(this.generateCreatorBonusEncounter()),c){const x=v.find(b=>b.type===He.Enemy);if(x&&x.enemies.length>0){const b=x.enemies[x.enemies.length-1];b.promptForTaunt=!0}}return t.encounters=v,t}debugGenerateEnemyEncounter(t,c,v){return this.generateEnemyEncounter(t,c,v)}debugGenerateStatsChoiceEncounter(){return this.generateStatsChoiceEncounter()}debugGenerateAbilityChoiceEncounter(){return this.generateAbilityChoiceEncounter()}debugGenerateSkillBargainEncounter(){return this.generateBargainEncounter()}debugGenerateInvestigateEncounter(){return this.generateInvestigateEncounter(!0)}debugGenerateCrossroadsFightEncounter(t){return this.generateCrossroadsFightEncounter(t)}debugGenerateBossEncounter(t,c,v){return this.generateBossEncounter(t,c,v)}debugGenerateRushBossEncounter(t,c){return{type:He.RushBoss,enemies:[this.generateRushBoss(t,c.toString())]}}}const Dw=R=>R*60,_4=R=>Dw(R*60),bi=R=>_4(R*24),eB=R=>(t,c)=>c.victory&&R===t.type?1:0,vu=R=>(t,c)=>{var v;return c.victory&&((v=yn[t.type].tags)!=null&&v.includes(R))?1:0},Js=R=>(t,c,v)=>v.victory&&t.id===R?c:0,tB=R=>(t,c,v)=>{var x;return(x=t.tags)!=null&&x.includes(R)?c:0},l1=R=>(t,c)=>{const v=t.encounters[c.encounterIndex];return(v==null?void 0:v.type)===R&&c.choiceIndex===cp.Accepted?1:0},iB=R=>(t,c)=>{const v=t.encounters[c.encounterIndex];return(v==null?void 0:v.type)===R&&c.choiceIndex===cp.Refused?1:0},sB=bi(1),h1={collect_spicy_essence:{type:"loot",description:"Collect Spicy Essence",rewardTiers:[{goal:3,rewardItem:"Gold",rewardValue:350},{goal:5,rewardItem:"Gold",rewardValue:1400},{goal:9,rewardItem:"Gold",rewardValue:3100}],expiresSeconds:bi(3),progress:Js("EssenceSpicy")},collect_crunchy_essence:{type:"loot",description:"Collect Crunchy Essence",rewardTiers:[{goal:3,rewardItem:"Gold",rewardValue:350},{goal:5,rewardItem:"Gold",rewardValue:1400},{goal:9,rewardItem:"Gold",rewardValue:3100}],expiresSeconds:bi(3),progress:Js("EssenceCrunchy")},collect_chewy_essence:{type:"loot",description:"Collect Chewy Essence",rewardTiers:[{goal:3,rewardItem:"Gold",rewardValue:350},{goal:5,rewardItem:"Gold",rewardValue:1400},{goal:9,rewardItem:"Gold",rewardValue:3100}],expiresSeconds:bi(3),progress:Js("EssenceChewy")},collect_hearty_essence:{type:"loot",description:"Collect Hearty Essence",rewardTiers:[{goal:3,rewardItem:"Gold",rewardValue:350},{goal:5,rewardItem:"Gold",rewardValue:1400},{goal:9,rewardItem:"Gold",rewardValue:3100}],expiresSeconds:bi(3),progress:Js("EssenceHearty")},collect_decadent_essence:{type:"loot",description:"Collect Decadent Essence",rewardTiers:[{goal:3,rewardItem:"Gold",rewardValue:350},{goal:5,rewardItem:"Gold",rewardValue:1400},{goal:9,rewardItem:"Gold",rewardValue:3100}],expiresSeconds:bi(3),progress:Js("EssenceDecadent")},collect_fresh_essence:{type:"loot",description:"Collect Fresh Essence",rewardTiers:[{goal:3,rewardItem:"Gold",rewardValue:350},{goal:5,rewardItem:"Gold",rewardValue:1400},{goal:9,rewardItem:"Gold",rewardValue:3100}],expiresSeconds:bi(3),progress:Js("EssenceFresh")},collect_tangy_essence:{type:"loot",description:"Collect Tangy Essence",rewardTiers:[{goal:3,rewardItem:"Gold",rewardValue:350},{goal:5,rewardItem:"Gold",rewardValue:1400},{goal:9,rewardItem:"Gold",rewardValue:3100}],expiresSeconds:bi(3),progress:Js("EssenceTangy")},collect_creamy_essence:{type:"loot",description:"Collect Creamy Essence",rewardTiers:[{goal:3,rewardItem:"Gold",rewardValue:350},{goal:5,rewardItem:"Gold",rewardValue:1400},{goal:9,rewardItem:"Gold",rewardValue:3100}],expiresSeconds:bi(3),progress:Js("EssenceCreamy")},collect_fluffy_essence:{type:"loot",description:"Collect Fluffy Essence",rewardTiers:[{goal:3,rewardItem:"Gold",rewardValue:350},{goal:5,rewardItem:"Gold",rewardValue:1400},{goal:9,rewardItem:"Gold",rewardValue:3100}],expiresSeconds:bi(3),progress:Js("EssenceFluffy")},collect_wood:{type:"loot",description:"Collect Wood",rewardTiers:[{goal:20,rewardItem:"Gold",rewardValue:220},{goal:65,rewardItem:"Gold",rewardValue:800},{goal:200,rewardItem:"Gold",rewardValue:2800}],expiresSeconds:bi(3),progress:Js("Wood")},collect_ore:{type:"loot",description:"Collect Ore",rewardTiers:[{goal:20,rewardItem:"Gold",rewardValue:220},{goal:65,rewardItem:"Gold",rewardValue:800},{goal:200,rewardItem:"Gold",rewardValue:2800}],expiresSeconds:bi(3),progress:Js("Ore")},collect_iron:{type:"loot",description:"Collect Iron",rewardTiers:[{goal:20,rewardItem:"Gold",rewardValue:220},{goal:65,rewardItem:"Gold",rewardValue:800},{goal:200,rewardItem:"Gold",rewardValue:2800}],expiresSeconds:bi(3),progress:Js("Iron")},collect_stone:{type:"loot",description:"Collect Stone",rewardTiers:[{goal:20,rewardItem:"Gold",rewardValue:220},{goal:65,rewardItem:"Gold",rewardValue:800},{goal:200,rewardItem:"Gold",rewardValue:2800}],expiresSeconds:bi(3),progress:Js("Stone")},collect_equipment:{type:"loot",description:"Collect Gear",rewardTiers:[{goal:2,rewardItem:"Stone",rewardValue:80},{goal:4,rewardItem:"Wood",rewardValue:420},{goal:6,rewardItem:"Iron",rewardValue:3200}],expiresSeconds:bi(3),progress:tB("equipment")},kill_eringuy:{type:"enemy",description:"Defeat Erin-Guy",rewardTiers:[{goal:1,rewardItem:"Gold",rewardValue:190},{goal:3,rewardItem:"Gold",rewardValue:630},{goal:5,rewardItem:"Gold",rewardValue:5900}],expiresSeconds:bi(3),progress:eB("mushroomLarge")},kill_armed_enemies:{type:"enemy",description:"Defeat Armed Enemies",rewardTiers:[{goal:5,rewardItem:"Gold",rewardValue:400},{goal:15,rewardItem:"Gold",rewardValue:1650},{goal:25,rewardItem:"Gold",rewardValue:4200}],expiresSeconds:bi(3),progress:vu("armed")},kill_shadow_enemies_scarf:{type:"enemy",description:"Defeat Shadow Enemies",rewardTiers:[{goal:35,rewardItem:"Gold",rewardValue:500},{goal:55,rewardItem:"Gold",rewardValue:1850},{goal:80,rewardItem:"BlueprintSpookyScarf",rewardValue:1}],expiresSeconds:bi(14),progress:vu("dark")},accept_skill_bargains_hat:{type:"mission",description:"Accept Skill Bargains",rewardTiers:[{goal:4,rewardItem:"Gem",rewardValue:5},{goal:9,rewardItem:"Gem",rewardValue:10},{goal:17,rewardItem:"BlueprintSpookyWitchHat",rewardValue:1}],expiresSeconds:bi(10),progress:l1(He.SkillBargain)},kill_bosses:{type:"enemy",description:"Defeat Bosses",rewardTiers:[{goal:1,rewardItem:"Gem",rewardValue:2},{goal:2,rewardItem:"Gem",rewardValue:5},{goal:8,rewardItem:"BlueprintStormWrathBelt",rewardValue:1}],expiresSeconds:bi(3),progress:vu("boss")},kill_bosses_gold:{type:"enemy",description:"Defeat Bosses",rewardTiers:[{goal:3,rewardItem:"Gold",rewardValue:200},{goal:6,rewardItem:"Gold",rewardValue:1500},{goal:14,rewardItem:"Gold",rewardValue:9250}],expiresSeconds:bi(3),progress:vu("boss")},investigate_huts:{type:"mission",description:"Investigate Mystery Huts",rewardTiers:[{goal:1,rewardItem:"Stone",rewardValue:50},{goal:3,rewardItem:"Iron",rewardValue:320},{goal:6,rewardItem:"Wood",rewardValue:1200}],progress:l1(He.Investigate),expiresSeconds:bi(3)},skeleton_kill:{type:"enemy",description:"Defeat Skeletons",rewardTiers:[{goal:15,rewardItem:"Gold",rewardValue:410},{goal:20,rewardItem:"Gold",rewardValue:3400},{goal:35,rewardItem:"Gold",rewardValue:8400}],expiresSeconds:bi(5),progress:(R,t)=>t.victory&&R.id.startsWith("skel")?1:0},test_mushroom_kill:{type:"enemy",description:"Defeat Mushrooms",rewardTiers:[{goal:8,rewardItem:"Gold",rewardValue:190},{goal:13,rewardItem:"Gold",rewardValue:1800},{goal:20,rewardItem:"Gold",rewardValue:3500}],expiresSeconds:Dw(1),progress:(R,t)=>t.victory&&R.id.startsWith("mushroom")?1:0},mushroom_kill:{type:"enemy",description:"Defeat Mushrooms",rewardTiers:[{goal:8,rewardItem:"Gold",rewardValue:190},{goal:13,rewardItem:"Gold",rewardValue:2400},{goal:20,rewardItem:"Gold",rewardValue:5500}],expiresSeconds:bi(4),progress:(R,t)=>t.victory&&R.id.startsWith("mushroom")?1:0},beat_five_star_missions:{type:"mission",description:"Beat Five Star Missions",rewardTiers:[{goal:2,rewardItem:"Gold",rewardValue:550},{goal:5,rewardItem:"Gold",rewardValue:3100},{goal:8,rewardItem:"BlueprintDeadlyRelic",rewardValue:1}],expiresSeconds:bi(5),progress:(R,t)=>R.difficulty===5&&t.encounterIndex===R.encounters.length-1&&t.victory?1:0},beat_five_star_missions_resources:{type:"mission",description:"Beat Five Star Missions",rewardTiers:[{goal:3,rewardItem:"Stone",rewardValue:120},{goal:7,rewardItem:"Wood",rewardValue:800},{goal:12,rewardItem:"Ore",rewardValue:4325}],expiresSeconds:bi(5),progress:(R,t)=>R.difficulty===5&&t.encounterIndex===R.encounters.length-1&&t.victory?1:0},refuse_skill_bargains:{type:"mission",description:"Refuse Skill Bargains",rewardTiers:[{goal:2,rewardItem:"Gold",rewardValue:600},{goal:3,rewardItem:"Gold",rewardValue:1e3},{goal:5,rewardItem:"Gold",rewardValue:3800}],progress:iB(He.SkillBargain)}},ur=Object.keys(h1).reduce((R,t)=>{const c=h1[t];return R[t]={expiresSeconds:sB,...c,id:t},R},{}),aB={skills:[],encounterIndex:0};var cp=(R=>(R[R.Accepted=0]="Accepted",R[R.Refused=1]="Refused",R))(cp||{});async function nB({postMessage:R,quests:t,updateQuestProgressAsync:c,inventoryProvider:v,state:x,postId:b,sessionId:h,playerLevel:w,mission:e,action:i,battlePassExpiration:u}){const n={...x},{encounterIndex:r,victory:a,chosenSkill:s}=i;s&&(n.skills=[...x.skills,s]);let o=[];if(a){n.encounterIndex=x.encounterIndex+1;const m=e.encounters[r];if(m.type===He.Enemy||m.type===He.CrossroadsFight||m.type===He.Boss||m.type===He.Treasure||m.type===He.Investigate){const g=fw({postId:b,sessionId:h,encounterIndex:r});let p=await v.queryAsync();const y=Object.values(p.equippedItems).filter(A=>!!A),S=hr($C.GoldEarnRate,"GoldEarnRate",y,n.skills);if(m.type===He.Treasure)o=gw(e,m,g);else if(m.type===He.Investigate){if(i.choiceIndex===1)console.log("Player chose not to investigate encounter, no loot");else if(g.next()<m.bonusChance){const A=m.bonusResourceType||"Gold",M=A==="Gold"?S:1;o=[{id:A,quantity:Math.floor(m.bonusGold*M)}],console.log("Investigate encounter granted bonus loot: ",o)}}else m.type===He.CrossroadsFight&&i.choiceIndex===1?console.log("Player chose to flee from crossroads fight, no loot"):o=mw(e,m,w,S,u,g);o.length===0&&console.warn(`No loot rolled for encounter index ${r}`);const C=o.map(A=>{const M=Lt.ItemDefinitions[A.id],L=mr(M.id)?Lt.CURRENCY_BAG_ID:Lt.DEFAULT_BAG_ID;return{type:"itemAdded",id:Lt.generateId(g),itemDefinitionId:A.id,bagId:L,amount:M.isStackable?A.quantity:void 0}}).filter(A=>A!==null);if(C.length>0){const A=await v.persistActionsAsync(C);A.ok?p=A.inventory:(console.error("Invalid action",A.error),o=[]),v.sendClientUpdateAsync()}}}const d=Object.values(ur).filter(m=>t.includes(m.id)),l=[He.Enemy,He.Boss,He.CrossroadsFight,He.RushBoss],f=m=>{if(l.includes(m.type))return m};for(const m of d){let g=0;if(m.type==="mission")g=m.progress(e,i);else if(m.type==="enemy"){const p=f(e.encounters[r]);if(p!=null&&p.enemies)for(const y of p.enemies)g+=m.progress(y,i)}else if(m.type==="loot")for(const p of o)g+=m.progress(Lt.ItemDefinitions[p.id],p.quantity,i);if(g>0){console.log(`Quest ${m.id} progress: ${g}`);const p=await c(m.id,g);R({type:"questProgressUpdate",questProgress:p})}}return n}const rB={golemBaby:{id:"golemBaby",spineAssetKey:"golem_baby",damageType:"physical",baseHp:15,hpGrowth:1.1,baseDamage:10,damageGrowth:1.1,baseDefense:5,defenseGrowth:1.05,speed:8,crit:0,dodge:0,lightningResist:.3,shadowResist:.2,lootTables:[vt.golemLoot],tags:["golem"]},slimeKnight:{id:"slimeKnight",spineAssetKey:"slime_knight",damageType:"physical",baseHp:24,hpGrowth:1.15,baseDamage:12,damageGrowth:1.1,baseDefense:7,defenseGrowth:1.05,speed:11,crit:.03,dodge:0,lightningResist:.3,iceResist:.3,fireResist:-.2,lootTables:[vt.slimeLoot],tags:["slime","armed"]},slimeBigMouth:{id:"slimeBigMouth",spineAssetKey:"slime_bigMouth",damageType:"physical",baseHp:32,hpGrowth:1.1,baseDamage:13,damageGrowth:1.1,baseDefense:5,defenseGrowth:1.05,speed:11,crit:0,dodge:0,lightningResist:.3,iceResist:.3,fireResist:-.2,lootTables:[vt.slimeLoot],tags:["slime","blue"]},slimeCat:{id:"slimeCat",spineAssetKey:"slime_cat",damageType:"physical",baseHp:28,hpGrowth:1.1,baseDamage:13,damageGrowth:1.1,baseDefense:4,defenseGrowth:1.05,speed:12,crit:0,dodge:.03,lightningResist:.3,iceResist:.3,fireResist:-.2,lootTables:[vt.slimeLoot],tags:["slime"]},slimeGems:{id:"slimeGems",spineAssetKey:"slime_gems",damageType:"physical",baseHp:28,hpGrowth:1.1,baseDamage:14,damageGrowth:1.1,baseDefense:10,defenseGrowth:1.05,speed:7,crit:0,dodge:.03,lightningResist:.3,iceResist:.3,fireResist:-.2,lootTables:[vt.slimeLoot],tags:["slime","armed"]},skeleton:{id:"skeleton",spineAssetKey:"skeleton",damageType:"physical",baseHp:24,hpGrowth:1.1,baseDamage:11,damageGrowth:1.1,baseDefense:4,defenseGrowth:1.05,speed:10,crit:0,dodge:0,lightningResist:-.2,iceResist:-.2,fireResist:.3,shadowResist:.3,lootTables:[vt.skeletonLoot],tags:["skeleton","armed"]},skelNoHead:{id:"skelNoHead",spineAssetKey:"skel_noHead",damageType:"physical",baseHp:30,hpGrowth:1.5,baseDamage:18,damageGrowth:1.2,baseDefense:6,defenseGrowth:1.05,speed:9,crit:0,dodge:.03,iceResist:-.2,fireResist:.3,shadowResist:.3,lootTables:[vt.skeletonLoot],tags:["skeleton"]},golemMountain:{id:"golemMountain",spineAssetKey:"golem_mountain",damageType:"physical",baseHp:29,hpGrowth:1.5,baseDamage:25,damageGrowth:1.35,baseDefense:10,defenseGrowth:1.25,speed:8,crit:0,dodge:0,lightningResist:.3,shadowResist:.2,lootTables:[vt.golemLoot],tags:["golem","armed"]},golemMountainLucky:{id:"golemMountainLucky",spineAssetKey:"golem_mountain",damageType:"physical",baseHp:29,hpGrowth:1.5,baseDamage:25,damageGrowth:1.35,baseDefense:10,defenseGrowth:1.25,speed:8,crit:0,dodge:0,lightningResist:.3,shadowResist:.2,lootTables:[vt.golemLuckyLoot],tags:["golem","armed"]},golemBoar:{id:"golemBoar",spineAssetKey:"golem_boar",damageType:"physical",baseHp:22,hpGrowth:1.1,baseDamage:14,damageGrowth:1.15,baseDefense:8,defenseGrowth:1.1,speed:9,crit:0,dodge:0,lightningResist:.3,shadowResist:.2,lootTables:[vt.golemLoot],tags:["golem"]},skelFireHead:{id:"skelFireHead",spineAssetKey:"skel_fireHead",damageType:"fire",baseHp:50,hpGrowth:5.5,baseDamage:12,damageGrowth:.8,baseDefense:5,defenseGrowth:4.25,speed:9,crit:0,dodge:0,lightningResist:-.3,iceResist:-.3,fireResist:.6,shadowResist:-.3,lootTables:[vt.fireHeadBossLoot],abilities:["BossBrain_SkeletonFireHead"],tags:["boss","skeleton","red"]},skelIceHead:{id:"skelIceHead",spineAssetKey:"skel_iceHead",damageType:"ice",baseHp:100,hpGrowth:5.5,baseDamage:20,damageGrowth:.9,baseDefense:15,defenseGrowth:3.75,speed:9,crit:0,dodge:0,lightningResist:-.3,iceResist:.6,fireResist:-.3,shadowResist:-.3,lootTables:[vt.fireHeadBossLoot],abilities:["BossBrain_SkeletonIceHead"],tags:["boss","skeleton","blue"]},skelArcher:{id:"skelArcher",spineAssetKey:"skel_archer",damageType:"physical",baseHp:28,hpGrowth:1.1,baseDamage:12,damageGrowth:1.15,baseDefense:5,defenseGrowth:1.05,speed:12,crit:0,dodge:0,iceResist:-.2,fireResist:.3,shadowResist:.3,lootTables:[vt.skeletonLoot],tags:["skeleton","armed"]},skel2Axe:{id:"skel2Axe",spineAssetKey:"skel_2Axe",damageType:"physical",baseHp:34,hpGrowth:1.5,baseDamage:18,damageGrowth:1.5,baseDefense:9,defenseGrowth:1.15,speed:8,crit:0,dodge:0,lightningResist:-.2,iceResist:-.2,fireResist:.3,shadowResist:.3,lootTables:[vt.skeletonLoot],tags:["skeleton","armed"]},slimeBone:{id:"slimeBone",spineAssetKey:"slime_bone",damageType:"physical",baseHp:22,hpGrowth:1.1,baseDamage:18,damageGrowth:1.1,baseDefense:7,defenseGrowth:1.05,speed:8,crit:0,dodge:.03,lightningResist:.3,iceResist:.3,fireResist:-.2,lootTables:[vt.slimeLoot],tags:["slime"]},slimeBoneLucky:{id:"slimeBoneLucky",spineAssetKey:"slime_bone",damageType:"physical",baseHp:22,hpGrowth:1.1,baseDamage:18,damageGrowth:1.1,baseDefense:7,defenseGrowth:1.05,speed:8,crit:0,dodge:.03,lightningResist:.3,iceResist:.3,fireResist:-.2,lootTables:[vt.slimeLuckyLoot],tags:["slime"]},mushroomSmall:{id:"mushroomSmall",spineAssetKey:"mushroom_small",damageType:"physical",baseHp:28,hpGrowth:1.1,baseDamage:10,damageGrowth:1.1,baseDefense:3,defenseGrowth:1.05,speed:11,crit:0,dodge:0,lootTables:[vt.mushroomLoot],tags:["mushroom"]},mushroomLarge:{id:"mushroomLarge",spineAssetKey:"mushroom_large",damageType:"physical",baseHp:90,hpGrowth:3.5,baseDamage:20,damageGrowth:2.7,baseDefense:6,defenseGrowth:2.25,speed:8,crit:0,dodge:0,lootTables:[vt.mushroomLargeEliteLoot],tags:["mushroom","elite"]},mushroomLargeBoss:{id:"mushroomLargeBoss",spineAssetKey:"mushroom_large",damageType:"physical",baseHp:25,hpGrowth:5.5,baseDamage:45,damageGrowth:1.6,baseDefense:8,defenseGrowth:3,speed:9,crit:0,dodge:0,lightningResist:-.3,iceResist:.3,fireResist:.3,lootTables:[vt.mushroomLargeBossLoot],abilities:["BossBrain_MushroomLargeBoss"],tags:["boss","mushroom"]},skelWizard:{id:"skelWizard",spineAssetKey:"skel_wizard",damageType:"physical",baseHp:30,hpGrowth:1.1,baseDamage:12,damageGrowth:1.2,baseDefense:5,defenseGrowth:1.05,speed:6,crit:.03,dodge:0,iceResist:-.2,fireResist:.3,shadowResist:.3,lootTables:[vt.skeletonLoot],tags:["skeleton"]},skelGreatSword:{id:"skelGreatSword",spineAssetKey:"skel_greatSword",damageType:"physical",baseHp:25,hpGrowth:1.5,baseDamage:21,damageGrowth:1.5,baseDefense:9,defenseGrowth:1.15,speed:5,crit:.03,dodge:0,lightningResist:-.2,iceResist:-.2,fireResist:.3,shadowResist:.3,lootTables:[vt.skeletonLoot],tags:["skeleton","armed"]},skelGreatSwordLucky:{id:"skelGreatSwordLucky",spineAssetKey:"skel_greatSword",damageType:"physical",baseHp:25,hpGrowth:1.5,baseDamage:21,damageGrowth:1.5,baseDefense:9,defenseGrowth:1.15,speed:5,crit:.03,dodge:0,lightningResist:-.2,iceResist:-.2,fireResist:.3,shadowResist:.3,lootTables:[vt.skeletonLuckyLoot],tags:["skeleton","armed"]},skelAssassin:{id:"skelAssassin",spineAssetKey:"skel_assassin",damageType:"physical",baseHp:32,hpGrowth:1.1,baseDamage:19,damageGrowth:1.2,baseDefense:6,defenseGrowth:1,speed:13,crit:0,dodge:.03,lightningResist:-.2,lootTables:[vt.skeletonLoot],tags:["skeleton","armed"]},cannibal:{id:"cannibal",spineAssetKey:"cannibal",damageType:"physical",baseHp:24,hpGrowth:1.5,baseDamage:18,damageGrowth:1.35,baseDefense:8,defenseGrowth:1.05,speed:8,crit:.03,dodge:0,iceResist:.2,fireResist:.2,lootTables:[vt.darkLoot],tags:["dark"]},darkBat:{id:"darkBat",spineAssetKey:"dark_bat",damageType:"physical",baseHp:22,hpGrowth:1.1,baseDamage:15,damageGrowth:1.1,baseDefense:5,defenseGrowth:1.05,speed:15,crit:0,dodge:0,iceResist:.2,fireResist:.2,lootTables:[vt.darkLoot],tags:["dark"]},darkShaman:{id:"darkShaman",spineAssetKey:"dark_shaman",damageType:"shadow",baseHp:24,hpGrowth:1.5,baseDamage:10,damageGrowth:.8,baseDefense:9,defenseGrowth:1.05,speed:9,crit:.03,dodge:0,iceResist:.2,fireResist:.2,lootTables:[vt.darkLoot],tags:["dark"]},darkChild:{id:"darkChild",spineAssetKey:"dark_child",damageType:"physical",baseHp:25,hpGrowth:1.15,baseDamage:16,damageGrowth:1.15,baseDefense:4,defenseGrowth:1,speed:5,crit:0,dodge:0,iceResist:.2,fireResist:.2,lootTables:[vt.darkLoot],tags:["dark"]},darkBigGuy:{id:"darkBigGuy",spineAssetKey:"dark_bigGuy",damageType:"physical",baseHp:28,hpGrowth:1.5,baseDamage:19,damageGrowth:1.35,baseDefense:8,defenseGrowth:1,speed:11,crit:.03,dodge:0,iceResist:.2,fireResist:.2,lootTables:[vt.darkLoot],tags:["dark"]},darkBigGuyLucky:{id:"darkBigGuyLucky",spineAssetKey:"dark_bigGuy",damageType:"physical",baseHp:28,hpGrowth:1.5,baseDamage:19,damageGrowth:1.35,baseDefense:8,defenseGrowth:1,speed:11,crit:.03,dodge:0,iceResist:.2,fireResist:.2,lootTables:[vt.darkLuckyLoot],tags:["dark"]},darkHand:{id:"darkHand",spineAssetKey:"dark_hand",damageType:"shadow",baseHp:20,hpGrowth:1.1,baseDamage:8,damageGrowth:.7,baseDefense:4,defenseGrowth:1.05,speed:8,crit:0,dodge:0,iceResist:.2,fireResist:.2,lootTables:[vt.darkLoot],tags:["dark"]},darkWizard:{id:"darkWizard",spineAssetKey:"dark_wiz",damageType:"shadow",baseHp:32,hpGrowth:1.1,baseDamage:14,damageGrowth:.7,baseDefense:4,defenseGrowth:1,speed:10,crit:.03,dodge:0,iceResist:.2,fireResist:.2,lootTables:[vt.darkLoot],tags:["dark"]},darkGiantHorns:{id:"darkGiantHorns",spineAssetKey:"dark_giantHorns",damageType:"physical",baseHp:100,hpGrowth:3.75,baseDamage:31,damageGrowth:2.5,baseDefense:15,defenseGrowth:3,speed:11,crit:.05,dodge:0,iceResist:.2,fireResist:.2,shadowResist:.3,lootTables:[vt.darkBossLoot],abilities:["LightningOnCrit"],tags:["dark","elite"]},darkWorm:{id:"darkWorm",spineAssetKey:"dark_worm",damageType:"physical",baseHp:36,hpGrowth:1.1,baseDamage:19,damageGrowth:1.1,baseDefense:5,defenseGrowth:1.05,speed:8,crit:0,dodge:0,iceResist:.2,fireResist:.2,lootTables:[vt.darkLoot],tags:["dark"]},darkSpider:{id:"darkSpider",spineAssetKey:"dark_spider",damageType:"physical",baseHp:20,hpGrowth:1.1,baseDamage:11,damageGrowth:1.1,baseDefense:3,defenseGrowth:1.05,speed:9,crit:0,dodge:.03,iceResist:.2,fireResist:.2,lootTables:[vt.darkLoot],tags:["dark"]},darkDemon:{id:"darkDemon",spineAssetKey:"dark_demon",damageType:"shadow",baseHp:120,hpGrowth:4.25,baseDamage:15,damageGrowth:.9,baseDefense:12,defenseGrowth:4,speed:9,crit:0,dodge:.03,lightningResist:-.3,shadowResist:.3,lootTables:[vt.darkDemonBossLoot],abilities:["BossBrain_DarkDemon"],tags:["boss","dark","armed"]},mushroomChild:{id:"mushroomChild",spineAssetKey:"mushroom_child",damageType:"physical",baseHp:25,hpGrowth:1.1,baseDamage:6,damageGrowth:1.1,baseDefense:4,defenseGrowth:1.05,speed:9,crit:0,dodge:.03,lootTables:[vt.mushroomLoot],tags:["mushroom"]},mushroomFrog:{id:"mushroomFrog",spineAssetKey:"mushroom_frog",damageType:"physical",baseHp:34,hpGrowth:1.1,baseDamage:10,damageGrowth:1.1,baseDefense:6,defenseGrowth:1.05,speed:7,crit:0,dodge:0,lootTables:[vt.mushroomLoot],tags:["mushroom","blue"]},mushroomSoldierLucky:{id:"mushroomSoldierLucky",spineAssetKey:"mushroom_soldier",damageType:"physical",baseHp:36,hpGrowth:1.1,baseDamage:17,damageGrowth:1.2,baseDefense:6,defenseGrowth:1.05,speed:8,crit:0,dodge:0,lootTables:[vt.mushroomLuckyLoot],tags:["mushroom","armed","red"]},mushroomSoldier:{id:"mushroomSoldier",spineAssetKey:"mushroom_soldier",damageType:"physical",baseHp:36,hpGrowth:1.3,baseDamage:17,damageGrowth:1.2,baseDefense:6,defenseGrowth:1.05,speed:8,crit:0,dodge:0,lootTables:[vt.mushroomLoot],tags:["mushroom","armed","red"]},livingArmor:{id:"livingArmor",spineAssetKey:"livingArmor",damageType:"lightning",baseHp:175,hpGrowth:4,baseDamage:30,damageGrowth:.8,baseDefense:15,defenseGrowth:3.75,speed:10,crit:.03,dodge:0,lightningResist:.3,iceResist:-.3,fireResist:.3,shadowResist:.6,lootTables:[vt.livingArmorBossLoot],abilities:["BossBrain_LivingArmor"],tags:["boss","skeleton","armed"]},mushroomMonster:{id:"mushroomMonster",spineAssetKey:"mushroom_monster",damageType:"physical",baseHp:35,hpGrowth:1.1,baseDamage:17,damageGrowth:1.2,baseDefense:6,defenseGrowth:1.05,speed:8,crit:0,dodge:0,lootTables:[vt.mushroomLoot],tags:["mushroom"]},mushroomTeeth:{id:"mushroomTeeth",spineAssetKey:"mushroom_teeth",damageType:"physical",baseHp:27,hpGrowth:1.1,baseDamage:20,damageGrowth:1.15,baseDefense:6,defenseGrowth:1.05,speed:8,crit:0,dodge:0,lootTables:[vt.mushroomLoot],tags:["mushroom"]},woodGolem:{id:"woodGolem",spineAssetKey:"wood_golem",damageType:"physical",baseHp:180,hpGrowth:5.5,baseDamage:25,damageGrowth:.8,baseDefense:8,defenseGrowth:5,speed:9,crit:0,dodge:0,lightningResist:.6,iceResist:.4,fireResist:-.3,lootTables:[vt.woodGolemBossLoot],abilities:["BossBrain_WoodGolem"],tags:["boss","golem"]},icyWoodGolem:{id:"icyWoodGolem",spineAssetKey:"icyWood_golem",damageType:"ice",baseHp:180,hpGrowth:5.5,baseDamage:25,damageGrowth:.8,baseDefense:8,defenseGrowth:5,speed:9,crit:0,dodge:0,lightningResist:.6,iceResist:-.3,fireResist:.3,lootTables:[vt.woodGolemBossLoot],abilities:["BossBrain_IcyWoodGolem"],tags:["boss","golem"]},woodOctopus:{id:"woodOctopus",spineAssetKey:"wood_octopus",damageType:"physical",baseHp:23,hpGrowth:1.1,baseDamage:14,damageGrowth:1.1,baseDefense:6,defenseGrowth:1.05,speed:8,crit:0,dodge:0,lightningResist:.3,shadowResist:.2,lootTables:[vt.golemLoot],tags:["golem"]},woodRoof:{id:"woodRoof",spineAssetKey:"wood_roof",damageType:"physical",baseHp:41,hpGrowth:1.6,baseDamage:17,damageGrowth:1.5,baseDefense:6,defenseGrowth:1.3,speed:8,crit:0,dodge:0,lightningResist:.3,shadowResist:.2,lootTables:[vt.golemLoot],tags:["golem"]},robotNo1:{id:"robotNo1",spineAssetKey:"robot_no1",damageType:"lightning",baseHp:21,hpGrowth:1.2,baseDamage:7,damageGrowth:.75,baseDefense:6,defenseGrowth:1.2,speed:10,crit:0,dodge:0,lightningResist:.2,lootTables:[vt.robotLoot],tags:["robot"]},robotNo2:{id:"robotNo2",spineAssetKey:"robot_no2",damageType:"physical",baseHp:24,hpGrowth:1.2,baseDamage:12,damageGrowth:1.1,baseDefense:8,defenseGrowth:1.2,speed:9,crit:0,dodge:0,iceResist:.2,fireResist:.2,shadowResist:.2,lootTables:[vt.robotLoot],tags:["robot"]},robotNo3:{id:"robotNo3",spineAssetKey:"robot_no3",damageType:"physical",baseHp:26,hpGrowth:1.25,baseDamage:20,damageGrowth:1.1,baseDefense:7,defenseGrowth:1.2,speed:6,crit:.03,dodge:0,shadowResist:.2,lootTables:[vt.robotLoot],tags:["robot"]},robotNo4:{id:"robotNo4",spineAssetKey:"robot_no4",damageType:"ice",baseHp:26,hpGrowth:1.5,baseDamage:12,damageGrowth:.75,baseDefense:8,defenseGrowth:1.1,speed:10,crit:0,dodge:.03,lightningResist:-.3,iceResist:.3,fireResist:-.3,lootTables:[vt.robotLoot],tags:["robot"]},robotNo5:{id:"robotNo5",spineAssetKey:"robot_no5",damageType:"fire",baseHp:27,hpGrowth:1.5,baseDamage:10,damageGrowth:.8,baseDefense:12,defenseGrowth:1.2,speed:7,crit:.03,dodge:0,iceResist:-.3,fireResist:.3,lootTables:[vt.robotLoot],tags:["robot"]},robotNo5Lucky:{id:"robotNo5Lucky",spineAssetKey:"robot_no5",damageType:"fire",baseHp:27,hpGrowth:1.5,baseDamage:10,damageGrowth:.8,baseDefense:12,defenseGrowth:1.2,speed:7,crit:.03,dodge:0,iceResist:-.3,fireResist:.3,lootTables:[vt.robotLuckyLoot],tags:["robot"]},robotNo6:{id:"robotNo6",spineAssetKey:"robot_no6",damageType:"fire",baseHp:150,hpGrowth:5.25,baseDamage:28,damageGrowth:.8,baseDefense:12,defenseGrowth:4,speed:9,crit:.03,dodge:0,lightningResist:-.2,iceResist:-.2,fireResist:.5,shadowResist:.3,lootTables:[vt.robotNo6BossLoot],abilities:["BossBrain_RobotNo6"],tags:["boss","robot"]},robotNo7:{id:"robotNo7",spineAssetKey:"robot_no7",damageType:"physical",baseHp:22,hpGrowth:1.1,baseDamage:19,damageGrowth:1.1,baseDefense:6,defenseGrowth:1.05,speed:8,crit:0,dodge:.03,lightningResist:-.3,fireResist:.3,lootTables:[vt.robotLoot],tags:["robot"]},robotBoss:{id:"robotBoss",spineAssetKey:"robot_boss",damageType:"lightning",baseHp:250,hpGrowth:6.5,baseDamage:36,damageGrowth:.8,baseDefense:12,defenseGrowth:4,speed:8,crit:.04,dodge:0,iceResist:-.3,fireResist:.3,lootTables:[vt.robotBossBossLoot],abilities:["BossBrain_RobotBoss"],tags:["boss","robot"]}},yn=rB;function Fw(R,t,c){const v=Math.max(t.minLevel,Math.min(c,t.maxLevel));return Math.max(1,v+R.level)}function oB(R,t){if(t<1)throw new Error("Enemy level less than 1!");const c=Math.round(R.baseHp+R.hpGrowth*Math.pow(t,1.27)),v=Math.round(R.baseDefense+R.defenseGrowth*Math.pow(t,1.15)),x=new qh(c,c,0,v,R.speed,R.dodge,R.crit,t);return x.ShadowResist=R.shadowResist??0,x.IceResist=R.iceResist??0,x.LightningResist=R.lightningResist??0,x.FireResist=R.fireResist??0,x}function lB(R,t){const c=Math.round(R.baseDamage+R.damageGrowth*Math.pow(t,1.1)),v=R.damageType||"physical";return{physical:v==="physical"?c:0,shadow:v==="shadow"?c:0,fire:v==="fire"?c:0,lightning:v==="lightning"?c:0,ice:v==="ice"?c:0}}const Rn={next:()=>Math.random(),intBetween:(R,t)=>Math.floor(Math.random()*(t-R+1))+R,floatBetween:(R,t)=>R+Math.random()*(t-R)};function Tc(R,t=Rn){const c=R.reduce((x,b)=>x+b.weight,0);let v=t.next()*c;for(const x of R){if(v<x.weight)return x.value;v-=x.weight}return R[R.length-1].value}function hB(R,t,c=Rn){const v=[],x=[...R];for(let b=0;b<t&&x.length>0;b++){const h=Tc(x,c);v.push(h);const w=x.findIndex(e=>e.value===h);x.splice(w,1)}return v}function dB(R,t,c=Rn){const v=[],x=[...R];for(let b=0;b<t&&x.length>0;b++){const h=Tc(x,c);v.push(h)}return v}function uB(R,t){return R.find(c=>t>=c.minLevel&&(c.maxLevel===void 0||t<=c.maxLevel))??null}function Iw(R,t,c,v=Rn){const x=uB(R.tiers,t);if(!x)return[];const b=x.items;switch(R.type){case"always":return b.flatMap(h=>yu(h,t,c,v));case"oneOf":{const h=Tc(b.map(w=>({value:w,weight:w.weight??1})),v);return yu(h,t,c,v)}case"manyOf":{const h=typeof R.count=="number"?R.count:Array.isArray(R.count)?v.intBetween(R.count[0],R.count[1]):1;return hB(b.map(e=>({value:e,weight:e.weight??1})),h,v).flatMap(e=>yu(e,t,c,v))}case"manyOfRepeats":{const h=typeof R.count=="number"?R.count:Array.isArray(R.count)?v.intBetween(R.count[0],R.count[1]):1;return dB(b.map(e=>({value:e,weight:e.weight??1})),h,v).flatMap(e=>yu(e,t,c,v))}default:return[]}}function cB(R,t=Rn){if(R===void 0)return 1;if(typeof R=="number")return R;const[c,v]=R;return t.intBetween(c,v)}function yu(R,t,c,v=Rn){if("id"in R)return[{id:R.id,quantity:cB(R.quantity,v)}];if("tableId"in R){const x=c[R.tableId];if(!x)throw new Error(`Unknown nested loot table: ${R.tableId}`);return Iw(x,t,c,v)}return[]}function nr(R,t,c,v=Rn){return R.flatMap(x=>Iw(x,t,c,v))}function fB(R,t,c,v=Rn){const x=R.map(b=>{const h=c[b];if(!h)throw new Error(`Unknown loot table ID: ${b}`);return h});return nr(x,t,c,v)}const d1={haunted_forest:{type:"oneOf",tiers:[{minLevel:1,maxLevel:20,items:[{id:"skeleton",weight:10},{id:"skelNoHead",weight:8},{id:"skelArcher",weight:5},{id:"skelAssassin",weight:5},{id:"skelWizard",weight:2},{id:"darkBat",weight:10},{id:"darkHand",weight:10},{id:"darkShaman",weight:8},{id:"darkWorm",weight:8},{id:"darkChild",weight:5},{id:"darkSpider",weight:5},{id:"darkBigGuyLucky",weight:1}]},{minLevel:21,maxLevel:40,items:[{id:"skeleton",weight:10},{id:"skelNoHead",weight:10},{id:"skelArcher",weight:10},{id:"skelAssassin",weight:10},{id:"skelWizard",weight:5},{id:"skel2Axe",weight:5},{id:"skelGreatSwordLucky",weight:1},{id:"darkBat",weight:7},{id:"darkHand",weight:7},{id:"darkShaman",weight:7},{id:"darkWorm",weight:12},{id:"darkChild",weight:12},{id:"darkSpider",weight:12},{id:"cannibal",weight:12},{id:"darkWizard",weight:5}]},{minLevel:41,maxLevel:60,items:[{id:"skeleton",weight:4},{id:"skelNoHead",weight:4},{id:"skelArcher",weight:10},{id:"skelAssassin",weight:10},{id:"skelWizard",weight:13},{id:"skel2Axe",weight:13},{id:"skelGreatSword",weight:5},{id:"skelGreatSwordLucky",weight:1},{id:"darkBat",weight:4},{id:"darkHand",weight:4},{id:"darkShaman",weight:4},{id:"darkWorm",weight:11},{id:"darkChild",weight:11},{id:"darkSpider",weight:13},{id:"cannibal",weight:13},{id:"darkWizard",weight:13},{id:"darkBigGuy",weight:5},{id:"darkBigGuyLucky",weight:1}]},{minLevel:61,items:[{id:"skeleton",weight:2},{id:"skelNoHead",weight:2},{id:"skelArcher",weight:13},{id:"skelAssassin",weight:5},{id:"skelWizard",weight:5},{id:"skel2Axe",weight:13},{id:"skelGreatSword",weight:13},{id:"skelGreatSwordLucky",weight:1},{id:"darkBat",weight:4},{id:"darkHand",weight:4},{id:"darkShaman",weight:4},{id:"darkWorm",weight:11},{id:"darkChild",weight:11},{id:"darkSpider",weight:13},{id:"cannibal",weight:13},{id:"darkWizard",weight:13},{id:"darkBigGuy",weight:13},{id:"darkBigGuyLucky",weight:1}]}]},outer_temple:{type:"oneOf",tiers:[{minLevel:1,maxLevel:20,items:[{id:"skeleton",weight:30},{id:"skelAssassin",weight:30},{id:"darkShaman",weight:20},{id:"mushroomSoldier",weight:20},{id:"slimeKnight",weight:6},{id:"slimeGems",weight:6},{id:"skel2Axe",weight:6},{id:"skelGreatSword",weight:6},{id:"golemMountainLucky",weight:1},{id:"slimeBoneLucky",weight:1},{id:"mushroomSoldierLucky",weight:1},{id:"darkBigGuyLucky",weight:1},{id:"skelGreatSwordLucky",weight:1}]},{minLevel:21,maxLevel:40,items:[{id:"skeleton",weight:30},{id:"skelAssassin",weight:30},{id:"darkShaman",weight:20},{id:"mushroomSoldier",weight:20},{id:"slimeKnight",weight:6},{id:"slimeGems",weight:6},{id:"skel2Axe",weight:6},{id:"skelGreatSword",weight:6},{id:"golemMountainLucky",weight:1},{id:"slimeBoneLucky",weight:1},{id:"mushroomSoldierLucky",weight:1},{id:"darkBigGuyLucky",weight:1},{id:"skelGreatSwordLucky",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"skeleton",weight:30},{id:"skelAssassin",weight:30},{id:"darkShaman",weight:20},{id:"mushroomSoldier",weight:20},{id:"slimeKnight",weight:6},{id:"slimeGems",weight:6},{id:"skel2Axe",weight:6},{id:"skelGreatSword",weight:6},{id:"golemMountainLucky",weight:1},{id:"slimeBoneLucky",weight:1},{id:"mushroomSoldierLucky",weight:1},{id:"darkBigGuyLucky",weight:1},{id:"skelGreatSwordLucky",weight:1}]},{minLevel:61,items:[{id:"skeleton",weight:30},{id:"skelAssassin",weight:30},{id:"darkShaman",weight:20},{id:"mushroomSoldier",weight:20},{id:"slimeKnight",weight:6},{id:"slimeGems",weight:6},{id:"skel2Axe",weight:6},{id:"skelGreatSword",weight:6},{id:"golemMountainLucky",weight:1},{id:"slimeBoneLucky",weight:1},{id:"mushroomSoldierLucky",weight:1},{id:"darkBigGuyLucky",weight:1},{id:"skelGreatSwordLucky",weight:1}]}]},seaside_cliffs:{type:"oneOf",tiers:[{minLevel:1,maxLevel:20,items:[{id:"slimeCat",weight:10},{id:"slimeBigMouth",weight:10},{id:"slimeBone",weight:5},{id:"slimeKnight",weight:5},{id:"slimeGems",weight:2}]},{minLevel:21,maxLevel:40,items:[{id:"slimeCat",weight:10},{id:"slimeBigMouth",weight:10},{id:"slimeBone",weight:5},{id:"slimeKnight",weight:5},{id:"slimeGems",weight:2},{id:"slimeBoneLucky",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"slimeCat",weight:7},{id:"slimeBigMouth",weight:7},{id:"slimeBone",weight:7},{id:"slimeKnight",weight:12},{id:"slimeGems",weight:12},{id:"slimeBoneLucky",weight:1}]},{minLevel:61,items:[{id:"slimeCat",weight:4},{id:"slimeBigMouth",weight:4},{id:"slimeBone",weight:11},{id:"slimeKnight",weight:11},{id:"slimeGems",weight:13},{id:"slimeBoneLucky",weight:1}]}]},mossy_forest:{type:"oneOf",tiers:[{minLevel:1,maxLevel:5,items:[{id:"darkBat",weight:11},{id:"darkHand",weight:10},{id:"darkShaman",weight:4},{id:"darkWorm",weight:4},{id:"darkChild",weight:2}]},{minLevel:6,maxLevel:20,items:[{id:"darkBat",weight:10},{id:"darkHand",weight:10},{id:"darkShaman",weight:8},{id:"darkWorm",weight:8},{id:"darkChild",weight:5},{id:"darkSpider",weight:5},{id:"darkBigGuyLucky",weight:1}]},{minLevel:21,maxLevel:40,items:[{id:"darkBat",weight:7},{id:"darkHand",weight:7},{id:"darkShaman",weight:7},{id:"darkWorm",weight:12},{id:"darkChild",weight:12},{id:"darkSpider",weight:12},{id:"cannibal",weight:12},{id:"darkWizard",weight:5}]},{minLevel:41,maxLevel:60,items:[{id:"darkBat",weight:4},{id:"darkHand",weight:4},{id:"darkShaman",weight:4},{id:"darkWorm",weight:11},{id:"darkChild",weight:11},{id:"darkSpider",weight:13},{id:"cannibal",weight:13},{id:"darkWizard",weight:13},{id:"darkBigGuy",weight:5},{id:"darkBigGuyLucky",weight:1}]},{minLevel:61,items:[{id:"darkBat",weight:4},{id:"darkHand",weight:4},{id:"darkShaman",weight:4},{id:"darkWorm",weight:11},{id:"darkChild",weight:11},{id:"darkSpider",weight:13},{id:"cannibal",weight:13},{id:"darkWizard",weight:13},{id:"darkBigGuy",weight:13},{id:"darkBigGuyLucky",weight:1}]}]},ruined_path:{type:"oneOf",tiers:[{minLevel:1,maxLevel:20,items:[{id:"skeleton",weight:10},{id:"skelNoHead",weight:10},{id:"skelArcher",weight:5},{id:"skelAssassin",weight:5},{id:"skelWizard",weight:2}]},{minLevel:21,maxLevel:40,items:[{id:"skeleton",weight:10},{id:"skelNoHead",weight:10},{id:"skelArcher",weight:10},{id:"skelAssassin",weight:10},{id:"skelWizard",weight:5},{id:"skel2Axe",weight:5},{id:"skelGreatSwordLucky",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"skeleton",weight:4},{id:"skelNoHead",weight:4},{id:"skelArcher",weight:10},{id:"skelAssassin",weight:10},{id:"skelWizard",weight:13},{id:"skel2Axe",weight:13},{id:"skelGreatSword",weight:5},{id:"skelGreatSwordLucky",weight:1}]},{minLevel:61,items:[{id:"skeleton",weight:2},{id:"skelNoHead",weight:2},{id:"skelArcher",weight:13},{id:"skelAssassin",weight:5},{id:"skelWizard",weight:5},{id:"skel2Axe",weight:13},{id:"skelGreatSword",weight:13},{id:"skelGreatSwordLucky",weight:1}]}]},fields:{type:"oneOf",tiers:[{minLevel:1,maxLevel:5,items:[{id:"mushroomChild",weight:10},{id:"mushroomSmall",weight:10},{id:"mushroomFrog",weight:7},{id:"mushroomTeeth",weight:4}]},{minLevel:6,maxLevel:20,items:[{id:"mushroomChild",weight:10},{id:"mushroomSmall",weight:10},{id:"mushroomFrog",weight:10},{id:"mushroomTeeth",weight:10},{id:"mushroomMonster",weight:5},{id:"mushroomSoldierLucky",weight:1}]},{minLevel:21,maxLevel:40,items:[{id:"mushroomChild",weight:7},{id:"mushroomSmall",weight:7},{id:"mushroomFrog",weight:10},{id:"mushroomTeeth",weight:10},{id:"mushroomMonster",weight:10},{id:"mushroomSoldier",weight:10},{id:"mushroomSoldierLucky",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"mushroomChild",weight:4},{id:"mushroomSmall",weight:4},{id:"mushroomFrog",weight:10},{id:"mushroomTeeth",weight:10},{id:"mushroomMonster",weight:13},{id:"mushroomSoldier",weight:13}]},{minLevel:41,items:[{id:"mushroomSoldierLucky",weight:1}]},{minLevel:61,items:[{id:"mushroomChild",weight:2},{id:"mushroomSmall",weight:2},{id:"mushroomFrog",weight:5},{id:"mushroomTeeth",weight:5},{id:"mushroomMonster",weight:13},{id:"mushroomSoldier",weight:13},{id:"mushroomSoldierLucky",weight:1}]}]},mountain_pass:{type:"oneOf",tiers:[{minLevel:1,maxLevel:20,items:[{id:"golemBaby",weight:10},{id:"woodOctopus",weight:10},{id:"golemBoar",weight:5},{id:"golemMountain",weight:5},{id:"woodRoof",weight:2}]},{minLevel:21,maxLevel:40,items:[{id:"golemBaby",weight:10},{id:"woodOctopus",weight:10},{id:"golemBoar",weight:5},{id:"golemMountain",weight:5},{id:"woodRoof",weight:2},{id:"golemMountainLucky",weight:1}]},{minLevel:41,maxLevel:60,items:[{id:"golemBaby",weight:7},{id:"woodOctopus",weight:7},{id:"golemBoar",weight:10},{id:"golemMountain",weight:10},{id:"woodRoof",weight:10},{id:"golemMountainLucky",weight:1}]},{minLevel:61,items:[{id:"golemBaby",weight:2},{id:"woodOctopus",weight:2},{id:"golemBoar",weight:5},{id:"golemMountain",weight:5},{id:"woodRoof",weight:13},{id:"golemMountainLucky",weight:1}]}]},forbidden_city:{type:"oneOf",tiers:[{minLevel:1,maxLevel:80,items:[{id:"robotNo1",weight:12},{id:"robotNo2",weight:12},{id:"robotNo3",weight:5},{id:"robotNo4",weight:5},{id:"robotNo5",weight:2},{id:"robotNo5Lucky",weight:1}]},{minLevel:81,maxLevel:120,items:[{id:"robotNo1",weight:8},{id:"robotNo2",weight:8},{id:"robotNo3",weight:5},{id:"robotNo4",weight:5},{id:"robotNo5",weight:5},{id:"robotNo5Lucky",weight:1},{id:"robotNo7",weight:5}]},{minLevel:121,items:[{id:"robotNo1",weight:5},{id:"robotNo2",weight:5},{id:"robotNo3",weight:5},{id:"robotNo4",weight:5},{id:"robotNo5",weight:5},{id:"robotNo5Lucky",weight:1},{id:"robotNo7",weight:5}]}]},new_eden:{type:"oneOf",tiers:[{minLevel:1,maxLevel:80,items:[{id:"robotNo1",weight:10},{id:"robotNo2",weight:10},{id:"robotNo3",weight:6},{id:"robotNo4",weight:6},{id:"robotNo5",weight:6},{id:"robotNo5Lucky",weight:1},{id:"skeleton",weight:10},{id:"skelAssassin",weight:10},{id:"darkShaman",weight:10},{id:"mushroomSoldier",weight:10},{id:"slimeKnight",weight:10},{id:"slimeGems",weight:10},{id:"skel2Axe",weight:10},{id:"skelGreatSword",weight:10},{id:"golemMountainLucky",weight:1},{id:"slimeBoneLucky",weight:1},{id:"mushroomSoldierLucky",weight:1},{id:"darkBigGuyLucky",weight:1},{id:"skelGreatSwordLucky",weight:1}]},{minLevel:81,items:[{id:"robotNo1",weight:10},{id:"robotNo2",weight:10},{id:"robotNo3",weight:6},{id:"robotNo4",weight:6},{id:"robotNo5",weight:20},{id:"robotNo5Lucky",weight:1},{id:"robotNo7",weight:20},{id:"skeleton",weight:10},{id:"skelAssassin",weight:10},{id:"darkShaman",weight:20},{id:"mushroomSoldier",weight:10},{id:"slimeKnight",weight:10},{id:"slimeGems",weight:10},{id:"skel2Axe",weight:20},{id:"skelGreatSword",weight:20},{id:"golemMountainLucky",weight:10},{id:"slimeBoneLucky",weight:1},{id:"mushroomSoldierLucky",weight:1},{id:"darkBigGuyLucky",weight:1},{id:"skelGreatSwordLucky",weight:1}]}]}},u1={outer_temple:{type:"oneOf",tiers:[{minLevel:6,items:[{id:"skelFireHead",weight:1},{id:"livingArmor",weight:3},{id:"darkDemon",weight:1},{id:"woodGolem",weight:3},{id:"mushroomLargeBoss",weight:1}]}]},seaside_cliffs:{type:"oneOf",tiers:[{minLevel:6,items:[{id:"livingArmor",weight:10},{id:"skelFireHead",weight:1},{id:"darkDemon",weight:1},{id:"woodGolem",weight:1},{id:"mushroomLargeBoss",weight:1}]}]},mossy_forest:{type:"oneOf",tiers:[{minLevel:6,items:[{id:"darkDemon",weight:4},{id:"mushroomLargeBoss",weight:1}]}]},ruined_path:{type:"oneOf",tiers:[{minLevel:6,items:[{id:"skelFireHead",weight:8},{id:"darkDemon",weight:1},{id:"mushroomLargeBoss",weight:1}]}]},fields:{type:"oneOf",tiers:[{minLevel:6,items:[{id:"mushroomLargeBoss",weight:1}]}]},mountain_pass:{type:"oneOf",tiers:[{minLevel:6,items:[{id:"woodGolem",weight:18},{id:"skelFireHead",weight:2},{id:"darkDemon",weight:2},{id:"mushroomLargeBoss",weight:2}]}]},forbidden_city:{type:"oneOf",tiers:[{minLevel:6,items:[{id:"skelFireHead",weight:1},{id:"livingArmor",weight:1},{id:"darkDemon",weight:1},{id:"woodGolem",weight:1},{id:"robotNo6",weight:8}]}]},new_eden:{type:"oneOf",tiers:[{minLevel:6,items:[{id:"skelFireHead",weight:1},{id:"skelIceHead",weight:2},{id:"robotNo6",weight:3},{id:"livingArmor",weight:1},{id:"darkDemon",weight:1},{id:"woodGolem",weight:1},{id:"icyWoodGolem",weight:2},{id:"robotBoss",weight:6}]}]},haunted_forest:{type:"oneOf",tiers:[{minLevel:6,items:[{id:"darkDemon",weight:4},{id:"skelFireHead",weight:4},{id:"skelIceHead",weight:1}]}]}},mB={"Bacon_Cooked.png":[{id:"EssenceCrunchy",quantity:2},{id:"EssenceHearty",quantity:2}],"Beef_Grilled.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceSpicy",quantity:1},{id:"EssenceChewy",quantity:1}],"Bobba_Green.png":[{id:"EssenceChewy",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceCreamy",quantity:1}],"Bread_Herbs.png":[{id:"EssenceFresh",quantity:2},{id:"EssenceHearty",quantity:2}],"Bread_Rye.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceTangy",quantity:1},{id:"EssenceChewy",quantity:1}],"Bread_Wheat.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceFluffy",quantity:2}],"Burger.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceChewy",quantity:1},{id:"EssenceSpicy",quantity:1}],"CakeBar_Pink.png":[{id:"EssenceDecadent",quantity:2},{id:"EssenceFluffy",quantity:1},{id:"EssenceTangy",quantity:1}],"CakeSlice_Chokolate.png":[{id:"EssenceDecadent",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceFluffy",quantity:1}],"CakeSlice_Macha.png":[{id:"EssenceFresh",quantity:2},{id:"EssenceFluffy",quantity:1},{id:"EssenceDecadent",quantity:1}],"CakeSlice_Regular.png":[{id:"EssenceFluffy",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceDecadent",quantity:1}],"Cheese_Blue.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceDecadent",quantity:1}],"Cheese_Brie.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceDecadent",quantity:1},{id:"EssenceFresh",quantity:1}],"Cheese_Cheddar.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceTangy",quantity:1}],"Cheese_Edam.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceHearty",quantity:1}],"Cheese_Gouda.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceHearty",quantity:1},{id:"EssenceDecadent",quantity:1}],"Cheese_Swiss.png":[{id:"EssenceCreamy",quantity:1},{id:"EssenceHearty",quantity:2},{id:"EssenceTangy",quantity:1}],"Cocktail_Martini.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceDecadent",quantity:1}],"Cocktail_Red.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceDecadent",quantity:1},{id:"EssenceSpicy",quantity:1}],"Coffee.png":[{id:"EssenceSpicy",quantity:2},{id:"EssenceTangy",quantity:1},{id:"EssenceDecadent",quantity:1}],"Cookie_Dark.png":[{id:"EssenceCrunchy",quantity:2},{id:"EssenceDecadent",quantity:2}],"Cookie_White.png":[{id:"EssenceCrunchy",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceDecadent",quantity:1}],"Crepe_Chokolate.png":[{id:"EssenceChewy",quantity:1},{id:"EssenceCreamy",quantity:1},{id:"EssenceDecadent",quantity:2}],"Croissant.png":[{id:"EssenceFluffy",quantity:2},{id:"EssenceCrunchy",quantity:1},{id:"EssenceCreamy",quantity:1}],"CupCake_Brown.png":[{id:"EssenceFluffy",quantity:2},{id:"EssenceDecadent",quantity:1},{id:"EssenceCreamy",quantity:1}],"CupCake_White.png":[{id:"EssenceFluffy",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceFresh",quantity:1}],"Curry_Spicy.png":[{id:"EssenceSpicy",quantity:2},{id:"EssenceHearty",quantity:2}],"Curry_Yellow.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceSpicy",quantity:1},{id:"EssenceCreamy",quantity:1}],"Doughnut_Chokolate.png":[{id:"EssenceDecadent",quantity:2},{id:"EssenceFluffy",quantity:1},{id:"EssenceCrunchy",quantity:1}],"Doughnut_Pink.png":[{id:"EssenceFluffy",quantity:2},{id:"EssenceDecadent",quantity:1},{id:"EssenceTangy",quantity:1}],"Drink_Brown.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceDecadent",quantity:1}],"Drink_Lemonade.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceFresh",quantity:2}],"Drink_Light.png":[{id:"EssenceFresh",quantity:3},{id:"EssenceTangy",quantity:1}],"Drink_Syrup.png":[{id:"EssenceDecadent",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceTangy",quantity:1}],"Dumplings.png":[{id:"EssenceChewy",quantity:2},{id:"EssenceHearty",quantity:2}],"Egg.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceHearty",quantity:2}],"Empanada.png":[{id:"EssenceCrunchy",quantity:1},{id:"EssenceHearty",quantity:2},{id:"EssenceSpicy",quantity:1}],"Fish_Blue.png":[{id:"EssenceFresh",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceTangy",quantity:1}],"Fish_Silver.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceFresh",quantity:2}],"Fries.png":[{id:"EssenceCrunchy",quantity:2},{id:"EssenceHearty",quantity:1},{id:"EssenceCreamy",quantity:1}],"GameMeat.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceChewy",quantity:1},{id:"EssenceSpicy",quantity:1}],"GrilledCheese.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceCrunchy",quantity:1},{id:"EssenceHearty",quantity:1}],"Gyro.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceSpicy",quantity:1},{id:"EssenceChewy",quantity:1}],"HotCocoa.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceDecadent",quantity:2}],"HotDog.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceChewy",quantity:1},{id:"EssenceTangy",quantity:1}],"IceCream_ChokolateCaramel.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceDecadent",quantity:2}],"IceCream_PistachioLemon.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceTangy",quantity:1},{id:"EssenceFresh",quantity:1}],"IceCream_VanillaStrawberry.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceTangy",quantity:1}],"Lasagna.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceTangy",quantity:1}],"Leg.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceChewy",quantity:2}],"Lobster_Cooked.png":[{id:"EssenceChewy",quantity:2},{id:"EssenceDecadent",quantity:1},{id:"EssenceFresh",quantity:1}],"Lobster_Raw.png":[{id:"EssenceFresh",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceChewy",quantity:1}],"Milkshake_Chokolate.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceDecadent",quantity:2}],"Milkshake_Strawberry.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceTangy",quantity:1},{id:"EssenceFresh",quantity:1}],"Octopus.png":[{id:"EssenceChewy",quantity:2},{id:"EssenceFresh",quantity:2}],"Onigiri_Pork.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceChewy",quantity:1},{id:"EssenceSpicy",quantity:1}],"Onigiri_Tuna.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceChewy",quantity:1},{id:"EssenceTangy",quantity:1}],"OpenSandwich_Fish.png":[{id:"EssenceFresh",quantity:2},{id:"EssenceTangy",quantity:1},{id:"EssenceHearty",quantity:1}],"OpenSandwich_Meat.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceChewy",quantity:1},{id:"EssenceSpicy",quantity:1}],"Oysters.png":[{id:"EssenceFresh",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceTangy",quantity:1}],"Pancakes.png":[{id:"EssenceFluffy",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceDecadent",quantity:1}],"Pie_Blackberry.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceDecadent",quantity:1},{id:"EssenceCrunchy",quantity:1}],"Pie_Cherry.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceFluffy",quantity:1},{id:"EssenceDecadent",quantity:1}],"Pie_Cream.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceDecadent",quantity:2}],"Pizza_Mushroom.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceChewy",quantity:1},{id:"EssenceSpicy",quantity:1}],"Pizza_Peperoni.png":[{id:"EssenceSpicy",quantity:2},{id:"EssenceHearty",quantity:1},{id:"EssenceChewy",quantity:1}],"PlumCake_Lemon.png":[{id:"EssenceFluffy",quantity:2},{id:"EssenceTangy",quantity:1},{id:"EssenceFresh",quantity:1}],"PlumCake_Orange.png":[{id:"EssenceFluffy",quantity:2},{id:"EssenceTangy",quantity:1},{id:"EssenceDecadent",quantity:1}],"PlumCake_Vanilla.png":[{id:"EssenceFluffy",quantity:2},{id:"EssenceCreamy",quantity:1},{id:"EssenceFresh",quantity:1}],"PorkChop_Fried.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceCrunchy",quantity:1},{id:"EssenceChewy",quantity:1}],"Pudding_Cacao.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceDecadent",quantity:2}],"Pudding_Caramel.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceDecadent",quantity:1},{id:"EssenceTangy",quantity:1}],"Pudding_Pink.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceTangy",quantity:1}],"Ramen.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceSpicy",quantity:1},{id:"EssenceChewy",quantity:1}],"RareFood_Blue.png":[{id:"EssenceDecadent",quantity:2},{id:"EssenceTangy",quantity:1},{id:"EssenceSpicy",quantity:1}],"RareFood_MultiColor.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceDecadent",quantity:1},{id:"EssenceChewy",quantity:1}],"RareFood_Pink.png":[{id:"EssenceFluffy",quantity:2},{id:"EssenceDecadent",quantity:2}],"RareFood_Yellow.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceDecadent",quantity:1}],"Ribs.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceChewy",quantity:1},{id:"EssenceSpicy",quantity:1}],"RiceOmlete.png":[{id:"EssenceCreamy",quantity:1},{id:"EssenceHearty",quantity:2},{id:"EssenceTangy",quantity:1}],"RottenFood.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceSpicy",quantity:1},{id:"EssenceChewy",quantity:1}],"Roulade_Cream.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceFluffy",quantity:1},{id:"EssenceDecadent",quantity:1}],"Salat.png":[{id:"EssenceFresh",quantity:3},{id:"EssenceTangy",quantity:1}],"Sandwich_Advocado.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceHearty",quantity:1}],"Sandwich_Salami.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceSpicy",quantity:1},{id:"EssenceChewy",quantity:1}],"Sausage.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceChewy",quantity:1},{id:"EssenceSpicy",quantity:1}],"Shripm.png":[{id:"EssenceChewy",quantity:2},{id:"EssenceFresh",quantity:2}],"Skewer_Beef.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceChewy",quantity:1},{id:"EssenceSpicy",quantity:1}],"Skewer_Pork.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceSpicy",quantity:1},{id:"EssenceChewy",quantity:1}],"Soda_Green.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceDecadent",quantity:1}],"Soda_Red.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceDecadent",quantity:1},{id:"EssenceFresh",quantity:1}],"Soup_Asparagus.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceHearty",quantity:1}],"Soup_Spinach.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceCreamy",quantity:1}],"Soup_Tomato.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceHearty",quantity:2},{id:"EssenceCreamy",quantity:1}],"Spaghetti_Cream.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceHearty",quantity:1},{id:"EssenceDecadent",quantity:1}],"Spaghetti_Marinara.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceHearty",quantity:2}],"Stew_Beef.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceChewy",quantity:1},{id:"EssenceSpicy",quantity:1}],"Stew_Cream.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceHearty",quantity:2}],"Stew_Paprika.png":[{id:"EssenceSpicy",quantity:2},{id:"EssenceHearty",quantity:2}],"Sushi.png":[{id:"EssenceFresh",quantity:2},{id:"EssenceTangy",quantity:1},{id:"EssenceCreamy",quantity:1}],"Taco.png":[{id:"EssenceHearty",quantity:2},{id:"EssenceSpicy",quantity:1},{id:"EssenceCrunchy",quantity:1}],"Takoyaki.png":[{id:"EssenceChewy",quantity:2},{id:"EssenceSpicy",quantity:1},{id:"EssenceDecadent",quantity:1}],"Tart_BlackCurrant.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceDecadent",quantity:1},{id:"EssenceCrunchy",quantity:1}],"Tart_RedCurrant.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceCrunchy",quantity:1}],"Tea.png":[{id:"EssenceFresh",quantity:2},{id:"EssenceTangy",quantity:1},{id:"EssenceSpicy",quantity:1}],"Wine_Red.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceDecadent",quantity:1},{id:"EssenceSpicy",quantity:1}],"Wine_White.png":[{id:"EssenceTangy",quantity:2},{id:"EssenceFresh",quantity:1},{id:"EssenceDecadent",quantity:1}],"khachapuri.png":[{id:"EssenceCreamy",quantity:2},{id:"EssenceHearty",quantity:1},{id:"EssenceChewy",quantity:1}],"mooncake.png":[{id:"EssenceDecadent",quantity:2},{id:"EssenceChewy",quantity:1},{id:"EssenceSpicy",quantity:1}]};let Eg=null;function gB(R){Eg=R}function Mg(){if(!Eg)throw new Error("Combat RNG not set. Are you outside of a combat encounter?");return Eg}const ag=[{sku:"gem_currency_15",displayName:"Gem Handful",description:"You get 15 Gem",price:5,images:{shopicon:"assets/ui/shop/ItemIcon_Gem01.png"},tags:["gems"]},{sku:"gem_currency_80",displayName:"Gem Pile",description:"80 Gems for use in the Sword & Supper shop.",price:25,images:{shopicon:"assets/ui/shop/ItemIcon_Gem02.png"},tags:["gems"]},{sku:"gem_currency_180",displayName:"Gem Pouch",description:"180 Gems for use in the Sword & Supper shop.",price:50,images:{shopicon:"assets/ui/shop/ItemIcon_Gem03.png"},tags:["gems"]},{sku:"gem_currency_400",displayName:"Gem Bucket",description:"400 Gems for use in the Sword & Supper shop.",price:100,images:{shopicon:"assets/ui/shop/ItemIcon_Gem04.png"},tags:["gems"]},{sku:"gem_currency_1100",displayName:"Gem Chest",description:"1100 Gems for use in the Sword & Supper shop.",price:250,images:{shopicon:"assets/ui/shop/ItemIcon_Gem05.png"},tags:["gems"]},{sku:"gem_currency_2750",displayName:"Gem Vault",description:"2750 Gems for use in the Sword & Supper shop.",price:500,images:{shopicon:"assets/ui/shop/ItemIcon_Gem06.png"},tags:["gems"]}],pB=lw,vB=hw,tl=Ru,yB=dw;var Lt;(R=>{R.EquipmentTags=a4,R.BlueprintTags=n4,R.MapTags=r4,R.ResourceTags=o4,R.CosmeticTags=l4,R.DEFAULT_BAG_ID=vl,R.CURRENCY_BAG_ID=En,R.reducer=zr,R.validateAction=xc,R.validatePlayerCanEquipItem=T4,R.isCurrencyType=mr,R.makeUpgradeTransaction=Aw,R.makeBuyItemTransaction=Ew,R.makeSellItemTransaction=bw,R.validateTransaction=ku,R.generateId=pc,R.toCompactInventory=xw,R.fromCompactInventory=lp,R.initialState=hp,R.ItemDefinitions=ba,R.EquipmentSlotEnum=so,R.createInventoryProvider=L4,R.createInventoryClient=j4,R.itemDamageToDamageProfile=s4})(Lt||(Lt={}));var Xi=(R=>(R.Damage="Damage",R.Heal="Heal",R.Drain="Drain",R.MutualDamage="MutualDamage",R.AbilityTriggered="AbilityTriggered",R.Shield="Shield",R.SystemMessage="SystemMessage",R))(Xi||{});function xB(R){var c;const t={};for(const v of Object.values(Xi))t[v]=[];for(const v of R){const x=v.type??"SystemMessage";v.type==="SystemMessage"&&!v.message||(c=t[x])==null||c.push(v)}return t}const wB={physical:"💪",shadow:"🌑",lightning:"⚡",fire:"🔥",ice:"❄️"},SB=R=>R>0?"▼":R<0?"▲":"";function ng(R){var v;const t=R.damageByType??{};return Object.entries(t).some(([x,b])=>x!=="physical"&&b!==0)?Object.entries(t).filter(([,x])=>x!==0).map(([x,b],h)=>{var e;const w=SB(((e=R.resistDamageByType)==null?void 0:e[x])||0);return`${h>0?" and ":""}${b}${w} (${wB[x]})`}).join(""):((v=t.physical)==null?void 0:v.toString())||"0"}var Ci=(R=>(R.Loading="loading",R.Playing="playing",R.Victory="victory",R.Defeat="defeat",R))(Ci||{}),_r=(R=>(R.Battle="battle",R.Inn="inn",R))(_r||{});const Me=aw((R,t)=>({appVersion:"unknown",setAppVersion:c=>R({appVersion:c}),statsShown:!1,missionCreateShown:!1,missionCreateMapItem:null,missionRewards:[],setStatsShown:c=>R({statsShown:c}),setMissionCreateShown:c=>R({missionCreateShown:c}),setMissionCreateWithMapItem:c=>R({missionCreateMapItem:c,missionCreateShown:!0}),setMissionRewards:c=>R({missionRewards:c}),playerStats:void 0,setPlayerStats:c=>R({playerStats:c}),inventory:Lt.initialState,setInventory:c=>R({inventory:c}),inventoryTab:"equipment",setInventoryTab:c=>R({inventoryTab:c}),gameStatus:"loading",setGameStatus:c=>R({gameStatus:c}),rewardMessage:void 0,setRewardMessage:c=>R({rewardMessage:c}),showNextEncounterButton:!1,setShowNextEncounterButton:c=>R({showNextEncounterButton:c}),waitForNextEncounterClick:()=>new Promise(c=>{const v=Me.subscribe(x=>{x.showNextEncounterButton||(v(),c())})}),showSkillOptions:!1,setShowSkillOptions:c=>R({showSkillOptions:c}),skillOptions:[],setSkillOptions:c=>R({skillOptions:c}),waitForSkillOptionClick:()=>new Promise(c=>{const v=Me.subscribe(x=>{!x.showSkillOptions&&x.selectedOptionIndex!==-1&&(v(),c(x.selectedOptionIndex))})}),selectedOptionIndex:-1,setSelectedOptionIndex:c=>R({selectedOptionIndex:c}),skillOptionHeader:"",setSkillOptionHeader:c=>R({skillOptionHeader:c}),inCombat:!1,setInCombat:c=>R({inCombat:c}),username:"",setUsername:c=>R({username:c}),missionMetadata:{mission:void 0,missionAuthorName:"",missionTitle:"",foodImage:"",foodName:"",enemyTauntData:[],scenarioText:""},setMissionMetaData:c=>R({missionMetadata:c}),postId:"",setPostId:c=>R({postId:c}),showEnemyTauntForm:!1,tauntEnemyId:"foobar",setShowEnemyTauntForm(c,v){R({showEnemyTauntForm:c,tauntEnemyId:v})},equipmentShown:!1,setEquipmentShown:c=>R({equipmentShown:c}),sellItem:async()=>({ok:!1,error:"inventory API is not configured"}),upgradeItem:async()=>({ok:!1,error:"inventory API is not configured"}),buyItem:async()=>({ok:!1,error:"inventory API is not configured"}),equipItem:async()=>({ok:!1,error:"inventory API is not configured"}),unequipItem:async()=>({ok:!1,error:"inventory API is not configured"}),hasNewInventoryItem:!1,setHasNewInventoryItem:c=>R({hasNewInventoryItem:c}),advanceButtonLabel:"Advance",setAdvanceButtonLabel:c=>R({advanceButtonLabel:c}),questMessage:"",setQuestMessage:c=>R({questMessage:c}),questMessageShown:!1,setQuestMessageShown:c=>R({questMessageShown:c}),questProgress:{},setQuestProgress:c=>R({questProgress:c}),allQuests:[],setAllQuests:c=>R({allQuests:c}),playerAbilities:[],setPlayerAbilities:c=>R({playerAbilities:c}),missionCreateMission:void 0,setMissionCreateMission:c=>R({missionCreateMission:c}),battleLogMessages:[],tempLogMessage:[],setTempLogMessage:c=>{if(c.length>0){const v=[...Te().tempLogMessage,...c];R({tempLogMessage:v})}else R({tempLogMessage:[]})},addBattleLogMessage:(c,v=!1)=>{if(v){const x=[...Te().tempLogMessage,...c];Te().setTempLogMessage([]);const b=xB(x);R(h=>({battleLogMessages:[...h.battleLogMessages,b]}))}else Te().setTempLogMessage(c)},foodChoices:[],setFoodChoices:c=>R({foodChoices:c}),cropTopPixels:0,setCropTopPixels:c=>R({cropTopPixels:c}),playerMissionBuffs:[],setPlayerMissionBuffs:c=>R({playerMissionBuffs:c}),addPlayerMissionBuffs:c=>R(v=>({playerMissionBuffs:[...v.playerMissionBuffs,c]})),removePlayerMissionBuffsByID:c=>{R(v=>({playerMissionBuffs:v.playerMissionBuffs.filter(x=>x.id!==c)}))},gameDevState:!1,setGameDevState:c=>R({gameDevState:c}),volume:parseFloat(localStorage.getItem("gameVolume")||"0.5"),musicVolume:parseFloat(localStorage.getItem("gameMusicVolume")||"0.5"),sfxVolume:parseFloat(localStorage.getItem("gameSfxVolume")||"0.5"),muted:localStorage.getItem("gameMuted")==="true",previousVolume:.5,setVolume:c=>{localStorage.setItem("gameVolume",c.toString()),R({volume:c})},setMusicVolume:c=>{localStorage.setItem("gameMusicVolume",c.toString()),R({musicVolume:c})},setSfxVolume:c=>{localStorage.setItem("gameSfxVolume",c.toString()),R({sfxVolume:c})},toggleMute:()=>R(c=>{const v=!c.muted;return localStorage.setItem("gameMuted",v.toString()),v?{muted:!0,previousVolume:c.volume}:{muted:!1,volume:c.previousVolume>0?c.previousVolume:.5}}),recentMissionLinks:void 0,setRecentMissionLinks:c=>R({recentMissionLinks:c}),recentMissionLinksShown:!1,setRecentMissionLinksShown:c=>R({recentMissionLinksShown:c}),recentMissionMode:"underlevel",setRecentMissionMode:c=>R({recentMissionMode:c}),animationDisabled:!1,setAnimationDisabled:c=>R({animationDisabled:c}),settingsShown:!1,setSettingsShown:c=>R({settingsShown:c}),equippedWeapon:null,setEquippedWeapon:c=>R({equippedWeapon:c}),sessionId:"",setSessionId:c=>R({sessionId:c}),playerCurrentHp:0,setPlayerCurrentHp:c=>R({playerCurrentHp:c}),playerCombatCharacter:void 0,setPlayerCombatCharacter:c=>R({playerCombatCharacter:c}),showNavTooltips:!1,setShowNavTooltips:c=>R({showNavTooltips:c}),isAuthorRewardAvailable:!1,setIsAuthorRewardAvailable:c=>R({isAuthorRewardAvailable:c}),authorRewardData:[],setAuthorRewardData:c=>R({authorRewardData:c}),authorRewardsShown:!1,setAuthorRewardsShown:c=>R({authorRewardsShown:c}),canClaimAuthorReward:!1,setCanClaimAuthorReward:c=>R({canClaimAuthorReward:c}),scenarioText:"",setScenarioText:c=>R({scenarioText:c}),shopShown:!1,setShopShown:c=>R({shopShown:c}),shopDeepLinkItemSku:void 0,setShopWithDeepLink:c=>R({shopShown:!0,shopDeepLinkItemSku:c}),clearShopDeepLink:()=>R({shopDeepLinkItemSku:void 0}),itemDetailShown:!1,setItemDetailShown:c=>R({itemDetailShown:c}),skipButtonShown:!1,setSkipButtonShown:c=>R({skipButtonShown:c}),waitForSkipButtonClick:()=>new Promise(c=>{const v=Me.subscribe(x=>{x.skipButtonShown||(v(),c())})}),shopGoods:[],setShopGoods:c=>R({shopGoods:c}),gameMode:"battle",setGameMode:c=>R({gameMode:c}),showQuestUI:!0,setShowQuestUI:c=>R({showQuestUI:c}),animationSpeed:parseFloat(localStorage.getItem("gameAnimationSpeed")||"1"),setAnimationSpeed:c=>{localStorage.setItem("gameAnimationSpeed",c.toString()),R({animationSpeed:c})}})),{getState:Te,setState:Uu,subscribe:Tn}=Me;class Ow extends _i.Scene{constructor(){super("Boot")}create(){console.log("boot create");const t=c=>{const{type:v,data:x}=c.data;if(v==="devvit-message"){const{message:b}=x;b.type==="initialData"?(this.handleBattleInitialData(b),window.removeEventListener("message",t)):b.type==="initialDataInn"&&(this.handleInnInitialData(b),window.removeEventListener("message",t))}};window.addEventListener("message",t),ss({type:"webviewReady"}),window.location.hostname.endsWith(".devvit.net")||this.doLocalInit()}handleBattleInitialData(t){console.log("initialData",JSON.stringify(t.data));const c=t.data.missionMetadata,v=t.data.postId,x=t.data.username,b=t.data.sessionId,h=t.data.questProgress||[];console.log(JSON.stringify({missionMetadata:c,postId:v,username:x})),Te().setShopGoods([...Hu,...ag]),Te().setMissionMetaData(c),Te().setUsername(x),Te().setPostId(v),Te().setScenarioText(c.scenarioText),Te().setSessionId(b),Te().setQuestProgress(h),Te().setAppVersion(t.data.appVersion),console.log("boot: scenarioText",c.scenarioText),this.scene.start("Preloader")}handleInnInitialData(t){console.log("initialDataInn",JSON.stringify(t.data));const c=t.data.postId,v=t.data.username,x=t.data.sessionId,{serializabledProducts:b}=t.data,h=t.data.questProgress||[];Te().setShopGoods([...Hu,...ag]),Te().setUsername(v),Te().setPostId(c),Te().setSessionId(x),Te().setGameMode(_r.Inn),Te().setQuestProgress(h),Te().setAppVersion(t.data.appVersion),this.scene.start("PreloaderInn")}doLocalInit(){if(console.log("not in devvit"),this.scene.start("Preloader"),Te().username==="TestUser")return;const t=Date.now().toString(),x={mission:new up().generateMission(t,1,"uncommon",void 0),missionAuthorName:"TestAuthor",missionTitle:"This is a Test Mission Title",enemyTauntData:[],scenarioText:"This is a test scenario text for the mission. It should be long enough to look like a real scenario text, but it is just a placeholder for testing purposes."};Te().setMissionMetaData(x),Te().setUsername("TestUser"),Te().setScenarioText(x.scenarioText),Te().setSessionId(Date.now().toString()),Te().setShopGoods([...Hu,...ag]);const b=[{postId:"foo",title:"This is a fake mission",difficulty:3},{postId:"foo",title:"That's a-one spicy fake mission!",difficulty:2},{postId:"foo",title:"This is a mission with a very long title that should be truncated in the UI",difficulty:4}];Te().setRecentMissionLinks(b);const h=[{postId:"foo",title:"This is a fake mission",rewardCollectedIndex:-1,plays:3},{postId:"bar",title:"That's a-one spicy fake mission!",rewardCollectedIndex:0,plays:3},{postId:"baz",title:"This is a mission with a very long title that should be truncated in the UI",rewardCollectedIndex:2,plays:25}];Te().setAuthorRewardData(h)}doLocalInitInn(){console.log("not in devvit inn"),Te().setGameMode(_r.Inn),this.scene.start("PreloaderInn")}}const Nw="assets/food/",c1=["Bacon_Cooked.png","Beef_Grilled.png","Bobba_Green.png","Bread_Herbs.png","Bread_Rye.png","Bread_Wheat.png","Burger.png","CakeBar_Pink.png","CakeSlice_Chokolate.png","CakeSlice_Macha.png","CakeSlice_Regular.png","Cheese_Blue.png","Cheese_Brie.png","Cheese_Cheddar.png","Cheese_Edam.png","Cheese_Gouda.png","Cheese_Swiss.png","Cocktail_Martini.png","Cocktail_Red.png","Coffee.png","Cookie_Dark.png","Cookie_White.png","Crepe_Chokolate.png","Croissant.png","CupCake_Brown.png","CupCake_White.png","Curry_Spicy.png","Curry_Yellow.png","Doughnut_Chokolate.png","Doughnut_Pink.png","Drink_Brown.png","Drink_Lemonade.png","Drink_Light.png","Drink_Syrup.png","Dumplings.png","Egg.png","Empanada.png","Fish_Blue.png","Fish_Silver.png","Fries.png","GameMeat.png","GrilledCheese.png","Gyro.png","HotCocoa.png","HotDog.png","IceCream_ChokolateCaramel.png","IceCream_PistachioLemon.png","IceCream_VanillaStrawberry.png","Lasagna.png","Leg.png","Lobster_Cooked.png","Lobster_Raw.png","Milkshake_Chokolate.png","Milkshake_Strawberry.png","Octopus.png","Onigiri_Pork.png","Onigiri_Tuna.png","OpenSandwich_Fish.png","OpenSandwich_Meat.png","Oysters.png","Pancakes.png","Pie_Blackberry.png","Pie_Cherry.png","Pie_Cream.png","Pizza_Mushroom.png","Pizza_Peperoni.png","PlumCake_Lemon.png","PlumCake_Orange.png","PlumCake_Vanilla.png","PorkChop_Fried.png","Pudding_Cacao.png","Pudding_Caramel.png","Pudding_Pink.png","Ramen.png","RareFood_Blue.png","RareFood_MultiColor.png","RareFood_Pink.png","RareFood_Yellow.png","Ribs.png","RiceOmlete.png","RottenFood.png","Roulade_Cream.png","Salat.png","Sandwich_Advocado.png","Sandwich_Salami.png","Sausage.png","Shripm.png","Skewer_Beef.png","Skewer_Pork.png","Soda_Green.png","Soda_Red.png","Soup_Asparagus.png","Soup_Spinach.png","Soup_Tomato.png","Spaghetti_Cream.png","Spaghetti_Marinara.png","Stew_Beef.png","Stew_Cream.png","Stew_Paprika.png","Sushi.png","Taco.png","Takoyaki.png","Tart_BlackCurrant.png","Tart_RedCurrant.png","Tea.png","Wine_Red.png","Wine_White.png","khachapuri.png","mooncake.png"],f1={"Bacon_Cooked.png":["Crispy Bacon Strips","Maple-Glazed Bacon","Thick-Cut Smoked Bacon","Breakfast Bacon Rashers","Candied Bacon Twists"],"Beef_Grilled.png":["Grilled Ribeye Steak","Charred Beef Medallions","Blackened Sirloin Tips","Flame-Seared Skirt Steak","Beef Bulgogi Skewers"],"Bobba_Green.png":["Matcha Bubble Tea","Green Tea Boba","Honeydew Boba Smoothie","Jasmine Milk Tea with Tapioca","Avocado Boba Shake"],"Bread_Herbs.png":["Rosemary Focaccia","Herbed Flatbread","Garlic & Chive Loaf","Basil Infused Baguette","Savory Garden Bread"],"Bread_Rye.png":["Classic Rye Loaf","Seeded Caraway Rye","Dark Pumpernickel Bread","Scandinavian Rye Slices","Baltic Black Bread"],"Bread_Wheat.png":["Whole Wheat Sandwich Bread","Honey Wheat Loaf","Country Farmhouse Bread","Rustic Whole Grain Boule","Cracked Wheat Artisan Bread"],"Burger.png":["Classic Cheeseburger","Double Bacon Burger","BBQ Pulled Pork Burger","Portobello Veggie Burger","Wagyu Smash Burger"],"CakeBar_Pink.png":["Strawberry Cake Bar","Raspberry Cream Slice","Pink Velvet Bar","Cherry Shortcake Bar","Guava Glazed Cake Stick"],"CakeSlice_Chokolate.png":["Dark Chocolate Ganache Cake","Triple Fudge Cake Slice","Black Forest Cake","Chocolate Lava Cake Slice","Nutella Layer Cake"],"CakeSlice_Macha.png":["Matcha Green Tea Cake","Jade Layer Cheesecake","Pistachio Matcha Slice","Green Tea Opera Cake","Spinach Infused Cake Slice"],"CakeSlice_Regular.png":["Vanilla Sponge Cake","Buttercream Celebration Slice","Classic Birthday Cake","Lemon Chiffon Slice","Almond Butter Cake"],"Cheese_Blue.png":["Blue Stilton Wedge","Gorgonzola Crumble","Roquefort Slice","Mold-Ripened Blue Cheese","Bleu d'Auvergne"],"Cheese_Brie.png":["Creamy Brie Wheel","Triple Cream Brie","Brie en Croûte","French Soft Cheese Wedge","Camembert Style Round"],"Cheese_Cheddar.png":["Aged Cheddar Block","Sharp White Cheddar","Smoked Farmhouse Cheddar","English Mature Cheddar","Vermont Cheddar Slice"],"Cheese_Edam.png":["Classic Edam Ball","Young Edam Wedge","Dutch Semi-Hard Cheese","Red Wax Edam","Mild Picnic Cheese"],"Cheese_Gouda.png":["Aged Gouda Wheel","Smoked Gouda Wedge","Creamy Young Gouda","Dutch Market Cheese","Caramelized Gouda Slice"],"Cheese_Swiss.png":["Emmental Swiss Cheese","Jarlsberg Slice","Hole-Riddled Swiss Block","Baby Swiss Wedge","Alpine Fondue Cheese"],"Cocktail_Martini.png":["Classic Dry Martini","Olive Garnished Martini","Lemon Twist Martini","Dirty Gin Martini","Vodka Vermouth Cocktail"],"Cocktail_Red.png":["Cranberry Cosmopolitan","Blood Orange Negroni","Pomegranate Margarita","Cherry Manhattan","Hibiscus Rum Punch"],"Coffee.png":["Espresso Shot","Cappuccino with Foam Art","Latte Macchiato","Iced Americano","Flat White"],"Cookie_Dark.png":["Double Chocolate Chip Cookie","Espresso Cocoa Cookie","Molasses Spice Cookie","Blackout Brownie Cookie","Charcoal Sesame Biscuit"],"Cookie_White.png":["White Chocolate Macadamia Cookie","Vanilla Sugar Cookie","Butter Shortbread Round","Coconut Snowball Cookie","Lemon Drizzle Cookie"],"Crepe_Chokolate.png":["Chocolate Hazelnut Crepe","Nutella Strawberry Folded Crepe","Cacao Drizzle French Crepe","Choco-Banana Pancake Wrap","Mole Sauce Savory Crepe"],"Croissant.png":["Buttery French Croissant","Almond Filled Croissant","Chocolate Pain au Chocolat","Savory Ham & Cheese Croissant","Japanese Melon Pan"],"CupCake_Brown.png":["Chocolate Fudge Cupcake","Mocha Ganache Cupcake","Hazelnut Cream Cupcake","Peanut Butter Cupcake","Dark Caramel Cupcake"],"CupCake_White.png":["Vanilla Bean Cupcake","Lemon Buttercream Cupcake","Coconut Snowflake Cupcake","White Chocolate Raspberry Cupcake","Almond Wedding Cupcake"],"Curry_Spicy.png":["Fiery Red Thai Curry","Spicy Vindaloo","Chili Pepper Beef Curry","Devil's Chicken Curry","Sichuan Mala Hotpot"],"Curry_Yellow.png":["Golden Yellow Curry","Mild Japanese Katsu Curry","Massaman Curry Bowl","Lemongrass Coconut Curry","Pumpkin Thai Curry"],"Doughnut_Chokolate.png":["Chocolate Glazed Doughnut","Double Fudge Ring","Triple Chocolate Donut","Churro Cocoa Twist","Boston Cream Filled Doughnut"],"Doughnut_Pink.png":["Strawberry Frosted Donut","Pink Lemonade Ring","Raspberry Glazed Doughnut","Guava Icing Donut","Dragonfruit Sprinkle Donut"],"Drink_Brown.png":["Iced Coffee","Cola Float","Root Beer Mug","Caramel Iced Latte","Whiskey Sour"],"Drink_Lemonade.png":["Classic Lemonade","Sparkling Citrus Punch","Mint Lemon Refresher","Yuzu Lemon Soda","Limoncello Cooler"],"Drink_Light.png":["Coconut Water","Lychee Sparkler","Pear Cider","Vanilla Cream Soda","Pineapple Agua Fresca"],"Drink_Syrup.png":["Maple Syrup Shot","Honey Mead Glass","Molasses Rum Cocktail","Caramel Drizzle Latte","Sorghum Sweet Tea"],"Dumplings.png":["Pork Gyoza","Shrimp Har Gow","Chicken Potstickers","Soup Dumpling (Xiao Long Bao)","Pierogi with Sour Cream"],"Egg.png":["Sunny Side Up Egg","Poached Breakfast Egg","Soft Boiled Ramen Egg","Scotch Egg","Salted Duck Egg"],"Empanada.png":["Chicken Empanada","Spicy Beef Turnover","Cheesy Chorizo Empanada","Cornish Pasty","Mini Calzone Pocket"],"Fish_Blue.png":["Bluefin Tuna Cut","Butterfly Blue Mackerel","Pacific Snapper","Swordfish Steak","Fantasy Bluefish Fillet"],"Fish_Silver.png":["Silver Anchovy Filets","Atlantic Herring","Shiny Sardine Stack","Mackerel Cutlet","Smoked Smelt"],"Fries.png":["Crispy French Fries","Truffle Parmesan Fries","Sweet Potato Wedges","Belgian Frites with Aioli","Tempura Fried Lotus Root"],"GameMeat.png":["Venison Steak","Wild Boar Roast","Elk Tenderloin","Bison Burger Patty","Grilled Ostrich Fillet"],"GrilledCheese.png":["Classic Grilled Cheese Sandwich","Three Cheese Melt","Bacon & Cheddar Panini","Brie & Fig Toastie","Croque Monsieur"],"Gyro.png":["Lamb Gyro Wrap","Chicken Shawarma","Falafel Pita Pocket","Beef Doner Kebab","Mediterranean Street Wrap"],"HotCocoa.png":["Classic Hot Chocolate","Marshmallow Cocoa","Peppermint Mocha","Spiced Aztec Hot Chocolate","Nutella Drinking Chocolate"],"HotDog.png":["Classic Beef Hot Dog","Chili Cheese Dog","Chicago Style Hot Dog","Bacon Wrapped Danger Dog","Japanese Terimayo Dog"],"IceCream_ChokolateCaramel.png":["Chocolate Caramel Sundae","Double Fudge Ripple Cone","Salted Caramel Gelato","Chocolate Turtle Ice Cream","Mocha Almond Fudge"],"IceCream_PistachioLemon.png":["Pistachio Lemon Sorbet","Lemon Pistachio Swirl","Citrus Nut Gelato","Yuzu Pistachio Scoop","Lemon Almond Crunch"],"IceCream_VanillaStrawberry.png":["Vanilla Strawberry Swirl","Strawberry Shortcake Ice Cream","Vanilla Bean & Berry Gelato","Strawberry Cheesecake Scoop","Triple Berry Vanilla Delight"],"Lasagna.png":["Classic Beef Lasagna","Spinach Ricotta Lasagna","Mushroom Alfredo Lasagna","Sausage Layered Lasagna","Eggplant Parmesan Bake"],"Leg.png":["Roasted Turkey Leg","BBQ Chicken Drumstick","Smoked Ham Shank","Slow Cooked Lamb Shank","Crispy Duck Leg Confit"],"Lobster_Cooked.png":["Steamed Whole Lobster","Butter Poached Lobster Tail","Grilled Lobster with Herbs","Lobster Thermidor","Lobster Newberg"],"Lobster_Raw.png":["Fresh Raw Lobster","Live Market Lobster","Raw Lobster Tail","Sashimi Grade Lobster","Uncooked Spiny Lobster"],"Milkshake_Chokolate.png":["Classic Chocolate Milkshake","Double Fudge Shake","Chocolate Peanut Butter Shake","Mocha Espresso Milkshake","Triple Chocolate Malt"],"Milkshake_Strawberry.png":["Strawberry Cream Milkshake","Berry Blast Smoothie","Vanilla Strawberry Swirl Shake","Wild Strawberry Malt","Strawberry Cheesecake Shake"],"Octopus.png":["Grilled Octopus Tentacle","Takoyaki Filling","Marinated Octopus Salad","Galician Pulpo a la Feira","Octopus Carpaccio"],"Onigiri_Pork.png":["Pork Onigiri Rice Ball","Braised Pork Belly Onigiri","Teriyaki Pork Stuffed Rice Ball","Char Siu Onigiri","Grilled Pork Yaki-Onigiri"],"Onigiri_Tuna.png":["Tuna Mayo Onigiri","Seared Tuna Rice Ball","Spicy Tuna Onigiri","Ahi Poke Stuffed Rice Ball","Wasabi Tuna Onigiri"],"OpenSandwich_Fish.png":["Smoked Salmon Open Sandwich","Herring Toast","Tuna Nicoise Tartine","Mackerel Rye Toast","Sardine Avocado Open Sandwich"],"OpenSandwich_Meat.png":["Roast Beef Open Sandwich","Pastrami Rye Tartine","Turkey Cranberry Open Face","Ham and Brie Toast","Pulled Pork Open Sandwich"],"Oysters.png":["Fresh Raw Oysters","Grilled Oysters Rockefeller","Oysters on the Half Shell","Tempura Fried Oysters","Garlic Butter Baked Oysters"],"Pancakes.png":["Buttermilk Pancakes","Blueberry Pancake Stack","Banana Walnut Pancakes","Chocolate Chip Pancakes","Japanese Souffle Pancakes"],"Pie_Blackberry.png":["Blackberry Lattice Pie","Wild Berry Crumble Pie","Blackberry Lemon Tart","Blackberry Custard Pie","Mixed Forest Berry Pie"],"Pie_Cherry.png":["Classic Cherry Pie","Sour Cherry Streusel Pie","Cherry Almond Tart","Cherry Chocolate Pie","Sweet Cherry Cobbler"],"Pie_Cream.png":["Banana Custard Pie","Coconut Custard Pie","Chocolate Custard Pie","Strawberries & Custard Pie","Peanut Butter Pie"],"Pizza_Mushroom.png":["Wild Mushroom Pizza","Truffle Mushroom Flatbread","Portobello Spinach Pizza","Forest Blend Fungi Pizza","Mushroom White Sauce Pizza"],"Pizza_Peperoni.png":["Classic Pepperoni Pizza","Double Meat Pepperoni Pie","Spicy Salami Flatbread","Pepperoni & Olive Deep Dish","Crispy Thin Crust Pepperoni"],"PlumCake_Lemon.png":["Lemon Plum Tea Cake","Citrus Plum Loaf","Lemon-Glazed Plum Cake","Almond Lemon Plum Pound Cake","Plum Citrus Sponge"],"PlumCake_Orange.png":["Orange Plum Bundt Cake","Plum Marmalade Cake","Blood Orange Plum Tart","Spiced Orange Plum Loaf","Caramelized Plum Citrus Cake"],"PlumCake_Vanilla.png":["Vanilla Plum Butter Cake","Plum Cream Pound Cake","Vanilla Bean Plum Loaf","Plum Custard Cake","Simple Plum Vanilla Tart"],"PorkChop_Fried.png":["Fried Pork Chop","Breaded Schnitzel Cutlet","Katsu Pork Chop","Southern Fried Pork Steak","Pan Fried Bone-In Pork Chop"],"Pudding_Cacao.png":["Chocolate Pudding","Dark Cocoa Pots de Crème","Bittersweet Chocolate Custard","Belgian Chocolate Pudding Cup","Cacao Flan"],"Pudding_Caramel.png":["Caramel Flan","Crème Caramel","Salted Caramel Custard","Burnt Sugar Pudding","Sticky Toffee Pudding"],"Pudding_Pink.png":["Strawberry Mousse Pudding","Raspberry Cream Flan","Cherry Blossom Custard","Rosewater Panna Cotta","Pink Dragonfruit Pudding"],"Ramen.png":["Tonkotsu Pork Ramen","Shoyu Chicken Ramen","Miso Seafood Ramen","Spicy Tantanmen","Vegan Mushroom Ramen"],"RareFood_Blue.png":["Blue Starfruit Tart","Mystic Berry Gelée","Cobalt Jelly Slice","Sapphire Crystal Pudding","Frozen Blue Lotus Cake"],"RareFood_MultiColor.png":["Rainbow Sushi Roll","Confetti Fruit Parfait","Spectrum Macaron Tower","Galactic Layer Cake","Aurora Fruit Sorbet"],"RareFood_Pink.png":["Blush Rose Gelatin","Pink Pearl Mousse","Cotton Candy Cheesecake","Lychee Blossom Tart","Cherry Cream Bombe"],"RareFood_Yellow.png":["Golden Mango Custard","Lemon Star Pudding","Banana Cream Soufflé","Sunlight Honey Tart","Pineapple Citrus Dome"],"Ribs.png":["BBQ Baby Back Ribs","Smoked Pork Ribs","Sticky Asian Spare Ribs","Honey Glazed Rib Rack","Memphis Dry Rub Ribs"],"RiceOmlete.png":["Japanese Omurice","Cheesy Rice Omelette","Two Egg Omelette","Classic Omelet","Mushroom Gravy Omurice"],"RottenFood.png":["Moldy Bread","Spoiled Meat","Sour Milk Curd","Rotten Fruit Medley","Fermented Swamp Stew"],"Roulade_Cream.png":["Vanilla Cream Roulade","Chocolate Swiss Roll","Berry Jam Roll Cake","Lemon Curd Roulade","Green Tea Matcha Roll"],"Salat.png":["Caesar Salad","Garden Vegetable Salad","Greek Feta Salad","Spinach Strawberry Salad","Asian Sesame Slaw"],"Sandwich_Advocado.png":["Avocado Toast Sandwich","Egg & Avocado Melt","BLT with Avocado","Smoked Salmon Avocado Stack","Chicken Avocado Club"],"Sandwich_Salami.png":["Salami Submarine","Italian Salami Panini","Pepperoni Melt Sandwich","Salami and Provolone Hoagie","Spicy Salami Baguette"],"Sausage.png":["Grilled Bratwurst","Smoked Kielbasa","Italian Spicy Sausage","Breakfast Pork Links","Andouille Cajun Sausage"],"Shripm.png":["Grilled Garlic Shrimp","Tempura Fried Shrimp","Lemon Butter Prawns","Shrimp Scampi","Coconut Fried Shrimp"],"Skewer_Beef.png":["Beef Yakitori Skewer","Korean Bulgogi Skewers","Spiced Beef Kebab","Pepper Steak Skewer","Chimichurri Beef Stick"],"Skewer_Pork.png":["Pork Satay Skewer","Teriyaki Pork Yakitori","Herb Grilled Pork Stick","Spicy Glazed Pork Skewer","Sweet & Sour Pork Skewer"],"Soda_Green.png":["Melon Cream Soda","Lime Sparkling Water","Green Apple Fizz","Cucumber Mint Cooler","Yuzu Lime Soda"],"Soda_Red.png":["Cherry Cola","Strawberry Cream Soda","Pomegranate Sparkler","Red Raspberry Fizz","Blood Orange Soda"],"Soup_Asparagus.png":["Cream of Asparagus Soup","Chilled Asparagus Vichyssoise","Asparagus Leek Bisque","Herb Roasted Asparagus Soup","Asparagus and Pea Velouté"],"Soup_Spinach.png":["Spinach Parmesan Soup","Creamy Spinach Bisque","Spinach & Artichoke Chowder","Garlic Spinach Broth","Wilted Spinach Consommé"],"Soup_Tomato.png":["Classic Tomato Soup","Roasted Tomato Basil Soup","Tomato Bisque with Croutons","Spicy Tomato Gazpacho","Sun-Dried Tomato Chowder"],"Spaghetti_Cream.png":["Creamy Alfredo Spaghetti","Carbonara Pasta","Garlic Parmesan Spaghetti","Truffle Cream Linguine","Mushroom Cream Pasta"],"Spaghetti_Marinara.png":["Classic Spaghetti Marinara","Meatball Spaghetti","Seafood Marinara Pasta","Sausage Ragu Spaghetti","Spicy Arrabbiata Pasta"],"Stew_Beef.png":["Beef Bourguignon","Hearty Beef Stew","Guinness Braised Beef","Hungarian Goulash","Slow Cooker Pot Roast"],"Stew_Cream.png":["Chicken Cream Stew","Seafood Chowder","Creamy Turkey Stew","White Wine Cream Stew","Salmon Dill Cream Stew"],"Stew_Paprika.png":["Paprika Chicken Stew","Hungarian Paprikash","Paprika Beef Stroganoff","Spicy Sausage Paprika Stew","Paprika Lentil Soup"],"Sushi.png":["Tuna Nigiri","Salmon Sashimi","Dragon Roll","California Roll","Unagi Eel Roll"],"Taco.png":["Beef Soft Taco","Carnitas Street Taco","Baja Fish Taco","Chicken Tinga Taco","Vegetarian Black Bean Taco"],"Takoyaki.png":["Classic Takoyaki Balls","Spicy Mayo Takoyaki","Wasabi Octopus Balls","Teriyaki Takoyaki","Cheese Stuffed Takoyaki"],"Tart_BlackCurrant.png":["Blackcurrant Almond Tart","Glazed Cassis Tart","Blackcurrant Chocolate Tart","Forest Berry Custard Tart","Lemon Blackcurrant Tart"],"Tart_RedCurrant.png":["Redcurrant Meringue Tart","Sweet Redcurrant Cheesecake","Currant & Rosewater Tart","Redcurrant Almond Frangipane","Spiced Redcurrant Pie"],"Tea.png":["Jasmine Green Tea","Earl Grey Brew","Chamomile Herbal Tea","Matcha Latte","English Breakfast Tea"],"Wine_Red.png":["Cabernet Sauvignon","Merlot Reserve","Pinot Noir Glass","Zinfandel Red","Malbec Vintage"],"Wine_White.png":["Chardonnay Classic","Sauvignon Blanc","Pinot Grigio","Riesling Sweet White","Viognier White Wine"],"khachapuri.png":["Georgian Khachapuri","Cheese Stuffed Bread Boat","Egg & Cheese Khachapuri","Adjarian Khachapuri","Savory Cheese Flatbread"],"mooncake.png":["Lotus Seed Mooncake","Red Bean Mooncake","Egg Yolk Snow Skin Mooncake","Pandan Custard Mooncake","Matcha Green Tea Mooncake"]};let rg=null;const og=new Set,Mn={setSoundManager(R){rg=R},getSoundManager(){if(!rg)throw new Error("Sound manager not set!");return rg},isPlaying(R){return og.has(R)},markPlaying(R){og.add(R)},unmarkPlaying(R){og.delete(R)}};var Xe=(R=>(R.NONE="none",R.CUSTOM="custom",R.DASH="dash",R.ROBOTDASH="robotDash",R.WINDUP="windup",R.LASERWINDUP="laserWindup",R.MISSILELAUNCH="missileLaunch",R.PLAYERATTACK="playerAttack",R.PLAYERATTACKRAGE="playerAttackRage",R.ENEMYATTACK="enemyAttack",R.ENEMYATTACKRANGE="enemyAttackRange",R.ENEMYATTACKLASER="enemyAttackLaser",R.PLAYERIMPACT="playerImpact",R.PLAYERIMPACTRAGE="playerImpactRage",R.ENEMYIMPACT="enemyImpact",R.ENEMYIMPACTRAGE="enemyImpactRage",R.DIE="die",R.ROBOTDIE="robotDie",R.LIGHTNING="lightning",R.ENEMYSWORD="enemySword",R.ENEMYSWORDBIG="enemySwordBig",R.WALKSTEP="walkStep",R.RUNSTEP="runStep",R.DROPGOLD="dropGold",R.SPAWNRESOURCE="spawnResource",R.SPAWNGOLD="spawnGold",R.SPAWNGEM="spawnGem",R.DROPGEM="dropGem",R.HEAL="heal",R.GEAR_DROP="gearDrop",R))(Xe||{}),Nt=(R=>(R.LOW="low",R.MEDIUM="medium",R.HIGH="high",R))(Nt||{});const m1={none:[],custom:[],dash:["whoosh1","whoosh2","whoosh3"],robotDash:["robotDash1","robotDash2","robotDash3"],windup:["bowTension1","bowTension2"],laserWindup:["laserWindup1"],playerAttack:["playerAttack1","playerAttack2","playerAttack3"],playerAttackRage:["playerAttackRage"],enemyAttack:["enemySwipe1","enemySwipe2"],enemyAttackRange:["bowSwish1","bowSwish2","bowSwish3"],enemyAttackLaser:["laserAttack1","laserAttack2","laserAttack3","laserAttack4"],missileLaunch:["missileLaunch1","missileLaunch3","missileLaunch3","missileLaunch4"],playerImpact:["playerImpact1","playerImpact2","playerImpact3"],playerImpactRage:["playerImpactRage1","playerImpactRage2"],enemyImpact:["enemyImpact1","enemyImpact2"],enemyImpactRage:["enemyImpactRage1","enemyImpactRage2"],die:["die1","die2","die3"],robotDie:["robotDie1","robotDie2","robotDie3"],enemySword:["enemySword"],enemySwordBig:["enemySwordBig"],lightning:["lightning1","lightning2","lightning3"],walkStep:["walkStep1","walkStep2","walkStep3","walkStep4","walkStep5","walkStep6","walkStep7","walkStep8"],runStep:["runStep1","runStep2","runStep3","runStep4","runStep5","runStep6","runStep7","runStep8"],dropGold:["dropGold1","dropGold2","dropGold3","dropGold4"],spawnResource:["spawnResource1","spawnResource2"],spawnGold:["spawnGold1","spawnGold2"],spawnGem:["spawnGem1","spawnGem2"],dropGem:["dropGem1","dropGem2","dropGem3"],heal:["heal"],gearDrop:["gearDrop"]},lg={},Lg=R=>{if(typeof R=="number")return R;switch(R){case"low":return .75;case"medium":return 1;case"high":return 1.25;default:return}},Ua=R=>{var e;const t=R.soundType;if(t==="none")return;let c=R.customKey;if(t!=="custom"){const i=m1[t];if(!i||i.length===0)return;const u=i.length>1&&lg[t]?i.filter(r=>r!==lg[t]):i,n=Math.floor(Math.random()*u.length);c=u[n]}if(!c)return;const x=(Lg(R==null?void 0:R.rate)??1)+(Math.random()-.5)*.4,b=Mn.getSoundManager(),h=b.get(c);let w=(R==null?void 0:R.pan)??0;h&&h.audioBuffer&&h.audioBuffer.numberOfChannels>1&&(w=0),b.game.cache.audio.has(c)?b.play(c,{volume:(R==null?void 0:R.volume)??1,loop:!1,rate:x,pan:w}):console.log(`Sound not found in cache: ${c}`),!R.customKey&&((e=m1[t])==null?void 0:e.length)>1&&(lg[t]=c)};function ul(R,t,c,v){const x=Mn.getSoundManager();if(typeof R=="string"){if(!R)return;x.play(R,{volume:t??1,loop:!1,rate:Lg(c)??1,pan:0});return}const b=R.customKey;b&&x.play(b,{volume:(R==null?void 0:R.volume)??1,loop:!1,rate:Lg(R==null?void 0:R.rate)??1,pan:(R==null?void 0:R.pan)??0})}let Wu=[],Vu=null,Rg=null;const Ya={},Gw={};function g1(R,t){Gw[R]=t}function TB(R,t=0){return Gw[R]??t}function CB(R){const t=Ya[R];return!!(t&&t._playing)}function p1(R,t){if(!t)return;t._playing=!1;const c=t._gainNode;c&&c.disconnect(),t.disconnect(),t._gainNode=void 0,Ya[R]===t&&(Ya[R]=null)}let rr=null,ju=1;function AB(R){return rr||(rr=R.createGain(),rr.gain.setValueAtTime(ju,R.currentTime),rr.connect(R.destination)),rr}function Ku(R){ju=Math.max(0,Math.min(1,R)),rr&&rr.gain.setValueAtTime(ju,rr.context.currentTime)}function bB(R,t,c){const v=Ya[t];if(!v||!v._playing)return;const x=v._gainNode;if(x&&typeof x.gain.setValueAtTime=="function"){const b=x.gain.value,h=R.tweens.addCounter({from:b,to:0,duration:c,onUpdate:w=>{x.gain.setValueAtTime(w.getValue(),x.context.currentTime)},onComplete:()=>{x.gain.setValueAtTime(0,x.context.currentTime);try{v.stop()}catch{}}});Wu.push(h);return}try{v.stop()}catch{}}function Hw(R,t,c,v,x,b=!0,h=0){var a;const w=TB(t),e=Mn.getSoundManager(),i=e.context;if(!e||!i||!c.audioBuffer)return;if(Ya[t]){try{(a=Ya[t])==null||a.stop()}catch{}p1(t,Ya[t])}const u=i.createGain();u.gain.setValueAtTime(0,i.currentTime);const n=AB(i);u.connect(n);const r=i.createBufferSource();r.buffer=c.audioBuffer,r.loop=!0,r.loopStart=w,r.loopEnd=c.duration,r.connect(u),r._playing=!0,r._gainNode=u,r.onended=()=>p1(t,r),Ya[t]=r,Mn.markPlaying(t),Vu=t;try{const s=i.currentTime,o=h||0;r._startTime=s,r._offset=o,r.start(0,o)}catch{}if(b&&x>0){const s=R.tweens.addCounter({from:0,to:v,duration:x,onUpdate:o=>{u.gain.setValueAtTime(o.getValue(),u.context.currentTime)},onComplete:()=>{u.gain.setValueAtTime(v,u.context.currentTime)}});Wu.push(s)}else u.gain.setValueAtTime(v,u.context.currentTime)}function jh({scene:R,fadeInMusicKey:t,targetVolume:c=1,duration:v=1e3}){const x=Mn.getSoundManager();let b=x.get(t);if(!b||!b.audioBuffer)try{x.add(t,{volume:.2,loop:!0,rate:1}),b=x.get(t)}catch(h){console.log(`Failed to add sound "${t}":`,h);return}if(!CB(t)){for(const h of Wu)h&&h.isPlaying()&&h.complete();Wu=[],Vu&&Vu!==t&&(Rg=Vu,bB(R,Rg,v)),Hw(R,t,b,c,v)}}let Xh=new Set,$u={};function kw(){const R=Mn.getSoundManager();if(R&&typeof R.pauseAll=="function")R.pauseAll();else if(R&&Array.isArray(R.sounds))for(const t of R.sounds)t&&typeof t.pause=="function"&&t.isPlaying&&t.pause();Xh.clear(),$u={};for(const t in Ya){const c=Ya[t];if(c&&c._playing){if(t===Rg){try{c.stop()}catch{}continue}const v=c.context,x=c._startTime,b=c._offset;let h=0;v&&typeof x=="number"&&(h=v.currentTime-x+(b||0),c.buffer&&(h=Math.min(h,c.buffer.duration))),$u[t]=h;try{c.stop()}catch{}Xh.add(t)}}}function Uw(R){const t=Mn.getSoundManager();if(t&&typeof t.resumeAll=="function")t.resumeAll();else if(t&&Array.isArray(t.sounds))for(const c of t.sounds)c&&typeof c.resume=="function"&&c.isPaused&&c.resume();if(R&&Xh.size>0){for(const c of Xh){const v=t.get(c);if(v){const x=$u[c]||0;Hw(R,c,v,ju,0,!1,x)}}Xh.clear(),$u={}}}function Vw(R){typeof document<"u"&&typeof window<"u"&&document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?(kw(),console.debug("Audio paused due to visibility change")):document.visibilityState==="visible"&&(Uw(R),console.debug("Audio resumed due to visibility change"))})}const EB=["battle-common"],MB=["battle-common-robots"],LB=["battle-common-skeletons"],RB=["battle-boss-mushroom"],PB=["battle-boss-robot6"],BB=["battle-boss-robotBoss"],xu={robot:MB,skeleton:LB,mushroomLargeBoss:RB,robotNo6:PB,robotBoss:BB},DB=["battle-audio-preload"],FB=["battle-audio"],IB=["frogPlayer"],ks="assets/spine/",Vr="-data",Yr="-atlas";function OB(R){console.log("Setting food choices in GameManager");const t=[],c=c1.length,v=Math.min(4,c),x=[...c1];for(let b=0;b<v;b++){const h=Math.floor(R.next()*x.length),w=x.splice(h,1)[0];t.push(w)}Te().setFoodChoices(t)}const Xr=class Xr{constructor(){this.uniqueEnemyTags=[],this.uniqueEnemyTypes=[],this.uniqueEnemyTypesFirst2Encounters=[],this.environmentPrefix="environment_",this.missionAuthorName=Te().missionMetadata.missionAuthorName,this.username=Te().username;const c=Te().missionMetadata.mission;if(!c)throw new Error("Mission data is undefined");this.mission=c,this.environmentKey=this.mission.environment,[this.uniqueEnemyTypes,this.uniqueEnemyTags,this.specialEnemyList]=this.getUniqueEnemyTypes(),this.uniqueEnemyTypesFirst2Encounters=this.getUniqueEnemyTypesFromFirstTwoEncounters()}static getInstance(){return Xr.instance||(console.log("Creating new Game instance"),Xr.instance=new Xr),Xr.instance}preloadFonts(t){t.load.font("Poppins-ExtraBold","assets/fonts/Poppins-ExtraBold-subset.ttf"),t.load.font("Sen-Bold","assets/fonts/Sen-Bold.ttf")}isMobile(){var c,v;if((c=this.activeScene)!=null&&c.sys.game.device.os.android||(v=this.activeScene)!=null&&v.sys.game.device.os.iOS)return!0;const t=navigator.userAgent.toLowerCase();return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(t)}loadWithErrorHandling(t,c,v,x){return new Promise((b,h)=>{const w=e=>{e.key===c&&(t.load.off("loaderror",w),h(new Error(`Failed to load: ${c}`)))};t.load.once(x,()=>{t.load.off("loaderror",w),b()}),t.load.on("loaderror",w),v()})}async preload(t){this.activeScene=this.activeScene??t,console.log("Preloading assets for GameManager",this.activeScene),t.load.reset();const c=[];EB.forEach(b=>{c.push(this.loadWithErrorHandling(t,b,()=>t.load.pack(b,`assets/data/${b}.json`),`filecomplete-pack-${b}`))}),this.uniqueEnemyTags.forEach(b=>{const h=xu[b];h&&h.forEach(w=>{c.push(this.loadWithErrorHandling(t,w,()=>t.load.pack(w,`assets/data/${w}.json`),`filecomplete-pack-${w}`))})}),this.specialEnemyList.forEach(b=>{const h=xu[b];h&&h.forEach(w=>{c.push(this.loadWithErrorHandling(t,w,()=>t.load.pack(w,`assets/data/${w}.json`),`filecomplete-pack-${w}`))})}),DB.forEach(b=>{c.push(this.loadWithErrorHandling(t,b,()=>t.load.pack({key:b,url:`assets/data/${b}.json`}),`filecomplete-pack-${b}`))}),IB.forEach(b=>{const h=`${b}${Vr}`,w=`${b}${Yr}`;c.push(this.loadWithErrorHandling(t,h,()=>t.load.spineBinary(h,`${ks}${b}.skel`),`filecomplete-spineBinary-${h}`)),c.push(this.loadWithErrorHandling(t,w,()=>t.load.spineAtlas(w,`${ks}${b}.atlas`),`filecomplete-spineAtlas-${w}`))}),this.environmentKey===""&&console.error("ERROR: No environment key found!");const v=this.getEnvironmentKey(),x=this.getEnvironmentKey(!1);return c.push(this.loadWithErrorHandling(t,v,()=>t.load.json(v,`assets/data/environments/${x}.json`),`filecomplete-json-${v}`)),this.uniqueEnemyTypesFirst2Encounters.forEach(b=>{const h=yn[b],w=`${h.spineAssetKey}${Vr}`,e=`${h.spineAssetKey}${Yr}`;c.push(this.loadWithErrorHandling(t,w,()=>t.load.spineBinary(w,`${ks}${h.spineAssetKey}.skel`),`filecomplete-spineBinary-${w}`)),c.push(this.loadWithErrorHandling(t,e,()=>t.load.spineAtlas(e,`${ks}${h.spineAssetKey}.atlas`),`filecomplete-spineAtlas-${e}`))}),t.load.start(),Promise.all(c).then(()=>console.log("Preload assets completed successfully")).catch(b=>console.error("Error loading preload assets:",b))}async loadInGame(t){t.load.reset(),FB.forEach(h=>{t.load.pack({key:h,url:`assets/data/${h}.json`})});const c=this.mission.chef||"chef_japanese";t.load.spineBinary(`chef${Vr}`,`${ks}${c}.skel`),t.load.spineAtlas(`chef${Yr}`,`${ks}${c}.atlas`);const v=this.mission.cart||"cart1";t.load.image("Cart",`assets/battle/props/${v}.png`),this.uniqueEnemyTypes.forEach(h=>{const w=yn[h];t.load.spineBinary(`${w.spineAssetKey}${Vr}`,`${ks}${w.spineAssetKey}.skel`),t.load.spineAtlas(`${w.spineAssetKey}${Yr}`,`${ks}${w.spineAssetKey}.atlas`)}),this.hasBossEncounters()&&t.load.pack("bossEncounter","assets/data/boss-encounter-asset-pack.json"),t.load.image("MissionFoodImage",`${Nw}${this.mission.foodImage}`);const x=Te().playerStats;((x==null?void 0:x.clearedMissionsCount)||0)===0&&t.load.image("Logo","assets/ui/ss_logo.png"),t.load.start(),t.load.once("complete",()=>{Te().gameStatus===Ci.Loading&&jh({scene:t,fadeInMusicKey:"music_explore",targetVolume:.3,duration:1e3})})}async loadEnemiesAssets(t){if(!this.activeScene)return Promise.reject(new Error("No active scene to load boss assets"));const c=this.activeScene,v=new Set;t.forEach(b=>{yn[b.type].tags.forEach(w=>v.add(w))});const x=Array.from(v);return new Promise((b,h)=>{x.forEach(w=>{console.log("pew test",w);const e=xu[w];e&&e.forEach(i=>{this.activeScene.load.pack(i,`assets/data/${i}.json`)})}),c.load.once("complete",()=>{console.log("All assets loaded successfully"),b()}),c.load.once("loaderror",w=>{h(new Error(`Failed to load asset: ${w}`))}),c.load.start()})}async loadBossAssets(t){if(!this.activeScene)return Promise.reject(new Error("No active scene to load boss assets"));const c=this.activeScene,v=yn[t];return v?new Promise((x,b)=>{const h=v.spineAssetKey;this.activeScene.load.spineBinary(`${h}${Vr}`,`${ks}${h}.skel`),this.activeScene.load.spineAtlas(`${h}${Yr}`,`${ks}${h}.atlas`);const w=xu[t];w&&w.forEach(e=>{this.activeScene.load.pack(e,`assets/data/${e}.json`)}),this.activeScene.cache.json.exists("bossEncounter")||this.activeScene.load.pack("bossEncounter","assets/data/boss-encounter-asset-pack.json"),c.load.once("complete",()=>{console.log("All assets loaded successfully"),x()}),c.load.once("loaderror",e=>{b(new Error(`Failed to load asset: ${e}`))}),c.load.start()}):Promise.reject(new Error(`Invalid enemy type: ${t}`))}create(t){const c=t.cache.json.get(`${this.getEnvironmentKey()}`);c&&(t.load.audio("music_explore",c.bgm),c.layers.forEach(v=>{t.load.image(v.key,v.key+".png")}),t.registry.set(`${this.getEnvironmentKey()}`,c))}getUniqueEnemyTypes(){const t=[He.Enemy,He.Boss,He.CrossroadsFight,He.RushBoss],c=new Set,v=new Set,x=new Set,b=this.getMission();return t.forEach(h=>{b.encounters.filter(e=>e.type===h).forEach(e=>{"enemies"in e&&e.enemies.forEach(i=>{c.add(i.type),(e.type===He.Boss||e.type===He.RushBoss)&&x.add(i.type),yn[i.type].tags.forEach(n=>v.add(n))})})}),[Array.from(c),Array.from(v),Array.from(x)]}getUniqueEnemyTypesFromFirstTwoEncounters(){const t=["enemy","boss","crossroadsFight","rushBoss"],c=new Set;return this.getMission().encounters.slice(0,2).forEach(x=>{t.includes(x.type)&&"enemies"in x&&x.enemies.forEach(b=>{c.add(b.type)})}),Array.from(c)}hasBossEncounters(){return this.getMission().type==="bossRush"||this.getMission().encounters.some(t=>t.type==="boss")}getMission(){return this.mission}getEnvironmentData(){return this.environmentData}getEnvironmentKey(t=!0){return t?`${this.environmentPrefix}${this.environmentKey}`:this.environmentKey}getMissionAuthorName(){return this.missionAuthorName}getUsername(){return this.username}};Xr.instance=null;let cr=Xr;var mn=(R=>(R[R.INIT=0]="INIT",R[R.ASSETS=1]="ASSETS",R[R.BACKGROUND=2]="BACKGROUND",R[R.DONE=3]="DONE",R))(mn||{});class NB extends _i.Scene{constructor(){super("Preloader"),this.state=0}init(){this.state=0,this.gameManager=cr.getInstance(),this.gameManager.preloadFonts(this),this.initLoadingBar(),this.load.on("progress",t=>{this.loadingBar.width=4+460*t,this.loadingText.setText(`Loading ${mn[this.state]}: ${Math.floor(t*100)}%`)})}preload(){this.state=1,this.gameManager.preload(this)}create(){this.state=2,this.gameManager.create(this),this.load.once("complete",()=>{this.state=3}),this.load.start()}update(){this.state===3&&this.time.delayedCall(100,()=>{this.handleTransitionToBattle()})}initLoadingBar(){this.loadingBarOutline=this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215),this.loadingBar=this.add.rectangle(282,384,4,28,16777215),this.loadingText=this.add.text(512,350,"Loading: 0%",{font:"20px Poppins-ExtraBold"}).setOrigin(.5,.5)}handleTransitionToBattle(){this.loadingBar.destroy(),this.loadingBarOutline.destroy(),this.loadingText.destroy(),this.scene.transition({target:"Battle",duration:1e3,moveBelow:!0,onUpdate:t=>{this.cameras.main.setAlpha(1-t)}})}}const nl=class nl{constructor(t){this.layers=[],this.scene=t,this.tintPanel=this.addTintPanel(),this.tintPanel.setScrollFactor(0),t.add.existing(this.tintPanel)}loadFromRegistry(t){const c=t.layers;if(!c)throw new Error("Invalid data format: Missing 'layers' property");c.forEach(v=>{if(this.scene.textures.exists(v.key)){const x=this.scene.add.tileSprite(-nl.camShakeMargin,v.yOffset-10,this.scene.scale.width+nl.camShakeMargin*2,v.height,v.key).setOrigin(0,0).setDepth(-1);this.layers.push({scrollRatio:v.scrollRatio,sprite:x,autoScrollX:v.autoScrollX||0,positionX:0}),x.setScrollFactor(0)}else console.warn(`Texture for key '${v.key}' does not exist.`)})}setBackgroundScroll(t,c){this.layers.forEach(v=>{v.positionX+=v.autoScrollX*c,v.sprite.tilePositionX=t/v.sprite.tileScaleX*v.scrollRatio+v.positionX})}addTintPanel(){const t=new _i.GameObjects.Graphics(this.scene);return t.fillStyle(0,1),t.fillRect(0,0,this.scene.scale.width,this.scene.scale.height),t.alpha=0,t}showTintPanel(){this.scene.tweens.add({targets:this.tintPanel,alpha:.75,duration:250})}hideTintPanel(){this.scene.tweens.add({targets:this.tintPanel,alpha:0,duration:250})}static getMaxCamShake(){return nl.camShakeMargin}};nl.camShakeMargin=50;let Pg=nl;class _h{constructor(t){this.target=t,this.type="MainWeaponAttackAction",this.label="Main Attack"}async execute(t,c){if(this.target.isDead())return;const v={source:t,target:this.target,attackImpactTime:t.getDisplayCharacter().getAttackImpactTime(),attackImpactHeightRatio:t.getDisplayCharacter().getAttackImpactHeightRatio(),totalDamage:0,hitCount:0,isCritical:!1,isRage:!1,wasDodged:!1,statusEffects:[]},x=t.getWeaponDamage();if(v.isCritical=t.isCriticalHit(),v.isCritical&&(x.fire*=2,x.ice*=2,x.lightning*=2,x.shadow*=2,x.physical*=2),v.wasDodged=this.target.getAttackDodged(),!v.wasDodged){const w=this.target.calculateIncomingDamage(x);v.totalDamage=w.totalDamage,v.damageResult=w,v.hitCount=1}return console.log(`${t.id} attacks ${this.target.id} for ${v.totalDamage}`+(v.isCritical?" CRITICAL":"")+(v.wasDodged?" (dodged)":"")+" damage!"),await Promise.all([t.doDefaultAttack(this.target,v),c.applyDamage(t,this.target,v,this)]),t.hasRageMeter()==!1||c.getDefaultTargetFor(t)==null||t.addRage(25),v}clone(){return new _h(this.target)}}class fp{constructor(){this.name="Default Attack",this.description="Attack with your main weapon."}modifyAvailableActions(t,c,v){const x=v.getDefaultTargetFor(c.actor);return!x||x.isDead()?t:[...t,new _h(x)]}}class Cc{constructor(t=3e3,c=100){this.waitTime=t,this.waitRageLimit=c,this.type="DoNothingAction",this.label="Do Nothing Action"}async execute(t,c){const v={source:t,target:void 0,attackImpactTime:t.getDisplayCharacter().getAttackImpactTime(),attackImpactHeightRatio:t.getDisplayCharacter().getAttackImpactHeightRatio(),totalDamage:0,hitCount:0,isCritical:!1,isRage:!1,wasDodged:!1,statusEffects:[]};return t.getRage()<this.waitRageLimit&&await t.wait(this.waitTime),v}clone(){return new Cc(this.waitTime,this.waitRageLimit)}}class GB{constructor(){this.name="Do Nothing",this.description="Overrides the default attack to do nothing."}interceptAction(t,c,v){return t instanceof _h?new Cc:t}}class HB{constructor(){this.name="Strike Twice Every Other",this.description="Every other turn, attack twice with your main weapon.",this.firedOnTurn=-1}async onPostActionPhase(t,c,v,x){if(this.firedOnTurn==v.turnNumber)return[];if(c.type!=="MainWeaponAttackAction")return[];if(v.turnNumber%2===0){this.firedOnTurn=v.turnNumber;const b=c.target;return[new _h(b)]}return[]}resetForBattle(){this.firedOnTurn=-1}}class Hi{constructor(t,c,v){this.target=t,this.rageAmount=c,this.sourceAbility=v,this.type="AddRage",this.label="Add Rage"}async execute(t,c){var x;return this.target.isDead()?void 0:(t.addRage(this.rageAmount),{source:t,message:`add ${this.rageAmount} rage`,sourceAbilityName:typeof this.sourceAbility=="string"?this.sourceAbility:((x=this.sourceAbility)==null?void 0:x.name)||"Unknown"})}clone(){return new Hi(this.target,this.rageAmount,this.sourceAbility)}}class kB{constructor(){this.rageAmount=10,this.name="Every Other Add Rage",this.description=`Every other turn, add ${this.rageAmount} rage.`}async onPostActionPhase(t,c,v,x){if(v.turnNumber>0&&v.turnNumber%2===0&&c.type==="MainWeaponAttackAction")return[new Hi(t,this.rageAmount,this)]}}class UB{constructor(){this.rageAmount=10,this.name="Add Rage On Heal",this.description=`Add ${this.rageAmount} rage whenever you heal.`}async onPostActionPhase(t,c,v,x){if(c.type==="Heal")return[new Hi(t,this.rageAmount,this)]}}class VB{constructor(){this.name="Add Rage on Damage",this.description="Add rage when taking damage.",this.rageAmount=35}async onHealthChanged(t,c,v,x,b){if(x<v)return[new Hi(t,this.rageAmount,this)]}}class YB{constructor(){this.rageAmount=5,this.name="Add Rage On Magic Knife",this.description=`Add ${this.rageAmount} rage whenever a magic knife fires.`}async onPostActionPhase(t,c,v,x){if(c.type==="MagicKnife")return[new Hi(t,this.rageAmount,this)]}}class XB{constructor(){this.lowHPthreshold=.3,this.hasTriggered=!1,this.rageAmount=100,this.name="Fill Rage On Low HP",this.description=`Fills rage meter at ${this.lowHPthreshold*100}% HP the first time in a battle.`}async onHealthChanged(t,c,v,x,b){if(x>v)return;const h=t.getModifiedStatValue("MaxHp"),w=v/h>=this.lowHPthreshold,e=x/h<this.lowHPthreshold;if(w&&e&&!this.hasTriggered)return this.hasTriggered=!0,[new Hi(t,this.rageAmount,this)]}resetForBattle(){this.hasTriggered=!1}}class Ys{constructor(t,c,v=!0,x){this.target=t,this.amount=c,this.isPercentage=v,this.sourceAbility=x,this.type="Heal",this.label="Heal",this.tags=["support","heal"]}async execute(t,c){var b;if(t.isDead())return;await c.applyHeal(t,this.amount,this.isPercentage);const v=this.isPercentage?Math.floor(this.amount*t.getModifiedStatValue("MaxHp")):this.amount;return{source:t,target:t,healAmount:Math.floor(v),sourceAbilityName:typeof this.sourceAbility=="string"?this.sourceAbility:((b=this.sourceAbility)==null?void 0:b.name)||"Unknown"}}clone(){return new Ys(this.target,this.amount)}}class zB{constructor(){this.healAmount=.05,this.name="Critical Recovery",this.description=`Heal for ${this.healAmount*100}% HP whenever you land a critical hit.`}async onPostActionPhase(t,c,v,x){var h;const b=(h=v.result)==null?void 0:h.metadata;if(b!=null&&b.isCritical)return[new Ys(t,this.healAmount,!0,this)]}}class WB{constructor(){this.name="Heal On Lightning",this.description="Heal a small amount whenever a lightning bolt fires."}async onPostActionPhase(t,c,v,x){if(c.type!=="LightningBolt")return;const b=.03;return[new Ys(t,b,!0,this)]}}class jB{constructor(){this.name="Heal On Magic Knife",this.description="Heal a small amount whenever a magic knife fires."}async onPostActionPhase(t,c,v,x){if(c.type!=="MagicKnife")return;const b=.03;return[new Ys(t,b,!0,this)]}}class KB{constructor(){this.healAmount=.03,this.name="Heal On Rage",this.description=`When rage meter is full, Heal for ${this.healAmount*100}% Max HP`}async onPostActionPhase(t,c,v,x){return c.type!=="DefaultRage"?[]:[new Ys(t,this.healAmount,!0,this)]}}class $B{constructor(){this.attackPercent=.05,this.name="Life Steal On Attack",this.description=`Heal for ${this.attackPercent*100}% of damage you deal with your main weapon.`}async onPostActionPhase(t,c,v,x){var e;if(c.type!=="MainWeaponAttackAction")return;const b=(e=v.result)==null?void 0:e.metadata,h=(b==null?void 0:b.totalDamage)||0;if(h<=0)return;const w=Math.max(1,Math.round(h*this.attackPercent));return[new Ys(t,w,!1,this)]}}class QB{constructor(){this.name="Heal Every Two Hits",this.description="Heal every 2 successful hits.",this.hitInterval=2,this.healAmount=.1}async onHitCounter(t,c,v,x){return v>0&&v%this.hitInterval===0?[new Ys(t,this.healAmount,!0,this)]:[]}}class pa{constructor(t,c){this.target=t,this.ability=c,this.type="LightningBolt",this.label="Lightning Bolt",this.DAMAGE_PROFILE={fire:0,ice:0,lightning:8,shadow:0,physical:0}}async execute(t,c){const v=t.getModifiedDamage(this.DAMAGE_PROFILE),x=this.target.calculateIncomingDamage(v),b={source:t,target:this.target,attackImpactTime:200,attackImpactHeightRatio:.5,totalDamage:x.totalDamage,hitCount:1,wasDodged:!1,isCritical:!1,isRage:!1,statusEffects:[],noImpactFX:!0,abilitySource:this.ability,damageResult:x};if(!this.target.isDead())return await Promise.all([this.target.getDisplayCharacter().playLightningStrike(),c.applyDamage(t,this.target,b,this)]),b}clone(){return new pa(this.target)}}class JB{constructor(){this.name="Lightning On Attack",this.description="When you attack, zap your target with a lightning bolt."}async onPostActionPhase(t,c,v,x){if(c.type!=="MainWeaponAttackAction")return[];const b=x.getDefaultTargetFor(t);return!b||b.isDead()?[]:[new pa(b,this)]}}class ZB{constructor(){this.hitInterval=5,this.name=`Lightning Every ${this.hitInterval} Hits`,this.description=`Every ${this.hitInterval} hits, zap your target with a lightning bolt`}async onHitCounter(t,c,v,x){if(v>0&&v%this.hitInterval===0){const b=x.getDefaultTargetFor(t);return b?[new pa(b,this)]:Promise.resolve([])}return[]}}class qB{constructor(){this.name="Lightning On Crit",this.description="When you make a critical attack, zap your target with a lightning bolt."}async onPostActionPhase(t,c,v,x){var w;if(c.type!=="MainWeaponAttackAction")return[];const b=(w=v.result)==null?void 0:w.metadata;if(!(b!=null&&b.isCritical))return[];const h=x.getDefaultTargetFor(t);return!h||h.isDead()?[]:[new pa(h,this)]}}class _B{constructor(){this.name="Lightning On Turn Start",this.description="Zap your target with a lightning bolt at the start of your turn."}async onTurnStart(t,c,v){const x=v.getDefaultTargetFor(t);return!x||x.isDead()?[]:[new pa(x,this)]}}var El=(R=>(R[R.HighHP=0]="HighHP",R[R.LowHP=1]="LowHP",R))(El||{});class ao{constructor(t,c,v=0,x,b){this.statsBoostAmount=t,this.statsType=c,this.threshold=v,this.thresholdType=x,this.sourceAbility=b,this.type="ThresholdStatsUpgrade",this.label="Threshold Stats Upgrade",this.activeEffectId=null}satisfyThreshold(t){switch(this.thresholdType){case 0:return t>=this.threshold;case 1:return t<=this.threshold;default:return!1}}async applySkillEffectOnThreshold(t,c){var x;const v=c/t.getModifiedStatValue("MaxHp");if(this.satisfyThreshold(v)){if(!this.activeEffectId){const b=t.createSkillEffect(this.statsType,this.statsBoostAmount);return t.addSkillEffect(b),this.activeEffectId=b.id,{source:t,message:`boost ${this.statsBoostAmount*100}% ${this.statsType}`,sourceAbilityName:((x=this.sourceAbility)==null?void 0:x.name)||"Unknown"}}}else this.activeEffectId&&(t.removeSkillEffectById(this.activeEffectId),this.activeEffectId=null)}async execute(t,c){return this.applySkillEffectOnThreshold(t,t.getCurrentHp())}resetForBattle(t){this.activeEffectId&&(t.removeSkillEffectById(this.activeEffectId),this.activeEffectId=null)}clone(){return new ao(this.statsBoostAmount,this.statsType,this.threshold,this.thresholdType,this.sourceAbility)}}class eD{constructor(){this.threshold=.3,this.dodgeBoostAmount=.2,this.name="Dodge if Low",this.description=`Increases dodge chance by ${this.dodgeBoostAmount*100}% when HP is below ${this.threshold*100}%.`,this.statsUpAction=new ao(this.dodgeBoostAmount,"Dodge",this.threshold,El.LowHP,this)}async applySkillEffectOnThreshold(t){return[this.statsUpAction]}async onTurnStart(t,c,v){return this.applySkillEffectOnThreshold(t)}async onHealthChanged(t,c,v,x,b){return this.applySkillEffectOnThreshold(t)}resetForBattle(t){var c;(c=this.statsUpAction)==null||c.resetForBattle(t)}}class tD{constructor(){this.lowHPthreshold=.3,this.critBoostAmount=.2,this.name="Crit up if Low HP",this.description=`Increases crit chance by ${this.critBoostAmount*100}% when HP is below ${this.lowHPthreshold*100}%.`,this.statsUpAction=new ao(this.critBoostAmount,"Crit",this.lowHPthreshold,El.LowHP,this)}async applySkillEffectOnThreshold(t){return[this.statsUpAction]}async onTurnStart(t,c,v){return this.applySkillEffectOnThreshold(t)}async onHealthChanged(t,c,v,x,b){return this.applySkillEffectOnThreshold(t)}resetForBattle(t){var c;(c=this.statsUpAction)==null||c.resetForBattle(t)}}class iD{constructor(){this.activeEffectId=null,this.critBoostAmount=.2,this.threshold=1,this.name="Crit up if Max HP",this.description=`Increased crit chance by ${this.critBoostAmount*100}% while your HP is at 100%`,this.statsUpAction=new ao(this.critBoostAmount,"Crit",this.threshold,El.HighHP,this)}async applySkillEffectOnThreshold(t){return[this.statsUpAction]}async onTurnStart(t,c,v){return this.applySkillEffectOnThreshold(t)}async onHealthChanged(t,c,v,x,b){return this.applySkillEffectOnThreshold(t)}resetForBattle(t){var c;(c=this.statsUpAction)==null||c.resetForBattle(t)}}class sD{constructor(){this.name="Boost Attack On High HP",this.description="Boosts attack when HP is 100%.",this.threshold=1,this.boostAmount=.2,this.statsUpAction=new ao(this.boostAmount,"Attack",this.threshold,El.HighHP,this)}async applySkillEffectOnThreshold(t){return[this.statsUpAction]}async onTurnStart(t,c,v){return this.applySkillEffectOnThreshold(t)}async onHealthChanged(t,c,v,x,b){return this.applySkillEffectOnThreshold(t)}resetForBattle(t){var c;(c=this.statsUpAction)==null||c.resetForBattle(t)}}class us{constructor(t,c,v="shadow"){this.target=t,this.ability=c,this.damageType=v,this.type="MagicKnife",this.label="Magic Knife",this.DAMAGE_AMOUNT=12,v!="fire"&&v!="ice"&&v!="shadow"&&console.error("Magic Knives can only be of type fire, ice, or shadow.")}async execute(t,c){const v={fire:this.damageType==="fire"?this.DAMAGE_AMOUNT*t.getModifiedStatValue("KnifeMultiplier"):0,ice:this.damageType==="ice"?this.DAMAGE_AMOUNT*t.getModifiedStatValue("KnifeMultiplier"):0,lightning:this.damageType==="lightning"?this.DAMAGE_AMOUNT*t.getModifiedStatValue("KnifeMultiplier"):0,shadow:this.damageType==="shadow"?this.DAMAGE_AMOUNT*t.getModifiedStatValue("KnifeMultiplier"):0,physical:this.damageType==="physical"?this.DAMAGE_AMOUNT*t.getModifiedStatValue("KnifeMultiplier"):0};if(this.target.isDead()){const w=c.getDefaultTargetFor(t);if(w)this.target=w;else return}const x=t.getModifiedDamage(v),b=this.target.calculateIncomingDamage(x),h={source:t,target:this.target,attackImpactTime:-100,attackImpactHeightRatio:.5,totalDamage:b.totalDamage,hitCount:1,wasDodged:!1,isCritical:!1,isRage:!1,statusEffects:[],abilitySource:this.ability,damageResult:b};return await t.getDisplayCharacter().throwKnifeAt(this.target.getDisplayCharacter(),this.damageType),await c.applyDamage(t,this.target,h,this),h}clone(){return new us(this.target,this.ability,this.damageType)}}class aD{constructor(){this.name="Magic Knife",this.description="Throw a magic knife at the start of your turn."}async onTurnStart(t,c,v){const x=v.getDefaultTargetFor(t);return!x||x.isDead()?[]:[new us(x)]}}class nD{constructor(){this.name="Magic Knife On Rage",this.description="Throw a magic knife whenever you make a rage attack."}async onPostActionPhase(t,c,v,x){if(c.type!=="DefaultRage")return[];const b=x.getDefaultTargetFor(t);return!b||b.isDead()?[]:[new us(b,this)]}}class rD{constructor(){this.name="Bolt On Rage",this.description="When rage meter is full, zap your target with a lightning bolt"}async onPostActionPhase(t,c,v,x){if(c.type!=="DefaultRage")return[];const b=x.getDefaultTargetFor(t);return!b||b.isDead()?[]:[new pa(b,this)]}}class oD{constructor(){this.name="Magic Knife On Crit",this.description="Throw a magic knife whenever you make a critical attack."}async onPostActionPhase(t,c,v,x){var w;if(c.type!=="MainWeaponAttackAction")return[];const b=(w=v.result)==null?void 0:w.metadata;if(!(b!=null&&b.isCritical))return[];const h=x.getDefaultTargetFor(t);return!h||h.isDead()?[]:[new us(h,this)]}}class lD{constructor(){this.active=!1,this.turnsRemaining=0,this.hasTriggered=!1,this.healAmount=.1,this.lowHpthreshold=.3,this.name="Second Wind",this.description=`Heals for ${this.healAmount*100}% of max HP at the start of each turn for 3 turns the first time you dip below ${this.lowHpthreshold*100}% HP.`}async onHealthChanged(t,c,v,x,b){if(x>v)return;const h=t.getCurrentHp(),w=t.getModifiedStatValue("MaxHp");h/w<this.lowHpthreshold&&!this.hasTriggered&&(this.active=!0,this.hasTriggered=!0,this.turnsRemaining=3)}async onTurnStart(t,c,v){if(!this.active)return;const x=new Ys(t,this.healAmount,!0,this);return this.turnsRemaining--,this.turnsRemaining<=0&&(this.active=!1),[x]}resetForBattle(t){this.active=!1,this.hasTriggered=!1,this.turnsRemaining=0}}class hD{constructor(){this.rageAmount=50,this.name="Rage On First Turn",this.description=`On your first turn, gain ${this.rageAmount} Rage.`}async onTurnStart(t,c,v){if(c.turnNumber===1)return[new Hi(t,this.rageAmount,this)]}}class no{constructor(t,c,v){this.target=t,this.amount=c,this.sourceAbility=v,this.type="ShieldChargeAction",this.label="Charge Shield",this.tags=["support","shield"],this.wasActivate=!1}async execute(t,c){if(this.target.isDead())return;const v=t.getShieldHp();return v<=0&&(this.wasActivate=!0),await t.chargeShield(this.amount),{source:t,target:t,shieldAmount:Math.floor(t.getShieldHp()-v),sourceAbilityName:typeof this.sourceAbility=="string"?this.sourceAbility:"Unknown"}}clone(){return new no(this.target,this.amount)}}class dD{constructor(){this.threshold=.3,this.shieldAmount=.25,this.name="Shield if Low",this.description=`Charge shield by ${Math.round(this.shieldAmount*100)}% if HP goes below ${Math.round(this.threshold*100)}%.`,this.isActive=!1}async onHealthChanged(t,c,v,x,b){if(this.isActive)return[];const h=t.getModifiedStatValue("MaxHp")*this.threshold;if(v>=h&&x<h)return this.isActive=!0,[new no(t,this.shieldAmount,this)]}resetForBattle(t){this.isActive=!1}}class uD{constructor(){this.name="Lightning On Shield Activate",this.description="When your shield activates, fire a Lightning Bolt.",this.priority=-1,this.triggerOnStart=!1}async onTurnStart(t,c,v){if(this.triggerOnStart){this.triggerOnStart=!1;const x=v.getDefaultTargetFor(t);return!x||x.isDead()?[]:[new pa(x,this)]}return[]}async onPostActionPhase(t,c,v,x){return c.type!=="ShieldChargeAction"?[]:c.wasActivate!==!0?[]:(this.triggerOnStart=!0,[])}resetForBattle(t){this.triggerOnStart=!1}}class cD{constructor(){this.rageAmount=10,this.name="Bonus Rage On Attack",this.description=`Every attack builds rage by an additional +${this.rageAmount}`}async onPostActionPhase(t,c,v,x){if(c.type==="MainWeaponAttackAction")return[new Hi(t,this.rageAmount,this)]}}class fD{constructor(){this.name="Lightning on Enemy Death",this.description="Fire a bolt when an enemy dies."}onTargetDied(t,c,v){const x=v.getDefaultTargetFor(t);return x?Promise.resolve([new pa(x,this)]):Promise.resolve([])}}class mD{constructor(){this.rageAmount=25,this.name="Add Rage on Enemy Death",this.description=`Gain ${this.rageAmount} when an enemy dies.`}onTargetDied(t,c,v){return Promise.resolve([new Hi(t,this.rageAmount,this)])}}class gD{constructor(){this.hitCount=5,this.rageAmount=25,this.name=`Add Rage on Hit ${this.hitCount}`,this.description=`Gain ${this.rageAmount} when hit count reaches ${this.hitCount}.`}async onHitCounter(t,c,v,x){return v===this.hitCount?[new Hi(t,this.rageAmount,this)]:[]}}class pD{constructor(){this.shieldAmount=.2,this.name="Gain Shield on Enemy Death",this.description=`Charge shield by ${Math.round(this.shieldAmount*100)}% of Max HP when an enemy dies.`}onTargetDied(t,c,v){return Promise.resolve([new no(t,this.shieldAmount,this)])}}class vD{constructor(){this.hitCount=5,this.shieldAmount=.1,this.name=`Gain Shield on Hit ${this.hitCount}`,this.description=`Charge shield by ${Math.round(this.shieldAmount*100)}% of Max HP when hit count reaches ${this.hitCount}.`}async onHitCounter(t,c,v,x){return v===this.hitCount?[new no(t,this.shieldAmount,this)]:[]}}class yD{constructor(){this.shieldAmount=.15,this.name="Gain Shield On Rage",this.description=`Gain ${Math.round(this.shieldAmount*100)}% of Max HP as shield when you unleash rage.`}async onPostActionPhase(t,c,v,x){return c.type!=="DefaultRage"?[]:Promise.resolve([new no(t,this.shieldAmount,this)])}}class xD{constructor(){this.shieldAmount=.2,this.turnCount=4,this.name="Gain Shield on Turn 4",this.description=`Charge shield by ${Math.round(this.shieldAmount*100)}% of Max HP on start of turn ${this.turnCount}.`}async onTurnStart(t,c,v){if(c.turnNumber===this.turnCount)return[new no(t,this.shieldAmount,this)]}}class wD{constructor(){this.healAmount=.05,this.name="Heal on Enemy Death",this.description=`Heal for ${Math.round(this.healAmount*100)}% when an enemy dies.`}onTargetDied(t,c,v){return Promise.resolve([new Ys(t,this.healAmount,!0,this)])}}class SD{constructor(){this.hitCount=2,this.name=`Magic Knife on Hit ${this.hitCount}`,this.description=`Throw a magic knife when your hit count reaches ${this.hitCount}.`}async onHitCounter(t,c,v,x){if(v===this.hitCount){const b=x.getDefaultTargetFor(t);return!b||b.isDead()?[]:[new us(b,this)]}return[]}}class Ea{constructor(t,c="Attack",v){this.target=t,this.name=c,this.type="AttackAction",this.label="Attack",this.label=c||"Attack",this.damageProfile=v}async execute(t,c){if(this.target.isDead())return;const v={source:t,target:this.target,attackImpactTime:t.getDisplayCharacter().getAttackImpactTime(),attackImpactHeightRatio:t.getDisplayCharacter().getAttackImpactHeightRatio(),totalDamage:0,hitCount:0,isCritical:!1,isRage:!1,wasDodged:!1,statusEffects:[]};if(v.isCritical=t.isCriticalHit(),v.isCritical&&(this.damageProfile.fire*=2,this.damageProfile.ice*=2,this.damageProfile.lightning*=2,this.damageProfile.shadow*=2,this.damageProfile.physical*=2),v.wasDodged=this.target.getAttackDodged(),!v.wasDodged){const x=this.target.calculateIncomingDamage(this.damageProfile);v.totalDamage=x.totalDamage,v.damageResult=x,v.hitCount=1}return console.log(`${t.id} attacks ${this.target.id} for ${v.totalDamage}`+(v.isCritical?" CRITICAL":"")+(v.wasDodged?" (dodged)":"")+" damage!"),await Promise.all([t.doDefaultAttack(this.target,v),c.applyDamage(t,this.target,v,this)]),v}clone(){return new Ea(this.target,this.name,this.damageProfile)}}function Li(R,t,c,v){return new Promise(x=>{R.add({...t,onStart:(b,h)=>{var w;c==null||c(b,h),(w=t.onStart)==null||w.call(t,b,h)},onComplete:(b,h)=>{var w;v==null||v(b,h),(w=t.onComplete)==null||w.call(t,b,h),x()}})})}function Bt(R,t){return new Promise(c=>{R.time.delayedCall(t,c)})}class mp{constructor(t,c,v=!0,x,b="physical"){this.target=t,this.amount=c,this.isPercentage=v,this.sourceAbility=x,this.damageType=b,this.type="Drain",this.tags=["drain","weaken"],this.label=typeof x=="string"?x:"Drain"}async execute(t,c){var i;if(this.target.isDead())return;const v=t.getDisplayCharacter().getAttackImpactTime(),x=this.isPercentage?Math.floor(this.amount*this.target.getCurrentHp()):this.amount,b={fire:this.damageType==="fire"?x:0,ice:this.damageType==="ice"?x:0,lightning:this.damageType==="lightning"?x:0,shadow:this.damageType==="shadow"?x:0,physical:this.damageType==="physical"?x:0},h=this.target.calculateIncomingDamage(b),w={totalDamage:h.totalDamage,source:t,target:this.target,attackImpactTime:v,attackImpactHeightRatio:t.getDisplayCharacter().getAttackImpactHeightRatio(),damageResult:h,hitCount:0,isCritical:!1,isRage:!0,wasDodged:!1,statusEffects:[]};return t.doRageAttack(this.target,w),await Bt(t.getDisplayCharacter().scene,v),await Promise.all([c.applyDamage(t,this.target,w,void 0),c.applyHeal(t,x,!1)]),{source:t,target:this.target,drainAmount:Math.floor(x),sourceAbilityName:typeof this.sourceAbility=="string"?this.sourceAbility:((i=this.sourceAbility)==null?void 0:i.name)||"Unknown",damageProfile:b}}clone(){return new mp(this.target,this.amount,this.isPercentage,this.sourceAbility)}}class Yw{constructor(){this.name="Wood Golem Brain",this.description="A brain that controls the Wood Golem, deciding when to use its different abilities.",this.ATTACK_ABILITY_NAME="Piercing Augers",this.RAGE_ABILITY_NAME="Force of Nature",this.HEAL_ABILITY_NAME="Verdant Regrowth",this.DRAIN_ABILITY_NAME="Sap Power",this.DRAIN_PERCENTAGE=.5,this.HEAL_AMOUNT=.2,this.HEAL_COOLDOWN_TURNS=3,this.HEAL_HP_THRESHOLD=.5,this.DRAIN_DAMAGE_TYPE="physical",this._healCooldownCounter=0,this.lowHPthreshold=.3,this.hasTriggered=!1,this.rageAmount=100}modifyAvailableActions(t,c,v){const x=v.getDefaultTargetFor(c.actor);if(!x||x.isDead())return c.actor.consumeRage(),[];if(c.actor.getRage()>=100)return c.actor.showRageActivated(),[new mp(x,this.DRAIN_PERCENTAGE,!0,this.DRAIN_ABILITY_NAME,this.DRAIN_DAMAGE_TYPE)];const b=c.actor.getCurrentHp(),h=c.actor.getCurrentMaxHp();if(b<h*this.HEAL_HP_THRESHOLD&&this._healCooldownCounter<=0)return this._healCooldownCounter=this.HEAL_COOLDOWN_TURNS,[new Ys(c.actor,this.HEAL_AMOUNT,!0,this.HEAL_ABILITY_NAME)];this._healCooldownCounter--;const e=c.actor.getWeaponDamage();return[new Ea(x,this.ATTACK_ABILITY_NAME,e)]}async onHealthChanged(t,c,v,x,b){if(x>v)return;const h=t.getModifiedStatValue("MaxHp"),w=v/h>=this.lowHPthreshold,e=x/h<this.lowHPthreshold;if(w&&e&&!this.hasTriggered)return this.hasTriggered=!0,[new Hi(t,this.rageAmount,this.RAGE_ABILITY_NAME)]}async onPostActionPhase(t,c,v,x){return c.type==="Drain"&&v.actor===t&&t.consumeRage(),[]}}class TD extends Yw{constructor(){super(...arguments),this.name="Icy Wood Golem Brain",this.description="A brain that controls the Icy Wood Golem, deciding when to use its different abilities.",this.ATTACK_ABILITY_NAME="Frozen Augers",this.RAGE_ABILITY_NAME="Cold Rage",this.HEAL_ABILITY_NAME="Nature's Embrace",this.DRAIN_ABILITY_NAME="Frost Drain",this.DRAIN_PERCENTAGE=.5,this.HEAL_AMOUNT=.2,this.HEAL_COOLDOWN_TURNS=3,this.HEAL_HP_THRESHOLD=.5,this.DRAIN_DAMAGE_TYPE="ice",this._healCooldownCounter=0}}class gp{constructor(t,c,v=!0,x,b="shadow"){this.target=t,this.amount=c,this.isPercentage=v,this.sourceAbility=x,this.damageType=b,this.type="MutualDamage",this.label="Mutual Damage",this.tags=["sacrifice","damage"]}async execute(t,c){var e;if(this.target.isDead())return;const v=this.isPercentage?Math.floor(this.amount*t.getModifiedStatValue("MaxHp")):this.amount,x={fire:this.damageType==="fire"?v:0,ice:this.damageType==="ice"?v:0,lightning:this.damageType==="lightning"?v:0,shadow:this.damageType==="shadow"?v:0,physical:this.damageType==="physical"?v:0},b=this.target.calculateIncomingDamage(x),h={totalDamage:b.totalDamage,source:t,target:this.target,attackImpactTime:t.getDisplayCharacter().getAttackImpactTime(),attackImpactHeightRatio:t.getDisplayCharacter().getAttackImpactHeightRatio(),damageResult:b,hitCount:0,isCritical:!1,isRage:!0,wasDodged:!1,statusEffects:[]};return await Bt(t.getDisplayCharacter().scene,h.attackImpactTime),await Promise.all([c.applyDamage(t,this.target,h,void 0),c.applyDamage(t,t,h,void 0)]),{source:t,target:this.target,damageAmount:v,sourceAbilityName:typeof this.sourceAbility=="string"?this.sourceAbility:((e=this.sourceAbility)==null?void 0:e.name)||"Unknown",damageProfile:x}}clone(){return new gp(this.target,this.amount,this.isPercentage,this.sourceAbility)}}class gr{constructor(t,c="Rage Attack"){this.target=t,this.name=c,this.type="Rage",this.label="Rage Attack",this.label=c||"Rage Attack"}async execute(t,c){const v={source:t,target:this.target,attackImpactTime:t.getDisplayCharacter().getAttackImpactTime(),attackImpactHeightRatio:t.getDisplayCharacter().getAttackImpactHeightRatio(),totalDamage:0,hitCount:0,isCritical:!1,isRage:!0,wasDodged:!1,statusEffects:[]},x=t.getWeaponDamage();if(x.fire*=2.5,x.ice*=2.5,x.lightning*=2.5,x.shadow*=2.5,x.physical*=2.5,v.wasDodged=this.target.getAttackDodged(),!v.wasDodged){const b=this.target.calculateIncomingDamage(x);v.totalDamage=b.totalDamage,v.damageResult=b,v.hitCount=1}if(!this.target.isDead())return await Promise.all([t.doRageAttack(this.target,v),c.applyDamage(t,this.target,v,this)]),v}clone(){return new gr(this.target)}}class CD{constructor(){this.name="Dark Demon Brain",this.description="A brain that controls the Dark Demon, deciding when to use its different abilities.",this.ATTACK_ABILITY_NAME="Seething Oath",this.ALT_ABILITY_NAME="Pact of Ruin",this.ADD_RAGE_ABILITY_NAME="Rite of Wrath",this.RAGE_ABILITY_NAME="Abyssal Verdict",this.DRAIN_DAMAGE_TYPE="shadow",this.ALT_DAMAGE=.15,this.ALT_COOLDOWN_TURNS=2,this._altCooldownCounter=2,this.rageOnDamageAmount=30}modifyAvailableActions(t,c,v){const x=v.getDefaultTargetFor(c.actor);if(!x||x.isDead())return c.actor.consumeRage(),[];if(c.actor.getRage()>=100)return c.actor.showRageActivated(),[new gr(x,this.RAGE_ABILITY_NAME)];const b=c.actor.getCurrentHp(),h=c.actor.getModifiedStatValue("MaxHp");return this._altCooldownCounter<=0&&b>h*this.ALT_DAMAGE?(this._altCooldownCounter=this.ALT_COOLDOWN_TURNS,[new gp(x,this.ALT_DAMAGE,!0,this.ALT_ABILITY_NAME,this.DRAIN_DAMAGE_TYPE)]):(this._altCooldownCounter--,[new Cc])}async onHealthChanged(t,c,v,x,b){if(!(x>v))return[new Hi(t,this.rageOnDamageAmount,this.ADD_RAGE_ABILITY_NAME)]}async onPostActionPhase(t,c,v,x){return c.type==="Rage"&&v.actor===t&&t.consumeRage(),[]}}class AD{constructor(){this.name="Living Armor Brain",this.description="A brain that controls the Living Armor, deciding when to use its different abilities.",this.ATTACK_ABILITY_NAME="Lunge",this.ALT_ABILITY_NAME="Lethal Lance",this.ADD_RAGE_ABILITY_NAME="Dented Armor",this.RAGE_ABILITY_NAME="Flying Fury",this.ALT_COOLDOWN_TURNS=2,this._altCooldownCounter=2,this.ALT_DAMAGE_MULTIPLIER=1.5,this.rageOnDamageAmount=35}modifyAvailableActions(t,c,v){const x=c.actor,b=v.getDefaultTargetFor(c.actor);if(!b||b.isDead())return x.consumeRage(),t;if(x.getRage()>=100)return x.showRageActivated(),[new gr(b,this.RAGE_ABILITY_NAME)];if(this._altCooldownCounter<=0){this._altCooldownCounter=this.ALT_COOLDOWN_TURNS;const w=c.actor.getWeaponDamage();return w.physical*=this.ALT_DAMAGE_MULTIPLIER,[new Ea(b,this.ALT_ABILITY_NAME,w)]}this._altCooldownCounter--;const h=c.actor.getWeaponDamage();return[new Ea(b,this.ATTACK_ABILITY_NAME,h)]}async onHealthChanged(t,c,v,x,b){if(!(x>v))return[new Hi(t,this.rageOnDamageAmount,this.ADD_RAGE_ABILITY_NAME)]}async onPostActionPhase(t,c,v,x){return c.type==="Rage"&&v.actor===t&&t.consumeRage(),[]}}class bD{constructor(){this.name="Mushroom Large Boss Brain",this.description="A brain that controls the Mushroom Large Boss, deciding when to use its different abilities.",this.ATTACK_ABILITY_NAME="Big Swing",this.ALT_ABILITY_NAME="Shroom Slam",this.ADD_RAGE_ABILITY_NAME="Sliced Mushroom",this.RAGE_ABILITY_NAME="Spore Cloud",this.ALT_COOLDOWN_TURNS=3,this._altCooldownCounter=3,this.ALT_DAMAGE_MULTIPLIER=1.5,this.RAGE_DAMAGE_AMOUNT=15,this.RAGE_ELEMENTAL_DAMAGE_AMOUNT=35,this.LIGHTNING_RAGE_ABILITY_NAME="Fried Mushroom"}modifyAvailableActions(t,c,v){const x=v.getDefaultTargetFor(c.actor);if(!x||x.isDead())return c.actor.consumeRage(),[];if(c.actor.getRage()>=100)return c.actor.showRageActivated(),[new gr(x,this.RAGE_ABILITY_NAME)];if(this._altCooldownCounter<=0){this._altCooldownCounter=this.ALT_COOLDOWN_TURNS;const h=c.actor.getWeaponDamage();return h.physical*=this.ALT_DAMAGE_MULTIPLIER,[new Ea(x,this.ALT_ABILITY_NAME,h)]}this._altCooldownCounter--;const b=c.actor.getWeaponDamage();return[new Ea(x,this.ATTACK_ABILITY_NAME,b)]}async onHealthChanged(t,c,v,x,b){var w,e,i,u,n,r;return x>v?void 0:(((i=(e=(w=c.result)==null?void 0:w.metadata)==null?void 0:e.damageResult)==null?void 0:i.damageByType.fire)??0)>0||(((r=(n=(u=c.result)==null?void 0:u.metadata)==null?void 0:n.damageResult)==null?void 0:r.damageByType.lightning)??0)>0?[new Hi(t,this.RAGE_ELEMENTAL_DAMAGE_AMOUNT,this.LIGHTNING_RAGE_ABILITY_NAME)]:[new Hi(t,this.RAGE_DAMAGE_AMOUNT,this.ADD_RAGE_ABILITY_NAME)]}async onPostActionPhase(t,c,v,x){v.actor==t&&c.type==="Rage"&&t.consumeRage()}}class Xw{constructor(){this.name="Skeleton Fire Head Brain",this.description="A brain that controls the Skeleton Fire Head, deciding when to use its different abilities.",this.ATTACK_ABILITY_NAME="Jawbreaker",this.ALT_ABILITY_NAME="Spike Fist Slam",this.ADD_RAGE_ABILITY_NAME="Fuming Anger",this.RAGE_ABILITY_NAME="Flame Burst",this.ALT_COOLDOWN_TURNS=4,this.ALT_DAMAGE_MULTIPLIER=1.5,this._altCooldownCounter=3,this.lowHPthreshold=.3,this.hasTriggered=!1,this.rageOnDamageAmount=20}modifyAvailableActions(t,c,v){const x=v.getDefaultTargetFor(c.actor);if(!x||x.isDead())return t;if(this._altCooldownCounter<=0){this._altCooldownCounter=this.ALT_COOLDOWN_TURNS;const h=c.actor.getWeaponDamage();return h.fire*=this.ALT_DAMAGE_MULTIPLIER,[new Ea(x,this.ALT_ABILITY_NAME,h)]}this._altCooldownCounter--;const b=c.actor.getWeaponDamage();return[new Ea(x,this.ATTACK_ABILITY_NAME,b)]}async onHealthChanged(t,c,v,x,b){if(x>v)return;const h=t.getModifiedStatValue("MaxHp"),w=v/h>=this.lowHPthreshold,e=x/h<this.lowHPthreshold;if(w&&e&&!this.hasTriggered){this.hasTriggered=!0;const i=b.getDefaultTargetFor(c.actor);if(!i||i.isDead())return}}async onPostActionPhase(t,c,v,x){if(c.label!==this.ATTACK_ABILITY_NAME&&c.label!==this.ALT_ABILITY_NAME)return[];if((v.rage??0)<100)return[new Hi(t,this.rageOnDamageAmount,this.ADD_RAGE_ABILITY_NAME)];const b=x.getDefaultTargetFor(t);return!b||b.isDead()?(t.consumeRage(),[]):(await t.showRageActivated(),t.consumeRage(),[new gr(b,this.RAGE_ABILITY_NAME)])}}class ED extends Xw{constructor(){super(...arguments),this.name="Skeleton Ice Head Brain",this.description="A brain that controls the Skeleton Ice Head, deciding when to use its different abilities.",this.ATTACK_ABILITY_NAME="Jawbreaker",this.ALT_ABILITY_NAME="Spike Fist Slam",this.ADD_RAGE_ABILITY_NAME="Chilling Anger",this.RAGE_ABILITY_NAME="Ice Blast",this.ALT_COOLDOWN_TURNS=4,this.ALT_DAMAGE_MULTIPLIER=1.5,this._altCooldownCounter=3}}class pp{constructor(t,c="Custom Attack",v,x){this.target=t,this.name=c,this.configKey=v,this.type="CustomAttackAction",this.label="Custom Attack",this.label=c||"Custom Attack",this.damageProfile=x,this.attackConfigKey=v}async execute(t,c){if(this.target.isDead())return;const v={source:t,target:this.target,attackImpactTime:t.getDisplayCharacter().getAttackImpactTime(this.attackConfigKey),attackImpactHeightRatio:t.getDisplayCharacter().getAttackImpactHeightRatio(this.attackConfigKey),totalDamage:0,hitCount:0,isCritical:!1,isRage:!1,wasDodged:!1,statusEffects:[]};if(v.isCritical=t.isCriticalHit(),v.isCritical&&(this.damageProfile.fire*=2,this.damageProfile.ice*=2,this.damageProfile.lightning*=2,this.damageProfile.shadow*=2,this.damageProfile.physical*=2),v.wasDodged=this.target.getAttackDodged(),!v.wasDodged){const x=this.target.calculateIncomingDamage(this.damageProfile);v.totalDamage=x.totalDamage,v.damageResult=x,v.hitCount=1}return console.log(`${t.id} attacks ${this.target.id} for ${v.totalDamage}`+(v.isCritical?" CRITICAL":"")+(v.wasDodged?" (dodged)":"")+" damage!"),await Promise.all([t.doCustomAttack(this.target,this.attackConfigKey,v),c.applyDamage(t,this.target,v,this)]),v}clone(){return new pp(this.target,this.name,this.attackConfigKey,this.damageProfile)}}class MD{constructor(){this.name="Robot No 6 Brain",this.description="A brain that controls the Robot No. 6, deciding when to use its different abilities.",this.ATTACK_ABILITY_NAME="Suppression Beam",this.ALT_ABILITY_NAME="Semi-Lethal Explosive",this.ADD_RAGE_ABILITY_NAME="Rage Inducer",this.RAGE_ABILITY_NAME="Itano Burst",this.ALT_ABILITY_KEY="CustomAttackOneMissile",this.ALT_COOLDOWN_TURNS=2,this._altCooldownCounter=2,this.ALT_DAMAGE_MULTIPLIER=1.5,this.rageOnDamageAmount=15}modifyAvailableActions(t,c,v){const x=v.getDefaultTargetFor(c.actor);if(!x||x.isDead())return t;if(c.actor.getRage()>=100)return c.actor.showRageActivated(),[new gr(x,this.RAGE_ABILITY_NAME)];if(this._altCooldownCounter<=0){this._altCooldownCounter=this.ALT_COOLDOWN_TURNS;const h=c.actor.getWeaponDamage();return h.fire*=this.ALT_DAMAGE_MULTIPLIER,[new pp(x,this.ALT_ABILITY_NAME,this.ALT_ABILITY_KEY,h)]}this._altCooldownCounter--;const b=c.actor.getWeaponDamage();return[new Ea(x,this.ATTACK_ABILITY_NAME,b)]}async onHealthChanged(t,c,v,x,b){if(!(x>v))return[new Hi(t,this.rageOnDamageAmount,this.ADD_RAGE_ABILITY_NAME)]}async onPostActionPhase(t,c,v,x){return c.type==="Rage"&&v.actor===t&&t.consumeRage(),[]}}class LD{constructor(){this.name="Robot Boss Brain",this.description="A brain that controls the Robot Boss, deciding when to use its different abilities.",this.ATTACK_ABILITY_NAME="Cable Flog",this.ADD_RAGE_ABILITY_NAME="Capacitor Charge",this.RAGE_ABILITY_NAME="Stabbing Shockwave",this.lightningDamageMultiplier=5,this.rageOnDamageAmount=10}modifyAvailableActions(t,c,v){const x=v.getDefaultTargetFor(c.actor);if(!x||x.isDead())return c.actor.consumeRage(),t;if(c.actor.getRage()>=100)return c.actor.showRageActivated(),[new gr(x,this.RAGE_ABILITY_NAME)];const b=c.actor.getWeaponDamage();return[new Ea(x,this.ATTACK_ABILITY_NAME,b)]}async onHealthChanged(t,c,v,x,b){var h,w,e;if(!(x>v))return(((e=(w=(h=c.result)==null?void 0:h.metadata)==null?void 0:w.damageResult)==null?void 0:e.damageByType.lightning)??0)>0?[new Hi(t,this.rageOnDamageAmount*this.lightningDamageMultiplier,this.ADD_RAGE_ABILITY_NAME)]:[new Hi(t,this.rageOnDamageAmount,this.ADD_RAGE_ABILITY_NAME)]}async onPostActionPhase(t,c,v,x){return v.isOutOfTurn?[]:(c.type==="Rage"&&t.resetRage(),[])}}class RD{constructor(){this.name="Fire Knife",this.description="Throw an Fire Knife at the start of your turn."}async onTurnStart(t,c,v){const x=v.getDefaultTargetFor(t);return!x||x.isDead()?[]:[new us(x,this,"fire")]}}class PD{constructor(){this.name="Ice Knife",this.description="Throw an Ice Knife at the start of your turn."}async onTurnStart(t,c,v){const x=v.getDefaultTargetFor(t);return!x||x.isDead()?[]:[new us(x,this,"ice")]}}class BD{constructor(){this.name="Fire Knife On Attack",this.description="Throw a fire knife when you attack."}async onPostActionPhase(t,c,v,x){if(c.type!=="MainWeaponAttackAction")return;const b=x.getDefaultTargetFor(t);return!b||b.isDead()?[]:[new us(b,this,"fire")]}}class DD{constructor(){this.name="Ice Knife On Attack",this.description="Throw an ice knife when you attack."}async onPostActionPhase(t,c,v,x){if(c.type!=="MainWeaponAttackAction")return;const b=x.getDefaultTargetFor(t);return!b||b.isDead()?[]:[new us(b,this,"ice")]}}class FD{constructor(){this.name="Magic Knife On Attack",this.description="Throw a magic knife when you attack."}async onPostActionPhase(t,c,v,x){if(c.type!=="MainWeaponAttackAction")return;const b=x.getDefaultTargetFor(t);return!b||b.isDead()?[]:[new us(b)]}}class ID{constructor(){this.name="Magic Knife on Enemy Death",this.description="Throw a knife when an enemy dies."}onTargetDied(t,c,v){const x=v.getDefaultTargetFor(t);return x?Promise.resolve([new us(x,this)]):Promise.resolve([])}}class Ac{constructor(t,c,v){this.statsBoostAmount=t,this.statsType=c,this.sourceAbility=v,this.type="StatsUpgrade",this.label="Stats Upgrade",this.activeEffectId=null}async applySkillEffect(t){var c;if(!this.activeEffectId){const v=t.createSkillEffect(this.statsType,this.statsBoostAmount);return t.addSkillEffect(v),this.activeEffectId=v.id,console.log(`Applying ${this.statsBoostAmount*100}% boost to ${this.statsType}`),{source:t,message:`boost ${this.statsBoostAmount*100}% ${this.statsType}`,sourceAbilityName:((c=this.sourceAbility)==null?void 0:c.name)||"Unknown"}}}async execute(t,c){return this.applySkillEffect(t)}resetForBattle(t){this.activeEffectId&&(t.removeSkillEffectById(this.activeEffectId),this.activeEffectId=null)}clone(){return new Ac(this.statsBoostAmount,this.statsType,this.sourceAbility)}}class OD{constructor(){this.name="Imperfect Knife Doubler",this.description="Throw twice as many knives, but each one does less damage.",this.dupedActions=[],this.knifeNerf=null}async onPreActionPhase(t,c){console.log("KnifeDoubler onPreActionPhase called"),this.knifeNerf||(this.knifeNerf=new Ac(-.6,"KnifeMultiplier",this),this.knifeNerf.execute(t,c))}async onPostActionPhase(t,c,v,x){if(this.dupedActions.includes(c)||c.type!=="MagicKnife")return;const b=c.clone();return this.dupedActions.push(b),[b]}resetForBattle(t){var c;this.dupedActions=[],(c=this.knifeNerf)==null||c.resetForBattle(t),this.knifeNerf=null}}class ND{constructor(){this.turnCount=3,this.name=`Magic Knife Every ${this.turnCount} Turns`,this.description=`Throw a magic knife every ${this.turnCount} turns.`}async onTurnStart(t,c,v){if(c.turnNumber>0&&c.turnNumber%this.turnCount===0){const x=v.getDefaultTargetFor(t);return!x||x.isDead()?[]:[new us(x,this,"shadow")]}}}class GD{constructor(){this.nerfAmount=-.8,this.name="Triple Attack",this.description=`Attack three times with your main weapon. ${Math.round(this.nerfAmount*100)}% ATK.`,this.dupedActions=[],this.attackNerf=null}async onPreActionPhase(t,c){this.attackNerf||(this.attackNerf=new Ac(this.nerfAmount,"Attack",this),this.attackNerf.execute(t,c))}async onPostActionPhase(t,c,v,x){if(this.dupedActions.includes(c)||c.type!=="MainWeaponAttackAction")return;const b=c.clone(),h=c.clone();return this.dupedActions.push(b,h),[b,h]}resetForBattle(t){var c;this.dupedActions=[],(c=this.attackNerf)==null||c.resetForBattle(t),this.attackNerf=null}}class HD{constructor(){this.hitCount=3,this.name=`Magic Knife Every ${this.hitCount} Hits`,this.description=`Throw a magic knife every ${this.hitCount} hits.`}async onHitCounter(t,c,v,x){if(v%this.hitCount===0){const b=x.getDefaultTargetFor(t);return!b||b.isDead()?[]:[new us(b,this)]}return[]}}class kD{constructor(){this.hitInterval=3,this.healAmount=.03,this.name=`Heal On Hit ${this.hitInterval}`,this.description=`Heal for ${Math.round(this.healAmount*100)} on hit ${this.hitInterval}.`}async onHitCounter(t,c,v,x){return v===this.hitInterval?[new Ys(t,this.healAmount,!0,this)]:[]}}class UD{constructor(){this.healAmount=.1,this.name="Heal on First Turn",this.description=`Heal for ${Math.round(this.healAmount*100)}% of Max HP on first turn.`}async onTurnStart(t,c,v){if(c.turnNumber===1)return[new Ys(t,this.healAmount,!0,this)]}}class VD{constructor(){this.name="Two For Two Lightning",this.description="On turn 2, zap one target with two lightning bolts."}async onTurnStart(t,c,v){if(c.turnNumber!=2)return;const x=v.getDefaultTargetFor(t);return!x||x.isDead()?[]:[new pa(x,this),new pa(x,this)]}}class YD{constructor(){this.threshold=.3,this.defenseBoostAmount=.2,this.name="Low HP Defence Boost",this.description=`Increases Defense by ${this.defenseBoostAmount*100}% when HP is below ${this.threshold*100}%.`,this.statsUpAction=new ao(this.defenseBoostAmount,"Defense",this.threshold,El.LowHP,this)}async applySkillEffectOnThreshold(t){return[this.statsUpAction]}async onTurnStart(t,c,v){return this.applySkillEffectOnThreshold(t)}async onHealthChanged(t,c,v,x,b){return this.applySkillEffectOnThreshold(t)}resetForBattle(t){var c;(c=this.statsUpAction)==null||c.resetForBattle(t)}}class XD{constructor(){this.lowHPthreshold=.3,this.hasTriggered=!1,this.priority=-1,this.triggerOnStart=!1,this.name="Knives on Low HP",this.description=`Throw three magic knives the first time your health drops below ${this.lowHPthreshold*100}%.`}async onTurnStart(t,c,v){if(this.triggerOnStart){this.triggerOnStart=!1;const x=v.getDefaultTargetFor(t);return!x||x.isDead()?[]:[new us(x,this,"shadow"),new us(x,this,"shadow"),new us(x,this,"shadow")]}return[]}async onHealthChanged(t,c,v,x,b){if(x>v)return;const h=t.getModifiedStatValue("MaxHp"),w=v/h>=this.lowHPthreshold,e=x/h<this.lowHPthreshold;w&&e&&!this.hasTriggered&&(this.hasTriggered=!0,this.triggerOnStart=!0)}resetForBattle(){this.hasTriggered=!1,this.triggerOnStart=!1}}class zD{constructor(){this.rageAmount=10,this.name="Add Rage On Crit",this.description="Add a small amout of rage each time you crit."}async onPostActionPhase(t,c,v,x){var h;if(c.type!=="MainWeaponAttackAction")return[];const b=(h=v.result)==null?void 0:h.metadata;return b!=null&&b.isCritical?[new Hi(t,this.rageAmount,this)]:[]}}class WD{constructor(){this.rageAmount=10,this.name="Add Rage On Lightning",this.description="Add a small amount of rage every time a lightning bolt fires."}async onPostActionPhase(t,c,v,x){if(c.type==="LightningBolt")return[new Hi(t,this.rageAmount,this)]}}class jD{constructor(){this.healChance=.4,this.healAmount=.05,this.name="Dark Recovery",this.description=`${Math.round(this.healChance*100)}% Chance to Heal for ${Math.round(this.healAmount*100)}% of Max HP when taking 🌑 DMG`}async onHealthChanged(t,c,v,x,b){var w,e;const h=(e=(w=c.result)==null?void 0:w.metadata)==null?void 0:e.damageResult;return h&&h.damageByType.shadow>0&&Mg().next()<this.healChance?[new Ys(t,this.healAmount,!0,this)]:[]}}class KD{constructor(){this.hitInterval=4,this.name=`Lightning on Hit ${this.hitInterval}`,this.description=`Zap your target with a lightning bolt on hit ${this.hitInterval}.`}async onHitCounter(t,c,v,x){if(v===this.hitInterval){const b=x.getDefaultTargetFor(t);return b?[new pa(b,this)]:Promise.resolve([])}return[]}}const Qu={DefaultAttack:()=>new fp,DoNothing:()=>new GB,EveryOtherTurnDoubleAttack:()=>new HB,EveryOtherTurnAddRage:()=>new kB,AddRageOnHeal:()=>new UB,AddRageOnDamage:()=>new VB,AddRageOnMagicKnife:()=>new YB,MagicKnifeAbility:()=>new aD,MagicKnifeOnRage:()=>new nD,MagicKnifeOnCrit:()=>new oD,LightningOnAttack:()=>new JB,LightningOnCrit:()=>new qB,LightningOnTurnStart:()=>new _B,LightningOnRage:()=>new rD,SecondWindAbility:()=>new lD,LowHpDodgeBoostAbility:()=>new eD,LowHpCritBoostAbility:()=>new tD,MaxHpCritBoostAbility:()=>new iD,BoostAttackOnHighHP:()=>new sD,HealOnCritAbility:()=>new zB,HealOnLightning:()=>new WB,HealOnMagicKnife:()=>new jB,HealOnRage:()=>new KB,LifeStealOnAttack:()=>new $B,HealEveryHitCount:()=>new QB,LowHPRageFill:()=>new XB,RageOnFirstTurn:()=>new hD,ShieldOnLowHP:()=>new dD,LightningOnShieldActivate:()=>new uD,BonusRageOnAttack:()=>new cD,LightningEveryHitCount:()=>new ZB,LightningOnEnemyDeath:()=>new fD,AddRageOnEnemyDeath:()=>new mD,AddRageOnHitCount:()=>new gD,GainShieldOnEnemyDeath:()=>new pD,GainShieldOnHitCount:()=>new vD,GainShieldOnRage:()=>new yD,GainShieldOnTurn:()=>new xD,HealOnEnemyDeath:()=>new wD,MagicKnifeOnHitCount:()=>new SD,FireKnifeOnTurnStart:()=>new RD,IceKnifeOnTurnStart:()=>new PD,BossBrain_WoodGolem:()=>new Yw,BossBrain_IcyWoodGolem:()=>new TD,BossBrain_DarkDemon:()=>new CD,BossBrain_LivingArmor:()=>new AD,BossBrain_MushroomLargeBoss:()=>new bD,BossBrain_SkeletonFireHead:()=>new Xw,BossBrain_SkeletonIceHead:()=>new ED,BossBrain_RobotNo6:()=>new MD,BossBrain_RobotBoss:()=>new LD,KnifeOnAttack:()=>new FD,FireKnifeOnAttack:()=>new BD,IceKnifeOnAttack:()=>new DD,MagicKnifeOnTurn:()=>new ND,MagicKnifeOnEnemyDeath:()=>new ID,KnifeDoubler:()=>new OD,TripleAttack:()=>new GD,MagicKnifeEveryHitCount:()=>new HD,HealOnHitCount:()=>new kD,HealOnFirstTurn:()=>new UD,DoubleLightningOnTurn:()=>new VD,LowHPBoostDefense:()=>new YD,LowHPKnives:()=>new XD,AddRageOnCrit:()=>new zD,AddRageOnLightning:()=>new WD,HealChanceOnShadowDamage:()=>new jD,LightningOnHitCount:()=>new KD};function Ju(R){return R.map(t=>{const c=Qu[t];if(!c)throw new Error(`Unknown ability: ${t}`);return c()})}function zw(R){const t=Qu[R];if(!t)throw new Error(`Unknown ability: ${R}`);return t()}function $D(){return Object.keys(Qu).filter(R=>R!=="DefaultAttack").map(R=>{const t=Qu[R];return t()})}const QD={physical:10,shadow:0,fire:0,lightning:0,ice:0};class JD{constructor(t=100){this.max=t,this.value=0}get(){return this.value}getMax(){return this.max}add(t){this.value=Math.min(this.max,this.value+t)}consume(){this.value=0}reset(){this.value=0}isFull(){return this.value>=this.max}}class Zu{constructor(t,c,v,x=!1,b=[],h=QD){this.id=t,this.model=c,this.displayCharacter=v,this.attackDamageProfile=h,this.currentHp=0,this.lastMaxHp=0,this.shieldHP=0,this.statusEffects=[],this.skillEffects=[],this.promptOnDeath=!1,this.tauntMessage="",this.isPlayer=!1,this.skillEffectCounter=0,this.turnCounter=0,this.abilities=[],this.itemAbilities=[],this.equippedItems=[],this.unsubscribeEquipItem=Tn((e,i)=>{i.inventory.equippedItems!==e.inventory.equippedItems&&this.handleEquipmentChange()}),this.equippedItems=b;const w=this.getModifiedStatValue("MaxHp");this.currentHp=w,this.lastMaxHp=w,this.skillEffects=[],this.isPlayer=x,this.abilities.push(new fp),this.isPlayer&&this.syncAbilitiesWithStore()}updatePlayerAbilitiesUIStore(){this.isPlayer&&Te().setPlayerAbilities(this.abilities)}syncAbilitiesWithStore(){const t=Te();this.unsubscribeFromStore=Tn(c=>{const v=c.playerAbilities;this.syncAbilities(v)}),this.syncAbilities(t.playerAbilities)}syncAbilities(t){const c=this.abilities.filter(v=>v.name.toLowerCase().includes("default"));this.abilities=[...c,...t.filter(v=>!v.name.toLowerCase().includes("default"))]}handleEquipmentChange(){this.isPlayer&&(this.equippedItems=Object.values(Te().inventory.equippedItems).filter(t=>!!t),this.updateMaxHp(this.getModifiedStatValue("MaxHp")))}cleanup(){this.unsubscribeFromStore&&(this.unsubscribeFromStore(),this.unsubscribeEquipItem())}disableAnimations(){Object.assign(this.displayCharacter,{playDefaultAttackAnim:()=>Promise.resolve(),playRageAttackAnim:()=>Promise.resolve(),heal:()=>Promise.resolve(),showMagicShield:()=>Promise.resolve(),hideMagicShield:()=>Promise.resolve(),dodge:()=>Promise.resolve(),takeDamage:()=>this.displayCharacter.updateHealth(this.currentHp/this.getModifiedStatValue("MaxHp"))})}setEquippedItems(t){this.equippedItems=t}setAttackDamageProfile(t){this.attackDamageProfile=t}setPromptOnDeath(t){this.promptOnDeath=t}getPromptOnDeath(){return this.promptOnDeath}getModel(){return this.model}setModel(t){this.model=t,this.updateMaxHp(this.getModifiedStatValue("MaxHp"))}getCurrentHp(){return this.currentHp}getCurrentMaxHp(){return this.getModifiedStatValue("MaxHp")}getShieldHp(){return this.shieldHP}getDisplayCharacter(){return this.displayCharacter}getIsPlayer(){return this.isPlayer}getTurnCounter(){return this.turnCounter}resetTurnCounter(){this.turnCounter=0}getSkillEffects(){return this.skillEffects}getAbilities(t=!0){return t?[...this.abilities,...this.itemAbilities]:[...this.abilities,...this.getAbilitiesFromItems()]}getAbilitiesFromItems(){const t=Object.values(this.equippedItems).map(c=>c.definition.abilities).flat().map(c=>c.id);return Ju(t)}populateItemAbilities(){this.itemAbilities=this.getAbilitiesFromItems()}onPreActionPhase(t){for(const c of this.getAbilities())c.onPreActionPhase&&c.onPreActionPhase(this,t)}async onTurnStart(t){this.turnCounter++;const c={actor:this,turnNumber:this.turnCounter};let v=[];const x=this.getAbilities().sort((b,h)=>(b.priority??0)-(h.priority??0));for(const b of x)if(b.onTurnStart){const h=await b.onTurnStart(this,c,t);h&&v.push(...h)}return v}async onActionTaken(t,c,v){const x={actor:this,turnNumber:this.turnCounter,action:t,result:v,rage:this.hasRageMeter()?this.getRage():void 0};for(const b of this.getAbilities())b.onActionTaken&&await b.onActionTaken(this,t,x,c)}chooseAction(t){var b,h;let c=[];const v={actor:this,turnNumber:this.turnCounter};for(const w of this.getAbilities())c=((b=w.modifyAvailableActions)==null?void 0:b.call(w,c,v,t))??c;let x=this.autoPickAction(c);for(const w of this.getAbilities())x=((h=w.interceptAction)==null?void 0:h.call(w,x,v,t))??x;return x}autoPickAction(t){return t[0]}enableRageMeter(){this.displayCharacter.hasHungerBar()==!1&&this.displayCharacter.createHungerBar(),this.rageMeter=new JD}resetRage(){var t;(t=this.rageMeter)==null||t.reset(),this.displayCharacter.updateHunger({hungerPercent:this.getRage()/this.getMaxRage(),animateBar:!1}),this.displayCharacter.setRaging(!1)}getRage(){var t;return((t=this.rageMeter)==null?void 0:t.get())??0}getMaxRage(){var t;return((t=this.rageMeter)==null?void 0:t.getMax())??0}addRage(t){var c,v;(c=this.rageMeter)==null||c.add(t),this.displayCharacter.updateHunger({hungerPercent:this.getRage()/this.getMaxRage(),animateBar:!0}),(v=this.rageMeter)!=null&&v.isFull()&&this.displayCharacter.setRaging(!0)}consumeRage(){var t;(t=this.rageMeter)==null||t.consume(),this.displayCharacter.updateHunger({hungerPercent:this.getRage()/this.getMaxRage(),animateBar:!1})}hasRageMeter(){return this.rageMeter!==void 0}takeDamage(t){return this.shieldHP>0?(this.shieldHP=Math.max(0,this.shieldHP-t.totalDamage),!0):(this.currentHp=Math.max(0,this.currentHp-t.totalDamage),!1)}async healForPercent(t,c=0){this.getCurrentHp();const v=Math.floor(t*this.getModifiedStatValue("MaxHp"));this.currentHp=Math.min(this.getModifiedStatValue("MaxHp"),this.currentHp+v),!(v<=0)&&(await this.displayCharacter.heal(v,this.currentHp,this.getModifiedStatValue("MaxHp"),c),this.syncHpIfPlayer())}async healForAmount(t,c=0){this.currentHp=Math.min(this.getModifiedStatValue("MaxHp"),this.currentHp+t),!(t<=0)&&(await this.displayCharacter.heal(t,this.currentHp,this.getModifiedStatValue("MaxHp"),c),this.syncHpIfPlayer())}async doDefaultAttack(t,c){await this.displayCharacter.playDefaultAttackAnim(t.displayCharacter,c)}async doRageAttack(t,c){await this.displayCharacter.playRageAttackAnim(t.displayCharacter,c)}async doCustomAttack(t,c,v){await this.displayCharacter.playCustomAttackAnim(t.displayCharacter,c,v)}async wait(t){console.log(`Waiting for ${t}ms for ${this.id}`),await this.displayCharacter.wait(t)}addStatusEffect(t){this.statusEffects.push(t)}addAbility(t){if(this.abilities.some(c=>c.name===t.name)){console.warn(`Ability ${t.name} is already added to ${this.id}.`);return}this.abilities.push(t),this.updatePlayerAbilitiesUIStore()}addAbilityById(t){const c=Ju([t])[0];if(!c){console.warn(`Ability ${t} not found.`);return}this.addAbility(c)}removeAbilitiesWithMatchingName(t){const c=this.abilities.filter(v=>v.name!==t.name);if(c.length===this.abilities.length){console.warn(`Ability ${t.name} was not found and could not be removed.`);return}this.abilities=c,this.updatePlayerAbilitiesUIStore()}getNextTurnTime(t){return t+Math.floor(1e3/Math.pow(this.getModifiedStatValue("Speed"),.45))}isCriticalHit(){const t=this.getModifiedStatValue("Crit");return Mg().next()<t}isDead(){return this.currentHp<=0}getWeaponDamage(){const t=this.equippedItems.find(v=>v.definition.equipSlots.includes("Weapon"));let c=this.attackDamageProfile;return t&&t.definition.damage&&(c=Lt.itemDamageToDamageProfile(t.definition.damage)),this.getModifiedDamage(c)}getModifiedDamage(t){return Object.entries(t).reduce((c,[v,x])=>{const b=Math.round(x*(1+this.getModifiedStatValue("Attack")/100));return c[v]=Math.max(0,b),c},{})}calculateIncomingDamage(t){const c=Math.pow(t.physical,2)/(t.physical+this.getModifiedStatValue("Defense")),x={physical:Math.round(c),shadow:Math.round(this.calculateResistedDamage(t.shadow,this.getResistValue("shadow"))),fire:Math.round(this.calculateResistedDamage(t.fire,this.getResistValue("fire"))),lightning:Math.round(this.calculateResistedDamage(t.lightning,this.getResistValue("lightning"))),ice:Math.round(this.calculateResistedDamage(t.ice,this.getResistValue("ice")))},b={physical:0,shadow:this.getResistValue("shadow"),fire:this.getResistValue("fire"),lightning:this.getResistValue("lightning"),ice:this.getResistValue("ice")},h={physical:0,shadow:t.shadow>0&&x.shadow===0?1:0,fire:t.fire>0&&x.fire===0?1:0,lightning:t.lightning>0&&x.lightning===0?1:0,ice:t.ice>0&&x.ice===0?1:0};return{totalDamage:Object.values(x).reduce((i,u)=>i+u,0),damageByType:x,immunityByType:h,resistDamageByType:b}}calculateResistedDamage(t,c){const v=1-c;if(!this.isPlayer)return Math.max(0,Math.round(t*v));const x=Math.max(.2,Math.min(2,v));return Math.max(0,Math.round(t*x))}getResistValue(t){switch(t){case"physical":return 0;case"shadow":return this.getModifiedStatValue("ShadowResist");case"fire":return this.getModifiedStatValue("FireResist");case"lightning":return this.getModifiedStatValue("LightningResist");case"ice":return this.getModifiedStatValue("IceResist");default:throw new Error(`Unknown damage type: ${t}`)}}getAttackDodged(){return Mg().next()<this.getModifiedStatValue("Dodge")}getModifiedStatValue(t){return hr(this.model.getStatValue(t),t,this.equippedItems,this.skillEffects)}setBaseStatValue(t,c){this.model.setStatValue(t,c)}updateMaxHp(t){const c=this.currentHp/this.lastMaxHp;this.lastMaxHp=t,this.setCurrentHp(Math.ceil(t*c))}setCurrentHp(t){this.currentHp=t,this.syncHpIfPlayer(),this.displayCharacter.updateHealth(this.currentHp/this.getModifiedStatValue("MaxHp"))}syncHpIfPlayer(){this.isPlayer&&Te().setPlayerCurrentHp(this.currentHp)}addSkillEffect(t){this.skillEffects.push(t),Te().addPlayerMissionBuffs(t)}createSkillEffect(t,c){return{id:`se-${this.skillEffectCounter++}`,type:"multiplier",stat:t,amount:c}}removeSkillEffectById(t){this.skillEffects=this.skillEffects.filter(c=>c.id!==t),Te().removePlayerMissionBuffsByID(t)}clearSkillEffects(){this.skillEffects=[]}walk(){this.displayCharacter.walk()}run(){this.displayCharacter.run()}idle(){this.displayCharacter.idle()}registerNewPosition(){this.displayCharacter.registerNewPosition()}battleIdle(){this.displayCharacter.battleIdle()}async chargeShield(t){this.shieldHP+=t*this.getModifiedStatValue("MaxHp"),await this.displayCharacter.showMagicShield()}async resetShield(){this.shieldHP=0,await this.displayCharacter.hideMagicShield()}async celebrate(){await this.displayCharacter.celebrate()}async dodge(t){await this.displayCharacter.dodge(t)}async showRageActivated(){await this.displayCharacter.showRageActivated()}setTauntMessage(t){this.tauntMessage=t}async doTaunt(){this.tauntMessage!=""&&await this.displayCharacter.taunt(this.tauntMessage)}}class Ww extends Phaser.GameObjects.Text{constructor({scene:t,x:c,y:v,statValue:x=1,isCritical:b=!1,color:h="#ffffff",isGain:w=!1,damageResult:e}){const i=e?ZD(e):(w?"+":"")+x.toString();super(t,c,v,`${i}`,{fontFamily:"Poppins-ExtraBold",color:h,stroke:"#000000",strokeThickness:5,fontSize:b?64:32,shadow:{offsetX:2,offsetY:2,color:"#000000",blur:0,stroke:!1,fill:!0}}),this.startY=0,this.offsetY=100,this.moveDuration=2e3,this.fadeDuration=200,this.fadeDelay=600,this.nomalScaleTarget=1.4,this.critScaleTarget=1.6,this.setOrigin(.5,.5),this.startY=v,this.scale=1;const u=b?this.critScaleTarget:this.nomalScaleTarget;this.setOrigin(.5,.5),this.alpha=0,t.add.existing(this),this.scene.tweens.add({targets:this,y:this.startY-this.offsetY,onStart:()=>{this.alpha=1},onComplete:()=>{this.destroy()},duration:this.moveDuration}),this.scene.tweens.add({targets:this,scale:u,ease:Phaser.Math.Easing.Quadratic,yoyo:!0,repeat:0,duration:this.moveDuration/10}),this.scene.tweens.add({targets:this,alpha:0,ease:Phaser.Math.Easing.Sine.Out,delay:this.fadeDelay,duration:this.moveDuration-this.fadeDuration})}getText(){return this}}function ZD(R){const t=[],c=R.damageByType.shadow>0||R.damageByType.fire>0||R.damageByType.ice>0||R.damageByType.lightning>0||R.immunityByType.shadow>0||R.immunityByType.fire>0||R.immunityByType.ice>0||R.immunityByType.lightning>0;if(R.damageByType.physical>0){const v=c?`${R.damageByType.physical}💪`:R.damageByType.physical.toString();t.push(v)}return R.immunityByType.shadow>0?t.push("0🌑"):R.damageByType.shadow>0&&t.push(`${R.damageByType.shadow}🌑`),R.immunityByType.fire>0?t.push("0🔥"):R.damageByType.fire>0&&t.push(`${R.damageByType.fire}🔥`),R.immunityByType.ice>0?t.push("0❄️"):R.damageByType.ice>0&&t.push(`${R.damageByType.ice}❄️`),R.immunityByType.lightning>0?t.push("0⚡"):R.damageByType.lightning>0&&t.push(`${R.damageByType.lightning}⚡`),t.join(" ")}const qD=20;class Bg extends Phaser.GameObjects.Container{constructor({scene:t,ownerGO:c,barCount:v,statName:x="",statValue:b=1,color:h=16724787,isDisplayStatNum:w=!0}){super(t),this.statName="",this.masterScale=.5,this.barWidth=150,this.barHeight=32,this.barScaleX=70,this.barScaleY=.7,this.fillBorderAdjustment=5,this.barColor=16724787,this.statName=x,this.scale=this.masterScale,this.barCount=v,this.isDisplayStatNum=w,this.character=c,this.sliderBg=t.add.nineslice(0,0,"sliderBasic03BgSingle",0,this.barWidth,this.barHeight,12,12,8,8),this.sliderBg.setOrigin(.5,.5),this.add(this.sliderBg),this.fillOffsetX=this.fillBorderAdjustment-this.barWidth/2,this.sliderFillBgAnim=t.add.image(this.fillOffsetX,0,"sliderBasic03Fill"),this.sliderFillBgAnim.setOrigin(0,.5),this.sliderFillBgAnim.setTint(16777215),this.sliderFillBgAnim.scaleX=this.barScaleX,this.sliderFillBgAnim.scaleY=this.barScaleY,this.add(this.sliderFillBgAnim),this.barColor=h,this.sliderFillBg=t.add.image(this.fillOffsetX,0,"sliderBasic03Fill"),this.sliderFillBg.setOrigin(0,.5),this.sliderFillBg.setTint(this.barColor),this.sliderFillBg.scaleX=this.barScaleX,this.sliderFillBg.scaleY=this.barScaleY,this.add(this.sliderFillBg),this.sliderBorder=t.add.nineslice(0,0,"sliderBasic03Border",0,this.barWidth,this.barHeight,12,12,8,8),this.sliderBorder.setOrigin(.5,.5),this.add(this.sliderBorder),this.sliderCover=t.add.nineslice(0,0,"sliderBasic03FillMask",0,this.barWidth,this.barHeight,12,12,8,8),this.add(this.sliderCover),this.sliderCover.setOrigin(.5,.5),this.sliderCover.setTint(16768256),this.sliderCover.alpha=0,this.updateStat({value:b,isAnimate:!1}),this.x=this.character.x,this.y=this.character.y+qD+this.barCount*this.barHeight*.55,t.add.existing(this)}show(){this.visible=!0}hide(){this.scene.tweens.add({targets:this,alpha:0,ease:Phaser.Math.Easing.Sine.Out,onComplete:()=>{this.visible=!1},duration:200})}async updateStat({value:t,statNumberValue:c,isCritical:v=!1,isAnimate:x=!0,isShielded:b=!1,isHeal:h=!1,duration:w=200,damageResult:e=void 0}){t=this.clamp(t);const i=h,u=x&&i;if(this.barSize=t*this.barScaleX,this.statValue=t,x==!1?this.setBarSize(this.barSize):x&&u?(this.alpha=1,this.clearBarTween(),this.activeBarTween=this.scene.tweens.add({targets:this.sliderFillBgAnim,scaleX:this.barSize,ease:Phaser.Math.Easing.Sine.Out,onComplete:()=>{this.clearBarTween(),this.setBarSize(this.barSize)},duration:w}),this.scene.tweens.add({targets:this.sliderCover,alpha:0,ease:Phaser.Math.Easing.Sine.Out,onStart:()=>{this.sliderCover.alpha=.5},duration:w/4})):x&&u==!1&&(this.alpha=1,this.clearBarTween(),this.activeBarTween=this.scene.tweens.add({targets:this.sliderFillBg,scaleX:this.barSize,ease:Phaser.Math.Easing.Sine.Out,onComplete:()=>{this.clearBarTween(),this.setBarSize(this.barSize)},duration:w})),this.isDisplayStatNum&&(c!=null||e)){const n=this.character.getHeight();let r="#ffffff";b?r="#00ffff":i&&(r="#33ff33"),new Ww({scene:this.scene,x:this.character.x,y:this.character.y-n,statValue:c,isCritical:v,color:r,damageResult:e,isGain:i})}}async ultimateFlash(t){return this.clearBarTween(),this.setBarColorOverlay(t),this.setBarValue(1),await new Promise(c=>{this.activeBarTween=this.scene.tweens.add({targets:this.sliderCover,alpha:.5,ease:Phaser.Math.Easing.Sine.InOut,onComplete:()=>{this.clearBarTween(),c()},duration:25,loop:4,yoyo:!0})}),this}setBarColorOverlay(t){this.sliderCover.setTint(t)}update(){this.x=this.character.x}clamp(t){let c=Number(t);return c=Math.min(1,Math.max(0,c)),c}clearBarTween(){this.activeBarTween&&(this.activeBarTween.stop(),this.activeBarTween.remove(),this.activeBarTween=void 0,this.sliderCover.alpha=0)}setBarValue(t){this.setBarSize(t*this.barScaleX)}setBarSize(t){this.sliderFillBg.scaleX=t,this.sliderFillBgAnim.scaleX=t}}var Ve=(R=>(R.Idle="idle",R.Walk="walk",R.Run="run",R.JumpUp="jump/idle-up",R.JumpLand="jump/land",R.Attack="attack",R.RageAttack="attack",R.Hurt="hurt",R.Die="die",R.Celebrate="victory",R.Dash="dash",R.BattleIdle="idle_battle",R.Eat="eat",R.EatIdle="eat_Idle",R))(Ve||{});class v1 extends Phaser.GameObjects.Container{constructor(t,c,v,x,b,h,w){super(t,c,v),this.setDepth(h),this.draw(0,0,x,b,this.breakLongWords(w,Math.floor(x/25))),t.add.existing(this)}breakLongWords(t,c=10){return t.split(`
`).map(v=>v.split(" ").map(x=>x.length<=c?x:(x.match(new RegExp(`.{1,${c}}`,"g"))||[]).join(" ")).join(" ")).join(`
`)}draw(t,c,v,x,b){const h=v,w=10,e=this.scene.add.text(0,0,b,{fontFamily:"Sen-Bold",fontSize:24,color:"#000000",align:"center",wordWrap:{width:h-w*2}}),i=e.height+w*4,u=16,n=8,r=this.scene.add.graphics({x:-h/2,y:-i-u});this.add(r),r.fillStyle(16777215,1),r.lineStyle(n,0,1),r.strokeRoundedRect(0,0,h,i,16),r.fillRoundedRect(0,0,h,i,16);const a=Math.floor(h/2-u),s=i,o=Math.floor(h/2+u),d=i,l=Math.floor(h/2),f=Math.floor(i+u);r.fillTriangle(a,s,o,d,l,f),r.lineStyle(n/2,0,1),r.lineBetween(o,d,l,f),r.lineBetween(a,s,l,f);const m=e.getBounds();this.add(e),e.setPosition(r.x+h/2-m.width/2,r.y+i/2-m.height/2),this.setSize(h,i+u)}}if(typeof window<"u"&&window.Phaser){let R=window.require;window.require=t=>{if(R)return R(t);if(t==="Phaser")return window.Phaser}}const _D="esotericsoftware.spine.skeletonFile.cache",eF="esotericsoftware.spine.atlas.cache",tF="spineSkeletonData",iF="spineAtlasData",Dg="spine";let jw=class{constructor(){G(this,"entries",{});G(this,"size",0)}add(t){let c=this.entries[t];return this.entries[t]=!0,c?!1:(this.size++,!0)}addAll(t){let c=this.size;for(var v=0,x=t.length;v<x;v++)this.add(t[v]);return c!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}};var ys;let Rt=(ys=class{constructor(t=0,c=0,v=0,x=0){G(this,"r");G(this,"g");G(this,"b");G(this,"a");this.r=t,this.g=c,this.b=v,this.a=x}set(t,c,v,x){return this.r=t,this.g=c,this.b=v,this.a=x,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t=t.charAt(0)=="#"?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=t.length!=8?1:parseInt(t.substr(6,2),16)/255,this}add(t,c,v,x){return this.r+=t,this.g+=c,this.b+=v,this.a+=x,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,c){t.r=((c&4278190080)>>>24)/255,t.g=((c&16711680)>>>16)/255,t.b=((c&65280)>>>8)/255,t.a=(c&255)/255}static rgb888ToColor(t,c){t.r=((c&16711680)>>>16)/255,t.g=((c&65280)>>>8)/255,t.b=(c&255)/255}toRgb888(){const t=c=>("0"+(c*255).toString(16)).slice(-2);return+("0x"+t(this.r)+t(this.g)+t(this.b))}static fromString(t){return new ys().setFromString(t)}},G(ys,"WHITE",new ys(1,1,1,1)),G(ys,"RED",new ys(1,0,0,1)),G(ys,"GREEN",new ys(0,1,0,1)),G(ys,"BLUE",new ys(0,0,1,1)),G(ys,"MAGENTA",new ys(1,0,1,1)),ys);var Gi;let Ue=(Gi=class{static clamp(t,c,v){return t<c?c:t>v?v:t}static cosDeg(t){return Math.cos(t*Gi.degRad)}static sinDeg(t){return Math.sin(t*Gi.degRad)}static atan2Deg(t,c){return Math.atan2(t,c)*Gi.degRad}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let c=Math.pow(Math.abs(t),.3333333333333333);return t<0?-c:c}static randomTriangular(t,c){return Gi.randomTriangularWith(t,c,(t+c)*.5)}static randomTriangularWith(t,c,v){let x=Math.random(),b=c-t;return x<=(v-t)/b?t+Math.sqrt(x*b*(v-t)):c-Math.sqrt((1-x)*b*(c-v))}static isPowerOfTwo(t){return t&&(t&t-1)===0}},G(Gi,"PI",3.1415927),G(Gi,"PI2",Gi.PI*2),G(Gi,"invPI2",1/Gi.PI2),G(Gi,"radiansToDegrees",180/Gi.PI),G(Gi,"radDeg",Gi.radiansToDegrees),G(Gi,"degreesToRadians",Gi.PI/180),G(Gi,"degRad",Gi.degreesToRadians),Gi);var Aa;let ke=(Aa=class{static arrayCopy(t,c,v,x,b){for(let h=c,w=x;h<c+b;h++,w++)v[w]=t[h]}static arrayFill(t,c,v,x){for(let b=c;b<v;b++)t[b]=x}static setArraySize(t,c,v=0){let x=t.length;if(x==c)return t;if(t.length=c,x<c)for(let b=x;b<c;b++)t[b]=v;return t}static ensureArrayCapacity(t,c,v=0){return t.length>=c?t:Aa.setArraySize(t,c,v)}static newArray(t,c){let v=new Array(t);for(let x=0;x<t;x++)v[x]=c;return v}static newFloatArray(t){if(Aa.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let c=new Array(t);for(let v=0;v<c.length;v++)c[v]=0;return c}}static newShortArray(t){if(Aa.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let c=new Array(t);for(let v=0;v<c.length;v++)c[v]=0;return c}}static toFloatArray(t){return Aa.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return Aa.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,c){}static contains(t,c,v=!0){for(var x=0;x<t.length;x++)if(t[x]==c)return!0;return!1}static enumValue(t,c){return t[c[0].toUpperCase()+c.slice(1)]}},G(Aa,"SUPPORTS_TYPED_ARRAYS",typeof Float32Array<"u"),Aa),qu=class{constructor(t){G(this,"items",new Array);G(this,"instantiator");this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let c=0;c<t.length;c++)this.free(t[c])}clear(){this.items.length=0}},yl=class{constructor(t=0,c=0){G(this,"x");G(this,"y");this.x=t,this.y=c}set(t,c){return this.x=t,this.y=c,this}length(){let t=this.x,c=this.y;return Math.sqrt(t*t+c*c)}normalize(){let t=this.length();return t!=0&&(this.x/=t,this.y/=t),this}},Kw=class{constructor(t){G(this,"name");if(!t)throw new Error("name cannot be null.");this.name=t}};var Wr;let Ln=(Wr=class extends Kw{constructor(c){super(c);G(this,"id",Wr.nextID++);G(this,"bones",null);G(this,"vertices",[]);G(this,"worldVerticesLength",0);G(this,"timelineAttachment",this)}computeWorldVertices(c,v,x,b,h,w){x=h+(x>>1)*w;let e=c.bone.skeleton,i=c.deform,u=this.vertices,n=this.bones;if(!n){i.length>0&&(u=i);let o=c.bone,d=o.worldX,l=o.worldY,f=o.a,m=o.b,g=o.c,p=o.d;for(let y=v,S=h;S<x;y+=2,S+=w){let C=u[y],A=u[y+1];b[S]=C*f+A*m+d,b[S+1]=C*g+A*p+l}return}let r=0,a=0;for(let o=0;o<v;o+=2){let d=n[r];r+=d+1,a+=d}let s=e.bones;if(i.length==0)for(let o=h,d=a*3;o<x;o+=w){let l=0,f=0,m=n[r++];for(m+=r;r<m;r++,d+=3){let g=s[n[r]],p=u[d],y=u[d+1],S=u[d+2];l+=(p*g.a+y*g.b+g.worldX)*S,f+=(p*g.c+y*g.d+g.worldY)*S}b[o]=l,b[o+1]=f}else{let o=i;for(let d=h,l=a*3,f=a<<1;d<x;d+=w){let m=0,g=0,p=n[r++];for(p+=r;r<p;r++,l+=3,f+=2){let y=s[n[r]],S=u[l]+o[f],C=u[l+1]+o[f+1],A=u[l+2];m+=(S*y.a+C*y.b+y.worldX)*A,g+=(S*y.c+C*y.d+y.worldY)*A}b[d]=m,b[d+1]=g}}}copyTo(c){this.bones?(c.bones=new Array(this.bones.length),ke.arrayCopy(this.bones,0,c.bones,0,this.bones.length)):c.bones=null,this.vertices&&(c.vertices=ke.newFloatArray(this.vertices.length),ke.arrayCopy(this.vertices,0,c.vertices,0,this.vertices.length)),c.worldVerticesLength=this.worldVerticesLength,c.timelineAttachment=this.timelineAttachment}},G(Wr,"nextID",0),Wr);var An;let $w=(An=class{constructor(t){G(this,"id",An.nextID());G(this,"regions");G(this,"start",0);G(this,"digits",0);G(this,"setupIndex",0);this.regions=new Array(t)}copy(){let t=new An(this.regions.length);return ke.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,c){let v=t.sequenceIndex;v==-1&&(v=this.setupIndex),v>=this.regions.length&&(v=this.regions.length-1);let x=this.regions[v];c.region!=x&&(c.region=x,c.updateRegion())}getPath(t,c){let v=t,x=(this.start+c).toString();for(let b=this.digits-x.length;b>0;b--)v+="0";return v+=x,v}static nextID(){return An._nextID++}},G(An,"_nextID",0),An);var hs;(function(R){R[R.hold=0]="hold",R[R.once=1]="once",R[R.loop=2]="loop",R[R.pingpong=3]="pingpong",R[R.onceReverse=4]="onceReverse",R[R.loopReverse=5]="loopReverse",R[R.pingpongReverse=6]="pingpongReverse"})(hs||(hs={}));const Qw=[hs.hold,hs.once,hs.loop,hs.pingpong,hs.onceReverse,hs.loopReverse,hs.pingpongReverse];let vp=class{constructor(t,c,v){G(this,"name");G(this,"timelines",[]);G(this,"timelineIds",new jw);G(this,"duration");if(!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(c),this.duration=v}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var c=0;c<t.length;c++)this.timelineIds.addAll(t[c].getPropertyIds())}hasTimeline(t){for(let c=0;c<t.length;c++)if(this.timelineIds.contains(t[c]))return!0;return!1}apply(t,c,v,x,b,h,w,e){if(!t)throw new Error("skeleton cannot be null.");x&&this.duration!=0&&(v%=this.duration,c>0&&(c%=this.duration));let i=this.timelines;for(let u=0,n=i.length;u<n;u++)i[u].apply(t,c,v,b,h,w,e)}};var De;(function(R){R[R.setup=0]="setup",R[R.first=1]="first",R[R.replace=2]="replace",R[R.add=3]="add"})(De||(De={}));var Ms;(function(R){R[R.mixIn=0]="mixIn",R[R.mixOut=1]="mixOut"})(Ms||(Ms={}));const zt={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28};let Ri=class{constructor(t,c){G(this,"propertyIds");G(this,"frames");this.propertyIds=c,this.frames=ke.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,c){let v=t.length;for(let x=1;x<v;x++)if(t[x]>c)return x-1;return v-1}static search(t,c,v){let x=t.length;for(let b=v;b<x;b+=v)if(t[b]>c)return b-v;return x-v}},za=class extends Ri{constructor(c,v,x){super(c,x);G(this,"curves");this.curves=ke.newFloatArray(c+v*18),this.curves[c-1]=1}setLinear(c){this.curves[c]=0}setStepped(c){this.curves[c]=1}shrink(c){let v=this.getFrameCount()+c*18;if(this.curves.length>v){let x=ke.newFloatArray(v);ke.arrayCopy(this.curves,0,x,0,v),this.curves=x}}setBezier(c,v,x,b,h,w,e,i,u,n,r){let a=this.curves,s=this.getFrameCount()+c*18;x==0&&(a[v]=2+s);let o=(b-w*2+i)*.03,d=(h-e*2+u)*.03,l=((w-i)*3-b+n)*.006,f=((e-u)*3-h+r)*.006,m=o*2+l,g=d*2+f,p=(w-b)*.3+o+l*.16666667,y=(e-h)*.3+d+f*.16666667,S=b+p,C=h+y;for(let A=s+18;s<A;s+=2)a[s]=S,a[s+1]=C,p+=m,y+=g,m+=l,g+=f,S+=p,C+=y}getBezierValue(c,v,x,b){let h=this.curves;if(h[b]>c){let u=this.frames[v],n=this.frames[v+x];return n+(c-u)/(h[b]-u)*(h[b+1]-n)}let w=b+18;for(b+=2;b<w;b+=2)if(h[b]>=c){let u=h[b-2],n=h[b-1];return n+(c-u)/(h[b]-u)*(h[b+1]-n)}v+=this.getFrameEntries();let e=h[w-2],i=h[w-1];return i+(c-e)/(this.frames[v]-e)*(this.frames[v+x]-i)}},La=class extends za{constructor(t,c,v){super(t,c,[v])}getFrameEntries(){return 2}setFrame(t,c,v){t<<=1,this.frames[t]=c,this.frames[t+1]=v}getCurveValue(t){let c=this.frames,v=c.length-2;for(let b=2;b<=v;b+=2)if(c[b]>t){v=b-2;break}let x=this.curves[v>>1];switch(x){case 0:let b=c[v],h=c[v+1];return h+(t-b)/(c[v+2]-b)*(c[v+2+1]-h);case 1:return c[v+1]}return this.getBezierValue(t,v,1,x-2)}getRelativeValue(t,c,v,x,b){if(t<this.frames[0]){switch(v){case De.setup:return b;case De.first:return x+(b-x)*c}return x}let h=this.getCurveValue(t);switch(v){case De.setup:return b+h*c;case De.first:case De.replace:h+=b-x}return x+h*c}getAbsoluteValue(t,c,v,x,b){if(t<this.frames[0]){switch(v){case De.setup:return b;case De.first:return x+(b-x)*c}return x}let h=this.getCurveValue(t);return v==De.setup?b+(h-b)*c:x+(h-x)*c}getAbsoluteValue2(t,c,v,x,b,h){if(t<this.frames[0]){switch(v){case De.setup:return b;case De.first:return x+(b-x)*c}return x}return v==De.setup?b+(h-b)*c:x+(h-x)*c}getScaleValue(t,c,v,x,b,h){const w=this.frames;if(t<w[0]){switch(v){case De.setup:return h;case De.first:return b+(h-b)*c}return b}let e=this.getCurveValue(t)*h;if(c==1)return v==De.add?b+e-h:e;if(x==Ms.mixOut)switch(v){case De.setup:return h+(Math.abs(e)*Ue.signum(h)-h)*c;case De.first:case De.replace:return b+(Math.abs(e)*Ue.signum(b)-b)*c}else{let i=0;switch(v){case De.setup:return i=Math.abs(h)*Ue.signum(e),i+(e-i)*c;case De.first:case De.replace:return i=Math.abs(b)*Ue.signum(e),i+(e-i)*c}}return b+(e-h)*c}},yp=class extends za{constructor(t,c,v,x){super(t,c,[v,x])}getFrameEntries(){return 3}setFrame(t,c,v,x){t*=3,this.frames[t]=c,this.frames[t+1]=v,this.frames[t+2]=x}},_u=class extends La{constructor(c,v,x){super(c,v,zt.rotate+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.rotation=this.getRelativeValue(x,h,w,i.rotation,i.data.rotation))}},Jw=class extends yp{constructor(c,v,x){super(c,v,zt.x+"|"+x,zt.y+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];if(!i.active)return;let u=this.frames;if(x<u[0]){switch(w){case De.setup:i.x=i.data.x,i.y=i.data.y;return;case De.first:i.x+=(i.data.x-i.x)*h,i.y+=(i.data.y-i.y)*h}return}let n=0,r=0,a=Ri.search(u,x,3),s=this.curves[a/3];switch(s){case 0:let o=u[a];n=u[a+1],r=u[a+2];let d=(x-o)/(u[a+3]-o);n+=(u[a+3+1]-n)*d,r+=(u[a+3+2]-r)*d;break;case 1:n=u[a+1],r=u[a+2];break;default:n=this.getBezierValue(x,a,1,s-2),r=this.getBezierValue(x,a,2,s+18-2)}switch(w){case De.setup:i.x=i.data.x+n*h,i.y=i.data.y+r*h;break;case De.first:case De.replace:i.x+=(i.data.x+n-i.x)*h,i.y+=(i.data.y+r-i.y)*h;break;case De.add:i.x+=n*h,i.y+=r*h}}},Zw=class extends La{constructor(c,v,x){super(c,v,zt.x+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.x=this.getRelativeValue(x,h,w,i.x,i.data.x))}},qw=class extends La{constructor(c,v,x){super(c,v,zt.y+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.y=this.getRelativeValue(x,h,w,i.y,i.data.y))}},_w=class extends yp{constructor(c,v,x){super(c,v,zt.scaleX+"|"+x,zt.scaleY+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];if(!i.active)return;let u=this.frames;if(x<u[0]){switch(w){case De.setup:i.scaleX=i.data.scaleX,i.scaleY=i.data.scaleY;return;case De.first:i.scaleX+=(i.data.scaleX-i.scaleX)*h,i.scaleY+=(i.data.scaleY-i.scaleY)*h}return}let n,r,a=Ri.search(u,x,3),s=this.curves[a/3];switch(s){case 0:let o=u[a];n=u[a+1],r=u[a+2];let d=(x-o)/(u[a+3]-o);n+=(u[a+3+1]-n)*d,r+=(u[a+3+2]-r)*d;break;case 1:n=u[a+1],r=u[a+2];break;default:n=this.getBezierValue(x,a,1,s-2),r=this.getBezierValue(x,a,2,s+18-2)}if(n*=i.data.scaleX,r*=i.data.scaleY,h==1)w==De.add?(i.scaleX+=n-i.data.scaleX,i.scaleY+=r-i.data.scaleY):(i.scaleX=n,i.scaleY=r);else{let o=0,d=0;if(e==Ms.mixOut)switch(w){case De.setup:o=i.data.scaleX,d=i.data.scaleY,i.scaleX=o+(Math.abs(n)*Ue.signum(o)-o)*h,i.scaleY=d+(Math.abs(r)*Ue.signum(d)-d)*h;break;case De.first:case De.replace:o=i.scaleX,d=i.scaleY,i.scaleX=o+(Math.abs(n)*Ue.signum(o)-o)*h,i.scaleY=d+(Math.abs(r)*Ue.signum(d)-d)*h;break;case De.add:i.scaleX+=(n-i.data.scaleX)*h,i.scaleY+=(r-i.data.scaleY)*h}else switch(w){case De.setup:o=Math.abs(i.data.scaleX)*Ue.signum(n),d=Math.abs(i.data.scaleY)*Ue.signum(r),i.scaleX=o+(n-o)*h,i.scaleY=d+(r-d)*h;break;case De.first:case De.replace:o=Math.abs(i.scaleX)*Ue.signum(n),d=Math.abs(i.scaleY)*Ue.signum(r),i.scaleX=o+(n-o)*h,i.scaleY=d+(r-d)*h;break;case De.add:i.scaleX+=(n-i.data.scaleX)*h,i.scaleY+=(r-i.data.scaleY)*h}}}},eS=class extends La{constructor(c,v,x){super(c,v,zt.scaleX+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.scaleX=this.getScaleValue(x,h,w,e,i.scaleX,i.data.scaleX))}},tS=class extends La{constructor(c,v,x){super(c,v,zt.scaleY+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.scaleY=this.getScaleValue(x,h,w,e,i.scaleY,i.data.scaleY))}},iS=class extends yp{constructor(c,v,x){super(c,v,zt.shearX+"|"+x,zt.shearY+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];if(!i.active)return;let u=this.frames;if(x<u[0]){switch(w){case De.setup:i.shearX=i.data.shearX,i.shearY=i.data.shearY;return;case De.first:i.shearX+=(i.data.shearX-i.shearX)*h,i.shearY+=(i.data.shearY-i.shearY)*h}return}let n=0,r=0,a=Ri.search(u,x,3),s=this.curves[a/3];switch(s){case 0:let o=u[a];n=u[a+1],r=u[a+2];let d=(x-o)/(u[a+3]-o);n+=(u[a+3+1]-n)*d,r+=(u[a+3+2]-r)*d;break;case 1:n=u[a+1],r=u[a+2];break;default:n=this.getBezierValue(x,a,1,s-2),r=this.getBezierValue(x,a,2,s+18-2)}switch(w){case De.setup:i.shearX=i.data.shearX+n*h,i.shearY=i.data.shearY+r*h;break;case De.first:case De.replace:i.shearX+=(i.data.shearX+n-i.shearX)*h,i.shearY+=(i.data.shearY+r-i.shearY)*h;break;case De.add:i.shearX+=n*h,i.shearY+=r*h}}},sS=class extends La{constructor(c,v,x){super(c,v,zt.shearX+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.shearX=this.getRelativeValue(x,h,w,i.shearX,i.data.shearX))}},aS=class extends La{constructor(c,v,x){super(c,v,zt.shearY+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.shearY=this.getRelativeValue(x,h,w,i.shearY,i.data.shearY))}},nS=class extends Ri{constructor(c,v){super(c,[zt.inherit+"|"+v]);G(this,"boneIndex",0);this.boneIndex=v}getFrameEntries(){return 2}setFrame(c,v,x){c*=2,this.frames[c]=v,this.frames[c+1]=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];if(!i.active)return;if(e==Ms.mixOut){w==De.setup&&(i.inherit=i.data.inherit);return}let u=this.frames;if(x<u[0]){(w==De.setup||w==De.first)&&(i.inherit=i.data.inherit);return}i.inherit=this.frames[Ri.search(u,x,2)+1]}},rS=class extends za{constructor(c,v,x){super(c,v,[zt.rgb+"|"+x,zt.alpha+"|"+x]);G(this,"slotIndex",0);this.slotIndex=x}getFrameEntries(){return 5}setFrame(c,v,x,b,h,w){c*=5,this.frames[c]=v,this.frames[c+1]=x,this.frames[c+2]=b,this.frames[c+3]=h,this.frames[c+4]=w}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=this.frames,n=i.color;if(x<u[0]){let f=i.data.color;switch(w){case De.setup:n.setFromColor(f);return;case De.first:n.add((f.r-n.r)*h,(f.g-n.g)*h,(f.b-n.b)*h,(f.a-n.a)*h)}return}let r=0,a=0,s=0,o=0,d=Ri.search(u,x,5),l=this.curves[d/5];switch(l){case 0:let f=u[d];r=u[d+1],a=u[d+2],s=u[d+3],o=u[d+4];let m=(x-f)/(u[d+5]-f);r+=(u[d+5+1]-r)*m,a+=(u[d+5+2]-a)*m,s+=(u[d+5+3]-s)*m,o+=(u[d+5+4]-o)*m;break;case 1:r=u[d+1],a=u[d+2],s=u[d+3],o=u[d+4];break;default:r=this.getBezierValue(x,d,1,l-2),a=this.getBezierValue(x,d,2,l+18-2),s=this.getBezierValue(x,d,3,l+18*2-2),o=this.getBezierValue(x,d,4,l+18*3-2)}h==1?n.set(r,a,s,o):(w==De.setup&&n.setFromColor(i.data.color),n.add((r-n.r)*h,(a-n.g)*h,(s-n.b)*h,(o-n.a)*h))}},oS=class extends za{constructor(c,v,x){super(c,v,[zt.rgb+"|"+x]);G(this,"slotIndex",0);this.slotIndex=x}getFrameEntries(){return 4}setFrame(c,v,x,b,h){c<<=2,this.frames[c]=v,this.frames[c+1]=x,this.frames[c+2]=b,this.frames[c+3]=h}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=this.frames,n=i.color;if(x<u[0]){let l=i.data.color;switch(w){case De.setup:n.r=l.r,n.g=l.g,n.b=l.b;return;case De.first:n.r+=(l.r-n.r)*h,n.g+=(l.g-n.g)*h,n.b+=(l.b-n.b)*h}return}let r=0,a=0,s=0,o=Ri.search(u,x,4),d=this.curves[o>>2];switch(d){case 0:let l=u[o];r=u[o+1],a=u[o+2],s=u[o+3];let f=(x-l)/(u[o+4]-l);r+=(u[o+4+1]-r)*f,a+=(u[o+4+2]-a)*f,s+=(u[o+4+3]-s)*f;break;case 1:r=u[o+1],a=u[o+2],s=u[o+3];break;default:r=this.getBezierValue(x,o,1,d-2),a=this.getBezierValue(x,o,2,d+18-2),s=this.getBezierValue(x,o,3,d+18*2-2)}if(h==1)n.r=r,n.g=a,n.b=s;else{if(w==De.setup){let l=i.data.color;n.r=l.r,n.g=l.g,n.b=l.b}n.r+=(r-n.r)*h,n.g+=(a-n.g)*h,n.b+=(s-n.b)*h}}},lS=class extends La{constructor(c,v,x){super(c,v,zt.alpha+"|"+x);G(this,"slotIndex",0);this.slotIndex=x}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=i.color;if(x<this.frames[0]){let r=i.data.color;switch(w){case De.setup:u.a=r.a;return;case De.first:u.a+=(r.a-u.a)*h}return}let n=this.getCurveValue(x);h==1?u.a=n:(w==De.setup&&(u.a=i.data.color.a),u.a+=(n-u.a)*h)}},hS=class extends za{constructor(c,v,x){super(c,v,[zt.rgb+"|"+x,zt.alpha+"|"+x,zt.rgb2+"|"+x]);G(this,"slotIndex",0);this.slotIndex=x}getFrameEntries(){return 8}setFrame(c,v,x,b,h,w,e,i,u){c<<=3,this.frames[c]=v,this.frames[c+1]=x,this.frames[c+2]=b,this.frames[c+3]=h,this.frames[c+4]=w,this.frames[c+5]=e,this.frames[c+6]=i,this.frames[c+7]=u}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=this.frames,n=i.color,r=i.darkColor;if(x<u[0]){let y=i.data.color,S=i.data.darkColor;switch(w){case De.setup:n.setFromColor(y),r.r=S.r,r.g=S.g,r.b=S.b;return;case De.first:n.add((y.r-n.r)*h,(y.g-n.g)*h,(y.b-n.b)*h,(y.a-n.a)*h),r.r+=(S.r-r.r)*h,r.g+=(S.g-r.g)*h,r.b+=(S.b-r.b)*h}return}let a=0,s=0,o=0,d=0,l=0,f=0,m=0,g=Ri.search(u,x,8),p=this.curves[g>>3];switch(p){case 0:let y=u[g];a=u[g+1],s=u[g+2],o=u[g+3],d=u[g+4],l=u[g+5],f=u[g+6],m=u[g+7];let S=(x-y)/(u[g+8]-y);a+=(u[g+8+1]-a)*S,s+=(u[g+8+2]-s)*S,o+=(u[g+8+3]-o)*S,d+=(u[g+8+4]-d)*S,l+=(u[g+8+5]-l)*S,f+=(u[g+8+6]-f)*S,m+=(u[g+8+7]-m)*S;break;case 1:a=u[g+1],s=u[g+2],o=u[g+3],d=u[g+4],l=u[g+5],f=u[g+6],m=u[g+7];break;default:a=this.getBezierValue(x,g,1,p-2),s=this.getBezierValue(x,g,2,p+18-2),o=this.getBezierValue(x,g,3,p+18*2-2),d=this.getBezierValue(x,g,4,p+18*3-2),l=this.getBezierValue(x,g,5,p+18*4-2),f=this.getBezierValue(x,g,6,p+18*5-2),m=this.getBezierValue(x,g,7,p+18*6-2)}if(h==1)n.set(a,s,o,d),r.r=l,r.g=f,r.b=m;else{if(w==De.setup){n.setFromColor(i.data.color);let y=i.data.darkColor;r.r=y.r,r.g=y.g,r.b=y.b}n.add((a-n.r)*h,(s-n.g)*h,(o-n.b)*h,(d-n.a)*h),r.r+=(l-r.r)*h,r.g+=(f-r.g)*h,r.b+=(m-r.b)*h}}},dS=class extends za{constructor(c,v,x){super(c,v,[zt.rgb+"|"+x,zt.rgb2+"|"+x]);G(this,"slotIndex",0);this.slotIndex=x}getFrameEntries(){return 7}setFrame(c,v,x,b,h,w,e,i){c*=7,this.frames[c]=v,this.frames[c+1]=x,this.frames[c+2]=b,this.frames[c+3]=h,this.frames[c+4]=w,this.frames[c+5]=e,this.frames[c+6]=i}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=this.frames,n=i.color,r=i.darkColor;if(x<u[0]){let p=i.data.color,y=i.data.darkColor;switch(w){case De.setup:n.r=p.r,n.g=p.g,n.b=p.b,r.r=y.r,r.g=y.g,r.b=y.b;return;case De.first:n.r+=(p.r-n.r)*h,n.g+=(p.g-n.g)*h,n.b+=(p.b-n.b)*h,r.r+=(y.r-r.r)*h,r.g+=(y.g-r.g)*h,r.b+=(y.b-r.b)*h}return}let a=0,s=0,o=0,d=0,l=0,f=0,m=Ri.search(u,x,7),g=this.curves[m/7];switch(g){case 0:let p=u[m];a=u[m+1],s=u[m+2],o=u[m+3],d=u[m+4],l=u[m+5],f=u[m+6];let y=(x-p)/(u[m+7]-p);a+=(u[m+7+1]-a)*y,s+=(u[m+7+2]-s)*y,o+=(u[m+7+3]-o)*y,d+=(u[m+7+4]-d)*y,l+=(u[m+7+5]-l)*y,f+=(u[m+7+6]-f)*y;break;case 1:a=u[m+1],s=u[m+2],o=u[m+3],d=u[m+4],l=u[m+5],f=u[m+6];break;default:a=this.getBezierValue(x,m,1,g-2),s=this.getBezierValue(x,m,2,g+18-2),o=this.getBezierValue(x,m,3,g+18*2-2),d=this.getBezierValue(x,m,4,g+18*3-2),l=this.getBezierValue(x,m,5,g+18*4-2),f=this.getBezierValue(x,m,6,g+18*5-2)}if(h==1)n.r=a,n.g=s,n.b=o,r.r=d,r.g=l,r.b=f;else{if(w==De.setup){let p=i.data.color,y=i.data.darkColor;n.r=p.r,n.g=p.g,n.b=p.b,r.r=y.r,r.g=y.g,r.b=y.b}n.r+=(a-n.r)*h,n.g+=(s-n.g)*h,n.b+=(o-n.b)*h,r.r+=(d-r.r)*h,r.g+=(l-r.g)*h,r.b+=(f-r.b)*h}}},il=class extends Ri{constructor(c,v){super(c,[zt.attachment+"|"+v]);G(this,"slotIndex",0);G(this,"attachmentNames");this.slotIndex=v,this.attachmentNames=new Array(c)}getFrameCount(){return this.frames.length}setFrame(c,v,x){this.frames[c]=v,this.attachmentNames[c]=x}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(i.bone.active){if(e==Ms.mixOut){w==De.setup&&this.setAttachment(c,i,i.data.attachmentName);return}if(x<this.frames[0]){(w==De.setup||w==De.first)&&this.setAttachment(c,i,i.data.attachmentName);return}this.setAttachment(c,i,this.attachmentNames[Ri.search1(this.frames,x)])}}setAttachment(c,v,x){v.setAttachment(x?c.getAttachment(this.slotIndex,x):null)}},uS=class extends za{constructor(c,v,x,b){super(c,v,[zt.deform+"|"+x+"|"+b.id]);G(this,"slotIndex",0);G(this,"attachment");G(this,"vertices");this.slotIndex=x,this.attachment=b,this.vertices=new Array(c)}getFrameCount(){return this.frames.length}setFrame(c,v,x){this.frames[c]=v,this.vertices[c]=x}setBezier(c,v,x,b,h,w,e,i,u,n,r){let a=this.curves,s=this.getFrameCount()+c*18;x==0&&(a[v]=2+s);let o=(b-w*2+i)*.03,d=u*.03-e*.06,l=((w-i)*3-b+n)*.006,f=(e-u+.33333333)*.018,m=o*2+l,g=d*2+f,p=(w-b)*.3+o+l*.16666667,y=e*.3+d+f*.16666667,S=b+p,C=y;for(let A=s+18;s<A;s+=2)a[s]=S,a[s+1]=C,p+=m,y+=g,m+=l,g+=f,S+=p,C+=y}getCurvePercent(c,v){let x=this.curves,b=x[v];switch(b){case 0:let i=this.frames[v];return(c-i)/(this.frames[v+this.getFrameEntries()]-i);case 1:return 0}if(b-=2,x[b]>c){let i=this.frames[v];return x[b+1]*(c-i)/(x[b]-i)}let h=b+18;for(b+=2;b<h;b+=2)if(x[b]>=c){let i=x[b-2],u=x[b-1];return u+(c-i)/(x[b]-i)*(x[b+1]-u)}let w=x[h-2],e=x[h-1];return e+(1-e)*(c-w)/(this.frames[v+this.getFrameEntries()]-w)}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=i.getAttachment();if(!u||!(u instanceof Ln)||u.timelineAttachment!=this.attachment)return;let n=i.deform;n.length==0&&(w=De.setup);let r=this.vertices,a=r[0].length,s=this.frames;if(x<s[0]){switch(w){case De.setup:n.length=0;return;case De.first:if(h==1){n.length=0;return}n.length=a;let g=u;if(g.bones){h=1-h;for(var o=0;o<a;o++)n[o]*=h}else{let p=g.vertices;for(var o=0;o<a;o++)n[o]+=(p[o]-n[o])*h}}return}if(n.length=a,x>=s[s.length-1]){let g=r[s.length-1];if(h==1)if(w==De.add){let p=u;if(p.bones)for(let y=0;y<a;y++)n[y]+=g[y];else{let y=p.vertices;for(let S=0;S<a;S++)n[S]+=g[S]-y[S]}}else ke.arrayCopy(g,0,n,0,a);else switch(w){case De.setup:{let y=u;if(y.bones)for(let S=0;S<a;S++)n[S]=g[S]*h;else{let S=y.vertices;for(let C=0;C<a;C++){let A=S[C];n[C]=A+(g[C]-A)*h}}break}case De.first:case De.replace:for(let y=0;y<a;y++)n[y]+=(g[y]-n[y])*h;break;case De.add:let p=u;if(p.bones)for(let y=0;y<a;y++)n[y]+=g[y]*h;else{let y=p.vertices;for(let S=0;S<a;S++)n[S]+=(g[S]-y[S])*h}}return}let d=Ri.search1(s,x),l=this.getCurvePercent(x,d),f=r[d],m=r[d+1];if(h==1)if(w==De.add){let g=u;if(g.bones)for(let p=0;p<a;p++){let y=f[p];n[p]+=y+(m[p]-y)*l}else{let p=g.vertices;for(let y=0;y<a;y++){let S=f[y];n[y]+=S+(m[y]-S)*l-p[y]}}}else for(let g=0;g<a;g++){let p=f[g];n[g]=p+(m[g]-p)*l}else switch(w){case De.setup:{let p=u;if(p.bones)for(let y=0;y<a;y++){let S=f[y];n[y]=(S+(m[y]-S)*l)*h}else{let y=p.vertices;for(let S=0;S<a;S++){let C=f[S],A=y[S];n[S]=A+(C+(m[S]-C)*l-A)*h}}break}case De.first:case De.replace:for(let p=0;p<a;p++){let y=f[p];n[p]+=(y+(m[p]-y)*l-n[p])*h}break;case De.add:let g=u;if(g.bones)for(let p=0;p<a;p++){let y=f[p];n[p]+=(y+(m[p]-y)*l)*h}else{let p=g.vertices;for(let y=0;y<a;y++){let S=f[y];n[y]+=(S+(m[y]-S)*l-p[y])*h}}}}};var jr;let xp=(jr=class extends Ri{constructor(c){super(c,jr.propertyIds);G(this,"events");this.events=new Array(c)}getFrameCount(){return this.frames.length}setFrame(c,v){this.frames[c]=v.time,this.events[c]=v}apply(c,v,x,b,h,w,e){if(!b)return;let i=this.frames,u=this.frames.length;if(v>x)this.apply(c,v,Number.MAX_VALUE,b,h,w,e),v=-1;else if(v>=i[u-1])return;if(x<i[0])return;let n=0;if(v<i[0])n=0;else{n=Ri.search1(i,v)+1;let r=i[n];for(;n>0&&i[n-1]==r;)n--}for(;n<u&&x>=i[n];n++)b.push(this.events[n])}},G(jr,"propertyIds",[""+zt.event]),jr);var Kr;let zh=(Kr=class extends Ri{constructor(c){super(c,Kr.propertyIds);G(this,"drawOrders");this.drawOrders=new Array(c)}getFrameCount(){return this.frames.length}setFrame(c,v,x){this.frames[c]=v,this.drawOrders[c]=x}apply(c,v,x,b,h,w,e){if(e==Ms.mixOut){w==De.setup&&ke.arrayCopy(c.slots,0,c.drawOrder,0,c.slots.length);return}if(x<this.frames[0]){(w==De.setup||w==De.first)&&ke.arrayCopy(c.slots,0,c.drawOrder,0,c.slots.length);return}let i=Ri.search1(this.frames,x),u=this.drawOrders[i];if(!u)ke.arrayCopy(c.slots,0,c.drawOrder,0,c.slots.length);else{let n=c.drawOrder,r=c.slots;for(let a=0,s=u.length;a<s;a++)n[a]=r[u[a]]}}},G(Kr,"propertyIds",[""+zt.drawOrder]),Kr),cS=class extends za{constructor(c,v,x){super(c,v,[zt.ikConstraint+"|"+x]);G(this,"constraintIndex",0);this.constraintIndex=x}getFrameEntries(){return 6}setFrame(c,v,x,b,h,w,e){c*=6,this.frames[c]=v,this.frames[c+1]=x,this.frames[c+2]=b,this.frames[c+3]=h,this.frames[c+4]=w?1:0,this.frames[c+5]=e?1:0}apply(c,v,x,b,h,w,e){let i=c.ikConstraints[this.constraintIndex];if(!i.active)return;let u=this.frames;if(x<u[0]){switch(w){case De.setup:i.mix=i.data.mix,i.softness=i.data.softness,i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch;return;case De.first:i.mix+=(i.data.mix-i.mix)*h,i.softness+=(i.data.softness-i.softness)*h,i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch}return}let n=0,r=0,a=Ri.search(u,x,6),s=this.curves[a/6];switch(s){case 0:let o=u[a];n=u[a+1],r=u[a+2];let d=(x-o)/(u[a+6]-o);n+=(u[a+6+1]-n)*d,r+=(u[a+6+2]-r)*d;break;case 1:n=u[a+1],r=u[a+2];break;default:n=this.getBezierValue(x,a,1,s-2),r=this.getBezierValue(x,a,2,s+18-2)}w==De.setup?(i.mix=i.data.mix+(n-i.data.mix)*h,i.softness=i.data.softness+(r-i.data.softness)*h,e==Ms.mixOut?(i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch):(i.bendDirection=u[a+3],i.compress=u[a+4]!=0,i.stretch=u[a+5]!=0)):(i.mix+=(n-i.mix)*h,i.softness+=(r-i.softness)*h,e==Ms.mixIn&&(i.bendDirection=u[a+3],i.compress=u[a+4]!=0,i.stretch=u[a+5]!=0))}},fS=class extends za{constructor(c,v,x){super(c,v,[zt.transformConstraint+"|"+x]);G(this,"constraintIndex",0);this.constraintIndex=x}getFrameEntries(){return 7}setFrame(c,v,x,b,h,w,e,i){let u=this.frames;c*=7,u[c]=v,u[c+1]=x,u[c+2]=b,u[c+3]=h,u[c+4]=w,u[c+5]=e,u[c+6]=i}apply(c,v,x,b,h,w,e){let i=c.transformConstraints[this.constraintIndex];if(!i.active)return;let u=this.frames;if(x<u[0]){let m=i.data;switch(w){case De.setup:i.mixRotate=m.mixRotate,i.mixX=m.mixX,i.mixY=m.mixY,i.mixScaleX=m.mixScaleX,i.mixScaleY=m.mixScaleY,i.mixShearY=m.mixShearY;return;case De.first:i.mixRotate+=(m.mixRotate-i.mixRotate)*h,i.mixX+=(m.mixX-i.mixX)*h,i.mixY+=(m.mixY-i.mixY)*h,i.mixScaleX+=(m.mixScaleX-i.mixScaleX)*h,i.mixScaleY+=(m.mixScaleY-i.mixScaleY)*h,i.mixShearY+=(m.mixShearY-i.mixShearY)*h}return}let n,r,a,s,o,d,l=Ri.search(u,x,7),f=this.curves[l/7];switch(f){case 0:let m=u[l];n=u[l+1],r=u[l+2],a=u[l+3],s=u[l+4],o=u[l+5],d=u[l+6];let g=(x-m)/(u[l+7]-m);n+=(u[l+7+1]-n)*g,r+=(u[l+7+2]-r)*g,a+=(u[l+7+3]-a)*g,s+=(u[l+7+4]-s)*g,o+=(u[l+7+5]-o)*g,d+=(u[l+7+6]-d)*g;break;case 1:n=u[l+1],r=u[l+2],a=u[l+3],s=u[l+4],o=u[l+5],d=u[l+6];break;default:n=this.getBezierValue(x,l,1,f-2),r=this.getBezierValue(x,l,2,f+18-2),a=this.getBezierValue(x,l,3,f+18*2-2),s=this.getBezierValue(x,l,4,f+18*3-2),o=this.getBezierValue(x,l,5,f+18*4-2),d=this.getBezierValue(x,l,6,f+18*5-2)}if(w==De.setup){let m=i.data;i.mixRotate=m.mixRotate+(n-m.mixRotate)*h,i.mixX=m.mixX+(r-m.mixX)*h,i.mixY=m.mixY+(a-m.mixY)*h,i.mixScaleX=m.mixScaleX+(s-m.mixScaleX)*h,i.mixScaleY=m.mixScaleY+(o-m.mixScaleY)*h,i.mixShearY=m.mixShearY+(d-m.mixShearY)*h}else i.mixRotate+=(n-i.mixRotate)*h,i.mixX+=(r-i.mixX)*h,i.mixY+=(a-i.mixY)*h,i.mixScaleX+=(s-i.mixScaleX)*h,i.mixScaleY+=(o-i.mixScaleY)*h,i.mixShearY+=(d-i.mixShearY)*h}},mS=class extends La{constructor(c,v,x){super(c,v,zt.pathConstraintPosition+"|"+x);G(this,"constraintIndex",0);this.constraintIndex=x}apply(c,v,x,b,h,w,e){let i=c.pathConstraints[this.constraintIndex];i.active&&(i.position=this.getAbsoluteValue(x,h,w,i.position,i.data.position))}},gS=class extends La{constructor(c,v,x){super(c,v,zt.pathConstraintSpacing+"|"+x);G(this,"constraintIndex",0);this.constraintIndex=x}apply(c,v,x,b,h,w,e){let i=c.pathConstraints[this.constraintIndex];i.active&&(i.spacing=this.getAbsoluteValue(x,h,w,i.spacing,i.data.spacing))}},pS=class extends za{constructor(c,v,x){super(c,v,[zt.pathConstraintMix+"|"+x]);G(this,"constraintIndex",0);this.constraintIndex=x}getFrameEntries(){return 4}setFrame(c,v,x,b,h){let w=this.frames;c<<=2,w[c]=v,w[c+1]=x,w[c+2]=b,w[c+3]=h}apply(c,v,x,b,h,w,e){let i=c.pathConstraints[this.constraintIndex];if(!i.active)return;let u=this.frames;if(x<u[0]){switch(w){case De.setup:i.mixRotate=i.data.mixRotate,i.mixX=i.data.mixX,i.mixY=i.data.mixY;return;case De.first:i.mixRotate+=(i.data.mixRotate-i.mixRotate)*h,i.mixX+=(i.data.mixX-i.mixX)*h,i.mixY+=(i.data.mixY-i.mixY)*h}return}let n,r,a,s=Ri.search(u,x,4),o=this.curves[s>>2];switch(o){case 0:let d=u[s];n=u[s+1],r=u[s+2],a=u[s+3];let l=(x-d)/(u[s+4]-d);n+=(u[s+4+1]-n)*l,r+=(u[s+4+2]-r)*l,a+=(u[s+4+3]-a)*l;break;case 1:n=u[s+1],r=u[s+2],a=u[s+3];break;default:n=this.getBezierValue(x,s,1,o-2),r=this.getBezierValue(x,s,2,o+18-2),a=this.getBezierValue(x,s,3,o+18*2-2)}if(w==De.setup){let d=i.data;i.mixRotate=d.mixRotate+(n-d.mixRotate)*h,i.mixX=d.mixX+(r-d.mixX)*h,i.mixY=d.mixY+(a-d.mixY)*h}else i.mixRotate+=(n-i.mixRotate)*h,i.mixX+=(r-i.mixX)*h,i.mixY+=(a-i.mixY)*h}},ro=class extends La{constructor(c,v,x,b){super(c,v,b+"|"+x);G(this,"constraintIndex",0);this.constraintIndex=x}apply(c,v,x,b,h,w,e){let i;if(this.constraintIndex==-1){const u=x>=this.frames[0]?this.getCurveValue(x):0;for(const n of c.physicsConstraints)n.active&&this.global(n.data)&&this.set(n,this.getAbsoluteValue2(x,h,w,this.get(n),this.setup(n),u))}else i=c.physicsConstraints[this.constraintIndex],i.active&&this.set(i,this.getAbsoluteValue(x,h,w,this.get(i),this.setup(i)))}},vS=class extends ro{constructor(t,c,v){super(t,c,v,zt.physicsConstraintInertia)}setup(t){return t.data.inertia}get(t){return t.inertia}set(t,c){t.inertia=c}global(t){return t.inertiaGlobal}},yS=class extends ro{constructor(t,c,v){super(t,c,v,zt.physicsConstraintStrength)}setup(t){return t.data.strength}get(t){return t.strength}set(t,c){t.strength=c}global(t){return t.strengthGlobal}},xS=class extends ro{constructor(t,c,v){super(t,c,v,zt.physicsConstraintDamping)}setup(t){return t.data.damping}get(t){return t.damping}set(t,c){t.damping=c}global(t){return t.dampingGlobal}},wS=class extends ro{constructor(t,c,v){super(t,c,v,zt.physicsConstraintMass)}setup(t){return 1/t.data.massInverse}get(t){return 1/t.massInverse}set(t,c){t.massInverse=1/c}global(t){return t.massGlobal}},SS=class extends ro{constructor(t,c,v){super(t,c,v,zt.physicsConstraintWind)}setup(t){return t.data.wind}get(t){return t.wind}set(t,c){t.wind=c}global(t){return t.windGlobal}},TS=class extends ro{constructor(t,c,v){super(t,c,v,zt.physicsConstraintGravity)}setup(t){return t.data.gravity}get(t){return t.gravity}set(t,c){t.gravity=c}global(t){return t.gravityGlobal}},CS=class extends ro{constructor(t,c,v){super(t,c,v,zt.physicsConstraintMix)}setup(t){return t.data.mix}get(t){return t.mix}set(t,c){t.mix=c}global(t){return t.mixGlobal}};var $r;let AS=($r=class extends Ri{constructor(c,v){super(c,$r.propertyIds);G(this,"constraintIndex");this.constraintIndex=v}getFrameCount(){return this.frames.length}setFrame(c,v){this.frames[c]=v}apply(c,v,x,b,h,w,e){let i;if(this.constraintIndex!=-1&&(i=c.physicsConstraints[this.constraintIndex],!i.active))return;const u=this.frames;if(v>x)this.apply(c,v,Number.MAX_VALUE,[],h,w,e),v=-1;else if(v>=u[u.length-1])return;if(!(x<u[0])&&(v<u[0]||x>=u[Ri.search1(u,v)+1]))if(i!=null)i.reset();else for(const n of c.physicsConstraints)n.active&&n.reset()}},G($r,"propertyIds",[zt.physicsConstraintReset.toString()]),$r);var Es;let bS=(Es=class extends Ri{constructor(c,v,x){super(c,[zt.sequence+"|"+v+"|"+x.sequence.id]);G(this,"slotIndex");G(this,"attachment");this.slotIndex=v,this.attachment=x}getFrameEntries(){return Es.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(c,v,x,b,h){let w=this.frames;c*=Es.ENTRIES,w[c]=v,w[c+Es.MODE]=x|b<<4,w[c+Es.DELAY]=h}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=i.attachment,n=this.attachment;if(u!=n&&(!(u instanceof Ln)||u.timelineAttachment!=n))return;let r=this.frames;if(x<r[0]){(w==De.setup||w==De.first)&&(i.sequenceIndex=-1);return}let a=Ri.search(r,x,Es.ENTRIES),s=r[a],o=r[a+Es.MODE],d=r[a+Es.DELAY];if(!this.attachment.sequence)return;let l=o>>4,f=this.attachment.sequence.regions.length,m=Qw[o&15];if(m!=hs.hold)switch(l+=(x-s)/d+1e-5|0,m){case hs.once:l=Math.min(f-1,l);break;case hs.loop:l%=f;break;case hs.pingpong:{let g=(f<<1)-2;l=g==0?0:l%g,l>=f&&(l=g-l);break}case hs.onceReverse:l=Math.max(f-1-l,0);break;case hs.loopReverse:l=f-1-l%f;break;case hs.pingpongReverse:{let g=(f<<1)-2;l=g==0?0:(l+f-1)%g,l>=f&&(l=g-l)}}i.sequenceIndex=l}},G(Es,"ENTRIES",3),G(Es,"MODE",1),G(Es,"DELAY",2),Es);var bn;let sF=(bn=class{constructor(t){G(this,"data");G(this,"tracks",new Array);G(this,"timeScale",1);G(this,"unkeyedState",0);G(this,"events",new Array);G(this,"listeners",new Array);G(this,"queue",new nF(this));G(this,"propertyIDs",new jw);G(this,"animationsChanged",!1);G(this,"trackEntryPool",new qu(()=>new aF));this.data=t}static emptyAnimation(){return bn._emptyAnimation}update(t){t*=this.timeScale;let c=this.tracks;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(!b)continue;b.animationLast=b.nextAnimationLast,b.trackLast=b.nextTrackLast;let h=t*b.timeScale;if(b.delay>0){if(b.delay-=h,b.delay>0)continue;h=-b.delay,b.delay=0}let w=b.next;if(w){let e=b.trackLast-w.delay;if(e>=0){for(w.delay=0,w.trackTime+=b.timeScale==0?0:(e/b.timeScale+t)*w.timeScale,b.trackTime+=h,this.setCurrent(v,w,!0);w.mixingFrom;)w.mixTime+=t,w=w.mixingFrom;continue}}else if(b.trackLast>=b.trackEnd&&!b.mixingFrom){c[v]=null,this.queue.end(b),this.clearNext(b);continue}if(b.mixingFrom&&this.updateMixingFrom(b,t)){let e=b.mixingFrom;for(b.mixingFrom=null,e&&(e.mixingTo=null);e;)this.queue.end(e),e=e.mixingFrom}b.trackTime+=h}this.queue.drain()}updateMixingFrom(t,c){let v=t.mixingFrom;if(!v)return!0;let x=this.updateMixingFrom(v,c);return v.animationLast=v.nextAnimationLast,v.trackLast=v.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((v.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=v.mixingFrom,v.mixingFrom&&(v.mixingFrom.mixingTo=t),t.interruptAlpha=v.interruptAlpha,this.queue.end(v)),x):(v.trackTime+=c*v.timeScale,t.mixTime+=c,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let c=this.events,v=this.tracks,x=!1;for(let r=0,a=v.length;r<a;r++){let s=v[r];if(!s||s.delay>0)continue;x=!0;let o=r==0?De.first:s.mixBlend,d=s.alpha;s.mixingFrom?d*=this.applyMixingFrom(s,t,o):s.trackTime>=s.trackEnd&&!s.next&&(d=0);let l=d>=s.alphaAttachmentThreshold,f=s.animationLast,m=s.getAnimationTime(),g=m,p=c;s.reverse&&(g=s.animation.duration-g,p=null);let y=s.animation.timelines,S=y.length;if(r==0&&d==1||o==De.add){r==0&&(l=!0);for(let C=0;C<S;C++){var b=y[C];b instanceof il?this.applyAttachmentTimeline(b,t,g,o,l):b.apply(t,f,g,p,d,o,Ms.mixIn)}}else{let C=s.timelineMode,A=s.shortestRotation,M=!A&&s.timelinesRotation.length!=S<<1;M&&(s.timelinesRotation.length=S<<1);for(let L=0;L<S;L++){let P=y[L],O=C[L]==hg?o:De.setup;!A&&P instanceof _u?this.applyRotateTimeline(P,t,g,d,O,s.timelinesRotation,L<<1,M):P instanceof il?this.applyAttachmentTimeline(P,t,g,o,l):P.apply(t,f,g,p,d,O,Ms.mixIn)}}this.queueEvents(s,m),c.length=0,s.nextAnimationLast=m,s.nextTrackLast=s.trackTime}for(var h=this.unkeyedState+w1,w=t.slots,e=0,i=t.slots.length;e<i;e++){var u=w[e];if(u.attachmentState==h){var n=u.data.attachmentName;u.setAttachment(n?t.getAttachment(u.data.index,n):null)}}return this.unkeyedState+=2,this.queue.drain(),x}applyMixingFrom(t,c,v){let x=t.mixingFrom;x.mixingFrom&&this.applyMixingFrom(x,c,v);let b=0;t.mixDuration==0?(b=1,v==De.first&&(v=De.setup)):(b=t.mixTime/t.mixDuration,b>1&&(b=1),v!=De.first&&(v=x.mixBlend));let h=b<x.mixAttachmentThreshold,w=b<x.mixDrawOrderThreshold,e=x.animation.timelines,i=e.length,u=x.alpha*t.interruptAlpha,n=u*(1-b),r=x.animationLast,a=x.getAnimationTime(),s=a,o=null;if(x.reverse?s=x.animation.duration-s:b<x.eventThreshold&&(o=this.events),v==De.add)for(let d=0;d<i;d++)e[d].apply(c,r,s,o,n,v,Ms.mixOut);else{let d=x.timelineMode,l=x.timelineHoldMix,f=x.shortestRotation,m=!f&&x.timelinesRotation.length!=i<<1;m&&(x.timelinesRotation.length=i<<1),x.totalAlpha=0;for(let g=0;g<i;g++){let p=e[g],y=Ms.mixOut,S,C=0;switch(d[g]){case hg:if(!w&&p instanceof zh)continue;S=v,C=n;break;case y1:S=De.setup,C=n;break;case x1:S=v,C=u;break;case dg:S=De.setup,C=u;break;default:S=De.setup;let A=l[g];C=u*Math.max(0,1-A.mixTime/A.mixDuration);break}x.totalAlpha+=C,!f&&p instanceof _u?this.applyRotateTimeline(p,c,s,C,S,x.timelinesRotation,g<<1,m):p instanceof il?this.applyAttachmentTimeline(p,c,s,S,h&&C>=x.alphaAttachmentThreshold):(w&&p instanceof zh&&S==De.setup&&(y=Ms.mixIn),p.apply(c,r,s,o,C,S,y))}}return t.mixDuration>0&&this.queueEvents(x,a),this.events.length=0,x.nextAnimationLast=a,x.nextTrackLast=x.trackTime,b}applyAttachmentTimeline(t,c,v,x,b){var h=c.slots[t.slotIndex];h.bone.active&&(v<t.frames[0]?(x==De.setup||x==De.first)&&this.setAttachment(c,h,h.data.attachmentName,b):this.setAttachment(c,h,t.attachmentNames[Ri.search1(t.frames,v)],b),h.attachmentState<=this.unkeyedState&&(h.attachmentState=this.unkeyedState+w1))}setAttachment(t,c,v,x){c.setAttachment(v?t.getAttachment(c.data.index,v):null),x&&(c.attachmentState=this.unkeyedState+oF)}applyRotateTimeline(t,c,v,x,b,h,w,e){if(e&&(h[w]=0),x==1){t.apply(c,0,v,null,1,b,Ms.mixIn);return}let i=c.bones[t.boneIndex];if(!i.active)return;let u=t.frames,n=0,r=0;if(v<u[0])switch(b){case De.setup:i.rotation=i.data.rotation;default:return;case De.first:n=i.rotation,r=i.data.rotation}else n=b==De.setup?i.data.rotation:i.rotation,r=i.data.rotation+t.getCurveValue(v);let a=0,s=r-n;if(s-=Math.ceil(s/360-.5)*360,s==0)a=h[w];else{let o=0,d=0;e?(o=0,d=s):(o=h[w],d=h[w+1]);let l=o-o%360;a=s+l;let f=s>=0,m=o>=0;Math.abs(d)<=90&&Ue.signum(d)!=Ue.signum(s)&&(Math.abs(o-l)>180?(a+=360*Ue.signum(o),m=f):l!=0?a-=360*Ue.signum(o):m=f),m!=f&&(a+=360*Ue.signum(o)),h[w]=a}h[w+1]=s,i.rotation=n+a*x}queueEvents(t,c){let v=t.animationStart,x=t.animationEnd,b=x-v,h=t.trackLast%b,w=this.events,e=0,i=w.length;for(;e<i;e++){let n=w[e];if(n.time<h)break;n.time>x||this.queue.event(t,n)}let u=!1;if(t.loop)if(b==0)u=!0;else{const n=Math.floor(t.trackTime/b);u=n>0&&n>Math.floor(t.trackLast/b)}else u=c>=x&&t.animationLast<x;for(u&&this.queue.complete(t);e<i;e++){let n=w[e];n.time<v||this.queue.event(t,n)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let c=0,v=this.tracks.length;c<v;c++)this.clearTrack(c);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let c=this.tracks[t];if(!c)return;this.queue.end(c),this.clearNext(c);let v=c;for(;;){let x=v.mixingFrom;if(!x)break;this.queue.end(x),v.mixingFrom=null,v.mixingTo=null,v=x}this.tracks[c.trackIndex]=null,this.queue.drain()}setCurrent(t,c,v){let x=this.expandToIndex(t);this.tracks[t]=c,c.previous=null,x&&(v&&this.queue.interrupt(x),c.mixingFrom=x,x.mixingTo=c,c.mixTime=0,x.mixingFrom&&x.mixDuration>0&&(c.interruptAlpha*=Math.min(1,x.mixTime/x.mixDuration)),x.timelinesRotation.length=0),this.queue.start(c)}setAnimation(t,c,v=!1){let x=this.data.skeletonData.findAnimation(c);if(!x)throw new Error("Animation not found: "+c);return this.setAnimationWith(t,x,v)}setAnimationWith(t,c,v=!1){if(!c)throw new Error("animation cannot be null.");let x=!0,b=this.expandToIndex(t);b&&(b.nextTrackLast==-1?(this.tracks[t]=b.mixingFrom,this.queue.interrupt(b),this.queue.end(b),this.clearNext(b),b=b.mixingFrom,x=!1):this.clearNext(b));let h=this.trackEntry(t,c,v,b);return this.setCurrent(t,h,x),this.queue.drain(),h}addAnimation(t,c,v=!1,x=0){let b=this.data.skeletonData.findAnimation(c);if(!b)throw new Error("Animation not found: "+c);return this.addAnimationWith(t,b,v,x)}addAnimationWith(t,c,v=!1,x=0){if(!c)throw new Error("animation cannot be null.");let b=this.expandToIndex(t);if(b)for(;b.next;)b=b.next;let h=this.trackEntry(t,c,v,b);return b?(b.next=h,h.previous=b,x<=0&&(x+=b.getTrackComplete()-h.mixDuration)):(this.setCurrent(t,h,!0),this.queue.drain()),h.delay=x,h}setEmptyAnimation(t,c=0){let v=this.setAnimationWith(t,bn.emptyAnimation(),!1);return v.mixDuration=c,v.trackEnd=c,v}addEmptyAnimation(t,c=0,v=0){let x=this.addAnimationWith(t,bn.emptyAnimation(),!1,v);return v<=0&&(x.delay+=x.mixDuration-c),x.mixDuration=c,x.trackEnd=c,x}setEmptyAnimations(t=0){let c=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let v=0,x=this.tracks.length;v<x;v++){let b=this.tracks[v];b&&this.setEmptyAnimation(b.trackIndex,t)}this.queue.drainDisabled=c,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(ke.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,c,v,x){let b=this.trackEntryPool.obtain();return b.reset(),b.trackIndex=t,b.animation=c,b.loop=v,b.holdPrevious=!1,b.reverse=!1,b.shortestRotation=!1,b.eventThreshold=0,b.alphaAttachmentThreshold=0,b.mixAttachmentThreshold=0,b.mixDrawOrderThreshold=0,b.animationStart=0,b.animationEnd=c.duration,b.animationLast=-1,b.nextAnimationLast=-1,b.delay=0,b.trackTime=0,b.trackLast=-1,b.nextTrackLast=-1,b.trackEnd=Number.MAX_VALUE,b.timeScale=1,b.alpha=1,b.mixTime=0,b.mixDuration=x?this.data.getMix(x.animation,c):0,b.interruptAlpha=1,b.totalAlpha=0,b.mixBlend=De.replace,b}clearNext(t){let c=t.next;for(;c;)this.queue.dispose(c),c=c.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let c=0,v=t.length;c<v;c++){let x=t[c];if(x){for(;x.mixingFrom;)x=x.mixingFrom;do(!x.mixingTo||x.mixBlend!=De.add)&&this.computeHold(x),x=x.mixingTo;while(x)}}}computeHold(t){let c=t.mixingTo,v=t.animation.timelines,x=t.animation.timelines.length,b=t.timelineMode;b.length=x;let h=t.timelineHoldMix;h.length=0;let w=this.propertyIDs;if(c&&c.holdPrevious){for(let e=0;e<x;e++)b[e]=w.addAll(v[e].getPropertyIds())?dg:x1;return}e:for(let e=0;e<x;e++){let i=v[e],u=i.getPropertyIds();if(!w.addAll(u))b[e]=hg;else if(!c||i instanceof il||i instanceof zh||i instanceof xp||!c.animation.hasTimeline(u))b[e]=y1;else{for(let n=c.mixingTo;n;n=n.mixingTo)if(!n.animation.hasTimeline(u)){if(t.mixDuration>0){b[e]=rF,h[e]=n;continue e}break}b[e]=dg}}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let c=this.listeners.indexOf(t);c>=0&&this.listeners.splice(c,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}},G(bn,"_emptyAnimation",new vp("<empty>",[],0)),bn),aF=class{constructor(){G(this,"animation",null);G(this,"previous",null);G(this,"next",null);G(this,"mixingFrom",null);G(this,"mixingTo",null);G(this,"listener",null);G(this,"trackIndex",0);G(this,"loop",!1);G(this,"holdPrevious",!1);G(this,"reverse",!1);G(this,"shortestRotation",!1);G(this,"eventThreshold",0);G(this,"mixAttachmentThreshold",0);G(this,"alphaAttachmentThreshold",0);G(this,"mixDrawOrderThreshold",0);G(this,"animationStart",0);G(this,"animationEnd",0);G(this,"animationLast",0);G(this,"nextAnimationLast",0);G(this,"delay",0);G(this,"trackTime",0);G(this,"trackLast",0);G(this,"nextTrackLast",0);G(this,"trackEnd",0);G(this,"timeScale",0);G(this,"alpha",0);G(this,"mixTime",0);G(this,"_mixDuration",0);G(this,"interruptAlpha",0);G(this,"totalAlpha",0);G(this,"mixBlend",De.replace);G(this,"timelineMode",new Array);G(this,"timelineHoldMix",new Array);G(this,"timelinesRotation",new Array)}get mixDuration(){return this._mixDuration}set mixDuration(t){this._mixDuration=t}setMixDurationWithDelay(t,c){this._mixDuration=t,this.previous!=null&&c<=0&&(c+=this.previous.getTrackComplete()-t),this.delay=c}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(t!=0){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}wasApplied(){return this.nextTrackLast!=-1}isNextReady(){return this.next!=null&&this.nextTrackLast-this.next.delay>=0}},nF=class{constructor(t){G(this,"objects",[]);G(this,"drainDisabled",!1);G(this,"animState");this.animState=t}start(t){this.objects.push(Ns.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(Ns.interrupt),this.objects.push(t)}end(t){this.objects.push(Ns.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(Ns.dispose),this.objects.push(t)}complete(t){this.objects.push(Ns.complete),this.objects.push(t)}event(t,c){this.objects.push(Ns.event),this.objects.push(t),this.objects.push(c)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,c=this.animState.listeners;for(let v=0;v<t.length;v+=2){let x=t[v],b=t[v+1];switch(x){case Ns.start:b.listener&&b.listener.start&&b.listener.start(b);for(let w=0;w<c.length;w++){let e=c[w];e.start&&e.start(b)}break;case Ns.interrupt:b.listener&&b.listener.interrupt&&b.listener.interrupt(b);for(let w=0;w<c.length;w++){let e=c[w];e.interrupt&&e.interrupt(b)}break;case Ns.end:b.listener&&b.listener.end&&b.listener.end(b);for(let w=0;w<c.length;w++){let e=c[w];e.end&&e.end(b)}case Ns.dispose:b.listener&&b.listener.dispose&&b.listener.dispose(b);for(let w=0;w<c.length;w++){let e=c[w];e.dispose&&e.dispose(b)}this.animState.trackEntryPool.free(b);break;case Ns.complete:b.listener&&b.listener.complete&&b.listener.complete(b);for(let w=0;w<c.length;w++){let e=c[w];e.complete&&e.complete(b)}break;case Ns.event:let h=t[v+++2];b.listener&&b.listener.event&&b.listener.event(b,h);for(let w=0;w<c.length;w++){let e=c[w];e.event&&e.event(b,h)}break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}};var Ns;(function(R){R[R.start=0]="start",R[R.interrupt=1]="interrupt",R[R.end=2]="end",R[R.dispose=3]="dispose",R[R.complete=4]="complete",R[R.event=5]="event"})(Ns||(Ns={}));const hg=0,y1=1,x1=2,dg=3,rF=4,w1=1,oF=2;let lF=class{constructor(t){G(this,"skeletonData");G(this,"animationToMixTime",{});G(this,"defaultMix",0);if(!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,c,v){let x=this.skeletonData.findAnimation(t);if(!x)throw new Error("Animation not found: "+t);let b=this.skeletonData.findAnimation(c);if(!b)throw new Error("Animation not found: "+c);this.setMixWith(x,b,v)}setMixWith(t,c,v){if(!t)throw new Error("from cannot be null.");if(!c)throw new Error("to cannot be null.");let x=t.name+"."+c.name;this.animationToMixTime[x]=v}getMix(t,c){let v=t.name+"."+c.name,x=this.animationToMixTime[v];return x===void 0?this.defaultMix:x}},ES=class MS extends Ln{constructor(c){super(c);G(this,"color",new Rt(1,1,1,1))}copy(){let c=new MS(this.name);return this.copyTo(c),c.color.setFromColor(this.color),c}},bc=class LS extends Ln{constructor(c){super(c);G(this,"endSlot",null);G(this,"color",new Rt(.2275,.2275,.8078,1))}copy(){let c=new LS(this.name);return this.copyTo(c),c.endSlot=this.endSlot,c.color.setFromColor(this.color),c}},RS=class{constructor(t){G(this,"_image");this._image=t}getImage(){return this._image}};var bs;(function(R){R[R.Nearest=9728]="Nearest",R[R.Linear=9729]="Linear",R[R.MipMap=9987]="MipMap",R[R.MipMapNearestNearest=9984]="MipMapNearestNearest",R[R.MipMapLinearNearest=9985]="MipMapLinearNearest",R[R.MipMapNearestLinear=9986]="MipMapNearestLinear",R[R.MipMapLinearLinear=9987]="MipMapLinearLinear"})(bs||(bs={}));var xl;(function(R){R[R.MirroredRepeat=33648]="MirroredRepeat",R[R.ClampToEdge=33071]="ClampToEdge",R[R.Repeat=10497]="Repeat"})(xl||(xl={}));let PS=class{constructor(){G(this,"texture");G(this,"u",0);G(this,"v",0);G(this,"u2",0);G(this,"v2",0);G(this,"width",0);G(this,"height",0);G(this,"degrees",0);G(this,"offsetX",0);G(this,"offsetY",0);G(this,"originalWidth",0);G(this,"originalHeight",0)}},hF=class{constructor(t){G(this,"pages",new Array);G(this,"regions",new Array);let c=new dF(t),v=new Array(4),x={};x.size=u=>{u.width=parseInt(v[1]),u.height=parseInt(v[2])},x.format=()=>{},x.filter=u=>{u.minFilter=ke.enumValue(bs,v[1]),u.magFilter=ke.enumValue(bs,v[2])},x.repeat=u=>{v[1].indexOf("x")!=-1&&(u.uWrap=xl.Repeat),v[1].indexOf("y")!=-1&&(u.vWrap=xl.Repeat)},x.pma=u=>{u.pma=v[1]=="true"};var b={};b.xy=u=>{u.x=parseInt(v[1]),u.y=parseInt(v[2])},b.size=u=>{u.width=parseInt(v[1]),u.height=parseInt(v[2])},b.bounds=u=>{u.x=parseInt(v[1]),u.y=parseInt(v[2]),u.width=parseInt(v[3]),u.height=parseInt(v[4])},b.offset=u=>{u.offsetX=parseInt(v[1]),u.offsetY=parseInt(v[2])},b.orig=u=>{u.originalWidth=parseInt(v[1]),u.originalHeight=parseInt(v[2])},b.offsets=u=>{u.offsetX=parseInt(v[1]),u.offsetY=parseInt(v[2]),u.originalWidth=parseInt(v[3]),u.originalHeight=parseInt(v[4])},b.rotate=u=>{let n=v[1];n=="true"?u.degrees=90:n!="false"&&(u.degrees=parseInt(n))},b.index=u=>{u.index=parseInt(v[1])};let h=c.readLine();for(;h&&h.trim().length==0;)h=c.readLine();for(;!(!h||h.trim().length==0||c.readEntry(v,h)==0);)h=c.readLine();let w=null,e=null,i=null;for(;h!==null;)if(h.trim().length==0)w=null,h=c.readLine();else if(w){let u=new BS(w,h);for(;;){let n=c.readEntry(v,h=c.readLine());if(n==0)break;let r=b[v[0]];if(r)r(u);else{e||(e=[]),i||(i=[]),e.push(v[0]);let a=[];for(let s=0;s<n;s++)a.push(parseInt(v[s+1]));i.push(a)}}u.originalWidth==0&&u.originalHeight==0&&(u.originalWidth=u.width,u.originalHeight=u.height),e&&e.length>0&&i&&i.length>0&&(u.names=e,u.values=i,e=null,i=null),u.u=u.x/w.width,u.v=u.y/w.height,u.degrees==90?(u.u2=(u.x+u.height)/w.width,u.v2=(u.y+u.width)/w.height):(u.u2=(u.x+u.width)/w.width,u.v2=(u.y+u.height)/w.height),this.regions.push(u)}else{for(w=new uF(h.trim());c.readEntry(v,h=c.readLine())!=0;){let u=x[v[0]];u&&u(w)}this.pages.push(w)}}findRegion(t){for(let c=0;c<this.regions.length;c++)if(this.regions[c].name==t)return this.regions[c];return null}setTextures(t,c=""){for(let v of this.pages)v.setTexture(t.get(c+v.name))}dispose(){var t;for(let c=0;c<this.pages.length;c++)(t=this.pages[c].texture)==null||t.dispose()}},dF=class{constructor(t){G(this,"lines");G(this,"index",0);this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,c){if(!c||(c=c.trim(),c.length==0))return 0;let v=c.indexOf(":");if(v==-1)return 0;t[0]=c.substr(0,v).trim();for(let x=1,b=v+1;;x++){let h=c.indexOf(",",b);if(h==-1)return t[x]=c.substr(b).trim(),x;if(t[x]=c.substr(b,h-b).trim(),b=h+1,x==4)return 4}}},uF=class{constructor(t){G(this,"name");G(this,"minFilter",bs.Nearest);G(this,"magFilter",bs.Nearest);G(this,"uWrap",xl.ClampToEdge);G(this,"vWrap",xl.ClampToEdge);G(this,"texture",null);G(this,"width",0);G(this,"height",0);G(this,"pma",!1);G(this,"regions",new Array);this.name=t}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);for(let c of this.regions)c.texture=t}},BS=class extends PS{constructor(c,v){super();G(this,"page");G(this,"name");G(this,"x",0);G(this,"y",0);G(this,"offsetX",0);G(this,"offsetY",0);G(this,"originalWidth",0);G(this,"originalHeight",0);G(this,"index",0);G(this,"degrees",0);G(this,"names",null);G(this,"values",null);this.page=c,this.name=v,c.regions.push(this)}},Ml=class Fg extends Ln{constructor(c,v){super(c);G(this,"region",null);G(this,"path");G(this,"regionUVs",[]);G(this,"uvs",[]);G(this,"triangles",[]);G(this,"color",new Rt(1,1,1,1));G(this,"width",0);G(this,"height",0);G(this,"hullLength",0);G(this,"edges",[]);G(this,"parentMesh",null);G(this,"sequence",null);G(this,"tempColor",new Rt(0,0,0,0));this.path=v}updateRegion(){if(!this.region)throw new Error("Region not set.");let c=this.regionUVs;(!this.uvs||this.uvs.length!=c.length)&&(this.uvs=ke.newFloatArray(c.length));let v=this.uvs,x=this.uvs.length,b=this.region.u,h=this.region.v,w=0,e=0;if(this.region instanceof BS){let i=this.region,u=i.page,n=u.width,r=u.height;switch(i.degrees){case 90:b-=(i.originalHeight-i.offsetY-i.height)/n,h-=(i.originalWidth-i.offsetX-i.width)/r,w=i.originalHeight/n,e=i.originalWidth/r;for(let a=0;a<x;a+=2)v[a]=b+c[a+1]*w,v[a+1]=h+(1-c[a])*e;return;case 180:b-=(i.originalWidth-i.offsetX-i.width)/n,h-=i.offsetY/r,w=i.originalWidth/n,e=i.originalHeight/r;for(let a=0;a<x;a+=2)v[a]=b+(1-c[a])*w,v[a+1]=h+(1-c[a+1])*e;return;case 270:b-=i.offsetY/n,h-=i.offsetX/r,w=i.originalHeight/n,e=i.originalWidth/r;for(let a=0;a<x;a+=2)v[a]=b+(1-c[a+1])*w,v[a+1]=h+c[a]*e;return}b-=i.offsetX/n,h-=(i.originalHeight-i.offsetY-i.height)/r,w=i.originalWidth/n,e=i.originalHeight/r}else this.region?(w=this.region.u2-b,e=this.region.v2-h):(b=h=0,w=e=1);for(let i=0;i<x;i+=2)v[i]=b+c[i]*w,v[i+1]=h+c[i+1]*e}getParentMesh(){return this.parentMesh}setParentMesh(c){this.parentMesh=c,c&&(this.bones=c.bones,this.vertices=c.vertices,this.worldVerticesLength=c.worldVerticesLength,this.regionUVs=c.regionUVs,this.triangles=c.triangles,this.hullLength=c.hullLength,this.worldVerticesLength=c.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let c=new Fg(this.name,this.path);return c.region=this.region,c.color.setFromColor(this.color),this.copyTo(c),c.regionUVs=new Array(this.regionUVs.length),ke.arrayCopy(this.regionUVs,0,c.regionUVs,0,this.regionUVs.length),c.uvs=new Array(this.uvs.length),ke.arrayCopy(this.uvs,0,c.uvs,0,this.uvs.length),c.triangles=new Array(this.triangles.length),ke.arrayCopy(this.triangles,0,c.triangles,0,this.triangles.length),c.hullLength=this.hullLength,c.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(c.edges=new Array(this.edges.length),ke.arrayCopy(this.edges,0,c.edges,0,this.edges.length)),c.width=this.width,c.height=this.height,c}computeWorldVertices(c,v,x,b,h,w){this.sequence!=null&&this.sequence.apply(c,this),super.computeWorldVertices(c,v,x,b,h,w)}newLinkedMesh(){let c=new Fg(this.name,this.path);return c.region=this.region,c.color.setFromColor(this.color),c.timelineAttachment=this.timelineAttachment,c.setParentMesh(this.parentMesh?this.parentMesh:this),c.region!=null&&c.updateRegion(),c}},Kh=class DS extends Ln{constructor(c){super(c);G(this,"lengths",[]);G(this,"closed",!1);G(this,"constantSpeed",!1);G(this,"color",new Rt(1,1,1,1))}copy(){let c=new DS(this.name);return this.copyTo(c),c.lengths=new Array(this.lengths.length),ke.arrayCopy(this.lengths,0,c.lengths,0,this.lengths.length),c.closed=closed,c.constantSpeed=this.constantSpeed,c.color.setFromColor(this.color),c}},cF=class FS extends Ln{constructor(c){super(c);G(this,"x",0);G(this,"y",0);G(this,"rotation",0);G(this,"color",new Rt(.38,.94,0,1))}computeWorldPosition(c,v){return v.x=this.x*c.a+this.y*c.b+c.worldX,v.y=this.x*c.c+this.y*c.d+c.worldY,v}computeWorldRotation(c){const v=this.rotation*Ue.degRad,x=Math.cos(v),b=Math.sin(v),h=x*c.a+b*c.b,w=x*c.c+b*c.d;return Ue.atan2Deg(w,h)}copy(){let c=new FS(this.name);return c.x=this.x,c.y=this.y,c.rotation=this.rotation,c.color.setFromColor(this.color),c}};var Kt;let gi=(Kt=class extends Kw{constructor(c,v){super(c);G(this,"x",0);G(this,"y",0);G(this,"scaleX",1);G(this,"scaleY",1);G(this,"rotation",0);G(this,"width",0);G(this,"height",0);G(this,"color",new Rt(1,1,1,1));G(this,"path");G(this,"region",null);G(this,"sequence",null);G(this,"offset",ke.newFloatArray(8));G(this,"uvs",ke.newFloatArray(8));G(this,"tempColor",new Rt(1,1,1,1));this.path=v}updateRegion(){if(!this.region)throw new Error("Region not set.");let c=this.region,v=this.uvs;if(c==null){v[0]=0,v[1]=0,v[2]=0,v[3]=1,v[4]=1,v[5]=1,v[6]=1,v[7]=0;return}let x=this.width/this.region.originalWidth*this.scaleX,b=this.height/this.region.originalHeight*this.scaleY,h=-this.width/2*this.scaleX+this.region.offsetX*x,w=-this.height/2*this.scaleY+this.region.offsetY*b,e=h+this.region.width*x,i=w+this.region.height*b,u=this.rotation*Ue.degRad,n=Math.cos(u),r=Math.sin(u),a=this.x,s=this.y,o=h*n+a,d=h*r,l=w*n+s,f=w*r,m=e*n+a,g=e*r,p=i*n+s,y=i*r,S=this.offset;S[0]=o-f,S[1]=l+d,S[2]=o-y,S[3]=p+d,S[4]=m-y,S[5]=p+g,S[6]=m-f,S[7]=l+g,c.degrees==90?(v[0]=c.u2,v[1]=c.v2,v[2]=c.u,v[3]=c.v2,v[4]=c.u,v[5]=c.v,v[6]=c.u2,v[7]=c.v):(v[0]=c.u,v[1]=c.v2,v[2]=c.u,v[3]=c.v,v[4]=c.u2,v[5]=c.v,v[6]=c.u2,v[7]=c.v2)}computeWorldVertices(c,v,x,b){this.sequence!=null&&this.sequence.apply(c,this);let h=c.bone,w=this.offset,e=h.worldX,i=h.worldY,u=h.a,n=h.b,r=h.c,a=h.d,s=0,o=0;s=w[0],o=w[1],v[x]=s*u+o*n+e,v[x+1]=s*r+o*a+i,x+=b,s=w[2],o=w[3],v[x]=s*u+o*n+e,v[x+1]=s*r+o*a+i,x+=b,s=w[4],o=w[5],v[x]=s*u+o*n+e,v[x+1]=s*r+o*a+i,x+=b,s=w[6],o=w[7],v[x]=s*u+o*n+e,v[x+1]=s*r+o*a+i}copy(){let c=new Kt(this.name,this.path);return c.region=this.region,c.x=this.x,c.y=this.y,c.scaleX=this.scaleX,c.scaleY=this.scaleY,c.rotation=this.rotation,c.width=this.width,c.height=this.height,ke.arrayCopy(this.uvs,0,c.uvs,0,8),ke.arrayCopy(this.offset,0,c.offset,0,8),c.color.setFromColor(this.color),c.sequence=this.sequence!=null?this.sequence.copy():null,c}},G(Kt,"X1",0),G(Kt,"Y1",1),G(Kt,"C1R",2),G(Kt,"C1G",3),G(Kt,"C1B",4),G(Kt,"C1A",5),G(Kt,"U1",6),G(Kt,"V1",7),G(Kt,"X2",8),G(Kt,"Y2",9),G(Kt,"C2R",10),G(Kt,"C2G",11),G(Kt,"C2B",12),G(Kt,"C2A",13),G(Kt,"U2",14),G(Kt,"V2",15),G(Kt,"X3",16),G(Kt,"Y3",17),G(Kt,"C3R",18),G(Kt,"C3G",19),G(Kt,"C3B",20),G(Kt,"C3A",21),G(Kt,"U3",22),G(Kt,"V3",23),G(Kt,"X4",24),G(Kt,"Y4",25),G(Kt,"C4R",26),G(Kt,"C4G",27),G(Kt,"C4B",28),G(Kt,"C4A",29),G(Kt,"U4",30),G(Kt,"V4",31),Kt),S1=class{constructor(t){G(this,"atlas");this.atlas=t}loadSequence(t,c,v){let x=v.regions;for(let b=0,h=x.length;b<h;b++){let w=v.getPath(c,b),e=this.atlas.findRegion(w);if(e==null)throw new Error("Region not found in atlas: "+w+" (sequence: "+t+")");x[b]=e}}newRegionAttachment(t,c,v,x){let b=new gi(c,v);if(x!=null)this.loadSequence(c,v,x);else{let h=this.atlas.findRegion(v);if(!h)throw new Error("Region not found in atlas: "+v+" (region attachment: "+c+")");b.region=h}return b}newMeshAttachment(t,c,v,x){let b=new Ml(c,v);if(x!=null)this.loadSequence(c,v,x);else{let h=this.atlas.findRegion(v);if(!h)throw new Error("Region not found in atlas: "+v+" (mesh attachment: "+c+")");b.region=h}return b}newBoundingBoxAttachment(t,c){return new ES(c)}newPathAttachment(t,c){return new Kh(c)}newPointAttachment(t,c){return new cF(c)}newClippingAttachment(t,c){return new bc(c)}},IS=class{constructor(t,c,v){G(this,"index",0);G(this,"name");G(this,"parent",null);G(this,"length",0);G(this,"x",0);G(this,"y",0);G(this,"rotation",0);G(this,"scaleX",1);G(this,"scaleY",1);G(this,"shearX",0);G(this,"shearY",0);G(this,"inherit",Fi.Normal);G(this,"skinRequired",!1);G(this,"color",new Rt);G(this,"icon");G(this,"visible",!1);if(t<0)throw new Error("index must be >= 0.");if(!c)throw new Error("name cannot be null.");this.index=t,this.name=c,this.parent=v}};var Fi;(function(R){R[R.Normal=0]="Normal",R[R.OnlyTranslation=1]="OnlyTranslation",R[R.NoRotationOrReflection=2]="NoRotationOrReflection",R[R.NoScale=3]="NoScale",R[R.NoScaleOrReflection=4]="NoScaleOrReflection"})(Fi||(Fi={}));let T1=class{constructor(t,c,v){G(this,"data");G(this,"skeleton");G(this,"parent",null);G(this,"children",new Array);G(this,"x",0);G(this,"y",0);G(this,"rotation",0);G(this,"scaleX",0);G(this,"scaleY",0);G(this,"shearX",0);G(this,"shearY",0);G(this,"ax",0);G(this,"ay",0);G(this,"arotation",0);G(this,"ascaleX",0);G(this,"ascaleY",0);G(this,"ashearX",0);G(this,"ashearY",0);G(this,"a",0);G(this,"b",0);G(this,"c",0);G(this,"d",0);G(this,"worldY",0);G(this,"worldX",0);G(this,"inherit",Fi.Normal);G(this,"sorted",!1);G(this,"active",!1);if(!t)throw new Error("data cannot be null.");if(!c)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=c,this.parent=v,this.setToSetupPose()}isActive(){return this.active}update(t){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,c,v,x,b,h,w){this.ax=t,this.ay=c,this.arotation=v,this.ascaleX=x,this.ascaleY=b,this.ashearX=h,this.ashearY=w;let e=this.parent;if(!e){let a=this.skeleton;const s=a.scaleX,o=a.scaleY,d=(v+h)*Ue.degRad,l=(v+90+w)*Ue.degRad;this.a=Math.cos(d)*x*s,this.b=Math.cos(l)*b*s,this.c=Math.sin(d)*x*o,this.d=Math.sin(l)*b*o,this.worldX=t*s+a.x,this.worldY=c*o+a.y;return}let i=e.a,u=e.b,n=e.c,r=e.d;switch(this.worldX=i*t+u*c+e.worldX,this.worldY=n*t+r*c+e.worldY,this.inherit){case Fi.Normal:{const a=(v+h)*Ue.degRad,s=(v+90+w)*Ue.degRad,o=Math.cos(a)*x,d=Math.cos(s)*b,l=Math.sin(a)*x,f=Math.sin(s)*b;this.a=i*o+u*l,this.b=i*d+u*f,this.c=n*o+r*l,this.d=n*d+r*f;return}case Fi.OnlyTranslation:{const a=(v+h)*Ue.degRad,s=(v+90+w)*Ue.degRad;this.a=Math.cos(a)*x,this.b=Math.cos(s)*b,this.c=Math.sin(a)*x,this.d=Math.sin(s)*b;break}case Fi.NoRotationOrReflection:{let a=1/this.skeleton.scaleX,s=1/this.skeleton.scaleY;i*=a,n*=s;let o=i*i+n*n,d=0;o>1e-4?(o=Math.abs(i*r*s-u*a*n)/o,u=n*o,r=i*o,d=Math.atan2(n,i)*Ue.radDeg):(i=0,n=0,d=90-Math.atan2(r,u)*Ue.radDeg);const l=(v+h-d)*Ue.degRad,f=(v+w-d+90)*Ue.degRad,m=Math.cos(l)*x,g=Math.cos(f)*b,p=Math.sin(l)*x,y=Math.sin(f)*b;this.a=i*m-u*p,this.b=i*g-u*y,this.c=n*m+r*p,this.d=n*g+r*y;break}case Fi.NoScale:case Fi.NoScaleOrReflection:{v*=Ue.degRad;const a=Math.cos(v),s=Math.sin(v);let o=(i*a+u*s)/this.skeleton.scaleX,d=(n*a+r*s)/this.skeleton.scaleY,l=Math.sqrt(o*o+d*d);l>1e-5&&(l=1/l),o*=l,d*=l,l=Math.sqrt(o*o+d*d),this.inherit==Fi.NoScale&&i*r-u*n<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(l=-l),v=Math.PI/2+Math.atan2(d,o);const f=Math.cos(v)*l,m=Math.sin(v)*l;h*=Ue.degRad,w=(90+w)*Ue.degRad;const g=Math.cos(h)*x,p=Math.cos(w)*b,y=Math.sin(h)*x,S=Math.sin(w)*b;this.a=o*g+f*y,this.b=o*p+f*S,this.c=d*g+m*y,this.d=d*p+m*S;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY,this.inherit=t.inherit}updateAppliedTransform(){let t=this.parent;if(!t){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*Ue.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*Ue.radDeg;return}let c=t.a,v=t.b,x=t.c,b=t.d,h=1/(c*b-v*x),w=b*h,e=v*h,i=x*h,u=c*h,n=this.worldX-t.worldX,r=this.worldY-t.worldY;this.ax=n*w-r*e,this.ay=r*u-n*i;let a,s,o,d;if(this.inherit==Fi.OnlyTranslation)a=this.a,s=this.b,o=this.c,d=this.d;else{switch(this.inherit){case Fi.NoRotationOrReflection:{let p=Math.abs(c*b-v*x)/(c*c+x*x);v=-x*this.skeleton.scaleX*p/this.skeleton.scaleY,b=c*this.skeleton.scaleY*p/this.skeleton.scaleX,h=1/(c*b-v*x),w=b*h,e=v*h;break}case Fi.NoScale:case Fi.NoScaleOrReflection:let l=Ue.cosDeg(this.rotation),f=Ue.sinDeg(this.rotation);c=(c*l+v*f)/this.skeleton.scaleX,x=(x*l+b*f)/this.skeleton.scaleY;let m=Math.sqrt(c*c+x*x);m>1e-5&&(m=1/m),c*=m,x*=m,m=Math.sqrt(c*c+x*x),this.inherit==Fi.NoScale&&h<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(m=-m);let g=Ue.PI/2+Math.atan2(x,c);v=Math.cos(g)*m,b=Math.sin(g)*m,h=1/(c*b-v*x),w=b*h,e=v*h,i=x*h,u=c*h}a=w*this.a-e*this.c,s=w*this.b-e*this.d,o=u*this.c-i*this.a,d=u*this.d-i*this.b}if(this.ashearX=0,this.ascaleX=Math.sqrt(a*a+o*o),this.ascaleX>1e-4){let l=a*d-s*o;this.ascaleY=l/this.ascaleX,this.ashearY=-Math.atan2(a*s+o*d,l)*Ue.radDeg,this.arotation=Math.atan2(o,a)*Ue.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(s*s+d*d),this.ashearY=0,this.arotation=90-Math.atan2(d,s)*Ue.radDeg}getWorldRotationX(){return Math.atan2(this.c,this.a)*Ue.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*Ue.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}worldToLocal(t){let c=1/(this.a*this.d-this.b*this.c),v=t.x-this.worldX,x=t.y-this.worldY;return t.x=v*this.d*c-x*this.b*c,t.y=x*this.a*c-v*this.c*c,t}localToWorld(t){let c=t.x,v=t.y;return t.x=c*this.a+v*this.b+this.worldX,t.y=c*this.c+v*this.d+this.worldY,t}worldToParent(t){if(t==null)throw new Error("world cannot be null.");return this.parent==null?t:this.parent.worldToLocal(t)}parentToWorld(t){if(t==null)throw new Error("world cannot be null.");return this.parent==null?t:this.parent.localToWorld(t)}worldToLocalRotation(t){let c=Ue.sinDeg(t),v=Ue.cosDeg(t);return Math.atan2(this.a*c-this.c*v,this.d*v-this.b*c)*Ue.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let c=Ue.sinDeg(t),v=Ue.cosDeg(t);return Math.atan2(v*this.c+c*this.d,v*this.a+c*this.b)*Ue.radDeg}rotateWorld(t){t*=Ue.degRad;const c=Math.sin(t),v=Math.cos(t),x=this.a,b=this.b;this.a=v*x-c*this.c,this.b=v*b-c*this.d,this.c=c*x+v*this.c,this.d=c*b+v*this.d}},Ec=class{constructor(t,c,v){G(this,"name");G(this,"order");G(this,"skinRequired");this.name=t,this.order=c,this.skinRequired=v}},OS=class{constructor(t,c){G(this,"data");G(this,"intValue",0);G(this,"floatValue",0);G(this,"stringValue",null);G(this,"time",0);G(this,"volume",0);G(this,"balance",0);if(!c)throw new Error("data cannot be null.");this.time=t,this.data=c}},NS=class{constructor(t){G(this,"name");G(this,"intValue",0);G(this,"floatValue",0);G(this,"stringValue",null);G(this,"audioPath",null);G(this,"volume",0);G(this,"balance",0);this.name=t}},fF=class{constructor(t,c){G(this,"data");G(this,"bones");G(this,"target");G(this,"bendDirection",0);G(this,"compress",!1);G(this,"stretch",!1);G(this,"mix",1);G(this,"softness",0);G(this,"active",!1);if(!t)throw new Error("data cannot be null.");if(!c)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let x=0;x<t.bones.length;x++){let b=c.findBone(t.bones[x].name);if(!b)throw new Error(`Couldn't find bone ${t.bones[x].name}`);this.bones.push(b)}let v=c.findBone(t.target.name);if(!v)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=v,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch}isActive(){return this.active}setToSetupPose(){const t=this.data;this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch}update(t){if(this.mix==0)return;let c=this.target,v=this.bones;switch(v.length){case 1:this.apply1(v[0],c.worldX,c.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(v[0],v[1],c.worldX,c.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(t,c,v,x,b,h,w){let e=t.parent;if(!e)throw new Error("IK bone must have parent.");let i=e.a,u=e.b,n=e.c,r=e.d,a=-t.ashearX-t.arotation,s=0,o=0;switch(t.inherit){case Fi.OnlyTranslation:s=(c-t.worldX)*Ue.signum(t.skeleton.scaleX),o=(v-t.worldY)*Ue.signum(t.skeleton.scaleY);break;case Fi.NoRotationOrReflection:let f=Math.abs(i*r-u*n)/Math.max(1e-4,i*i+n*n),m=i/t.skeleton.scaleX,g=n/t.skeleton.scaleY;u=-g*f*t.skeleton.scaleX,r=m*f*t.skeleton.scaleY,a+=Math.atan2(g,m)*Ue.radDeg;default:let p=c-e.worldX,y=v-e.worldY,S=i*r-u*n;Math.abs(S)<=1e-4?(s=0,o=0):(s=(p*r-y*u)/S-t.ax,o=(y*i-p*n)/S-t.ay)}a+=Math.atan2(o,s)*Ue.radDeg,t.ascaleX<0&&(a+=180),a>180?a-=360:a<-180&&(a+=360);let d=t.ascaleX,l=t.ascaleY;if(x||b){switch(t.inherit){case Fi.NoScale:case Fi.NoScaleOrReflection:s=c-t.worldX,o=v-t.worldY}const f=t.data.length*d;if(f>1e-4){const m=s*s+o*o;if(x&&m<f*f||b&&m>f*f){const g=(Math.sqrt(m)/f-1)*w+1;d*=g,h&&(l*=g)}}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+a*w,d,l,t.ashearX,t.ashearY)}apply2(t,c,v,x,b,h,w,e,i){if(t.inherit!=Fi.Normal||c.inherit!=Fi.Normal)return;let u=t.ax,n=t.ay,r=t.ascaleX,a=t.ascaleY,s=r,o=a,d=c.ascaleX,l=0,f=0,m=0;r<0?(r=-r,l=180,m=-1):(l=0,m=1),a<0&&(a=-a,m=-m),d<0?(d=-d,f=180):f=0;let g=c.ax,p=0,y=0,S=0,C=t.a,A=t.b,M=t.c,L=t.d,P=Math.abs(r-a)<=1e-4;!P||h?(p=0,y=C*g+t.worldX,S=M*g+t.worldY):(p=c.ay,y=C*g+A*p+t.worldX,S=M*g+L*p+t.worldY);let O=t.parent;if(!O)throw new Error("IK parent must itself have a parent.");C=O.a,A=O.b,M=O.c,L=O.d;let D=C*L-A*M,I=y-O.worldX,F=S-O.worldY;D=Math.abs(D)<=1e-4?0:1/D;let H=(I*L-F*A)*D-u,k=(F*C-I*M)*D-n,W=Math.sqrt(H*H+k*k),$=c.data.length*d,K,Z;if(W<1e-4){this.apply1(t,v,x,!1,h,!1,i),c.updateWorldTransformWith(g,p,0,c.ascaleX,c.ascaleY,c.ashearX,c.ashearY);return}I=v-O.worldX,F=x-O.worldY;let X=(I*L-F*A)*D-u,j=(F*C-I*M)*D-n,Y=X*X+j*j;if(e!=0){e*=r*(d+1)*.5;let q=Math.sqrt(Y),_=q-W-$*r+e;if(_>0){let te=Math.min(1,_/(e*2))-1;te=(_-e*(1-te*te))/q,X-=te*X,j-=te*j,Y=X*X+j*j}}e:if(P){$*=r;let q=(Y-W*W-$*$)/(2*W*$);q<-1?(q=-1,Z=Math.PI*b):q>1?(q=1,Z=0,h&&(C=(Math.sqrt(Y)/(W+$)-1)*i+1,s*=C,w&&(o*=C))):Z=Math.acos(q)*b,C=W+$*q,A=$*Math.sin(Z),K=Math.atan2(j*C-X*A,X*C+j*A)}else{C=r*$,A=a*$;let q=C*C,_=A*A,te=Math.atan2(j,X);M=_*W*W+q*Y-q*_;let se=-2*_*W,ne=_-q;if(L=se*se-4*ne*M,L>=0){let Fe=Math.sqrt(L);se<0&&(Fe=-Fe),Fe=-(se+Fe)*.5;let Se=Fe/ne,Oe=M/Fe,Be=Math.abs(Se)<Math.abs(Oe)?Se:Oe;if(Se=Y-Be*Be,Se>=0){F=Math.sqrt(Se)*b,K=te-Math.atan2(F,Be),Z=Math.atan2(F/a,(Be-W)/r);break e}}let he=Ue.PI,le=W-C,ge=le*le,re=0,fe=0,Ae=W+C,Ie=Ae*Ae,Ne=0;M=-C*W/(q-_),M>=-1&&M<=1&&(M=Math.acos(M),I=C*Math.cos(M)+W,F=A*Math.sin(M),L=I*I+F*F,L<ge&&(he=M,ge=L,le=I,re=F),L>Ie&&(fe=M,Ie=L,Ae=I,Ne=F)),Y<=(ge+Ie)*.5?(K=te-Math.atan2(re*b,le),Z=he*b):(K=te-Math.atan2(Ne*b,Ae),Z=fe*b)}let U=Math.atan2(p,g)*m,J=t.arotation;K=(K-U)*Ue.radDeg+l-J,K>180?K-=360:K<-180&&(K+=360),t.updateWorldTransformWith(u,n,J+K*i,s,o,0,0),J=c.arotation,Z=((Z+U)*Ue.radDeg-c.ashearX)*m+f-J,Z>180?Z-=360:Z<-180&&(Z+=360),c.updateWorldTransformWith(g,p,J+Z*i,c.ascaleX,c.ascaleY,c.ashearX,c.ashearY)}},GS=class extends Ec{constructor(c){super(c,0,!1);G(this,"bones",new Array);G(this,"_target",null);G(this,"bendDirection",0);G(this,"compress",!1);G(this,"stretch",!1);G(this,"uniform",!1);G(this,"mix",0);G(this,"softness",0)}set target(c){this._target=c}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}},HS=class extends Ec{constructor(c){super(c,0,!1);G(this,"bones",new Array);G(this,"_target",null);G(this,"positionMode",Xa.Fixed);G(this,"spacingMode",qi.Fixed);G(this,"rotateMode",Zr.Chain);G(this,"offsetRotation",0);G(this,"position",0);G(this,"spacing",0);G(this,"mixRotate",0);G(this,"mixX",0);G(this,"mixY",0)}set target(c){this._target=c}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}};var Xa;(function(R){R[R.Fixed=0]="Fixed",R[R.Percent=1]="Percent"})(Xa||(Xa={}));var qi;(function(R){R[R.Length=0]="Length",R[R.Fixed=1]="Fixed",R[R.Percent=2]="Percent",R[R.Proportional=3]="Proportional"})(qi||(qi={}));var Zr;(function(R){R[R.Tangent=0]="Tangent",R[R.Chain=1]="Chain",R[R.ChainScale=2]="ChainScale"})(Zr||(Zr={}));var ws;let mF=(ws=class{constructor(t,c){G(this,"data");G(this,"bones");G(this,"target");G(this,"position",0);G(this,"spacing",0);G(this,"mixRotate",0);G(this,"mixX",0);G(this,"mixY",0);G(this,"spaces",new Array);G(this,"positions",new Array);G(this,"world",new Array);G(this,"curves",new Array);G(this,"lengths",new Array);G(this,"segments",new Array);G(this,"active",!1);if(!t)throw new Error("data cannot be null.");if(!c)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let x=0,b=t.bones.length;x<b;x++){let h=c.findBone(t.bones[x].name);if(!h)throw new Error(`Couldn't find bone ${t.bones[x].name}.`);this.bones.push(h)}let v=c.findSlot(t.target.name);if(!v)throw new Error(`Couldn't find target bone ${t.target.name}`);this.target=v,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}setToSetupPose(){const t=this.data;this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}update(t){let c=this.target.getAttachment();if(!(c instanceof Kh))return;let v=this.mixRotate,x=this.mixX,b=this.mixY;if(v==0&&x==0&&b==0)return;let h=this.data,w=h.rotateMode==Zr.Tangent,e=h.rotateMode==Zr.ChainScale,i=this.bones,u=i.length,n=w?u:u+1,r=ke.setArraySize(this.spaces,n),a=e?this.lengths=ke.setArraySize(this.lengths,u):[],s=this.spacing;switch(h.spacingMode){case qi.Percent:if(e)for(let y=0,S=n-1;y<S;y++){let C=i[y],A=C.data.length,M=A*C.a,L=A*C.c;a[y]=Math.sqrt(M*M+L*L)}ke.arrayFill(r,1,n,s);break;case qi.Proportional:let g=0;for(let y=0,S=n-1;y<S;){let C=i[y],A=C.data.length;if(A<ws.epsilon)e&&(a[y]=0),r[++y]=s;else{let M=A*C.a,L=A*C.c,P=Math.sqrt(M*M+L*L);e&&(a[y]=P),r[++y]=P,g+=P}}if(g>0){g=n/g*s;for(let y=1;y<n;y++)r[y]*=g}break;default:let p=h.spacingMode==qi.Length;for(let y=0,S=n-1;y<S;){let C=i[y],A=C.data.length;if(A<ws.epsilon)e&&(a[y]=0),r[++y]=s;else{let M=A*C.a,L=A*C.c,P=Math.sqrt(M*M+L*L);e&&(a[y]=P),r[++y]=(p?A+s:s)*P/A}}}let o=this.computeWorldPositions(c,n,w),d=o[0],l=o[1],f=h.offsetRotation,m=!1;if(f==0)m=h.rotateMode==Zr.Chain;else{m=!1;let g=this.target.bone;f*=g.a*g.d-g.b*g.c>0?Ue.degRad:-.01745329277777778}for(let g=0,p=3;g<u;g++,p+=3){let y=i[g];y.worldX+=(d-y.worldX)*x,y.worldY+=(l-y.worldY)*b;let S=o[p],C=o[p+1],A=S-d,M=C-l;if(e){let L=a[g];if(L!=0){let P=(Math.sqrt(A*A+M*M)/L-1)*v+1;y.a*=P,y.c*=P}}if(d=S,l=C,v>0){let L=y.a,P=y.b,O=y.c,D=y.d,I=0,F=0,H=0;if(w?I=o[p-1]:r[g+1]==0?I=o[p+2]:I=Math.atan2(M,A),I-=Math.atan2(O,L),m){F=Math.cos(I),H=Math.sin(I);let k=y.data.length;d+=(k*(F*L-H*O)-A)*v,l+=(k*(H*L+F*O)-M)*v}else I+=f;I>Ue.PI?I-=Ue.PI2:I<-3.1415927&&(I+=Ue.PI2),I*=v,F=Math.cos(I),H=Math.sin(I),y.a=F*L-H*O,y.b=F*P-H*D,y.c=H*L+F*O,y.d=H*P+F*D}y.updateAppliedTransform()}}computeWorldPositions(t,c,v){let x=this.target,b=this.position,h=this.spaces,w=ke.setArraySize(this.positions,c*3+2),e=this.world,i=t.closed,u=t.worldVerticesLength,n=u/6,r=ws.NONE;if(!t.constantSpeed){let k=t.lengths;n-=i?1:2;let W=k[n];this.data.positionMode==Xa.Percent&&(b*=W);let $;switch(this.data.spacingMode){case qi.Percent:$=W;break;case qi.Proportional:$=W/c;break;default:$=1}e=ke.setArraySize(this.world,8);for(let K=0,Z=0,X=0;K<c;K++,Z+=3){let j=h[K]*$;b+=j;let Y=b;if(i)Y%=W,Y<0&&(Y+=W),X=0;else if(Y<0){r!=ws.BEFORE&&(r=ws.BEFORE,t.computeWorldVertices(x,2,4,e,0,2)),this.addBeforePosition(Y,e,0,w,Z);continue}else if(Y>W){r!=ws.AFTER&&(r=ws.AFTER,t.computeWorldVertices(x,u-6,4,e,0,2)),this.addAfterPosition(Y-W,e,0,w,Z);continue}for(;;X++){let U=k[X];if(!(Y>U)){if(X==0)Y/=U;else{let J=k[X-1];Y=(Y-J)/(U-J)}break}}X!=r&&(r=X,i&&X==n?(t.computeWorldVertices(x,u-4,4,e,0,2),t.computeWorldVertices(x,0,4,e,4,2)):t.computeWorldVertices(x,X*6+2,8,e,0,2)),this.addCurvePosition(Y,e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],w,Z,v||K>0&&j==0)}return w}i?(u+=2,e=ke.setArraySize(this.world,u),t.computeWorldVertices(x,2,u-4,e,0,2),t.computeWorldVertices(x,0,2,e,u-4,2),e[u-2]=e[0],e[u-1]=e[1]):(n--,u-=4,e=ke.setArraySize(this.world,u),t.computeWorldVertices(x,2,u,e,0,2));let a=ke.setArraySize(this.curves,n),s=0,o=e[0],d=e[1],l=0,f=0,m=0,g=0,p=0,y=0,S=0,C=0,A=0,M=0,L=0,P=0,O=0,D=0;for(let k=0,W=2;k<n;k++,W+=6)l=e[W],f=e[W+1],m=e[W+2],g=e[W+3],p=e[W+4],y=e[W+5],S=(o-l*2+m)*.1875,C=(d-f*2+g)*.1875,A=((l-m)*3-o+p)*.09375,M=((f-g)*3-d+y)*.09375,L=S*2+A,P=C*2+M,O=(l-o)*.75+S+A*.16666667,D=(f-d)*.75+C+M*.16666667,s+=Math.sqrt(O*O+D*D),O+=L,D+=P,L+=A,P+=M,s+=Math.sqrt(O*O+D*D),O+=L,D+=P,s+=Math.sqrt(O*O+D*D),O+=L+A,D+=P+M,s+=Math.sqrt(O*O+D*D),a[k]=s,o=p,d=y;this.data.positionMode==Xa.Percent&&(b*=s);let I;switch(this.data.spacingMode){case qi.Percent:I=s;break;case qi.Proportional:I=s/c;break;default:I=1}let F=this.segments,H=0;for(let k=0,W=0,$=0,K=0;k<c;k++,W+=3){let Z=h[k]*I;b+=Z;let X=b;if(i)X%=s,X<0&&(X+=s),$=0;else if(X<0){this.addBeforePosition(X,e,0,w,W);continue}else if(X>s){this.addAfterPosition(X-s,e,u-4,w,W);continue}for(;;$++){let j=a[$];if(!(X>j)){if($==0)X/=j;else{let Y=a[$-1];X=(X-Y)/(j-Y)}break}}if($!=r){r=$;let j=$*6;for(o=e[j],d=e[j+1],l=e[j+2],f=e[j+3],m=e[j+4],g=e[j+5],p=e[j+6],y=e[j+7],S=(o-l*2+m)*.03,C=(d-f*2+g)*.03,A=((l-m)*3-o+p)*.006,M=((f-g)*3-d+y)*.006,L=S*2+A,P=C*2+M,O=(l-o)*.3+S+A*.16666667,D=(f-d)*.3+C+M*.16666667,H=Math.sqrt(O*O+D*D),F[0]=H,j=1;j<8;j++)O+=L,D+=P,L+=A,P+=M,H+=Math.sqrt(O*O+D*D),F[j]=H;O+=L,D+=P,H+=Math.sqrt(O*O+D*D),F[8]=H,O+=L+A,D+=P+M,H+=Math.sqrt(O*O+D*D),F[9]=H,K=0}for(X*=H;;K++){let j=F[K];if(!(X>j)){if(K==0)X/=j;else{let Y=F[K-1];X=K+(X-Y)/(j-Y)}break}}this.addCurvePosition(X*.1,o,d,l,f,m,g,p,y,w,W,v||k>0&&Z==0)}return w}addBeforePosition(t,c,v,x,b){let h=c[v],w=c[v+1],e=c[v+2]-h,i=c[v+3]-w,u=Math.atan2(i,e);x[b]=h+t*Math.cos(u),x[b+1]=w+t*Math.sin(u),x[b+2]=u}addAfterPosition(t,c,v,x,b){let h=c[v+2],w=c[v+3],e=h-c[v],i=w-c[v+1],u=Math.atan2(i,e);x[b]=h+t*Math.cos(u),x[b+1]=w+t*Math.sin(u),x[b+2]=u}addCurvePosition(t,c,v,x,b,h,w,e,i,u,n,r){if(t==0||isNaN(t)){u[n]=c,u[n+1]=v,u[n+2]=Math.atan2(b-v,x-c);return}let a=t*t,s=a*t,o=1-t,d=o*o,l=d*o,f=o*t,m=f*3,g=o*m,p=m*t,y=c*l+x*g+h*p+e*s,S=v*l+b*g+w*p+i*s;u[n]=y,u[n+1]=S,r&&(t<.001?u[n+2]=Math.atan2(b-v,x-c):u[n+2]=Math.atan2(S-(v*d+b*f*2+w*a),y-(c*d+x*f*2+h*a)))}},G(ws,"NONE",-1),G(ws,"BEFORE",-2),G(ws,"AFTER",-3),G(ws,"epsilon",1e-5),ws),gF=class{constructor(t,c){G(this,"data");G(this,"_bone",null);G(this,"inertia",0);G(this,"strength",0);G(this,"damping",0);G(this,"massInverse",0);G(this,"wind",0);G(this,"gravity",0);G(this,"mix",0);G(this,"_reset",!0);G(this,"ux",0);G(this,"uy",0);G(this,"cx",0);G(this,"cy",0);G(this,"tx",0);G(this,"ty",0);G(this,"xOffset",0);G(this,"xVelocity",0);G(this,"yOffset",0);G(this,"yVelocity",0);G(this,"rotateOffset",0);G(this,"rotateVelocity",0);G(this,"scaleOffset",0);G(this,"scaleVelocity",0);G(this,"active",!1);G(this,"skeleton");G(this,"remaining",0);G(this,"lastTime",0);this.data=t,this.skeleton=c,this.bone=c.bones[t.bone.index],this.inertia=t.inertia,this.strength=t.strength,this.damping=t.damping,this.massInverse=t.massInverse,this.wind=t.wind,this.gravity=t.gravity,this.mix=t.mix}set bone(t){this._bone=t}get bone(){if(this._bone)return this._bone;throw new Error("Bone not set.")}reset(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=!0,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0}setToSetupPose(){const t=this.data;this.inertia=t.inertia,this.strength=t.strength,this.damping=t.damping,this.massInverse=t.massInverse,this.wind=t.wind,this.gravity=t.gravity,this.mix=t.mix}isActive(){return this.active}update(t){const c=this.mix;if(c==0)return;const v=this.data.x>0,x=this.data.y>0,b=this.data.rotate>0||this.data.shearX>0,h=this.data.scaleX>0,w=this.bone,e=w.data.length;switch(t){case Ta.none:return;case Ta.reset:this.reset();case Ta.update:const i=this.skeleton,u=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=u,this.lastTime=i.time;const n=w.worldX,r=w.worldY;if(this._reset)this._reset=!1,this.ux=n,this.uy=r;else{let a=this.remaining,s=this.inertia,o=this.data.step,d=this.skeleton.data.referenceScale,l=-1,f=this.data.limit*u,m=f*Math.abs(i.scaleY);if(f*=Math.abs(i.scaleX),v||x){if(v){const g=(this.ux-n)*s;this.xOffset+=g>f?f:g<-f?-f:g,this.ux=n}if(x){const g=(this.uy-r)*s;this.yOffset+=g>m?m:g<-m?-m:g,this.uy=r}if(a>=o){l=Math.pow(this.damping,60*o);const g=this.massInverse*o,p=this.strength,y=this.wind*d,S=($h.yDown?-this.gravity:this.gravity)*d;do v&&(this.xVelocity+=(y-this.xOffset*p)*g,this.xOffset+=this.xVelocity*o,this.xVelocity*=l),x&&(this.yVelocity-=(S+this.yOffset*p)*g,this.yOffset+=this.yVelocity*o,this.yVelocity*=l),a-=o;while(a>=o)}v&&(w.worldX+=this.xOffset*c*this.data.x),x&&(w.worldY+=this.yOffset*c*this.data.y)}if(b||h){let g=Math.atan2(w.c,w.a),p=0,y=0,S=0,C=this.cx-w.worldX,A=this.cy-w.worldY;if(C>f?C=f:C<-f&&(C=-f),A>m?A=m:A<-m&&(A=-m),b){S=(this.data.rotate+this.data.shearX)*c;let M=Math.atan2(A+this.ty,C+this.tx)-g-this.rotateOffset*S;this.rotateOffset+=(M-Math.ceil(M*Ue.invPI2-.5)*Ue.PI2)*s,M=this.rotateOffset*S+g,p=Math.cos(M),y=Math.sin(M),h&&(M=e*w.getWorldScaleX(),M>0&&(this.scaleOffset+=(C*p+A*y)*s/M))}else{p=Math.cos(g),y=Math.sin(g);const M=e*w.getWorldScaleX();M>0&&(this.scaleOffset+=(C*p+A*y)*s/M)}if(a=this.remaining,a>=o){l==-1&&(l=Math.pow(this.damping,60*o));const M=this.massInverse*o,L=this.strength,P=this.wind,O=$h.yDown?-this.gravity:this.gravity,D=e/d;for(;;)if(a-=o,h&&(this.scaleVelocity+=(P*p-O*y-this.scaleOffset*L)*M,this.scaleOffset+=this.scaleVelocity*o,this.scaleVelocity*=l),b){if(this.rotateVelocity-=((P*y+O*p)*D+this.rotateOffset*L)*M,this.rotateOffset+=this.rotateVelocity*o,this.rotateVelocity*=l,a<o)break;const I=this.rotateOffset*S+g;p=Math.cos(I),y=Math.sin(I)}else if(a<o)break}}this.remaining=a}this.cx=w.worldX,this.cy=w.worldY;break;case Ta.pose:v&&(w.worldX+=this.xOffset*c*this.data.x),x&&(w.worldY+=this.yOffset*c*this.data.y)}if(b){let i=this.rotateOffset*c,u=0,n=0,r=0;if(this.data.shearX>0){let a=0;this.data.rotate>0&&(a=i*this.data.rotate,u=Math.sin(a),n=Math.cos(a),r=w.b,w.b=n*r-u*w.d,w.d=u*r+n*w.d),a+=i*this.data.shearX,u=Math.sin(a),n=Math.cos(a),r=w.a,w.a=n*r-u*w.c,w.c=u*r+n*w.c}else i*=this.data.rotate,u=Math.sin(i),n=Math.cos(i),r=w.a,w.a=n*r-u*w.c,w.c=u*r+n*w.c,r=w.b,w.b=n*r-u*w.d,w.d=u*r+n*w.d}if(h){const i=1+this.scaleOffset*c*this.data.scaleX;w.a*=i,w.c*=i}t!=Ta.pose&&(this.tx=e*w.a,this.ty=e*w.c),w.updateAppliedTransform()}translate(t,c){this.ux-=t,this.uy-=c,this.cx-=t,this.cy-=c}rotate(t,c,v){const x=v*Ue.degRad,b=Math.cos(x),h=Math.sin(x),w=this.cx-t,e=this.cy-c;this.translate(w*b-e*h-w,w*h+e*b-e)}},pF=class{constructor(t,c){G(this,"data");G(this,"bone");G(this,"color");G(this,"darkColor",null);G(this,"attachment",null);G(this,"attachmentState",0);G(this,"sequenceIndex",-1);G(this,"deform",new Array);if(!t)throw new Error("data cannot be null.");if(!c)throw new Error("bone cannot be null.");this.data=t,this.bone=c,this.color=new Rt,this.darkColor=t.darkColor?new Rt:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&((!(t instanceof Ln)||!(this.attachment instanceof Ln)||t.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}},vF=class{constructor(t,c){G(this,"data");G(this,"bones");G(this,"target");G(this,"mixRotate",0);G(this,"mixX",0);G(this,"mixY",0);G(this,"mixScaleX",0);G(this,"mixScaleY",0);G(this,"mixShearY",0);G(this,"temp",new yl);G(this,"active",!1);if(!t)throw new Error("data cannot be null.");if(!c)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let x=0;x<t.bones.length;x++){let b=c.findBone(t.bones[x].name);if(!b)throw new Error(`Couldn't find bone ${t.bones[x].name}.`);this.bones.push(b)}let v=c.findBone(t.target.name);if(!v)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=v,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY}isActive(){return this.active}setToSetupPose(){const t=this.data;this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY}update(t){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleY==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,c=this.mixX,v=this.mixY,x=this.mixScaleX,b=this.mixScaleY,h=this.mixShearY,w=c!=0||v!=0,e=this.target,i=e.a,u=e.b,n=e.c,r=e.d,a=i*r-u*n>0?Ue.degRad:-.01745329277777778,s=this.data.offsetRotation*a,o=this.data.offsetShearY*a,d=this.bones;for(let l=0,f=d.length;l<f;l++){let m=d[l];if(t!=0){let g=m.a,p=m.b,y=m.c,S=m.d,C=Math.atan2(n,i)-Math.atan2(y,g)+s;C>Ue.PI?C-=Ue.PI2:C<-3.1415927&&(C+=Ue.PI2),C*=t;let A=Math.cos(C),M=Math.sin(C);m.a=A*g-M*y,m.b=A*p-M*S,m.c=M*g+A*y,m.d=M*p+A*S}if(w){let g=this.temp;e.localToWorld(g.set(this.data.offsetX,this.data.offsetY)),m.worldX+=(g.x-m.worldX)*c,m.worldY+=(g.y-m.worldY)*v}if(x!=0){let g=Math.sqrt(m.a*m.a+m.c*m.c);g!=0&&(g=(g+(Math.sqrt(i*i+n*n)-g+this.data.offsetScaleX)*x)/g),m.a*=g,m.c*=g}if(b!=0){let g=Math.sqrt(m.b*m.b+m.d*m.d);g!=0&&(g=(g+(Math.sqrt(u*u+r*r)-g+this.data.offsetScaleY)*b)/g),m.b*=g,m.d*=g}if(h>0){let g=m.b,p=m.d,y=Math.atan2(p,g),S=Math.atan2(r,u)-Math.atan2(n,i)-(y-Math.atan2(m.c,m.a));S>Ue.PI?S-=Ue.PI2:S<-3.1415927&&(S+=Ue.PI2),S=y+(S+o)*h;let C=Math.sqrt(g*g+p*p);m.b=Math.cos(S)*C,m.d=Math.sin(S)*C}m.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,c=this.mixX,v=this.mixY,x=this.mixScaleX,b=this.mixScaleY,h=this.mixShearY,w=c!=0||v!=0,e=this.target,i=e.a,u=e.b,n=e.c,r=e.d,a=i*r-u*n>0?Ue.degRad:-.01745329277777778,s=this.data.offsetRotation*a,o=this.data.offsetShearY*a,d=this.bones;for(let l=0,f=d.length;l<f;l++){let m=d[l];if(t!=0){let g=m.a,p=m.b,y=m.c,S=m.d,C=Math.atan2(n,i)+s;C>Ue.PI?C-=Ue.PI2:C<-3.1415927&&(C+=Ue.PI2),C*=t;let A=Math.cos(C),M=Math.sin(C);m.a=A*g-M*y,m.b=A*p-M*S,m.c=M*g+A*y,m.d=M*p+A*S}if(w){let g=this.temp;e.localToWorld(g.set(this.data.offsetX,this.data.offsetY)),m.worldX+=g.x*c,m.worldY+=g.y*v}if(x!=0){let g=(Math.sqrt(i*i+n*n)-1+this.data.offsetScaleX)*x+1;m.a*=g,m.c*=g}if(b!=0){let g=(Math.sqrt(u*u+r*r)-1+this.data.offsetScaleY)*b+1;m.b*=g,m.d*=g}if(h>0){let g=Math.atan2(r,u)-Math.atan2(n,i);g>Ue.PI?g-=Ue.PI2:g<-3.1415927&&(g+=Ue.PI2);let p=m.b,y=m.d;g=Math.atan2(y,p)+(g-Ue.PI/2+o)*h;let S=Math.sqrt(p*p+y*y);m.b=Math.cos(g)*S,m.d=Math.sin(g)*S}m.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,c=this.mixX,v=this.mixY,x=this.mixScaleX,b=this.mixScaleY,h=this.mixShearY,w=this.target,e=this.bones;for(let i=0,u=e.length;i<u;i++){let n=e[i],r=n.arotation;t!=0&&(r+=(w.arotation-r+this.data.offsetRotation)*t);let a=n.ax,s=n.ay;a+=(w.ax-a+this.data.offsetX)*c,s+=(w.ay-s+this.data.offsetY)*v;let o=n.ascaleX,d=n.ascaleY;x!=0&&o!=0&&(o=(o+(w.ascaleX-o+this.data.offsetScaleX)*x)/o),b!=0&&d!=0&&(d=(d+(w.ascaleY-d+this.data.offsetScaleY)*b)/d);let l=n.ashearY;h!=0&&(l+=(w.ashearY-l+this.data.offsetShearY)*h),n.updateWorldTransformWith(a,s,r,o,d,n.ashearX,l)}}applyRelativeLocal(){let t=this.mixRotate,c=this.mixX,v=this.mixY,x=this.mixScaleX,b=this.mixScaleY,h=this.mixShearY,w=this.target,e=this.bones;for(let i=0,u=e.length;i<u;i++){let n=e[i],r=n.arotation+(w.arotation+this.data.offsetRotation)*t,a=n.ax+(w.ax+this.data.offsetX)*c,s=n.ay+(w.ay+this.data.offsetY)*v,o=n.ascaleX*((w.ascaleX-1+this.data.offsetScaleX)*x+1),d=n.ascaleY*((w.ascaleY-1+this.data.offsetScaleY)*b+1),l=n.ashearY+(w.ashearY+this.data.offsetShearY)*h;n.updateWorldTransformWith(a,s,r,o,d,n.ashearX,l)}}};var wn;let $h=(wn=class{constructor(t){G(this,"data");G(this,"bones");G(this,"slots");G(this,"drawOrder");G(this,"ikConstraints");G(this,"transformConstraints");G(this,"pathConstraints");G(this,"physicsConstraints");G(this,"_updateCache",new Array);G(this,"skin",null);G(this,"color");G(this,"scaleX",1);G(this,"_scaleY",1);G(this,"x",0);G(this,"y",0);G(this,"time",0);if(!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let c=0;c<t.bones.length;c++){let v=t.bones[c],x;if(!v.parent)x=new T1(v,this,null);else{let b=this.bones[v.parent.index];x=new T1(v,this,b),b.children.push(x)}this.bones.push(x)}this.slots=new Array,this.drawOrder=new Array;for(let c=0;c<t.slots.length;c++){let v=t.slots[c],x=this.bones[v.boneData.index],b=new pF(v,x);this.slots.push(b),this.drawOrder.push(b)}this.ikConstraints=new Array;for(let c=0;c<t.ikConstraints.length;c++){let v=t.ikConstraints[c];this.ikConstraints.push(new fF(v,this))}this.transformConstraints=new Array;for(let c=0;c<t.transformConstraints.length;c++){let v=t.transformConstraints[c];this.transformConstraints.push(new vF(v,this))}this.pathConstraints=new Array;for(let c=0;c<t.pathConstraints.length;c++){let v=t.pathConstraints[c];this.pathConstraints.push(new mF(v,this))}this.physicsConstraints=new Array;for(let c=0;c<t.physicsConstraints.length;c++){let v=t.physicsConstraints[c];this.physicsConstraints.push(new gF(v,this))}this.color=new Rt(1,1,1,1),this.updateCache()}get scaleY(){return wn.yDown?-this._scaleY:this._scaleY}set scaleY(t){this._scaleY=t}updateCache(){let t=this._updateCache;t.length=0;let c=this.bones;for(let r=0,a=c.length;r<a;r++){let s=c[r];s.sorted=s.data.skinRequired,s.active=!s.sorted}if(this.skin){let r=this.skin.bones;for(let a=0,s=this.skin.bones.length;a<s;a++){let o=this.bones[r[a].index];do o.sorted=!1,o.active=!0,o=o.parent;while(o)}}let v=this.ikConstraints,x=this.transformConstraints,b=this.pathConstraints,h=this.physicsConstraints,w=v.length,e=x.length,i=b.length,u=this.physicsConstraints.length,n=w+e+i+u;e:for(let r=0;r<n;r++){for(let a=0;a<w;a++){let s=v[a];if(s.data.order==r){this.sortIkConstraint(s);continue e}}for(let a=0;a<e;a++){let s=x[a];if(s.data.order==r){this.sortTransformConstraint(s);continue e}}for(let a=0;a<i;a++){let s=b[a];if(s.data.order==r){this.sortPathConstraint(s);continue e}}for(let a=0;a<u;a++){const s=h[a];if(s.data.order==r){this.sortPhysicsConstraint(s);continue e}}}for(let r=0,a=c.length;r<a;r++)this.sortBone(c[r])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&ke.contains(this.skin.constraints,t.data,!0)),!t.active)return;let c=t.target;this.sortBone(c);let v=t.bones,x=v[0];if(this.sortBone(x),v.length==1)this._updateCache.push(t),this.sortReset(x.children);else{let b=v[v.length-1];this.sortBone(b),this._updateCache.push(t),this.sortReset(x.children),b.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&ke.contains(this.skin.constraints,t.data,!0)),!t.active)return;let c=t.target,v=c.data.index,x=c.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,v,x),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,v,x);for(let e=0,i=this.data.skins.length;e<i;e++)this.sortPathConstraintAttachment(this.data.skins[e],v,x);let b=c.getAttachment();b instanceof Kh&&this.sortPathConstraintAttachmentWith(b,x);let h=t.bones,w=h.length;for(let e=0;e<w;e++)this.sortBone(h[e]);this._updateCache.push(t);for(let e=0;e<w;e++)this.sortReset(h[e].children);for(let e=0;e<w;e++)h[e].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&ke.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let c=t.bones,v=c.length;if(t.data.local)for(let x=0;x<v;x++){let b=c[x];this.sortBone(b.parent),this.sortBone(b)}else for(let x=0;x<v;x++)this.sortBone(c[x]);this._updateCache.push(t);for(let x=0;x<v;x++)this.sortReset(c[x].children);for(let x=0;x<v;x++)c[x].sorted=!0}sortPathConstraintAttachment(t,c,v){let x=t.attachments[c];if(x)for(let b in x)this.sortPathConstraintAttachmentWith(x[b],v)}sortPathConstraintAttachmentWith(t,c){if(!(t instanceof Kh))return;let v=t.bones;if(!v)this.sortBone(c);else{let x=this.bones;for(let b=0,h=v.length;b<h;){let w=v[b++];for(w+=b;b<w;)this.sortBone(x[v[b++]])}}}sortPhysicsConstraint(t){const c=t.bone;t.active=c.active&&(!t.data.skinRequired||this.skin!=null&&ke.contains(this.skin.constraints,t.data,!0)),t.active&&(this.sortBone(c),this._updateCache.push(t),this.sortReset(c.children),c.sorted=!0)}sortBone(t){if(!t||t.sorted)return;let c=t.parent;c&&this.sortBone(c),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let c=0,v=t.length;c<v;c++){let x=t[c];x.active&&(x.sorted&&this.sortReset(x.children),x.sorted=!1)}}updateWorldTransform(t){if(t==null)throw new Error("physics is undefined");let c=this.bones;for(let x=0,b=c.length;x<b;x++){let h=c[x];h.ax=h.x,h.ay=h.y,h.arotation=h.rotation,h.ascaleX=h.scaleX,h.ascaleY=h.scaleY,h.ashearX=h.shearX,h.ashearY=h.shearY}let v=this._updateCache;for(let x=0,b=v.length;x<b;x++)v[x].update(t)}updateWorldTransformWith(t,c){let v=this.getRootBone();if(!v)throw new Error("Root bone must not be null.");let x=c.a,b=c.b,h=c.c,w=c.d;v.worldX=x*this.x+b*this.y+c.worldX,v.worldY=h*this.x+w*this.y+c.worldY;const e=(v.rotation+v.shearX)*Ue.degRad,i=(v.rotation+90+v.shearY)*Ue.degRad,u=Math.cos(e)*v.scaleX,n=Math.cos(i)*v.scaleY,r=Math.sin(e)*v.scaleX,a=Math.sin(i)*v.scaleY;v.a=(x*u+b*r)*this.scaleX,v.b=(x*n+b*a)*this.scaleX,v.c=(h*u+w*r)*this.scaleY,v.d=(h*n+w*a)*this.scaleY;let s=this._updateCache;for(let o=0,d=s.length;o<d;o++){let l=s[o];l!=v&&l.update(t)}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){for(const t of this.bones)t.setToSetupPose();for(const t of this.ikConstraints)t.setToSetupPose();for(const t of this.transformConstraints)t.setToSetupPose();for(const t of this.pathConstraints)t.setToSetupPose();for(const t of this.physicsConstraints)t.setToSetupPose()}setSlotsToSetupPose(){let t=this.slots;ke.arrayCopy(t,0,this.drawOrder,0,t.length);for(let c=0,v=t.length;c<v;c++)t[c].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let c=this.bones;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.data.name==t)return b}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let c=this.slots;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.data.name==t)return b}return null}setSkinByName(t){let c=this.data.findSkin(t);if(!c)throw new Error("Skin not found: "+t);this.setSkin(c)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{let c=this.slots;for(let v=0,x=c.length;v<x;v++){let b=c[v],h=b.data.attachmentName;if(h){let w=t.getAttachment(v,h);w&&b.setAttachment(w)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,c){let v=this.data.findSlot(t);if(!v)throw new Error(`Can't find slot with name ${t}`);return this.getAttachment(v.index,c)}getAttachment(t,c){if(!c)throw new Error("attachmentName cannot be null.");if(this.skin){let v=this.skin.getAttachment(t,c);if(v)return v}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,c):null}setAttachment(t,c){if(!t)throw new Error("slotName cannot be null.");let v=this.slots;for(let x=0,b=v.length;x<b;x++){let h=v[x];if(h.data.name==t){let w=null;if(c&&(w=this.getAttachment(x,c),!w))throw new Error("Attachment not found: "+c+", for slot: "+t);h.setAttachment(w);return}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");return this.ikConstraints.find(c=>c.data.name==t)??null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");return this.transformConstraints.find(c=>c.data.name==t)??null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");return this.pathConstraints.find(c=>c.data.name==t)??null}findPhysicsConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");return this.physicsConstraints.find(c=>c.data.name==t)??null}getBoundsRect(){let t=new yl,c=new yl;return this.getBounds(t,c),{x:t.x,y:t.y,width:c.x,height:c.y}}getBounds(t,c,v=new Array(2),x=null){if(!t)throw new Error("offset cannot be null.");if(!c)throw new Error("size cannot be null.");let b=this.drawOrder,h=Number.POSITIVE_INFINITY,w=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(let u=0,n=b.length;u<n;u++){let r=b[u];if(!r.bone.active)continue;let a=0,s=null,o=null,d=r.getAttachment();if(d instanceof gi)a=8,s=ke.setArraySize(v,a,0),d.computeWorldVertices(r,s,0,2),o=wn.quadTriangles;else if(d instanceof Ml){let l=d;a=l.worldVerticesLength,s=ke.setArraySize(v,a,0),l.computeWorldVertices(r,0,a,s,0,2),o=l.triangles}else if(d instanceof bc&&x!=null){x.clipStart(r,d);continue}if(s&&o){x!=null&&x.isClipping()&&(x.clipTriangles(s,o,o.length),s=x.clippedVertices,a=x.clippedVertices.length);for(let l=0,f=s.length;l<f;l+=2){let m=s[l],g=s[l+1];h=Math.min(h,m),w=Math.min(w,g),e=Math.max(e,m),i=Math.max(i,g)}}x!=null&&x.clipEndWithSlot(r)}x!=null&&x.clipEnd(),t.set(h,w),c.set(e-h,i-w)}update(t){this.time+=t}physicsTranslate(t,c){const v=this.physicsConstraints;for(let x=0,b=v.length;x<b;x++)v[x].translate(t,c)}physicsRotate(t,c,v){const x=this.physicsConstraints;for(let b=0,h=x.length;b<h;b++)x[b].rotate(t,c,v)}},G(wn,"quadTriangles",[0,1,2,2,3,0]),G(wn,"yDown",!1),wn);var Ta;(function(R){R[R.none=0]="none",R[R.reset=1]="reset",R[R.update=2]="update",R[R.pose=3]="pose"})(Ta||(Ta={}));let kS=class extends Ec{constructor(c){super(c,0,!1);G(this,"_bone",null);G(this,"x",0);G(this,"y",0);G(this,"rotate",0);G(this,"scaleX",0);G(this,"shearX",0);G(this,"limit",0);G(this,"step",0);G(this,"inertia",0);G(this,"strength",0);G(this,"damping",0);G(this,"massInverse",0);G(this,"wind",0);G(this,"gravity",0);G(this,"mix",0);G(this,"inertiaGlobal",!1);G(this,"strengthGlobal",!1);G(this,"dampingGlobal",!1);G(this,"massGlobal",!1);G(this,"windGlobal",!1);G(this,"gravityGlobal",!1);G(this,"mixGlobal",!1)}set bone(c){this._bone=c}get bone(){if(this._bone)return this._bone;throw new Error("BoneData not set.")}},US=class{constructor(){G(this,"name",null);G(this,"bones",new Array);G(this,"slots",new Array);G(this,"skins",new Array);G(this,"defaultSkin",null);G(this,"events",new Array);G(this,"animations",new Array);G(this,"ikConstraints",new Array);G(this,"transformConstraints",new Array);G(this,"pathConstraints",new Array);G(this,"physicsConstraints",new Array);G(this,"x",0);G(this,"y",0);G(this,"width",0);G(this,"height",0);G(this,"referenceScale",100);G(this,"version",null);G(this,"hash",null);G(this,"fps",0);G(this,"imagesPath",null);G(this,"audioPath",null)}findBone(t){if(!t)throw new Error("boneName cannot be null.");let c=this.bones;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.name==t)return b}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let c=this.slots;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.name==t)return b}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let c=this.skins;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.name==t)return b}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let c=this.events;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.name==t)return b}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let c=this.animations;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.name==t)return b}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const c=this.ikConstraints;for(let v=0,x=c.length;v<x;v++){const b=c[v];if(b.name==t)return b}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const c=this.transformConstraints;for(let v=0,x=c.length;v<x;v++){const b=c[v];if(b.name==t)return b}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const c=this.pathConstraints;for(let v=0,x=c.length;v<x;v++){const b=c[v];if(b.name==t)return b}return null}findPhysicsConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const c=this.physicsConstraints;for(let v=0,x=c.length;v<x;v++){const b=c[v];if(b.name==t)return b}return null}},C1=class{constructor(t=0,c,v){G(this,"slotIndex");G(this,"name");G(this,"attachment");this.slotIndex=t,this.name=c,this.attachment=v}},Ig=class{constructor(t){G(this,"name");G(this,"attachments",new Array);G(this,"bones",Array());G(this,"constraints",new Array);G(this,"color",new Rt(.99607843,.61960787,.30980393,1));if(!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,c,v){if(!v)throw new Error("attachment cannot be null.");let x=this.attachments;t>=x.length&&(x.length=t+1),x[t]||(x[t]={}),x[t][c]=v}addSkin(t){for(let x=0;x<t.bones.length;x++){let b=t.bones[x],h=!1;for(let w=0;w<this.bones.length;w++)if(this.bones[w]==b){h=!0;break}h||this.bones.push(b)}for(let x=0;x<t.constraints.length;x++){let b=t.constraints[x],h=!1;for(let w=0;w<this.constraints.length;w++)if(this.constraints[w]==b){h=!0;break}h||this.constraints.push(b)}let c=t.getAttachments();for(let x=0;x<c.length;x++){var v=c[x];this.setAttachment(v.slotIndex,v.name,v.attachment)}}copySkin(t){for(let x=0;x<t.bones.length;x++){let b=t.bones[x],h=!1;for(let w=0;w<this.bones.length;w++)if(this.bones[w]==b){h=!0;break}h||this.bones.push(b)}for(let x=0;x<t.constraints.length;x++){let b=t.constraints[x],h=!1;for(let w=0;w<this.constraints.length;w++)if(this.constraints[w]==b){h=!0;break}h||this.constraints.push(b)}let c=t.getAttachments();for(let x=0;x<c.length;x++){var v=c[x];v.attachment&&(v.attachment instanceof Ml?(v.attachment=v.attachment.newLinkedMesh(),this.setAttachment(v.slotIndex,v.name,v.attachment)):(v.attachment=v.attachment.copy(),this.setAttachment(v.slotIndex,v.name,v.attachment)))}}getAttachment(t,c){let v=this.attachments[t];return v?v[c]:null}removeAttachment(t,c){let v=this.attachments[t];v&&delete v[c]}getAttachments(){let t=new Array;for(var c=0;c<this.attachments.length;c++){let v=this.attachments[c];if(v)for(let x in v){let b=v[x];b&&t.push(new C1(c,x,b))}}return t}getAttachmentsForSlot(t,c){let v=this.attachments[t];if(v)for(let x in v){let b=v[x];b&&c.push(new C1(t,x,b))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,c){let v=0;for(let x=0;x<t.slots.length;x++){let b=t.slots[x],h=b.getAttachment();if(h&&v<c.attachments.length){let w=c.attachments[v];for(let e in w){let i=w[e];if(h==i){let u=this.getAttachment(v,e);u&&b.setAttachment(u);break}}}v++}}},VS=class{constructor(t,c,v){G(this,"index",0);G(this,"name");G(this,"boneData");G(this,"color",new Rt(1,1,1,1));G(this,"darkColor",null);G(this,"attachmentName",null);G(this,"blendMode",ec.Normal);G(this,"visible",!0);if(t<0)throw new Error("index must be >= 0.");if(!c)throw new Error("name cannot be null.");if(!v)throw new Error("boneData cannot be null.");this.index=t,this.name=c,this.boneData=v}};var ec;(function(R){R[R.Normal=0]="Normal",R[R.Additive=1]="Additive",R[R.Multiply=2]="Multiply",R[R.Screen=3]="Screen"})(ec||(ec={}));let YS=class extends Ec{constructor(c){super(c,0,!1);G(this,"bones",new Array);G(this,"_target",null);G(this,"mixRotate",0);G(this,"mixX",0);G(this,"mixY",0);G(this,"mixScaleX",0);G(this,"mixScaleY",0);G(this,"mixShearY",0);G(this,"offsetRotation",0);G(this,"offsetX",0);G(this,"offsetY",0);G(this,"offsetScaleX",0);G(this,"offsetScaleY",0);G(this,"offsetShearY",0);G(this,"relative",!1);G(this,"local",!1)}set target(c){this._target=c}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}},yF=class{constructor(t){G(this,"scale",1);G(this,"attachmentLoader");G(this,"linkedMeshes",new Array);this.attachmentLoader=t}readSkeletonData(t){let c=this.scale,v=new US;v.name="";let x=new xF(t),b=x.readInt32(),h=x.readInt32();v.hash=h==0&&b==0?null:h.toString(16)+b.toString(16),v.version=x.readString(),v.x=x.readFloat(),v.y=x.readFloat(),v.width=x.readFloat(),v.height=x.readFloat(),v.referenceScale=x.readFloat()*c;let w=x.readBoolean();w&&(v.fps=x.readFloat(),v.imagesPath=x.readString(),v.audioPath=x.readString());let e=0;e=x.readInt(!0);for(let u=0;u<e;u++){let n=x.readString();if(!n)throw new Error("String in string table must not be null.");x.strings.push(n)}e=x.readInt(!0);for(let u=0;u<e;u++){let n=x.readString();if(!n)throw new Error("Bone name must not be null.");let r=u==0?null:v.bones[x.readInt(!0)],a=new IS(u,n,r);a.rotation=x.readFloat(),a.x=x.readFloat()*c,a.y=x.readFloat()*c,a.scaleX=x.readFloat(),a.scaleY=x.readFloat(),a.shearX=x.readFloat(),a.shearY=x.readFloat(),a.length=x.readFloat()*c,a.inherit=x.readByte(),a.skinRequired=x.readBoolean(),w&&(Rt.rgba8888ToColor(a.color,x.readInt32()),a.icon=x.readString()??void 0,a.visible=x.readBoolean()),v.bones.push(a)}e=x.readInt(!0);for(let u=0;u<e;u++){let n=x.readString();if(!n)throw new Error("Slot name must not be null.");let r=v.bones[x.readInt(!0)],a=new VS(u,n,r);Rt.rgba8888ToColor(a.color,x.readInt32());let s=x.readInt32();s!=-1&&Rt.rgb888ToColor(a.darkColor=new Rt,s),a.attachmentName=x.readStringRef(),a.blendMode=x.readInt(!0),w&&(a.visible=x.readBoolean()),v.slots.push(a)}e=x.readInt(!0);for(let u=0,n;u<e;u++){let r=x.readString();if(!r)throw new Error("IK constraint data name must not be null.");let a=new GS(r);a.order=x.readInt(!0),n=x.readInt(!0);for(let o=0;o<n;o++)a.bones.push(v.bones[x.readInt(!0)]);a.target=v.bones[x.readInt(!0)];let s=x.readByte();a.skinRequired=(s&1)!=0,a.bendDirection=s&2?1:-1,a.compress=(s&4)!=0,a.stretch=(s&8)!=0,a.uniform=(s&16)!=0,s&32&&(a.mix=s&64?x.readFloat():1),s&128&&(a.softness=x.readFloat()*c),v.ikConstraints.push(a)}e=x.readInt(!0);for(let u=0,n;u<e;u++){let r=x.readString();if(!r)throw new Error("Transform constraint data name must not be null.");let a=new YS(r);a.order=x.readInt(!0),n=x.readInt(!0);for(let o=0;o<n;o++)a.bones.push(v.bones[x.readInt(!0)]);a.target=v.bones[x.readInt(!0)];let s=x.readByte();a.skinRequired=(s&1)!=0,a.local=(s&2)!=0,a.relative=(s&4)!=0,s&8&&(a.offsetRotation=x.readFloat()),s&16&&(a.offsetX=x.readFloat()*c),s&32&&(a.offsetY=x.readFloat()*c),s&64&&(a.offsetScaleX=x.readFloat()),s&128&&(a.offsetScaleY=x.readFloat()),s=x.readByte(),s&1&&(a.offsetShearY=x.readFloat()),s&2&&(a.mixRotate=x.readFloat()),s&4&&(a.mixX=x.readFloat()),s&8&&(a.mixY=x.readFloat()),s&16&&(a.mixScaleX=x.readFloat()),s&32&&(a.mixScaleY=x.readFloat()),s&64&&(a.mixShearY=x.readFloat()),v.transformConstraints.push(a)}e=x.readInt(!0);for(let u=0,n;u<e;u++){let r=x.readString();if(!r)throw new Error("Path constraint data name must not be null.");let a=new HS(r);a.order=x.readInt(!0),a.skinRequired=x.readBoolean(),n=x.readInt(!0);for(let o=0;o<n;o++)a.bones.push(v.bones[x.readInt(!0)]);a.target=v.slots[x.readInt(!0)];const s=x.readByte();a.positionMode=s&1,a.spacingMode=s>>1&3,a.rotateMode=s>>3&3,s&128&&(a.offsetRotation=x.readFloat()),a.position=x.readFloat(),a.positionMode==Xa.Fixed&&(a.position*=c),a.spacing=x.readFloat(),(a.spacingMode==qi.Length||a.spacingMode==qi.Fixed)&&(a.spacing*=c),a.mixRotate=x.readFloat(),a.mixX=x.readFloat(),a.mixY=x.readFloat(),v.pathConstraints.push(a)}e=x.readInt(!0);for(let u=0,n;u<e;u++){const r=x.readString();if(!r)throw new Error("Physics constraint data name must not be null.");const a=new kS(r);a.order=x.readInt(!0),a.bone=v.bones[x.readInt(!0)];let s=x.readByte();a.skinRequired=(s&1)!=0,s&2&&(a.x=x.readFloat()),s&4&&(a.y=x.readFloat()),s&8&&(a.rotate=x.readFloat()),s&16&&(a.scaleX=x.readFloat()),s&32&&(a.shearX=x.readFloat()),a.limit=(s&64?x.readFloat():5e3)*c,a.step=1/x.readUnsignedByte(),a.inertia=x.readFloat(),a.strength=x.readFloat(),a.damping=x.readFloat(),a.massInverse=s&128?x.readFloat():1,a.wind=x.readFloat(),a.gravity=x.readFloat(),s=x.readByte(),s&1&&(a.inertiaGlobal=!0),s&2&&(a.strengthGlobal=!0),s&4&&(a.dampingGlobal=!0),s&8&&(a.massGlobal=!0),s&16&&(a.windGlobal=!0),s&32&&(a.gravityGlobal=!0),s&64&&(a.mixGlobal=!0),a.mix=s&128?x.readFloat():1,v.physicsConstraints.push(a)}let i=this.readSkin(x,v,!0,w);i&&(v.defaultSkin=i,v.skins.push(i));{let u=v.skins.length;for(ke.setArraySize(v.skins,e=u+x.readInt(!0));u<e;u++){let n=this.readSkin(x,v,!1,w);if(!n)throw new Error("readSkin() should not have returned null.");v.skins[u]=n}}e=this.linkedMeshes.length;for(let u=0;u<e;u++){let n=this.linkedMeshes[u];const r=v.skins[n.skinIndex];if(!n.parent)throw new Error("Linked mesh parent must not be null");let a=r.getAttachment(n.slotIndex,n.parent);if(!a)throw new Error(`Parent mesh not found: ${n.parent}`);n.mesh.timelineAttachment=n.inheritTimeline?a:n.mesh,n.mesh.setParentMesh(a),n.mesh.region!=null&&n.mesh.updateRegion()}this.linkedMeshes.length=0,e=x.readInt(!0);for(let u=0;u<e;u++){let n=x.readString();if(!n)throw new Error("Event data name must not be null");let r=new NS(n);r.intValue=x.readInt(!1),r.floatValue=x.readFloat(),r.stringValue=x.readString(),r.audioPath=x.readString(),r.audioPath&&(r.volume=x.readFloat(),r.balance=x.readFloat()),v.events.push(r)}e=x.readInt(!0);for(let u=0;u<e;u++){let n=x.readString();if(!n)throw new Error("Animatio name must not be null.");v.animations.push(this.readAnimation(x,n,v))}return v}readSkin(t,c,v,x){let b=null,h=0;if(v){if(h=t.readInt(!0),h==0)return null;b=new Ig("default")}else{let w=t.readString();if(!w)throw new Error("Skin name must not be null.");b=new Ig(w),x&&Rt.rgba8888ToColor(b.color,t.readInt32()),b.bones.length=t.readInt(!0);for(let e=0,i=b.bones.length;e<i;e++)b.bones[e]=c.bones[t.readInt(!0)];for(let e=0,i=t.readInt(!0);e<i;e++)b.constraints.push(c.ikConstraints[t.readInt(!0)]);for(let e=0,i=t.readInt(!0);e<i;e++)b.constraints.push(c.transformConstraints[t.readInt(!0)]);for(let e=0,i=t.readInt(!0);e<i;e++)b.constraints.push(c.pathConstraints[t.readInt(!0)]);for(let e=0,i=t.readInt(!0);e<i;e++)b.constraints.push(c.physicsConstraints[t.readInt(!0)]);h=t.readInt(!0)}for(let w=0;w<h;w++){let e=t.readInt(!0);for(let i=0,u=t.readInt(!0);i<u;i++){let n=t.readStringRef();if(!n)throw new Error("Attachment name must not be null");let r=this.readAttachment(t,c,b,e,n,x);r&&b.setAttachment(e,n,r)}}return b}readAttachment(t,c,v,x,b,h){let w=this.scale,e=t.readByte();const i=e&8?t.readStringRef():b;if(!i)throw new Error("Attachment name must not be null");switch(e&7){case gn.Region:{let u=e&16?t.readStringRef():null;const n=e&32?t.readInt32():4294967295,r=e&64?this.readSequence(t):null;let a=e&128?t.readFloat():0,s=t.readFloat(),o=t.readFloat(),d=t.readFloat(),l=t.readFloat(),f=t.readFloat(),m=t.readFloat();u||(u=i);let g=this.attachmentLoader.newRegionAttachment(v,i,u,r);return g?(g.path=u,g.x=s*w,g.y=o*w,g.scaleX=d,g.scaleY=l,g.rotation=a,g.width=f*w,g.height=m*w,Rt.rgba8888ToColor(g.color,n),g.sequence=r,r==null&&g.updateRegion(),g):null}case gn.BoundingBox:{let u=this.readVertices(t,(e&16)!=0),n=h?t.readInt32():0,r=this.attachmentLoader.newBoundingBoxAttachment(v,i);return r?(r.worldVerticesLength=u.length,r.vertices=u.vertices,r.bones=u.bones,h&&Rt.rgba8888ToColor(r.color,n),r):null}case gn.Mesh:{let u=e&16?t.readStringRef():i;const n=e&32?t.readInt32():4294967295,r=e&64?this.readSequence(t):null,a=t.readInt(!0),s=this.readVertices(t,(e&128)!=0),o=this.readFloatArray(t,s.length,1),d=this.readShortArray(t,(s.length-a-2)*3);let l=[],f=0,m=0;h&&(l=this.readShortArray(t,t.readInt(!0)),f=t.readFloat(),m=t.readFloat()),u||(u=i);let g=this.attachmentLoader.newMeshAttachment(v,i,u,r);return g?(g.path=u,Rt.rgba8888ToColor(g.color,n),g.bones=s.bones,g.vertices=s.vertices,g.worldVerticesLength=s.length,g.triangles=d,g.regionUVs=o,r==null&&g.updateRegion(),g.hullLength=a<<1,g.sequence=r,h&&(g.edges=l,g.width=f*w,g.height=m*w),g):null}case gn.LinkedMesh:{const u=e&16?t.readStringRef():i;if(u==null)throw new Error("Path of linked mesh must not be null");const n=e&32?t.readInt32():4294967295,r=e&64?this.readSequence(t):null,a=(e&128)!=0,s=t.readInt(!0),o=t.readStringRef();let d=0,l=0;h&&(d=t.readFloat(),l=t.readFloat());let f=this.attachmentLoader.newMeshAttachment(v,i,u,r);return f?(f.path=u,Rt.rgba8888ToColor(f.color,n),f.sequence=r,h&&(f.width=d*w,f.height=l*w),this.linkedMeshes.push(new wF(f,s,x,o,a)),f):null}case gn.Path:{const u=(e&16)!=0,n=(e&32)!=0,r=this.readVertices(t,(e&64)!=0),a=ke.newArray(r.length/6,0);for(let d=0,l=a.length;d<l;d++)a[d]=t.readFloat()*w;const s=h?t.readInt32():0,o=this.attachmentLoader.newPathAttachment(v,i);return o?(o.closed=u,o.constantSpeed=n,o.worldVerticesLength=r.length,o.vertices=r.vertices,o.bones=r.bones,o.lengths=a,h&&Rt.rgba8888ToColor(o.color,s),o):null}case gn.Point:{const u=t.readFloat(),n=t.readFloat(),r=t.readFloat(),a=h?t.readInt32():0,s=this.attachmentLoader.newPointAttachment(v,i);return s?(s.x=n*w,s.y=r*w,s.rotation=u,h&&Rt.rgba8888ToColor(s.color,a),s):null}case gn.Clipping:{const u=t.readInt(!0),n=this.readVertices(t,(e&16)!=0);let r=h?t.readInt32():0,a=this.attachmentLoader.newClippingAttachment(v,i);return a?(a.endSlot=c.slots[u],a.worldVerticesLength=n.length,a.vertices=n.vertices,a.bones=n.bones,h&&Rt.rgba8888ToColor(a.color,r),a):null}}return null}readSequence(t){let c=new $w(t.readInt(!0));return c.start=t.readInt(!0),c.digits=t.readInt(!0),c.setupIndex=t.readInt(!0),c}readVertices(t,c){const v=this.scale,x=t.readInt(!0),b=new SF;if(b.length=x<<1,!c)return b.vertices=this.readFloatArray(t,b.length,v),b;let h=new Array,w=new Array;for(let e=0;e<x;e++){let i=t.readInt(!0);w.push(i);for(let u=0;u<i;u++)w.push(t.readInt(!0)),h.push(t.readFloat()*v),h.push(t.readFloat()*v),h.push(t.readFloat())}return b.vertices=ke.toFloatArray(h),b.bones=w,b}readFloatArray(t,c,v){let x=new Array(c);if(v==1)for(let b=0;b<c;b++)x[b]=t.readFloat();else for(let b=0;b<c;b++)x[b]=t.readFloat()*v;return x}readShortArray(t,c){let v=new Array(c);for(let x=0;x<c;x++)v[x]=t.readInt(!0);return v}readAnimation(t,c,v){t.readInt(!0);let x=new Array,b=this.scale;for(let i=0,u=t.readInt(!0);i<u;i++){let n=t.readInt(!0);for(let r=0,a=t.readInt(!0);r<a;r++){let s=t.readByte(),o=t.readInt(!0),d=o-1;switch(s){case FF:{let l=new il(o,n);for(let f=0;f<o;f++)l.setFrame(f,t.readFloat(),t.readStringRef());x.push(l);break}case IF:{let l=t.readInt(!0),f=new rS(o,l,n),m=t.readFloat(),g=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255;for(let C=0,A=0;f.setFrame(C,m,g,p,y,S),C!=d;C++){let M=t.readFloat(),L=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255;switch(t.readByte()){case Na:f.setStepped(C);break;case Ga:ti(t,f,A++,C,0,m,M,g,L,1),ti(t,f,A++,C,1,m,M,p,P,1),ti(t,f,A++,C,2,m,M,y,O,1),ti(t,f,A++,C,3,m,M,S,D,1)}m=M,g=L,p=P,y=O,S=D}x.push(f);break}case OF:{let l=t.readInt(!0),f=new oS(o,l,n),m=t.readFloat(),g=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255;for(let S=0,C=0;f.setFrame(S,m,g,p,y),S!=d;S++){let A=t.readFloat(),M=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255;switch(t.readByte()){case Na:f.setStepped(S);break;case Ga:ti(t,f,C++,S,0,m,A,g,M,1),ti(t,f,C++,S,1,m,A,p,L,1),ti(t,f,C++,S,2,m,A,y,P,1)}m=A,g=M,p=L,y=P}x.push(f);break}case NF:{let l=t.readInt(!0),f=new hS(o,l,n),m=t.readFloat(),g=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255;for(let L=0,P=0;f.setFrame(L,m,g,p,y,S,C,A,M),L!=d;L++){let O=t.readFloat(),D=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255,W=t.readUnsignedByte()/255,$=t.readUnsignedByte()/255;switch(t.readByte()){case Na:f.setStepped(L);break;case Ga:ti(t,f,P++,L,0,m,O,g,D,1),ti(t,f,P++,L,1,m,O,p,I,1),ti(t,f,P++,L,2,m,O,y,F,1),ti(t,f,P++,L,3,m,O,S,H,1),ti(t,f,P++,L,4,m,O,C,k,1),ti(t,f,P++,L,5,m,O,A,W,1),ti(t,f,P++,L,6,m,O,M,$,1)}m=O,g=D,p=I,y=F,S=H,C=k,A=W,M=$}x.push(f);break}case GF:{let l=t.readInt(!0),f=new dS(o,l,n),m=t.readFloat(),g=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255;for(let M=0,L=0;f.setFrame(M,m,g,p,y,S,C,A),M!=d;M++){let P=t.readFloat(),O=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255;switch(t.readByte()){case Na:f.setStepped(M);break;case Ga:ti(t,f,L++,M,0,m,P,g,O,1),ti(t,f,L++,M,1,m,P,p,D,1),ti(t,f,L++,M,2,m,P,y,I,1),ti(t,f,L++,M,3,m,P,S,F,1),ti(t,f,L++,M,4,m,P,C,H,1),ti(t,f,L++,M,5,m,P,A,k,1)}m=P,g=O,p=D,y=I,S=F,C=H,A=k}x.push(f);break}case HF:{let l=new lS(o,t.readInt(!0),n),f=t.readFloat(),m=t.readUnsignedByte()/255;for(let g=0,p=0;l.setFrame(g,f,m),g!=d;g++){let y=t.readFloat(),S=t.readUnsignedByte()/255;switch(t.readByte()){case Na:l.setStepped(g);break;case Ga:ti(t,l,p++,g,0,f,y,m,S,1)}f=y,m=S}x.push(l)}}}}for(let i=0,u=t.readInt(!0);i<u;i++){let n=t.readInt(!0);for(let r=0,a=t.readInt(!0);r<a;r++){let s=t.readByte(),o=t.readInt(!0);if(s==DF){let l=new nS(o,n);for(let f=0;f<o;f++)l.setFrame(f,t.readFloat(),t.readByte());x.push(l);continue}let d=t.readInt(!0);switch(s){case TF:x.push(ms(t,new _u(o,d,n),1));break;case CF:x.push(ug(t,new Jw(o,d,n),b));break;case AF:x.push(ms(t,new Zw(o,d,n),b));break;case bF:x.push(ms(t,new qw(o,d,n),b));break;case EF:x.push(ug(t,new _w(o,d,n),1));break;case MF:x.push(ms(t,new eS(o,d,n),1));break;case LF:x.push(ms(t,new tS(o,d,n),1));break;case RF:x.push(ug(t,new iS(o,d,n),1));break;case PF:x.push(ms(t,new sS(o,d,n),1));break;case BF:x.push(ms(t,new aS(o,d,n),1))}}}for(let i=0,u=t.readInt(!0);i<u;i++){let n=t.readInt(!0),r=t.readInt(!0),a=r-1,s=new cS(r,t.readInt(!0),n),o=t.readByte(),d=t.readFloat(),l=o&1?o&2?t.readFloat():1:0,f=o&4?t.readFloat()*b:0;for(let m=0,g=0;s.setFrame(m,d,l,f,o&8?1:-1,(o&16)!=0,(o&32)!=0),m!=a;m++){o=t.readByte();const p=t.readFloat(),y=o&1?o&2?t.readFloat():1:0,S=o&4?t.readFloat()*b:0;o&64?s.setStepped(m):o&128&&(ti(t,s,g++,m,0,d,p,l,y,1),ti(t,s,g++,m,1,d,p,f,S,b)),d=p,l=y,f=S}x.push(s)}for(let i=0,u=t.readInt(!0);i<u;i++){let n=t.readInt(!0),r=t.readInt(!0),a=r-1,s=new fS(r,t.readInt(!0),n),o=t.readFloat(),d=t.readFloat(),l=t.readFloat(),f=t.readFloat(),m=t.readFloat(),g=t.readFloat(),p=t.readFloat();for(let y=0,S=0;s.setFrame(y,o,d,l,f,m,g,p),y!=a;y++){let C=t.readFloat(),A=t.readFloat(),M=t.readFloat(),L=t.readFloat(),P=t.readFloat(),O=t.readFloat(),D=t.readFloat();switch(t.readByte()){case Na:s.setStepped(y);break;case Ga:ti(t,s,S++,y,0,o,C,d,A,1),ti(t,s,S++,y,1,o,C,l,M,1),ti(t,s,S++,y,2,o,C,f,L,1),ti(t,s,S++,y,3,o,C,m,P,1),ti(t,s,S++,y,4,o,C,g,O,1),ti(t,s,S++,y,5,o,C,p,D,1)}o=C,d=A,l=M,f=L,m=P,g=O,p=D}x.push(s)}for(let i=0,u=t.readInt(!0);i<u;i++){let n=t.readInt(!0),r=v.pathConstraints[n];for(let a=0,s=t.readInt(!0);a<s;a++){const o=t.readByte(),d=t.readInt(!0),l=t.readInt(!0);switch(o){case VF:x.push(ms(t,new mS(d,l,n),r.positionMode==Xa.Fixed?b:1));break;case YF:x.push(ms(t,new gS(d,l,n),r.spacingMode==qi.Length||r.spacingMode==qi.Fixed?b:1));break;case XF:let f=new pS(d,l,n),m=t.readFloat(),g=t.readFloat(),p=t.readFloat(),y=t.readFloat();for(let S=0,C=0,A=f.getFrameCount()-1;f.setFrame(S,m,g,p,y),S!=A;S++){let M=t.readFloat(),L=t.readFloat(),P=t.readFloat(),O=t.readFloat();switch(t.readByte()){case Na:f.setStepped(S);break;case Ga:ti(t,f,C++,S,0,m,M,g,L,1),ti(t,f,C++,S,1,m,M,p,P,1),ti(t,f,C++,S,2,m,M,y,O,1)}m=M,g=L,p=P,y=O}x.push(f)}}}for(let i=0,u=t.readInt(!0);i<u;i++){const n=t.readInt(!0)-1;for(let r=0,a=t.readInt(!0);r<a;r++){const s=t.readByte(),o=t.readInt(!0);if(s==ZF){const l=new AS(o,n);for(let f=0;f<o;f++)l.setFrame(f,t.readFloat());x.push(l);continue}const d=t.readInt(!0);switch(s){case zF:x.push(ms(t,new vS(o,d,n),1));break;case WF:x.push(ms(t,new yS(o,d,n),1));break;case jF:x.push(ms(t,new xS(o,d,n),1));break;case KF:x.push(ms(t,new wS(o,d,n),1));break;case $F:x.push(ms(t,new SS(o,d,n),1));break;case QF:x.push(ms(t,new TS(o,d,n),1));break;case JF:x.push(ms(t,new CS(o,d,n),1))}}}for(let i=0,u=t.readInt(!0);i<u;i++){let n=v.skins[t.readInt(!0)];for(let r=0,a=t.readInt(!0);r<a;r++){let s=t.readInt(!0);for(let o=0,d=t.readInt(!0);o<d;o++){let l=t.readStringRef();if(!l)throw new Error("attachmentName must not be null.");let f=n.getAttachment(s,l),m=t.readByte(),g=t.readInt(!0),p=g-1;switch(m){case kF:{let y=f,S=y.bones,C=y.vertices,A=S?C.length/3*2:C.length,M=t.readInt(!0),L=new uS(g,M,s,y),P=t.readFloat();for(let O=0,D=0;;O++){let I,F=t.readInt(!0);if(F==0)I=S?ke.newFloatArray(A):C;else{I=ke.newFloatArray(A);let k=t.readInt(!0);if(F+=k,b==1)for(let W=k;W<F;W++)I[W]=t.readFloat();else for(let W=k;W<F;W++)I[W]=t.readFloat()*b;if(!S)for(let W=0,$=I.length;W<$;W++)I[W]+=C[W]}if(L.setFrame(O,P,I),O==p)break;let H=t.readFloat();switch(t.readByte()){case Na:L.setStepped(O);break;case Ga:ti(t,L,D++,O,0,P,H,0,1,1)}P=H}x.push(L);break}case UF:{let y=new bS(g,s,f);for(let S=0;S<g;S++){let C=t.readFloat(),A=t.readInt32();y.setFrame(S,C,Qw[A&15],A>>4,t.readFloat())}x.push(y);break}}}}}let h=t.readInt(!0);if(h>0){let i=new zh(h),u=v.slots.length;for(let n=0;n<h;n++){let r=t.readFloat(),a=t.readInt(!0),s=ke.newArray(u,0);for(let f=u-1;f>=0;f--)s[f]=-1;let o=ke.newArray(u-a,0),d=0,l=0;for(let f=0;f<a;f++){let m=t.readInt(!0);for(;d!=m;)o[l++]=d++;s[d+t.readInt(!0)]=d++}for(;d<u;)o[l++]=d++;for(let f=u-1;f>=0;f--)s[f]==-1&&(s[f]=o[--l]);i.setFrame(n,r,s)}x.push(i)}let w=t.readInt(!0);if(w>0){let i=new xp(w);for(let u=0;u<w;u++){let n=t.readFloat(),r=v.events[t.readInt(!0)],a=new OS(n,r);a.intValue=t.readInt(!1),a.floatValue=t.readFloat(),a.stringValue=t.readString(),a.stringValue==null&&(a.stringValue=r.stringValue),a.data.audioPath&&(a.volume=t.readFloat(),a.balance=t.readFloat()),i.setFrame(u,a)}x.push(i)}let e=0;for(let i=0,u=x.length;i<u;i++)e=Math.max(e,x[i].getDuration());return new vp(c,x,e)}},xF=class{constructor(t,c=new Array,v=0,x=new DataView(t instanceof ArrayBuffer?t:t.buffer)){G(this,"strings");G(this,"index");G(this,"buffer");this.strings=c,this.index=v,this.buffer=x}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let c=this.readByte(),v=c&127;return c&128&&(c=this.readByte(),v|=(c&127)<<7,c&128&&(c=this.readByte(),v|=(c&127)<<14,c&128&&(c=this.readByte(),v|=(c&127)<<21,c&128&&(c=this.readByte(),v|=(c&127)<<28)))),t?v:v>>>1^-(v&1)}readStringRef(){let t=this.readInt(!0);return t==0?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let c="";for(let v=0;v<t;){let x=this.readUnsignedByte();switch(x>>4){case 12:case 13:c+=String.fromCharCode((x&31)<<6|this.readByte()&63),v+=2;break;case 14:c+=String.fromCharCode((x&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),v+=3;break;default:c+=String.fromCharCode(x),v++}}return c}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return this.readByte()!=0}},wF=class{constructor(t,c,v,x,b){G(this,"parent");G(this,"skinIndex");G(this,"slotIndex");G(this,"mesh");G(this,"inheritTimeline");this.mesh=t,this.skinIndex=c,this.slotIndex=v,this.parent=x,this.inheritTimeline=b}},SF=class{constructor(t=null,c=null,v=0){G(this,"bones");G(this,"vertices");G(this,"length");this.bones=t,this.vertices=c,this.length=v}};var gn;(function(R){R[R.Region=0]="Region",R[R.BoundingBox=1]="BoundingBox",R[R.Mesh=2]="Mesh",R[R.LinkedMesh=3]="LinkedMesh",R[R.Path=4]="Path",R[R.Point=5]="Point",R[R.Clipping=6]="Clipping"})(gn||(gn={}));function ms(R,t,c){let v=R.readFloat(),x=R.readFloat()*c;for(let b=0,h=0,w=t.getFrameCount()-1;t.setFrame(b,v,x),b!=w;b++){let e=R.readFloat(),i=R.readFloat()*c;switch(R.readByte()){case Na:t.setStepped(b);break;case Ga:ti(R,t,h++,b,0,v,e,x,i,c)}v=e,x=i}return t}function ug(R,t,c){let v=R.readFloat(),x=R.readFloat()*c,b=R.readFloat()*c;for(let h=0,w=0,e=t.getFrameCount()-1;t.setFrame(h,v,x,b),h!=e;h++){let i=R.readFloat(),u=R.readFloat()*c,n=R.readFloat()*c;switch(R.readByte()){case Na:t.setStepped(h);break;case Ga:ti(R,t,w++,h,0,v,i,x,u,c),ti(R,t,w++,h,1,v,i,b,n,c)}v=i,x=u,b=n}return t}function ti(R,t,c,v,x,b,h,w,e,i){t.setBezier(c,v,x,b,w,R.readFloat(),R.readFloat()*i,R.readFloat(),R.readFloat()*i,h,e)}const TF=0,CF=1,AF=2,bF=3,EF=4,MF=5,LF=6,RF=7,PF=8,BF=9,DF=10,FF=0,IF=1,OF=2,NF=3,GF=4,HF=5,kF=0,UF=1,VF=0,YF=1,XF=2,zF=0,WF=1,jF=2,KF=4,$F=5,QF=6,JF=7,ZF=8,Na=1,Ga=2;let qF=class{constructor(){G(this,"minX",0);G(this,"minY",0);G(this,"maxX",0);G(this,"maxY",0);G(this,"boundingBoxes",new Array);G(this,"polygons",new Array);G(this,"polygonPool",new qu(()=>ke.newFloatArray(16)))}update(t,c){if(!t)throw new Error("skeleton cannot be null.");let v=this.boundingBoxes,x=this.polygons,b=this.polygonPool,h=t.slots,w=h.length;v.length=0,b.freeAll(x),x.length=0;for(let e=0;e<w;e++){let i=h[e];if(!i.bone.active)continue;let u=i.getAttachment();if(u instanceof ES){let n=u;v.push(n);let r=b.obtain();r.length!=n.worldVerticesLength&&(r=ke.newFloatArray(n.worldVerticesLength)),x.push(r),n.computeWorldVertices(i,0,n.worldVerticesLength,r,0,2)}}c?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,x=Number.NEGATIVE_INFINITY,b=this.polygons;for(let h=0,w=b.length;h<w;h++){let e=b[h],i=e;for(let u=0,n=e.length;u<n;u+=2){let r=i[u],a=i[u+1];t=Math.min(t,r),c=Math.min(c,a),v=Math.max(v,r),x=Math.max(x,a)}}this.minX=t,this.minY=c,this.maxX=v,this.maxY=x}aabbContainsPoint(t,c){return t>=this.minX&&t<=this.maxX&&c>=this.minY&&c<=this.maxY}aabbIntersectsSegment(t,c,v,x){let b=this.minX,h=this.minY,w=this.maxX,e=this.maxY;if(t<=b&&v<=b||c<=h&&x<=h||t>=w&&v>=w||c>=e&&x>=e)return!1;let i=(x-c)/(v-t),u=i*(b-t)+c;if(u>h&&u<e||(u=i*(w-t)+c,u>h&&u<e))return!0;let n=(h-c)/i+t;return n>b&&n<w||(n=(e-c)/i+t,n>b&&n<w)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,c){let v=this.polygons;for(let x=0,b=v.length;x<b;x++)if(this.containsPointPolygon(v[x],t,c))return this.boundingBoxes[x];return null}containsPointPolygon(t,c,v){let x=t,b=t.length,h=b-2,w=!1;for(let e=0;e<b;e+=2){let i=x[e+1],u=x[h+1];if(i<v&&u>=v||u<v&&i>=v){let n=x[e];n+(v-i)/(u-i)*(x[h]-n)<c&&(w=!w)}h=e}return w}intersectsSegment(t,c,v,x){let b=this.polygons;for(let h=0,w=b.length;h<w;h++)if(this.intersectsSegmentPolygon(b[h],t,c,v,x))return this.boundingBoxes[h];return null}intersectsSegmentPolygon(t,c,v,x,b){let h=t,w=t.length,e=c-x,i=v-b,u=c*b-v*x,n=h[w-2],r=h[w-1];for(let a=0;a<w;a+=2){let s=h[a],o=h[a+1],d=n*o-r*s,l=n-s,f=r-o,m=e*f-i*l,g=(u*l-e*d)/m;if((g>=n&&g<=s||g>=s&&g<=n)&&(g>=c&&g<=x||g>=x&&g<=c)){let p=(u*f-i*d)/m;if((p>=r&&p<=o||p>=o&&p<=r)&&(p>=v&&p<=b||p>=b&&p<=v))return!0}n=s,r=o}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let c=this.boundingBoxes.indexOf(t);return c==-1?null:this.polygons[c]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},_F=class Zs{constructor(){G(this,"convexPolygons",new Array);G(this,"convexPolygonsIndices",new Array);G(this,"indicesArray",new Array);G(this,"isConcaveArray",new Array);G(this,"triangles",new Array);G(this,"polygonPool",new qu(()=>new Array));G(this,"polygonIndicesPool",new qu(()=>new Array))}triangulate(t){let c=t,v=t.length>>1,x=this.indicesArray;x.length=0;for(let w=0;w<v;w++)x[w]=w;let b=this.isConcaveArray;b.length=0;for(let w=0,e=v;w<e;++w)b[w]=Zs.isConcave(w,v,c,x);let h=this.triangles;for(h.length=0;v>3;){let w=v-1,e=0,i=1;for(;;){e:if(!b[e]){let r=x[w]<<1,a=x[e]<<1,s=x[i]<<1,o=c[r],d=c[r+1],l=c[a],f=c[a+1],m=c[s],g=c[s+1];for(let p=(i+1)%v;p!=w;p=(p+1)%v){if(!b[p])continue;let y=x[p]<<1,S=c[y],C=c[y+1];if(Zs.positiveArea(m,g,o,d,S,C)&&Zs.positiveArea(o,d,l,f,S,C)&&Zs.positiveArea(l,f,m,g,S,C))break e}break}if(i==0){do{if(!b[e])break;e--}while(e>0);break}w=e,e=i,i=(i+1)%v}h.push(x[(v+e-1)%v]),h.push(x[e]),h.push(x[(e+1)%v]),x.splice(e,1),b.splice(e,1),v--;let u=(v+e-1)%v,n=e==v?0:e;b[u]=Zs.isConcave(u,v,c,x),b[n]=Zs.isConcave(n,v,c,x)}return v==3&&(h.push(x[2]),h.push(x[0]),h.push(x[1])),h}decompose(t,c){let v=t,x=this.convexPolygons;this.polygonPool.freeAll(x),x.length=0;let b=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(b),b.length=0;let h=this.polygonIndicesPool.obtain();h.length=0;let w=this.polygonPool.obtain();w.length=0;let e=-1,i=0;for(let u=0,n=c.length;u<n;u+=3){let r=c[u]<<1,a=c[u+1]<<1,s=c[u+2]<<1,o=v[r],d=v[r+1],l=v[a],f=v[a+1],m=v[s],g=v[s+1],p=!1;if(e==r){let y=w.length-4,S=Zs.winding(w[y],w[y+1],w[y+2],w[y+3],m,g),C=Zs.winding(m,g,w[0],w[1],w[2],w[3]);S==i&&C==i&&(w.push(m),w.push(g),h.push(s),p=!0)}p||(w.length>0?(x.push(w),b.push(h)):(this.polygonPool.free(w),this.polygonIndicesPool.free(h)),w=this.polygonPool.obtain(),w.length=0,w.push(o),w.push(d),w.push(l),w.push(f),w.push(m),w.push(g),h=this.polygonIndicesPool.obtain(),h.length=0,h.push(r),h.push(a),h.push(s),i=Zs.winding(o,d,l,f,m,g),e=r)}w.length>0&&(x.push(w),b.push(h));for(let u=0,n=x.length;u<n;u++){if(h=b[u],h.length==0)continue;let r=h[0],a=h[h.length-1];w=x[u];let s=w.length-4,o=w[s],d=w[s+1],l=w[s+2],f=w[s+3],m=w[0],g=w[1],p=w[2],y=w[3],S=Zs.winding(o,d,l,f,m,g);for(let C=0;C<n;C++){if(C==u)continue;let A=b[C];if(A.length!=3)continue;let M=A[0],L=A[1],P=A[2],O=x[C],D=O[O.length-2],I=O[O.length-1];if(M!=r||L!=a)continue;let F=Zs.winding(o,d,l,f,D,I),H=Zs.winding(D,I,m,g,p,y);F==S&&H==S&&(O.length=0,A.length=0,w.push(D),w.push(I),h.push(P),o=l,d=f,l=D,f=I,C=0)}}for(let u=x.length-1;u>=0;u--)w=x[u],w.length==0&&(x.splice(u,1),this.polygonPool.free(w),h=b[u],b.splice(u,1),this.polygonIndicesPool.free(h));return x}static isConcave(t,c,v,x){let b=x[(c+t-1)%c]<<1,h=x[t]<<1,w=x[(t+1)%c]<<1;return!this.positiveArea(v[b],v[b+1],v[h],v[h+1],v[w],v[w+1])}static positiveArea(t,c,v,x,b,h){return t*(h-x)+v*(c-h)+b*(x-c)>=0}static winding(t,c,v,x,b,h){let w=v-t,e=x-c;return b*e-h*w+w*c-t*e>=0?1:-1}},eI=class Og{constructor(){G(this,"triangulator",new _F);G(this,"clippingPolygon",new Array);G(this,"clipOutput",new Array);G(this,"clippedVertices",new Array);G(this,"clippedUVs",new Array);G(this,"clippedTriangles",new Array);G(this,"scratch",new Array);G(this,"clipAttachment",null);G(this,"clippingPolygons",null)}clipStart(t,c){if(this.clipAttachment)return 0;this.clipAttachment=c;let v=c.worldVerticesLength,x=ke.setArraySize(this.clippingPolygon,v);c.computeWorldVertices(t,0,v,x,0,2);let b=this.clippingPolygon;Og.makeClockwise(b);let h=this.clippingPolygons=this.triangulator.decompose(b,this.triangulator.triangulate(b));for(let w=0,e=h.length;w<e;w++){let i=h[w];Og.makeClockwise(i),i.push(i[0]),i.push(i[1])}return h.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return this.clipAttachment!=null}clipTriangles(t,c,v,x,b,h,w,e){let i,u,n,r,a,s;typeof c=="number"?(i=v,u=x,n=b,r=h,a=w,s=e):(i=c,u=v,n=x,r=b,a=h,s=w),n&&r&&a&&typeof s=="boolean"?this.clipTrianglesRender(t,i,u,n,r,a,s):this.clipTrianglesNoRender(t,i,u)}clipTrianglesNoRender(t,c,v){let x=this.clipOutput,b=this.clippedVertices,h=this.clippedTriangles,w=this.clippingPolygons,e=w.length,i=0;b.length=0,h.length=0;for(let u=0;u<v;u+=3){let n=c[u]<<1,r=t[n],a=t[n+1];n=c[u+1]<<1;let s=t[n],o=t[n+1];n=c[u+2]<<1;let d=t[n],l=t[n+1];for(let f=0;f<e;f++){let m=b.length;if(this.clip(r,a,s,o,d,l,w[f],x)){let g=x.length;if(g==0)continue;let p=g>>1,y=this.clipOutput,S=ke.setArraySize(b,m+p*2);for(let A=0;A<g;A+=2,m+=2){let M=y[A],L=y[A+1];S[m]=M,S[m+1]=L}m=h.length;let C=ke.setArraySize(h,m+3*(p-2));p--;for(let A=1;A<p;A++,m+=3)C[m]=i,C[m+1]=i+A,C[m+2]=i+A+1;i+=p+1}else{let g=ke.setArraySize(b,m+6);g[m]=r,g[m+1]=a,g[m+2]=s,g[m+3]=o,g[m+4]=d,g[m+5]=l,m=h.length;let p=ke.setArraySize(h,m+3);p[m]=i,p[m+1]=i+1,p[m+2]=i+2,i+=3;break}}}}clipTrianglesRender(t,c,v,x,b,h,w){let e=this.clipOutput,i=this.clippedVertices,u=this.clippedTriangles,n=this.clippingPolygons,r=n.length,a=w?12:8,s=0;i.length=0,u.length=0;for(let o=0;o<v;o+=3){let d=c[o]<<1,l=t[d],f=t[d+1],m=x[d],g=x[d+1];d=c[o+1]<<1;let p=t[d],y=t[d+1],S=x[d],C=x[d+1];d=c[o+2]<<1;let A=t[d],M=t[d+1],L=x[d],P=x[d+1];for(let O=0;O<r;O++){let D=i.length;if(this.clip(l,f,p,y,A,M,n[O],e)){let I=e.length;if(I==0)continue;let F=y-M,H=A-p,k=l-A,W=M-f,$=1/(F*k+H*(f-M)),K=I>>1,Z=this.clipOutput,X=ke.setArraySize(i,D+K*a);for(let Y=0;Y<I;Y+=2,D+=a){let U=Z[Y],J=Z[Y+1];X[D]=U,X[D+1]=J,X[D+2]=b.r,X[D+3]=b.g,X[D+4]=b.b,X[D+5]=b.a;let q=U-A,_=J-M,te=(F*q+H*_)*$,se=(W*q+k*_)*$,ne=1-te-se;X[D+6]=m*te+S*se+L*ne,X[D+7]=g*te+C*se+P*ne,w&&(X[D+8]=h.r,X[D+9]=h.g,X[D+10]=h.b,X[D+11]=h.a)}D=u.length;let j=ke.setArraySize(u,D+3*(K-2));K--;for(let Y=1;Y<K;Y++,D+=3)j[D]=s,j[D+1]=s+Y,j[D+2]=s+Y+1;s+=K+1}else{let I=ke.setArraySize(i,D+3*a);I[D]=l,I[D+1]=f,I[D+2]=b.r,I[D+3]=b.g,I[D+4]=b.b,I[D+5]=b.a,w?(I[D+6]=m,I[D+7]=g,I[D+8]=h.r,I[D+9]=h.g,I[D+10]=h.b,I[D+11]=h.a,I[D+12]=p,I[D+13]=y,I[D+14]=b.r,I[D+15]=b.g,I[D+16]=b.b,I[D+17]=b.a,I[D+18]=S,I[D+19]=C,I[D+20]=h.r,I[D+21]=h.g,I[D+22]=h.b,I[D+23]=h.a,I[D+24]=A,I[D+25]=M,I[D+26]=b.r,I[D+27]=b.g,I[D+28]=b.b,I[D+29]=b.a,I[D+30]=L,I[D+31]=P,I[D+32]=h.r,I[D+33]=h.g,I[D+34]=h.b,I[D+35]=h.a):(I[D+6]=m,I[D+7]=g,I[D+8]=p,I[D+9]=y,I[D+10]=b.r,I[D+11]=b.g,I[D+12]=b.b,I[D+13]=b.a,I[D+14]=S,I[D+15]=C,I[D+16]=A,I[D+17]=M,I[D+18]=b.r,I[D+19]=b.g,I[D+20]=b.b,I[D+21]=b.a,I[D+22]=L,I[D+23]=P),D=u.length;let F=ke.setArraySize(u,D+3);F[D]=s,F[D+1]=s+1,F[D+2]=s+2,s+=3;break}}}}clipTrianglesUnpacked(t,c,v,x){let b=this.clipOutput,h=this.clippedVertices,w=this.clippedUVs,e=this.clippedTriangles,i=this.clippingPolygons,u=i.length,n=0;h.length=0,w.length=0,e.length=0;for(let r=0;r<v;r+=3){let a=c[r]<<1,s=t[a],o=t[a+1],d=x[a],l=x[a+1];a=c[r+1]<<1;let f=t[a],m=t[a+1],g=x[a],p=x[a+1];a=c[r+2]<<1;let y=t[a],S=t[a+1],C=x[a],A=x[a+1];for(let M=0;M<u;M++){let L=h.length;if(this.clip(s,o,f,m,y,S,i[M],b)){let P=b.length;if(P==0)continue;let O=m-S,D=y-f,I=s-y,F=S-o,H=1/(O*I+D*(o-S)),k=P>>1,W=this.clipOutput,$=ke.setArraySize(h,L+k*2),K=ke.setArraySize(w,L+k*2);for(let X=0;X<P;X+=2,L+=2){let j=W[X],Y=W[X+1];$[L]=j,$[L+1]=Y;let U=j-y,J=Y-S,q=(O*U+D*J)*H,_=(F*U+I*J)*H,te=1-q-_;K[L]=d*q+g*_+C*te,K[L+1]=l*q+p*_+A*te}L=e.length;let Z=ke.setArraySize(e,L+3*(k-2));k--;for(let X=1;X<k;X++,L+=3)Z[L]=n,Z[L+1]=n+X,Z[L+2]=n+X+1;n+=k+1}else{let P=ke.setArraySize(h,L+6);P[L]=s,P[L+1]=o,P[L+2]=f,P[L+3]=m,P[L+4]=y,P[L+5]=S;let O=ke.setArraySize(w,L+3*2);O[L]=d,O[L+1]=l,O[L+2]=g,O[L+3]=p,O[L+4]=C,O[L+5]=A,L=e.length;let D=ke.setArraySize(e,L+3);D[L]=n,D[L+1]=n+1,D[L+2]=n+2,n+=3;break}}}}clip(t,c,v,x,b,h,w,e){let i=e,u=!1,n;w.length%4>=2?(n=e,e=this.scratch):n=this.scratch,n.length=0,n.push(t),n.push(c),n.push(v),n.push(x),n.push(b),n.push(h),n.push(t),n.push(c),e.length=0;let r=w.length-4,a=w;for(let s=0;;s+=2){let o=a[s],d=a[s+1],l=o-a[s+2],f=d-a[s+3],m=e.length,g=n;for(let y=0,S=n.length-2;y<S;){let C=g[y],A=g[y+1];y+=2;let M=g[y],L=g[y+1],P=f*(o-M)>l*(d-L),O=f*(o-C)-l*(d-A);if(O>0){if(P){e.push(M),e.push(L);continue}let D=M-C,I=L-A,F=O/(D*f-I*l);if(F>=0&&F<=1)e.push(C+D*F),e.push(A+I*F);else{e.push(M),e.push(L);continue}}else if(P){let D=M-C,I=L-A,F=O/(D*f-I*l);if(F>=0&&F<=1)e.push(C+D*F),e.push(A+I*F),e.push(M),e.push(L);else{e.push(M),e.push(L);continue}}u=!0}if(m==e.length)return i.length=0,!0;if(e.push(e[0]),e.push(e[1]),s==r)break;let p=e;e=n,e.length=0,n=p}if(i!=e){i.length=0;for(let s=0,o=e.length-2;s<o;s++)i[s]=e[s]}else i.length=i.length-2;return u}static makeClockwise(t){let c=t,v=t.length,x=c[v-2]*c[1]-c[0]*c[v-1],b=0,h=0,w=0,e=0;for(let i=0,u=v-3;i<u;i+=2)b=c[i],h=c[i+1],w=c[i+2],e=c[i+3],x+=b*e-w*h;if(!(x<0))for(let i=0,u=v-2,n=v>>1;i<n;i+=2){let r=c[i],a=c[i+1],s=u-i;c[i]=c[s],c[i+1]=c[s+1],c[s]=r,c[s+1]=a}}};class tI{constructor(t){G(this,"attachmentLoader");G(this,"scale",1);G(this,"linkedMeshes",new Array);this.attachmentLoader=t}readSkeletonData(t){let c=this.scale,v=new US,x=typeof t=="string"?JSON.parse(t):t,b=x.skeleton;if(b&&(v.hash=b.hash,v.version=b.spine,v.x=b.x,v.y=b.y,v.width=b.width,v.height=b.height,v.referenceScale=me(b,"referenceScale",100)*c,v.fps=b.fps,v.imagesPath=b.images??null,v.audioPath=b.audio??null),x.bones)for(let h=0;h<x.bones.length;h++){let w=x.bones[h],e=null,i=me(w,"parent",null);i&&(e=v.findBone(i));let u=new IS(v.bones.length,w.name,e);u.length=me(w,"length",0)*c,u.x=me(w,"x",0)*c,u.y=me(w,"y",0)*c,u.rotation=me(w,"rotation",0),u.scaleX=me(w,"scaleX",1),u.scaleY=me(w,"scaleY",1),u.shearX=me(w,"shearX",0),u.shearY=me(w,"shearY",0),u.inherit=ke.enumValue(Fi,me(w,"inherit","Normal")),u.skinRequired=me(w,"skin",!1);let n=me(w,"color",null);n&&u.color.setFromString(n),v.bones.push(u)}if(x.slots)for(let h=0;h<x.slots.length;h++){let w=x.slots[h],e=w.name,i=v.findBone(w.bone);if(!i)throw new Error(`Couldn't find bone ${w.bone} for slot ${e}`);let u=new VS(v.slots.length,e,i),n=me(w,"color",null);n&&u.color.setFromString(n);let r=me(w,"dark",null);r&&(u.darkColor=Rt.fromString(r)),u.attachmentName=me(w,"attachment",null),u.blendMode=ke.enumValue(ec,me(w,"blend","normal")),u.visible=me(w,"visible",!0),v.slots.push(u)}if(x.ik)for(let h=0;h<x.ik.length;h++){let w=x.ik[h],e=new GS(w.name);e.order=me(w,"order",0),e.skinRequired=me(w,"skin",!1);for(let u=0;u<w.bones.length;u++){let n=v.findBone(w.bones[u]);if(!n)throw new Error(`Couldn't find bone ${w.bones[u]} for IK constraint ${w.name}.`);e.bones.push(n)}let i=v.findBone(w.target);if(!i)throw new Error(`Couldn't find target bone ${w.target} for IK constraint ${w.name}.`);e.target=i,e.mix=me(w,"mix",1),e.softness=me(w,"softness",0)*c,e.bendDirection=me(w,"bendPositive",!0)?1:-1,e.compress=me(w,"compress",!1),e.stretch=me(w,"stretch",!1),e.uniform=me(w,"uniform",!1),v.ikConstraints.push(e)}if(x.transform)for(let h=0;h<x.transform.length;h++){let w=x.transform[h],e=new YS(w.name);e.order=me(w,"order",0),e.skinRequired=me(w,"skin",!1);for(let n=0;n<w.bones.length;n++){let r=w.bones[n],a=v.findBone(r);if(!a)throw new Error(`Couldn't find bone ${r} for transform constraint ${w.name}.`);e.bones.push(a)}let i=w.target,u=v.findBone(i);if(!u)throw new Error(`Couldn't find target bone ${i} for transform constraint ${w.name}.`);e.target=u,e.local=me(w,"local",!1),e.relative=me(w,"relative",!1),e.offsetRotation=me(w,"rotation",0),e.offsetX=me(w,"x",0)*c,e.offsetY=me(w,"y",0)*c,e.offsetScaleX=me(w,"scaleX",0),e.offsetScaleY=me(w,"scaleY",0),e.offsetShearY=me(w,"shearY",0),e.mixRotate=me(w,"mixRotate",1),e.mixX=me(w,"mixX",1),e.mixY=me(w,"mixY",e.mixX),e.mixScaleX=me(w,"mixScaleX",1),e.mixScaleY=me(w,"mixScaleY",e.mixScaleX),e.mixShearY=me(w,"mixShearY",1),v.transformConstraints.push(e)}if(x.path)for(let h=0;h<x.path.length;h++){let w=x.path[h],e=new HS(w.name);e.order=me(w,"order",0),e.skinRequired=me(w,"skin",!1);for(let n=0;n<w.bones.length;n++){let r=w.bones[n],a=v.findBone(r);if(!a)throw new Error(`Couldn't find bone ${r} for path constraint ${w.name}.`);e.bones.push(a)}let i=w.target,u=v.findSlot(i);if(!u)throw new Error(`Couldn't find target slot ${i} for path constraint ${w.name}.`);e.target=u,e.positionMode=ke.enumValue(Xa,me(w,"positionMode","Percent")),e.spacingMode=ke.enumValue(qi,me(w,"spacingMode","Length")),e.rotateMode=ke.enumValue(Zr,me(w,"rotateMode","Tangent")),e.offsetRotation=me(w,"rotation",0),e.position=me(w,"position",0),e.positionMode==Xa.Fixed&&(e.position*=c),e.spacing=me(w,"spacing",0),(e.spacingMode==qi.Length||e.spacingMode==qi.Fixed)&&(e.spacing*=c),e.mixRotate=me(w,"mixRotate",1),e.mixX=me(w,"mixX",1),e.mixY=me(w,"mixY",e.mixX),v.pathConstraints.push(e)}if(x.physics)for(let h=0;h<x.physics.length;h++){const w=x.physics[h],e=new kS(w.name);e.order=me(w,"order",0),e.skinRequired=me(w,"skin",!1);const i=w.bone,u=v.findBone(i);if(u==null)throw new Error("Physics bone not found: "+i);e.bone=u,e.x=me(w,"x",0),e.y=me(w,"y",0),e.rotate=me(w,"rotate",0),e.scaleX=me(w,"scaleX",0),e.shearX=me(w,"shearX",0),e.limit=me(w,"limit",5e3)*c,e.step=1/me(w,"fps",60),e.inertia=me(w,"inertia",1),e.strength=me(w,"strength",100),e.damping=me(w,"damping",1),e.massInverse=1/me(w,"mass",1),e.wind=me(w,"wind",0),e.gravity=me(w,"gravity",0),e.mix=me(w,"mix",1),e.inertiaGlobal=me(w,"inertiaGlobal",!1),e.strengthGlobal=me(w,"strengthGlobal",!1),e.dampingGlobal=me(w,"dampingGlobal",!1),e.massGlobal=me(w,"massGlobal",!1),e.windGlobal=me(w,"windGlobal",!1),e.gravityGlobal=me(w,"gravityGlobal",!1),e.mixGlobal=me(w,"mixGlobal",!1),v.physicsConstraints.push(e)}if(x.skins)for(let h=0;h<x.skins.length;h++){let w=x.skins[h],e=new Ig(w.name);if(w.bones)for(let i=0;i<w.bones.length;i++){let u=w.bones[i],n=v.findBone(u);if(!n)throw new Error(`Couldn't find bone ${u} for skin ${w.name}.`);e.bones.push(n)}if(w.ik)for(let i=0;i<w.ik.length;i++){let u=w.ik[i],n=v.findIkConstraint(u);if(!n)throw new Error(`Couldn't find IK constraint ${u} for skin ${w.name}.`);e.constraints.push(n)}if(w.transform)for(let i=0;i<w.transform.length;i++){let u=w.transform[i],n=v.findTransformConstraint(u);if(!n)throw new Error(`Couldn't find transform constraint ${u} for skin ${w.name}.`);e.constraints.push(n)}if(w.path)for(let i=0;i<w.path.length;i++){let u=w.path[i],n=v.findPathConstraint(u);if(!n)throw new Error(`Couldn't find path constraint ${u} for skin ${w.name}.`);e.constraints.push(n)}if(w.physics)for(let i=0;i<w.physics.length;i++){let u=w.physics[i],n=v.findPhysicsConstraint(u);if(!n)throw new Error(`Couldn't find physics constraint ${u} for skin ${w.name}.`);e.constraints.push(n)}for(let i in w.attachments){let u=v.findSlot(i);if(!u)throw new Error(`Couldn't find slot ${i} for skin ${w.name}.`);let n=w.attachments[i];for(let r in n){let a=this.readAttachment(n[r],e,u.index,r,v);a&&e.setAttachment(u.index,r,a)}}v.skins.push(e),e.name=="default"&&(v.defaultSkin=e)}for(let h=0,w=this.linkedMeshes.length;h<w;h++){let e=this.linkedMeshes[h],i=e.skin?v.findSkin(e.skin):v.defaultSkin;if(!i)throw new Error(`Skin not found: ${e.skin}`);let u=i.getAttachment(e.slotIndex,e.parent);if(!u)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?u:e.mesh,e.mesh.setParentMesh(u),e.mesh.region!=null&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,x.events)for(let h in x.events){let w=x.events[h],e=new NS(h);e.intValue=me(w,"int",0),e.floatValue=me(w,"float",0),e.stringValue=me(w,"string",""),e.audioPath=me(w,"audio",null),e.audioPath&&(e.volume=me(w,"volume",1),e.balance=me(w,"balance",0)),v.events.push(e)}if(x.animations)for(let h in x.animations){let w=x.animations[h];this.readAnimation(w,h,v)}return v}readAttachment(t,c,v,x,b){let h=this.scale;switch(x=me(t,"name",x),me(t,"type","region")){case"region":{let w=me(t,"path",x),e=this.readSequence(me(t,"sequence",null)),i=this.attachmentLoader.newRegionAttachment(c,x,w,e);if(!i)return null;i.path=w,i.x=me(t,"x",0)*h,i.y=me(t,"y",0)*h,i.scaleX=me(t,"scaleX",1),i.scaleY=me(t,"scaleY",1),i.rotation=me(t,"rotation",0),i.width=t.width*h,i.height=t.height*h,i.sequence=e;let u=me(t,"color",null);return u&&i.color.setFromString(u),i.region!=null&&i.updateRegion(),i}case"boundingbox":{let w=this.attachmentLoader.newBoundingBoxAttachment(c,x);if(!w)return null;this.readVertices(t,w,t.vertexCount<<1);let e=me(t,"color",null);return e&&w.color.setFromString(e),w}case"mesh":case"linkedmesh":{let w=me(t,"path",x),e=this.readSequence(me(t,"sequence",null)),i=this.attachmentLoader.newMeshAttachment(c,x,w,e);if(!i)return null;i.path=w;let u=me(t,"color",null);u&&i.color.setFromString(u),i.width=me(t,"width",0)*h,i.height=me(t,"height",0)*h,i.sequence=e;let n=me(t,"parent",null);if(n)return this.linkedMeshes.push(new iI(i,me(t,"skin",null),v,n,me(t,"timelines",!0))),i;let r=t.uvs;return this.readVertices(t,i,r.length),i.triangles=t.triangles,i.regionUVs=r,i.region!=null&&i.updateRegion(),i.edges=me(t,"edges",null),i.hullLength=me(t,"hull",0)*2,i}case"path":{let w=this.attachmentLoader.newPathAttachment(c,x);if(!w)return null;w.closed=me(t,"closed",!1),w.constantSpeed=me(t,"constantSpeed",!0);let e=t.vertexCount;this.readVertices(t,w,e<<1);let i=ke.newArray(e/3,0);for(let n=0;n<t.lengths.length;n++)i[n]=t.lengths[n]*h;w.lengths=i;let u=me(t,"color",null);return u&&w.color.setFromString(u),w}case"point":{let w=this.attachmentLoader.newPointAttachment(c,x);if(!w)return null;w.x=me(t,"x",0)*h,w.y=me(t,"y",0)*h,w.rotation=me(t,"rotation",0);let e=me(t,"color",null);return e&&w.color.setFromString(e),w}case"clipping":{let w=this.attachmentLoader.newClippingAttachment(c,x);if(!w)return null;let e=me(t,"end",null);e&&(w.endSlot=b.findSlot(e));let i=t.vertexCount;this.readVertices(t,w,i<<1);let u=me(t,"color",null);return u&&w.color.setFromString(u),w}}return null}readSequence(t){if(t==null)return null;let c=new $w(me(t,"count",0));return c.start=me(t,"start",1),c.digits=me(t,"digits",0),c.setupIndex=me(t,"setup",0),c}readVertices(t,c,v){let x=this.scale;c.worldVerticesLength=v;let b=t.vertices;if(v==b.length){let e=ke.toFloatArray(b);if(x!=1)for(let i=0,u=b.length;i<u;i++)e[i]*=x;c.vertices=e;return}let h=new Array,w=new Array;for(let e=0,i=b.length;e<i;){let u=b[e++];w.push(u);for(let n=e+u*4;e<n;e+=4)w.push(b[e]),h.push(b[e+1]*x),h.push(b[e+2]*x),h.push(b[e+3])}c.bones=w,c.vertices=ke.toFloatArray(h)}readAnimation(t,c,v){let x=this.scale,b=new Array;if(t.slots)for(let w in t.slots){let e=t.slots[w],i=v.findSlot(w);if(!i)throw new Error("Slot not found: "+w);let u=i.index;for(let n in e){let r=e[n];if(!r)continue;let a=r.length;if(n=="attachment"){let s=new il(a,u);for(let o=0;o<a;o++){let d=r[o];s.setFrame(o,me(d,"time",0),me(d,"name",null))}b.push(s)}else if(n=="rgba"){let s=new rS(a,a<<2,u),o=r[0],d=me(o,"time",0),l=Rt.fromString(o.color);for(let f=0,m=0;;f++){s.setFrame(f,d,l.r,l.g,l.b,l.a);let g=r[f+1];if(!g){s.shrink(m);break}let p=me(g,"time",0),y=Rt.fromString(g.color),S=o.curve;S&&(m=oi(S,s,m,f,0,d,p,l.r,y.r,1),m=oi(S,s,m,f,1,d,p,l.g,y.g,1),m=oi(S,s,m,f,2,d,p,l.b,y.b,1),m=oi(S,s,m,f,3,d,p,l.a,y.a,1)),d=p,l=y,o=g}b.push(s)}else if(n=="rgb"){let s=new oS(a,a*3,u),o=r[0],d=me(o,"time",0),l=Rt.fromString(o.color);for(let f=0,m=0;;f++){s.setFrame(f,d,l.r,l.g,l.b);let g=r[f+1];if(!g){s.shrink(m);break}let p=me(g,"time",0),y=Rt.fromString(g.color),S=o.curve;S&&(m=oi(S,s,m,f,0,d,p,l.r,y.r,1),m=oi(S,s,m,f,1,d,p,l.g,y.g,1),m=oi(S,s,m,f,2,d,p,l.b,y.b,1)),d=p,l=y,o=g}b.push(s)}else if(n=="alpha")b.push(Sa(r,new lS(a,a,u),0,1));else if(n=="rgba2"){let s=new hS(a,a*7,u),o=r[0],d=me(o,"time",0),l=Rt.fromString(o.light),f=Rt.fromString(o.dark);for(let m=0,g=0;;m++){s.setFrame(m,d,l.r,l.g,l.b,l.a,f.r,f.g,f.b);let p=r[m+1];if(!p){s.shrink(g);break}let y=me(p,"time",0),S=Rt.fromString(p.light),C=Rt.fromString(p.dark),A=o.curve;A&&(g=oi(A,s,g,m,0,d,y,l.r,S.r,1),g=oi(A,s,g,m,1,d,y,l.g,S.g,1),g=oi(A,s,g,m,2,d,y,l.b,S.b,1),g=oi(A,s,g,m,3,d,y,l.a,S.a,1),g=oi(A,s,g,m,4,d,y,f.r,C.r,1),g=oi(A,s,g,m,5,d,y,f.g,C.g,1),g=oi(A,s,g,m,6,d,y,f.b,C.b,1)),d=y,l=S,f=C,o=p}b.push(s)}else if(n=="rgb2"){let s=new dS(a,a*6,u),o=r[0],d=me(o,"time",0),l=Rt.fromString(o.light),f=Rt.fromString(o.dark);for(let m=0,g=0;;m++){s.setFrame(m,d,l.r,l.g,l.b,f.r,f.g,f.b);let p=r[m+1];if(!p){s.shrink(g);break}let y=me(p,"time",0),S=Rt.fromString(p.light),C=Rt.fromString(p.dark),A=o.curve;A&&(g=oi(A,s,g,m,0,d,y,l.r,S.r,1),g=oi(A,s,g,m,1,d,y,l.g,S.g,1),g=oi(A,s,g,m,2,d,y,l.b,S.b,1),g=oi(A,s,g,m,3,d,y,f.r,C.r,1),g=oi(A,s,g,m,4,d,y,f.g,C.g,1),g=oi(A,s,g,m,5,d,y,f.b,C.b,1)),d=y,l=S,f=C,o=p}b.push(s)}}}if(t.bones)for(let w in t.bones){let e=t.bones[w],i=v.findBone(w);if(!i)throw new Error("Bone not found: "+w);let u=i.index;for(let n in e){let r=e[n],a=r.length;if(a!=0){if(n==="rotate")b.push(Sa(r,new _u(a,a,u),0,1));else if(n==="translate"){let s=new Jw(a,a<<1,u);b.push(cg(r,s,"x","y",0,x))}else if(n==="translatex"){let s=new Zw(a,a,u);b.push(Sa(r,s,0,x))}else if(n==="translatey"){let s=new qw(a,a,u);b.push(Sa(r,s,0,x))}else if(n==="scale"){let s=new _w(a,a<<1,u);b.push(cg(r,s,"x","y",1,1))}else if(n==="scalex"){let s=new eS(a,a,u);b.push(Sa(r,s,1,1))}else if(n==="scaley"){let s=new tS(a,a,u);b.push(Sa(r,s,1,1))}else if(n==="shear"){let s=new iS(a,a<<1,u);b.push(cg(r,s,"x","y",0,1))}else if(n==="shearx"){let s=new sS(a,a,u);b.push(Sa(r,s,0,1))}else if(n==="sheary"){let s=new aS(a,a,u);b.push(Sa(r,s,0,1))}else if(n==="inherit"){let s=new nS(a,i.index);for(let o=0;o<r.length;o++){let d=r[o];s.setFrame(o,me(d,"time",0),ke.enumValue(Fi,me(d,"inherit","Normal")))}b.push(s)}}}}if(t.ik)for(let w in t.ik){let e=t.ik[w],i=e[0];if(!i)continue;let u=v.findIkConstraint(w);if(!u)throw new Error("IK Constraint not found: "+w);let n=v.ikConstraints.indexOf(u),r=new cS(e.length,e.length<<1,n),a=me(i,"time",0),s=me(i,"mix",1),o=me(i,"softness",0)*x;for(let d=0,l=0;;d++){r.setFrame(d,a,s,o,me(i,"bendPositive",!0)?1:-1,me(i,"compress",!1),me(i,"stretch",!1));let f=e[d+1];if(!f){r.shrink(l);break}let m=me(f,"time",0),g=me(f,"mix",1),p=me(f,"softness",0)*x,y=i.curve;y&&(l=oi(y,r,l,d,0,a,m,s,g,1),l=oi(y,r,l,d,1,a,m,o,p,x)),a=m,s=g,o=p,i=f}b.push(r)}if(t.transform)for(let w in t.transform){let e=t.transform[w],i=e[0];if(!i)continue;let u=v.findTransformConstraint(w);if(!u)throw new Error("Transform constraint not found: "+w);let n=v.transformConstraints.indexOf(u),r=new fS(e.length,e.length*6,n),a=me(i,"time",0),s=me(i,"mixRotate",1),o=me(i,"mixX",1),d=me(i,"mixY",o),l=me(i,"mixScaleX",1),f=me(i,"mixScaleY",l),m=me(i,"mixShearY",1);for(let g=0,p=0;;g++){r.setFrame(g,a,s,o,d,l,f,m);let y=e[g+1];if(!y){r.shrink(p);break}let S=me(y,"time",0),C=me(y,"mixRotate",1),A=me(y,"mixX",1),M=me(y,"mixY",A),L=me(y,"mixScaleX",1),P=me(y,"mixScaleY",L),O=me(y,"mixShearY",1),D=i.curve;D&&(p=oi(D,r,p,g,0,a,S,s,C,1),p=oi(D,r,p,g,1,a,S,o,A,1),p=oi(D,r,p,g,2,a,S,d,M,1),p=oi(D,r,p,g,3,a,S,l,L,1),p=oi(D,r,p,g,4,a,S,f,P,1),p=oi(D,r,p,g,5,a,S,m,O,1)),a=S,s=C,o=A,d=M,l=L,f=P,l=L,i=y}b.push(r)}if(t.path)for(let w in t.path){let e=t.path[w],i=v.findPathConstraint(w);if(!i)throw new Error("Path constraint not found: "+w);let u=v.pathConstraints.indexOf(i);for(let n in e){let r=e[n],a=r[0];if(!a)continue;let s=r.length;if(n==="position"){let o=new mS(s,s,u);b.push(Sa(r,o,0,i.positionMode==Xa.Fixed?x:1))}else if(n==="spacing"){let o=new gS(s,s,u);b.push(Sa(r,o,0,i.spacingMode==qi.Length||i.spacingMode==qi.Fixed?x:1))}else if(n==="mix"){let o=new pS(s,s*3,u),d=me(a,"time",0),l=me(a,"mixRotate",1),f=me(a,"mixX",1),m=me(a,"mixY",f);for(let g=0,p=0;;g++){o.setFrame(g,d,l,f,m);let y=r[g+1];if(!y){o.shrink(p);break}let S=me(y,"time",0),C=me(y,"mixRotate",1),A=me(y,"mixX",1),M=me(y,"mixY",A),L=a.curve;L&&(p=oi(L,o,p,g,0,d,S,l,C,1),p=oi(L,o,p,g,1,d,S,f,A,1),p=oi(L,o,p,g,2,d,S,m,M,1)),d=S,l=C,f=A,m=M,a=y}b.push(o)}}}if(t.physics)for(let w in t.physics){let e=t.physics[w],i=-1;if(w.length>0){let u=v.findPhysicsConstraint(w);if(!u)throw new Error("Physics constraint not found: "+w);i=v.physicsConstraints.indexOf(u)}for(let u in e){let n=e[u],r=n[0];if(!r)continue;let a=n.length;if(u=="reset"){const o=new AS(a,i);for(let d=0;r!=null;r=n[d+1],d++)o.setFrame(d,me(r,"time",0));b.push(o);continue}let s;if(u=="inertia")s=new vS(a,a,i);else if(u=="strength")s=new yS(a,a,i);else if(u=="damping")s=new xS(a,a,i);else if(u=="mass")s=new wS(a,a,i);else if(u=="wind")s=new SS(a,a,i);else if(u=="gravity")s=new TS(a,a,i);else if(u=="mix")s=new CS(a,a,i);else continue;b.push(Sa(n,s,0,1))}}if(t.attachments)for(let w in t.attachments){let e=t.attachments[w],i=v.findSkin(w);if(!i)throw new Error("Skin not found: "+w);for(let u in e){let n=e[u],r=v.findSlot(u);if(!r)throw new Error("Slot not found: "+u);let a=r.index;for(let s in n){let o=n[s],d=i.getAttachment(a,s);for(let l in o){let f=o[l],m=f[0];if(m){if(l=="deform"){let g=d.bones,p=d.vertices,y=g?p.length/3*2:p.length,S=new uS(f.length,f.length,a,d),C=me(m,"time",0);for(let A=0,M=0;;A++){let L,P=me(m,"vertices",null);if(!P)L=g?ke.newFloatArray(y):p;else{L=ke.newFloatArray(y);let F=me(m,"offset",0);if(ke.arrayCopy(P,0,L,F,P.length),x!=1)for(let H=F,k=H+P.length;H<k;H++)L[H]*=x;if(!g)for(let H=0;H<y;H++)L[H]+=p[H]}S.setFrame(A,C,L);let O=f[A+1];if(!O){S.shrink(M);break}let D=me(O,"time",0),I=m.curve;I&&(M=oi(I,S,M,A,0,C,D,0,1,1)),C=D,m=O}b.push(S)}else if(l=="sequence"){let g=new bS(f.length,a,d),p=0;for(let y=0;y<f.length;y++){let S=me(m,"delay",p),C=me(m,"time",0),A=hs[me(m,"mode","hold")],M=me(m,"index",0);g.setFrame(y,C,A,M,S),p=S,m=f[y+1]}b.push(g)}}}}}}if(t.drawOrder){let w=new zh(t.drawOrder.length),e=v.slots.length,i=0;for(let u=0;u<t.drawOrder.length;u++,i++){let n=t.drawOrder[u],r=null,a=me(n,"offsets",null);if(a){r=ke.newArray(e,-1);let s=ke.newArray(e-a.length,0),o=0,d=0;for(let l=0;l<a.length;l++){let f=a[l],m=v.findSlot(f.slot);if(!m)throw new Error("Slot not found: "+m);let g=m.index;for(;o!=g;)s[d++]=o++;r[o+f.offset]=o++}for(;o<e;)s[d++]=o++;for(let l=e-1;l>=0;l--)r[l]==-1&&(r[l]=s[--d])}w.setFrame(i,me(n,"time",0),r)}b.push(w)}if(t.events){let w=new xp(t.events.length),e=0;for(let i=0;i<t.events.length;i++,e++){let u=t.events[i],n=v.findEvent(u.name);if(!n)throw new Error("Event not found: "+u.name);let r=new OS(ke.toSinglePrecision(me(u,"time",0)),n);r.intValue=me(u,"int",n.intValue),r.floatValue=me(u,"float",n.floatValue),r.stringValue=me(u,"string",n.stringValue),r.data.audioPath&&(r.volume=me(u,"volume",1),r.balance=me(u,"balance",0)),w.setFrame(e,r)}b.push(w)}let h=0;for(let w=0,e=b.length;w<e;w++)h=Math.max(h,b[w].getDuration());v.animations.push(new vp(c,b,h))}}let iI=class{constructor(t,c,v,x,b){G(this,"parent");G(this,"skin");G(this,"slotIndex");G(this,"mesh");G(this,"inheritTimeline");this.mesh=t,this.skin=c,this.slotIndex=v,this.parent=x,this.inheritTimeline=b}};function Sa(R,t,c,v){let x=R[0],b=me(x,"time",0),h=me(x,"value",c)*v,w=0;for(let e=0;;e++){t.setFrame(e,b,h);let i=R[e+1];if(!i)return t.shrink(w),t;let u=me(i,"time",0),n=me(i,"value",c)*v;x.curve&&(w=oi(x.curve,t,w,e,0,b,u,h,n,v)),b=u,h=n,x=i}}function cg(R,t,c,v,x,b){let h=R[0],w=me(h,"time",0),e=me(h,c,x)*b,i=me(h,v,x)*b,u=0;for(let n=0;;n++){t.setFrame(n,w,e,i);let r=R[n+1];if(!r)return t.shrink(u),t;let a=me(r,"time",0),s=me(r,c,x)*b,o=me(r,v,x)*b,d=h.curve;d&&(u=oi(d,t,u,n,0,w,a,e,s,b),u=oi(d,t,u,n,1,w,a,i,o,b)),w=a,e=s,i=o,h=r}}function oi(R,t,c,v,x,b,h,w,e,i){if(R=="stepped")return t.setStepped(v),c;let u=x<<2,n=R[u],r=R[u+1]*i,a=R[u+2],s=R[u+3]*i;return t.setBezier(c,v,x,b,w,n,r,a,s,h,e),c+1}function me(R,t,c){return R[t]!==void 0?R[t]:c}typeof Math.fround>"u"&&(Math.fround=function(R){return function(t){return R[0]=t,R[0]}}(new Float32Array(1)));let Vs=class{constructor(t,c={alpha:"true"}){G(this,"canvas");G(this,"gl");G(this,"restorables",new Array);if(t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext)this.gl=t,this.canvas=this.gl.canvas;else{let v=t;this.gl=v.getContext("webgl2",c)||v.getContext("webgl",c),this.canvas=v,v.addEventListener("webglcontextlost",x=>{x&&x.preventDefault()}),v.addEventListener("webglcontextrestored",x=>{for(let b=0,h=this.restorables.length;b<h;b++)this.restorables[b].restore()})}}addRestorable(t){this.restorables.push(t)}removeRestorable(t){let c=this.restorables.indexOf(t);c>-1&&this.restorables.splice(c,1)}};var lr;let XS=(lr=class extends RS{constructor(c,v,x=!1){super(v);G(this,"context");G(this,"texture",null);G(this,"boundUnit",0);G(this,"useMipMaps",!1);this.context=c instanceof Vs?c:new Vs(c),this.useMipMaps=x,this.restore(),this.context.addRestorable(this)}setFilters(c,v){let x=this.context.gl;this.bind(),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,lr.validateMagFilter(v)),this.useMipMaps=lr.usesMipMaps(c),this.useMipMaps&&x.generateMipmap(x.TEXTURE_2D)}static validateMagFilter(c){switch(c){case bs.MipMapLinearLinear:case bs.MipMapLinearNearest:case bs.MipMapNearestLinear:case bs.MipMapNearestNearest:return bs.Linear;default:return c}}static usesMipMaps(c){switch(c){case bs.MipMapLinearLinear:case bs.MipMapLinearNearest:case bs.MipMapNearestLinear:case bs.MipMapNearestNearest:return!0;default:return!1}}setWraps(c,v){let x=this.context.gl;this.bind(),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,v)}update(c){let v=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,this._image),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,c?v.LINEAR_MIPMAP_LINEAR:v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),c&&v.generateMipmap(v.TEXTURE_2D)}restore(){this.texture=null,this.update(this.useMipMaps)}bind(c=0){let v=this.context.gl;this.boundUnit=c,v.activeTexture(v.TEXTURE0+c),v.bindTexture(v.TEXTURE_2D,this.texture)}unbind(){let c=this.context.gl;c.activeTexture(c.TEXTURE0+this.boundUnit),c.bindTexture(c.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}},G(lr,"DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL",!1),lr),cl=class{constructor(t=0,c=0,v=0){G(this,"x",0);G(this,"y",0);G(this,"z",0);this.x=t,this.y=c,this.z=v}setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,c,v){return this.x=t,this.y=c,this.z=v,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}normalize(){let t=this.length();return t==0?this:(t=1/t,this.x*=t,this.y*=t,this.z*=t,this)}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){let c=t.values;return this.set(this.x*c[Ke]+this.y*c[nt]+this.z*c[rt]+c[$e],this.x*c[ot]+this.y*c[Qe]+this.z*c[lt]+c[Je],this.x*c[ht]+this.y*c[dt]+this.z*c[Ze]+c[qe])}project(t){let c=t.values,v=1/(this.x*c[wt]+this.y*c[St]+this.z*c[Tt]+c[yt]);return this.set((this.x*c[Ke]+this.y*c[nt]+this.z*c[rt]+c[$e])*v,(this.x*c[ot]+this.y*c[Qe]+this.z*c[lt]+c[Je])*v,(this.x*c[ht]+this.y*c[dt]+this.z*c[Ze]+c[qe])*v)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let c=t.x-this.x,v=t.y-this.y,x=t.z-this.z;return Math.sqrt(c*c+v*v+x*x)}};const Ke=0,nt=4,rt=8,$e=12,ot=1,Qe=5,lt=9,Je=13,ht=2,dt=6,Ze=10,qe=14,wt=3,St=7,Tt=11,yt=15;var Ji;let wu=(Ji=class{constructor(){G(this,"temp",new Float32Array(16));G(this,"values",new Float32Array(16));let t=this.values;t[Ke]=1,t[Qe]=1,t[Ze]=1,t[yt]=1}set(t){return this.values.set(t),this}transpose(){let t=this.temp,c=this.values;return t[Ke]=c[Ke],t[nt]=c[ot],t[rt]=c[ht],t[$e]=c[wt],t[ot]=c[nt],t[Qe]=c[Qe],t[lt]=c[dt],t[Je]=c[St],t[ht]=c[rt],t[dt]=c[lt],t[Ze]=c[Ze],t[qe]=c[Tt],t[wt]=c[$e],t[St]=c[Je],t[Tt]=c[qe],t[yt]=c[yt],this.set(t)}identity(){let t=this.values;return t[Ke]=1,t[nt]=0,t[rt]=0,t[$e]=0,t[ot]=0,t[Qe]=1,t[lt]=0,t[Je]=0,t[ht]=0,t[dt]=0,t[Ze]=1,t[qe]=0,t[wt]=0,t[St]=0,t[Tt]=0,t[yt]=1,this}invert(){let t=this.values,c=this.temp,v=t[wt]*t[dt]*t[lt]*t[$e]-t[ht]*t[St]*t[lt]*t[$e]-t[wt]*t[Qe]*t[Ze]*t[$e]+t[ot]*t[St]*t[Ze]*t[$e]+t[ht]*t[Qe]*t[Tt]*t[$e]-t[ot]*t[dt]*t[Tt]*t[$e]-t[wt]*t[dt]*t[rt]*t[Je]+t[ht]*t[St]*t[rt]*t[Je]+t[wt]*t[nt]*t[Ze]*t[Je]-t[Ke]*t[St]*t[Ze]*t[Je]-t[ht]*t[nt]*t[Tt]*t[Je]+t[Ke]*t[dt]*t[Tt]*t[Je]+t[wt]*t[Qe]*t[rt]*t[qe]-t[ot]*t[St]*t[rt]*t[qe]-t[wt]*t[nt]*t[lt]*t[qe]+t[Ke]*t[St]*t[lt]*t[qe]+t[ot]*t[nt]*t[Tt]*t[qe]-t[Ke]*t[Qe]*t[Tt]*t[qe]-t[ht]*t[Qe]*t[rt]*t[yt]+t[ot]*t[dt]*t[rt]*t[yt]+t[ht]*t[nt]*t[lt]*t[yt]-t[Ke]*t[dt]*t[lt]*t[yt]-t[ot]*t[nt]*t[Ze]*t[yt]+t[Ke]*t[Qe]*t[Ze]*t[yt];if(v==0)throw new Error("non-invertible matrix");let x=1/v;return c[Ke]=t[lt]*t[qe]*t[St]-t[Je]*t[Ze]*t[St]+t[Je]*t[dt]*t[Tt]-t[Qe]*t[qe]*t[Tt]-t[lt]*t[dt]*t[yt]+t[Qe]*t[Ze]*t[yt],c[nt]=t[$e]*t[Ze]*t[St]-t[rt]*t[qe]*t[St]-t[$e]*t[dt]*t[Tt]+t[nt]*t[qe]*t[Tt]+t[rt]*t[dt]*t[yt]-t[nt]*t[Ze]*t[yt],c[rt]=t[rt]*t[Je]*t[St]-t[$e]*t[lt]*t[St]+t[$e]*t[Qe]*t[Tt]-t[nt]*t[Je]*t[Tt]-t[rt]*t[Qe]*t[yt]+t[nt]*t[lt]*t[yt],c[$e]=t[$e]*t[lt]*t[dt]-t[rt]*t[Je]*t[dt]-t[$e]*t[Qe]*t[Ze]+t[nt]*t[Je]*t[Ze]+t[rt]*t[Qe]*t[qe]-t[nt]*t[lt]*t[qe],c[ot]=t[Je]*t[Ze]*t[wt]-t[lt]*t[qe]*t[wt]-t[Je]*t[ht]*t[Tt]+t[ot]*t[qe]*t[Tt]+t[lt]*t[ht]*t[yt]-t[ot]*t[Ze]*t[yt],c[Qe]=t[rt]*t[qe]*t[wt]-t[$e]*t[Ze]*t[wt]+t[$e]*t[ht]*t[Tt]-t[Ke]*t[qe]*t[Tt]-t[rt]*t[ht]*t[yt]+t[Ke]*t[Ze]*t[yt],c[lt]=t[$e]*t[lt]*t[wt]-t[rt]*t[Je]*t[wt]-t[$e]*t[ot]*t[Tt]+t[Ke]*t[Je]*t[Tt]+t[rt]*t[ot]*t[yt]-t[Ke]*t[lt]*t[yt],c[Je]=t[rt]*t[Je]*t[ht]-t[$e]*t[lt]*t[ht]+t[$e]*t[ot]*t[Ze]-t[Ke]*t[Je]*t[Ze]-t[rt]*t[ot]*t[qe]+t[Ke]*t[lt]*t[qe],c[ht]=t[Qe]*t[qe]*t[wt]-t[Je]*t[dt]*t[wt]+t[Je]*t[ht]*t[St]-t[ot]*t[qe]*t[St]-t[Qe]*t[ht]*t[yt]+t[ot]*t[dt]*t[yt],c[dt]=t[$e]*t[dt]*t[wt]-t[nt]*t[qe]*t[wt]-t[$e]*t[ht]*t[St]+t[Ke]*t[qe]*t[St]+t[nt]*t[ht]*t[yt]-t[Ke]*t[dt]*t[yt],c[Ze]=t[nt]*t[Je]*t[wt]-t[$e]*t[Qe]*t[wt]+t[$e]*t[ot]*t[St]-t[Ke]*t[Je]*t[St]-t[nt]*t[ot]*t[yt]+t[Ke]*t[Qe]*t[yt],c[qe]=t[$e]*t[Qe]*t[ht]-t[nt]*t[Je]*t[ht]-t[$e]*t[ot]*t[dt]+t[Ke]*t[Je]*t[dt]+t[nt]*t[ot]*t[qe]-t[Ke]*t[Qe]*t[qe],c[wt]=t[lt]*t[dt]*t[wt]-t[Qe]*t[Ze]*t[wt]-t[lt]*t[ht]*t[St]+t[ot]*t[Ze]*t[St]+t[Qe]*t[ht]*t[Tt]-t[ot]*t[dt]*t[Tt],c[St]=t[nt]*t[Ze]*t[wt]-t[rt]*t[dt]*t[wt]+t[rt]*t[ht]*t[St]-t[Ke]*t[Ze]*t[St]-t[nt]*t[ht]*t[Tt]+t[Ke]*t[dt]*t[Tt],c[Tt]=t[rt]*t[Qe]*t[wt]-t[nt]*t[lt]*t[wt]-t[rt]*t[ot]*t[St]+t[Ke]*t[lt]*t[St]+t[nt]*t[ot]*t[Tt]-t[Ke]*t[Qe]*t[Tt],c[yt]=t[nt]*t[lt]*t[ht]-t[rt]*t[Qe]*t[ht]+t[rt]*t[ot]*t[dt]-t[Ke]*t[lt]*t[dt]-t[nt]*t[ot]*t[Ze]+t[Ke]*t[Qe]*t[Ze],t[Ke]=c[Ke]*x,t[nt]=c[nt]*x,t[rt]=c[rt]*x,t[$e]=c[$e]*x,t[ot]=c[ot]*x,t[Qe]=c[Qe]*x,t[lt]=c[lt]*x,t[Je]=c[Je]*x,t[ht]=c[ht]*x,t[dt]=c[dt]*x,t[Ze]=c[Ze]*x,t[qe]=c[qe]*x,t[wt]=c[wt]*x,t[St]=c[St]*x,t[Tt]=c[Tt]*x,t[yt]=c[yt]*x,this}determinant(){let t=this.values;return t[wt]*t[dt]*t[lt]*t[$e]-t[ht]*t[St]*t[lt]*t[$e]-t[wt]*t[Qe]*t[Ze]*t[$e]+t[ot]*t[St]*t[Ze]*t[$e]+t[ht]*t[Qe]*t[Tt]*t[$e]-t[ot]*t[dt]*t[Tt]*t[$e]-t[wt]*t[dt]*t[rt]*t[Je]+t[ht]*t[St]*t[rt]*t[Je]+t[wt]*t[nt]*t[Ze]*t[Je]-t[Ke]*t[St]*t[Ze]*t[Je]-t[ht]*t[nt]*t[Tt]*t[Je]+t[Ke]*t[dt]*t[Tt]*t[Je]+t[wt]*t[Qe]*t[rt]*t[qe]-t[ot]*t[St]*t[rt]*t[qe]-t[wt]*t[nt]*t[lt]*t[qe]+t[Ke]*t[St]*t[lt]*t[qe]+t[ot]*t[nt]*t[Tt]*t[qe]-t[Ke]*t[Qe]*t[Tt]*t[qe]-t[ht]*t[Qe]*t[rt]*t[yt]+t[ot]*t[dt]*t[rt]*t[yt]+t[ht]*t[nt]*t[lt]*t[yt]-t[Ke]*t[dt]*t[lt]*t[yt]-t[ot]*t[nt]*t[Ze]*t[yt]+t[Ke]*t[Qe]*t[Ze]*t[yt]}translate(t,c,v){let x=this.values;return x[$e]+=t,x[Je]+=c,x[qe]+=v,this}copy(){return new Ji().set(this.values)}projection(t,c,v,x){this.identity();let b=1/Math.tan(v*(Math.PI/180)/2),h=(c+t)/(t-c),w=2*c*t/(t-c),e=this.values;return e[Ke]=b/x,e[ot]=0,e[ht]=0,e[wt]=0,e[nt]=0,e[Qe]=b,e[dt]=0,e[St]=0,e[rt]=0,e[lt]=0,e[Ze]=h,e[Tt]=-1,e[$e]=0,e[Je]=0,e[qe]=w,e[yt]=0,this}ortho2d(t,c,v,x){return this.ortho(t,t+v,c,c+x,0,1)}ortho(t,c,v,x,b,h){this.identity();let w=2/(c-t),e=2/(x-v),i=-2/(h-b),u=-(c+t)/(c-t),n=-(x+v)/(x-v),r=-(h+b)/(h-b),a=this.values;return a[Ke]=w,a[ot]=0,a[ht]=0,a[wt]=0,a[nt]=0,a[Qe]=e,a[dt]=0,a[St]=0,a[rt]=0,a[lt]=0,a[Ze]=i,a[Tt]=0,a[$e]=u,a[Je]=n,a[qe]=r,a[yt]=1,this}multiply(t){let c=this.temp,v=this.values,x=t.values;return c[Ke]=v[Ke]*x[Ke]+v[nt]*x[ot]+v[rt]*x[ht]+v[$e]*x[wt],c[nt]=v[Ke]*x[nt]+v[nt]*x[Qe]+v[rt]*x[dt]+v[$e]*x[St],c[rt]=v[Ke]*x[rt]+v[nt]*x[lt]+v[rt]*x[Ze]+v[$e]*x[Tt],c[$e]=v[Ke]*x[$e]+v[nt]*x[Je]+v[rt]*x[qe]+v[$e]*x[yt],c[ot]=v[ot]*x[Ke]+v[Qe]*x[ot]+v[lt]*x[ht]+v[Je]*x[wt],c[Qe]=v[ot]*x[nt]+v[Qe]*x[Qe]+v[lt]*x[dt]+v[Je]*x[St],c[lt]=v[ot]*x[rt]+v[Qe]*x[lt]+v[lt]*x[Ze]+v[Je]*x[Tt],c[Je]=v[ot]*x[$e]+v[Qe]*x[Je]+v[lt]*x[qe]+v[Je]*x[yt],c[ht]=v[ht]*x[Ke]+v[dt]*x[ot]+v[Ze]*x[ht]+v[qe]*x[wt],c[dt]=v[ht]*x[nt]+v[dt]*x[Qe]+v[Ze]*x[dt]+v[qe]*x[St],c[Ze]=v[ht]*x[rt]+v[dt]*x[lt]+v[Ze]*x[Ze]+v[qe]*x[Tt],c[qe]=v[ht]*x[$e]+v[dt]*x[Je]+v[Ze]*x[qe]+v[qe]*x[yt],c[wt]=v[wt]*x[Ke]+v[St]*x[ot]+v[Tt]*x[ht]+v[yt]*x[wt],c[St]=v[wt]*x[nt]+v[St]*x[Qe]+v[Tt]*x[dt]+v[yt]*x[St],c[Tt]=v[wt]*x[rt]+v[St]*x[lt]+v[Tt]*x[Ze]+v[yt]*x[Tt],c[yt]=v[wt]*x[$e]+v[St]*x[Je]+v[Tt]*x[qe]+v[yt]*x[yt],this.set(this.temp)}multiplyLeft(t){let c=this.temp,v=this.values,x=t.values;return c[Ke]=x[Ke]*v[Ke]+x[nt]*v[ot]+x[rt]*v[ht]+x[$e]*v[wt],c[nt]=x[Ke]*v[nt]+x[nt]*v[Qe]+x[rt]*v[dt]+x[$e]*v[St],c[rt]=x[Ke]*v[rt]+x[nt]*v[lt]+x[rt]*v[Ze]+x[$e]*v[Tt],c[$e]=x[Ke]*v[$e]+x[nt]*v[Je]+x[rt]*v[qe]+x[$e]*v[yt],c[ot]=x[ot]*v[Ke]+x[Qe]*v[ot]+x[lt]*v[ht]+x[Je]*v[wt],c[Qe]=x[ot]*v[nt]+x[Qe]*v[Qe]+x[lt]*v[dt]+x[Je]*v[St],c[lt]=x[ot]*v[rt]+x[Qe]*v[lt]+x[lt]*v[Ze]+x[Je]*v[Tt],c[Je]=x[ot]*v[$e]+x[Qe]*v[Je]+x[lt]*v[qe]+x[Je]*v[yt],c[ht]=x[ht]*v[Ke]+x[dt]*v[ot]+x[Ze]*v[ht]+x[qe]*v[wt],c[dt]=x[ht]*v[nt]+x[dt]*v[Qe]+x[Ze]*v[dt]+x[qe]*v[St],c[Ze]=x[ht]*v[rt]+x[dt]*v[lt]+x[Ze]*v[Ze]+x[qe]*v[Tt],c[qe]=x[ht]*v[$e]+x[dt]*v[Je]+x[Ze]*v[qe]+x[qe]*v[yt],c[wt]=x[wt]*v[Ke]+x[St]*v[ot]+x[Tt]*v[ht]+x[yt]*v[wt],c[St]=x[wt]*v[nt]+x[St]*v[Qe]+x[Tt]*v[dt]+x[yt]*v[St],c[Tt]=x[wt]*v[rt]+x[St]*v[lt]+x[Tt]*v[Ze]+x[yt]*v[Tt],c[yt]=x[wt]*v[$e]+x[St]*v[Je]+x[Tt]*v[qe]+x[yt]*v[yt],this.set(this.temp)}lookAt(t,c,v){let x=Ji.xAxis,b=Ji.yAxis,h=Ji.zAxis;h.setFrom(c).normalize(),x.setFrom(c).normalize(),x.cross(v).normalize(),b.setFrom(x).cross(h).normalize(),this.identity();let w=this.values;return w[Ke]=x.x,w[nt]=x.y,w[rt]=x.z,w[ot]=b.x,w[Qe]=b.y,w[lt]=b.z,w[ht]=-h.x,w[dt]=-h.y,w[Ze]=-h.z,Ji.tmpMatrix.identity(),Ji.tmpMatrix.values[$e]=-t.x,Ji.tmpMatrix.values[Je]=-t.y,Ji.tmpMatrix.values[qe]=-t.z,this.multiply(Ji.tmpMatrix),this}},G(Ji,"xAxis",new cl),G(Ji,"yAxis",new cl),G(Ji,"zAxis",new cl),G(Ji,"tmpMatrix",new Ji),Ji),sI=class{constructor(t,c){G(this,"position",new cl(0,0,0));G(this,"direction",new cl(0,0,-1));G(this,"up",new cl(0,1,0));G(this,"near",0);G(this,"far",100);G(this,"zoom",1);G(this,"viewportWidth",0);G(this,"viewportHeight",0);G(this,"projectionView",new wu);G(this,"inverseProjectionView",new wu);G(this,"projection",new wu);G(this,"view",new wu);this.viewportWidth=t,this.viewportHeight=c,this.update()}update(){let t=this.projection,c=this.view,v=this.projectionView,x=this.inverseProjectionView,b=this.zoom,h=this.viewportWidth,w=this.viewportHeight;t.ortho(b*(-h/2),b*(h/2),b*(-w/2),b*(w/2),this.near,this.far),c.lookAt(this.position,this.direction,this.up),v.set(t.values),v.multiply(c),x.set(v.values).invert()}screenToWorld(t,c,v){let x=t.x,b=v-t.y-1;return t.x=2*x/c-1,t.y=2*b/v-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}worldToScreen(t,c,v){return t.project(this.projectionView),t.x=c*(t.x+1)/2,t.y=v*(t.y+1)/2,t.z=(t.z+1)/2,t}setViewport(t,c){this.viewportWidth=t,this.viewportHeight=c}};var $t;let xn=($t=class{constructor(t,c,v){G(this,"vertexShader");G(this,"fragmentShader");G(this,"context");G(this,"vs",null);G(this,"vsSource");G(this,"fs",null);G(this,"fsSource");G(this,"program",null);G(this,"tmp2x2",new Float32Array(2*2));G(this,"tmp3x3",new Float32Array(3*3));G(this,"tmp4x4",new Float32Array(4*4));this.vertexShader=c,this.fragmentShader=v,this.vsSource=c,this.fsSource=v,this.context=t instanceof Vs?t:new Vs(t),this.context.addRestorable(this),this.compile()}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let t=this.context.gl;try{if(this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs)}catch(c){throw this.dispose(),c}}compileShader(t,c){let v=this.context.gl,x=v.createShader(t);if(!x)throw new Error("Couldn't create shader.");if(v.shaderSource(x,c),v.compileShader(x),!v.getShaderParameter(x,v.COMPILE_STATUS)){let b="Couldn't compile shader: "+v.getShaderInfoLog(x);if(v.deleteShader(x),!v.isContextLost())throw new Error(b)}return x}compileProgram(t,c){let v=this.context.gl,x=v.createProgram();if(!x)throw new Error("Couldn't compile program.");if(v.attachShader(x,t),v.attachShader(x,c),v.linkProgram(x),!v.getProgramParameter(x,v.LINK_STATUS)){let b="Couldn't compile shader program: "+v.getProgramInfoLog(x);if(v.deleteProgram(x),!v.isContextLost())throw new Error(b)}return x}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(t,c){this.context.gl.uniform1i(this.getUniformLocation(t),c)}setUniformf(t,c){this.context.gl.uniform1f(this.getUniformLocation(t),c)}setUniform2f(t,c,v){this.context.gl.uniform2f(this.getUniformLocation(t),c,v)}setUniform3f(t,c,v,x){this.context.gl.uniform3f(this.getUniformLocation(t),c,v,x)}setUniform4f(t,c,v,x,b){this.context.gl.uniform4f(this.getUniformLocation(t),c,v,x,b)}setUniform2x2f(t,c){let v=this.context.gl;this.tmp2x2.set(c),v.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}setUniform3x3f(t,c){let v=this.context.gl;this.tmp3x3.set(c),v.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}setUniform4x4f(t,c){let v=this.context.gl;this.tmp4x4.set(c),v.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}getUniformLocation(t){let c=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let v=c.getUniformLocation(this.program,t);if(!v&&!c.isContextLost())throw new Error(`Couldn't find location for uniform ${t}`);return v}getAttributeLocation(t){let c=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let v=c.getAttribLocation(this.program,t);if(v==-1&&!c.isContextLost())throw new Error(`Couldn't find location for attribute ${t}`);return v}dispose(){this.context.removeRestorable(this);let t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}static newColoredTextured(t){let c=`
attribute vec4 ${$t.POSITION};
attribute vec4 ${$t.COLOR};
attribute vec2 ${$t.TEXCOORDS};
uniform mat4 ${$t.MVP_MATRIX};
varying vec4 v_color;
varying vec2 v_texCoords;

void main () {
	v_color = ${$t.COLOR};
	v_texCoords = ${$t.TEXCOORDS};
	gl_Position = ${$t.MVP_MATRIX} * ${$t.POSITION};
}
`,v=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_color;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main () {
	gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
}
`;return new $t(t,c,v)}static newTwoColoredTextured(t){let c=`
attribute vec4 ${$t.POSITION};
attribute vec4 ${$t.COLOR};
attribute vec4 ${$t.COLOR2};
attribute vec2 ${$t.TEXCOORDS};
uniform mat4 ${$t.MVP_MATRIX};
varying vec4 v_light;
varying vec4 v_dark;
varying vec2 v_texCoords;

void main () {
	v_light = ${$t.COLOR};
	v_dark = ${$t.COLOR2};
	v_texCoords = ${$t.TEXCOORDS};
	gl_Position = ${$t.MVP_MATRIX} * ${$t.POSITION};
}
`,v=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_light;
varying LOWP vec4 v_dark;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main () {
	vec4 texColor = texture2D(u_texture, v_texCoords);
	gl_FragColor.a = texColor.a * v_light.a;
	gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
}
`;return new $t(t,c,v)}static newColored(t){let c=`
attribute vec4 ${$t.POSITION};
attribute vec4 ${$t.COLOR};
uniform mat4 ${$t.MVP_MATRIX};
varying vec4 v_color;

void main () {
	v_color = ${$t.COLOR};
	gl_Position = ${$t.MVP_MATRIX} * ${$t.POSITION};
}
`,v=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_color;

void main () {
	gl_FragColor = v_color;
}
`;return new $t(t,c,v)}},G($t,"MVP_MATRIX","u_projTrans"),G($t,"POSITION","a_position"),G($t,"COLOR","a_color"),G($t,"COLOR2","a_color2"),G($t,"TEXCOORDS","a_texCoords"),G($t,"SAMPLER","u_texture"),$t),zS=class{constructor(t,c,v,x){G(this,"attributes");G(this,"context");G(this,"vertices");G(this,"verticesBuffer",null);G(this,"verticesLength",0);G(this,"dirtyVertices",!1);G(this,"indices");G(this,"indicesBuffer",null);G(this,"indicesLength",0);G(this,"dirtyIndices",!1);G(this,"elementsPerVertex",0);this.attributes=c,this.context=t instanceof Vs?t:new Vs(t),this.elementsPerVertex=0;for(let b=0;b<c.length;b++)this.elementsPerVertex+=c[b].numElements;this.vertices=new Float32Array(v*this.elementsPerVertex),this.indices=new Uint16Array(x),this.context.addRestorable(this)}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=!0,this.verticesLength=t}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=!0,this.indicesLength=t}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(var c=0;c<this.attributes.length;c++){let v=this.attributes[c];t+=v.numElements}return t}setVertices(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length}setIndices(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length}draw(t,c){this.drawWithOffset(t,c,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(t,c,v,x){let b=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?b.drawElements(c,x,b.UNSIGNED_SHORT,v*2):b.drawArrays(c,v,x),this.unbind(t)}bind(t){let c=this.context.gl;c.bindBuffer(c.ARRAY_BUFFER,this.verticesBuffer);let v=0;for(let x=0;x<this.attributes.length;x++){let b=this.attributes[x],h=t.getAttributeLocation(b.name);c.enableVertexAttribArray(h),c.vertexAttribPointer(h,b.numElements,c.FLOAT,!1,this.elementsPerVertex*4,v*4),v+=b.numElements}this.indicesLength>0&&c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}unbind(t){let c=this.context.gl;for(let v=0;v<this.attributes.length;v++){let x=this.attributes[v],b=t.getAttributeLocation(x.name);c.disableVertexAttribArray(b)}c.bindBuffer(c.ARRAY_BUFFER,null),this.indicesLength>0&&c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null)}update(){let t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)}},Mc=class{constructor(t,c,v){G(this,"name");G(this,"type");G(this,"numElements");this.name=t,this.type=c,this.numElements=v}},Ng=class extends Mc{constructor(){super(xn.POSITION,wl.Float,2)}},A1=class extends Mc{constructor(t=0){super(xn.TEXCOORDS+(t==0?"":t),wl.Float,2)}},Gg=class extends Mc{constructor(){super(xn.COLOR,wl.Float,4)}},aI=class extends Mc{constructor(){super(xn.COLOR2,wl.Float,4)}};var wl;(function(R){R[R.Float=0]="Float"})(wl||(wl={}));const cn=1,nI=769,b1=770,E1=771,M1=774;var ma;let L1=(ma=class{constructor(t,c=!0,v=10920){G(this,"context");G(this,"drawCalls",0);G(this,"isDrawing",!1);G(this,"mesh");G(this,"shader",null);G(this,"lastTexture",null);G(this,"verticesLength",0);G(this,"indicesLength",0);G(this,"srcColorBlend");G(this,"srcAlphaBlend");G(this,"dstBlend");G(this,"cullWasEnabled",!1);if(v>10920)throw new Error("Can't have more than 10920 triangles per batch: "+v);this.context=t instanceof Vs?t:new Vs(t);let x=c?[new Ng,new Gg,new A1,new aI]:[new Ng,new Gg,new A1];this.mesh=new zS(t,x,v,v*3);let b=this.context.gl;this.srcColorBlend=b.SRC_ALPHA,this.srcAlphaBlend=b.ONE,this.dstBlend=b.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0;let c=this.context.gl;c.enable(c.BLEND),c.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,c){const v=ma.blendModesGL[t],x=c?v.srcRgbPma:v.srcRgb,b=v.srcAlpha,h=v.dstRgb;if(this.srcColorBlend==x&&this.srcAlphaBlend==b&&this.dstBlend==h)return;this.srcColorBlend=x,this.srcAlphaBlend=b,this.dstBlend=h,this.isDrawing&&this.flush(),this.context.gl.blendFuncSeparate(x,h,b,h)}draw(t,c,v){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+c.length>this.mesh.getVertices().length||this.indicesLength+v.length>this.mesh.getIndices().length)&&this.flush();let x=this.mesh.numVertices();this.mesh.getVertices().set(c,this.verticesLength),this.verticesLength+=c.length,this.mesh.setVerticesLength(this.verticesLength);let b=this.mesh.getIndices();for(let h=this.indicesLength,w=0;w<v.length;h++,w++)b[h]=v[w]+x;this.indicesLength+=v.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){if(this.verticesLength!=0){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++,ma.globalDrawCalls++}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;let t=this.context.gl;t.disable(t.BLEND)}getDrawCalls(){return this.drawCalls}static getAndResetGlobalDrawCalls(){let t=ma.globalDrawCalls;return ma.globalDrawCalls=0,t}dispose(){this.mesh.dispose()}},G(ma,"disableCulling",!1),G(ma,"globalDrawCalls",0),G(ma,"blendModesGL",[{srcRgb:b1,srcRgbPma:cn,dstRgb:E1,srcAlpha:cn},{srcRgb:b1,srcRgbPma:cn,dstRgb:cn,srcAlpha:cn},{srcRgb:M1,srcRgbPma:M1,dstRgb:E1,srcAlpha:cn},{srcRgb:cn,srcRgbPma:cn,dstRgb:nI,srcAlpha:cn}]),ma),R1=class{constructor(t,c=10920){G(this,"context");G(this,"isDrawing",!1);G(this,"mesh");G(this,"shapeType",Cs.Filled);G(this,"color",new Rt(1,1,1,1));G(this,"shader",null);G(this,"vertexIndex",0);G(this,"tmp",new yl);G(this,"srcColorBlend");G(this,"srcAlphaBlend");G(this,"dstBlend");if(c>10920)throw new Error("Can't have more than 10920 triangles per batch: "+c);this.context=t instanceof Vs?t:new Vs(t),this.mesh=new zS(t,[new Ng,new Gg],c,0);let v=this.context.gl;this.srcColorBlend=v.SRC_ALPHA,this.srcAlphaBlend=v.ONE,this.dstBlend=v.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;let c=this.context.gl;c.enable(c.BLEND),c.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,c,v){this.srcColorBlend=t,this.srcAlphaBlend=c,this.dstBlend=v,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,v,c,v))}setColor(t){this.color.setFromColor(t)}setColorWith(t,c,v,x){this.color.set(t,c,v,x)}point(t,c,v){this.check(Cs.Point,1),v||(v=this.color),this.vertex(t,c,v)}line(t,c,v,x,b){this.check(Cs.Line,2),this.mesh.getVertices(),this.vertexIndex,b||(b=this.color),this.vertex(t,c,b),this.vertex(v,x,b)}triangle(t,c,v,x,b,h,w,e,i,u){this.check(t?Cs.Filled:Cs.Line,3),this.mesh.getVertices(),this.vertexIndex,e||(e=this.color),i||(i=this.color),u||(u=this.color),t?(this.vertex(c,v,e),this.vertex(x,b,i),this.vertex(h,w,u)):(this.vertex(c,v,e),this.vertex(x,b,i),this.vertex(x,b,e),this.vertex(h,w,i),this.vertex(h,w,e),this.vertex(c,v,i))}quad(t,c,v,x,b,h,w,e,i,u,n,r,a){this.check(t?Cs.Filled:Cs.Line,3),this.mesh.getVertices(),this.vertexIndex,u||(u=this.color),n||(n=this.color),r||(r=this.color),a||(a=this.color),t?(this.vertex(c,v,u),this.vertex(x,b,n),this.vertex(h,w,r),this.vertex(h,w,r),this.vertex(e,i,a),this.vertex(c,v,u)):(this.vertex(c,v,u),this.vertex(x,b,n),this.vertex(x,b,n),this.vertex(h,w,r),this.vertex(h,w,r),this.vertex(e,i,a),this.vertex(e,i,a),this.vertex(c,v,u))}rect(t,c,v,x,b,h){this.quad(t,c,v,c+x,v,c+x,v+b,c,v+b,h,h,h,h)}rectLine(t,c,v,x,b,h,w){this.check(t?Cs.Filled:Cs.Line,8),w||(w=this.color);let e=this.tmp.set(b-v,c-x);e.normalize(),h*=.5;let i=e.x*h,u=e.y*h;t?(this.vertex(c+i,v+u,w),this.vertex(c-i,v-u,w),this.vertex(x+i,b+u,w),this.vertex(x-i,b-u,w),this.vertex(x+i,b+u,w),this.vertex(c-i,v-u,w)):(this.vertex(c+i,v+u,w),this.vertex(c-i,v-u,w),this.vertex(x+i,b+u,w),this.vertex(x-i,b-u,w),this.vertex(x+i,b+u,w),this.vertex(c+i,v+u,w),this.vertex(x-i,b-u,w),this.vertex(c-i,v-u,w))}x(t,c,v){this.line(t-v,c-v,t+v,c+v),this.line(t-v,c+v,t+v,c-v)}polygon(t,c,v,x){if(v<3)throw new Error("Polygon must contain at least 3 vertices");this.check(Cs.Line,v*2),x||(x=this.color),this.mesh.getVertices(),this.vertexIndex,c<<=1,v<<=1;let b=t[c],h=t[c+1],w=c+v;for(let e=c,i=c+v-2;e<i;e+=2){let u=t[e],n=t[e+1],r=0,a=0;e+2>=w?(r=b,a=h):(r=t[e+2],a=t[e+3]),this.vertex(u,n,x),this.vertex(r,a,x)}}circle(t,c,v,x,b,h=0){if(h==0&&(h=Math.max(1,6*Ue.cbrt(x)|0)),h<=0)throw new Error("segments must be > 0.");b||(b=this.color);let w=2*Ue.PI/h,e=Math.cos(w),i=Math.sin(w),u=x,n=0;if(t){this.check(Cs.Filled,h*3+3),h--;for(let r=0;r<h;r++){this.vertex(c,v,b),this.vertex(c+u,v+n,b);let a=u;u=e*u-i*n,n=i*a+e*n,this.vertex(c+u,v+n,b)}this.vertex(c,v,b),this.vertex(c+u,v+n,b)}else{this.check(Cs.Line,h*2+2);for(let r=0;r<h;r++){this.vertex(c+u,v+n,b);let a=u;u=e*u-i*n,n=i*a+e*n,this.vertex(c+u,v+n,b)}this.vertex(c+u,v+n,b)}u=x,n=0,this.vertex(c+u,v+n,b)}curve(t,c,v,x,b,h,w,e,i,u){this.check(Cs.Line,i*2+2),u||(u=this.color);let n=1/i,r=n*n,a=n*n*n,s=3*n,o=3*r,d=6*r,l=6*a,f=t-v*2+b,m=c-x*2+h,g=(v-b)*3-t+w,p=(x-h)*3-c+e,y=t,S=c,C=(v-t)*s+f*o+g*a,A=(x-c)*s+m*o+p*a,M=f*d+g*l,L=m*d+p*l,P=g*l,O=p*l;for(;i-- >0;)this.vertex(y,S,u),y+=C,S+=A,C+=M,A+=L,M+=P,L+=O,this.vertex(y,S,u);this.vertex(y,S,u),this.vertex(w,e,u)}vertex(t,c,v){let x=this.vertexIndex,b=this.mesh.getVertices();b[x++]=t,b[x++]=c,b[x++]=v.r,b[x++]=v.g,b[x++]=v.b,b[x++]=v.a,this.vertexIndex=x}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let t=this.context.gl;t.disable(t.BLEND),this.isDrawing=!1}flush(){if(this.vertexIndex!=0){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0}}check(t,c){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t)if(this.mesh.maxVertices()-this.mesh.numVertices()<c)this.flush();else return;else this.flush(),this.shapeType=t}dispose(){this.mesh.dispose()}};var Cs;(function(R){R[R.Point=0]="Point",R[R.Line=1]="Line",R[R.Filled=4]="Filled"})(Cs||(Cs={}));var Sn;let rI=(Sn=class{constructor(t){G(this,"boneLineColor",new Rt(1,0,0,1));G(this,"boneOriginColor",new Rt(0,1,0,1));G(this,"attachmentLineColor",new Rt(0,0,1,.5));G(this,"triangleLineColor",new Rt(1,.64,0,.5));G(this,"pathColor",new Rt().setFromString("FF7F00"));G(this,"clipColor",new Rt(.8,0,0,2));G(this,"aabbColor",new Rt(0,1,0,.5));G(this,"drawBones",!0);G(this,"drawRegionAttachments",!0);G(this,"drawBoundingBoxes",!0);G(this,"drawMeshHull",!0);G(this,"drawMeshTriangles",!0);G(this,"drawPaths",!0);G(this,"drawSkeletonXY",!1);G(this,"drawClipping",!0);G(this,"premultipliedAlpha",!1);G(this,"scale",1);G(this,"boneWidth",2);G(this,"context");G(this,"bounds",new qF);G(this,"temp",new Array);G(this,"vertices",ke.newFloatArray(2*1024));this.context=t instanceof Vs?t:new Vs(t)}draw(t,c,v){let x=c.x,b=c.y,h=this.context.gl,w=this.premultipliedAlpha?h.ONE:h.SRC_ALPHA;t.setBlendMode(w,h.ONE,h.ONE_MINUS_SRC_ALPHA);let e=c.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let i=0,u=e.length;i<u;i++){let n=e[i];if(v&&v.indexOf(n.data.name)>-1||!n.parent)continue;let r=n.data.length*n.a+n.worldX,a=n.data.length*n.c+n.worldY;t.rectLine(!0,n.worldX,n.worldY,r,a,this.boneWidth*this.scale)}this.drawSkeletonXY&&t.x(x,b,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let i=c.slots;for(let u=0,n=i.length;u<n;u++){let r=i[u],a=r.getAttachment();if(a instanceof gi){let s=a,o=this.vertices;s.computeWorldVertices(r,o,0,2),t.line(o[0],o[1],o[2],o[3]),t.line(o[2],o[3],o[4],o[5]),t.line(o[4],o[5],o[6],o[7]),t.line(o[6],o[7],o[0],o[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let i=c.slots;for(let u=0,n=i.length;u<n;u++){let r=i[u];if(!r.bone.active)continue;let a=r.getAttachment();if(!(a instanceof Ml))continue;let s=a,o=this.vertices;s.computeWorldVertices(r,0,s.worldVerticesLength,o,0,2);let d=s.triangles,l=s.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let f=0,m=d.length;f<m;f+=3){let g=d[f]*2,p=d[f+1]*2,y=d[f+2]*2;t.triangle(!1,o[g],o[g+1],o[p],o[p+1],o[y],o[y+1])}}if(this.drawMeshHull&&l>0){t.setColor(this.attachmentLineColor),l=(l>>1)*2;let f=o[l-2],m=o[l-1];for(let g=0,p=l;g<p;g+=2){let y=o[g],S=o[g+1];t.line(y,S,f,m),f=y,m=S}}}}if(this.drawBoundingBoxes){let i=this.bounds;i.update(c,!0),t.setColor(this.aabbColor),t.rect(!1,i.minX,i.minY,i.getWidth(),i.getHeight());let u=i.polygons,n=i.boundingBoxes;for(let r=0,a=u.length;r<a;r++){let s=u[r];t.setColor(n[r].color),t.polygon(s,0,s.length)}}if(this.drawPaths){let i=c.slots;for(let u=0,n=i.length;u<n;u++){let r=i[u];if(!r.bone.active)continue;let a=r.getAttachment();if(!(a instanceof Kh))continue;let s=a,o=s.worldVerticesLength,d=this.temp=ke.setArraySize(this.temp,o,0);s.computeWorldVertices(r,0,o,d,0,2);let l=this.pathColor,f=d[2],m=d[3],g=0,p=0;if(s.closed){t.setColor(l);let y=d[0],S=d[1],C=d[o-2],A=d[o-1];g=d[o-4],p=d[o-3],t.curve(f,m,y,S,C,A,g,p,32),t.setColor(Sn.LIGHT_GRAY),t.line(f,m,y,S),t.line(g,p,C,A)}o-=4;for(let y=4;y<o;y+=6){let S=d[y],C=d[y+1],A=d[y+2],M=d[y+3];g=d[y+4],p=d[y+5],t.setColor(l),t.curve(f,m,S,C,A,M,g,p,32),t.setColor(Sn.LIGHT_GRAY),t.line(f,m,S,C),t.line(g,p,A,M),f=g,m=p}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let i=0,u=e.length;i<u;i++){let n=e[i];v&&v.indexOf(n.data.name)>-1||t.circle(!0,n.worldX,n.worldY,3*this.scale,this.boneOriginColor,8)}}if(this.drawClipping){let i=c.slots;t.setColor(this.clipColor);for(let u=0,n=i.length;u<n;u++){let r=i[u];if(!r.bone.active)continue;let a=r.getAttachment();if(!(a instanceof bc))continue;let s=a,o=s.worldVerticesLength,d=this.temp=ke.setArraySize(this.temp,o,0);s.computeWorldVertices(r,0,o,d,0,2);for(let l=0,f=d.length;l<f;l+=2){let m=d[l],g=d[l+1],p=d[(l+2)%d.length],y=d[(l+3)%d.length];t.line(m,g,p,y)}}}}dispose(){}},G(Sn,"LIGHT_GRAY",new Rt(192/255,192/255,192/255,1)),G(Sn,"GREEN",new Rt(0,1,0,1)),Sn),oI=class{constructor(t,c,v){G(this,"vertices");G(this,"numVertices");G(this,"numFloats");this.vertices=t,this.numVertices=c,this.numFloats=v}};var Qr;let lI=(Qr=class{constructor(t,c=!0){G(this,"premultipliedAlpha",!1);G(this,"tempColor",new Rt);G(this,"tempColor2",new Rt);G(this,"vertices");G(this,"vertexSize",8);G(this,"twoColorTint",!1);G(this,"renderable",new oI([],0,0));G(this,"clipper",new eI);G(this,"temp",new yl);G(this,"temp2",new yl);G(this,"temp3",new Rt);G(this,"temp4",new Rt);this.twoColorTint=c,c&&(this.vertexSize+=4),this.vertices=ke.newFloatArray(this.vertexSize*1024)}draw(t,c,v=-1,x=-1,b=null){let h=this.clipper,w=this.premultipliedAlpha,e=this.twoColorTint,i=null,u=this.renderable,n,r,a=c.drawOrder,s,o=c.color,d=e?12:8,l=!1;v==-1&&(l=!0);for(let f=0,m=a.length;f<m;f++){let g=h.isClipping()?2:d,p=a[f];if(!p.bone.active){h.clipEndWithSlot(p);continue}if(v>=0&&v==p.data.index&&(l=!0),!l){h.clipEndWithSlot(p);continue}x>=0&&x==p.data.index&&(l=!1);let y=p.getAttachment(),S;if(y instanceof gi){let C=y;u.vertices=this.vertices,u.numVertices=4,u.numFloats=g<<2,C.computeWorldVertices(p,u.vertices,0,g),r=Qr.QUAD_TRIANGLES,n=C.uvs,S=C.region.texture,s=C.color}else if(y instanceof Ml){let C=y;u.vertices=this.vertices,u.numVertices=C.worldVerticesLength>>1,u.numFloats=u.numVertices*g,u.numFloats>u.vertices.length&&(u.vertices=this.vertices=ke.newFloatArray(u.numFloats)),C.computeWorldVertices(p,0,C.worldVerticesLength,u.vertices,0,g),r=C.triangles,S=C.region.texture,n=C.uvs,s=C.color}else if(y instanceof bc){let C=y;h.clipStart(p,C);continue}else{h.clipEndWithSlot(p);continue}if(S){let C=p.color,A=this.tempColor;A.r=o.r*C.r*s.r,A.g=o.g*C.g*s.g,A.b=o.b*C.b*s.b,A.a=o.a*C.a*s.a,w&&(A.r*=A.a,A.g*=A.a,A.b*=A.a);let M=this.tempColor2;p.darkColor?(w?(M.r=p.darkColor.r*A.a,M.g=p.darkColor.g*A.a,M.b=p.darkColor.b*A.a):M.setFromColor(p.darkColor),M.a=w?1:0):M.set(0,0,0,1);let L=p.data.blendMode;if(L!=i&&(i=L,t.setBlendMode(i,w)),h.isClipping()){h.clipTriangles(u.vertices,r,r.length,n,A,M,e);let P=new Float32Array(h.clippedVertices),O=h.clippedTriangles;b&&b(P,P.length,d),t.draw(S,P,O)}else{let P=u.vertices;if(e)for(let D=2,I=0,F=u.numFloats;D<F;D+=d,I+=2)P[D]=A.r,P[D+1]=A.g,P[D+2]=A.b,P[D+3]=A.a,P[D+4]=n[I],P[D+5]=n[I+1],P[D+6]=M.r,P[D+7]=M.g,P[D+8]=M.b,P[D+9]=M.a;else for(let D=2,I=0,F=u.numFloats;D<F;D+=d,I+=2)P[D]=A.r,P[D+1]=A.g,P[D+2]=A.b,P[D+3]=A.a,P[D+4]=n[I],P[D+5]=n[I+1];let O=u.vertices.subarray(0,u.numFloats);b&&b(u.vertices,u.numFloats,d),t.draw(S,O,r)}}h.clipEndWithSlot(p)}h.clipEnd()}getSkeletonClipping(){return this.clipper}},G(Qr,"QUAD_TRIANGLES",[0,1,2,2,3,0]),Qr);const ue=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],Su=[0,1,2,2,3,0],Tu=new Rt(1,1,1,1);let hI=class{constructor(t,c,v=!0){G(this,"context");G(this,"canvas");G(this,"camera");G(this,"batcher");G(this,"twoColorTint",!1);G(this,"batcherShader");G(this,"shapes");G(this,"shapesShader");G(this,"activeRenderer",null);G(this,"skeletonRenderer");G(this,"skeletonDebugRenderer");this.canvas=t,this.context=c instanceof Vs?c:new Vs(c),this.twoColorTint=v,this.camera=new sI(t.width,t.height),this.batcherShader=v?xn.newTwoColoredTextured(this.context):xn.newColoredTextured(this.context),this.batcher=new L1(this.context,v),this.shapesShader=xn.newColored(this.context),this.shapes=new R1(this.context),this.skeletonRenderer=new lI(this.context,v),this.skeletonDebugRenderer=new rI(this.context)}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(t,c=!1,v=-1,x=-1,b=null){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=c,this.skeletonRenderer.draw(this.batcher,t,v,x,b)}drawSkeletonDebug(t,c=!1,v){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=c,this.skeletonDebugRenderer.draw(this.shapes,t,v)}drawTexture(t,c,v,x,b,h){this.enableRenderer(this.batcher),h||(h=Tu);var w=0;ue[w++]=c,ue[w++]=v,ue[w++]=h.r,ue[w++]=h.g,ue[w++]=h.b,ue[w++]=h.a,ue[w++]=0,ue[w++]=1,this.twoColorTint&&(ue[w++]=0,ue[w++]=0,ue[w++]=0,ue[w++]=0),ue[w++]=c+x,ue[w++]=v,ue[w++]=h.r,ue[w++]=h.g,ue[w++]=h.b,ue[w++]=h.a,ue[w++]=1,ue[w++]=1,this.twoColorTint&&(ue[w++]=0,ue[w++]=0,ue[w++]=0,ue[w++]=0),ue[w++]=c+x,ue[w++]=v+b,ue[w++]=h.r,ue[w++]=h.g,ue[w++]=h.b,ue[w++]=h.a,ue[w++]=1,ue[w++]=0,this.twoColorTint&&(ue[w++]=0,ue[w++]=0,ue[w++]=0,ue[w++]=0),ue[w++]=c,ue[w++]=v+b,ue[w++]=h.r,ue[w++]=h.g,ue[w++]=h.b,ue[w++]=h.a,ue[w++]=0,ue[w++]=0,this.twoColorTint&&(ue[w++]=0,ue[w++]=0,ue[w++]=0,ue[w]=0),this.batcher.draw(t,ue,Su)}drawTextureUV(t,c,v,x,b,h,w,e,i,u){this.enableRenderer(this.batcher),u||(u=Tu);var n=0;ue[n++]=c,ue[n++]=v,ue[n++]=u.r,ue[n++]=u.g,ue[n++]=u.b,ue[n++]=u.a,ue[n++]=h,ue[n++]=w,this.twoColorTint&&(ue[n++]=0,ue[n++]=0,ue[n++]=0,ue[n++]=0),ue[n++]=c+x,ue[n++]=v,ue[n++]=u.r,ue[n++]=u.g,ue[n++]=u.b,ue[n++]=u.a,ue[n++]=e,ue[n++]=w,this.twoColorTint&&(ue[n++]=0,ue[n++]=0,ue[n++]=0,ue[n++]=0),ue[n++]=c+x,ue[n++]=v+b,ue[n++]=u.r,ue[n++]=u.g,ue[n++]=u.b,ue[n++]=u.a,ue[n++]=e,ue[n++]=i,this.twoColorTint&&(ue[n++]=0,ue[n++]=0,ue[n++]=0,ue[n++]=0),ue[n++]=c,ue[n++]=v+b,ue[n++]=u.r,ue[n++]=u.g,ue[n++]=u.b,ue[n++]=u.a,ue[n++]=h,ue[n++]=i,this.twoColorTint&&(ue[n++]=0,ue[n++]=0,ue[n++]=0,ue[n]=0),this.batcher.draw(t,ue,Su)}drawTextureRotated(t,c,v,x,b,h,w,e,i){this.enableRenderer(this.batcher),i||(i=Tu);let u=c+h,n=v+w,r=-h,a=-w,s=x-h,o=b-w,d=r,l=a,f=r,m=o,g=s,p=o,y=s,S=a,C=0,A=0,M=0,L=0,P=0,O=0,D=0,I=0;if(e!=0){let H=Ue.cosDeg(e),k=Ue.sinDeg(e);C=H*d-k*l,A=k*d+H*l,D=H*f-k*m,I=k*f+H*m,P=H*g-k*p,O=k*g+H*p,M=P+(C-D),L=O+(A-I)}else C=d,A=l,D=f,I=m,P=g,O=p,M=y,L=S;C+=u,A+=n,M+=u,L+=n,P+=u,O+=n,D+=u,I+=n;var F=0;ue[F++]=C,ue[F++]=A,ue[F++]=i.r,ue[F++]=i.g,ue[F++]=i.b,ue[F++]=i.a,ue[F++]=0,ue[F++]=1,this.twoColorTint&&(ue[F++]=0,ue[F++]=0,ue[F++]=0,ue[F++]=0),ue[F++]=M,ue[F++]=L,ue[F++]=i.r,ue[F++]=i.g,ue[F++]=i.b,ue[F++]=i.a,ue[F++]=1,ue[F++]=1,this.twoColorTint&&(ue[F++]=0,ue[F++]=0,ue[F++]=0,ue[F++]=0),ue[F++]=P,ue[F++]=O,ue[F++]=i.r,ue[F++]=i.g,ue[F++]=i.b,ue[F++]=i.a,ue[F++]=1,ue[F++]=0,this.twoColorTint&&(ue[F++]=0,ue[F++]=0,ue[F++]=0,ue[F++]=0),ue[F++]=D,ue[F++]=I,ue[F++]=i.r,ue[F++]=i.g,ue[F++]=i.b,ue[F++]=i.a,ue[F++]=0,ue[F++]=0,this.twoColorTint&&(ue[F++]=0,ue[F++]=0,ue[F++]=0,ue[F]=0),this.batcher.draw(t,ue,Su)}drawRegion(t,c,v,x,b,h){this.enableRenderer(this.batcher),h||(h=Tu);var w=0;ue[w++]=c,ue[w++]=v,ue[w++]=h.r,ue[w++]=h.g,ue[w++]=h.b,ue[w++]=h.a,ue[w++]=t.u,ue[w++]=t.v2,this.twoColorTint&&(ue[w++]=0,ue[w++]=0,ue[w++]=0,ue[w++]=0),ue[w++]=c+x,ue[w++]=v,ue[w++]=h.r,ue[w++]=h.g,ue[w++]=h.b,ue[w++]=h.a,ue[w++]=t.u2,ue[w++]=t.v2,this.twoColorTint&&(ue[w++]=0,ue[w++]=0,ue[w++]=0,ue[w++]=0),ue[w++]=c+x,ue[w++]=v+b,ue[w++]=h.r,ue[w++]=h.g,ue[w++]=h.b,ue[w++]=h.a,ue[w++]=t.u2,ue[w++]=t.v,this.twoColorTint&&(ue[w++]=0,ue[w++]=0,ue[w++]=0,ue[w++]=0),ue[w++]=c,ue[w++]=v+b,ue[w++]=h.r,ue[w++]=h.g,ue[w++]=h.b,ue[w++]=h.a,ue[w++]=t.u,ue[w++]=t.v,this.twoColorTint&&(ue[w++]=0,ue[w++]=0,ue[w++]=0,ue[w]=0),this.batcher.draw(t.page.texture,ue,Su)}line(t,c,v,x,b,h){this.enableRenderer(this.shapes),this.shapes.line(t,c,v,x,b)}triangle(t,c,v,x,b,h,w,e,i,u){this.enableRenderer(this.shapes),this.shapes.triangle(t,c,v,x,b,h,w,e,i,u)}quad(t,c,v,x,b,h,w,e,i,u,n,r,a){this.enableRenderer(this.shapes),this.shapes.quad(t,c,v,x,b,h,w,e,i,u,n,r,a)}rect(t,c,v,x,b,h){this.enableRenderer(this.shapes),this.shapes.rect(t,c,v,x,b,h)}rectLine(t,c,v,x,b,h,w){this.enableRenderer(this.shapes),this.shapes.rectLine(t,c,v,x,b,h,w)}polygon(t,c,v,x){this.enableRenderer(this.shapes),this.shapes.polygon(t,c,v,x)}circle(t,c,v,x,b,h=0){this.enableRenderer(this.shapes),this.shapes.circle(t,c,v,x,b,h)}curve(t,c,v,x,b,h,w,e,i,u){this.enableRenderer(this.shapes),this.shapes.curve(t,c,v,x,b,h,w,e,i,u)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(t){let c=this.canvas;var v=window.devicePixelRatio||1,x=Math.round(c.clientWidth*v),b=Math.round(c.clientHeight*v);if((c.width!=x||c.height!=b)&&(c.width=x,c.height=b),this.context.gl.viewport(0,0,c.width,c.height),t===tc.Expand)this.camera.setViewport(x,b);else if(t===tc.Fit){let h=c.width,w=c.height,e=this.camera.viewportWidth,i=this.camera.viewportHeight,u=i/e,n=w/h,r=u<n?e/h:i/w;this.camera.setViewport(h*r,w*r)}this.camera.update()}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof L1?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(xn.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof R1?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(xn.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}};var tc;(function(R){R[R.Stretch=0]="Stretch",R[R.Expand=1]="Expand",R[R.Fit=2]="Fit"})(tc||(tc={}));let pr=Phaser.GameObjects.Components;const dI=pr.ComputedSize,uI=pr.Depth,cI=pr.Flip,fI=pr.ScrollFactor,mI=pr.Transform,gI=pr.Visible,pI=pr.Origin,vI=pr.Alpha;function vr(...R){return t=>(Phaser.Class.mixin(t,R),t)}const yI=vr(dI),xI=vr(uI),wI=vr(cI),SI=vr(fI),TI=vr(mI),CI=vr(gI),AI=vr(pI),bI=vr(vI);class EI extends Phaser.GameObjects.GameObject{constructor(t,c){super(t,c)}}class MI{calculateBounds(t){if(!t.skeleton)return{x:0,y:0,width:0,height:0};const c=new $h(t.skeleton.data);c.setToSetupPose(),c.updateWorldTransform(Ta.update);const v=c.getBoundsRect();return v.width==Number.NEGATIVE_INFINITY?{x:0,y:0,width:0,height:0}:v}}class ic extends xI(AI(yI(wI(SI(TI(CI(bI(EI)))))))){constructor(c,v,x,b,h,w,e=new MI){super(c,window.SPINE_GAME_OBJECT_TYPE?window.SPINE_GAME_OBJECT_TYPE:Dg);G(this,"plugin");G(this,"boundsProvider");G(this,"blendMode",-1);G(this,"skeleton");G(this,"animationStateData");G(this,"animationState");G(this,"beforeUpdateWorldTransforms",()=>{});G(this,"afterUpdateWorldTransforms",()=>{});G(this,"premultipliedAlpha",!1);this.plugin=v,this.boundsProvider=e,this.setPosition(x,b),this.premultipliedAlpha=this.plugin.isAtlasPremultiplied(w),this.skeleton=this.plugin.createSkeleton(h,w),this.animationStateData=new lF(this.skeleton.data),this.animationState=new sF(this.animationStateData),this.skeleton.updateWorldTransform(Ta.update),this.updateSize()}updateSize(){if(!this.skeleton)return;let c=this.boundsProvider.calculateBounds(this),v=this;v.width=c.width,v.height=c.height,this.displayOriginX=-c.x,this.displayOriginY=-c.y}skeletonToPhaserWorldCoordinates(c){let v=this.getWorldTransformMatrix(),x=v.a,b=v.b,h=v.c,w=v.d,e=v.tx,i=v.ty,u=c.x,n=c.y;c.x=u*x+n*h+e,c.y=u*b+n*w+i}phaserWorldCoordinatesToSkeleton(c){let v=this.getWorldTransformMatrix();v=v.invert();let x=v.a,b=v.b,h=v.c,w=v.d,e=v.tx,i=v.ty,u=c.x,n=c.y;c.x=u*x+n*h+e,c.y=u*b+n*w+i}phaserWorldCoordinatesToBone(c,v){this.phaserWorldCoordinatesToSkeleton(c),v.parent?v.parent.worldToLocal(c):v.worldToLocal(c)}updatePose(c){this.animationState.update(c/1e3),this.animationState.apply(this.skeleton),this.beforeUpdateWorldTransforms(this),this.skeleton.update(c/1e3),this.skeleton.updateWorldTransform(Ta.update),this.afterUpdateWorldTransforms(this)}preUpdate(c,v){!this.skeleton||!this.animationState||this.updatePose(v)}preDestroy(){}willRender(c){var v=15,x=!this.skeleton||!(v!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id);if(this.visible||(x=!1),!x&&this.parentContainer&&this.plugin.webGLRenderer){var b=this.plugin.webGLRenderer;this.plugin.gl&&this.plugin.phaserRenderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&b.batcher.isDrawing&&(b.end(),this.plugin.phaserRenderer.pipelines.rebind())}return x}renderWebGL(c,v,x,b){if(!this.skeleton||!this.animationState||!this.plugin.webGLRenderer)return;let h=this.plugin.webGLRenderer;c.newType&&(c.pipelines.clear(),h.begin()),x.addToRenderList(v);let w=Phaser.GameObjects.GetCalcMatrix(v,x,b).calc,e=w.a,i=w.b,u=w.c,n=w.d,r=w.tx,a=w.ty;h.drawSkeleton(this.skeleton,this.premultipliedAlpha,-1,-1,(s,o,d)=>{for(let l=0;l<o;l+=d){let f=s[l],m=s[l+1];s[l]=f*e+m*u+r,s[l+1]=f*i+m*n+a}}),c.nextTypeMatch||(h.end(),c.pipelines.rebind())}renderCanvas(c,v,x,b){if(!this.skeleton||!this.animationState||!this.plugin.canvasRenderer)return;let h=c.currentContext,w=this.plugin.canvasRenderer;w.ctx=h,x.addToRenderList(v);let e=Phaser.GameObjects.GetCalcMatrix(v,x,b).calc,i=this.skeleton;i.x=e.tx,i.y=e.ty,i.scaleX=e.scaleX,i.scaleY=e.scaleY;let u=i.getRootBone();u.rotation=-57.29577866666166*e.rotationNormalized,this.skeleton.updateWorldTransform(Ta.update),h.save(),w.draw(i),h.restore()}}class LI extends RS{constructor(t){super(t)}setFilters(t,c){}setWraps(t,c){}dispose(){}}const RI=ke.newFloatArray(8);var Va;let PI=(Va=class{constructor(t){G(this,"ctx");G(this,"triangleRendering",!1);G(this,"debugRendering",!1);G(this,"vertices",ke.newFloatArray(8*1024));G(this,"tempColor",new Rt);this.ctx=t}draw(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)}drawImages(t){let c=this.ctx,v=this.tempColor,x=t.color,b=t.drawOrder;this.debugRendering&&(c.strokeStyle="green");for(let h=0,w=b.length;h<w;h++){let e=b[h],i=e.bone;if(!i.active)continue;let u=e.getAttachment();if(!(u instanceof gi))continue;u.computeWorldVertices(e,RI,0,2);let n=u.region,r=n.texture.getImage(),a=e.color,s=u.color;v.set(x.r*a.r*s.r,x.g*a.g*s.g,x.b*a.b*s.b,x.a*a.a*s.a),c.save(),c.transform(i.a,i.c,i.b,i.d,i.worldX,i.worldY),c.translate(u.offset[0],u.offset[1]),c.rotate(u.rotation*Math.PI/180);let o=u.width/n.originalWidth;c.scale(o*u.scaleX,o*u.scaleY);let d=n.width,l=n.height;if(c.translate(d/2,l/2),u.region.degrees==90){let f=d;d=l,l=f,c.rotate(-Math.PI/2)}c.scale(1,-1),c.translate(-d/2,-l/2),c.globalAlpha=v.a,c.drawImage(r,r.width*n.u,r.height*n.v,d,l,0,0,d,l),this.debugRendering&&c.strokeRect(0,0,d,l),c.restore()}}drawTriangles(t){let c=this.ctx,v=this.tempColor,x=t.color,b=t.drawOrder,h=null,w=this.vertices,e=null;for(let u=0,n=b.length;u<n;u++){let r=b[u],a=r.getAttachment(),s;if(a instanceof gi){let o=a;w=this.computeRegionVertices(r,o,!1),e=Va.QUAD_TRIANGLES,s=o.region.texture.getImage()}else if(a instanceof Ml){let o=a;w=this.computeMeshVertices(r,o,!1),e=o.triangles,s=o.region.texture.getImage()}else continue;if(s){r.data.blendMode!=h&&(h=r.data.blendMode);let o=r.color,d=a.color;v.set(x.r*o.r*d.r,x.g*o.g*d.g,x.b*o.b*d.b,x.a*o.a*d.a),c.globalAlpha=v.a;for(var i=0;i<e.length;i+=3){let l=e[i]*8,f=e[i+1]*8,m=e[i+2]*8,g=w[l],p=w[l+1],y=w[l+6],S=w[l+7],C=w[f],A=w[f+1],M=w[f+6],L=w[f+7],P=w[m],O=w[m+1],D=w[m+6],I=w[m+7];this.drawTriangle(s,g,p,y,S,C,A,M,L,P,O,D,I),this.debugRendering&&(c.strokeStyle="green",c.beginPath(),c.moveTo(g,p),c.lineTo(C,A),c.lineTo(P,O),c.lineTo(g,p),c.stroke())}}}this.ctx.globalAlpha=1}drawTriangle(t,c,v,x,b,h,w,e,i,u,n,r,a){let s=this.ctx;const o=t.width-1,d=t.height-1;x*=o,b*=d,e*=o,i*=d,r*=o,a*=d,s.beginPath(),s.moveTo(c,v),s.lineTo(h,w),s.lineTo(u,n),s.closePath(),h-=c,w-=v,u-=c,n-=v,e-=x,i-=b,r-=x,a-=b;let l=e*a-r*i;if(l==0)return;l=1/l;const f=(a*h-i*u)*l,m=(a*w-i*n)*l,g=(e*u-r*h)*l,p=(e*n-r*w)*l,y=c-f*x-g*b,S=v-m*x-p*b;s.save(),s.transform(f,m,g,p,y,S),s.clip(),s.drawImage(t,0,0),s.restore()}computeRegionVertices(t,c,v){let x=t.bone.skeleton.color,b=t.color,h=c.color,w=x.a*b.a*h.a,e=v?w:1,i=this.tempColor;i.set(x.r*b.r*h.r*e,x.g*b.g*h.g*e,x.b*b.b*h.b*e,w),c.computeWorldVertices(t,this.vertices,0,Va.VERTEX_SIZE);let u=this.vertices,n=c.uvs;return u[gi.C1R]=i.r,u[gi.C1G]=i.g,u[gi.C1B]=i.b,u[gi.C1A]=i.a,u[gi.U1]=n[0],u[gi.V1]=n[1],u[gi.C2R]=i.r,u[gi.C2G]=i.g,u[gi.C2B]=i.b,u[gi.C2A]=i.a,u[gi.U2]=n[2],u[gi.V2]=n[3],u[gi.C3R]=i.r,u[gi.C3G]=i.g,u[gi.C3B]=i.b,u[gi.C3A]=i.a,u[gi.U3]=n[4],u[gi.V3]=n[5],u[gi.C4R]=i.r,u[gi.C4G]=i.g,u[gi.C4B]=i.b,u[gi.C4A]=i.a,u[gi.U4]=n[6],u[gi.V4]=n[7],u}computeMeshVertices(t,c,v){let x=t.bone.skeleton.color,b=t.color,h=c.color,w=x.a*b.a*h.a,e=v?w:1,i=this.tempColor;i.set(x.r*b.r*h.r*e,x.g*b.g*h.g*e,x.b*b.b*h.b*e,w);let u=c.worldVerticesLength/2,n=this.vertices;n.length<c.worldVerticesLength&&(this.vertices=n=ke.newFloatArray(c.worldVerticesLength)),c.computeWorldVertices(t,0,c.worldVerticesLength,n,0,Va.VERTEX_SIZE);let r=c.uvs;for(let a=0,s=0,o=2;a<u;a++)n[o++]=i.r,n[o++]=i.g,n[o++]=i.b,n[o++]=i.a,n[o++]=r[s++],n[o++]=r[s++],o+=2;return n}},G(Va,"QUAD_TRIANGLES",[0,1,2,2,3,0]),G(Va,"VERTEX_SIZE",8),Va);const sr=class sr extends _i.Plugins.ScenePlugin{constructor(c,v,x){super(c,v,x);G(this,"game");G(this,"isWebGL");G(this,"gl");G(this,"canvasRenderer");G(this,"phaserRenderer");G(this,"skeletonDataCache");G(this,"atlasCache");this.game=v.game,this.isWebGL=this.game.config.renderType===2,this.gl=this.isWebGL?this.game.renderer.gl:null,this.phaserRenderer=this.game.renderer,this.canvasRenderer=null,this.skeletonDataCache=this.game.cache.addCustom(_D),this.atlasCache=this.game.cache.addCustom(eF);let b=function(n,r,a){let s=new P1(this,n,r,qr.json,a);return this.addFile(s.files),this};v.registerFileType("spineJson",b,c);let h=function(n,r,a){let s=new P1(this,n,r,qr.binary,a);return this.addFile(s.files),this};v.registerFileType("spineBinary",h,c);let w=function(n,r,a,s){let o=new BI(this,n,r,a,s);return this.addFile(o.files),this};v.registerFileType("spineAtlas",w,c);let e=this,i=function(n,r,a,s,o){let d=new ic(this.scene,e,n,r,a,s,o);return this.displayList.add(d),this.updateList.add(d),d},u=function(n,r=!1){let a=n.x?n.x:0,s=n.y?n.y:0,o=n.boundsProvider?n.boundsProvider:void 0,d=new ic(this.scene,e,a,s,n.dataKey,n.atlasKey,o);return r!==void 0&&(n.add=r),_i.GameObjects.BuildGameObject(this.scene,d,n)};v.registerGameObject(window.SPINE_GAME_OBJECT_TYPE?window.SPINE_GAME_OBJECT_TYPE:Dg,i,u)}get webGLRenderer(){return sr.gameWebGLRenderer}boot(){$h.yDown=!0,this.isWebGL?(sr.gameWebGLRenderer||(sr.gameWebGLRenderer=new hI(this.game.renderer.canvas,this.gl,!0)),this.onResize(),this.game.scale.on(_i.Scale.Events.RESIZE,this.onResize,this)):this.canvasRenderer||(this.canvasRenderer=new PI(this.scene.sys.context));var c=this.systems.events;c.once("shutdown",this.shutdown,this),c.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)}onResize(){var c=this.game.renderer,v=this.webGLRenderer;if(c&&v){var x=c.width,b=c.height;v.camera.position.x=x/2,v.camera.position.y=b/2,v.camera.up.y=-1,v.camera.direction.z=1,v.camera.setViewport(x,b)}}shutdown(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(_i.Scale.Events.RESIZE,this.onResize,this)}destroy(){this.shutdown()}gameDestroy(){this.pluginManager.removeGameObject(window.SPINE_GAME_OBJECT_TYPE?window.SPINE_GAME_OBJECT_TYPE:Dg,!0,!0),this.webGLRenderer&&this.webGLRenderer.dispose(),sr.gameWebGLRenderer=null}getAtlas(c){let v;if(this.atlasCache.exists(c))v=this.atlasCache.get(c);else{let x=this.game.cache.text.get(c);if(v=new hF(x.data),this.isWebGL){let b=this.gl;const h=b.getParameter(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL);h&&b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);for(let w of v.pages)w.setTexture(new XS(b,this.game.textures.get(c+"!"+w.name).getSourceImage(),!1));h&&b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)}else for(let b of v.pages)b.setTexture(new LI(this.game.textures.get(c+"!"+b.name).getSourceImage()));this.atlasCache.add(c,v)}return v}isAtlasPremultiplied(c){let v=this.game.cache.text.get(c);return v?v.premultipliedAlpha:!1}getSkeletonData(c,v){const x=this.getAtlas(v),b=c+v;let h;if(this.skeletonDataCache.exists(b))h=this.skeletonDataCache.get(b);else{if(this.game.cache.json.exists(c)){let w=this.game.cache.json.get(c);h=new tI(new S1(x)).readSkeletonData(w)}else{let w=this.game.cache.binary.get(c);h=new yF(new S1(x)).readSkeletonData(new Uint8Array(w))}this.skeletonDataCache.add(b,h)}return h}createSkeleton(c,v){return new $h(this.getSkeletonData(c,v))}};G(sr,"gameWebGLRenderer",null),G(sr,"rendererId",0);let Qh=sr;var qr;(function(R){R[R.json=0]="json",R[R.binary=1]="binary"})(qr||(qr={}));class P1 extends _i.Loader.MultiFile{constructor(c,v,x,b,h){if(typeof v!="string"){const i=v;v=i.key,x=i.url,b=i.type==="spineJson"?qr.json:qr.binary,h=i.xhrSettings}let w=null;b==qr.json?w=new _i.Loader.FileTypes.JSONFile(c,{key:v,url:x,extension:"json",xhrSettings:h}):w=new _i.Loader.FileTypes.BinaryFile(c,{key:v,url:x,extension:"skel",xhrSettings:h});super(c,tF,v,[w]);G(this,"fileType");this.fileType=b}onFileComplete(c){this.pending--}addToCache(){this.isReadyToProcess()&&this.files[0].addToCache()}}class BI extends _i.Loader.MultiFile{constructor(c,v,x,b,h){if(typeof v!="string"){const w=v;v=w.key,x=w.url,b=w.premultipliedAlpha,h=w.xhrSettings}super(c,iF,v,[new _i.Loader.FileTypes.TextFile(c,{key:v,url:x,xhrSettings:h,extension:"atlas"})]);G(this,"premultipliedAlpha");this.premultipliedAlpha=b}onFileComplete(c){if(this.files.indexOf(c)!=-1&&(this.pending--,c.type=="text")){var v=c.data.split(/\r\n|\r|\n/);let u=[];u.push(v[0]);for(var x=1;x<v.length;x++){var b=v[x];b.trim()===""&&x<v.length-1&&(b=v[x+1],u.push(b))}let n=c.src.match(/^.*\//)??"";for(var h=0;h<u.length;h++){var w=n+u[h],e=c.key+"!"+u[h],i=new _i.Loader.FileTypes.ImageFile(this.loader,e,w);this.loader.keyExists(i)||(this.addToMultiFile(i),this.loader.addFile(i))}}}addToCache(){if(this.isReadyToProcess()){let c=this.loader.textureManager;for(let v of this.files)v.type=="image"?c.exists(v.key)||c.addImage(v.key,v.data):(this.premultipliedAlpha=this.premultipliedAlpha??(v.data.indexOf("pma: true")>=0||v.data.indexOf("pma:true")>=0),v.data={data:v.data,premultipliedAlpha:this.premultipliedAlpha},v.addToCache())}}}window.spine={SpinePlugin:Qh};window["spine.SpinePlugin"]=Qh;var je=(R=>(R.WINDUP="windup",R.DEFAULT="default",R.RAGE="rage",R.IMPACT="impact",R.DASH="dash",R.SAYNOTHING="sayNothing",R))(je||{}),kt=(R=>(R.WINDUP="windup",R.DEFAULT="default",R.RAGE="rage",R.IMPACT="impact",R.DASH="dash",R.ALERTCRIT="alertCrit",R.DIE="die",R.WALK="walk",R.RUN="run",R.LIGHTNING="lightning",R.MAGICKNIFE="magicKnife",R.HEAL="heal",R.SHIELDUP="shieldUp",R.SHIELDOWN="shieldDown",R.SHIELDIMPACT="shieldImpact",R.BLESSING="blessing",R.LASER="laser",R.LASERWINDUP="laserWindup",R.MISSILE="missile",R))(kt||{}),Ls=(R=>(R.MELEE="melee",R.PROJECTILE="projectile",R.LASER="laser",R.MISSILE="missile",R.STATIC="static",R))(Ls||{});class Ft extends ic{constructor({scene:t,x:c,y:v,skeletonKey:x,atlasKey:b,depth:h,displayName:w="defaultName"}){super(t,t.spine,c,v,x,b),this.hpBarColor=16724787,this.hungerBarColor=16172577,this.hungerBarMaxColor=16737809,this.moveSpeed=0,this.posX=0,this.posY=0,this.startDepth=0,this.walkSpeed=350,this.runSpeed=700,this.walkStepDuration=400,this.runStepDuration=300,this.displayName="",this.criticalAlertSfxDelay=100,this.defaultAnimation=Ve.Idle,this.battleIdleAnimation=Ve.Idle,this.deathHeadOffset={x:0,y:0},this.attachedSprites=[],this.magicShieldSprite=null,this.shieldTween=null,this.shieldScale=1,this.shieldScaleRatio=6,this.originalX=0,this.laserSourceAnimKey="laserSourceAnim",this.laserTipAnimKey="laserTipAnim",this.laserImpactAnimKey="laserImpactAnim",this.projectileConfig={name:"",animKey:"",releaseDelay:200,duration:200,scaleStart:1,scaleEnd:1,startOffsetX:0,startOffsetY:0},this.laserConfig={characterAnimKey:"attack_lazer",coreKey:"BeamCoreIce",atlasKey:"BeamIce",shootDelay:200,extendDuration:200,laserDuration:200,windDownDuration:200,fadeOutDuration:200,scale:1,startOffsetX:0,startOffsetY:0},this.missileConfig={missileKey:"Missile",missileScale:1,launchDelay:200,missileCount:1,flightDuration:200,startOffsetX:0,startOffsetY:0},this.defaultAttackConfig={characterAnimationKey:Ve.Attack,attackType:"melee",impactTime:200,attackSfxOffset:100,impactHeightRatio:0,returnTime:-1,offset:100,meleeAttackRange:0,isBackup:!1},this.rageAttackConfig={characterAnimationKey:this.hasAnimation(Ve.RageAttack)?Ve.RageAttack:Ve.Attack,attackType:"melee",impactTime:200,attackSfxOffset:100,impactHeightRatio:0,returnTime:-1,offset:100,meleeAttackRange:0,isBackup:!1},this.customAttackConfigs={},this.isRaging=!1,this.attackVfxConfigs={windup:{scale:0,alpha:0,offsetX:0,offsetY:0,depthOffset:0,heightRatio:0,blendMode:Phaser.BlendModes.SCREEN,textureKey:void 0},default:{scale:1.5,alpha:.75,offsetX:0,offsetY:0,depthOffset:1,heightRatio:.5,blendMode:Phaser.BlendModes.SCREEN,textureKey:"default_slash"},rage:{scale:2,alpha:1,offsetX:75,offsetY:0,depthOffset:1,heightRatio:.5,blendMode:Phaser.BlendModes.ADD,textureKey:"default_rage"},impact:{scale:1,alpha:1,offsetX:0,offsetY:0,depthOffset:1,heightRatio:.5,blendMode:Phaser.BlendModes.NORMAL,randomRotation:!0,textureKey:"default_impact"},dash:{scale:1,alpha:.5,offsetX:0,offsetY:0,depthOffset:-1,blendMode:Phaser.BlendModes.SCREEN,textureKey:"dashSmoke",overrideOrigin:new Phaser.Math.Vector2(.5,1)},sayNothing:{scale:.3,alpha:1,offsetX:0,offsetY:0,depthOffset:1,heightRatio:.5,blendMode:Phaser.BlendModes.NORMAL,textureKey:"sayNothing"}},this.attackSfxConfigs={windup:{soundType:Xe.WINDUP,volume:.7,rate:Nt.MEDIUM},default:{soundType:Xe.ENEMYATTACK,volume:1,rate:Nt.MEDIUM},rage:{soundType:Xe.ENEMYATTACK,volume:1,rate:Nt.MEDIUM},impact:{soundType:Xe.ENEMYIMPACT,volume:1,rate:Nt.MEDIUM},dash:{soundType:Xe.DASH,volume:.1,rate:Nt.MEDIUM},alertCrit:{soundType:Xe.CUSTOM,customKey:"alertCrit",volume:.8,rate:Nt.MEDIUM},die:{soundType:Xe.DIE,volume:.5},walk:{soundType:Xe.WALKSTEP,volume:.4},run:{soundType:Xe.RUNSTEP,volume:.7},lightning:{soundType:Xe.LIGHTNING,volume:.7},magicKnife:{soundType:Xe.CUSTOM,customKey:"swish",volume:1},heal:{soundType:Xe.HEAL,volume:1,rate:Nt.MEDIUM},shieldUp:{soundType:Xe.CUSTOM,customKey:"shieldUp",volume:1,rate:Nt.MEDIUM},shieldDown:{soundType:Xe.CUSTOM,customKey:"shieldDown",volume:1,rate:Nt.MEDIUM},shieldImpact:{soundType:Xe.CUSTOM,customKey:"shieldImpact",volume:1,rate:Nt.MEDIUM},blessing:{soundType:Xe.CUSTOM,customKey:"blessing",volume:1,rate:Nt.MEDIUM},laser:{soundType:Xe.ENEMYATTACKLASER,volume:1,rate:Nt.MEDIUM},laserWindup:{soundType:Xe.LASERWINDUP,customKey:"laserWindup",volume:.8,rate:Nt.MEDIUM},missile:{soundType:Xe.MISSILELAUNCH,volume:1,rate:Nt.HIGH}},this.animationState.timeScale=Te().animationSpeed||1,this.setScale(.2,.2),this.startDepth=h,this.setDepth(this.startDepth),t.add.existing(this),this.scene.events.on("update",this.update,this),this.idle(),this.skeleton.color,this.skeleton.color.set(10,10,10,1),this.displayName=w,this.scene.time.delayedCall(0,()=>{this.createStatbar(),this.originalX=c}),this.currentAttackConfig=this.defaultAttackConfig}updateAttackVfxConfig(t,c){this.attackVfxConfigs[t]={...this.attackVfxConfigs[t],...c}}updateAttackSfxConfig(t,c){this.attackSfxConfigs[t]={...this.attackSfxConfigs[t],...c}}getWidth(){return Math.abs(this.getSpineBounds().x*this.scaleX)}getHeight(){return Math.abs(this.getSpineBounds().y*this.scaleY)}getDisplayName(){return this.displayName}get flipX(){return this.scaleX<0}set flipX(t){const c=this.scaleX<0;t!==c&&(this.scaleX*=-1)}getSpineBounds(){let t=new Phaser.Math.Vector2(0,0),c=new Phaser.Math.Vector2(0,0);return this.skeleton.getBounds(t,c),c}getProjectileReleaseDelay(){var t;return((t=this.currentAttackConfig.projectileConfig)==null?void 0:t.releaseDelay)||this.projectileConfig.releaseDelay}getLaserShootDelay(){var t;return((t=this.currentAttackConfig.laserConfig)==null?void 0:t.shootDelay)||this.laserConfig.shootDelay}getAttackImpactTime(t=""){return t&&this.customAttackConfigs[t]?this.customAttackConfigs[t].impactTime:this.isRaging?this.rageAttackConfig.impactTime:this.defaultAttackConfig.impactTime}getAttackImpactHeightRatio(t=""){return t&&this.customAttackConfigs[t]?this.customAttackConfigs[t].impactHeightRatio:this.isRaging?this.rageAttackConfig.impactHeightRatio:this.defaultAttackConfig.impactHeightRatio}getAttackReturnTime(t=""){return t&&this.customAttackConfigs[t]?this.customAttackConfigs[t].returnTime:this.isRaging?this.rageAttackConfig.returnTime:this.defaultAttackConfig.returnTime}getAttackOffset(){var t=this.flipX?1:-1;return this.isRaging?this.rageAttackConfig.offset*t:this.defaultAttackConfig.offset*t}createStatbar(t=this.scene){this.hpBar=new Bg({scene:t,ownerGO:this,barCount:0,statName:"HP",statValue:1,color:this.hpBarColor,isDisplayStatNum:!0})}hasHungerBar(){return this.hungerBar!==void 0}createHungerBar(t=this.scene){this.hungerBar=new Bg({scene:t,ownerGO:this,barCount:1,statName:"Hunger",statValue:0,color:this.hungerBarColor,isDisplayStatNum:!1})}async playAnimation(t,c=!1,v=1){var b;const x=this.animationState.getCurrent(0);if(((b=x==null?void 0:x.animation)==null?void 0:b.name)!==t){if(!this.skeleton.data.findAnimation(t)){console.warn(`Animation "${t}" not found.`);return}return new Promise(h=>{this.animationState.clearListeners(),c||this.animationState.addListener({complete:w=>{var e;((e=w.animation)==null?void 0:e.name)===t&&h()}}),this.animationState.setAnimation(0,t,c).timeScale=v,c&&h()})}}hasAnimation(t){var c,v;return((v=(c=this.animationState.getCurrent(0))==null?void 0:c.animation)==null?void 0:v.name)===t}getAttackAnimationName(t){return t.characterAnimationKey!==""?t.characterAnimationKey:this.isRaging&&this.hasAnimation(Ve.RageAttack)?Ve.RageAttack:Ve.Attack}startMoveSfxLoop(t){this.stopMoveSfxLoop();let c=0,v="walk";switch(t){case"walk":c=this.walkStepDuration,v="walk";break;case"run":c=this.runStepDuration,v="run";break;default:console.warn(`Unknown movement type: ${t}`);return}this.moveSfxLoop=this.scene.time.addEvent({delay:c,callback:()=>this.playSfx(0,v),callbackScope:this,loop:!0})}stopMoveSfxLoop(){this.moveSfxLoop&&(this.moveSfxLoop.remove(!1),this.moveSfxLoop=void 0)}async walk(){this.playAnimation(Ve.Walk,!0),this.moveSpeed=this.walkSpeed,this.startMoveSfxLoop("walk")}idle(){this.playAnimation(Ve.Idle,!0),this.moveSpeed=0,this.stopMoveSfxLoop()}battleIdle(){this.playAnimation(this.battleIdleAnimation,!0),this.moveSpeed=0,this.stopMoveSfxLoop()}run(){this.playAnimation(Ve.Run,!0),this.moveSpeed=this.runSpeed,this.startMoveSfxLoop("run")}registerNewPosition(){this.originalX=this.x}setRaging(t){this.isRaging!==t&&(this.isRaging=t)}async takeDamage(t,c,v){console.log(`Character takes damage ${this.displayName} impactTime: ${t.attackImpactTime} )`),await Bt(this.scene,200+t.attackImpactTime);const x=t.isCritical?.05:.01;return this.scene.cameras.main.shake(100,x,!1),this.hpBar.updateStat({value:c/v,statNumberValue:t.totalDamage,isCritical:t.isCritical,isShielded:t.wasShielded,damageResult:t.damageResult}),(!t.noImpactFX||!t.wasShielded)&&(this.playSfx(0,"impact"),this.playVfx(0,"impact",t)),t.wasShielded&&this.playSfx(0,"shieldImpact"),t.wasShielded?await this.magicShieldHit(t):await this.playAnimation(Ve.Hurt),c<=0?!0:(this.battleIdle(),!1)}updateHealth(t){this.hpBar.updateStat({value:t})}async heal(t,c,v,x=0){this.damageFlash(3407667),this.playSfx(0,"heal"),this.hpBar.updateStat({value:c/v,statNumberValue:t,isHeal:!0}),await Bt(this.scene,x)}updateHunger({hungerPercent:t,animateBar:c=!0}){var v;(v=this.hungerBar)==null||v.updateStat({value:t,isAnimate:c,isCritical:!1})}async showRageActivated(){this.setRaging(!0),await this.hungerBar.ultimateFlash(this.hungerBarMaxColor),await Bt(this.scene,500)}async dodge(t){await Li(this.scene.tweens,{targets:this,x:this.x+(this.flipX?-50:50),ease:Phaser.Math.Easing.Sine.Out,delay:t.attackImpactTime+50,duration:200,yoyo:!0})}async celebrate(){return!0}async playDefaultAttackAnim(t,c){return this.currentAttackConfig=this.defaultAttackConfig,this.setRaging(c.isRage),this.defaultAttackConfig.attackType==="melee"?this.playMeleeAttackAnim(t,c,this.defaultAttackConfig):this.playRangedAttackAnim(t,c,this.defaultAttackConfig)}async playRageAttackAnim(t,c){return this.currentAttackConfig=this.rageAttackConfig,this.setRaging(c.isRage),this.rageAttackConfig.attackType==="melee"?this.playMeleeAttackAnim(t,c,this.rageAttackConfig):this.playRangedAttackAnim(t,c,this.rageAttackConfig)}async playCustomAttackAnim(t,c,v){const x=this.customAttackConfigs[c];return this.currentAttackConfig=x,x.attackType==="melee"?this.playMeleeAttackAnim(t,v,x):this.playRangedAttackAnim(t,v,x)}async backup(t=300){await Li(this.scene.tweens,{targets:this,x:this.x+(this.flipX?-800:800),ease:Phaser.Math.Easing.Sine.Out,duration:t})}async playMeleeAttackAnim(t,c,v){v===void 0&&(v=this.isRaging?this.rageAttackConfig:this.defaultAttackConfig);const x=v.returnTime,b=this.getAttackAnimationName(v),h=v.timeScale||1,w=v.meleeAttackRange||0,e=t.x+t.getAttackOffset()-(this.flipX?w:-w);let i=v.impactTime;v.isBackup&&(i-=400,await this.backup(400));const u=200;this.playAnimation(Ve.Dash,!1),this.setDepth(1e3),this.playSfx(0,"dash"),this.playVfx(0,"dash"),await Li(this.scene.tweens,{targets:this,x:e,ease:Phaser.Math.Easing.Sine.Out,duration:u});const n=this.isRaging?this.attackSfxConfigs.rage:this.attackSfxConfigs.default;this.playSfxConfigDelayed(i-v.attackSfxOffset,n),c!=null&&c.isCritical&&(c==null?void 0:c.wasDodged)==!1&&this.playSoundEffectDelayed(i+this.criticalAlertSfxDelay,this.attackSfxConfigs.alertCrit),this.playVfx(i,this.isRaging?"rage":"default");let r=0;if(x!==-1){this.playAnimation(b,!1,h);const a=this.skeleton.data.findAnimation(b);if(a){const s=a.duration*1e3;r=Math.max(0,s-x)}await Bt(this.scene,x)}else await this.playAnimation(b,!1,h),this.battleIdle();await Li(this.scene.tweens,{targets:this,x:this.originalX,ease:Phaser.Math.Easing.Sine.Out,duration:200}),await Bt(this.scene,r),this.setRaging(!1),this.battleIdle(),this.setDepth(this.startDepth)}async playRangedAttackAnim(t,c,v){switch(v.attackType){case"static":await this.playStaticAttack(t,c,v);break;case"projectile":await this.playProjectileAttack(t,c,v);break;case"laser":await this.playLaserAttack(t,c,v);break;case"missile":await this.playMissileAttack(t,c,v);break;default:console.warn(`Unsupported ranged attack type: ${v.attackType}`);break}this.battleIdle()}async die(){var t;this.playSfx(0,"die"),await this.playAnimation(Ve.Die),this.hpBar.hide(),(t=this.hungerBar)==null||t.hide(),this.deathFade()}async deathFade(t=1e3){await Li(this.scene.tweens,{targets:this.skeleton.color,delay:500,a:0,ease:Phaser.Math.Easing.Sine.Out,duration:t,onStart:()=>{var c;this.hpBar.hide(),(c=this.hungerBar)==null||c.hide()}})}async dieNoFade(){var t;await this.playAnimation(Ve.Die),this.hpBar.hide(),(t=this.hungerBar)==null||t.hide()}async dieAndPromptForTaunt(t){await this.dieNoFade(),await Bt(this.scene,250);const c=`groan...
click... me...`,v=new v1(this.scene,this.x+this.deathHeadOffset.x,this.y+this.deathHeadOffset.y-40,200,150,this.startDepth,c);v.setInteractive({useHandCursor:!0}),this.setInteractive({useHandCursor:!0}),v.on("pointerdown",async()=>{v.destroy(),this.setInteractive(!1),Te().setShowEnemyTauntForm(!0,t),await this.deathFade()}),this.on("pointerdown",async()=>{v.destroy(),this.setInteractive(!1),Te().setShowEnemyTauntForm(!0,t),await this.deathFade()})}async taunt(t){const c=new v1(this.scene,this.x,this.y-this.getHeight(),300,150,this.startDepth,t);await Bt(this.scene,2e3),c.destroy()}async playStaticAttack(t,c,v){this.playSfx(0,"windup"),this.setDepth(1e3);const x=c.isRage?this.attackSfxConfigs.rage:this.attackSfxConfigs.default,b=v.impactTime;this.playSfxConfigDelayed(b-v.attackSfxOffset,x),this.playVfx(b,c.isRage?"rage":"default"),c!=null&&c.isCritical&&(c==null?void 0:c.wasDodged)==!1&&this.playSoundEffectDelayed(b+this.criticalAlertSfxDelay,this.attackSfxConfigs.alertCrit);const h=this.getAttackAnimationName(v);await this.playAnimation(h),this.setDepth(this.startDepth)}async playProjectileAttack(t,c,v){const x=v.projectileConfig||this.projectileConfig;this.playSfx(0,"windup");const b=c.isRage?this.attackSfxConfigs.rage:this.attackSfxConfigs.default,h=v.impactTime;this.playSfxConfigDelayed(h-v.attackSfxOffset,b),this.playVfx(h,c.isRage?"rage":"default"),c!=null&&c.isCritical&&(c==null?void 0:c.wasDodged)==!1&&this.playSoundEffectDelayed(h+this.criticalAlertSfxDelay,this.attackSfxConfigs.alertCrit);const w=this.getAttackAnimationName(v);this.playAnimation(w),await Bt(this.scene,x.releaseDelay);const e=this.getHeight()/2-x.startOffsetY,i={x:this.x-x.startOffsetX,y:this.y-e};let u=t.x,n=x.duration;if(c.wasDodged){const o=this.x-t.x;u=this.x-o*2,n=x.duration*2}const r=t.y-e,a=this.scene.add.sprite(i.x,i.y,x.name).setDepth(1e3).setOrigin(.5,.5).setScale(x.scaleStart,x.scaleStart).setBlendMode(x.blendMode||Phaser.BlendModes.NORMAL);x.animKey&&a.play(x.animKey);const s=Phaser.Math.Angle.Between(i.x,i.y,u,r);a.angle=Phaser.Math.RadToDeg(s),await Li(this.scene.tweens,{targets:a,x:u,y:r,scaleX:x.scaleEnd,scaleY:x.scaleEnd,ease:Phaser.Math.Easing.Sine.Out,duration:n,onComplete:()=>{a.destroy()}})}async playLaserAttack(t,c,v){const x=v.laserConfig||this.laserConfig;this.playSfx(0,"laserWindup"),x.characterAnimKey&&this.playAnimation(x.characterAnimKey,!1,1),await Bt(this.scene,x.shootDelay),this.playSfx(0,"laser");const b=this.getHeight()/2-x.startOffsetY,h={x:this.x-x.startOffsetX,y:this.y-b};let w=t.x;const e=h.y,i=this.scene.add.container(h.x,h.y).setDepth(1e3);let u=Phaser.BlendModes.SCREEN;x.blendMode!==void 0&&(u=x.blendMode);const n=x.scale,r=this.scene.add.sprite(0,0,x.atlasKey).setOrigin(.5,.5).setScale(n).setBlendMode(u),a=this.scene.add.sprite(0,0,x.coreKey).setOrigin(0,.5).setScale(n).setBlendMode(u);this.scene.anims.exists(this.laserSourceAnimKey)&&r.play(this.laserSourceAnimKey);const s=this.scene.add.sprite(0,0,x.atlasKey).setOrigin(0,.5).setScale(n).setBlendMode(u),o=x.startRotation||0,d=x.isOverlaySprites||!1,l=o!==0;if(d&&s.setOrigin(.5,.5),this.scene.anims.exists(this.laserTipAnimKey)&&s.play(this.laserTipAnimKey),i.add([a,r,s]),d==!1){const P=r.getBounds().width*.5;a.setPosition(P,0)}const f=a.getBounds().width;let m=this.x-t.x-x.startOffsetX;d==!1&&(m-=a.getBounds().width,m-=s.getBounds().width);let g=m/f;g*=n,c.wasDodged&&(g*=4);const p=x.extendDuration,y=x.laserDuration;let S=Phaser.Math.Angle.Between(h.x,h.y,w,e+o);if(S=Phaser.Math.RadToDeg(S),i.angle=S,l){let P=Phaser.Math.Angle.Between(h.x,h.y,w,e-o/2);P=Phaser.Math.RadToDeg(P);let O=P-S;Math.abs(O)>180&&(O>0?O-=360:O+=360),Li(this.scene.tweens,{targets:i,angle:S+O,duration:p+y})}const C=1.2,A=.8,M=200,L=8;Li(this.scene.tweens,{targets:i,scaleY:[A,C],x:h.x+L,y:h.y,yoyo:!0,repeat:-1,duration:M,onUpdate:()=>{i.x+=(Math.random()-.5)*L}}),p>0?await Li(this.scene.tweens,{targets:a,scaleX:g,duration:p,repeat:0,onUpdate:P=>{s.x=a.x+f/n*a.scaleX}}):(a.scaleX=g,s.x=a.x+f/n*a.scaleX),this.scene.anims.exists(this.laserImpactAnimKey)&&s.play(this.laserImpactAnimKey),await Li(this.scene.tweens,{targets:i,scaleY:.2,alpha:0,duration:x.fadeOutDuration,repeat:0,delay:y,ease:Phaser.Math.Easing.Sine.Out,onComplete:()=>{a.destroy(),r.destroy(),s.destroy()}}),await Bt(this.scene,x.windDownDuration-x.fadeOutDuration)}createLaserAnimations(t){const c=this.scene,v=`${t}_source_anim`,x=`${t}_tip_anim`,b=`${t}_impact_anim`;c.anims.exists(v)||c.anims.create({key:v,frames:c.anims.generateFrameNumbers(t,{start:0,end:3}),frameRate:24,repeat:-1,yoyo:!1}),c.anims.exists(x)||c.anims.create({key:x,frames:c.anims.generateFrameNumbers(t,{start:4,end:7}),frameRate:24,repeat:-1,yoyo:!1}),c.anims.exists(b)||c.anims.create({key:b,frames:c.anims.generateFrameNumbers(t,{start:8,end:11}),frameRate:24,repeat:-1,yoyo:!1}),this.laserSourceAnimKey=v,this.laserTipAnimKey=x,this.laserImpactAnimKey=b}async playMissileAttack(t,c,v){const x=v.missileConfig||this.missileConfig,b=x.launchDelay;await Bt(this.scene,b),x.characterAnimKey&&this.playAnimation(x.characterAnimKey,!1,1);const h=this.getHeight()/2-x.startOffsetY,w={x:this.x-x.startOffsetX,y:this.y-h};let e=t.x,i=t.y-t.getHeight()/2;const u=t.getWidth()/2,n=t.getHeight();let r=x.flightDuration;const a=r;c.wasDodged&&(e+=e-w.x,r*=2);const s=40;for(let o=0;o<x.missileCount;o++)this.playSfx(0,"missile"),this.launchMissile({missileKey:x.missileKey,missileScale:x.missileScale??1,scene:this.scene,startX:w.x,startY:w.y,targetX:e+(Math.random()*u-u/2),targetY:i+(Math.random()*n-n/2),endX:e,endY:i,duration:r,isHit:c.wasDodged==!1}),await Bt(this.scene,s);await Bt(this.scene,a),x.missileCount>1&&await Bt(this.scene,1e3)}async launchMissile(t){const{missileKey:c,missileScale:v,scene:x,startX:b,startY:h,targetX:w,targetY:e,endX:i,endY:u,duration:n,isHit:r}=t,a=x.add.sprite(b,h,c).setDepth(1e3).setScale(v),s=new Phaser.Curves.Spline(this.getMissilePath(b,h,w,e)),o=[],d=32,l=x.add.graphics();l.setDepth(999),x.tweens.addCounter({from:0,to:1,duration:n,onUpdate:f=>{const m=f.getValue(),g=s.getPoint(m),p=s.getPoint(Math.max(0,m-.001));a.setPosition(g.x,g.y);const y=Phaser.Math.Angle.Between(p.x,p.y,g.x,g.y);a.setRotation(y),o.push({x:g.x,y:g.y}),o.length>d&&o.shift(),l.clear();for(let S=1;S<o.length;S++){const C=o[S-1],A=o[S],M=S/o.length;l.lineStyle(15,16777215,M),l.beginPath(),l.moveTo(C.x,C.y),l.lineTo(A.x,A.y),l.strokePath()}},ease:"Sine.easeInExpo",onComplete:()=>{if(l.clear(),a.destroy(),!r)return;this.playSfx(0,"impact");const f=this.scene.add.sprite(w,e,"explosion");f.blendMode=Phaser.BlendModes.SCREEN,f.setDepth(1e3),f.play("explosion_anim"),this.scene.time.delayedCall(n+1e3,()=>{f.destroy()})}})}getMissilePath(t,c,v,x){const b=[];b.push(new Phaser.Math.Vector2(t,c));const h=v-t,w=x-c,e=Math.sqrt(h*h+w*w),i=e*.3,u=e*.3,n=c+100,r=2+Math.floor(Math.random()*3);for(let a=1;a<r;a++){const s=a/r,o=t+h*s,d=c+w*s,l=-w/e,f=h/e,m=2+Math.random()*3,g=1+Math.random()*2,p=i*Math.sin(s*Math.PI),y=u*Math.sin(s*Math.PI),S=Math.sin(s*Math.PI*m),C=Math.cos(s*Math.PI*g),A=(S*.7+C*.3)*p,M=(S*.7+C*.3)*y,L=-Math.abs(Math.sin(s*Math.PI))*u*.5,P=(Math.random()-.5)*p*.4,O=(Math.random()-.5)*y*.4,D=l*(A+P),I=f*(M+O)+L,F=o+D;let H=d+I;H=Math.min(H,n),b.push(new Phaser.Math.Vector2(F,H))}return b.push(new Phaser.Math.Vector2(v,x)),b}async throwKnifeAt(t,c="shadow"){const v=t.x,x=t.y-t.getHeight()/2,b={x:this.x,y:this.y-200},h=c==="shadow"?"ShadowKnife":c==="fire"?"FireKnife":c==="ice"?"IceKnife":"ShadowKnife",w=this.scene.add.sprite(b.x,b.y,h).setAlpha(.8).setDepth(1e3).setBlendMode(Phaser.BlendModes.HARD_LIGHT);await Bt(this.scene,100);const e=Phaser.Math.Angle.Between(b.x,b.y,v,x);await Li(this.scene.tweens,{targets:w,angle:Phaser.Math.RadToDeg(e),duration:100,ease:"Linear"}),await Bt(this.scene,100),ul({...this.attackSfxConfigs.magicKnife,pan:this.getSfxPan()}),await Li(this.scene.tweens,{targets:w,x:v,y:x,ease:Phaser.Math.Easing.Sine.Out,duration:200,onComplete:()=>{w.destroy()}})}async playLightningStrike(){const t={...this.attackSfxConfigs.lightning,pan:this.getSfxPan(),volume:.4};Ua(t);const c=this.scene.add.sprite(this.x,this.y+10,"lightning").setDepth(this.depth+1).setOrigin(.5,1).setScale(2,2);c.blendMode=Phaser.BlendModes.SCREEN,c.play("lightning_anim"),c.once("animationcomplete",()=>{c.destroy()})}async wait(t){await Bt(this.scene,t)}async playVfx(t=0,c="default",v){const x=this.attackVfxConfigs[c];if(await Bt(this.scene,t),x.textureKey){const b=(this.flipX?1:-1)*(x.offsetX+(x.widthRatio||0)*this.getWidth());let h=x.heightRatio||0;c==="impact"&&v&&(v==null?void 0:v.attackImpactHeightRatio)!=0&&(h=v.attackImpactHeightRatio);const w=x.offsetY-(h||0)*this.getHeight(),e=x.overrideOrigin?x.overrideOrigin:new Phaser.Math.Vector2(.5,.5),i=this.scene.add.sprite(this.x+b,this.y+w,x.textureKey).setDepth(this.depth+x.depthOffset).setScale(x.scale).setOrigin(e.x,e.y).setAlpha(x.alpha).setRotation(x.randomRotation?Phaser.Math.Between(0,360):0);i.flipX=!this.flipX,i.blendMode=x.blendMode,i.play(x.textureKey+"_anim"),i.once("animationcomplete",()=>{i.destroy()})}}getSfxPan(){var x;const v=(x=this.scene.cameras)==null?void 0:x.main;if(v&&typeof this.x=="number"){const b=v.scrollX+v.width/2;return this.x<b?-.7:.7}return 0}async playSfx(t=0,c="default"){await Bt(this.scene,t);const v={...this.attackSfxConfigs[c]};return v.pan=this.getSfxPan(),v.soundType===Xe.CUSTOM?ul(v):Ua(v),Promise.resolve()}async playSfxConfigDelayed(t=0,c){await Bt(this.scene,t),typeof c.pan!="number"&&(c.pan=this.getSfxPan()),Ua(c)}async playSoundEffectDelayed(t=0,c){await Bt(this.scene,t),typeof c.pan!="number"&&(c.pan=this.getSfxPan()),ul(c)}damageFlash(t=16724787,c=100){this.setTint(t),this.scene.tweens.add({targets:this.skeleton.color,r:1,g:1,b:1,a:1,duration:c,ease:"Linear"})}setTint(t){const c=(t>>16&255)/255,v=(t>>8&255)/255,x=(t&255)/255;this.skeleton.color.set(c,v,x,1)}preUpdate(t,c){var v,x;super.preUpdate(t,c),(v=this.hpBar)==null||v.update(),(x=this.hungerBar)==null||x.update()}update(t,c){super.update(t,c);for(const v of this.attachedSprites){const{sprite:x,offsetX:b,offsetY:h,flipWithCharacter:w}=v,e=w&&this.flipX?-b:b;x.setPosition(this.x+e,this.y+h),w&&x.flipX!==this.flipX&&x.setScale(this.flipX?-Math.abs(x.scaleX):Math.abs(x.scaleX),x.scaleY)}}createMagicShieldSprite(){if(this.magicShieldSprite)return;const t=this.magicShieldSprite=this.scene.add.sprite(this.x,this.y,"magicShield").setDepth(this.depth+1e3).setScale(1,1).setOrigin(.5,.85).setBlendMode(Phaser.BlendModes.SCREEN).setAlpha(0);this.attachedSprites.push({sprite:t,offsetX:0,offsetY:0,flipWithCharacter:!0});let c=this.getHeight()*this.scaleY,v=t.height;this.shieldScale=c/v*this.shieldScaleRatio,t.setScale(this.shieldScale,this.shieldScale)}async showMagicShield(){var t,c;this.createMagicShieldSprite(),(t=this.magicShieldSprite)==null||t.setAlpha(.75),(c=this.magicShieldSprite)==null||c.play("magicShield_anim"),this.shieldTween||(this.shieldTween=this.scene.tweens.add({targets:this.magicShieldSprite,alpha:.5,ease:"Sine.easeInOut",duration:500,yoyo:!0,repeat:-1})),this.playSfx(0,"shieldUp"),await Bt(this.scene,500)}async magicShieldHit(t){this.magicShieldSprite&&(this.magicShieldSprite.setTintFill(16777215),this.magicShieldSprite.setAlpha(1),await Bt(this.scene,75),this.magicShieldSprite.clearTint(),this.magicShieldSprite.setAlpha(.75),await Bt(this.scene,200),t.shieldHp!==void 0&&t.shieldHp<=0&&await this.hideMagicShield())}async hideMagicShield(){var t;this.magicShieldSprite&&((t=this.shieldTween)==null||t.stop(),this.playSfx(0,"shieldDown"),this.magicShieldSprite.anims.playReverse("magicShield_anim"),await new Promise(c=>{var v;(v=this.magicShieldSprite)==null||v.once("animationcomplete",()=>{c()})}),this.magicShieldSprite.setAlpha(0),await Bt(this.scene,200))}}const Lc={Weapon:[{attachmentName:"weapon",assetPath:"weapons/",defaultAsset:"default"}],Hat:[{attachmentName:"hat",assetPath:"hats/",defaultAsset:"default"}],Cloak:[{attachmentName:"scarf",assetPath:"cloaks/scarf/",defaultAsset:"default"},{attachmentName:"front_cloak",assetPath:"cloaks/front_cloak/",defaultAsset:"default"},{attachmentName:"back_cloak",assetPath:"cloaks/back_cloak/",defaultAsset:"default"}],Shirt:[{attachmentName:"torso",assetPath:"shirts/",defaultAsset:"default"}]};function WS(R,t){return R!=null&&R.assetName&&R.assetName.trim()!==""?R.assetName:t}function Hg(R,t){return`/assets/gear/${R.assetPath}${t}.png`}async function DI(R,t,c){const v=Lc[c]||[],x=[];for(const b of v){const h=WS(t,b.defaultAsset),w=`${b.attachmentName}-${h}`,e=Hg(b,h);let i=w;R.textures.exists(w)||await new Promise(r=>{const a=R.load,s=()=>{a.textureManager.exists(w)?(d(),r()):(d(),i=`${b.attachmentName}-${b.defaultAsset}`,r())},o=()=>{d(),console.warn(`Failed to load ${c} texture: ${h}, using default`),i=`${b.attachmentName}-${b.defaultAsset}`,r()},d=()=>{a.off("complete",s),a.off("loaderror",o)};a.once("complete",s),a.once("loaderror",o),a.image(w,e),a.start()});const u=R.textures.get(i);x.push({key:i,texture:u,config:b})}return x}function FI(R,t,c){var i,u;const v=R==null?void 0:R.spine;if(!((i=v.webGLRenderer)!=null&&i.context))return console.error("Spine object, scene or plugin is not available or misconfigured"),!1;const x=t.skeleton.findSlot(c.config.attachmentName);if(!x||!x.attachment)return console.warn(`Slot '${c.config.attachmentName}' not found or has no attachment`),!1;const b=c.texture.getSourceImage(),h=new XS((u=v.webGLRenderer)==null?void 0:u.context,b),w=new PS;w.u2=w.v2=1,w.width=w.originalWidth=b.width,w.height=w.originalHeight=b.height,w.texture=h;const e=x.attachment.copy();return e.region=w,e.updateRegion(),x.setAttachment(e),!0}async function jS(R,t,c,v,x=!0){const b=await DI(R,c,v);for(const h of b)FI(R,t,h)||console.warn(`Failed to apply texture for ${v} attachment: ${h.config.attachmentName}`)}class KS extends Ft{constructor({scene:t,x:c,y:v}){super({scene:t,x:c,y:v,atlasKey:"frogPlayer-atlas",skeletonKey:"frogPlayer-data",depth:100,displayName:"Player"}),this.hpBarColor=3407667,this.eyeBone=null,this.eyeFire=null,this.displayName="Player",this.flipX=!0,this.defaultAnimation=Ve.Walk,this.battleIdleAnimation=Ve.BattleIdle,this.defaultAttackConfig.meleeAttackRange=75,this.animationStateData.setMix(Ve.BattleIdle,Ve.Idle,.2),this.shieldScaleRatio=8,this.updateAttackVfxConfig(je.DEFAULT,{offsetX:100}),this.createHungerBar(t);const x={[kt.DEFAULT]:{soundType:Xe.PLAYERATTACK,volume:1,rate:Nt.MEDIUM},[kt.RAGE]:{soundType:Xe.PLAYERATTACKRAGE,volume:1,rate:Nt.MEDIUM},[kt.IMPACT]:{soundType:Xe.PLAYERIMPACT,volume:1,rate:Nt.MEDIUM},[kt.DIE]:{soundType:Xe.CUSTOM,customKey:"playerDie",volume:1,rate:Nt.MEDIUM}};this.attackSfxConfigs={...this.attackSfxConfigs,...x},t.sys.settings.key==="Battle"&&(this.eyeBone=this.skeleton.findBone("eye"),this.eyeFire=t.add.sprite(0,0,"fireSmall").setOrigin(.5,.8).setDepth(1e3).setScale(.75,.75).setBlendMode(Phaser.BlendModes.SCREEN),this.eyeFire.play("fireSmall_anim"))}async celebrate(){return this.playSfx(750,kt.BLESSING),await this.playAnimation(Ve.Celebrate),this.idle(),!0}async equipItem(t,c){await jS(this.scene,this,t,c,!0)}async syncAllEquipment(t){const c=Object.keys(Lc);for(const v of c){const x=t[v],b=x==null?void 0:x.definition;await this.equipItem(b,v)}}async die(){this.playSfx(0,kt.DIE),await this.playAnimation(Ve.Die),this.hideBars()}hideBars(){var t,c;(t=this.hpBar)==null||t.hide(),(c=this.hungerBar)==null||c.hide()}setRaging(t){this.eyeFire&&t!==this.isRaging&&(super.setRaging(t),this.eyeFire.alpha=0,this.eyeFire.setVisible(t),t&&(ul("RageActivate",.75),this.scene.tweens.add({targets:this.eyeFire,alpha:1,duration:500,ease:"Power2"})))}async playEatAnimation(){await this.playAnimation(Ve.Eat),this.playAnimation(Ve.EatIdle,!0)}update(t,c){super.update(t,c),this.isRaging&&this.eyeBone&&this.eyeFire&&this.eyeFire.setPosition(this.x+this.eyeBone.worldX*this.scaleX,this.y+this.eyeBone.worldY*this.scaleY)}getHeight(){return 150}}var kg=(R=>(R[R.InProgress=0]="InProgress",R[R.PlayerVictory=1]="PlayerVictory",R[R.EnemyVictory=2]="EnemyVictory",R))(kg||{});function fg(R){return R&&typeof R.totalDamage=="number"&&"target"in R&&"source"in R}function II(R){return R&&typeof R.healAmount=="number"&&"target"in R&&"source"in R}function OI(R){return R&&typeof R.shieldAmount=="number"&&"target"in R&&"source"in R}function NI(R){return R&&typeof R.drainAmount=="number"&&"target"in R&&"source"in R}function GI(R){return R&&typeof R.damageAmount=="number"&&"target"in R&&"source"in R}function HI(R){return R&&typeof R.message=="string"&&(typeof R.sourceAbilityName=="string"||R.sourceAbilityName===void 0)&&R.source instanceof Zu}class kI{constructor(t,c,v,x){this.scene=t,this.playerTeam=c,this.enemyTeam=v,this.random=x,this.actionQueue=[],this.currentTime=0,this.isRunning=!1,this.playerHitCounter=0,this.debugTotalEnemyDamage=0,this.debugTotalPlayerDamage=0,this.debugPlayerStartHp=0,this.initializeQueue(),gB(x)}initializeQueue(){[...this.playerTeam,...this.enemyTeam].forEach(t=>{this.actionQueue.push({character:t,time:t.getNextTurnTime(0)})}),this.sortQueue()}sortQueue(){this.actionQueue.sort((t,c)=>t.time-c.time)}async processTurn(){if(this.actionQueue.length===0)return;console.log("----TURN START----");const{character:t,time:c}=this.actionQueue.shift();if(this.currentTime=c,t.isDead()){console.log("----TURN END (queued character dead)----");return}this.playerTeam.includes(t)&&this.resetHitCounter(),t.onPreActionPhase(this);const v=await t.onTurnStart(this)??[];for(const b of v)await this.resolveActionChain(t,b);if(t.isDead()){console.warn(`Character is dead after turn start ${t.id}`);return}if(this.isCombatOver()){console.warn(`Combat is over, cannot process turn for ${t.id}`);return}const x=t.chooseAction(this);await this.resolveActionChain(t,x),this.actionQueue.push({character:t,time:t.getNextTurnTime(this.currentTime)}),this.sortQueue(),Te().addBattleLogMessage([{message:"",type:Xi.SystemMessage}],!0),console.log("----TURN END----")}populateBattleLogMessageAbility(t){Te().addBattleLogMessage([{message:t.message,sourceName:t.source.getDisplayCharacter().getDisplayName(),sourceIsPlayer:t.source.getIsPlayer(),abilityName:t.sourceAbilityName,type:Xi.AbilityTriggered}],!1)}populateBattleLogMessage(t,c){var e,i,u,n,r,a;if(t.type==="DoNothingAction")return;const v=((e=c.source)==null?void 0:e.getDisplayCharacter().getDisplayName())||"Unknown",x=((i=c.target)==null?void 0:i.getDisplayCharacter().getDisplayName())||"Unknown",w=`<span class="${v==="Player"?"playerName":"characterName"}">${v}</span> hit <span class="${x==="Player"?"playerName":"characterName"}">${x}</span> for ${c==null?void 0:c.totalDamage} with ${t.label} ${c!=null&&c.isCritical?" (CRITICAL)":""}${c!=null&&c.wasDodged?" (dodged)":""}`;Te().addBattleLogMessage([{message:w,type:Xi.Damage,sourceName:v,sourceIsPlayer:((u=c.source)==null?void 0:u.getIsPlayer())||!1,targetName:x,targetIsPlayer:((n=c.target)==null?void 0:n.getIsPlayer())||!1,damage:c.totalDamage,damageByType:(r=c.damageResult)==null?void 0:r.damageByType,resistDamageByType:(a=c.damageResult)==null?void 0:a.resistDamageByType,actionName:t.label,isCritical:c.isCritical,wasDodged:c.wasDodged,abilitySource:c.abilitySource}],!1)}populateBattleLogMessageHeal(t,c){var e,i,u,n;const v=((e=c.source)==null?void 0:e.getDisplayCharacter().getDisplayName())||"Unknown",x=((i=c.target)==null?void 0:i.getDisplayCharacter().getDisplayName())||"Unknown",b=v==="Player"?"playerName":"characterName";let w=`<span class="${b}">${v}</span> heal <span class="${x==="Player"?"playerName":"characterName"}">${x}</span> for ${c==null?void 0:c.healAmount} with ${t.label}`;v===x&&(w=`<span class="${b}">${v}</span> healed self for ${c==null?void 0:c.healAmount} with ${t.label}`),Te().addBattleLogMessage([{message:w,targetName:x,targetIsPlayer:((u=c.target)==null?void 0:u.getIsPlayer())||!1,sourceName:v,sourceIsPlayer:((n=c.source)==null?void 0:n.getIsPlayer())||!1,healAmount:c.healAmount,abilityName:c.sourceAbilityName?c.sourceAbilityName:t.label,type:Xi.Heal}],!1)}populateBattleLogMessageShield(t,c){var b,h,w,e;const v=((b=c.source)==null?void 0:b.getDisplayCharacter().getDisplayName())||"Unknown",x=((h=c.target)==null?void 0:h.getDisplayCharacter().getDisplayName())||"Unknown";Te().addBattleLogMessage([{message:"",targetName:x,targetIsPlayer:((w=c.target)==null?void 0:w.getIsPlayer())||!1,sourceName:v,sourceIsPlayer:((e=c.source)==null?void 0:e.getIsPlayer())||!1,shieldAmount:c.shieldAmount,abilityName:c.sourceAbilityName?c.sourceAbilityName:t.label,type:Xi.Shield}],!1)}populateSystemBattleLogMessage(t){Te().addBattleLogMessage([{message:t,type:Xi.SystemMessage}],!0)}populateBattleLogMessageDrain(t,c){var b,h,w,e;const v=((b=c.source)==null?void 0:b.getDisplayCharacter().getDisplayName())||"Unknown",x=((h=c.target)==null?void 0:h.getDisplayCharacter().getDisplayName())||"Unknown";Te().addBattleLogMessage([{message:"",targetName:x,targetIsPlayer:((w=c.target)==null?void 0:w.getIsPlayer())||!1,sourceName:v,sourceIsPlayer:((e=c.source)==null?void 0:e.getIsPlayer())||!1,damage:c.drainAmount,damageByType:c.damageProfile,actionName:t.label,type:Xi.Drain}],!1)}populateBattleLogMessageMutualDamage(t,c){var b,h,w,e;const v=((b=c.source)==null?void 0:b.getDisplayCharacter().getDisplayName())||"Unknown",x=((h=c.target)==null?void 0:h.getDisplayCharacter().getDisplayName())||"Unknown";Te().addBattleLogMessage([{message:"",targetName:x,targetIsPlayer:((w=c.target)==null?void 0:w.getIsPlayer())||!1,sourceName:v,sourceIsPlayer:((e=c.source)==null?void 0:e.getIsPlayer())||!1,damage:c.damageAmount,damageByType:c.damageProfile,actionName:c.sourceAbilityName,type:Xi.MutualDamage}],!1)}handleResultLogMessage(t,c){fg(t)?this.populateBattleLogMessage(c,t):II(t)?this.populateBattleLogMessageHeal(c,t):HI(t)?this.populateBattleLogMessageAbility(t):OI(t)?this.populateBattleLogMessageShield(c,t):NI(t)?this.populateBattleLogMessageDrain(c,t):GI(t)&&this.populateBattleLogMessageMutualDamage(c,t)}async resolveActionChain(t,c,v=!0){var b;const x=[{actor:t,action:c}];for(;x.length>0;){const{actor:h,action:w}=x.shift(),e=await w.execute(h,this);this.handleResultLogMessage(e,w);const i={actor:h,action:w,result:fg(e)?{metadata:e}:void 0,turnNumber:h.getTurnCounter(),rage:h.hasRageMeter()?h.getRage():void 0,isOutOfTurn:!v};if(await h.onActionTaken(w,this,i),fg(e)&&e.hitCount>0){const u=await this.handleHit(h,w,e.hitCount);for(const n of u)x.push({actor:h,action:n})}for(const u of h.getAbilities()){const n=await((b=u.onPostActionPhase)==null?void 0:b.call(u,h,w,i,this));for(const r of n||[])x.push({actor:h,action:r})}}}getDefaultTargetFor(t){const x=(this.playerTeam.includes(t)?this.enemyTeam:this.playerTeam).find(b=>!b.isDead());return x||(console.warn(`No valid targets found for ${t.id}`),null)}async startCombat(){for(console.log("Combat start!"),this.populateSystemBattleLogMessage("Combat Start!"),this.debugTotalEnemyDamage=0,this.debugTotalPlayerDamage=0,this.debugPlayerStartHp=this.playerTeam.reduce((t,c)=>t+c.getCurrentHp(),0),[...this.playerTeam,...this.enemyTeam].forEach(t=>{var c;t.resetTurnCounter(),t.populateItemAbilities();for(const v of t.getAbilities())(c=v.resetForBattle)==null||c.call(v,t);Te().animationDisabled&&t.disableAnimations()}),this.isRunning=!0;this.isRunning&&!this.isCombatOver();)await this.processTurn();this.resetHitCounter(),[...this.playerTeam].forEach(t=>{var c;t.resetShield();for(const v of t.getAbilities())(c=v.resetForBattle)==null||c.call(v,t)}),this.populateSystemBattleLogMessage(this.getCombatResult()===1?"Victory!":"Defeat!")}isCombatOver(){return this.playerTeam.every(t=>t.isDead())||this.enemyTeam.every(t=>t.isDead())}getCombatResult(){return this.isCombatOver()?this.enemyTeam.every(t=>t.isDead())?1:2:0}async applyDamage(t,c,v,x){var n,r,a,s,o,d;const b=c.getCurrentHp(),h=c.takeDamage(v);v.wasShielded=h,h&&(v.shieldHp=c.getShieldHp()),v.wasDodged?await c.dodge(v):(await c.getDisplayCharacter().takeDamage(v,c.getCurrentHp(),c.getModifiedStatValue("MaxHp")),c.syncHpIfPlayer(),t.getIsPlayer()&&v.hitCount>0&&(this.incrementHitCounter(v.hitCount),(n=this.onHitCounterChange)==null||n.call(this,this.playerHitCounter)));const w={actor:t,action:x,result:{metadata:v},turnNumber:c.turnCounter,rage:((r=c.getRage)==null?void 0:r.call(c))??0},e=[];if(c.getCurrentHp()<=0){c.getPromptOnDeath()?c.getDisplayCharacter().dieAndPromptForTaunt(c.id):(console.log(`${c.id} is dead!`),c.getDisplayCharacter().die());for(const l of((a=t.getAbilities)==null?void 0:a.call(t))??[]){const f=await((s=l.onTargetDied)==null?void 0:s.call(l,t,w,this));if(f){const m=Array.isArray(f)?f:[f];e.push(...m)}}}for(const l of e)await this.resolveActionChain(t,l);const i=[],u=(((o=c.getAbilities)==null?void 0:o.call(c))??[]).filter(l=>typeof l.onHealthChanged=="function");for(const l of u){const f=await((d=l.onHealthChanged)==null?void 0:d.call(l,c,w,b,c.getCurrentHp(),this));if(f){const m=Array.isArray(f)?f:[f];i.push(...m)}}for(const l of i)await this.resolveActionChain(c,l,!1);t.getIsPlayer()?this.debugTotalPlayerDamage+=v.totalDamage:this.debugTotalEnemyDamage+=v.totalDamage}async handleHit(t,c,v){var b;if(v<0)return[];const x=[];for(const h of t.getAbilities()){const w=await((b=h.onHitCounter)==null?void 0:b.call(h,t,c,this.getHitCounter(),this));w&&x.push(...w)}return x}async applyHeal(t,c,v=!0){v?await t.healForPercent(c,100):await t.healForAmount(c)}pause(){this.isRunning=!1}resume(){this.isRunning=!0}setHitCounterCallback(t){this.onHitCounterChange=t}resetHitCounter(){var t;this.playerHitCounter=0,(t=this.onHitCounterChange)==null||t.call(this,this.playerHitCounter)}incrementHitCounter(t){this.playerHitCounter+=t}getHitCounter(){return this.playerHitCounter}}function Hr(R){switch(R.type){case"multiplier":const t=Math.abs(R.amount);return`${R.amount>=0?"Increase":"Decrease"} ${zC[R.stat]} by ${(t*100).toFixed(0)}% `;case"health":const v=Math.abs(R.amount);return`${R.amount>0?"Restore":"Lose"} ${(v*100).toFixed(0)}% Health`;case"ability":return zw(R.abilityId).name}}function UI(R){ss(R)}function VI(R){if(!R.length)return"";const t=R.map(v=>{const x=Lt.ItemDefinitions[v.id];return`${v.quantity} ${x.name}`});if(t.length===1)return`You found ${t[0]}!`;if(t.length===2)return`You found ${t[0]} and ${t[1]}!`;const c=t.pop();return`You found ${t.join(", ")}, and ${c}!`}class YI{constructor(t,c,v,x,b,h,w,e,i,u,n){this.scene=t,this.playerCharacter=c,this.setNextEncounterPositionCallback=v,this.setFollowCameraCallback=x,this.createEnemyCallback=b,this.createBossEncounterCallback=h,this.cutsceneCallback=w,this.animateLootCallback=e,this.buildingCreateCallback=i,this.hitCounterCallback=u,this.battlePassExpiration=n,this.missionTauntData=[],this.hasBossEncounter=!1,this.encounterQueue=[],this.currentEncounterIndex=0,this.currentRandomProvider=new bl(""),this.syncEncountersWithStore()}async processMission(t,c){var b;console.log("MissionManager: processing mission",t),this.missionTauntData=c,this.mission=t,this.encounterQueue=[...t.encounters],this.currentEncounterIndex=0;const{setShowNextEncounterButton:v}=Te(),x={completed:!1};for(;this.currentEncounterIndex<this.encounterQueue.length;){const h=this.encounterQueue[this.currentEncounterIndex],w=h.type==="enemy"||h.type==="boss"||h.type==="rushBoss";Te().setAdvanceButtonLabel(w?"Battle":"Advance"),v(!0),await Te().waitForNextEncounterClick(),Te().setQuestMessageShown(!1),this.setNextEncounterPositionCallback();const e=this.encounterQueue[this.currentEncounterIndex],i=await this.processEncounter(e);if((b=i.encounterLoot)!=null&&b.some(u=>!mr(u.id))&&Te().setHasNewInventoryItem(!0),console.log("Encounter result:",JSON.stringify(i)),UI(i.encounterAction),!i.victory)return x;this.currentEncounterIndex++,await Bt(this.scene,300)}return x.completed=!0,x}syncEncountersWithStore(){this.unsubscribeFromStore=Tn((t,c)=>{if(Te().gameDevState&&c.missionMetadata.mission!==t.missionMetadata.mission&&t.missionMetadata.mission&&t.missionMetadata.mission.encounters){const v=t.missionMetadata.mission.encounters;this.encounterQueue=v}})}async walkToNextEncounter(){jh({scene:this.scene,fadeInMusicKey:"music_explore",targetVolume:.3,duration:1e3}),this.setFollowCameraCallback(!0),this.playerCharacter.walk(),await this.scene.waitForPlayerToReachEncounter(),this.playerCharacter.registerNewPosition(),this.playerCharacter.idle()}async runToNextEncounter(t){jh({scene:this.scene,fadeInMusicKey:(t==null?void 0:t.type)==="boss"||(t==null?void 0:t.type)==="rushBoss"?"music_boss_battle":"music_battle",targetVolume:.3,duration:1e3}),this.setFollowCameraCallback(!0),this.playerCharacter.run(),await this.scene.waitForPlayerToReachEncounter(),this.playerCharacter.registerNewPosition(),this.playerCharacter.battleIdle()}async processEncounter(t){this.currentRandomProvider=fw({postId:Te().postId,sessionId:Te().sessionId,encounterIndex:this.currentEncounterIndex});const c=Object.values(Te().inventory.equippedItems).filter(v=>!!v);switch(this.playerCharacter.setEquippedItems(c),this.updatePlayerCharacterStats(),t.type){case He.Enemy:return await this.processEnemyEncounter(t);case He.Boss:case He.RushBoss:return await this.processBossEncounter(t);case He.SkillChoice:case He.StatsChoice:case He.AbilityChoice:return await this.processSkillChoiceEncounter(t);case He.SkillBargain:return await this.processSkillBargainEncounter(t);case He.CreatorBonus:return await this.processCreatorBonusEncounter(t);case He.Treasure:return await this.processTreasureEncounter(t);case He.Investigate:return await this.processInvestigateEncounter(t);case He.CrossroadsFight:return await this.processCrossroadsFightEncounter(t);default:throw new Error(`Unknown encounter type: ${t.type}`)}}async processEnemyEncounter(t){Te().setInCombat(!0);const{Level:c,GoldEarnRate:v}=this.playerCharacter.getModel(),x=mw(this.mission,t,c,v,this.battlePassExpiration,this.currentRandomProvider),b=t.enemies.map((i,u)=>{const n=yn[i.type];if(!n)throw new Error(`Enemy definition not found for ID: ${i.type}`);const r=Fw(i,this.mission,this.playerCharacter.getModel().Level),a=oB(n,r),s=this.missionTauntData.find(d=>d.enemyId===i.id),o=this.createEnemyCallback(i,a,u,t.enemies.length);return o.setTauntMessage(s?s.message:""),o.setAttackDamageProfile(lB(n,r)),n.abilities&&n.abilities.forEach(d=>{const l=zw(d);l&&o.addAbility(l)}),(t.type==="boss"||t.type==="rushBoss")&&(o.enableRageMeter(),o.removeAbilitiesWithMatchingName(new fp)),o});await this.runToNextEncounter(t);const h=new kI(this.scene,[this.playerCharacter],b,this.currentRandomProvider);if(this.setFollowCameraCallback(!1),h.setHitCounterCallback(i=>{this.hitCounterCallback(i)}),await Bt(this.scene,200),await Promise.all(b.map(i=>i.doTaunt())),await h.startCombat(),h.getCombatResult()===kg.PlayerVictory){this.playerCharacter.idle();for(const i of x)await this.animateLootCallback(i.id,i.quantity);Te().addBattleLogMessage([{message:VI(x),type:Xi.SystemMessage}],!0)}else await Bt(this.scene,1e3);Te().setInCombat(!1),this.playerCharacter.resetRage();const w=h.getCombatResult()===kg.PlayerVictory,e={type:"encounterAction",encounterIndex:this.currentEncounterIndex,victory:w};return{victory:w,encounterAction:e,encounterLoot:x}}async processBossEncounter(t){return this.hasBossEncounter=!0,this.createBossEncounterCallback(),this.processEnemyEncounter(t)}async processSkillChoiceEncounter(t){const{setShowSkillOptions:c,setSkillOptions:v,setSkillOptionHeader:x}=Te();v([Hr(t.optionA),Hr(t.optionB),...t.type===He.AbilityChoice?[Hr(t.optionC)]:[]]);const b=t;x(t.type===He.AbilityChoice?`The ${b&&b.isEnchanted?"ENCHANTED ":""}ancient machine offers a selection of abilities:`:"A shrine offers a blessing. Choose a boon:"),this.buildingCreateCallback(t),await this.walkToNextEncounter(),c(!0);const h=await Te().waitForSkillOptionClick();let w;h===0?w=t.optionA:h===1?w=t.optionB:w=t.optionC,w.type==="multiplier"?this.playerCharacter.addSkillEffect(w):w.type==="health"?this.playerCharacter.healForPercent(w.amount):w.type==="ability"&&this.playerCharacter.addAbilityById(w.abilityId);const e={type:"encounterAction",encounterIndex:this.currentEncounterIndex,victory:!0,chosenSkill:w};return await Bt(this.scene,300),await this.playerCharacter.celebrate(),await Bt(this.scene,300),{victory:!0,encounterAction:e}}async processSkillBargainEncounter(t){const{setShowSkillOptions:c,setSkillOptions:v,setSkillOptionHeader:x}=Te(),b=Hr(t.positiveEffect),h=Hr(t.negativeEffect),w=`${b} but ${h}`;v([w,"Refuse"]),x("The monolith pulses with dark energy and requests a sacrifice. Choose wisely:"),this.buildingCreateCallback(t),await this.walkToNextEncounter(),c(!0);const e=await Te().waitForSkillOptionClick(),i={type:"encounterAction",encounterIndex:this.currentEncounterIndex,choiceIndex:e,victory:!0,debugMessage:"Bargain encounter no-op action"};if(e===1)return{victory:!0,encounterAction:i};if(t.positiveEffect.type==="multiplier"?this.playerCharacter.addSkillEffect(t.positiveEffect):t.positiveEffect.type==="health"&&this.playerCharacter.healForPercent(t.positiveEffect.amount),t.negativeEffect.type==="multiplier")this.playerCharacter.addSkillEffect(t.negativeEffect);else if(t.negativeEffect.type==="health"){const u={totalDamage:Math.round(Math.abs(t.negativeEffect.amount)*this.playerCharacter.getCurrentHp()),attackImpactTime:0,attackImpactHeightRatio:0,isCritical:!1,hitCount:1,isRage:!1};this.damagePlayer(u)}return{victory:!0,encounterAction:i}}async processCreatorBonusEncounter(t){const{setShowSkillOptions:c,setSkillOptions:v,setSkillOptionHeader:x}=Te();v(["Creator Bonus: "+Hr(t.optionA),"Creator Bonus: "+Hr(t.optionB)]),x(`Welcome, ${Te().username}. Choose a bonus:`),this.buildingCreateCallback(t),await this.walkToNextEncounter(),c(!0);const h=await Te().waitForSkillOptionClick()===0?t.optionA:t.optionB;return this.playerCharacter.addSkillEffect(h),await Bt(this.scene,300),await this.playerCharacter.celebrate(),await Bt(this.scene,300),{victory:!0,encounterAction:{type:"encounterAction",encounterIndex:this.currentEncounterIndex,victory:!0,chosenSkill:h}}}async processTreasureEncounter(t){this.buildingCreateCallback(t),await this.walkToNextEncounter(),Te().setSkipButtonShown(!0),await Promise.race([Te().waitForSkipButtonClick(),this.cutsceneCallback()]);const c=gw(this.mission,t,this.currentRandomProvider);Te().setMissionRewards(c);for(const x of c){const b=Lt.ItemDefinitions[x.id];b.isStackable&&!b.tags.includes("essence")&&await this.animateLootCallback(x.id,x.quantity)}return{victory:!0,encounterAction:{type:"encounterAction",encounterIndex:this.currentEncounterIndex,victory:!0},encounterLoot:c}}async processInvestigateEncounter(t){var w;this.buildingCreateCallback(t);const{setShowSkillOptions:c,setSkillOptions:v,setSkillOptionHeader:x}=Te();v(["Yes","No"]),x("You find a mysterious building. Investigate?"),await this.walkToNextEncounter(),c(!0);const b=await Te().waitForSkillOptionClick();if(b===1)return{victory:!0,encounterAction:{type:"encounterAction",encounterIndex:this.currentEncounterIndex,victory:!0,debugMessage:"Player chose not to investigate building",choiceIndex:b}};if(await Bt(this.scene,1e3),((w=this.currentRandomProvider)==null?void 0:w.next())<t.bonusChance){const e=t.bonusResourceType||"Gold",i=e==="Gold"?"Coins":e,u=e==="Gold"?this.playerCharacter.getModifiedStatValue("GoldEarnRate"):1,n=Math.floor(t.bonusGold*u);Te().setQuestMessage(`You found ${n} ${i}!`),Te().setQuestMessageShown(!0),await this.animateLootCallback(e,n)}else{Te().setQuestMessage("That building was full of snakes!"),Te().setQuestMessageShown(!0);const e={totalDamage:Math.round(t.failHpPenaltyPct*this.playerCharacter.getCurrentHp()),attackImpactTime:0,attackImpactHeightRatio:0,isCritical:!1,hitCount:1,isRage:!1};await this.damagePlayer(e)}return{victory:!0,encounterAction:{type:"encounterAction",encounterIndex:this.currentEncounterIndex,victory:!0,choiceIndex:b,debugMessage:"Player chose to investigate the building"}}}async processCrossroadsFightEncounter(t){this.buildingCreateCallback(t);const{setShowSkillOptions:c,setSkillOptions:v,setSkillOptionHeader:x}=Te();v(["Let's Fight!","Nope"]),x("A sign says: 'Warning: dangerous creatures ahead. Investigate?'"),await this.walkToNextEncounter(),c(!0);const b=await Te().waitForSkillOptionClick();return b===1?{victory:!0,encounterAction:{type:"encounterAction",encounterIndex:this.currentEncounterIndex,victory:!0,debugMessage:"Player chose not to fight at crossroads",choiceIndex:b}}:(this.setNextEncounterPositionCallback(),this.processEnemyEncounter(t))}async damagePlayer(t){this.playerCharacter.takeDamage(t),await this.playerCharacter.getDisplayCharacter().takeDamage(t,this.playerCharacter.getCurrentHp(),this.playerCharacter.getModifiedStatValue("MaxHp")),Te().setPlayerCurrentHp(this.playerCharacter.getCurrentHp())}updatePlayerCharacterStats(){var v;const t=(v=Te().playerStats)==null?void 0:v.stats,c=this.playerCharacter.getModel();t&&c&&(c.setStatValue("MaxHp",t.MaxHp.value),c.setStatValue("Attack",t.Attack.value),c.setStatValue("Defense",t.Defense.value),c.setStatValue("Speed",t.Speed.value),c.setStatValue("Dodge",t.Dodge.value),c.setStatValue("Crit",t.Crit.value)),this.playerCharacter.setModel(c)}destroy(){this.unsubscribeFromStore&&this.unsubscribeFromStore()}}const Cn=new _i.Events.EventEmitter,XI=R=>{Cn.emit("playerStatsUpdated",R)},mg=R=>{Cn.emit("playerHPUpdate",R)};class sc{constructor(t){this.target=t,this.type="DefaultRage",this.label="Rage Attack"}async execute(t,c){const v={source:t,target:this.target,attackImpactTime:t.getDisplayCharacter().getAttackImpactTime(),attackImpactHeightRatio:t.getDisplayCharacter().getAttackImpactHeightRatio(),totalDamage:0,hitCount:0,isCritical:!1,isRage:!0,wasDodged:!1,statusEffects:[]},x=t.getWeaponDamage();if(x.fire*=2.5,x.ice*=2.5,x.lightning*=2.5,x.shadow*=2.5,x.physical*=2.5,v.wasDodged=this.target.getAttackDodged(),!v.wasDodged){const b=this.target.calculateIncomingDamage(x);v.totalDamage=b.totalDamage,v.damageResult=b,v.hitCount=1}if(!this.target.isDead())return await Promise.all([t.doRageAttack(this.target,v),c.applyDamage(t,this.target,v,this)]),v}clone(){return new sc(this.target)}}class zI{constructor(){this.name="Default Rage Ability",this.description="Unleash your rage on the target.",this.priority=-1}async onTurnStart(t,c,v){if(t.getRage()<100)return[];const x=v.getDefaultTargetFor(t);return!x||x.isDead()?(t.consumeRage(),[]):(t.consumeRage(),[new sc(x)])}async onPostActionPhase(t,c,v,x){if(v.isOutOfTurn)return[];if(t.getRage()<100)return[];const b=x.getDefaultTargetFor(t);return!b||b.isDead()?(t.consumeRage(),[]):(await t.showRageActivated(),t.consumeRage(),[new sc(b)])}}class B1 extends Phaser.GameObjects.Container{constructor(t,c,v,x={}){super(t,c,v),this.rays=[],this.isAnimating=!1;const b={rays:x.rays||8,outerRadius:x.outerRadius||150,rayTextures:x.rayTextures||["ray-texture"],alpha:x.alpha||.8,blendMode:x.blendMode||Phaser.BlendModes.ADD,tint:x.tint||16777215,irregularity:x.irregularity||.3};this.createStarburst(b),t.add.existing(this)}createStarburst(t){for(let c=0;c<t.rays;c++){const v=c/t.rays*Math.PI*2,x=(Math.random()-.5)*t.irregularity*(Math.PI*2/t.rays),b=v+x,h=Math.floor(Math.random()*t.rayTextures.length),w=t.rayTextures[h],e=1+(Math.random()-.5)*t.irregularity*.5,i=t.outerRadius*e,u=1+(Math.random()-.5)*t.irregularity*.3,n=1+(Math.random()-.5)*t.irregularity*.4,r=Math.max(.1,Math.min(1,t.alpha*n)),a=this.scene.add.image(0,0,w).setOrigin(.5,1).setRotation(b).setScale(i/200*u,i/200).setAlpha(r).setBlendMode(t.blendMode).setTint(t.tint);this.rays.push(a),this.add(a)}}appear(t=800,c="Back.easeOut"){return new Promise(v=>{this.setScale(0),this.setAlpha(0),this.scene.tweens.add({targets:this,scaleX:1,scaleY:1,alpha:1,duration:t,ease:c,onComplete:()=>v()})})}disappear(t=400,c="Power2.easeIn"){return new Promise(v=>{this.scene.tweens.add({targets:this,scaleX:0,scaleY:0,alpha:0,duration:t,ease:c,onComplete:()=>{this.setVisible(!1),v()}})})}startYoYoRotation(t=1,c=Math.PI/3){if(this.isAnimating)return;this.isAnimating=!0;const v=2e3/Math.abs(t),x=t>0?c:-c;this.scene.tweens.add({targets:this,rotation:x,duration:v,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}stopYoYoRotation(){this.isAnimating=!1,this.scene.tweens.killTweensOf(this),this.setRotation(0)}setColor(t){this.rays.forEach(c=>c.setTint(t))}setIntensity(t){this.rays.forEach(c=>c.setAlpha(t))}destroy(){this.scene.tweens.killTweensOf(this),this.rays.forEach(t=>t.destroy()),this.rays=[],super.destroy()}}class WI extends Phaser.GameObjects.Container{constructor(t,c,v){super(t,c,v),this.spriteKey="Cart",this.foodImage=null,t.add.existing(this),this.chef=new ic(t,t.spine,0,-170,"chef-data","chef-atlas"),this.chef.setScale(.2,.2),this.chef.animationState.timeScale=Te().animationSpeed||1,this.chef.animationState.setAnimation(0,"idle",!0),this.add(this.chef),t.events.on("update",(b,h)=>this.chef.preUpdate(b,h));const x=new Phaser.GameObjects.Sprite(t,0,0,this.spriteKey);x.setOrigin(.5,1),this.add(x),this.createStarbursts(),this.glow=new Phaser.GameObjects.Sprite(t,0,-200,"BigGlow").setBlendMode(Phaser.BlendModes.ADD).setTint(16757760).setDepth(1).setAlpha(0),this.add(this.glow)}createStarbursts(t=-50,c=-225){this.starburst1=new B1(this.scene,t,c,{rays:12,outerRadius:150,rayTextures:["Ray1","Ray2"],alpha:.8,blendMode:Phaser.BlendModes.ADD,tint:16763904,irregularity:.6}),this.starburst1.setVisible(!1),this.starburst1.setDepth(1),this.add(this.starburst1),this.starburst2=new B1(this.scene,t,c,{rays:8,outerRadius:125,rayTextures:["Ray1","Ray2"],alpha:.9,blendMode:Phaser.BlendModes.ADD,tint:16750848,irregularity:.4}),this.starburst2.setVisible(!1),this.starburst2.setDepth(2),this.add(this.starburst2)}async reveal(){await Bt(this.scene,500),this.chef.animationState.setAnimation(0,"reveal",!1),await Bt(this.scene,950),ul("VictoryCutscene"),await Bt(this.scene,1850),this.showFood(),await Bt(this.scene,320),this.showEffects(),await Bt(this.scene,500)}async sendToMouth(t,c,v,x){if(!this.foodImage){console.warn("Food image is not available for sending to mouth.");return}this.scene.tweens.add({targets:this.foodImage,x:t,y:c,delay:x,scale:.1,duration:v,ease:"Quad.easeIn",onComplete:()=>{this.foodImage.destroy(),this.foodImage=null}}),await Bt(this.scene,x),this.starburst1.disappear(),this.starburst2.disappear(),this.glow.setVisible(!1),await new Promise(b=>{const h={complete:()=>{this.chef.animationState.removeListener(h),b()}};this.chef.animationState.addListener(h),this.chef.animationState.setAnimation(0,"reveal-idle",!1)}),this.chef.animationState.setAnimation(0,"idle",!0)}moveAndShowStarburst(t,c){const v=new Phaser.Math.Vector2;this.getWorldTransformMatrix().invert().transformPoint(t,c,v),this.createStarbursts(v.x,v.y),this.showStarbursts(),this.glow.setPosition(v.x,v.y),this.glow.setVisible(!0)}showFood(){return this.foodImage=this.scene.add.sprite(this.x-50,this.y-225,"MissionFoodImage").setAlpha(0).setScale(.1).setDepth(101),this.scene.tweens.add({targets:this.foodImage,alpha:1,scale:.4,y:this.y-225,duration:150,ease:"Quad.easeOut"}),this.foodImage}showStarbursts(){this.starburst1.startYoYoRotation(.3,Math.PI/4),this.starburst2.startYoYoRotation(-.4,Math.PI/3),this.starburst1.setVisible(!0),this.starburst2.setVisible(!0),this.starburst1.appear(1500,"Circ.easeOut"),this.starburst2.appear(1500,"Circ.easeOut")}showEffects(){this.showStarbursts(),this.scene.tweens.add({targets:this.glow,alpha:.65,scale:3,duration:1500,ease:"Circ.easeOut"})}}class jI extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"golem_baby-atlas",skeletonKey:"golem_baby-data",depth:x,displayName:"GolemBaby"}),this.displayName="Baby Golem",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=300,this.updateAttackVfxConfig(je.DEFAULT,{scale:.5,textureKey:"frontal_attack",offsetX:25,offsetY:25})}}class KI extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"golem_boar-atlas",skeletonKey:"golem_boar-data",depth:x,displayName:"GolemBoar"}),this.displayName="Boar Golem",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=266,this.defaultAttackConfig.meleeAttackRange=30,this.updateAttackVfxConfig(je.DEFAULT,{scale:.5,textureKey:"frontal_attack",offsetX:25,offsetY:25})}}class $S extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"golem_mountain-atlas",skeletonKey:"golem_mountain-data",depth:x,displayName:"GolemMountain"}),this.displayName="Mountain Golem",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=433,this.defaultAttackConfig.meleeAttackRange=75,this.updateAttackVfxConfig(je.DEFAULT,{scale:1.25,textureKey:"downward_slash",offsetX:100,offsetY:75})}}let $I=class extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"skeleton-atlas",skeletonKey:"skeleton-data",depth:x,displayName:"Skeleton"}),this.displayName="Warrior Skeleton",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=266,this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.ENEMYSWORD,volume:1,rate:Nt.MEDIUM})}};class QI extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"skel_fireHead-atlas",skeletonKey:"skel_fireHead-data",depth:x,displayName:"SkeletonFireHead"}),this.displayName="Flaming Skeleton",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=300,this.defaultAttackConfig.meleeAttackRange=100,this.rageAttackConfig.attackType=Ls.PROJECTILE,this.rageAttackConfig.impactTime=300;const b="FireBall",h="FireBall_anim";this.scene.anims.create({key:h,frames:this.scene.anims.generateFrameNumbers(b,{start:0,end:8}),frameRate:24,repeat:-1,yoyo:!1}),this.projectileConfig={name:b,animKey:h,releaseDelay:200,duration:400,scaleStart:1,scaleEnd:3,startOffsetX:100,startOffsetY:100,blendMode:Phaser.BlendModes.SCREEN},this.setScale(.3,.3),this.updateAttackVfxConfig(je.DEFAULT,{offsetX:25,offsetY:25})}}class JI extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"skel_iceHead-atlas",skeletonKey:"skel_iceHead-data",depth:x,displayName:"SkeletonIceHead"}),this.displayName="Ice Flame Skeleton",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=300,this.defaultAttackConfig.meleeAttackRange=100,this.rageAttackConfig.attackType=Ls.PROJECTILE,this.rageAttackConfig.impactTime=300;const b="IceBall",h="IceBall_anim";this.scene.anims.create({key:h,frames:this.scene.anims.generateFrameNumbers(b,{start:0,end:8}),frameRate:24,repeat:-1,yoyo:!1}),this.projectileConfig={name:b,animKey:h,releaseDelay:200,duration:400,scaleStart:1,scaleEnd:3,startOffsetX:100,startOffsetY:100,blendMode:Phaser.BlendModes.SCREEN},this.setScale(.3,.3),this.updateAttackVfxConfig(je.DEFAULT,{offsetX:25,offsetY:25})}}class ZI extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"skel_archer-atlas",skeletonKey:"skel_archer-data",depth:x,displayName:"SkeletonArcher"}),this.displayName="Ranger Skeleton",this.projectileConfig={name:"Arrow",releaseDelay:400,duration:200,scaleStart:1,scaleEnd:1,startOffsetX:100,startOffsetY:0},this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.attackType=Ls.PROJECTILE,this.defaultAttackConfig.impactTime=400,this.updateAttackVfxConfig(je.DEFAULT,{scale:.5,textureKey:"frontal_attack",offsetX:50,offsetY:20}),this.updateAttackSfxConfig(kt.WINDUP,{soundType:Xe.WINDUP}),this.updateAttackVfxConfig(je.DEFAULT,{textureKey:void 0}),this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.ENEMYATTACKRANGE})}}class qI extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"skel_assassin-atlas",skeletonKey:"skel_assassin-data",depth:x,displayName:"SkeletonAssassin"}),this.displayName="Assassin Skeleton",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=350,this.updateAttackVfxConfig(je.DEFAULT,{scale:.7,textureKey:"default_slash",offsetX:50,offsetY:0})}}class QS extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"skel_greatSword-atlas",skeletonKey:"skel_greatSword-data",depth:x,displayName:"SkeletonGreatSword"}),this.displayName="Swordsman Skeleton",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=400,this.defaultAttackConfig.meleeAttackRange=100,this.defaultAttackConfig.attackSfxOffset=200,this.updateAttackVfxConfig(je.DEFAULT,{scale:1.2,textureKey:"downward_slash",offsetX:150,offsetY:80,heightRatio:1}),this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.ENEMYSWORDBIG,volume:1,rate:Nt.MEDIUM})}}class _I extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"skel_wizard-atlas",skeletonKey:"skel_wizard-data",depth:x,displayName:"SkeletonWizard"}),this.displayName="Wizard Skeleton",this.projectileConfig={name:"PlasmaBall",releaseDelay:400,duration:100,scaleStart:1,scaleEnd:2.5,startOffsetX:150,startOffsetY:60},this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.attackType=Ls.PROJECTILE,this.defaultAttackConfig.impactTime=300,this.updateAttackVfxConfig(je.DEFAULT,{scale:.5,textureKey:"frontal_attack",offsetX:50,offsetY:20}),this.updateAttackSfxConfig(kt.WINDUP,{soundType:Xe.CUSTOM,customKey:"magicWindup1"}),this.updateAttackVfxConfig(je.DEFAULT,{textureKey:void 0}),this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.CUSTOM,customKey:"magicAttack1"})}}class eO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"skel_noHead-atlas",skeletonKey:"skel_noHead-data",depth:x,displayName:"SkeletonNoHead"}),this.displayName="Headless Skeleton",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=266,this.defaultAttackConfig.meleeAttackRange=50,this.updateAttackVfxConfig(je.DEFAULT,{scale:.5,textureKey:"frontal_attack",offsetX:100,offsetY:0})}}class tO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"skel_2Axe-atlas",skeletonKey:"skel_2Axe-data",depth:x,displayName:"SkeletonAxe"}),this.displayName="Barbarian Skeleton",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=266,this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.ENEMYSWORD,volume:1,rate:Nt.MEDIUM})}}class JS extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"slime_bone-atlas",skeletonKey:"slime_bone-data",depth:x,displayName:"SlimeBone"}),this.displayName="Bone Slime",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=400,this.updateAttackVfxConfig(je.DEFAULT,{scale:.75,offsetX:25,offsetY:-10})}}class iO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"slime_knight-atlas",skeletonKey:"slime_knight-data",depth:x,displayName:"SlimeKnight"}),this.displayName="Slime Knight",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=266,this.updateAttackVfxConfig(je.DEFAULT,{scale:.75,offsetX:75,offsetY:50}),this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.ENEMYSWORD,volume:1,rate:Nt.MEDIUM})}}class sO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"slime_bigMouth-atlas",skeletonKey:"slime_bigMouth-data",depth:x,displayName:"SlimeBigMouth"}),this.displayName="Chomp Slime",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=266,this.updateAttackVfxConfig(je.DEFAULT,{scale:.75,offsetX:25,offsetY:-10})}}class aO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"slime_cat-atlas",skeletonKey:"slime_cat-data",depth:x,displayName:"SlimeCat"}),this.displayName="Cat Slime",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=266,this.updateAttackVfxConfig(je.DEFAULT,{scale:.5,textureKey:"frontal_attack",offsetX:50,offsetY:20})}}class nO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"slime_gems-atlas",skeletonKey:"slime_gems-data",depth:x,displayName:"SlimeGems"}),this.displayName="Crystal Slime",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=300,this.updateAttackVfxConfig(je.DEFAULT,{scale:.75,offsetX:25,offsetY:-10})}}class rO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"mushroom_small-atlas",skeletonKey:"mushroom_small-data",depth:x,displayName:"MushroomSmall"}),this.displayName="Bitey Shroom",this.setOrigin(.5,1),this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=266,this.updateAttackVfxConfig(je.DEFAULT,{scale:.5,textureKey:"frontal_attack",offsetX:50,offsetY:20})}}class oO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"mushroom_large-atlas",skeletonKey:"mushroom_large-data",depth:x,displayName:"MushroomLarge"}),this.displayName="Erin-guy",this.setScale(.4,.4),this.setOrigin(.5,1),this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=266,this.defaultAttackConfig.meleeAttackRange=100,this.updateAttackVfxConfig(je.DEFAULT,{scale:.75,textureKey:"frontal_attack",offsetX:120,offsetY:100})}}class lO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"mushroom_large-atlas",skeletonKey:"mushroom_large-data",depth:x,displayName:"MushroomLargeBoss"}),this.displayName="Boss Mushroom",this.setScale(.4,.4),this.setOrigin(.5,1),this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=266,this.defaultAttackConfig.meleeAttackRange=100,this.rageAttackConfig.attackType=Ls.PROJECTILE,this.rageAttackConfig.impactTime=500;const b="SporeCloud",h="SporeCloud_anim";this.scene.anims.create({key:h,frames:this.scene.anims.generateFrameNumbers(b,{start:0,end:8}),frameRate:12,repeat:-1,yoyo:!1}),this.projectileConfig={name:b,animKey:h,releaseDelay:200,duration:700,scaleStart:1,scaleEnd:3,startOffsetX:100,startOffsetY:100,blendMode:Phaser.BlendModes.COLOR_DODGE},this.updateAttackVfxConfig(je.DEFAULT,{scale:.75,textureKey:"frontal_attack",offsetX:120,offsetY:100}),this.updateAttackVfxConfig(je.RAGE,{scale:0,textureKey:void 0,offsetX:0,offsetY:0})}}class hO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"plant_bigMouth-atlas",skeletonKey:"plant_bigMouth-data",depth:x,displayName:"PlantBigMouth"}),this.displayName="Big Mouth Plant",this.setOrigin(.5,1),this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=266,this.defaultAttackConfig.meleeAttackRange=75,this.updateAttackVfxConfig(je.DEFAULT,{scale:.5,textureKey:"frontal_attack",offsetX:50,offsetY:20})}}class dO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"cannibal-atlas",skeletonKey:"cannibal-data",depth:x,displayName:"Cannibal"}),this.displayName="Shadowbearer",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=433,this.defaultAttackConfig.meleeAttackRange=20,this.updateAttackVfxConfig(je.DEFAULT,{scale:1,textureKey:"chomp",blendMode:Phaser.BlendModes.ADD,offsetX:65,offsetY:0})}}class uO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"dark_bat-atlas",skeletonKey:"dark_bat-data",depth:x,displayName:"DarkBat"}),this.displayName="Shadow Wing",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=350,this.updateAttackVfxConfig(je.DEFAULT,{scale:.8,textureKey:"chomp",blendMode:Phaser.BlendModes.ADD,offsetX:80,offsetY:50})}}class cO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"dark_shaman-atlas",skeletonKey:"dark_shaman-data",depth:x,displayName:"DarkShaman"}),this.displayName="Shadowbringer",this.projectileConfig={name:"PlasmaBallDark",releaseDelay:480,duration:250,scaleStart:1,scaleEnd:1.2,startOffsetX:130,startOffsetY:-20},this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.attackType=Ls.PROJECTILE,this.defaultAttackConfig.impactTime=550,this.updateAttackSfxConfig(kt.WINDUP,{soundType:Xe.CUSTOM,customKey:"magicWindup2"}),this.updateAttackVfxConfig(je.DEFAULT,{textureKey:void 0}),this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.CUSTOM,customKey:"magicAttack2"})}}class fO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"dark_child-atlas",skeletonKey:"dark_child-data",depth:x,displayName:"DarkChild"}),this.displayName="Shadowkin",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=300,this.updateAttackVfxConfig(je.DEFAULT,{scale:.7,textureKey:"frontal_attack",blendMode:Phaser.BlendModes.ADD,offsetX:25,offsetY:0})}}class ZS extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"dark_bigGuy-atlas",skeletonKey:"dark_bigGuy-data",depth:x,displayName:"DarkBigGuy"}),this.displayName="Shadow Brute",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=433,this.defaultAttackConfig.meleeAttackRange=20,this.updateAttackVfxConfig(je.DEFAULT,{scale:1,textureKey:"default_slash",blendMode:Phaser.BlendModes.ADD,offsetX:65,offsetY:0})}}class mO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"dark_hand-atlas",skeletonKey:"dark_hand-data",depth:x,displayName:"DarkHand"}),this.displayName="Arm of Shadow",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=470,this.defaultAttackConfig.meleeAttackRange=100,this.updateAttackVfxConfig(je.DEFAULT,{scale:1.2,textureKey:"default_slash",blendMode:Phaser.BlendModes.ADD,offsetX:120,offsetY:-10})}}class gO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"dark_spider-atlas",skeletonKey:"dark_spider-data",depth:x,displayName:"DarkSpider"}),this.displayName="Skittering Shadow",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=350,this.defaultAttackConfig.meleeAttackRange=50,this.updateAttackVfxConfig(je.DEFAULT,{scale:.8,textureKey:"chomp",blendMode:Phaser.BlendModes.ADD,offsetX:120,offsetY:0})}}class pO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"dark_wiz-atlas",skeletonKey:"dark_wiz-data",depth:x,displayName:"DarkWizard"}),this.displayName="Shadow Conjurer",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=400,this.defaultAttackConfig.returnTime=933,this.defaultAttackConfig.meleeAttackRange=170,this.updateAttackVfxConfig(je.DEFAULT,{textureKey:void 0}),this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.CUSTOM,customKey:"magicAttack3"})}}class vO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"dark_worm-atlas",skeletonKey:"dark_worm-data",depth:x,displayName:"DarkWorm"}),this.displayName="Shadow Hatchling",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=350,this.defaultAttackConfig.meleeAttackRange=50,this.updateAttackVfxConfig(je.DEFAULT,{scale:.8,textureKey:"chomp",blendMode:Phaser.BlendModes.ADD,offsetX:120,offsetY:0})}}class yO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"dark_giantHorns-atlas",skeletonKey:"dark_giantHorns-data",depth:x,displayName:"DarkGiantHorns"}),this.displayName="Hollowhorn",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=400,this.defaultAttackConfig.meleeAttackRange=75,this.setScale(.3),this.updateAttackVfxConfig(je.DEFAULT,{scale:.8,textureKey:"frontal_attack",blendMode:Phaser.BlendModes.SCREEN,offsetX:90,offsetY:10})}}class xO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"mushroom_child-atlas",skeletonKey:"mushroom_child-data",depth:x,displayName:"MushroomChild"}),this.displayName="Shroomkin",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=500,this.updateAttackVfxConfig(je.DEFAULT,{scale:.5,textureKey:"frontal_attack",blendMode:Phaser.BlendModes.SCREEN,offsetX:30,offsetY:0})}}class wO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"mushroom_frog-atlas",skeletonKey:"mushroom_frog-data",depth:x,displayName:"MushroomFrog"}),this.displayName="Sporehead",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=500,this.defaultAttackConfig.meleeAttackRange=50,this.updateAttackVfxConfig(je.DEFAULT,{scale:.7,textureKey:"frontal_attack",blendMode:Phaser.BlendModes.SCREEN,offsetX:60,offsetY:-10})}}class qS extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"mushroom_soldier-atlas",skeletonKey:"mushroom_soldier-data",depth:x,displayName:"MushroomSoldier"}),this.displayName="Sporewarden",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=300,this.defaultAttackConfig.meleeAttackRange=100,this.updateAttackVfxConfig(je.DEFAULT,{scale:.8,textureKey:"frontal_attack",blendMode:Phaser.BlendModes.SCREEN,offsetX:110,offsetY:40})}}class SO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"dark_demon-atlas",skeletonKey:"dark_demon-data",depth:x,displayName:"DarkDemon"}),this.displayName="Umbral Winged Shadeborn",this.defaultAnimation=Ve.Idle,this.rageAttackConfig.impactTime=500,this.rageAttackConfig.meleeAttackRange=220,this.setScale(.3,.3),this.updateAttackVfxConfig(je.RAGE,{scale:2.75,textureKey:"default_rage",offsetX:170,offsetY:150}),this.updateAttackVfxConfig(je.SAYNOTHING,{offsetX:175,offsetY:0}),this.updateAttackSfxConfig(kt.RAGE,{soundType:Xe.ENEMYSWORDBIG,volume:1,rate:Nt.MEDIUM})}wait(t){return this.playVfx(500,je.SAYNOTHING),super.wait(t)}}class TO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"mushroom_monster-atlas",skeletonKey:"mushroom_monster-data",depth:x,displayName:"MushroomMonster"}),this.displayName="Sturdy Sporeborn",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=1e3,this.defaultAttackConfig.meleeAttackRange=50,this.updateAttackVfxConfig(je.DEFAULT,{scale:.75,textureKey:"default_slash",offsetX:80,offsetY:30})}}class CO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"mushroom_teeth-atlas",skeletonKey:"mushroom_teeth-data",depth:x,displayName:"MushroomTeeth"}),this.displayName="Mawcap",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=800,this.defaultAttackConfig.meleeAttackRange=0,this.updateAttackVfxConfig(je.DEFAULT,{scale:.75,textureKey:"chomp",offsetX:20,offsetY:0})}}class AO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"wood_golem-atlas",skeletonKey:"wood_golem-data",depth:x,displayName:"WoodGolem"}),this.displayName="Heartroot Guardian",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=500,this.defaultAttackConfig.meleeAttackRange=350,this.rageAttackConfig.impactTime=1e3,this.rageAttackConfig.meleeAttackRange=350,this.rageAttackConfig.timeScale=.5,this.updateAttackVfxConfig(je.DEFAULT,{scale:0,textureKey:void 0,offsetX:0,offsetY:0}),this.updateAttackVfxConfig(je.RAGE,{scale:0,textureKey:void 0,offsetX:0,offsetY:0}),this.attackSfxConfigs[kt.HEAL]={soundType:Xe.HEAL,volume:1,rate:Nt.LOW}}async heal(t,c,v,x=0){this.damageFlash(3398963,1e3),this.playSfx(0,kt.HEAL),this.hpBar.updateStat({value:c/v,statNumberValue:t,duration:1e3}),await Bt(this.scene,1e3)}}class bO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"icyWood_golem-atlas",skeletonKey:"icyWood_golem-data",depth:x,displayName:"Icy Wood Golem"}),this.displayName="Frostroot Guardian",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=500,this.defaultAttackConfig.meleeAttackRange=350,this.rageAttackConfig.impactTime=1e3,this.rageAttackConfig.meleeAttackRange=350,this.rageAttackConfig.timeScale=.5,this.updateAttackVfxConfig(je.DEFAULT,{scale:0,textureKey:void 0,offsetX:0,offsetY:0}),this.updateAttackVfxConfig(je.RAGE,{scale:0,textureKey:void 0,offsetX:0,offsetY:0}),this.attackSfxConfigs[kt.HEAL]={soundType:Xe.HEAL,volume:1,rate:Nt.LOW}}async heal(t,c,v,x=0){this.damageFlash(3398963,1e3),this.playSfx(0,kt.HEAL),this.hpBar.updateStat({value:c/v,statNumberValue:t,duration:1e3}),await Bt(this.scene,1e3)}}class EO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"wood_octopus-atlas",skeletonKey:"wood_octopus-data",depth:x,displayName:"WoodOctopus"}),this.displayName="Branchclutch",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=400,this.defaultAttackConfig.impactHeightRatio=.1,this.defaultAttackConfig.meleeAttackRange=60,this.updateAttackVfxConfig(je.DEFAULT,{scale:.75,textureKey:"frontal_attack",offsetX:130,offsetY:55})}}class MO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"wood_roof-atlas",skeletonKey:"wood_roof-data",depth:x,displayName:"WoodRoof"}),this.displayName="Stumpkin",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=400,this.defaultAttackConfig.impactHeightRatio=.3,this.defaultAttackConfig.meleeAttackRange=40,this.updateAttackVfxConfig(je.DEFAULT,{scale:.75,textureKey:"frontal_attack",offsetX:80,offsetY:20})}}class LO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"livingArmor-atlas",skeletonKey:"livingArmor-data",depth:x,displayName:"LivingArmor"}),this.displayName="Steel Revenant",this.defaultAnimation=Ve.Idle,this.setScale(.25,.25),this.defaultAttackConfig.impactTime=500,this.defaultAttackConfig.meleeAttackRange=420,this.rageAttackConfig.impactTime=600,this.rageAttackConfig.meleeAttackRange=250,this.rageAttackConfig.timeScale=4,this.rageAttackConfig.isBackup=!0,this.updateAttackVfxConfig(je.DEFAULT,{scale:1.2,textureKey:"frontal_attack",offsetX:500,offsetY:100}),this.updateAttackVfxConfig(je.RAGE,{scale:1.5,textureKey:"frontal_attack",blendMode:Phaser.BlendModes.ADD,offsetX:300,offsetY:50}),this.updateAttackVfxConfig(je.DASH,{textureKey:void 0})}}class _S extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"robot_no5-atlas",skeletonKey:"robot_no5-data",depth:x,displayName:"RobotNo5"}),this.displayName="WasteLogic LX-9",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=400,this.defaultAttackConfig.attackType=Ls.LASER;const b="BeamFire",h="BeamCoreFire";this.createLaserAnimations(b),this.laserConfig={characterAnimKey:"attack",coreKey:h,atlasKey:b,shootDelay:400,extendDuration:200,laserDuration:700,windDownDuration:433,fadeOutDuration:200,scale:.75,startOffsetX:26,startOffsetY:-8},this.updateAttackVfxConfig(je.DEFAULT,{scale:0,textureKey:void 0,blendMode:Phaser.BlendModes.SCREEN,offsetX:0,offsetY:0}),this.updateAttackSfxConfig(kt.DIE,{soundType:Xe.ROBOTDIE,volume:.5,rate:Nt.LOW}),this.updateAttackSfxConfig(kt.WINDUP,{soundType:Xe.LASERWINDUP,volume:.5,rate:Nt.LOW}),this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.ENEMYATTACKLASER,volume:.5,rate:Nt.LOW})}}function Ll(R,t){return class extends R{constructor(...c){super(...c),this.displayName=t}}}const RO=Ll($S,"Loaded Mountain Golem"),PO=Ll(JS,"Loaded Bone Slime"),BO=Ll(QS,"Loaded Swordsman Skeleton"),DO=Ll(ZS,"Loaded Shadow Brute"),FO=Ll(qS,"Loaded Sporewarden"),IO=Ll(_S,"Loaded Robot 5");class OO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"robot_no1-atlas",skeletonKey:"robot_no1-data",depth:x,displayName:"RobotNo1"}),this.displayName="Y5-Sentry",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=200,this.defaultAttackConfig.attackType=Ls.LASER;const b="BeamOverlay",h="BeamCoreOverlay";this.createLaserAnimations(b),this.laserConfig={characterAnimKey:"attack",coreKey:h,atlasKey:b,isOverlaySprites:!0,shootDelay:233,extendDuration:0,laserDuration:733,windDownDuration:433,fadeOutDuration:0,scale:.5,startOffsetX:20,startOffsetY:-12,startRotation:100,blendMode:Phaser.BlendModes.SCREEN},this.updateAttackVfxConfig(je.DEFAULT,{scale:0,textureKey:void 0,blendMode:Phaser.BlendModes.SCREEN,offsetX:0,offsetY:0}),this.updateAttackSfxConfig(kt.DIE,{soundType:Xe.ROBOTDIE,volume:.5,rate:Nt.HIGH}),this.updateAttackSfxConfig(kt.WINDUP,{soundType:Xe.LASERWINDUP,volume:.5,rate:Nt.HIGH}),this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.ENEMYATTACKLASER,volume:.5,rate:Nt.HIGH})}}class NO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"robot_no2-atlas",skeletonKey:"robot_no2-data",depth:x,displayName:"RobotNo2"}),this.displayName="KRG-01",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=350,this.defaultAttackConfig.meleeAttackRange=130,this.updateAttackVfxConfig(je.DEFAULT,{scale:1,textureKey:"default_slash",blendMode:Phaser.BlendModes.SCREEN,offsetX:160,offsetY:-60}),this.updateAttackSfxConfig(kt.DASH,{soundType:Xe.ROBOTDASH,volume:.5,rate:Nt.HIGH}),this.updateAttackSfxConfig(kt.DIE,{soundType:Xe.ROBOTDIE,volume:.5,rate:Nt.HIGH})}}class GO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"robot_no3-atlas",skeletonKey:"robot_no3-data",depth:x,displayName:"RobotNo3"}),this.displayName="Gen5-HVY",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=620,this.defaultAttackConfig.meleeAttackRange=50,this.updateAttackVfxConfig(je.DEFAULT,{scale:.7,textureKey:"frontal_attack",blendMode:Phaser.BlendModes.SCREEN,offsetX:90,offsetY:0}),this.updateAttackSfxConfig(kt.DASH,{soundType:Xe.ROBOTDASH,volume:.5,rate:Nt.LOW}),this.updateAttackSfxConfig(kt.DIE,{soundType:Xe.ROBOTDIE,volume:.5,rate:Nt.LOW})}}class HO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"robot_no4-atlas",skeletonKey:"robot_no4-data",depth:x,displayName:"RobotNo4"}),this.displayName="Medibot-Mark IV",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=800,this.defaultAttackConfig.attackType=Ls.LASER;const b="BeamIce",h="BeamCoreIce";this.createLaserAnimations(b),this.laserConfig={characterAnimKey:"attack",coreKey:h,atlasKey:b,shootDelay:733,extendDuration:200,laserDuration:666,windDownDuration:433,fadeOutDuration:100,scale:.68,startOffsetX:80,startOffsetY:20,blendMode:Phaser.BlendModes.SCREEN},this.updateAttackVfxConfig(je.DEFAULT,{scale:0,textureKey:void 0,blendMode:Phaser.BlendModes.SCREEN,offsetX:0,offsetY:0}),this.updateAttackSfxConfig(kt.DIE,{soundType:Xe.ROBOTDIE,volume:.5,rate:Nt.HIGH}),this.updateAttackSfxConfig(kt.WINDUP,{soundType:Xe.LASERWINDUP,volume:.5,rate:Nt.HIGH}),this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.ENEMYATTACKLASER,volume:.5,rate:Nt.HIGH})}}class kO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"robot_no6-atlas",skeletonKey:"robot_no6-data",depth:x,displayName:"RobotNo6"}),this.displayName="BRX-7 Sentry Chassis",this.defaultAnimation=Ve.Idle,this.setScale(.33);const b="BeamFire",h="BeamCoreFire";this.createLaserAnimations(b),this.defaultAttackConfig.impactTime=400,this.defaultAttackConfig.attackType=Ls.LASER,this.defaultAttackConfig.laserConfig={characterAnimKey:"attack_lazer",coreKey:h,atlasKey:b,shootDelay:366,extendDuration:200,laserDuration:766,windDownDuration:866,fadeOutDuration:200,scale:1,startOffsetX:150,startOffsetY:35},this.customAttackOneMissile={characterAnimationKey:"attack_oneRocket",attackType:Ls.MISSILE,impactTime:700,attackSfxOffset:100,impactHeightRatio:0,returnTime:-1,offset:100,meleeAttackRange:0,isBackup:!1},this.customAttackOneMissile.missileConfig={characterAnimKey:"attack_oneRocket",missileKey:"Missile",missileScale:.4,launchDelay:200,missileCount:1,flightDuration:600,startOffsetX:-100,startOffsetY:-70},this.customAttackConfigs.CustomAttackOneMissile=this.customAttackOneMissile,this.rageAttackConfig.impactTime=900,this.rageAttackConfig.attackType=Ls.MISSILE,this.rageAttackConfig.missileConfig={characterAnimKey:"attack_multiRockets",missileKey:"Missile",missileScale:.4,launchDelay:200,missileCount:9,flightDuration:600,startOffsetX:-100,startOffsetY:-70},this.updateAttackSfxConfig(kt.DIE,{soundType:Xe.CUSTOM,customKey:"robotDieBoss",volume:.5,rate:Nt.LOW}),this.updateAttackSfxConfig(kt.WINDUP,{soundType:Xe.LASERWINDUP,volume:.5,rate:Nt.LOW}),this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.ENEMYATTACKLASER,volume:.5,rate:Nt.LOW}),this.updateAttackVfxConfig(je.DEFAULT,{scale:0,textureKey:void 0,blendMode:Phaser.BlendModes.SCREEN,offsetX:0,offsetY:0}),this.updateAttackVfxConfig(je.RAGE,{scale:0,textureKey:void 0,blendMode:Phaser.BlendModes.SCREEN,offsetX:0,offsetY:0})}}class UO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"robot_no7-atlas",skeletonKey:"robot_no7-data",depth:x,displayName:"RobotNo7"}),this.displayName="Minifax Model B",this.defaultAnimation=Ve.Idle,this.defaultAttackConfig.impactTime=620,this.defaultAttackConfig.meleeAttackRange=50,this.updateAttackVfxConfig(je.DEFAULT,{scale:.4,textureKey:"default_slash",blendMode:Phaser.BlendModes.SCREEN,offsetX:120,offsetY:40}),this.updateAttackSfxConfig(kt.DASH,{soundType:Xe.ROBOTDASH,volume:.5,rate:Nt.HIGH}),this.updateAttackSfxConfig(kt.DIE,{soundType:Xe.ROBOTDIE,volume:.5,rate:Nt.HIGH})}}class VO extends Ft{constructor({scene:t,x:c,y:v,depth:x}){super({scene:t,x:c,y:v,atlasKey:"robot_boss-atlas",skeletonKey:"robot_boss-data",depth:x,displayName:"Robot Boss"}),this.displayName="Slumbering Guardian-X5",this.defaultAnimation=Ve.Idle,this.setScale(.22),this.defaultAttackConfig.impactTime=2300,this.defaultAttackConfig.characterAnimationKey="attack",this.defaultAttackConfig.meleeAttackRange=426,this.defaultAttackConfig.attackSfxOffset=400,this.defaultAttackConfig.attackType=Ls.STATIC,this.rageAttackConfig.impactTime=2100,this.rageAttackConfig.characterAnimationKey="attack2",this.rageAttackConfig.meleeAttackRange=426,this.rageAttackConfig.attackType=Ls.STATIC,this.updateAttackSfxConfig(kt.WINDUP,{soundType:Xe.CUSTOM,customKey:"robotNoise",volume:.8,rate:Nt.LOW}),this.updateAttackVfxConfig(je.DEFAULT,{scale:2,textureKey:"downward_slash",blendMode:Phaser.BlendModes.SCREEN,alpha:.7,offsetX:500,offsetY:40}),this.updateAttackSfxConfig(kt.DEFAULT,{soundType:Xe.CUSTOM,customKey:"whip",volume:.9,rate:Nt.MEDIUM}),this.updateAttackVfxConfig(je.RAGE,{scale:2,textureKey:"electricity",blendMode:Phaser.BlendModes.SCREEN,alpha:.7,offsetX:540,offsetY:100}),this.updateAttackSfxConfig(kt.RAGE,{soundType:Xe.CUSTOM,customKey:"electrocute",volume:.8,rate:Nt.MEDIUM}),t.anims.exists("electricity_anim")||t.anims.create({key:"electricity_anim",frames:t.anims.generateFrameNumbers("electricity",{start:0,end:23}),frameRate:24,repeat:0,yoyo:!1}),this.updateAttackSfxConfig(kt.DIE,{soundType:Xe.CUSTOM,customKey:"robotDieBoss",volume:.9,rate:Nt.LOW})}}const YO={golemBaby:jI,golemBoar:KI,golemMountain:$S,skeleton:$I,skel2Axe:tO,skelArcher:ZI,skelFireHead:QI,skelIceHead:JI,skelNoHead:eO,skelAssassin:qI,skelGreatSword:QS,skelWizard:_I,slimeBone:JS,slimeKnight:iO,slimeBigMouth:sO,slimeCat:aO,slimeGems:nO,mushroomSmall:rO,mushroomLarge:oO,mushroomLargeBoss:lO,plantBigMouth:hO,cannibal:dO,darkBat:uO,darkShaman:cO,darkChild:fO,darkBigGuy:ZS,darkHand:mO,darkSpider:gO,darkWizard:pO,darkWorm:vO,darkGiantHorns:yO,mushroomChild:xO,mushroomFrog:wO,mushroomSoldier:qS,darkDemon:SO,mushroomMonster:TO,mushroomTeeth:CO,woodGolem:AO,icyWoodGolem:bO,woodOctopus:EO,woodRoof:MO,livingArmor:LO,robotNo1:OO,robotNo2:NO,robotNo3:GO,robotNo4:HO,robotNo5:_S,robotNo6:kO,robotNo7:UO,robotBoss:VO,golemMountainLucky:RO,slimeBoneLucky:PO,skelGreatSwordLucky:BO,darkBigGuyLucky:DO,mushroomSoldierLucky:FO,robotNo5Lucky:IO};class XO extends Phaser.GameObjects.Container{constructor(t,c,v){super(t,c,v),t.add.existing(this);const x=new Phaser.GameObjects.Sprite(t,0,0,"Shrine").setOrigin(.5,1),b=new Phaser.GameObjects.Sprite(t,-70,-80,"shrineSmoke").setBlendMode(Phaser.BlendModes.SCREEN).setAlpha(.75).setOrigin(.5,1).setScale(.75);this.createFlickeringGlow(this.scene,90,-200,0),this.createFlickeringGlow(this.scene,115,-190,80),this.createFlickeringGlow(this.scene,20,-290,20,6.5,7.5),this.add(x),this.add(b),this.createAnimations(),b.play("shrineSmoke")}createAnimations(){this.scene.anims.exists("shrineSmoke")||this.scene.anims.create({key:"shrineSmoke",frames:this.scene.anims.generateFrameNames("shrineSmoke",{start:0,end:19}),frameRate:15,repeat:-1})}createFlickeringGlow(t,c,v,x,b=2.9,h=3.1){const w=new Phaser.GameObjects.Sprite(t,c,v,"glow");return w.setBlendMode(Phaser.BlendModes.ADD),w.setAlpha(.7),w.setTint(16711680),this.add(w),t.tweens.add({targets:w,duration:Phaser.Math.Between(80,200),alpha:{from:.3,to:.8},scale:{from:b,to:h},yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:x}),w}}class zO extends Phaser.GameObjects.Container{constructor(t,c,v,x=!1){super(t,c,v),t.add.existing(this);const b=new Phaser.GameObjects.Sprite(t,0,0,"Vend").setOrigin(.5,1);this.add(b),x&&this.createMagicalParticles(t,b)}createMagicalParticles(t,c){this.particleEmitter=t.add.particles(0,0,"StarParticle",{x:{min:-c.width*.3,max:c.width*.3},y:{min:-100,max:-50},speedY:{min:-75,max:-40},speedX:{min:-5,max:5},gravityY:-10,scale:{start:1,end:.4,ease:"Sine.easeOut"},alpha:{start:.8,end:0,ease:"Sine.easeOut"},lifespan:{min:6e3,max:7e3},frequency:200,quantity:1,blendMode:"ADD"}),this.add(this.particleEmitter),t.tweens.add({targets:this.particleEmitter,alpha:{from:.8,to:1},duration:1500,ease:"Sine.easeInOut",yoyo:!0,repeat:-1})}destroy(){this.particleEmitter&&this.particleEmitter.destroy(),super.destroy()}}var Yu=(R=>(R.One="1",R.Half="half",R.Full="full",R))(Yu||{});const WO=-300,jO=320,KO=400,$O=500,QO=600;class JO extends _i.Scene{constructor(){super("Battle"),this.groundY=0,this.enemySpaceWidth=180,this.enemySpaceHeight=30,this.postId="",this.encounterPositionX=this.scale?this.scale.width/2:0,this.encounterSpaceWidth=1e3,this.encounterWalkDuration=2e3}init(){cr.getInstance().activeScene=this,this.encounterPositionX=this.scale.width/2,this.scene.run("BattleUI"),this.battleUI=this.scene.get("BattleUI"),this.battleUI.init(),this.events.once(Phaser.Scenes.Events.DESTROY,()=>{this.cleanupEventListeners(),this.scene.stop("BattleUI")}),this.events.on(Phaser.Scenes.Events.ADDED_TO_SCENE,b=>{this.assignDepth(b)});const c=Te().gameDevState?Tn((b,h)=>{h.missionMetadata.mission!==b.missionMetadata.mission&&b.missionMetadata.mission&&b.missionMetadata.mission.encounters&&b.missionMetadata.mission.encounters.forEach(w=>{(w.type===He.Enemy||w.type===He.CrossroadsFight)&&w.enemies.forEach(e=>{const i=yn[e.type].spineAssetKey;this.cache.json.has(i)||(this.load.spineBinary(`${i}${Vr}`,`${ks}${i}.skel`),this.load.spineAtlas(`${i}${Yr}`,`${ks}${i}.atlas`),this.load.start())})})}):void 0,v=Tn((b,h)=>{h.inventory.equippedItems!==b.inventory.equippedItems&&this.handleEquipmentChange(b.inventory.equippedItems)}),x=Tn((b,h)=>{h.animationSpeed!==b.animationSpeed&&(this.displayPlayer&&(this.displayPlayer.animationState.timeScale=b.animationSpeed||1),this.tweens.timeScale=b.animationSpeed||1,this.time.timeScale=b.animationSpeed||1)});this.unsubscribeFromStore=()=>{v(),c==null||c(),x()},this.gameManager=cr.getInstance()}preload(){}cleanupEventListeners(){Cn.off("playerStatsUpdated",this.handleStatsUpdate.bind(this)),Cn.off("playerHPUpdate",this.handleHPUpdate.bind(this)),this.volumeUnsubscribe&&this.volumeUnsubscribe()}handleEquipmentChange(t){this.displayPlayer&&this.displayPlayer.syncAllEquipment(t)}handleStatsUpdate(t){const c=t.stats;c.MaxHp.value,c.Attack.value,c.Defense.value,c.Speed.value,c.Crit.value,c.Dodge.value}handleHPUpdate(t){switch(console.log("Phaser Battle scene received HPupdate event:",t),t){case"1":this.combatPlayer.setCurrentHp(1);break;case"half":this.combatPlayer.setCurrentHp(this.combatPlayer.getModifiedStatValue("MaxHp")/2);break;case"full":this.combatPlayer.setCurrentHp(this.combatPlayer.getModifiedStatValue("MaxHp"));break}}delay(t){return new Promise(c=>setTimeout(c,t))}async create(){this.gameManager.loadInGame(this),this.setupSound(),Vw(this),Te().setShowNavTooltips(!1),Cn.on("playerStatsUpdated",this.handleStatsUpdate.bind(this)),Cn.on("playerHPUpdate",this.handleHPUpdate.bind(this)),this.createDefaultAnimations(),this.mission=this.gameManager.getMission(),this.postId=Te().postId;const t=Vh(),c=`${this.gameManager.getEnvironmentKey()}`,v=this.cache.json.get(c);if(this.tweens.timeScale=Te().animationSpeed||1,this.time.timeScale=Te().animationSpeed||1,!v){console.error(`Environment data for ${c} not found!`);return}this.environment=new Pg(this),this.environment.loadFromRegistry(v),this.enemyPositionX=this.scale.width-250,this.displayPlayer=new KS({scene:this,x:this.getPlayerPositionX(),y:this.groundY}),this.displayPlayer.walk(),this.setFollowCamera(),this.handleEquipmentChange(Te().inventory.equippedItems);const{stats:x,Level:b,Lives:h,LastLifeTimeStamp:w,LastClaimLoginBonusTimeStamp:e,LoginCombo:i}=await t.getPlayerStatsAsync(),u={MaxHp:x.MaxHp.value,Attack:x.Attack.value,Defense:x.Defense.value,Speed:x.Speed.value,Crit:x.Crit.value,Dodge:x.Dodge.value,Gold:Te().inventory.Gold,Gem:Te().inventory.Gem,Level:b,Lives:h,CurrentHp:x.MaxHp.value,GoldEarnRate:1,LastLifeTimeStamp:w,LastClaimLoginBonusTimeStamp:e,LoginCombo:i,FireResist:0,IceResist:0,LightningResist:0,ShadowResist:0,ShadowMultiplier:1,FireMultiplier:1,IceMultiplier:1,LightningMultiplier:1,KnifeMultiplier:1},n=Object.values(Te().inventory.equippedItems).filter(s=>!!s);this.combatPlayer=new Zu("player",qh.fromCharacterStats(u),this.displayPlayer,!0,n),Te().setPlayerCombatCharacter(this.combatPlayer),this.combatPlayer.enableRageMeter(),this.combatPlayer.addAbility(new zI),this.showUnderLevelWarning(u.Level,this.mission.minLevel);const r=Te().playerStats;((r==null?void 0:r.clearedMissionsCount)||0)===0&&Te().username!="TestUser"&&(Te().setShowQuestUI(!1),await this.battleUI.showGameIntro(this)),Te().setShowNavTooltips(!0),this.battleUI.showTitleSequence(this),Te().setShowQuestUI(!0),this.startMission(this.mission)}async startMission(t){var b;const c={onNewEncounter:()=>{this.encounterPositionX=this.getEncounterPositionX()},onCameraFollowToggle:h=>this.enableFollowCamera(h),onEnemyCreate:this.createEnemy.bind(this),onBossWarning:async()=>{await this.battleUI.BossEncounterWarning()},onOpenChest:async()=>{await this.playVictoryCutscene()},onLootReward:async(h,w)=>{await this.battleUI.animateLootReward(h,w,this)},onBuildingCreate:this.createBuilding.bind(this),onHitCountUpdate:h=>this.battleUI.updateHitCounter(h)};this.missionManager=new YI(this,this.combatPlayer,c.onNewEncounter,c.onCameraFollowToggle,c.onEnemyCreate,c.onBossWarning,c.onOpenChest,c.onLootReward,c.onBuildingCreate,c.onHitCountUpdate,((b=Te().playerStats)==null?void 0:b.battlePassExpiration)??0);const v=await this.missionManager.processMission(t,Te().missionMetadata.enemyTauntData),x={minLevel:Yh(this.combatPlayer.getModel().Level),count:3};console.log("MissionManager: requesting recent missions",x),ss({type:"requestRecentMissions",data:x}),v.completed?(console.log("Mission completed!"),Te().setGameStatus(Ci.Victory),await Vh().clearMissionAsync(this.postId,this.combatPlayer.getCurrentHp()),console.log("cleared mission",this.postId)):(console.log("Mission failed!"),jh({scene:this,fadeInMusicKey:"music_fail",targetVolume:.2,duration:1e3}),await Bt(this,2500),Te().setGameStatus(Ci.Defeat),await Vh().failMissionAsync(this.postId),console.log("failed mission",this.postId))}setupSound(){Mn.setSoundManager(this.sound),g1("music_battle",2.09),g1("music_boss_battle",1.42);const{volume:t,sfxVolume:c,musicVolume:v,muted:x}=Te(),b=x?0:t;this.sound.setVolume(b*c),Ku(b*v),this.volumeUnsubscribe=Tn((h,w)=>{const e=h.volume!==w.volume||h.muted!==w.muted,i=h.musicVolume!==w.musicVolume,u=h.sfxVolume!==w.sfxVolume;if(e||i||u){const n=h.muted?0:h.volume;this.sound.setVolume(n*h.sfxVolume),Ku(n*h.musicVolume)}})}showUnderLevelWarning(t,c){c-t<10||(Te().setRecentMissionMode("underlevel"),Te().setRecentMissionLinksShown(!0))}createEnemy(t,c,v,x){const b=this.enemySpaceWidth/(x-1),h=this.enemySpaceHeight/(x-1),w=x==1?0:v*b-this.enemySpaceWidth*.5,e=x==1?0:v*h-this.enemySpaceHeight*.5,i=1+v,u=this.encounterPositionX+this.scale.width*.25+w,n=this.groundY+e,r=YO[t.type];if(!r)throw new Error(`Unknown enemy type: ${t.type}`);const a=new r({scene:this,x:u,y:n,depth:i}),s=new Zu(t.id,c,a);return s.hasRageMeter()&&a.createHungerBar(this),s.setPromptOnDeath(t.promptForTaunt??!1),s}createBuilding(t){const c=t.type;if(c===He.Treasure)this.foodCart=new WI(this,this.encounterPositionX+100,this.groundY+10);else if(c===He.SkillChoice||c===He.StatsChoice)new XO(this,this.encounterPositionX,this.groundY-10);else if(c===He.AbilityChoice){const v=t;new zO(this,this.encounterPositionX,this.groundY-10,v.isEnchanted??!1)}else{let v;switch(c){case He.SkillBargain:v="BuildingSacrifice";break;case He.CreatorBonus:v="Statue";break;case He.Investigate:v="InvestigateBuilding";break;case He.CrossroadsFight:v="WarningSign";break;default:v="BuildingTemple";break}const x=this.add.sprite(this.encounterPositionX,this.groundY-10,v);x.setOrigin(.5,1),x.setScale(1),this.add.existing(x)}}async playVictoryCutscene(){await this.foodCart.reveal(),this.foodCart.sendToMouth(this.displayPlayer.x+20,this.displayPlayer.y-100,100,2100),await this.displayPlayer.playEatAnimation(),this.foodCart.moveAndShowStarburst(this.displayPlayer.x,this.displayPlayer.y-100),await Bt(this,1e3)}update(t,c){if(!this.environment)return;const v=c/1e3;this.displayPlayer.x+=this.displayPlayer.moveSpeed*v*Te().animationSpeed,this.environment.setBackgroundScroll(this.cameras.main.scrollX,v)}setFollowCamera(){this.cameras.main.startFollow(this.displayPlayer,!0,.5,.5,WO,jO)}enableFollowCamera(t){this.cameras.main,t?this.cameras.main.setLerp(.5,.5):this.cameras.main.setLerp(0,0)}getNextEncounterPositionX(){return console.log("getNextEncounterPositionX",this.cameras.main.scrollX+500),this.cameras.main.scrollX+500}async waitForPlayerToReachEncounter(){return new Promise(t=>{const c=()=>{this.cameras.main.scrollX>this.encounterPositionX-this.scale.width*.5&&(this.events.off("update",c),t())};this.events.on("update",c)})}getEncounterSpaceWidth(){return this.encounterSpaceWidth}getEncounterPositionX(){return this.displayPlayer.x+KO+this.scale.width}getEncounterWalkDuration(){return this.encounterWalkDuration}getPlayerPositionX(){return this.scale.width*.25}assignDepth(t){t instanceof Bg&&t.setDepth($O),t instanceof Ww&&t.setDepth(QO)}createDefaultAnimations(){[{key:"default_slash_anim",spriteKey:"default_slash",endFrame:3,fps:12,repeat:0,yoyo:!1},{key:"frontal_attack_anim",spriteKey:"frontal_attack",endFrame:3,fps:12,repeat:0,yoyo:!1},{key:"default_rage_anim",spriteKey:"default_rage",endFrame:3,fps:12,repeat:0,yoyo:!1},{key:"default_impact_anim",spriteKey:"default_impact",endFrame:3,fps:12,repeat:0,yoyo:!1},{key:"downward_slash_anim",spriteKey:"downward_slash",endFrame:3,fps:12,repeat:0,yoyo:!1},{key:"chomp_anim",spriteKey:"chomp",endFrame:3,fps:12,repeat:0,yoyo:!1},{key:"lightning_anim",spriteKey:"lightning",endFrame:3,fps:12,repeat:0,yoyo:!1},{key:"dashSmoke_anim",spriteKey:"dashSmoke",endFrame:7,fps:12,repeat:0,yoyo:!1},{key:"magicShield_anim",spriteKey:"magicShield",endFrame:5,fps:12,repeat:0,yoyo:!1},{key:"sayNothing_anim",spriteKey:"sayNothing",endFrame:4,fps:3,repeat:0,yoyo:!1},{key:"fireSmall_anim",spriteKey:"fireSmall",endFrame:8,fps:12,repeat:-1,yoyo:!1},{key:"explosion_anim",spriteKey:"explosion",endFrame:7,fps:12,repeat:0,yoyo:!1}].forEach(c=>{this.anims.create({key:c.key,frames:this.anims.generateFrameNumbers(c.spriteKey,{start:0,end:c.endFrame}),frameRate:c.fps,repeat:c.repeat,yoyo:c.yoyo})})}shakeCamera(t=.02,c=500){this.cameras.main.shake(c,t)}shutdown(){this.unsubscribeFromStore&&this.unsubscribeFromStore(),this.volumeUnsubscribe&&this.volumeUnsubscribe()}}class ZO extends Phaser.GameObjects.Container{constructor(t,c,v){super(t);const x=t.add.image(c,v,"BossSkull").setAlpha(0).setScale(.5),b=t.add.image(c,v+165,"BossWarningText").setAlpha(0);this.scene.tweens.add({targets:x,alpha:1,duration:500,ease:Phaser.Math.Easing.Sine.In}),this.scene.tweens.add({targets:x,scaleX:1,scaleY:1,duration:1200,ease:Phaser.Math.Easing.Elastic.Out}),this.scene.tweens.add({targets:b,alpha:1,duration:500,delay:300,ease:Phaser.Math.Easing.Sine.In}),this.scene.tweens.add({targets:b,alpha:.5,duration:500,delay:800,ease:Phaser.Math.Easing.Sine.InOut,yoyo:!0,repeat:1,onComplete:()=>{this.scene.tweens.add({targets:[x,b],alpha:0,duration:500,ease:Phaser.Math.Easing.Sine.InOut,onComplete:()=>{this.remove(this)}})}})}}class qO extends _i.Scene{constructor(){super({key:"BattleUI"})}create(){this.input.keyboard&&this.input.keyboard.on("keydown-P",()=>{if(!Te().gameDevState)return;const t=this.scene.get("Battle");this.scene.isPaused("Battle")?(t.scene.resume(),Uw(this),console.log("Game Resumed")):(t.scene.pause(),kw(),console.log("Game Paused"))})}init(){this.hitCounterText=this.createHitCounter()}async showTextLineByLine(t,c,v){const x={fontFamily:"Poppins-ExtraBold",fontSize:36,color:"#ffffff",stroke:"#000000",strokeThickness:6,align:"center",wordWrap:{width:this.scale.width*.8,useAdvancedWrap:!0}};for(let b=0;b<t.length;b++){if(v!=null&&v.cancelled)return;const h=t[b],w=this.add.text(this.scale.width/2,Te().cropTopPixels+325,h,x);if(w.setOrigin(.5,.5),w.setAlpha(0),w.setDepth(100),w.setShadow(0,3,"#000000",0,!0,!0),await Li(this.tweens,{targets:w,alpha:1,duration:1e3,ease:"Power2",onComplete:()=>{w.setAlpha(1)}}),v!=null&&v.cancelled){w.destroy();return}if(await Bt(this,2e3),v!=null&&v.cancelled){w.destroy();return}await Li(this.tweens,{targets:w,alpha:0,duration:1e3,ease:"Power2",onComplete:()=>{w.destroy()}})}}async showGameIntro(t){const c=["You were born into a world gone mad.","Raised from a young age to fight, to survive.","After years of struggle and epic journeys...","You long for some sense of meaning, some sense of hope.","You long for just a taste...","A taste of something... delicious."];Uu({skipButtonShown:!0});const v={cancelled:!1},x=Te().waitForSkipButtonClick().then(()=>{v.cancelled=!0});try{if(await this.showTextLineByLine(c,t,v),v.cancelled)return;const b=this.add.sprite(this.scale.width/2,Te().cropTopPixels+325,"Logo").setAlpha(0);if(await Promise.race([Li(this.tweens,{targets:b,alpha:1,duration:1e3,ease:"Power2",onComplete:()=>{b.setAlpha(1)}}),x]),v.cancelled){b.destroy();return}if(await Promise.race([Bt(this,2e3),x]),v.cancelled){b.destroy();return}await Promise.race([Li(this.tweens,{targets:b,alpha:0,duration:1e3,ease:"Power2",onComplete:()=>{b.destroy()}}),x])}finally{Uu({skipButtonShown:!1})}}async showTitleSequence(t){var a;const c={fontFamily:"Poppins-ExtraBold",fontSize:36,color:"#ffffff",stroke:"#000000",strokeThickness:6,align:"center",wordWrap:{width:this.scale.width*.8,useAdvancedWrap:!0}},v=Te().cropTopPixels+325,x=this.add.container(this.scale.width/2,v);x.setAlpha(0),x.setDepth(100);const b=this.add.graphics();b.lineStyle(8,16777215),b.fillStyle(81828),b.beginPath(),b.arc(0,0,50,0,Math.PI*2),b.closePath(),b.strokePath(),b.fill();const h=this.add.graphics();h.fillStyle(16777215),h.beginPath(),h.arc(0,0,50,0,Math.PI,!1),h.lineTo(-200,30),h.lineTo(-200,200),h.lineTo(200,200),h.lineTo(200,100),h.closePath(),h.fillPath(),h.setPosition(this.scale.width/2,v),h.alpha=0;const w=h.createGeometryMask();w.invertAlpha=!0;const e=this.add.text(0,-75,"Presented by",c);e.setAlign("center"),e.setOrigin(.5,.5),e.setShadow(0,2,"#000000",0,!0,!0),e.setFontSize(24);const i=this.add.text(0,75,`u/${Te().missionMetadata.missionAuthorName}`,c);i.setAlign("center"),i.setOrigin(.5,.5),i.setShadow(0,3,"#000000",0,!0,!0);const u=this.add.container(0,0);u.setMask(w);const n=this.add.spine(0,70,"frogPlayer-data","frogPlayer-atlas");n.setScale(.15,.15),n.skeleton.color.a=0;const r=(a=Te().missionMetadata.mission)==null?void 0:a.authorWeaponId;r&&await jS(t,n,Lt.ItemDefinitions[r],"Weapon",!1),u.add(n),x.add([b,e,i,u]),this.tweens.add({targets:n.skeleton.color,a:1,duration:1e3,ease:"Power2"}),await Li(this.tweens,{targets:x,alpha:1,duration:1e3,ease:"Power2"}),await Bt(this,2e3),this.tweens.add({targets:n.skeleton.color,a:0,duration:1e3,ease:"Power2"}),await Li(this.tweens,{targets:x,alpha:0,duration:1e3,ease:"Power2",onComplete:()=>{x.destroy()}}),Te().scenarioText.trim()===""?this.showTitle():this.showScenarioText(Te().scenarioText)}async showTitle(){const t={fontFamily:"Poppins-ExtraBold",fontSize:36,color:"#ffffff",stroke:"#000000",strokeThickness:6,align:"center",wordWrap:{width:this.scale.width*.8,useAdvancedWrap:!0}},c=Te().cropTopPixels+325,v=this.add.text(this.scale.width/2,c,`"${Te().missionMetadata.missionTitle}"`,t);v.setOrigin(.5,.5),v.setAlpha(0),v.setDepth(100),v.setShadow(0,3,"#000000",0,!0,!0),await Li(this.tweens,{targets:v,alpha:1,duration:1e3,ease:"Power2",onComplete:()=>{v.setAlpha(1)}}),await Bt(this,2e3),await Li(this.tweens,{targets:v,alpha:0,duration:1e3,ease:"Power2",onComplete:()=>{v.destroy()}})}async animateLootReward(t,c,v){return ba[t].isStackable?this.animateLootRewardStackable(t,c):this.animateGearDrop(v)}async animateGearDrop(t){await Bt(this,100);const c=this.add.sprite(this.scale.width/2,(this.scale.height+Te().cropTopPixels)/2,"GearDropIcon");c.setDepth(100),c.setScale(2,2),await Li(this.tweens,{targets:c,scaleX:1,scaleY:1,duration:150,ease:"Power2"}),ul(Xe.GEAR_DROP,.5),t.shakeCamera(.03,100),await Bt(this,700);const v=this.scale.width-100;await Li(this.tweens,{targets:c,x:v,y:1e3,scaleX:.25,scaleY:.25,duration:300,ease:"Cubic.easeIn",onComplete:()=>{c.destroy(),Ua({soundType:Xe.SPAWNRESOURCE})}})}async animateLootRewardStackable(t,c){const v=t==="Gold",x=t==="Gem",h=Math.min(Math.ceil(c/(x?1:4)),30),w=[],e=this.scale.width-100,i=v||x?Te().cropTopPixels+50:1e3,u=Te().playerStats,n=(u==null?void 0:u.battlePassExpiration)&&u.battlePassExpiration>Date.now();for(let o=0;o<h;o++){const d=this.add.sprite(this.scale.width/2+Phaser.Math.Between(-200,200),this.scale.height/2+Phaser.Math.Between(-200,200),t);if(d.displayWidth=64,d.scaleY=d.scaleX,d.alpha=0,w.push(d),n&&!(v||x)){const l=this.add.sprite(d.x,d.y,"ResourceBonusLabel");l.displayWidth=64,l.scaleY=l.scaleX,l.alpha=0,w.push(l)}}await Promise.all(w.map((o,d)=>Li(this.tweens,{targets:o,alpha:1,duration:150,delay:(h-d)*50,ease:"Back.easeOut",onStart:()=>{Ua(v?{soundType:Xe.SPAWNGOLD}:t==="Gem"?{soundType:Xe.SPAWNGEM}:{soundType:Xe.SPAWNRESOURCE})}}))),await Bt(this,200);const r=Math.floor(c/h),a=c%h,s=o=>{const d=Te().inventory;Uu({inventory:{...d,Gold:Te().inventory.Gold+o}})};await Promise.all(w.map((o,d)=>Li(this.tweens,{targets:o,x:e,y:i,alpha:0,duration:300,delay:d*30,ease:"Cubic.easeIn",onComplete:()=>{o.destroy(),this.playDropSfx(t),v&&s(r)}}))),s(a)}playDropSfx(t){if(["Gold","Wood","Stone","Iron","Ore","Gem","Candy","Pumpkin"].includes(t)){if(t==="Gold"){Ua({soundType:Xe.DROPGOLD});return}else if(t==="Gem"){console.log("Playing gem drop sound"),Ua({soundType:Xe.DROPGEM});return}Ua({soundType:Xe.CUSTOM,customKey:`drop${t}`})}}createHitCounter(){const t={fontFamily:"Poppins-ExtraBold",fontSize:36,color:"#ffffff",stroke:"#000000",strokeThickness:6,align:"center"},c=this.add.text(this.scale.width-100,this.scale.height/2,`HIT
0`,t);return c.setOrigin(.5,.5),c.setAlpha(0),c.setDepth(100),c.setShadow(0,3,"#000000",0,!0,!0),c}updateHitCounter(t){t<1?this.hitCounterText.setAlpha(0):(this.hitCounterText.setAlpha(1),this.hitCounterText.setText(`HIT
${t}`),this.hitCounterText.setScale(1.5),Li(this.tweens,{targets:this.hitCounterText,scaleX:1,scaleY:1,duration:150,ease:"Back.easeOut",onComplete:()=>{this.hitCounterText.setScale(1)}}))}BossEncounterWarning(){this.add.existing(new ZO(this,this.scale.width/2,Te().cropTopPixels+250))}async showScenarioText(t,c,v){const x=this.splitTextIntoLines(t);await this.showTextLineByLine(x,c,v)}splitTextIntoLines(t){const v=[],x=t.split(new RegExp("(?<=[.!?])\\s+")).filter(b=>b.trim().length>0);for(const b of x)if(b.length<=80)v.push(b.trim());else{let h=b.trim();for(;h.length>80;){let w=80;for(;w>0&&h[w]!==" ";)w--;w===0&&(w=80),v.push(h.substring(0,w).trim()),h=h.substring(w).trim()}h.length>0&&v.push(h)}return v}}class _O extends _i.Scene{constructor(){super("Inn"),this.unsubscribeFromStore=()=>{}}init(){const t=Tn((c,v)=>{v.inventory.equippedItems!==c.inventory.equippedItems&&this.handleEquipmentChange(c.inventory.equippedItems)});this.unsubscribeFromStore=()=>{t()},this.setupSound(),this.loadInnMusicAsync(),Te().setRecentMissionMode("playNext")}async loadInnMusicAsync(){return new Promise((t,c)=>{this.load.reset();const v=x=>{x.key==="inn_music"&&(this.load.off("loaderror",v),console.error("Failed to load inn music:",x),c(new Error("Failed to load inn music")))};this.load.once("filecomplete-audio-inn_music",()=>{this.load.off("loaderror",v),console.log("Inn music loaded successfully"),jh({scene:this,fadeInMusicKey:"inn_music",targetVolume:.3,duration:1e3}),t()}),this.load.on("loaderror",v),this.load.audio("inn_music","assets/audio/bgm/inn_music.mp3"),this.load.start()})}setupSound(){Mn.setSoundManager(this.sound);const{volume:t,sfxVolume:c,musicVolume:v,muted:x}=Te(),b=x?0:t;this.sound.setVolume(b*c),Ku(b*v),this.volumeUnsubscribe=Tn((h,w)=>{const e=h.volume!==w.volume||h.muted!==w.muted,i=h.musicVolume!==w.musicVolume,u=h.sfxVolume!==w.sfxVolume;if(e||i||u){const n=h.muted?0:h.volume;this.sound.setVolume(n*h.sfxVolume),Ku(n*h.musicVolume)}})}handleEquipmentChange(t){this.displayPlayer&&this.displayPlayer.syncAllEquipment(t)}handleStatsUpdate(t){const c=t.stats;c.MaxHp.value,c.Attack.value,c.Defense.value,c.Speed.value,c.Crit.value,c.Dodge.value}async create(){Vw(this),console.log("Inn scene created"),Cn.on("playerStatsUpdated",this.handleStatsUpdate.bind(this)),this.displayPlayer=new KS({scene:this,x:512,y:845}),this.displayPlayer.setScale(-.25,.25),this.displayPlayer.idle(),await Bt(this,1),this.displayPlayer.hideBars(),Te().addBattleLogMessage([{message:"Welcome to the Inn!",type:Xi.SystemMessage}],!0),Te().addBattleLogMessage([{message:"A place to rest, recover, manage your inventory, and level up.",type:Xi.SystemMessage}],!0),this.handleEquipmentChange(Te().inventory.equippedItems),this.add.image(0,-48,"InnBG").setOrigin(0,0),this.anims.create({key:"fire_anim",frames:this.anims.generateFrameNumbers("fire",{start:0,end:8}),frameRate:10,repeat:-1});const t=[];t.push(this.add.sprite(185,362,"fire").setBlendMode(Phaser.BlendModes.SCREEN).setOrigin(.5,1).setScale(.6,.6)),t.push(this.add.sprite(319,346,"fire").setBlendMode(Phaser.BlendModes.SCREEN).setOrigin(.5,1).setScale(-.7,.7)),t.push(this.add.sprite(401,366,"fire").setBlendMode(Phaser.BlendModes.SCREEN).setOrigin(.5,1).setScale(-.45,.5)),t.push(this.add.sprite(830,418,"fire").setBlendMode(Phaser.BlendModes.SCREEN).setOrigin(.5,1).setScale(-.4,.4)),t.push(this.add.sprite(904,392,"fire").setBlendMode(Phaser.BlendModes.SCREEN).setOrigin(.5,1).setScale(-.5,.5)),t.push(this.add.sprite(1022,410,"fire").setBlendMode(Phaser.BlendModes.SCREEN).setOrigin(.5,1).setScale(.34,.34));for(let r=0;r<t.length;r++){const a=t[r];this.time.delayedCall(r*400,()=>{a.play("fire_anim")})}const c=this.add.sprite(512,200,"InnGlow").setOrigin(.5,.5).setScale(1).setBlendMode(Phaser.BlendModes.SCREEN);this.tweens.add({targets:c,duration:Phaser.Math.Between(800,2e3),alpha:{from:.7,to:1},scale:{from:1,to:1.2},yoyo:!0,repeat:-1,ease:"Sine.easeInOut"});const v=Vh(),{stats:x,Level:b,Lives:h,LastLifeTimeStamp:w,LastClaimLoginBonusTimeStamp:e,LoginCombo:i}=await v.getPlayerStatsAsync(),u={MaxHp:x.MaxHp.value,Attack:x.Attack.value,Defense:x.Defense.value,Speed:x.Speed.value,Crit:x.Crit.value,Dodge:x.Dodge.value,Gold:Te().inventory.Gold,Gem:Te().inventory.Gem,Level:b,Lives:h,CurrentHp:x.MaxHp.value,GoldEarnRate:1,LastLifeTimeStamp:w,LastClaimLoginBonusTimeStamp:e,LoginCombo:i,FireResist:0,IceResist:0,LightningResist:0,ShadowResist:0,ShadowMultiplier:1,FireMultiplier:1,IceMultiplier:1,LightningMultiplier:1,KnifeMultiplier:1},n=Object.values(Te().inventory.equippedItems).filter(r=>!!r);this.combatPlayer=new Zu("player",qh.fromCharacterStats(u),this.displayPlayer,!0,n),Te().setPlayerCombatCharacter(this.combatPlayer)}}class e6 extends _i.Scene{constructor(){super("PreloaderInn"),this.state=mn.INIT}init(){this.state=mn.INIT,this.initLoadingBar(),this.load.on("progress",t=>{this.loadingBar.width=4+460*t,this.loadingText.setText(`Loading ${mn[this.state]}: ${Math.floor(t*100)}%`)})}preload(){this.state=mn.ASSETS;const t="frogPlayer";this.load.spineBinary(`${t}${Vr}`,`${ks}${t}.skel`),this.load.spineAtlas(`${t}${Yr}`,`${ks}${t}.atlas`),this.load.image("InnBG","assets/inn/sword_supper_inn_bg.png"),this.load.image("weapon-default","assets/gear/weapon.png"),this.load.image("InnGlow","assets/inn/orange_hue.png"),this.load.spritesheet("fire","assets/battle/fx/fire_small_loop.png",{frameWidth:128,frameHeight:128}),this.load.image("sliderBasic03Fill","assets/stats/Slider_Basic03_Fill_White.png"),this.load.image("sliderBasic03BgSingle","assets/stats/Slider_Basic03_Bg_Single.png"),this.load.image("sliderBasic03FillMask","assets/stats/Slider_Basic03_FillMask.png"),this.load.image("sliderBasic03Border","assets/stats/Slider_Basic03_Border.png"),this.load.image("sliderBgLight","assets/stats/Slider_Level_Slider_BgLight.png"),this.load.image("sliderFillBg","assets/stats/Slider_Level_Slider_Fill_Bg.png"),this.load.image("sliderFillLight","assets/stats/Slider_Level_Slider_Fill_Light.png")}create(){this.state=mn.ASSETS,this.load.once("complete",()=>{this.state=mn.DONE}),this.load.start()}update(){this.state===mn.DONE&&this.time.delayedCall(100,()=>{this.transitionToInn()})}initLoadingBar(){this.loadingBarOutline=this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215),this.loadingBar=this.add.rectangle(282,384,4,28,16777215),this.loadingText=this.add.text(512,350,"Loading: 0%",{font:"20px Poppins-ExtraBold"}).setOrigin(.5,.5)}transitionToInn(){this.loadingBar.destroy(),this.loadingBarOutline.destroy(),this.loadingText.destroy(),this.scene.transition({target:"Inn",duration:1e3,moveBelow:!0,onUpdate:t=>{this.cameras.main.setAlpha(1-t)}})}}const t6={type:Phaser.AUTO,width:1024,height:1024,parent:"game-container",transparent:!0,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,parent:"game-container"},physics:{default:"arcade",arcade:{gravity:{y:400,x:0}}},scene:[Ow,NB,JO,qO,e6,_O],plugins:{scene:[{key:"spine.SpinePlugin",plugin:Qh,mapping:"spine"}]}},i6=R=>new _i.Game({...t6,parent:R}),s6=ve.forwardRef(function({currentActiveScene:t},c){const v=ve.useRef(null);return ve.useLayoutEffect(()=>(v.current===null&&(v.current=i6("game-container"),typeof c=="function"?c({game:v.current,scene:new Ow}):c&&(c.current={game:v.current,scene:null})),()=>{v.current&&(v.current.destroy(!0),v.current!==null&&(v.current=null))}),[c]),ve.useEffect(()=>(Cn.on("current-scene-ready",x=>{t&&typeof t=="function"&&t(x),typeof c=="function"?c({game:v.current,scene:x}):c&&(c.current={game:v.current,scene:x})}),()=>{Cn.removeListener("current-scene-ready")}),[t,c]),V.jsx("div",{id:"game-container"})}),e2="volumeControl_volume",t2="volumeControl_muted",a6=(R,t)=>{try{localStorage.setItem(e2,R.toString()),localStorage.setItem(t2,t.toString())}catch(c){console.warn("Failed to save volume settings to localStorage:",c)}},n6=()=>{try{const R=localStorage.getItem(e2),t=localStorage.getItem(t2);return{volume:R?parseFloat(R):1,muted:t?t==="true":!1}}catch(R){return console.warn("Failed to load volume settings from localStorage:",R),{volume:1,muted:!1}}},r6=({className:R=""})=>{const{volume:t,muted:c,setVolume:v,toggleMute:x}=Me(),[b,h]=ve.useState(!1),w=ve.useRef(null),e=ve.useRef(null),i=ve.useRef(!1);ve.useEffect(()=>{const a=n6();t!==a.volume&&v(a.volume),c!==a.muted&&x()},[]),ve.useEffect(()=>{a6(t,c)},[t,c]),ve.useEffect(()=>{const a=s=>{e.current&&!e.current.contains(s.target)&&h(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]);const u=a=>{if(!w.current)return;const s=w.current.getBoundingClientRect(),o=s.height,d=s.bottom-a.clientY;let l=Math.max(0,Math.min(1,d/o));l=Math.round(l*100)/100,v(l),c&&l>0&&x()},n=()=>{i.current=!0};ve.useEffect(()=>{const a=o=>{if(i.current&&w.current){const d=w.current.getBoundingClientRect(),l=d.height,f=d.bottom-o.clientY;let m=Math.max(0,Math.min(1,f/l));m=Math.round(m*100)/100,v(m),c&&m>0&&x()}},s=()=>{i.current=!1};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",s)}},[c,v,x]);const r=()=>c||t===0?V.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 27 27",width:"32",height:"32",children:[V.jsx("path",{fill:"currentColor",d:"M7 9v6h4l5 5V4l-5 5H7z"}),V.jsx("line",{x1:"19",y1:"9",x2:"25",y2:"15",stroke:"currentColor",strokeWidth:"2"}),V.jsx("line",{x1:"25",y1:"9",x2:"19",y2:"15",stroke:"currentColor",strokeWidth:"2"})]}):t<.5?V.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"32",height:"32",children:[V.jsx("path",{fill:"currentColor",d:"M7 9v6h4l5 5V4l-5 5H7z"}),V.jsx("path",{fill:"currentColor",d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"})]}):V.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"32",height:"32",children:[V.jsx("path",{fill:"currentColor",d:"M3 9v6h4l5 5V4L7 9H3z"}),V.jsx("path",{fill:"currentColor",d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"})]});return V.jsxs("div",{className:`volume-control ${R}`,ref:e,onMouseEnter:()=>h(!0),onMouseLeave:()=>!i.current&&h(!1),children:[V.jsx("button",{className:"volume-icon-button",onClick:()=>x(),"aria-label":c?"Unmute":"Mute",children:r()}),b&&V.jsx("div",{className:"volume-slider-container",children:V.jsxs("div",{className:"volume-slider-track",ref:w,onClick:u,onMouseDown:n,children:[V.jsx("div",{className:"volume-slider-fill",style:{height:`${c?0:t*100}%`}}),V.jsx("div",{className:"volume-slider-thumb",style:{bottom:`${c?0:t*100}%`}})]})})]})};function wp({children:R,shown:t,dismiss:c,style:v={},maxHeight:x}){const b=ve.useRef(null);ve.useEffect(()=>{const w=()=>{if(!b.current)return;const e=b.current,i=e.clientWidth/e.clientHeight,u=window.innerWidth/window.innerHeight;let n;const r=window.innerHeight>window.innerWidth,a=.95;i>u?n=window.innerWidth/e.clientWidth:n=window.innerHeight/e.clientHeight,n*=a,e.style.setProperty("--scale-factor",n.toString())};return w(),window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w)}});const h=w=>{w.stopPropagation()};return V.jsx("div",{className:"ui-overlay",style:{display:t?"flex":"none",...v},onClick:c,children:V.jsx("div",{ref:b,className:"ui-overlay-content",style:x?{"--max-height":`${x}px`}:{},onClick:h,children:R})})}function Pn({children:R,shown:t,dismiss:c,headerContent:v=null,renderBackButton:x=!0,footerContent:b=V.jsx(V.Fragment,{}),contentStyle:h={},footerContentStyle:w={},renderHeader:e=!0,modalStyle:i={},overlayStyle:u={},maxHeight:n}){const[r,a]=ve.useState(!1);return ve.useEffect(()=>{t?requestAnimationFrame(()=>a(!0)):a(!1)},[t]),V.jsx(wp,{shown:t,dismiss:c,style:u,maxHeight:n,children:V.jsxs("div",{className:`modal ${r?"shown":""}`,style:i,children:[e&&V.jsx("div",{className:"modal-header",children:v}),V.jsx("div",{className:"modal-content",style:h,children:R}),b&&V.jsxs("div",{className:"modal-footer",style:w,children:[x&&V.jsx("div",{onClick:c,className:"back-button",children:V.jsx("img",{src:"assets/ui/Back.png"})}),b]})]})})}const Et={loginrewards:{day1:"assets/ui/login_rewards/ItemIcon_Money_Coin1.png",day2:"assets/ui/login_rewards/ItemIcon_Money_Coin2.png",day3:"assets/ui/login_rewards/ItemIcon_Money_Coin3.png",day4:"assets/ui/login_rewards/ItemIcon_Money_Coin4.png",day5:"assets/ui/login_rewards/ItemIcon_Money_Coin5.png",day6:"assets/ui/login_rewards/ItemIcon_Money_Coin6.png",day7:"assets/ui/login_rewards/ItemIcon_Money_Coin7.png",leafLeft:"assets/ui/login_rewards/Leaf_Left.png",leafRight:"assets/ui/login_rewards/Leaf_Right.png",claimEffect:"assets/ui/login_rewards/Claim_Effects.png",tickMark:"assets/ui/login_rewards/Icon_Check03_l.png"},navibar:{battle:"assets/ui/navibar_icons/ItemIcon_Sword.png",bag:"assets/ui/navibar_icons/ItemIcon_Bag.png",map:"assets/ui/navibar_icons/ItemIcon_Map.png",shop:"assets/ui/navibar_icons/ItemIcon_Store.png",stats:"assets/ui/navibar_icons/ItemIcon_Book.png"},inventory:{tabs:{sword:"assets/ui/inventory/PictoIcon_Sword_2.png",blueprint:"assets/ui/inventory/PictoIcon_Blueprint.png",map:"assets/ui/inventory/PictoIcon_Map_2.png",wood:"assets/ui/inventory/PictoIcon_Wood.png",hanger:"assets/ui/inventory/PictoIcon_Hanger.png"},filter:{head:"assets/ui/slot_badge_head.png",chest:"assets/ui/slot_badge_chest.png",amulet:"assets/ui/slot_badge_amulet.png",weapon:"assets/ui/slot_badge_weapon.png",ring:"assets/ui/slot_badge_ring.png",belt:"assets/ui/slot_badge_belt.png"}},abilities:{iconMission:"assets/ui/stats/ItemIcon_Map.png",iconEquipment:"assets/ui/stats/ItemIcon_Gear_Armor_Top.png"},stats:{health:"assets/ui/stats/Icon_Heart.png",attack:"assets/ui/stats/ItemIcon_Gear_Sword.png",defense:"assets/ui/stats/Icon_Shield.png"},shop:{lock:"assets/ui/shop/shop_locked.png",awning:"assets/ui/shop/Awning.png",purchaseBackground:"assets/ui/shop/Shop_Wallpaper.png",buttonBackGround:"assets/ui/shop/Buttons.png",gemIcon:"assets/ui/shop/ItemIcon_Gem_Diamond_Purple.png",itemSectionIcon:"assets/ui/shop/shop_section_items.png",gemSectionIcon:"assets/ui/shop/shop_section_gems.png",cosmeticsSectionIcon:"assets/ui/shop/shop_section_cosmetics.png",banner:"assets/ui/shop/shop_banner.png",bannerFrogpass:"assets/ui/shop/banner_frogpass.png",badges:{new:"assets/ui/shop/badge_new.png",greatDeal:"assets/ui/shop/badge_great_deal.png"}},ui:{goldIcon:"assets/ui/ItemIcon_Money_Coin.png",gemIcon:"assets/ui/shop/ItemIcon_Gem_Diamond_Purple.png",levelBadge:"assets/ui/level_badge.png",settingsIcon:"assets/ui/ItemIcon_Gear.png",gemButton:"assets/ui/shop/button_gem_plus_tiny.png",battlepassActive:"assets/ui/battlepass_gold_active.png",battlepassInactive:"assets/ui/battlepass_gold_inactive.png"}};function o6({cost:R,onClick:t,isDisabled:c}){return V.jsxs("div",{className:`price-button ${c?"disabled":""}`,onClick:t,children:[V.jsx("img",{src:"assets/ui/Button.svg"}),V.jsxs("div",{className:"price-button-info",style:{position:"absolute"},children:[V.jsx("img",{src:"assets/ui/ItemIcon_Money_Coin.png"}),V.jsx("div",{children:R})]})]})}var i2=sw();function ds({content:R,title:t,className:c,inline:v=!0}){const[x,b]=ve.useState(!1),[h,w]=ve.useState({top:0,left:0,placement:"above"}),e=ve.useRef(null),i=()=>{if(!e.current)return;const a=e.current.getBoundingClientRect(),s=300,o=200,d=a.top;window.innerHeight-a.bottom;const l=d>=o?"above":"below";let f;l==="above"?f=a.top-8:f=a.bottom+8;let m=a.left;m+s>window.innerWidth-20&&(m=window.innerWidth-s-20),m<20&&(m=20),w({top:f,left:m,placement:l})},u=()=>{x||i(),b(!x)};ve.useEffect(()=>{if(x){const a=()=>i();return window.addEventListener("scroll",a,{passive:!0}),window.addEventListener("resize",a,{passive:!0}),()=>{window.removeEventListener("scroll",a),window.removeEventListener("resize",a)}}},[x]);const n=`info-popup-container ${v?"info-trigger-inline":"info-trigger-block"} ${c||""}`,r=x?V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"info-popup-positioned","data-position":h.placement,style:{top:h.top,left:h.left},onClick:()=>b(!1),children:[V.jsx("button",{className:"info-popup-close",onClick:()=>b(!1),children:"×"}),t&&V.jsx("div",{className:"info-popup-header",children:V.jsx("h3",{className:"info-popup-title",children:t})}),V.jsx("div",{className:"info-popup-content",children:R})]}),V.jsx("div",{className:"info-popup-backdrop",onClick:()=>b(!1)})]}):null;return V.jsxs(V.Fragment,{children:[V.jsx("span",{ref:e,className:n,children:V.jsx("span",{className:"info-trigger-button",onClick:u,role:"button",tabIndex:0,children:"i"})}),x&&i2.createPortal(r,document.body)]})}let D1=!1;const Jh={MaxHp:{displayName:"HP",image:Et.stats.health},Attack:{displayName:"ATK",image:Et.stats.attack},Defense:{displayName:"DEF",image:Et.stats.defense},Crit:{displayName:"CRIT"},Speed:{displayName:"SPEED"},Dodge:{displayName:"DODGE"}},s2=({statKey:R,value:t,equipmentBuffValue:c,missionBuffValue:v})=>{const x=b=>b>0?"positive-text":b<0?"negative-text":"";return V.jsxs("div",{className:"stat-buffs",children:[V.jsxs("div",{className:"stat-buffs buff",children:[V.jsx("img",{src:Et.abilities.iconEquipment,className:"buff-icon",alt:"Equipment Buff Icon"}),V.jsx("div",{className:`buff-text ${x(c)}`,children:jC(R,t,c)})]}),V.jsxs("div",{className:"stat-buffs buff",children:[V.jsx("img",{src:Et.abilities.iconMission,className:"buff-icon",alt:"Mission Buff Icon"}),V.jsx("div",{className:`buff-text ${x(v)}`,children:KC(R,t,v)})]})]})},l6={MaxHp:"Your maximum health points. When your HP reaches zero, you are defeated.",Attack:"Determines the base damage you deal with your attacks and abilities.",Defense:"Reduces the damage you take from enemy attacks.",Crit:"Your chance to land a critical hit, dealing increased damage.",Speed:"Determines your turn order in combat. Higher speed means you act sooner, and may act more often than slow enemies.",Dodge:"Chance to avoid incoming attacks completely."};function h6(R){return l6[R]||"No description available."}const d6=({statKey:R,label:t,value:c,cost:v,playerGold:x,statsProvider:b,itemStats:h})=>{var a;const w=Me(s=>s.playerMissionBuffs),e=Me(s=>s.playerCombatCharacter),u=w.filter(s=>s.type==="multiplier"&&s.stat===R).reduce((s,o)=>s+o.amount,0),n=h[R]??0,r=(e==null?void 0:e.getModifiedStatValue(R))??c;return V.jsxs("div",{className:"stat-item",children:[V.jsxs("div",{className:"stat-label",children:[(a=Jh[R])==null?void 0:a.displayName,V.jsx(ds,{content:h6(R)})]}),V.jsx("div",{className:"stat-value",children:np(R,r)}),V.jsx(s2,{statKey:R,value:c,equipmentBuffValue:n,missionBuffValue:u})]})},u6=({statKey:R,label:t,value:c,cost:v,playerGold:x,statsProvider:b,itemStats:h})=>{var l,f;const i=Me(m=>m.playerMissionBuffs).filter(m=>m.type==="multiplier"&&m.stat===R).reduce((m,g)=>m+g.amount,0),u=h[R]??0,n=Math.round(c+u+i*c),r=Me(m=>m.setPlayerStats),a=Me(m=>m.inventory),s=Me(m=>m.setInventory),o=v>x,d=async()=>{if(x<v){console.log(`Not enough gold to upgrade ${t}`);return}s({...a,Gold:x-v}),b.increaseStatAsync(R).then(m=>{r(m),XI(m)})};return V.jsxs("div",{className:"upgradable-stat-item",children:[V.jsxs("div",{className:"stat-info",children:[V.jsx("img",{src:((l=Jh[R])==null?void 0:l.image)??"",alt:R,className:"stat-icon"}),V.jsx("div",{className:"stat-name",children:(f=Jh[R])==null?void 0:f.displayName})]}),V.jsx("div",{className:"stat-value",children:n}),V.jsx(s2,{statKey:R,value:c,equipmentBuffValue:u,missionBuffValue:i}),V.jsx(o6,{isDisabled:o,cost:v,onClick:d})]})},c6=({playerLevel:R,playerGold:t})=>V.jsxs("div",{className:"player-stats-wrapper",children:[V.jsxs("div",{className:"player-stats",children:[V.jsx("img",{className:"badge",src:Et.ui.levelBadge}),R]}),V.jsxs("div",{className:"player-stats",children:[V.jsx("img",{src:Et.ui.goldIcon,alt:"Gold Coin"}),t]})]}),f6=({stats:R,statsProvider:t,playerLevel:c,playerGold:v,inventory:x,itemStats:b})=>{const[h,w]=ve.useState(!1),e=c===1&&v>=rp(c);return c===2&&!D1&&!h&&(D1=!0,w(!0),setTimeout(()=>{w(!1)},4e3)),V.jsxs("div",{className:"player-profile-stats",children:[V.jsx(c6,{playerGold:v,playerLevel:c}),V.jsx("div",{className:"upgradable-stat-wrapper",children:R.filter(({key:i})=>Tg(i)).map(({key:i,value:u})=>V.jsx(u6,{statKey:i,label:Sg[i],value:u,cost:t.getUpgradeCost(c),playerGold:v,statsProvider:t,itemStats:b},i))}),e?V.jsxs("div",{className:"stat-upgrade-hint",children:["In Sword & Supper each post is a mission, but your character's progress is persistent!",V.jsx("p",{}),"Use coins to upgrade your stats and become stronger.",V.jsx("p",{}),"Click one of the buttons above to level up!"]}):h?V.jsx("div",{className:"stat-upgrade-confirmation",children:"Great! Now complete this mission and create or play more to continue your progress!"}):V.jsx("div",{className:"stat-wrapper",children:R.filter(({key:i})=>!Tg(i)).map(({key:i,value:u})=>V.jsx(d6,{statKey:i,label:Sg[i],value:u,cost:t.getUpgradeCost(c),playerGold:v,statsProvider:t,itemStats:b},i))})]})},m6=({shown:R,dismiss:t,playerStats:c,statsProvider:v,inventory:x})=>{const b=nw.map(f=>c.stats[f]),[h,w]=ve.useState("Stats"),e=Me(f=>f.playerAbilities),i=Object.values(x.equippedItems).map(f=>{var m;return((m=f==null?void 0:f.definition)==null?void 0:m.abilities)||[]}).flat().map(f=>f.id),u=Object.values(x.equippedItems).flatMap(f=>{var m;return((m=f==null?void 0:f.definition)==null?void 0:m.statModifiers)||[]}).reduce((f,{stat:m,value:g,modifierType:p})=>{var y;if(p==="add"&&m in Jh)f[m]=(f[m]||0)+g;else if(p==="multiply"&&m in Jh){const S=((y=b.find(C=>C.key===m))==null?void 0:y.value)??0;f[m]=(f[m]||0)+g*S}return f},{}),n=Ju(i),r=[...e.filter(f=>!f.name.toLowerCase().includes("default")).map(f=>({...f,source:"mission"})),...n.map(f=>({...f,source:"equipment"}))],a=V.jsxs("div",{className:"player-profile-top",children:[V.jsx("div",{}),V.jsx("div",{className:"player-profile-top-title",children:h}),V.jsx("div",{className:"player-profile-top-title",children:V.jsx("button",{className:"dismiss-button",onClick:t,children:V.jsx("img",{src:"assets/ui/button_close_corner.png",alt:"Close"})})})]}),s=[{id:"Stats"},{id:"Abilities"}],o=V.jsx("div",{className:"player-profile-bottom",children:V.jsx("div",{className:"player-nav",children:s.map(f=>V.jsx("div",{className:`nav-item ${h===f.id?"selected-tab":""}`,onClick:()=>{w(f.id)},children:f.id},f.id))})}),d={backgroundColor:"#2c2d44",justifyContent:"flex-start"},l={display:"flex",flexDirection:"row",width:"100%",height:"auto",alignItems:"flex-start",backgroundColor:"#2c2d44"};return V.jsxs(Pn,{shown:R,dismiss:t,headerContent:a,footerContent:o,contentStyle:d,renderBackButton:!1,footerContentStyle:l,maxHeight:720,children:[h==="Stats"&&V.jsx(f6,{stats:b,statsProvider:v,playerLevel:c.Level,playerGold:x.Gold,inventory:x,itemStats:u}),h==="Abilities"&&V.jsx("div",{className:"abilities",children:r.map((f,m)=>V.jsxs("div",{className:"ability-item",children:[V.jsx("div",{className:"ability-name",children:f.name}),V.jsx("div",{className:"ability-description",children:f.description}),V.jsx("div",{className:"ability-icon","aria-label":f.source==="mission"?"Mission ability":"Equipment ability",children:V.jsx("img",{src:f.source==="mission"?Et.abilities.iconMission:Et.abilities.iconEquipment,alt:""})})]},`${f.name}-${m}`))})]})};var sl=function(){return sl=Object.assign||function(R){for(var t,c=1,v=arguments.length;c<v;c++){t=arguments[c];for(var x in t)Object.prototype.hasOwnProperty.call(t,x)&&(R[x]=t[x])}return R},sl.apply(this,arguments)};function g6(R){var t,c,v,x,b=Number(String((t=R.speed)!==null&&t!==void 0?t:1)),h=(c=R.fill)!==null&&c!==void 0?c:"#fff",w=R.stroke,e=R.fillOpacity,i=R.strokeOpacity;return fi.createElement("svg",sl({},sl(sl({},R),{className:R.className?"icon-loading ".concat(R.className):"icon-loading",fill:void 0,fillOpacity:void 0,height:(v=R.height)!==null&&v!==void 0?v:58,speed:void 0,stroke:void 0,strokeOpacity:void 0,strokeWidth:void 0,width:(x=R.width)!==null&&x!==void 0?x:58}),{viewBox:"0 0 58 58"}),fi.createElement("g",sl({transform:"translate(2 1)",fillRule:"evenodd"},{fill:h,stroke:w,fillOpacity:e,strokeOpacity:i}),fi.createElement("circle",{cx:42.601,cy:11.462,r:5},fi.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"".concat(1.3/b,"s"),values:"1;0;0;0;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),fi.createElement("circle",{cx:49.063,cy:27.063,r:5,fillOpacity:0},fi.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"".concat(1.3/b,"s"),values:"0;1;0;0;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),fi.createElement("circle",{cx:42.601,cy:42.663,r:5,fillOpacity:0},fi.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"".concat(1.3/b,"s"),values:"0;0;1;0;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),fi.createElement("circle",{cx:27,cy:49.125,r:5,fillOpacity:0},fi.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"".concat(1.3/b,"s"),values:"0;0;0;1;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),fi.createElement("circle",{cx:11.399,cy:42.663,r:5,fillOpacity:0},fi.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"".concat(1.3/b,"s"),values:"0;0;0;0;1;0;0;0",calcMode:"linear",repeatCount:"indefinite"})),fi.createElement("circle",{cx:4.938,cy:27.063,r:5,fillOpacity:0},fi.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"".concat(1.3/b,"s"),values:"0;0;0;0;0;1;0;0",calcMode:"linear",repeatCount:"indefinite"})),fi.createElement("circle",{cx:11.399,cy:11.462,r:5,fillOpacity:0},fi.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"".concat(1.3/b,"s"),values:"0;0;0;0;0;0;1;0",calcMode:"linear",repeatCount:"indefinite"})),fi.createElement("circle",{cx:27,cy:5,r:5,fillOpacity:0},fi.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"".concat(1.3/b,"s"),values:"0;0;0;0;0;0;0;1",calcMode:"linear",repeatCount:"indefinite"}))))}var p6=g6,v6={SpinningCircles:p6};const a2=()=>V.jsx("div",{className:"loading-overlay",children:V.jsx(v6.SpinningCircles,{speed:1.5,stroke:"#666",strokeOpacity:.5,height:"50%"})}),ga=({imageSrc:R,altText:t="button image",onClick:c=void 0,imageContainerClassName:v,toolTipText:x=""})=>{const[b,h]=ve.useState(!0),w=v||"default-image-container";return V.jsxs("div",{title:x,onClick:c,className:w,...c&&{onMouseDown:e=>e.currentTarget.style.transform="scale(0.95)",onMouseUp:e=>e.currentTarget.style.transform="scale(1)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)"},children:[b&&V.jsx(a2,{}),V.jsx("img",{src:R,alt:t,onLoad:()=>{h(!1)},loading:"lazy",style:{width:"100%",height:"100%",objectFit:"contain"}})]})};function y6({cost:R,onClick:t,isDisabled:c}){return V.jsx("div",{className:`shop-buy-button ${c?"disabled":""}`,onClick:t,children:V.jsxs("div",{className:"gem-price-button-info",style:{position:"absolute"},children:[V.jsx("img",{src:Et.shop.gemIcon}),V.jsx("div",{children:R})]})})}function x6({cost:R,onClick:t,isDisabled:c}){return V.jsxs("div",{className:`shop-confirm-buy-button ${c?"disabled":""}`,onClick:t,children:[V.jsx("img",{src:Et.shop.buttonBackGround}),V.jsxs("div",{className:"gem-price-confirm-button-info",style:{position:"absolute"},children:[V.jsx("div",{children:R}),V.jsx("img",{src:Et.shop.gemIcon})]})]})}function w6({cost:R,onClick:t,isDisabled:c}){return V.jsx("div",{className:`shop-buy-button white-background ${c?"disabled":""}`,onClick:t,children:V.jsxs("div",{className:"price-button-info",style:{position:"absolute"},children:[V.jsx("img",{src:"assets/ui/Reddit_Star.svg"}),V.jsxs("div",{children:["Use ",R]})]})})}const S6={common:"#9baebc",uncommon:"#8ffe78",rare:"#2b94ebff",epic:"#b962d1",legendary:"#e6bf12ff",mythic:"#f30ca6ff"};function T6(R,t){const c=S6[R.toLowerCase()];return c?V.jsx("span",{style:{color:c,fontWeight:"bold"},children:t}):t}function C6(R){const t=Date.now(),c=R-t;if(c<=0)return"";const v=Math.floor(c/(1e3*60*60*24));if(v>=1)return`${v} day${v!==1?"s":""}`;{const x=Math.floor(c/36e5),b=Math.floor(c%(1e3*60*60)/(1e3*60));return x>0?`${x} hour${x!==1?"s":""}, ${b} minute${b!==1?"s":""}`:`${b} minute${b!==1?"s":""}`}}function A6(R,t,c,v){var x;return R<v.price||((x=v.metadata)==null?void 0:x.shopItemType)===ci.Lives&&(t>0||c===Ci.Playing)}const b6=({item:R,playerGems:t=0,onClose:c,onUse:v})=>{var e,i;const x=Me(u=>u.playerStats),b=(x==null?void 0:x.Lives)??0,h=Me(u=>u.gameStatus),w=u=>{const n={Rare:"Rare maps can discover Boss Rush Missions, spawn enchanted Vending Machines and are more likely to create high difficulty Missions.",cosmetic:"Cosmetic items change the appearance of your character but do not affect gameplay."};return u.split(/(\[(?:INFO|RARITY):[^\]]+\])/g).map((a,s)=>{const o=a.match(/\[INFO:([^\]]+)\]/),d=a.match(/\[RARITY:([^:]+):([^\]]+)\]/);if(o){const l=o[1],f=n[l];return f?V.jsxs(fi.Fragment,{children:[V.jsx("span",{className:"info-term",children:l}),V.jsx(ds,{content:f,inline:!0})]},s):V.jsx("span",{children:l},s)}if(d){const l=d[1],f=d[2];return V.jsx(fi.Fragment,{children:T6(l,f)},s)}return V.jsx("span",{children:a},s)})};return R?V.jsx("div",{className:"shopitem-modal-overlay",onClick:c,children:V.jsxs("div",{className:"shopitem-modal-content",onClick:u=>u.stopPropagation(),children:[V.jsx("button",{className:"shopitem-modal-dismiss-button",onClick:c,children:V.jsx("img",{src:"assets/ui/button_close_corner.png",alt:"Close"})}),V.jsx("div",{className:"shopitem-modal-header",children:V.jsx("div",{className:"shopitem-title",children:"CONFIRM PURCHASE"})}),V.jsxs("div",{className:"shopitem-modal-body",children:[V.jsx("div",{className:"shopitem-bg",children:V.jsx("img",{src:Et.shop.purchaseBackground})}),V.jsxs("div",{className:"shopitem-upperbody",children:[V.jsx("div",{className:"shopitem-image",children:V.jsx("img",{src:((e=R.images)==null?void 0:e.shopicon)??""})}),V.jsx("div",{className:"shopitem-name",children:V.jsx("p",{style:{whiteSpace:"pre-wrap"},children:R.displayName})})]}),V.jsxs("div",{className:"shopitem-description",style:{whiteSpace:"pre-line"},children:[w(R.description??""),((i=R.metadata)==null?void 0:i.shopItemType)===ci.BattlePass&&(x!=null&&x.battlePassExpiration)&&x.battlePassExpiration>0&&x.battlePassExpiration>Date.now()?V.jsxs("div",{style:{marginTop:"10px",fontWeight:"bold",color:"#b62e16ff"},children:["Remaining: ",C6(x.battlePassExpiration)]}):null]}),V.jsx("div",{className:"shopitem-modal-actions",children:V.jsx(x6,{cost:R.price,onClick:()=>v&&v(R),isDisabled:A6(t,b,h,R)})})]})]})}):V.jsx(V.Fragment,{})},n2=aw((R,t)=>({notifications:[],addNotification:(c,v,x)=>{const b=Jr.generate(),h={id:b,type:c,message:v,title:x==null?void 0:x.title,duration:(x==null?void 0:x.duration)??4e3,autoHide:(x==null?void 0:x.autoHide)??!0,timestamp:Date.now(),customContent:x==null?void 0:x.customContent};return R(w=>({notifications:[...w.notifications,h]})),b},addCustomNotification:(c,v)=>{const x=Jr.generate(),b={id:x,type:"custom",title:v==null?void 0:v.title,duration:(v==null?void 0:v.duration)??4e3,autoHide:(v==null?void 0:v.autoHide)??!0,timestamp:Date.now(),customContent:c};return R(h=>({notifications:[...h.notifications,b]})),x},removeNotification:c=>{R(v=>({notifications:v.notifications.filter(x=>x.id!==c)}))},clearAllNotifications:()=>{R({notifications:[]})}})),Sp=()=>n2.getState(),ed=(R,t)=>Sp().addNotification("success",R,t),E6=(R,t)=>Sp().addNotification("reminder",R,t),M6=(R,t)=>Sp().addCustomNotification(R,t);function L6(R){ss({type:"requestPurchase",data:{sku:R}})}function R6(R){const t=R.split("_");return t[t.length-1]}function P6(R){switch(R){case"new":return Et.shop.badges.new;case"great-deal":return Et.shop.badges.greatDeal;default:return""}}function Tp(R,t="shop-product-badge"){return R?V.jsx("div",{className:t,children:V.jsx("img",{src:P6(R),alt:`${R} badge`})}):null}function B6(R){return V.jsx("div",{className:"shop-product",children:V.jsx(ga,{imageSrc:Et.shop.lock,imageContainerClassName:"shop-image-container"})},R)}function r2(R,t=3){const c=[...R],v=R.length%t;if(v!==0){const x=t-v;for(let b=0;b<x;b++)c.push(B6(`locked-${R.length+b}`))}return c}function D6(R,t){return(R==null?void 0:R.map(c=>V.jsxs("div",{className:"shop-battlepass-item",onClick:()=>{t(c)},children:[Tp(c.badge,"shop-battlepass-badge"),V.jsxs("div",{className:"shop-battlepass-banner",children:[V.jsx(ga,{imageSrc:Et.shop.bannerFrogpass,imageContainerClassName:"shop-battlepass-banner-image"}),V.jsxs("div",{className:"shop-battlepass-price",children:[V.jsx("div",{className:"shop-battlepass-gem-icon",children:V.jsx("img",{src:Et.shop.gemIcon,alt:"Gem"})}),V.jsx("div",{className:"shop-battlepass-gem-value",children:c.price})]})]})]},c.sku)))||[]}function F1(R,t){const c=(R==null?void 0:R.map(v=>{var x;return V.jsxs("div",{className:"shop-product blue-background",onClick:()=>{t(v)},children:[Tp(v.badge),V.jsxs("div",{className:"shop-product-wrapper blue-wrapper-background",children:[V.jsx(ga,{imageSrc:((x=v.images)==null?void 0:x.shopicon)??"",imageContainerClassName:"shop-image-container"}),V.jsx("div",{className:"shop-product-info",children:V.jsx("div",{className:"shop-product-name",children:v.displayName})})]}),V.jsx(y6,{isDisabled:!1,cost:v.price})]},v.sku)}))||[];return r2(c)}function F6(R){const t=(R==null?void 0:R.map(c=>{var v,x;return V.jsxs("div",{className:"shop-product purple-background",onClick:()=>{L6(c.sku)},children:[Tp(c.badge),V.jsxs("div",{className:"shop-product-wrapper purple-wrapper-background",children:[V.jsx(ga,{imageSrc:((v=c.images)==null?void 0:v.shopicon)??"",imageContainerClassName:"shop-image-container"}),V.jsx("div",{className:"shop-product-info",children:V.jsx("div",{className:"shop-product-name",children:c.displayName})}),V.jsx("div",{className:"shop-product-gem-amt",children:((x=c.metadata)==null?void 0:x.amount)??R6(c.sku)})]}),V.jsx(w6,{isDisabled:!1,cost:c.price})]},c.sku)}))||[];return r2(t)}const I6=({playerGems:R,shown:t,dismiss:c})=>{const[v,x]=ve.useState(!0),[b,h]=ve.useState(),[w,e]=ve.useState("items"),i=ve.useRef(null),u=ve.useRef(null),n=ve.useRef(null),r=Me(M=>M.buyItem);Me(M=>M.playerStats);const a=Me(M=>M.shopDeepLinkItemSku),s=Me(M=>M.clearShopDeepLink),o=Te().shopGoods,d=o.filter(M=>{var L;return(L=M.tags)==null?void 0:L.includes("battlepass")}),l=o.filter(M=>{var L,P;return((L=M.tags)==null?void 0:L.includes("item"))&&!((P=M.tags)!=null&&P.includes("battlepass"))}),f=o.filter(M=>{var L;return(L=M.tags)==null?void 0:L.includes("gems")}).sort((M,L)=>M.price-L.price),m=o.filter(M=>{var L;return(L=M.tags)==null?void 0:L.includes("cosmetic")});ve.useEffect(()=>{if(!t||!a)return;const M=o.find(L=>L.sku===a);M&&(h(M),x(!0),s())},[t,a,o,s]);const g=(M,L)=>{e(L);let P=M.current.parentElement;for(;P;){const F=getComputedStyle(P);if(F.overflowY==="auto"||F.overflowY==="scroll"||F.overflow==="auto"||F.overflow==="scroll"||P.classList.contains("modal-content")||P.style.scrollbarColor||P.style.scrollbarWidth)break;P=P.parentElement}let O=M.current,D=0;for(;O&&O!==P&&(D+=O.offsetTop,O=O.offsetParent,O!==P););P.scrollTo({top:D-120,behavior:"smooth"})},p=V.jsxs("div",{className:"shop-top",children:[V.jsx("div",{className:"shop-awning",children:V.jsx("img",{src:Et.shop.awning})}),V.jsx("div",{}),V.jsxs("div",{className:"gem-display",children:[V.jsx("img",{className:"badge",src:Et.shop.gemIcon,alt:"Gem"}),V.jsx("div",{className:"gem-value",children:V.jsx("div",{className:"level-font",children:R})})]}),V.jsx("div",{className:"shop-top-title shop-title",children:"Shop"}),V.jsx("div",{children:V.jsx("button",{className:"dismiss-button",onClick:c,children:V.jsx("img",{src:"assets/ui/button_close_corner.png",alt:"Close"})})})]}),y={backgroundColor:"#0c2445",paddingTop:"40px",scrollbarWidth:"thin",scrollbarColor:" #0e69f2 transparent",justifyContent:"flex-start",overflow:"hidden"},S=M=>{h(M),x(!0)},C=()=>{h(void 0),x(!1)},A=M=>{M.metadata&&(r(M.metadata.shopItemId,M.metadata.shopItemType),ed(`Purchased ${M.displayName}`)),C()};return V.jsxs(Pn,{shown:t,dismiss:c,renderBackButton:!1,headerContent:p,contentStyle:y,children:[V.jsxs("div",{className:"shop-container",children:[V.jsx("div",{className:"shop-banner",children:V.jsx(ga,{imageSrc:Et.shop.banner,imageContainerClassName:"shop-banner-image"})}),d.length>0&&V.jsx("div",{className:"shop-battlepass-section",children:D6(d,S)}),V.jsx("div",{className:"shop-header",ref:i,children:"ITEMS"}),V.jsx("div",{className:"shop-content",children:F1(l,S)}),V.jsx("div",{className:"shop-header",ref:u,children:"GEM PACKS"}),V.jsx("div",{className:"shop-content",children:F6(f)}),V.jsx("div",{className:"shop-header",ref:n,children:"COSMETICS"}),V.jsx("div",{className:"shop-content",children:F1(m,S)})]}),V.jsxs("div",{className:"shop-navigation-bottom",children:[V.jsxs("button",{className:`shop-nav-button ${w==="items"?"active":""}`,onClick:()=>g(i,"items"),children:[V.jsx("div",{className:"shop-nav-icon",children:V.jsx("img",{src:Et.shop.itemSectionIcon,alt:"Items"})}),V.jsx("span",{children:"Items"})]}),V.jsxs("button",{className:`shop-nav-button ${w==="gems"?"active":""}`,onClick:()=>g(u,"gems"),children:[V.jsx("div",{className:"shop-nav-icon",children:V.jsx("img",{src:Et.shop.gemSectionIcon,alt:"Gems"})}),V.jsx("span",{children:"Gems"})]}),V.jsxs("button",{className:`shop-nav-button ${w==="cosmetics"?"active":""}`,onClick:()=>g(n,"cosmetics"),children:[V.jsx("div",{className:"shop-nav-icon",children:V.jsx("img",{src:Et.shop.cosmeticsSectionIcon,alt:"Cosmetics"})}),V.jsx("span",{children:"Cosmetics"})]})]}),v&&V.jsx(b6,{item:b,playerGems:R,onClose:C,onUse:A})]})};function Ug({label:R,onClick:t,disabled:c=!1}){return V.jsx("div",{className:`advance-button ${c?"disabled":""}`,onClick:c?void 0:t,children:V.jsx("div",{className:`advance-button-label ${c?"disabled":""}`,children:R})})}function Cp({itemDefinition:R}){const[t,c]=ve.useState(!0),v=h=>`/assets/ui/item-icons/${h.assetName&&h.assetName!==""?h.assetName:h.id}.png`,x=h=>`/assets/ui/item-icons/${h}.png`,b=(h,w)=>function(){const[e,...i]=w;e?(h.onerror=b(h,i),this.src=x(e)):h.onerror=null};return V.jsxs("div",{className:"item-image-container",children:[t&&V.jsx(a2,{}),V.jsx("img",{src:v(R),ref:h=>{h&&(h.onerror=b(h,R.tags),h.onload=()=>c(!1))},loading:"lazy",alt:R.name,className:"item-image",draggable:"false"})]})}const O6={common:"/assets/ui/equip_bg_common.png",uncommon:"/assets/ui/equip_bg_uncommon.png",rare:"/assets/ui/equip_bg_rare.png",epic:"/assets/ui/equip_bg_epic.png",legendary:"/assets/ui/equip_bg_legendary.png",mythic:"/assets/ui/equip_bg_mythic.png"};function ac({itemDefinition:R,onClick:t}){return V.jsx("div",{className:"item-icon-container",style:{backgroundImage:`url(${O6[R.rarity]})`},onClick:t,children:V.jsx(Cp,{itemDefinition:R})})}function N6(R,t){var i;if(((i=R.tags)==null?void 0:i.includes("blueprint"))||!R.damage&&(!R.statModifiers||R.statModifiers.length===0)&&(!R.abilities||R.abilities.length===0))return G6(t);const v=[],x=H6(R,t);x.length>0&&v.push(V.jsxs("div",{style:{marginBottom:"8px"},children:[V.jsx("strong",{children:"Damage:"}),V.jsx("div",{style:{marginLeft:"8px"},children:x.map(u=>V.jsxs("div",{children:[u.type.charAt(0).toUpperCase()+u.type.slice(1),": ",u.oldValue," → ",V.jsx("span",{style:{color:"#4CAF50",fontWeight:"bold"},children:u.newValue}),u.improvement>0&&V.jsxs("span",{style:{color:"#4CAF50",fontSize:"12px",marginLeft:"4px"},children:["(+",u.improvement,")"]})]},u.type))})]},"damage"));const b=k6(R,t);b.length>0&&v.push(V.jsxs("div",{style:{marginBottom:"8px"},children:[V.jsx("strong",{children:"Stats:"}),V.jsx("div",{style:{marginLeft:"8px"},children:b.map((u,n)=>V.jsxs("div",{children:[u.stat,": ",Uh({stat:u.stat,value:u.oldValue,modifierType:"add"})," → ",V.jsx("span",{style:{color:"#4CAF50",fontWeight:"bold"},children:Uh({stat:u.stat,value:u.newValue,modifierType:"add"})}),u.improvement>0&&V.jsxs("span",{style:{color:"#4CAF50",fontSize:"12px",marginLeft:"4px"},children:["(",Uh({stat:u.stat,value:u.improvement,modifierType:"add"}),")"]})]},n))})]},"stats"));const h=U6(R,t);h.length>0&&v.push(V.jsxs("div",{style:{marginBottom:"8px"},children:[V.jsx("strong",{children:"New Abilities:"}),V.jsx("div",{style:{marginLeft:"8px"},children:h.map((u,n)=>V.jsxs("div",{style:{color:"#4CAF50",fontWeight:"bold"},children:["+ ",Vg(u.id)]},n))})]},"new-abilities"));const w=t.abilities||[];if((R.abilities||[]).length===0&&w.length>0&&v.push(V.jsxs("div",{style:{marginBottom:"8px"},children:[V.jsx("strong",{children:"Abilities:"}),V.jsx("div",{style:{marginLeft:"8px"},children:w.map((u,n)=>V.jsx("div",{style:{color:"#4CAF50"},children:Vg(u.id)},n))})]},"abilities")),t.requiredLevel&&t.requiredLevel>1){const u=(R.requiredLevel||0)!==t.requiredLevel;v.push(V.jsxs("div",{style:{marginBottom:"8px"},children:[V.jsx("strong",{children:"Required Level:"}),u?V.jsxs("span",{children:[R.requiredLevel||0," → ",V.jsx("span",{style:{color:t.requiredLevel>(R.requiredLevel||0)?"#FF9800":"#4CAF50"},children:t.requiredLevel})]}):V.jsxs("span",{children:[" ",t.requiredLevel]})]},"level"))}if(t.equipSlots&&t.equipSlots.length>0&&v.push(V.jsxs("div",{style:{marginBottom:"8px"},children:[V.jsx("strong",{children:"Equip Slot:"})," ",t.equipSlots.join(", ")]},"slots")),t.rarity){const u=V6(R.rarity,t.rarity);v.push(V.jsxs("div",{style:{marginBottom:"8px"},children:[V.jsx("strong",{children:"Rarity:"}),R.rarity&&u?V.jsxs("span",{children:[V.jsx("span",{style:{color:Xu(R.rarity),textTransform:"capitalize"},children:R.rarity})," → ",V.jsx("span",{style:{color:Xu(t.rarity),textTransform:"capitalize",fontWeight:"bold"},children:t.rarity})]}):V.jsx("span",{style:{color:Xu(t.rarity),textTransform:"capitalize"},children:t.rarity})]},"rarity"))}return V.jsxs("div",{style:{fontSize:"14px",lineHeight:"1.4"},children:[V.jsx("div",{style:{marginBottom:"12px",fontStyle:"italic",color:"#666"},children:t.description}),v.length>0?v:V.jsx("div",{children:"No stat improvements found"})]})}function G6(R){const t=[];if(R.damage){const c=Object.entries(R.damage);c.length>0&&t.push(V.jsxs("div",{style:{marginBottom:"8px"},children:[V.jsx("strong",{children:"Damage:"}),V.jsx("div",{style:{marginLeft:"8px"},children:c.map(([v,x])=>V.jsxs("div",{children:[v.charAt(0).toUpperCase()+v.slice(1),": ",x]},v))})]},"damage"))}return R.statModifiers&&R.statModifiers.length>0&&t.push(V.jsxs("div",{style:{marginBottom:"8px"},children:[V.jsx("strong",{children:"Stats:"}),V.jsx("div",{style:{marginLeft:"8px"},children:R.statModifiers.map((c,v)=>V.jsxs("div",{children:[c.stat,": ",Uh(c)]},v))})]},"stats")),R.abilities&&R.abilities.length>0&&t.push(V.jsxs("div",{style:{marginBottom:"8px"},children:[V.jsx("strong",{children:"Abilities:"}),V.jsx("div",{style:{marginLeft:"8px"},children:R.abilities.map((c,v)=>V.jsx("div",{children:Vg(c.id)},v))})]},"abilities")),R.requiredLevel&&R.requiredLevel>1&&t.push(V.jsxs("div",{style:{marginBottom:"8px"},children:[V.jsx("strong",{children:"Required Level:"})," ",R.requiredLevel]},"level")),R.rarity&&t.push(V.jsxs("div",{style:{marginBottom:"8px"},children:[V.jsx("strong",{children:"Rarity:"})," ",V.jsx("span",{style:{color:Xu(R.rarity),textTransform:"capitalize"},children:R.rarity})]},"rarity")),V.jsxs("div",{style:{fontSize:"14px",lineHeight:"1.4"},children:[V.jsx("div",{style:{marginBottom:"12px",fontStyle:"italic",color:"#666"},children:R.description}),t.length>0?t:V.jsx("div",{children:"No additional stats available"})]})}function Xu(R){switch(R.toLowerCase()){case"common":return"#9d9d9d";case"uncommon":return"#1eff00";case"rare":return"#0070dd";case"epic":return"#a335ee";case"legendary":return"#ff8000";default:return"#ffffff"}}function Vg(R){return R.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase()).trim()}function H6(R,t){const c=[],v=R.damage||{},x=t.damage||{};return new Set([...Object.keys(v),...Object.keys(x)]).forEach(h=>{const w=v[h]||0,e=x[h]||0;e>0&&c.push({type:h,oldValue:w,newValue:e,improvement:e-w})}),c}function k6(R,t){const c=[],v=R.statModifiers||[],x=t.statModifiers||[],b=new Map,h=new Map;return v.forEach(e=>{e.type==="StatModifier"&&b.set(e.stat,(b.get(e.stat)||0)+e.value)}),x.forEach(e=>{e.type==="StatModifier"&&h.set(e.stat,(h.get(e.stat)||0)+e.value)}),new Set([...b.keys(),...h.keys()]).forEach(e=>{const i=b.get(e)||0,u=h.get(e)||0;u!==0&&c.push({stat:e,oldValue:i,newValue:u,improvement:u-i})}),c}function U6(R,t){const c=new Set((R.abilities||[]).map(x=>x.id));return(t.abilities||[]).filter(x=>!c.has(x.id))}function V6(R,t){const c=["common","uncommon","rare","epic","legendary"],v=R?c.indexOf(R.toLowerCase()):-1;return c.indexOf(t.toLowerCase())>v}function Y6({onClose:R,item:t}){const c=Me(w=>w.inventory),v=Me(w=>w.upgradeItem),[x,b]=ve.useState(!1);ve.useEffect(()=>{requestAnimationFrame(()=>b(!0))},[]);const h=w=>Object.values(c.bags).map(i=>i.items).flat().filter(i=>!!i).filter(i=>i.definition.id===w).reduce((i,u)=>i+u.amount,0);return V.jsx("div",{className:"item-modal-overlay stacked-overlay",onClick:R,children:V.jsxs("div",{className:`item-modal-content item-upgrade-modal-content ${x?"shown":""}`,onClick:w=>w.stopPropagation(),children:[V.jsx("div",{className:"item-modal-banner",children:V.jsx("img",{src:"assets/ui/badge_upgrade.png",alt:"Upgrade Items"})}),V.jsx("button",{className:"item-modal-dismiss-button",style:{zIndex:2e3},onClick:R,children:V.jsx("img",{src:"assets/ui/button_close_corner.png",alt:"Close"})}),V.jsx("div",{className:"item-upgrades-list",children:t.definition.upgrades.map(w=>{const e=ba[w.yields],i=w.requires.every(r=>h(r.id)>=r.amount),u=i?async()=>{const r=await v(t.id,e.id);r.ok?(ed(`Upgraded ${t.definition.name} to ${e.name}`),R()):console.error(r.error)}:void 0,n=()=>{Me.getState().setShopShown(!0)};return V.jsxs("div",{className:"item-upgrade",children:[V.jsxs("div",{className:"item-upgrade-details",children:[V.jsxs("div",{className:"item-upgrade-requirements",children:[V.jsx("div",{children:V.jsx(ac,{itemDefinition:t.definition})}),V.jsx("div",{className:"item-upgrade-name",children:t.definition.name}),w.requires.map(r=>V.jsxs("div",{className:"item-upgrade-requirement",children:[V.jsxs("div",{className:"item-upgrade-requirement-left",children:[V.jsx(Cp,{itemDefinition:ba[r.id]}),V.jsx(ds,{content:ba[r.id].name})]}),V.jsxs("div",{children:[V.jsx("span",{children:h(r.id)}),V.jsxs("span",{children:["/",r.amount]})]})]},r.id))]}),V.jsx("img",{className:"item-upgrade-arrow",draggable:!1,src:"assets/ui/arrow_upgrade.png",alt:"Arrow"}),V.jsxs("div",{className:"item-upgrade-preview",children:[V.jsx(ac,{itemDefinition:e}),V.jsxs("div",{className:"item-upgrade-name",children:[e.name,V.jsx(ds,{content:N6(t.definition,e),title:e.name,inline:!0})]})]})]}),V.jsxs("div",{className:"item-upgrade-buttons",children:[V.jsx("div",{onClick:u,className:`item-upgrade-button ${i?"":"disabled"}`,children:V.jsx("img",{draggable:!1,src:"assets/ui/button_upgrade.png",alt:"Upgrade"})}),!i&&V.jsx("div",{onClick:n,className:"item-resources-button",children:V.jsx("img",{draggable:!1,src:"assets/ui/button_moreresources.png",alt:"More Resources"})})]})]},w.yields)})})]})})}const X6=ve.createContext(null),gg={didCatch:!1,error:null};class z6 extends ve.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=gg}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var c,v,x=arguments.length,b=new Array(x),h=0;h<x;h++)b[h]=arguments[h];(c=(v=this.props).onReset)===null||c===void 0||c.call(v,{args:b,reason:"imperative-api"}),this.setState(gg)}}componentDidCatch(t,c){var v,x;(v=(x=this.props).onError)===null||v===void 0||v.call(x,t,c)}componentDidUpdate(t,c){const{didCatch:v}=this.state,{resetKeys:x}=this.props;if(v&&c.error!==null&&W6(t.resetKeys,x)){var b,h;(b=(h=this.props).onReset)===null||b===void 0||b.call(h,{next:x,prev:t.resetKeys,reason:"keys"}),this.setState(gg)}}render(){const{children:t,fallbackRender:c,FallbackComponent:v,fallback:x}=this.props,{didCatch:b,error:h}=this.state;let w=t;if(b){const e={error:h,resetErrorBoundary:this.resetErrorBoundary};if(typeof c=="function")w=c(e);else if(v)w=ve.createElement(v,e);else if(x!==void 0)w=x;else throw h}return ve.createElement(X6.Provider,{value:{didCatch:b,error:h,resetErrorBoundary:this.resetErrorBoundary}},w)}}function W6(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return R.length!==t.length||R.some((c,v)=>!Object.is(c,t[v]))}function j6(R,t){const c=ve.forwardRef((x,b)=>ve.createElement(z6,t,ve.createElement(R,{...x,ref:b}))),v=R.displayName||R.name||"Unknown";return c.displayName="withErrorBoundary(".concat(v,")"),c}function K6({cost:R,onClick:t,isDisabled:c}){return V.jsxs("div",{className:`sell-button ${c?"disabled":""}`,onClick:t,children:[V.jsx("img",{src:"assets/ui/button_sell.png"}),V.jsxs("div",{className:"sell-button-info",style:{position:"absolute"},children:[V.jsx("img",{src:"assets/ui/ItemIcon_Money_Coin.png"}),V.jsx("div",{children:R})]})]})}const Cu={modal:{backgroundColor:"#36364e",height:"auto",minHeight:"auto",maxWidth:"400px"},content:{padding:"20px",height:"auto"},footer:{display:"flex",flexDirection:"row",width:"100%",height:"auto",alignItems:"flex-start",backgroundColor:"#36364e"},overlay:{zIndex:2e3,background:"transparent"}};function $6({shown:R,dismiss:t,onContinue:c,message:v,title:x="Confirm"}){fi.useEffect(()=>()=>{},[]);const b=V.jsx("div",{className:"confirm-top",children:x});return V.jsx(Pn,{shown:R,dismiss:t,modalStyle:Cu.modal,headerContent:b,contentStyle:Cu.content,footerContentStyle:Cu.footer,renderBackButton:!1,overlayStyle:Cu.overlay,children:V.jsxs("div",{className:"confirm-content",children:[v&&V.jsx("p",{className:"confirm-message",children:v}),V.jsxs("div",{className:"confirm-buttons",children:[V.jsx("button",{className:"confirm-button cancel",onClick:t,"aria-label":"Cancel",children:V.jsx("img",{src:"/assets/ui/button_cancel.png",alt:"Cancel"})}),V.jsx("button",{className:"confirm-button continue",onClick:c,"aria-label":"Continue",children:V.jsx("img",{src:"/assets/ui/button_continue.png",alt:"Continue"})})]})]})})}function Q6(){const[R,t]=ve.useState(!1),[c,v]=ve.useState(null),[x,b]=ve.useState(!1),h=ve.useCallback(i=>{v(i),t(!0)},[]),w=ve.useCallback(async()=>{if(c)try{b(!0),await c.onConfirm()}catch(i){console.error("Confirmation action failed:",i)}finally{b(!1),t(!1)}},[c]),e=ve.useCallback(()=>{var i;(i=c==null?void 0:c.onCancel)==null||i.call(c),t(!1)},[c]);return{showConfirmation:h,confirmationProps:{shown:R,dismiss:e,onContinue:w,message:c==null?void 0:c.message,title:c==null?void 0:c.title,isLoading:x}}}const J6={common:"radial-gradient(circle, #617e8a 0%, #3d4f5e 100%)",uncommon:"radial-gradient(circle, #219463 0%, #196f58 100%)",rare:"radial-gradient(circle, #2f94fc 0%, #4a5ce1 100%)",epic:"radial-gradient(circle, #c980fe 0%, #8808ff 100%)",legendary:"radial-gradient(circle, #ffde00 0%, #ffb532 100%)",mythic:"radial-gradient(circle, #eb2f47 0%, #a11828 100%)"},Z6={common:"#9baebc",uncommon:"#8ffe78",rare:"#6efdff",epic:"#b962d1",legendary:"#ffffff",mythic:"#fea79b"},I1=j6(({item:R,isEquipped:t,onClose:c,onUse:v})=>{var p,y,S,C,A,M,L,P,O,D;const x=Ju(R.definition.abilities.map(I=>I.id)),[b,h]=ve.useState(!1);ve.useEffect(()=>{requestAnimationFrame(()=>h(!0))},[]);const[w,e]=ve.useState(!1),i=Me(I=>{var F;return((F=I.playerStats)==null?void 0:F.Level)||1}),u=Me(I=>I.itemDetailShown);ve.useEffect(()=>{!u&&w&&e(!1)},[u,w]);const n=Me(I=>I.equipItem),r=Me(I=>I.unequipItem),a=Me(I=>I.sellItem),s=R.definition.requiredLevel<=i,o=()=>{s&&(n(R),c())},{showConfirmation:d,confirmationProps:l}=Q6(),f=()=>{if(R.definition.tags.includes(Nx)){m();return}d({title:"Confirm",message:`Are you sure you want to sell ${R.definition.name}?`,onConfirm:m,onCancel:()=>console.log("Sale cancelled")})},m=()=>{a(R),!R.definition.tags.includes(Nx)&&c()},g=()=>{r(R.definition.equipSlots[0]),c()};return V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"item-modal-overlay",onClick:c,children:[V.jsxs("div",{className:`item-modal-content ${b?"shown":""}`,onClick:I=>I.stopPropagation(),children:[V.jsx("button",{className:"item-modal-dismiss-button",onClick:c,children:V.jsx("img",{src:"assets/ui/button_close_corner.png",alt:"Close"})}),V.jsxs("div",{className:"item-modal-header",style:{background:J6[R.definition.rarity]},children:[V.jsxs("div",{className:"item-title",children:[V.jsx("h2",{children:R.definition.name}),V.jsx("h3",{style:{color:Z6[R.definition.rarity]},children:R.definition.rarity})]}),V.jsxs("div",{className:"header-content",children:[V.jsx(ac,{itemDefinition:R.definition}),R.definition.requiredLevel>1&&V.jsxs("div",{className:"required-level",children:["Min Level: ",R.definition.requiredLevel]})]})]}),V.jsxs("div",{className:"item-modal-body",children:[V.jsxs("div",{className:"item-description",children:[V.jsx("p",{style:{whiteSpace:"pre-wrap"},children:R.definition.description}),V.jsxs("p",{className:"stats",children:[((p=R.definition.damage)==null?void 0:p.physical)&&V.jsxs("span",{className:"stat",children:[V.jsx("span",{className:"symbol",children:"💪"}),"Physical DMG: ",(y=R.definition.damage)==null?void 0:y.physical,V.jsx("br",{})]}),((S=R.definition.damage)==null?void 0:S.fire)&&V.jsxs("span",{className:"stat",children:[V.jsx("span",{className:"symbol",children:"🔥"}),"Fire DMG: ",(C=R.definition.damage)==null?void 0:C.fire,V.jsx("br",{})]}),((A=R.definition.damage)==null?void 0:A.ice)&&V.jsxs("span",{className:"stat",children:[V.jsx("span",{className:"symbol",children:"❄️"}),"Ice DMG: ",(M=R.definition.damage)==null?void 0:M.ice,V.jsx("br",{})]}),((L=R.definition.damage)==null?void 0:L.lightning)&&V.jsxs("span",{className:"stat",children:[V.jsx("span",{className:"symbol",children:"⚡"}),"Lightning DMG: ",(P=R.definition.damage)==null?void 0:P.lightning,V.jsx("br",{})]}),((O=R.definition.damage)==null?void 0:O.shadow)&&V.jsxs("span",{className:"stat",children:[V.jsx("span",{className:"symbol",children:"🌑"}),"Shadow DMG: ",(D=R.definition.damage)==null?void 0:D.shadow,V.jsx("br",{})]}),R.definition.statModifiers.map((I,F)=>V.jsxs("span",{className:"stat",children:[I.stat,": ",Uh(I),V.jsx("br",{})]},F))]}),V.jsx("p",{className:"stats",children:x.map((I,F)=>V.jsxs("span",{className:"stat",children:["+ ",I.name,V.jsx(ds,{inline:!0,content:I.description}),V.jsx("br",{})]},F))})]}),V.jsxs("div",{className:"item-modal-actions",children:[V.jsxs("div",{className:"actions-button-row",children:[!t&&R.definition.sellPrice>0&&V.jsx("div",{className:"item-sell-button",children:V.jsx(K6,{cost:R.definition.sellPrice,onClick:f,isDisabled:!1})}),R.definition.equipSlots.length>0&&(t?V.jsx("button",{onClick:g,children:V.jsx("img",{src:"/assets/ui/button_unequip.png"})}):V.jsx("button",{className:`equip-button ${s?"":"disabled"} `,onClick:o,children:V.jsx("img",{src:"/assets/ui/button_equip.png"})})),R.definition.tags.some(I=>I===HA)&&V.jsx("button",{onClick:v,children:V.jsx("img",{src:"/assets/ui/button_use.png"})})]}),V.jsx("div",{className:"actions-button-row",children:R.definition.upgrades.length>0&&V.jsx("button",{onClick:()=>e(!0),children:V.jsx("img",{style:{width:"120px"},src:"/assets/ui/button_upgrade.png",alt:"Upgrade"})})})]})]})]}),V.jsx($6,{...l})]}),w&&V.jsx(Y6,{item:R,onClose:()=>e(!1)})]})},{onError:(R,t)=>{console.error("Error in ItemDetailsModal component:",R),console.error("Error info:",t)},fallbackRender:()=>null}),O1={common:"/assets/ui/equip_bg_common.png",uncommon:"/assets/ui/equip_bg_uncommon.png",rare:"/assets/ui/equip_bg_rare.png",epic:"/assets/ui/equip_bg_epic.png",legendary:"/assets/ui/equip_bg_legendary.png",mythic:"/assets/ui/equip_bg_mythic.png"},q6={common:"#617f8b",uncommon:"#22ef1d",rare:"#0b82f3",epic:"#ae3af8",legendary:"#ffde01",mythic:"#df2f38"},_6={Head:"/assets/ui/slot_badge_head.png",Chest:"/assets/ui/slot_badge_chest.png",Amulet:"/assets/ui/slot_badge_amulet.png",Weapon:"/assets/ui/slot_badge_weapon.png",Ring:"/assets/ui/slot_badge_ring.png",Belt:"/assets/ui/slot_badge_belt.png",Hat:"/assets/ui/slot_badge_hat.png",Shirt:"/assets/ui/slot_badge_chest.png",Cloak:"/assets/ui/slot_badge_chest.png"},e8={Head:"/assets/ui/slot_icon_head.png",Chest:"/assets/ui/slot_icon_chest.png",Amulet:"/assets/ui/slot_icon_amulet.png",Weapon:"/assets/ui/slot_icon_weapon.png",Ring:"/assets/ui/slot_icon_ring.png",Belt:"/assets/ui/slot_icon_belt.png",Hat:"/assets/ui/slot_icon_hat.png",Shirt:"/assets/ui/slot_icon_shirt.png",Cloak:"/assets/ui/slot_icon_cloak.png"},eo=({type:R,item:t,virtualStack:c,onUse:v,isEquipped:x=!1,itemDefinition:b,quantity:h,canUpgrade:w=!1})=>{const[e,i]=ve.useState(!1),u=Me(g=>g.itemDetailShown),n=Me(g=>g.setItemDetailShown),r=c?c.representativeItem:t,a=c?c.definition:(t==null?void 0:t.definition)||b,s=c?c.displayCount:(t==null?void 0:t.amount)||h||1;ve.useEffect(()=>{!u&&e&&i(!1)},[u,e]);const o=()=>{r&&(i(!0),n(!0))},d=()=>{r&&v&&(v(r),i(!1),n(!1))},l=a,f=l?l.tags.includes(pw):!1,m=s;return V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:`equipment-slot ${R}`,style:{backgroundImage:l?`url(${O1[l.rarity]})`:`url(${O1.common})`},...r?{onClick:o}:{},children:[l&&l.equipSlots.length>0&&V.jsx("div",{className:"slot-badge",style:{backgroundColor:q6[l.rarity]},children:V.jsx("img",{src:_6[l.equipSlots[0]]})}),l&&l.upgrades&&l.upgrades.length>0&&(!f||w)&&V.jsx("div",{className:`upgrade-badge ${w?"can-upgrade":""}`,children:V.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:V.jsx("path",{d:"M8 12V4M8 4L5 7M8 4L11 7",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),l?V.jsxs("div",{className:"item-content",children:[V.jsx(Cp,{itemDefinition:l}),(l.isStackable||c&&c.displayCount>1)&&V.jsx("div",{className:"item_quantity",children:m})]}):V.jsx("div",{className:"empty-slot",children:R&&V.jsx("img",{src:e8[R]})})]}),e&&r&&(()=>{const g=document.getElementById("equipment-modal-container");return g?i2.createPortal(V.jsx(I1,{item:r,isEquipped:x,onClose:()=>{i(!1),n(!1)},onUse:d}),g):V.jsx(I1,{item:r,isEquipped:x,onClose:()=>{i(!1),n(!1)},onUse:d})})(),V.jsx("svg",{style:{position:"absolute",width:0,height:0},children:V.jsx("defs",{children:V.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[V.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),V.jsxs("feMerge",{children:[V.jsx("feMergeNode",{in:"coloredBlur"}),V.jsx("feMergeNode",{in:"SourceGraphic"})]})]})})})]})};class o2{constructor(){G(this,"entries",{});G(this,"size",0)}add(t){let c=this.entries[t];return this.entries[t]=!0,c?!1:(this.size++,!0)}addAll(t){let c=this.size;for(var v=0,x=t.length;v<x;v++)this.add(t[v]);return c!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}}const qs=class qs{constructor(t=0,c=0,v=0,x=0){G(this,"r");G(this,"g");G(this,"b");G(this,"a");this.r=t,this.g=c,this.b=v,this.a=x}set(t,c,v,x){return this.r=t,this.g=c,this.b=v,this.a=x,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t=t.charAt(0)=="#"?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=t.length!=8?1:parseInt(t.substr(6,2),16)/255,this}add(t,c,v,x){return this.r+=t,this.g+=c,this.b+=v,this.a+=x,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,c){t.r=((c&4278190080)>>>24)/255,t.g=((c&16711680)>>>16)/255,t.b=((c&65280)>>>8)/255,t.a=(c&255)/255}static rgb888ToColor(t,c){t.r=((c&16711680)>>>16)/255,t.g=((c&65280)>>>8)/255,t.b=(c&255)/255}toRgb888(){const t=c=>("0"+(c*255).toString(16)).slice(-2);return+("0x"+t(this.r)+t(this.g)+t(this.b))}static fromString(t,c=new qs){return c.setFromString(t)}};G(qs,"WHITE",new qs(1,1,1,1)),G(qs,"RED",new qs(1,0,0,1)),G(qs,"GREEN",new qs(0,1,0,1)),G(qs,"BLUE",new qs(0,0,1,1)),G(qs,"MAGENTA",new qs(1,0,1,1));let Vt=qs;const Qi=class Qi{static clamp(t,c,v){return t<c?c:t>v?v:t}static cosDeg(t){return Math.cos(t*Qi.degRad)}static sinDeg(t){return Math.sin(t*Qi.degRad)}static atan2Deg(t,c){return Math.atan2(t,c)*Qi.degRad}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let c=Math.pow(Math.abs(t),.3333333333333333);return t<0?-c:c}static randomTriangular(t,c){return Qi.randomTriangularWith(t,c,(t+c)*.5)}static randomTriangularWith(t,c,v){let x=Math.random(),b=c-t;return x<=(v-t)/b?t+Math.sqrt(x*b*(v-t)):c-Math.sqrt((1-x)*b*(c-v))}static isPowerOfTwo(t){return t&&(t&t-1)===0}};G(Qi,"PI",3.1415927),G(Qi,"PI2",Qi.PI*2),G(Qi,"invPI2",1/Qi.PI2),G(Qi,"radiansToDegrees",180/Qi.PI),G(Qi,"radDeg",Qi.radiansToDegrees),G(Qi,"degreesToRadians",Qi.PI/180),G(Qi,"degRad",Qi.degreesToRadians);let Ge=Qi;const ar=class ar{static arrayCopy(t,c,v,x,b){for(let h=c,w=x;h<c+b;h++,w++)v[w]=t[h]}static arrayFill(t,c,v,x){for(let b=c;b<v;b++)t[b]=x}static setArraySize(t,c,v=0){let x=t.length;if(x==c)return t;if(t.length=c,x<c)for(let b=x;b<c;b++)t[b]=v;return t}static ensureArrayCapacity(t,c,v=0){return t.length>=c?t:ar.setArraySize(t,c,v)}static newArray(t,c){let v=new Array(t);for(let x=0;x<t;x++)v[x]=c;return v}static newFloatArray(t){if(ar.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let c=new Array(t);for(let v=0;v<c.length;v++)c[v]=0;return c}}static newShortArray(t){if(ar.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let c=new Array(t);for(let v=0;v<c.length;v++)c[v]=0;return c}}static toFloatArray(t){return ar.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return ar.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,c){}static contains(t,c,v=!0){for(var x=0;x<t.length;x++)if(t[x]==c)return!0;return!1}static enumValue(t,c){return t[c[0].toUpperCase()+c.slice(1)]}};G(ar,"SUPPORTS_TYPED_ARRAYS",typeof Float32Array<"u");let Ye=ar;class nc{constructor(t){G(this,"items",new Array);G(this,"instantiator");this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let c=0;c<t.length;c++)this.free(t[c])}clear(){this.items.length=0}}class Sl{constructor(t=0,c=0){G(this,"x");G(this,"y");this.x=t,this.y=c}set(t,c){return this.x=t,this.y=c,this}length(){let t=this.x,c=this.y;return Math.sqrt(t*t+c*c)}normalize(){let t=this.length();return t!=0&&(this.x/=t,this.y/=t),this}}class t8{constructor(){G(this,"maxDelta",.064);G(this,"framesPerSecond",0);G(this,"delta",0);G(this,"totalTime",0);G(this,"lastTime",Date.now()/1e3);G(this,"frameCount",0);G(this,"frameTime",0)}update(){let t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}class l2{constructor(t){G(this,"name");if(!t)throw new Error("name cannot be null.");this.name=t}}const dc=class dc extends l2{constructor(c){super(c);G(this,"id",dc.nextID++);G(this,"bones",null);G(this,"vertices",[]);G(this,"worldVerticesLength",0);G(this,"timelineAttachment",this)}computeWorldVertices(c,v,x,b,h,w){x=h+(x>>1)*w;let e=c.bone.skeleton,i=c.deform,u=this.vertices,n=this.bones;if(!n){i.length>0&&(u=i);let o=c.bone,d=o.worldX,l=o.worldY,f=o.a,m=o.b,g=o.c,p=o.d;for(let y=v,S=h;S<x;y+=2,S+=w){let C=u[y],A=u[y+1];b[S]=C*f+A*m+d,b[S+1]=C*g+A*p+l}return}let r=0,a=0;for(let o=0;o<v;o+=2){let d=n[r];r+=d+1,a+=d}let s=e.bones;if(i.length==0)for(let o=h,d=a*3;o<x;o+=w){let l=0,f=0,m=n[r++];for(m+=r;r<m;r++,d+=3){let g=s[n[r]],p=u[d],y=u[d+1],S=u[d+2];l+=(p*g.a+y*g.b+g.worldX)*S,f+=(p*g.c+y*g.d+g.worldY)*S}b[o]=l,b[o+1]=f}else{let o=i;for(let d=h,l=a*3,f=a<<1;d<x;d+=w){let m=0,g=0,p=n[r++];for(p+=r;r<p;r++,l+=3,f+=2){let y=s[n[r]],S=u[l]+o[f],C=u[l+1]+o[f+1],A=u[l+2];m+=(S*y.a+C*y.b+y.worldX)*A,g+=(S*y.c+C*y.d+y.worldY)*A}b[d]=m,b[d+1]=g}}}copyTo(c){this.bones?(c.bones=new Array(this.bones.length),Ye.arrayCopy(this.bones,0,c.bones,0,this.bones.length)):c.bones=null,this.vertices&&(c.vertices=Ye.newFloatArray(this.vertices.length),Ye.arrayCopy(this.vertices,0,c.vertices,0,this.vertices.length)),c.worldVerticesLength=this.worldVerticesLength,c.timelineAttachment=this.timelineAttachment}};G(dc,"nextID",0);let Ma=dc;const rl=class rl{constructor(t){G(this,"id",rl.nextID());G(this,"regions");G(this,"start",0);G(this,"digits",0);G(this,"setupIndex",0);this.regions=new Array(t)}copy(){let t=new rl(this.regions.length);return Ye.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,c){let v=t.sequenceIndex;v==-1&&(v=this.setupIndex),v>=this.regions.length&&(v=this.regions.length-1);let x=this.regions[v];c.region!=x&&(c.region=x,c.updateRegion())}getPath(t,c){let v=t,x=(this.start+c).toString();for(let b=this.digits-x.length;b>0;b--)v+="0";return v+=x,v}static nextID(){return rl._nextID++}};G(rl,"_nextID",0);let Yg=rl;var xs;(function(R){R[R.hold=0]="hold",R[R.once=1]="once",R[R.loop=2]="loop",R[R.pingpong=3]="pingpong",R[R.onceReverse=4]="onceReverse",R[R.loopReverse=5]="loopReverse",R[R.pingpongReverse=6]="pingpongReverse"})(xs||(xs={}));const h2=[xs.hold,xs.once,xs.loop,xs.pingpong,xs.onceReverse,xs.loopReverse,xs.pingpongReverse];class d2{constructor(t,c,v){G(this,"name");G(this,"timelines",[]);G(this,"timelineIds",new o2);G(this,"duration");if(!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(c),this.duration=v}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var c=0;c<t.length;c++)this.timelineIds.addAll(t[c].getPropertyIds())}hasTimeline(t){for(let c=0;c<t.length;c++)if(this.timelineIds.contains(t[c]))return!0;return!1}apply(t,c,v,x,b,h,w,e){if(!t)throw new Error("skeleton cannot be null.");x&&this.duration!=0&&(v%=this.duration,c>0&&(c%=this.duration));let i=this.timelines;for(let u=0,n=i.length;u<n;u++)i[u].apply(t,c,v,b,h,w,e)}}var Pe;(function(R){R[R.setup=0]="setup",R[R.first=1]="first",R[R.replace=2]="replace",R[R.add=3]="add"})(Pe||(Pe={}));var Ss;(function(R){R[R.mixIn=0]="mixIn",R[R.mixOut=1]="mixOut"})(Ss||(Ss={}));const Wt={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28};class Pi{constructor(t,c){G(this,"propertyIds");G(this,"frames");this.propertyIds=c,this.frames=Ye.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,c){let v=t.length;for(let x=1;x<v;x++)if(t[x]>c)return x-1;return v-1}static search(t,c,v){let x=t.length;for(let b=v;b<x;b+=v)if(t[b]>c)return b-v;return x-v}}class Wa extends Pi{constructor(c,v,x){super(c,x);G(this,"curves");this.curves=Ye.newFloatArray(c+v*18),this.curves[c-1]=1}setLinear(c){this.curves[c]=0}setStepped(c){this.curves[c]=1}shrink(c){let v=this.getFrameCount()+c*18;if(this.curves.length>v){let x=Ye.newFloatArray(v);Ye.arrayCopy(this.curves,0,x,0,v),this.curves=x}}setBezier(c,v,x,b,h,w,e,i,u,n,r){let a=this.curves,s=this.getFrameCount()+c*18;x==0&&(a[v]=2+s);let o=(b-w*2+i)*.03,d=(h-e*2+u)*.03,l=((w-i)*3-b+n)*.006,f=((e-u)*3-h+r)*.006,m=o*2+l,g=d*2+f,p=(w-b)*.3+o+l*.16666667,y=(e-h)*.3+d+f*.16666667,S=b+p,C=h+y;for(let A=s+18;s<A;s+=2)a[s]=S,a[s+1]=C,p+=m,y+=g,m+=l,g+=f,S+=p,C+=y}getBezierValue(c,v,x,b){let h=this.curves;if(h[b]>c){let u=this.frames[v],n=this.frames[v+x];return n+(c-u)/(h[b]-u)*(h[b+1]-n)}let w=b+18;for(b+=2;b<w;b+=2)if(h[b]>=c){let u=h[b-2],n=h[b-1];return n+(c-u)/(h[b]-u)*(h[b+1]-n)}v+=this.getFrameEntries();let e=h[w-2],i=h[w-1];return i+(c-e)/(this.frames[v]-e)*(this.frames[v+x]-i)}}class Ra extends Wa{constructor(t,c,v){super(t,c,[v])}getFrameEntries(){return 2}setFrame(t,c,v){t<<=1,this.frames[t]=c,this.frames[t+1]=v}getCurveValue(t){let c=this.frames,v=c.length-2;for(let b=2;b<=v;b+=2)if(c[b]>t){v=b-2;break}let x=this.curves[v>>1];switch(x){case 0:let b=c[v],h=c[v+1];return h+(t-b)/(c[v+2]-b)*(c[v+2+1]-h);case 1:return c[v+1]}return this.getBezierValue(t,v,1,x-2)}getRelativeValue(t,c,v,x,b){if(t<this.frames[0]){switch(v){case Pe.setup:return b;case Pe.first:return x+(b-x)*c}return x}let h=this.getCurveValue(t);switch(v){case Pe.setup:return b+h*c;case Pe.first:case Pe.replace:h+=b-x}return x+h*c}getAbsoluteValue(t,c,v,x,b){if(t<this.frames[0]){switch(v){case Pe.setup:return b;case Pe.first:return x+(b-x)*c}return x}let h=this.getCurveValue(t);return v==Pe.setup?b+(h-b)*c:x+(h-x)*c}getAbsoluteValue2(t,c,v,x,b,h){if(t<this.frames[0]){switch(v){case Pe.setup:return b;case Pe.first:return x+(b-x)*c}return x}return v==Pe.setup?b+(h-b)*c:x+(h-x)*c}getScaleValue(t,c,v,x,b,h){const w=this.frames;if(t<w[0]){switch(v){case Pe.setup:return h;case Pe.first:return b+(h-b)*c}return b}let e=this.getCurveValue(t)*h;if(c==1)return v==Pe.add?b+e-h:e;if(x==Ss.mixOut)switch(v){case Pe.setup:return h+(Math.abs(e)*Ge.signum(h)-h)*c;case Pe.first:case Pe.replace:return b+(Math.abs(e)*Ge.signum(b)-b)*c}else{let i=0;switch(v){case Pe.setup:return i=Math.abs(h)*Ge.signum(e),i+(e-i)*c;case Pe.first:case Pe.replace:return i=Math.abs(b)*Ge.signum(e),i+(e-i)*c}}return b+(e-h)*c}}class Ap extends Wa{constructor(t,c,v,x){super(t,c,[v,x])}getFrameEntries(){return 3}setFrame(t,c,v,x){t*=3,this.frames[t]=c,this.frames[t+1]=v,this.frames[t+2]=x}}class Xg extends Ra{constructor(c,v,x){super(c,v,Wt.rotate+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.rotation=this.getRelativeValue(x,h,w,i.rotation,i.data.rotation))}}class i8 extends Ap{constructor(c,v,x){super(c,v,Wt.x+"|"+x,Wt.y+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];if(!i.active)return;let u=this.frames;if(x<u[0]){switch(w){case Pe.setup:i.x=i.data.x,i.y=i.data.y;return;case Pe.first:i.x+=(i.data.x-i.x)*h,i.y+=(i.data.y-i.y)*h}return}let n=0,r=0,a=Pi.search(u,x,3),s=this.curves[a/3];switch(s){case 0:let o=u[a];n=u[a+1],r=u[a+2];let d=(x-o)/(u[a+3]-o);n+=(u[a+3+1]-n)*d,r+=(u[a+3+2]-r)*d;break;case 1:n=u[a+1],r=u[a+2];break;default:n=this.getBezierValue(x,a,1,s-2),r=this.getBezierValue(x,a,2,s+18-2)}switch(w){case Pe.setup:i.x=i.data.x+n*h,i.y=i.data.y+r*h;break;case Pe.first:case Pe.replace:i.x+=(i.data.x+n-i.x)*h,i.y+=(i.data.y+r-i.y)*h;break;case Pe.add:i.x+=n*h,i.y+=r*h}}}class s8 extends Ra{constructor(c,v,x){super(c,v,Wt.x+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.x=this.getRelativeValue(x,h,w,i.x,i.data.x))}}class a8 extends Ra{constructor(c,v,x){super(c,v,Wt.y+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.y=this.getRelativeValue(x,h,w,i.y,i.data.y))}}class n8 extends Ap{constructor(c,v,x){super(c,v,Wt.scaleX+"|"+x,Wt.scaleY+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];if(!i.active)return;let u=this.frames;if(x<u[0]){switch(w){case Pe.setup:i.scaleX=i.data.scaleX,i.scaleY=i.data.scaleY;return;case Pe.first:i.scaleX+=(i.data.scaleX-i.scaleX)*h,i.scaleY+=(i.data.scaleY-i.scaleY)*h}return}let n,r,a=Pi.search(u,x,3),s=this.curves[a/3];switch(s){case 0:let o=u[a];n=u[a+1],r=u[a+2];let d=(x-o)/(u[a+3]-o);n+=(u[a+3+1]-n)*d,r+=(u[a+3+2]-r)*d;break;case 1:n=u[a+1],r=u[a+2];break;default:n=this.getBezierValue(x,a,1,s-2),r=this.getBezierValue(x,a,2,s+18-2)}if(n*=i.data.scaleX,r*=i.data.scaleY,h==1)w==Pe.add?(i.scaleX+=n-i.data.scaleX,i.scaleY+=r-i.data.scaleY):(i.scaleX=n,i.scaleY=r);else{let o=0,d=0;if(e==Ss.mixOut)switch(w){case Pe.setup:o=i.data.scaleX,d=i.data.scaleY,i.scaleX=o+(Math.abs(n)*Ge.signum(o)-o)*h,i.scaleY=d+(Math.abs(r)*Ge.signum(d)-d)*h;break;case Pe.first:case Pe.replace:o=i.scaleX,d=i.scaleY,i.scaleX=o+(Math.abs(n)*Ge.signum(o)-o)*h,i.scaleY=d+(Math.abs(r)*Ge.signum(d)-d)*h;break;case Pe.add:i.scaleX+=(n-i.data.scaleX)*h,i.scaleY+=(r-i.data.scaleY)*h}else switch(w){case Pe.setup:o=Math.abs(i.data.scaleX)*Ge.signum(n),d=Math.abs(i.data.scaleY)*Ge.signum(r),i.scaleX=o+(n-o)*h,i.scaleY=d+(r-d)*h;break;case Pe.first:case Pe.replace:o=Math.abs(i.scaleX)*Ge.signum(n),d=Math.abs(i.scaleY)*Ge.signum(r),i.scaleX=o+(n-o)*h,i.scaleY=d+(r-d)*h;break;case Pe.add:i.scaleX+=(n-i.data.scaleX)*h,i.scaleY+=(r-i.data.scaleY)*h}}}}class r8 extends Ra{constructor(c,v,x){super(c,v,Wt.scaleX+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.scaleX=this.getScaleValue(x,h,w,e,i.scaleX,i.data.scaleX))}}class o8 extends Ra{constructor(c,v,x){super(c,v,Wt.scaleY+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.scaleY=this.getScaleValue(x,h,w,e,i.scaleY,i.data.scaleY))}}class l8 extends Ap{constructor(c,v,x){super(c,v,Wt.shearX+"|"+x,Wt.shearY+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];if(!i.active)return;let u=this.frames;if(x<u[0]){switch(w){case Pe.setup:i.shearX=i.data.shearX,i.shearY=i.data.shearY;return;case Pe.first:i.shearX+=(i.data.shearX-i.shearX)*h,i.shearY+=(i.data.shearY-i.shearY)*h}return}let n=0,r=0,a=Pi.search(u,x,3),s=this.curves[a/3];switch(s){case 0:let o=u[a];n=u[a+1],r=u[a+2];let d=(x-o)/(u[a+3]-o);n+=(u[a+3+1]-n)*d,r+=(u[a+3+2]-r)*d;break;case 1:n=u[a+1],r=u[a+2];break;default:n=this.getBezierValue(x,a,1,s-2),r=this.getBezierValue(x,a,2,s+18-2)}switch(w){case Pe.setup:i.shearX=i.data.shearX+n*h,i.shearY=i.data.shearY+r*h;break;case Pe.first:case Pe.replace:i.shearX+=(i.data.shearX+n-i.shearX)*h,i.shearY+=(i.data.shearY+r-i.shearY)*h;break;case Pe.add:i.shearX+=n*h,i.shearY+=r*h}}}class h8 extends Ra{constructor(c,v,x){super(c,v,Wt.shearX+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.shearX=this.getRelativeValue(x,h,w,i.shearX,i.data.shearX))}}class d8 extends Ra{constructor(c,v,x){super(c,v,Wt.shearY+"|"+x);G(this,"boneIndex",0);this.boneIndex=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];i.active&&(i.shearY=this.getRelativeValue(x,h,w,i.shearY,i.data.shearY))}}class u8 extends Pi{constructor(c,v){super(c,[Wt.inherit+"|"+v]);G(this,"boneIndex",0);this.boneIndex=v}getFrameEntries(){return 2}setFrame(c,v,x){c*=2,this.frames[c]=v,this.frames[c+1]=x}apply(c,v,x,b,h,w,e){let i=c.bones[this.boneIndex];if(!i.active)return;if(e==Ss.mixOut){w==Pe.setup&&(i.inherit=i.data.inherit);return}let u=this.frames;if(x<u[0]){(w==Pe.setup||w==Pe.first)&&(i.inherit=i.data.inherit);return}i.inherit=this.frames[Pi.search(u,x,2)+1]}}class c8 extends Wa{constructor(c,v,x){super(c,v,[Wt.rgb+"|"+x,Wt.alpha+"|"+x]);G(this,"slotIndex",0);this.slotIndex=x}getFrameEntries(){return 5}setFrame(c,v,x,b,h,w){c*=5,this.frames[c]=v,this.frames[c+1]=x,this.frames[c+2]=b,this.frames[c+3]=h,this.frames[c+4]=w}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=this.frames,n=i.color;if(x<u[0]){let f=i.data.color;switch(w){case Pe.setup:n.setFromColor(f);return;case Pe.first:n.add((f.r-n.r)*h,(f.g-n.g)*h,(f.b-n.b)*h,(f.a-n.a)*h)}return}let r=0,a=0,s=0,o=0,d=Pi.search(u,x,5),l=this.curves[d/5];switch(l){case 0:let f=u[d];r=u[d+1],a=u[d+2],s=u[d+3],o=u[d+4];let m=(x-f)/(u[d+5]-f);r+=(u[d+5+1]-r)*m,a+=(u[d+5+2]-a)*m,s+=(u[d+5+3]-s)*m,o+=(u[d+5+4]-o)*m;break;case 1:r=u[d+1],a=u[d+2],s=u[d+3],o=u[d+4];break;default:r=this.getBezierValue(x,d,1,l-2),a=this.getBezierValue(x,d,2,l+18-2),s=this.getBezierValue(x,d,3,l+18*2-2),o=this.getBezierValue(x,d,4,l+18*3-2)}h==1?n.set(r,a,s,o):(w==Pe.setup&&n.setFromColor(i.data.color),n.add((r-n.r)*h,(a-n.g)*h,(s-n.b)*h,(o-n.a)*h))}}class f8 extends Wa{constructor(c,v,x){super(c,v,[Wt.rgb+"|"+x]);G(this,"slotIndex",0);this.slotIndex=x}getFrameEntries(){return 4}setFrame(c,v,x,b,h){c<<=2,this.frames[c]=v,this.frames[c+1]=x,this.frames[c+2]=b,this.frames[c+3]=h}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=this.frames,n=i.color;if(x<u[0]){let l=i.data.color;switch(w){case Pe.setup:n.r=l.r,n.g=l.g,n.b=l.b;return;case Pe.first:n.r+=(l.r-n.r)*h,n.g+=(l.g-n.g)*h,n.b+=(l.b-n.b)*h}return}let r=0,a=0,s=0,o=Pi.search(u,x,4),d=this.curves[o>>2];switch(d){case 0:let l=u[o];r=u[o+1],a=u[o+2],s=u[o+3];let f=(x-l)/(u[o+4]-l);r+=(u[o+4+1]-r)*f,a+=(u[o+4+2]-a)*f,s+=(u[o+4+3]-s)*f;break;case 1:r=u[o+1],a=u[o+2],s=u[o+3];break;default:r=this.getBezierValue(x,o,1,d-2),a=this.getBezierValue(x,o,2,d+18-2),s=this.getBezierValue(x,o,3,d+18*2-2)}if(h==1)n.r=r,n.g=a,n.b=s;else{if(w==Pe.setup){let l=i.data.color;n.r=l.r,n.g=l.g,n.b=l.b}n.r+=(r-n.r)*h,n.g+=(a-n.g)*h,n.b+=(s-n.b)*h}}}class m8 extends Ra{constructor(c,v,x){super(c,v,Wt.alpha+"|"+x);G(this,"slotIndex",0);this.slotIndex=x}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=i.color;if(x<this.frames[0]){let r=i.data.color;switch(w){case Pe.setup:u.a=r.a;return;case Pe.first:u.a+=(r.a-u.a)*h}return}let n=this.getCurveValue(x);h==1?u.a=n:(w==Pe.setup&&(u.a=i.data.color.a),u.a+=(n-u.a)*h)}}class g8 extends Wa{constructor(c,v,x){super(c,v,[Wt.rgb+"|"+x,Wt.alpha+"|"+x,Wt.rgb2+"|"+x]);G(this,"slotIndex",0);this.slotIndex=x}getFrameEntries(){return 8}setFrame(c,v,x,b,h,w,e,i,u){c<<=3,this.frames[c]=v,this.frames[c+1]=x,this.frames[c+2]=b,this.frames[c+3]=h,this.frames[c+4]=w,this.frames[c+5]=e,this.frames[c+6]=i,this.frames[c+7]=u}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=this.frames,n=i.color,r=i.darkColor;if(x<u[0]){let y=i.data.color,S=i.data.darkColor;switch(w){case Pe.setup:n.setFromColor(y),r.r=S.r,r.g=S.g,r.b=S.b;return;case Pe.first:n.add((y.r-n.r)*h,(y.g-n.g)*h,(y.b-n.b)*h,(y.a-n.a)*h),r.r+=(S.r-r.r)*h,r.g+=(S.g-r.g)*h,r.b+=(S.b-r.b)*h}return}let a=0,s=0,o=0,d=0,l=0,f=0,m=0,g=Pi.search(u,x,8),p=this.curves[g>>3];switch(p){case 0:let y=u[g];a=u[g+1],s=u[g+2],o=u[g+3],d=u[g+4],l=u[g+5],f=u[g+6],m=u[g+7];let S=(x-y)/(u[g+8]-y);a+=(u[g+8+1]-a)*S,s+=(u[g+8+2]-s)*S,o+=(u[g+8+3]-o)*S,d+=(u[g+8+4]-d)*S,l+=(u[g+8+5]-l)*S,f+=(u[g+8+6]-f)*S,m+=(u[g+8+7]-m)*S;break;case 1:a=u[g+1],s=u[g+2],o=u[g+3],d=u[g+4],l=u[g+5],f=u[g+6],m=u[g+7];break;default:a=this.getBezierValue(x,g,1,p-2),s=this.getBezierValue(x,g,2,p+18-2),o=this.getBezierValue(x,g,3,p+18*2-2),d=this.getBezierValue(x,g,4,p+18*3-2),l=this.getBezierValue(x,g,5,p+18*4-2),f=this.getBezierValue(x,g,6,p+18*5-2),m=this.getBezierValue(x,g,7,p+18*6-2)}if(h==1)n.set(a,s,o,d),r.r=l,r.g=f,r.b=m;else{if(w==Pe.setup){n.setFromColor(i.data.color);let y=i.data.darkColor;r.r=y.r,r.g=y.g,r.b=y.b}n.add((a-n.r)*h,(s-n.g)*h,(o-n.b)*h,(d-n.a)*h),r.r+=(l-r.r)*h,r.g+=(f-r.g)*h,r.b+=(m-r.b)*h}}}class p8 extends Wa{constructor(c,v,x){super(c,v,[Wt.rgb+"|"+x,Wt.rgb2+"|"+x]);G(this,"slotIndex",0);this.slotIndex=x}getFrameEntries(){return 7}setFrame(c,v,x,b,h,w,e,i){c*=7,this.frames[c]=v,this.frames[c+1]=x,this.frames[c+2]=b,this.frames[c+3]=h,this.frames[c+4]=w,this.frames[c+5]=e,this.frames[c+6]=i}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=this.frames,n=i.color,r=i.darkColor;if(x<u[0]){let p=i.data.color,y=i.data.darkColor;switch(w){case Pe.setup:n.r=p.r,n.g=p.g,n.b=p.b,r.r=y.r,r.g=y.g,r.b=y.b;return;case Pe.first:n.r+=(p.r-n.r)*h,n.g+=(p.g-n.g)*h,n.b+=(p.b-n.b)*h,r.r+=(y.r-r.r)*h,r.g+=(y.g-r.g)*h,r.b+=(y.b-r.b)*h}return}let a=0,s=0,o=0,d=0,l=0,f=0,m=Pi.search(u,x,7),g=this.curves[m/7];switch(g){case 0:let p=u[m];a=u[m+1],s=u[m+2],o=u[m+3],d=u[m+4],l=u[m+5],f=u[m+6];let y=(x-p)/(u[m+7]-p);a+=(u[m+7+1]-a)*y,s+=(u[m+7+2]-s)*y,o+=(u[m+7+3]-o)*y,d+=(u[m+7+4]-d)*y,l+=(u[m+7+5]-l)*y,f+=(u[m+7+6]-f)*y;break;case 1:a=u[m+1],s=u[m+2],o=u[m+3],d=u[m+4],l=u[m+5],f=u[m+6];break;default:a=this.getBezierValue(x,m,1,g-2),s=this.getBezierValue(x,m,2,g+18-2),o=this.getBezierValue(x,m,3,g+18*2-2),d=this.getBezierValue(x,m,4,g+18*3-2),l=this.getBezierValue(x,m,5,g+18*4-2),f=this.getBezierValue(x,m,6,g+18*5-2)}if(h==1)n.r=a,n.g=s,n.b=o,r.r=d,r.g=l,r.b=f;else{if(w==Pe.setup){let p=i.data.color,y=i.data.darkColor;n.r=p.r,n.g=p.g,n.b=p.b,r.r=y.r,r.g=y.g,r.b=y.b}n.r+=(a-n.r)*h,n.g+=(s-n.g)*h,n.b+=(o-n.b)*h,r.r+=(d-r.r)*h,r.g+=(l-r.g)*h,r.b+=(f-r.b)*h}}}class kh extends Pi{constructor(c,v){super(c,[Wt.attachment+"|"+v]);G(this,"slotIndex",0);G(this,"attachmentNames");this.slotIndex=v,this.attachmentNames=new Array(c)}getFrameCount(){return this.frames.length}setFrame(c,v,x){this.frames[c]=v,this.attachmentNames[c]=x}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(i.bone.active){if(e==Ss.mixOut){w==Pe.setup&&this.setAttachment(c,i,i.data.attachmentName);return}if(x<this.frames[0]){(w==Pe.setup||w==Pe.first)&&this.setAttachment(c,i,i.data.attachmentName);return}this.setAttachment(c,i,this.attachmentNames[Pi.search1(this.frames,x)])}}setAttachment(c,v,x){v.setAttachment(x?c.getAttachment(this.slotIndex,x):null)}}class v8 extends Wa{constructor(c,v,x,b){super(c,v,[Wt.deform+"|"+x+"|"+b.id]);G(this,"slotIndex",0);G(this,"attachment");G(this,"vertices");this.slotIndex=x,this.attachment=b,this.vertices=new Array(c)}getFrameCount(){return this.frames.length}setFrame(c,v,x){this.frames[c]=v,this.vertices[c]=x}setBezier(c,v,x,b,h,w,e,i,u,n,r){let a=this.curves,s=this.getFrameCount()+c*18;x==0&&(a[v]=2+s);let o=(b-w*2+i)*.03,d=u*.03-e*.06,l=((w-i)*3-b+n)*.006,f=(e-u+.33333333)*.018,m=o*2+l,g=d*2+f,p=(w-b)*.3+o+l*.16666667,y=e*.3+d+f*.16666667,S=b+p,C=y;for(let A=s+18;s<A;s+=2)a[s]=S,a[s+1]=C,p+=m,y+=g,m+=l,g+=f,S+=p,C+=y}getCurvePercent(c,v){let x=this.curves,b=x[v];switch(b){case 0:let i=this.frames[v];return(c-i)/(this.frames[v+this.getFrameEntries()]-i);case 1:return 0}if(b-=2,x[b]>c){let i=this.frames[v];return x[b+1]*(c-i)/(x[b]-i)}let h=b+18;for(b+=2;b<h;b+=2)if(x[b]>=c){let i=x[b-2],u=x[b-1];return u+(c-i)/(x[b]-i)*(x[b+1]-u)}let w=x[h-2],e=x[h-1];return e+(1-e)*(c-w)/(this.frames[v+this.getFrameEntries()]-w)}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=i.getAttachment();if(!u||!(u instanceof Ma)||u.timelineAttachment!=this.attachment)return;let n=i.deform;n.length==0&&(w=Pe.setup);let r=this.vertices,a=r[0].length,s=this.frames;if(x<s[0]){switch(w){case Pe.setup:n.length=0;return;case Pe.first:if(h==1){n.length=0;return}n.length=a;let g=u;if(g.bones){h=1-h;for(var o=0;o<a;o++)n[o]*=h}else{let p=g.vertices;for(var o=0;o<a;o++)n[o]+=(p[o]-n[o])*h}}return}if(n.length=a,x>=s[s.length-1]){let g=r[s.length-1];if(h==1)if(w==Pe.add){let p=u;if(p.bones)for(let y=0;y<a;y++)n[y]+=g[y];else{let y=p.vertices;for(let S=0;S<a;S++)n[S]+=g[S]-y[S]}}else Ye.arrayCopy(g,0,n,0,a);else switch(w){case Pe.setup:{let y=u;if(y.bones)for(let S=0;S<a;S++)n[S]=g[S]*h;else{let S=y.vertices;for(let C=0;C<a;C++){let A=S[C];n[C]=A+(g[C]-A)*h}}break}case Pe.first:case Pe.replace:for(let y=0;y<a;y++)n[y]+=(g[y]-n[y])*h;break;case Pe.add:let p=u;if(p.bones)for(let y=0;y<a;y++)n[y]+=g[y]*h;else{let y=p.vertices;for(let S=0;S<a;S++)n[S]+=(g[S]-y[S])*h}}return}let d=Pi.search1(s,x),l=this.getCurvePercent(x,d),f=r[d],m=r[d+1];if(h==1)if(w==Pe.add){let g=u;if(g.bones)for(let p=0;p<a;p++){let y=f[p];n[p]+=y+(m[p]-y)*l}else{let p=g.vertices;for(let y=0;y<a;y++){let S=f[y];n[y]+=S+(m[y]-S)*l-p[y]}}}else for(let g=0;g<a;g++){let p=f[g];n[g]=p+(m[g]-p)*l}else switch(w){case Pe.setup:{let p=u;if(p.bones)for(let y=0;y<a;y++){let S=f[y];n[y]=(S+(m[y]-S)*l)*h}else{let y=p.vertices;for(let S=0;S<a;S++){let C=f[S],A=y[S];n[S]=A+(C+(m[S]-C)*l-A)*h}}break}case Pe.first:case Pe.replace:for(let p=0;p<a;p++){let y=f[p];n[p]+=(y+(m[p]-y)*l-n[p])*h}break;case Pe.add:let g=u;if(g.bones)for(let p=0;p<a;p++){let y=f[p];n[p]+=(y+(m[p]-y)*l)*h}else{let p=g.vertices;for(let y=0;y<a;y++){let S=f[y];n[y]+=(S+(m[y]-S)*l-p[y])*h}}}}}const uc=class uc extends Pi{constructor(c){super(c,uc.propertyIds);G(this,"events");this.events=new Array(c)}getFrameCount(){return this.frames.length}setFrame(c,v){this.frames[c]=v.time,this.events[c]=v}apply(c,v,x,b,h,w,e){if(!b)return;let i=this.frames,u=this.frames.length;if(v>x)this.apply(c,v,Number.MAX_VALUE,b,h,w,e),v=-1;else if(v>=i[u-1])return;if(x<i[0])return;let n=0;if(v<i[0])n=0;else{n=Pi.search1(i,v)+1;let r=i[n];for(;n>0&&i[n-1]==r;)n--}for(;n<u&&x>=i[n];n++)b.push(this.events[n])}};G(uc,"propertyIds",[""+Wt.event]);let rc=uc;const cc=class cc extends Pi{constructor(c){super(c,cc.propertyIds);G(this,"drawOrders");this.drawOrders=new Array(c)}getFrameCount(){return this.frames.length}setFrame(c,v,x){this.frames[c]=v,this.drawOrders[c]=x}apply(c,v,x,b,h,w,e){if(e==Ss.mixOut){w==Pe.setup&&Ye.arrayCopy(c.slots,0,c.drawOrder,0,c.slots.length);return}if(x<this.frames[0]){(w==Pe.setup||w==Pe.first)&&Ye.arrayCopy(c.slots,0,c.drawOrder,0,c.slots.length);return}let i=Pi.search1(this.frames,x),u=this.drawOrders[i];if(!u)Ye.arrayCopy(c.slots,0,c.drawOrder,0,c.slots.length);else{let n=c.drawOrder,r=c.slots;for(let a=0,s=u.length;a<s;a++)n[a]=r[u[a]]}}};G(cc,"propertyIds",[""+Wt.drawOrder]);let fl=cc;class y8 extends Wa{constructor(c,v,x){super(c,v,[Wt.ikConstraint+"|"+x]);G(this,"constraintIndex",0);this.constraintIndex=x}getFrameEntries(){return 6}setFrame(c,v,x,b,h,w,e){c*=6,this.frames[c]=v,this.frames[c+1]=x,this.frames[c+2]=b,this.frames[c+3]=h,this.frames[c+4]=w?1:0,this.frames[c+5]=e?1:0}apply(c,v,x,b,h,w,e){let i=c.ikConstraints[this.constraintIndex];if(!i.active)return;let u=this.frames;if(x<u[0]){switch(w){case Pe.setup:i.mix=i.data.mix,i.softness=i.data.softness,i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch;return;case Pe.first:i.mix+=(i.data.mix-i.mix)*h,i.softness+=(i.data.softness-i.softness)*h,i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch}return}let n=0,r=0,a=Pi.search(u,x,6),s=this.curves[a/6];switch(s){case 0:let o=u[a];n=u[a+1],r=u[a+2];let d=(x-o)/(u[a+6]-o);n+=(u[a+6+1]-n)*d,r+=(u[a+6+2]-r)*d;break;case 1:n=u[a+1],r=u[a+2];break;default:n=this.getBezierValue(x,a,1,s-2),r=this.getBezierValue(x,a,2,s+18-2)}w==Pe.setup?(i.mix=i.data.mix+(n-i.data.mix)*h,i.softness=i.data.softness+(r-i.data.softness)*h,e==Ss.mixOut?(i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch):(i.bendDirection=u[a+3],i.compress=u[a+4]!=0,i.stretch=u[a+5]!=0)):(i.mix+=(n-i.mix)*h,i.softness+=(r-i.softness)*h,e==Ss.mixIn&&(i.bendDirection=u[a+3],i.compress=u[a+4]!=0,i.stretch=u[a+5]!=0))}}class x8 extends Wa{constructor(c,v,x){super(c,v,[Wt.transformConstraint+"|"+x]);G(this,"constraintIndex",0);this.constraintIndex=x}getFrameEntries(){return 7}setFrame(c,v,x,b,h,w,e,i){let u=this.frames;c*=7,u[c]=v,u[c+1]=x,u[c+2]=b,u[c+3]=h,u[c+4]=w,u[c+5]=e,u[c+6]=i}apply(c,v,x,b,h,w,e){let i=c.transformConstraints[this.constraintIndex];if(!i.active)return;let u=this.frames;if(x<u[0]){let m=i.data;switch(w){case Pe.setup:i.mixRotate=m.mixRotate,i.mixX=m.mixX,i.mixY=m.mixY,i.mixScaleX=m.mixScaleX,i.mixScaleY=m.mixScaleY,i.mixShearY=m.mixShearY;return;case Pe.first:i.mixRotate+=(m.mixRotate-i.mixRotate)*h,i.mixX+=(m.mixX-i.mixX)*h,i.mixY+=(m.mixY-i.mixY)*h,i.mixScaleX+=(m.mixScaleX-i.mixScaleX)*h,i.mixScaleY+=(m.mixScaleY-i.mixScaleY)*h,i.mixShearY+=(m.mixShearY-i.mixShearY)*h}return}let n,r,a,s,o,d,l=Pi.search(u,x,7),f=this.curves[l/7];switch(f){case 0:let m=u[l];n=u[l+1],r=u[l+2],a=u[l+3],s=u[l+4],o=u[l+5],d=u[l+6];let g=(x-m)/(u[l+7]-m);n+=(u[l+7+1]-n)*g,r+=(u[l+7+2]-r)*g,a+=(u[l+7+3]-a)*g,s+=(u[l+7+4]-s)*g,o+=(u[l+7+5]-o)*g,d+=(u[l+7+6]-d)*g;break;case 1:n=u[l+1],r=u[l+2],a=u[l+3],s=u[l+4],o=u[l+5],d=u[l+6];break;default:n=this.getBezierValue(x,l,1,f-2),r=this.getBezierValue(x,l,2,f+18-2),a=this.getBezierValue(x,l,3,f+18*2-2),s=this.getBezierValue(x,l,4,f+18*3-2),o=this.getBezierValue(x,l,5,f+18*4-2),d=this.getBezierValue(x,l,6,f+18*5-2)}if(w==Pe.setup){let m=i.data;i.mixRotate=m.mixRotate+(n-m.mixRotate)*h,i.mixX=m.mixX+(r-m.mixX)*h,i.mixY=m.mixY+(a-m.mixY)*h,i.mixScaleX=m.mixScaleX+(s-m.mixScaleX)*h,i.mixScaleY=m.mixScaleY+(o-m.mixScaleY)*h,i.mixShearY=m.mixShearY+(d-m.mixShearY)*h}else i.mixRotate+=(n-i.mixRotate)*h,i.mixX+=(r-i.mixX)*h,i.mixY+=(a-i.mixY)*h,i.mixScaleX+=(s-i.mixScaleX)*h,i.mixScaleY+=(o-i.mixScaleY)*h,i.mixShearY+=(d-i.mixShearY)*h}}class w8 extends Ra{constructor(c,v,x){super(c,v,Wt.pathConstraintPosition+"|"+x);G(this,"constraintIndex",0);this.constraintIndex=x}apply(c,v,x,b,h,w,e){let i=c.pathConstraints[this.constraintIndex];i.active&&(i.position=this.getAbsoluteValue(x,h,w,i.position,i.data.position))}}class S8 extends Ra{constructor(c,v,x){super(c,v,Wt.pathConstraintSpacing+"|"+x);G(this,"constraintIndex",0);this.constraintIndex=x}apply(c,v,x,b,h,w,e){let i=c.pathConstraints[this.constraintIndex];i.active&&(i.spacing=this.getAbsoluteValue(x,h,w,i.spacing,i.data.spacing))}}class T8 extends Wa{constructor(c,v,x){super(c,v,[Wt.pathConstraintMix+"|"+x]);G(this,"constraintIndex",0);this.constraintIndex=x}getFrameEntries(){return 4}setFrame(c,v,x,b,h){let w=this.frames;c<<=2,w[c]=v,w[c+1]=x,w[c+2]=b,w[c+3]=h}apply(c,v,x,b,h,w,e){let i=c.pathConstraints[this.constraintIndex];if(!i.active)return;let u=this.frames;if(x<u[0]){switch(w){case Pe.setup:i.mixRotate=i.data.mixRotate,i.mixX=i.data.mixX,i.mixY=i.data.mixY;return;case Pe.first:i.mixRotate+=(i.data.mixRotate-i.mixRotate)*h,i.mixX+=(i.data.mixX-i.mixX)*h,i.mixY+=(i.data.mixY-i.mixY)*h}return}let n,r,a,s=Pi.search(u,x,4),o=this.curves[s>>2];switch(o){case 0:let d=u[s];n=u[s+1],r=u[s+2],a=u[s+3];let l=(x-d)/(u[s+4]-d);n+=(u[s+4+1]-n)*l,r+=(u[s+4+2]-r)*l,a+=(u[s+4+3]-a)*l;break;case 1:n=u[s+1],r=u[s+2],a=u[s+3];break;default:n=this.getBezierValue(x,s,1,o-2),r=this.getBezierValue(x,s,2,o+18-2),a=this.getBezierValue(x,s,3,o+18*2-2)}if(w==Pe.setup){let d=i.data;i.mixRotate=d.mixRotate+(n-d.mixRotate)*h,i.mixX=d.mixX+(r-d.mixX)*h,i.mixY=d.mixY+(a-d.mixY)*h}else i.mixRotate+=(n-i.mixRotate)*h,i.mixX+=(r-i.mixX)*h,i.mixY+=(a-i.mixY)*h}}class oo extends Ra{constructor(c,v,x,b){super(c,v,b+"|"+x);G(this,"constraintIndex",0);this.constraintIndex=x}apply(c,v,x,b,h,w,e){let i;if(this.constraintIndex==-1){const u=x>=this.frames[0]?this.getCurveValue(x):0;for(const n of c.physicsConstraints)n.active&&this.global(n.data)&&this.set(n,this.getAbsoluteValue2(x,h,w,this.get(n),this.setup(n),u))}else i=c.physicsConstraints[this.constraintIndex],i.active&&this.set(i,this.getAbsoluteValue(x,h,w,this.get(i),this.setup(i)))}}class C8 extends oo{constructor(t,c,v){super(t,c,v,Wt.physicsConstraintInertia)}setup(t){return t.data.inertia}get(t){return t.inertia}set(t,c){t.inertia=c}global(t){return t.inertiaGlobal}}class A8 extends oo{constructor(t,c,v){super(t,c,v,Wt.physicsConstraintStrength)}setup(t){return t.data.strength}get(t){return t.strength}set(t,c){t.strength=c}global(t){return t.strengthGlobal}}class b8 extends oo{constructor(t,c,v){super(t,c,v,Wt.physicsConstraintDamping)}setup(t){return t.data.damping}get(t){return t.damping}set(t,c){t.damping=c}global(t){return t.dampingGlobal}}class E8 extends oo{constructor(t,c,v){super(t,c,v,Wt.physicsConstraintMass)}setup(t){return 1/t.data.massInverse}get(t){return 1/t.massInverse}set(t,c){t.massInverse=1/c}global(t){return t.massGlobal}}class M8 extends oo{constructor(t,c,v){super(t,c,v,Wt.physicsConstraintWind)}setup(t){return t.data.wind}get(t){return t.wind}set(t,c){t.wind=c}global(t){return t.windGlobal}}class L8 extends oo{constructor(t,c,v){super(t,c,v,Wt.physicsConstraintGravity)}setup(t){return t.data.gravity}get(t){return t.gravity}set(t,c){t.gravity=c}global(t){return t.gravityGlobal}}class R8 extends oo{constructor(t,c,v){super(t,c,v,Wt.physicsConstraintMix)}setup(t){return t.data.mix}get(t){return t.mix}set(t,c){t.mix=c}global(t){return t.mixGlobal}}const fc=class fc extends Pi{constructor(c,v){super(c,fc.propertyIds);G(this,"constraintIndex");this.constraintIndex=v}getFrameCount(){return this.frames.length}setFrame(c,v){this.frames[c]=v}apply(c,v,x,b,h,w,e){let i;if(this.constraintIndex!=-1&&(i=c.physicsConstraints[this.constraintIndex],!i.active))return;const u=this.frames;if(v>x)this.apply(c,v,Number.MAX_VALUE,[],h,w,e),v=-1;else if(v>=u[u.length-1])return;if(!(x<u[0])&&(v<u[0]||x>=u[Pi.search1(u,v)+1]))if(i!=null)i.reset();else for(const n of c.physicsConstraints)n.active&&n.reset()}};G(fc,"propertyIds",[Wt.physicsConstraintReset.toString()]);let zg=fc;const fa=class fa extends Pi{constructor(c,v,x){super(c,[Wt.sequence+"|"+v+"|"+x.sequence.id]);G(this,"slotIndex");G(this,"attachment");this.slotIndex=v,this.attachment=x}getFrameEntries(){return fa.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(c,v,x,b,h){let w=this.frames;c*=fa.ENTRIES,w[c]=v,w[c+fa.MODE]=x|b<<4,w[c+fa.DELAY]=h}apply(c,v,x,b,h,w,e){let i=c.slots[this.slotIndex];if(!i.bone.active)return;let u=i.attachment,n=this.attachment;if(u!=n&&(!(u instanceof Ma)||u.timelineAttachment!=n))return;if(e==Ss.mixOut){w==Pe.setup&&(i.sequenceIndex=-1);return}let r=this.frames;if(x<r[0]){(w==Pe.setup||w==Pe.first)&&(i.sequenceIndex=-1);return}let a=Pi.search(r,x,fa.ENTRIES),s=r[a],o=r[a+fa.MODE],d=r[a+fa.DELAY];if(!this.attachment.sequence)return;let l=o>>4,f=this.attachment.sequence.regions.length,m=h2[o&15];if(m!=xs.hold)switch(l+=(x-s)/d+1e-5|0,m){case xs.once:l=Math.min(f-1,l);break;case xs.loop:l%=f;break;case xs.pingpong:{let g=(f<<1)-2;l=g==0?0:l%g,l>=f&&(l=g-l);break}case xs.onceReverse:l=Math.max(f-1-l,0);break;case xs.loopReverse:l=f-1-l%f;break;case xs.pingpongReverse:{let g=(f<<1)-2;l=g==0?0:(l+f-1)%g,l>=f&&(l=g-l)}}i.sequenceIndex=l}};G(fa,"ENTRIES",3),G(fa,"MODE",1),G(fa,"DELAY",2);let Wg=fa;const ol=class ol{constructor(t){G(this,"data");G(this,"tracks",new Array);G(this,"timeScale",1);G(this,"unkeyedState",0);G(this,"events",new Array);G(this,"listeners",new Array);G(this,"queue",new B8(this));G(this,"propertyIDs",new o2);G(this,"animationsChanged",!1);G(this,"trackEntryPool",new nc(()=>new P8));this.data=t}static emptyAnimation(){return ol._emptyAnimation}update(t){t*=this.timeScale;let c=this.tracks;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(!b)continue;b.animationLast=b.nextAnimationLast,b.trackLast=b.nextTrackLast;let h=t*b.timeScale;if(b.delay>0){if(b.delay-=h,b.delay>0)continue;h=-b.delay,b.delay=0}let w=b.next;if(w){let e=b.trackLast-w.delay;if(e>=0){for(w.delay=0,w.trackTime+=b.timeScale==0?0:(e/b.timeScale+t)*w.timeScale,b.trackTime+=h,this.setCurrent(v,w,!0);w.mixingFrom;)w.mixTime+=t,w=w.mixingFrom;continue}}else if(b.trackLast>=b.trackEnd&&!b.mixingFrom){c[v]=null,this.queue.end(b),this.clearNext(b);continue}if(b.mixingFrom&&this.updateMixingFrom(b,t)){let e=b.mixingFrom;for(b.mixingFrom=null,e&&(e.mixingTo=null);e;)this.queue.end(e),e=e.mixingFrom}b.trackTime+=h}this.queue.drain()}updateMixingFrom(t,c){let v=t.mixingFrom;if(!v)return!0;let x=this.updateMixingFrom(v,c);return v.animationLast=v.nextAnimationLast,v.trackLast=v.nextTrackLast,t.nextTrackLast!=-1&&t.mixTime>=t.mixDuration?((v.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=v.mixingFrom,v.mixingFrom!=null&&(v.mixingFrom.mixingTo=t),t.interruptAlpha=v.interruptAlpha,this.queue.end(v)),x):(v.trackTime+=c*v.timeScale,t.mixTime+=c,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let c=this.events,v=this.tracks,x=!1;for(let r=0,a=v.length;r<a;r++){let s=v[r];if(!s||s.delay>0)continue;x=!0;let o=r==0?Pe.first:s.mixBlend,d=s.alpha;s.mixingFrom?d*=this.applyMixingFrom(s,t,o):s.trackTime>=s.trackEnd&&!s.next&&(d=0);let l=d>=s.alphaAttachmentThreshold,f=s.animationLast,m=s.getAnimationTime(),g=m,p=c;s.reverse&&(g=s.animation.duration-g,p=null);let y=s.animation.timelines,S=y.length;if(r==0&&d==1||o==Pe.add){r==0&&(l=!0);for(let C=0;C<S;C++){var b=y[C];b instanceof kh?this.applyAttachmentTimeline(b,t,g,o,l):b.apply(t,f,g,p,d,o,Ss.mixIn)}}else{let C=s.timelineMode,A=s.shortestRotation,M=!A&&s.timelinesRotation.length!=S<<1;M&&(s.timelinesRotation.length=S<<1);for(let L=0;L<S;L++){let P=y[L],O=C[L]==pg?o:Pe.setup;!A&&P instanceof Xg?this.applyRotateTimeline(P,t,g,d,O,s.timelinesRotation,L<<1,M):P instanceof kh?this.applyAttachmentTimeline(P,t,g,o,l):P.apply(t,f,g,p,d,O,Ss.mixIn)}}this.queueEvents(s,m),c.length=0,s.nextAnimationLast=m,s.nextTrackLast=s.trackTime}for(var h=this.unkeyedState+H1,w=t.slots,e=0,i=t.slots.length;e<i;e++){var u=w[e];if(u.attachmentState==h){var n=u.data.attachmentName;u.setAttachment(n?t.getAttachment(u.data.index,n):null)}}return this.unkeyedState+=2,this.queue.drain(),x}applyMixingFrom(t,c,v){let x=t.mixingFrom;x.mixingFrom&&this.applyMixingFrom(x,c,v);let b=0;t.mixDuration==0?(b=1,v==Pe.first&&(v=Pe.setup)):(b=t.mixTime/t.mixDuration,b>1&&(b=1),v!=Pe.first&&(v=x.mixBlend));let h=b<x.mixAttachmentThreshold,w=b<x.mixDrawOrderThreshold,e=x.animation.timelines,i=e.length,u=x.alpha*t.interruptAlpha,n=u*(1-b),r=x.animationLast,a=x.getAnimationTime(),s=a,o=null;if(x.reverse?s=x.animation.duration-s:b<x.eventThreshold&&(o=this.events),v==Pe.add)for(let d=0;d<i;d++)e[d].apply(c,r,s,o,n,v,Ss.mixOut);else{let d=x.timelineMode,l=x.timelineHoldMix,f=x.shortestRotation,m=!f&&x.timelinesRotation.length!=i<<1;m&&(x.timelinesRotation.length=i<<1),x.totalAlpha=0;for(let g=0;g<i;g++){let p=e[g],y=Ss.mixOut,S,C=0;switch(d[g]){case pg:if(!w&&p instanceof fl)continue;S=v,C=n;break;case N1:S=Pe.setup,C=n;break;case G1:S=v,C=u;break;case vg:S=Pe.setup,C=u;break;default:S=Pe.setup;let A=l[g];C=u*Math.max(0,1-A.mixTime/A.mixDuration);break}x.totalAlpha+=C,!f&&p instanceof Xg?this.applyRotateTimeline(p,c,s,C,S,x.timelinesRotation,g<<1,m):p instanceof kh?this.applyAttachmentTimeline(p,c,s,S,h&&C>=x.alphaAttachmentThreshold):(w&&p instanceof fl&&S==Pe.setup&&(y=Ss.mixIn),p.apply(c,r,s,o,C,S,y))}}return t.mixDuration>0&&this.queueEvents(x,a),this.events.length=0,x.nextAnimationLast=a,x.nextTrackLast=x.trackTime,b}applyAttachmentTimeline(t,c,v,x,b){var h=c.slots[t.slotIndex];h.bone.active&&(v<t.frames[0]?(x==Pe.setup||x==Pe.first)&&this.setAttachment(c,h,h.data.attachmentName,b):this.setAttachment(c,h,t.attachmentNames[Pi.search1(t.frames,v)],b),h.attachmentState<=this.unkeyedState&&(h.attachmentState=this.unkeyedState+H1))}setAttachment(t,c,v,x){c.setAttachment(v?t.getAttachment(c.data.index,v):null),x&&(c.attachmentState=this.unkeyedState+F8)}applyRotateTimeline(t,c,v,x,b,h,w,e){if(e&&(h[w]=0),x==1){t.apply(c,0,v,null,1,b,Ss.mixIn);return}let i=c.bones[t.boneIndex];if(!i.active)return;let u=t.frames,n=0,r=0;if(v<u[0])switch(b){case Pe.setup:i.rotation=i.data.rotation;default:return;case Pe.first:n=i.rotation,r=i.data.rotation}else n=b==Pe.setup?i.data.rotation:i.rotation,r=i.data.rotation+t.getCurveValue(v);let a=0,s=r-n;if(s-=Math.ceil(s/360-.5)*360,s==0)a=h[w];else{let o=0,d=0;e?(o=0,d=s):(o=h[w],d=h[w+1]);let l=o-o%360;a=s+l;let f=s>=0,m=o>=0;Math.abs(d)<=90&&Ge.signum(d)!=Ge.signum(s)&&(Math.abs(o-l)>180?(a+=360*Ge.signum(o),m=f):l!=0?a-=360*Ge.signum(o):m=f),m!=f&&(a+=360*Ge.signum(o)),h[w]=a}h[w+1]=s,i.rotation=n+a*x}queueEvents(t,c){let v=t.animationStart,x=t.animationEnd,b=x-v,h=t.trackLast%b,w=this.events,e=0,i=w.length;for(;e<i;e++){let n=w[e];if(n.time<h)break;n.time>x||this.queue.event(t,n)}let u=!1;if(t.loop)if(b==0)u=!0;else{const n=Math.floor(t.trackTime/b);u=n>0&&n>Math.floor(t.trackLast/b)}else u=c>=x&&t.animationLast<x;for(u&&this.queue.complete(t);e<i;e++){let n=w[e];n.time<v||this.queue.event(t,n)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let c=0,v=this.tracks.length;c<v;c++)this.clearTrack(c);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let c=this.tracks[t];if(!c)return;this.queue.end(c),this.clearNext(c);let v=c;for(;;){let x=v.mixingFrom;if(!x)break;this.queue.end(x),v.mixingFrom=null,v.mixingTo=null,v=x}this.tracks[c.trackIndex]=null,this.queue.drain()}setCurrent(t,c,v){let x=this.expandToIndex(t);this.tracks[t]=c,c.previous=null,x&&(v&&this.queue.interrupt(x),c.mixingFrom=x,x.mixingTo=c,c.mixTime=0,x.mixingFrom&&x.mixDuration>0&&(c.interruptAlpha*=Math.min(1,x.mixTime/x.mixDuration)),x.timelinesRotation.length=0),this.queue.start(c)}setAnimation(t,c,v=!1){let x=this.data.skeletonData.findAnimation(c);if(!x)throw new Error("Animation not found: "+c);return this.setAnimationWith(t,x,v)}setAnimationWith(t,c,v=!1){if(!c)throw new Error("animation cannot be null.");let x=!0,b=this.expandToIndex(t);b&&(b.nextTrackLast==-1?(this.tracks[t]=b.mixingFrom,this.queue.interrupt(b),this.queue.end(b),this.clearNext(b),b=b.mixingFrom,x=!1):this.clearNext(b));let h=this.trackEntry(t,c,v,b);return this.setCurrent(t,h,x),this.queue.drain(),h}addAnimation(t,c,v=!1,x=0){let b=this.data.skeletonData.findAnimation(c);if(!b)throw new Error("Animation not found: "+c);return this.addAnimationWith(t,b,v,x)}addAnimationWith(t,c,v=!1,x=0){if(!c)throw new Error("animation cannot be null.");let b=this.expandToIndex(t);if(b)for(;b.next;)b=b.next;let h=this.trackEntry(t,c,v,b);return b?(b.next=h,h.previous=b,x<=0&&(x=Math.max(x+b.getTrackComplete()-h.mixDuration,0))):(this.setCurrent(t,h,!0),this.queue.drain(),x<0&&(x=0)),h.delay=x,h}setEmptyAnimation(t,c=0){let v=this.setAnimationWith(t,ol.emptyAnimation(),!1);return v.mixDuration=c,v.trackEnd=c,v}addEmptyAnimation(t,c=0,v=0){let x=this.addAnimationWith(t,ol.emptyAnimation(),!1,v);return v<=0&&(x.delay=Math.max(x.delay+x.mixDuration-c,0)),x.mixDuration=c,x.trackEnd=c,x}setEmptyAnimations(t=0){let c=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let v=0,x=this.tracks.length;v<x;v++){let b=this.tracks[v];b&&this.setEmptyAnimation(b.trackIndex,t)}this.queue.drainDisabled=c,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(Ye.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,c,v,x){let b=this.trackEntryPool.obtain();return b.reset(),b.trackIndex=t,b.animation=c,b.loop=v,b.holdPrevious=!1,b.reverse=!1,b.shortestRotation=!1,b.eventThreshold=0,b.alphaAttachmentThreshold=0,b.mixAttachmentThreshold=0,b.mixDrawOrderThreshold=0,b.animationStart=0,b.animationEnd=c.duration,b.animationLast=-1,b.nextAnimationLast=-1,b.delay=0,b.trackTime=0,b.trackLast=-1,b.nextTrackLast=-1,b.trackEnd=Number.MAX_VALUE,b.timeScale=1,b.alpha=1,b.mixTime=0,b.mixDuration=x?this.data.getMix(x.animation,c):0,b.interruptAlpha=1,b.totalAlpha=0,b.mixBlend=Pe.replace,b}clearNext(t){let c=t.next;for(;c;)this.queue.dispose(c),c=c.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let c=0,v=t.length;c<v;c++){let x=t[c];if(x){for(;x.mixingFrom;)x=x.mixingFrom;do(!x.mixingTo||x.mixBlend!=Pe.add)&&this.computeHold(x),x=x.mixingTo;while(x)}}}computeHold(t){let c=t.mixingTo,v=t.animation.timelines,x=t.animation.timelines.length,b=t.timelineMode;b.length=x;let h=t.timelineHoldMix;h.length=0;let w=this.propertyIDs;if(c&&c.holdPrevious){for(let e=0;e<x;e++)b[e]=w.addAll(v[e].getPropertyIds())?vg:G1;return}e:for(let e=0;e<x;e++){let i=v[e],u=i.getPropertyIds();if(!w.addAll(u))b[e]=pg;else if(!c||i instanceof kh||i instanceof fl||i instanceof rc||!c.animation.hasTimeline(u))b[e]=N1;else{for(let n=c.mixingTo;n;n=n.mixingTo)if(!n.animation.hasTimeline(u)){if(t.mixDuration>0){b[e]=D8,h[e]=n;continue e}break}b[e]=vg}}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let c=this.listeners.indexOf(t);c>=0&&this.listeners.splice(c,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}};G(ol,"_emptyAnimation",new d2("<empty>",[],0));let jg=ol;class P8{constructor(){G(this,"animation",null);G(this,"previous",null);G(this,"next",null);G(this,"mixingFrom",null);G(this,"mixingTo",null);G(this,"listener",null);G(this,"trackIndex",0);G(this,"loop",!1);G(this,"holdPrevious",!1);G(this,"reverse",!1);G(this,"shortestRotation",!1);G(this,"eventThreshold",0);G(this,"mixAttachmentThreshold",0);G(this,"alphaAttachmentThreshold",0);G(this,"mixDrawOrderThreshold",0);G(this,"animationStart",0);G(this,"animationEnd",0);G(this,"animationLast",0);G(this,"nextAnimationLast",0);G(this,"delay",0);G(this,"trackTime",0);G(this,"trackLast",0);G(this,"nextTrackLast",0);G(this,"trackEnd",0);G(this,"timeScale",0);G(this,"alpha",0);G(this,"mixTime",0);G(this,"_mixDuration",0);G(this,"interruptAlpha",0);G(this,"totalAlpha",0);G(this,"mixBlend",Pe.replace);G(this,"timelineMode",new Array);G(this,"timelineHoldMix",new Array);G(this,"timelinesRotation",new Array)}get mixDuration(){return this._mixDuration}set mixDuration(t){this._mixDuration=t}setMixDurationWithDelay(t,c){this._mixDuration=t,c<=0&&(this.previous!=null?c=Math.max(c+this.previous.getTrackComplete()-t,0):c=0),this.delay=c}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(t!=0){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}wasApplied(){return this.nextTrackLast!=-1}isNextReady(){return this.next!=null&&this.nextTrackLast-this.next.delay>=0}}class B8{constructor(t){G(this,"objects",[]);G(this,"drainDisabled",!1);G(this,"animState");this.animState=t}start(t){this.objects.push(Gs.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(Gs.interrupt),this.objects.push(t)}end(t){this.objects.push(Gs.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(Gs.dispose),this.objects.push(t)}complete(t){this.objects.push(Gs.complete),this.objects.push(t)}event(t,c){this.objects.push(Gs.event),this.objects.push(t),this.objects.push(c)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,c=this.animState.listeners;for(let v=0;v<t.length;v+=2){let x=t[v],b=t[v+1];switch(x){case Gs.start:b.listener&&b.listener.start&&b.listener.start(b);for(let w=0;w<c.length;w++){let e=c[w];e.start&&e.start(b)}break;case Gs.interrupt:b.listener&&b.listener.interrupt&&b.listener.interrupt(b);for(let w=0;w<c.length;w++){let e=c[w];e.interrupt&&e.interrupt(b)}break;case Gs.end:b.listener&&b.listener.end&&b.listener.end(b);for(let w=0;w<c.length;w++){let e=c[w];e.end&&e.end(b)}case Gs.dispose:b.listener&&b.listener.dispose&&b.listener.dispose(b);for(let w=0;w<c.length;w++){let e=c[w];e.dispose&&e.dispose(b)}this.animState.trackEntryPool.free(b);break;case Gs.complete:b.listener&&b.listener.complete&&b.listener.complete(b);for(let w=0;w<c.length;w++){let e=c[w];e.complete&&e.complete(b)}break;case Gs.event:let h=t[v+++2];b.listener&&b.listener.event&&b.listener.event(b,h);for(let w=0;w<c.length;w++){let e=c[w];e.event&&e.event(b,h)}break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var Gs;(function(R){R[R.start=0]="start",R[R.interrupt=1]="interrupt",R[R.end=2]="end",R[R.dispose=3]="dispose",R[R.complete=4]="complete",R[R.event=5]="event"})(Gs||(Gs={}));const pg=0,N1=1,G1=2,vg=3,D8=4,H1=1,F8=2;class I8{constructor(t){G(this,"skeletonData");G(this,"animationToMixTime",{});G(this,"defaultMix",0);if(!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,c,v){let x=this.skeletonData.findAnimation(t);if(!x)throw new Error("Animation not found: "+t);let b=this.skeletonData.findAnimation(c);if(!b)throw new Error("Animation not found: "+c);this.setMixWith(x,b,v)}setMixWith(t,c,v){if(!t)throw new Error("from cannot be null.");if(!c)throw new Error("to cannot be null.");let x=t.name+"."+c.name;this.animationToMixTime[x]=v}getMix(t,c){let v=t.name+"."+c.name,x=this.animationToMixTime[v];return x===void 0?this.defaultMix:x}}class Rc extends Ma{constructor(c){super(c);G(this,"color",new Vt(1,1,1,1))}copy(){let c=new Rc(this.name);return this.copyTo(c),c.color.setFromColor(this.color),c}}class Rl extends Ma{constructor(c){super(c);G(this,"endSlot",null);G(this,"color",new Vt(.2275,.2275,.8078,1))}copy(){let c=new Rl(this.name);return this.copyTo(c),c.endSlot=this.endSlot,c.color.setFromColor(this.color),c}}class O8{constructor(t){G(this,"_image");this._image=t}getImage(){return this._image}}var Zi;(function(R){R[R.Nearest=9728]="Nearest",R[R.Linear=9729]="Linear",R[R.MipMap=9987]="MipMap",R[R.MipMapNearestNearest=9984]="MipMapNearestNearest",R[R.MipMapLinearNearest=9985]="MipMapLinearNearest",R[R.MipMapNearestLinear=9986]="MipMapNearestLinear",R[R.MipMapLinearLinear=9987]="MipMapLinearLinear"})(Zi||(Zi={}));var Tl;(function(R){R[R.MirroredRepeat=33648]="MirroredRepeat",R[R.ClampToEdge=33071]="ClampToEdge",R[R.Repeat=10497]="Repeat"})(Tl||(Tl={}));class u2{constructor(){G(this,"texture");G(this,"u",0);G(this,"v",0);G(this,"u2",0);G(this,"v2",0);G(this,"width",0);G(this,"height",0);G(this,"degrees",0);G(this,"offsetX",0);G(this,"offsetY",0);G(this,"originalWidth",0);G(this,"originalHeight",0)}}class k1{constructor(t){G(this,"pages",new Array);G(this,"regions",new Array);let c=new N8(t),v=new Array(4),x={};x.size=u=>{u.width=parseInt(v[1]),u.height=parseInt(v[2])},x.format=()=>{},x.filter=u=>{u.minFilter=Ye.enumValue(Zi,v[1]),u.magFilter=Ye.enumValue(Zi,v[2])},x.repeat=u=>{v[1].indexOf("x")!=-1&&(u.uWrap=Tl.Repeat),v[1].indexOf("y")!=-1&&(u.vWrap=Tl.Repeat)},x.pma=u=>{u.pma=v[1]=="true"};var b={};b.xy=u=>{u.x=parseInt(v[1]),u.y=parseInt(v[2])},b.size=u=>{u.width=parseInt(v[1]),u.height=parseInt(v[2])},b.bounds=u=>{u.x=parseInt(v[1]),u.y=parseInt(v[2]),u.width=parseInt(v[3]),u.height=parseInt(v[4])},b.offset=u=>{u.offsetX=parseInt(v[1]),u.offsetY=parseInt(v[2])},b.orig=u=>{u.originalWidth=parseInt(v[1]),u.originalHeight=parseInt(v[2])},b.offsets=u=>{u.offsetX=parseInt(v[1]),u.offsetY=parseInt(v[2]),u.originalWidth=parseInt(v[3]),u.originalHeight=parseInt(v[4])},b.rotate=u=>{let n=v[1];n=="true"?u.degrees=90:n!="false"&&(u.degrees=parseInt(n))},b.index=u=>{u.index=parseInt(v[1])};let h=c.readLine();for(;h&&h.trim().length==0;)h=c.readLine();for(;!(!h||h.trim().length==0||c.readEntry(v,h)==0);)h=c.readLine();let w=null,e=null,i=null;for(;h!==null;)if(h.trim().length==0)w=null,h=c.readLine();else if(w){let u=new c2(w,h);for(;;){let n=c.readEntry(v,h=c.readLine());if(n==0)break;let r=b[v[0]];if(r)r(u);else{e||(e=[]),i||(i=[]),e.push(v[0]);let a=[];for(let s=0;s<n;s++)a.push(parseInt(v[s+1]));i.push(a)}}u.originalWidth==0&&u.originalHeight==0&&(u.originalWidth=u.width,u.originalHeight=u.height),e&&e.length>0&&i&&i.length>0&&(u.names=e,u.values=i,e=null,i=null),u.u=u.x/w.width,u.v=u.y/w.height,u.degrees==90?(u.u2=(u.x+u.height)/w.width,u.v2=(u.y+u.width)/w.height):(u.u2=(u.x+u.width)/w.width,u.v2=(u.y+u.height)/w.height),this.regions.push(u)}else{for(w=new G8(h.trim());c.readEntry(v,h=c.readLine())!=0;){let u=x[v[0]];u&&u(w)}this.pages.push(w)}}findRegion(t){for(let c=0;c<this.regions.length;c++)if(this.regions[c].name==t)return this.regions[c];return null}setTextures(t,c=""){for(let v of this.pages)v.setTexture(t.get(c+v.name))}dispose(){var t;for(let c=0;c<this.pages.length;c++)(t=this.pages[c].texture)==null||t.dispose()}}class N8{constructor(t){G(this,"lines");G(this,"index",0);this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,c){if(!c||(c=c.trim(),c.length==0))return 0;let v=c.indexOf(":");if(v==-1)return 0;t[0]=c.substr(0,v).trim();for(let x=1,b=v+1;;x++){let h=c.indexOf(",",b);if(h==-1)return t[x]=c.substr(b).trim(),x;if(t[x]=c.substr(b,h-b).trim(),b=h+1,x==4)return 4}}}class G8{constructor(t){G(this,"name");G(this,"minFilter",Zi.Nearest);G(this,"magFilter",Zi.Nearest);G(this,"uWrap",Tl.ClampToEdge);G(this,"vWrap",Tl.ClampToEdge);G(this,"texture",null);G(this,"width",0);G(this,"height",0);G(this,"pma",!1);G(this,"regions",new Array);this.name=t}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);for(let c of this.regions)c.texture=t}}class c2 extends u2{constructor(c,v){super();G(this,"page");G(this,"name");G(this,"x",0);G(this,"y",0);G(this,"offsetX",0);G(this,"offsetY",0);G(this,"originalWidth",0);G(this,"originalHeight",0);G(this,"index",0);G(this,"degrees",0);G(this,"names",null);G(this,"values",null);this.page=c,this.name=v,c.regions.push(this)}}class fr extends Ma{constructor(c,v){super(c);G(this,"region",null);G(this,"path");G(this,"regionUVs",[]);G(this,"uvs",[]);G(this,"triangles",[]);G(this,"color",new Vt(1,1,1,1));G(this,"width",0);G(this,"height",0);G(this,"hullLength",0);G(this,"edges",[]);G(this,"parentMesh",null);G(this,"sequence",null);G(this,"tempColor",new Vt(0,0,0,0));this.path=v}updateRegion(){if(!this.region)throw new Error("Region not set.");let c=this.regionUVs;(!this.uvs||this.uvs.length!=c.length)&&(this.uvs=Ye.newFloatArray(c.length));let v=this.uvs,x=this.uvs.length,b=this.region.u,h=this.region.v,w=0,e=0;if(this.region instanceof c2){let i=this.region,u=i.page,n=u.width,r=u.height;switch(i.degrees){case 90:b-=(i.originalHeight-i.offsetY-i.height)/n,h-=(i.originalWidth-i.offsetX-i.width)/r,w=i.originalHeight/n,e=i.originalWidth/r;for(let a=0;a<x;a+=2)v[a]=b+c[a+1]*w,v[a+1]=h+(1-c[a])*e;return;case 180:b-=(i.originalWidth-i.offsetX-i.width)/n,h-=i.offsetY/r,w=i.originalWidth/n,e=i.originalHeight/r;for(let a=0;a<x;a+=2)v[a]=b+(1-c[a])*w,v[a+1]=h+(1-c[a+1])*e;return;case 270:b-=i.offsetY/n,h-=i.offsetX/r,w=i.originalHeight/n,e=i.originalWidth/r;for(let a=0;a<x;a+=2)v[a]=b+(1-c[a+1])*w,v[a+1]=h+c[a]*e;return}b-=i.offsetX/n,h-=(i.originalHeight-i.offsetY-i.height)/r,w=i.originalWidth/n,e=i.originalHeight/r}else this.region?(w=this.region.u2-b,e=this.region.v2-h):(b=h=0,w=e=1);for(let i=0;i<x;i+=2)v[i]=b+c[i]*w,v[i+1]=h+c[i+1]*e}getParentMesh(){return this.parentMesh}setParentMesh(c){this.parentMesh=c,c&&(this.bones=c.bones,this.vertices=c.vertices,this.worldVerticesLength=c.worldVerticesLength,this.regionUVs=c.regionUVs,this.triangles=c.triangles,this.hullLength=c.hullLength,this.worldVerticesLength=c.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let c=new fr(this.name,this.path);return c.region=this.region,c.color.setFromColor(this.color),this.copyTo(c),c.regionUVs=new Array(this.regionUVs.length),Ye.arrayCopy(this.regionUVs,0,c.regionUVs,0,this.regionUVs.length),c.uvs=this.uvs instanceof Float32Array?Ye.newFloatArray(this.uvs.length):new Array(this.uvs.length),Ye.arrayCopy(this.uvs,0,c.uvs,0,this.uvs.length),c.triangles=new Array(this.triangles.length),Ye.arrayCopy(this.triangles,0,c.triangles,0,this.triangles.length),c.hullLength=this.hullLength,c.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(c.edges=new Array(this.edges.length),Ye.arrayCopy(this.edges,0,c.edges,0,this.edges.length)),c.width=this.width,c.height=this.height,c}computeWorldVertices(c,v,x,b,h,w){this.sequence!=null&&this.sequence.apply(c,this),super.computeWorldVertices(c,v,x,b,h,w)}newLinkedMesh(){let c=new fr(this.name,this.path);return c.region=this.region,c.color.setFromColor(this.color),c.timelineAttachment=this.timelineAttachment,c.setParentMesh(this.parentMesh?this.parentMesh:this),c.region!=null&&c.updateRegion(),c}}class to extends Ma{constructor(c){super(c);G(this,"lengths",[]);G(this,"closed",!1);G(this,"constantSpeed",!1);G(this,"color",new Vt(1,1,1,1))}copy(){let c=new to(this.name);return this.copyTo(c),c.lengths=new Array(this.lengths.length),Ye.arrayCopy(this.lengths,0,c.lengths,0,this.lengths.length),c.closed=closed,c.constantSpeed=this.constantSpeed,c.color.setFromColor(this.color),c}}class bp extends Ma{constructor(c){super(c);G(this,"x",0);G(this,"y",0);G(this,"rotation",0);G(this,"color",new Vt(.38,.94,0,1))}computeWorldPosition(c,v){return v.x=this.x*c.a+this.y*c.b+c.worldX,v.y=this.x*c.c+this.y*c.d+c.worldY,v}computeWorldRotation(c){const v=this.rotation*Ge.degRad,x=Math.cos(v),b=Math.sin(v),h=x*c.a+b*c.b,w=x*c.c+b*c.d;return Ge.atan2Deg(w,h)}copy(){let c=new bp(this.name);return c.x=this.x,c.y=this.y,c.rotation=this.rotation,c.color.setFromColor(this.color),c}}const ni=class ni extends l2{constructor(c,v){super(c);G(this,"x",0);G(this,"y",0);G(this,"scaleX",1);G(this,"scaleY",1);G(this,"rotation",0);G(this,"width",0);G(this,"height",0);G(this,"color",new Vt(1,1,1,1));G(this,"path");G(this,"region",null);G(this,"sequence",null);G(this,"offset",Ye.newFloatArray(8));G(this,"uvs",Ye.newFloatArray(8));G(this,"tempColor",new Vt(1,1,1,1));this.path=v}updateRegion(){if(!this.region)throw new Error("Region not set.");let c=this.region,v=this.uvs;if(c==null){v[0]=0,v[1]=0,v[2]=0,v[3]=1,v[4]=1,v[5]=1,v[6]=1,v[7]=0;return}let x=this.width/this.region.originalWidth*this.scaleX,b=this.height/this.region.originalHeight*this.scaleY,h=-this.width/2*this.scaleX+this.region.offsetX*x,w=-this.height/2*this.scaleY+this.region.offsetY*b,e=h+this.region.width*x,i=w+this.region.height*b,u=this.rotation*Ge.degRad,n=Math.cos(u),r=Math.sin(u),a=this.x,s=this.y,o=h*n+a,d=h*r,l=w*n+s,f=w*r,m=e*n+a,g=e*r,p=i*n+s,y=i*r,S=this.offset;S[0]=o-f,S[1]=l+d,S[2]=o-y,S[3]=p+d,S[4]=m-y,S[5]=p+g,S[6]=m-f,S[7]=l+g,c.degrees==90?(v[0]=c.u2,v[1]=c.v2,v[2]=c.u,v[3]=c.v2,v[4]=c.u,v[5]=c.v,v[6]=c.u2,v[7]=c.v):(v[0]=c.u,v[1]=c.v2,v[2]=c.u,v[3]=c.v,v[4]=c.u2,v[5]=c.v,v[6]=c.u2,v[7]=c.v2)}computeWorldVertices(c,v,x,b){this.sequence!=null&&this.sequence.apply(c,this);let h=c.bone,w=this.offset,e=h.worldX,i=h.worldY,u=h.a,n=h.b,r=h.c,a=h.d,s=0,o=0;s=w[0],o=w[1],v[x]=s*u+o*n+e,v[x+1]=s*r+o*a+i,x+=b,s=w[2],o=w[3],v[x]=s*u+o*n+e,v[x+1]=s*r+o*a+i,x+=b,s=w[4],o=w[5],v[x]=s*u+o*n+e,v[x+1]=s*r+o*a+i,x+=b,s=w[6],o=w[7],v[x]=s*u+o*n+e,v[x+1]=s*r+o*a+i}copy(){let c=new ni(this.name,this.path);return c.region=this.region,c.x=this.x,c.y=this.y,c.scaleX=this.scaleX,c.scaleY=this.scaleY,c.rotation=this.rotation,c.width=this.width,c.height=this.height,Ye.arrayCopy(this.uvs,0,c.uvs,0,8),Ye.arrayCopy(this.offset,0,c.offset,0,8),c.color.setFromColor(this.color),c.sequence=this.sequence!=null?this.sequence.copy():null,c}};G(ni,"X1",0),G(ni,"Y1",1),G(ni,"C1R",2),G(ni,"C1G",3),G(ni,"C1B",4),G(ni,"C1A",5),G(ni,"U1",6),G(ni,"V1",7),G(ni,"X2",8),G(ni,"Y2",9),G(ni,"C2R",10),G(ni,"C2G",11),G(ni,"C2B",12),G(ni,"C2A",13),G(ni,"U2",14),G(ni,"V2",15),G(ni,"X3",16),G(ni,"Y3",17),G(ni,"C3R",18),G(ni,"C3G",19),G(ni,"C3B",20),G(ni,"C3A",21),G(ni,"U3",22),G(ni,"V3",23),G(ni,"X4",24),G(ni,"Y4",25),G(ni,"C4R",26),G(ni,"C4G",27),G(ni,"C4B",28),G(ni,"C4A",29),G(ni,"U4",30),G(ni,"V4",31);let Cl=ni;class H8{constructor(t){G(this,"atlas");this.atlas=t}loadSequence(t,c,v){let x=v.regions;for(let b=0,h=x.length;b<h;b++){let w=v.getPath(c,b),e=this.atlas.findRegion(w);if(e==null)throw new Error("Region not found in atlas: "+w+" (sequence: "+t+")");x[b]=e}}newRegionAttachment(t,c,v,x){let b=new Cl(c,v);if(x!=null)this.loadSequence(c,v,x);else{let h=this.atlas.findRegion(v);if(!h)throw new Error("Region not found in atlas: "+v+" (region attachment: "+c+")");b.region=h}return b}newMeshAttachment(t,c,v,x){let b=new fr(c,v);if(x!=null)this.loadSequence(c,v,x);else{let h=this.atlas.findRegion(v);if(!h)throw new Error("Region not found in atlas: "+v+" (mesh attachment: "+c+")");b.region=h}return b}newBoundingBoxAttachment(t,c){return new Rc(c)}newPathAttachment(t,c){return new to(c)}newPointAttachment(t,c){return new bp(c)}newClippingAttachment(t,c){return new Rl(c)}}class k8{constructor(t,c,v){G(this,"index",0);G(this,"name");G(this,"parent",null);G(this,"length",0);G(this,"x",0);G(this,"y",0);G(this,"rotation",0);G(this,"scaleX",1);G(this,"scaleY",1);G(this,"shearX",0);G(this,"shearY",0);G(this,"inherit",Yi.Normal);G(this,"skinRequired",!1);G(this,"color",new Vt);G(this,"icon");G(this,"visible",!1);if(t<0)throw new Error("index must be >= 0.");if(!c)throw new Error("name cannot be null.");this.index=t,this.name=c,this.parent=v}}var Yi;(function(R){R[R.Normal=0]="Normal",R[R.OnlyTranslation=1]="OnlyTranslation",R[R.NoRotationOrReflection=2]="NoRotationOrReflection",R[R.NoScale=3]="NoScale",R[R.NoScaleOrReflection=4]="NoScaleOrReflection"})(Yi||(Yi={}));class U1{constructor(t,c,v){G(this,"data");G(this,"skeleton");G(this,"parent",null);G(this,"children",new Array);G(this,"x",0);G(this,"y",0);G(this,"rotation",0);G(this,"scaleX",0);G(this,"scaleY",0);G(this,"shearX",0);G(this,"shearY",0);G(this,"ax",0);G(this,"ay",0);G(this,"arotation",0);G(this,"ascaleX",0);G(this,"ascaleY",0);G(this,"ashearX",0);G(this,"ashearY",0);G(this,"a",0);G(this,"b",0);G(this,"c",0);G(this,"d",0);G(this,"worldY",0);G(this,"worldX",0);G(this,"inherit",Yi.Normal);G(this,"sorted",!1);G(this,"active",!1);if(!t)throw new Error("data cannot be null.");if(!c)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=c,this.parent=v,this.setToSetupPose()}isActive(){return this.active}update(t){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,c,v,x,b,h,w){this.ax=t,this.ay=c,this.arotation=v,this.ascaleX=x,this.ascaleY=b,this.ashearX=h,this.ashearY=w;let e=this.parent;if(!e){let a=this.skeleton;const s=a.scaleX,o=a.scaleY,d=(v+h)*Ge.degRad,l=(v+90+w)*Ge.degRad;this.a=Math.cos(d)*x*s,this.b=Math.cos(l)*b*s,this.c=Math.sin(d)*x*o,this.d=Math.sin(l)*b*o,this.worldX=t*s+a.x,this.worldY=c*o+a.y;return}let i=e.a,u=e.b,n=e.c,r=e.d;switch(this.worldX=i*t+u*c+e.worldX,this.worldY=n*t+r*c+e.worldY,this.inherit){case Yi.Normal:{const a=(v+h)*Ge.degRad,s=(v+90+w)*Ge.degRad,o=Math.cos(a)*x,d=Math.cos(s)*b,l=Math.sin(a)*x,f=Math.sin(s)*b;this.a=i*o+u*l,this.b=i*d+u*f,this.c=n*o+r*l,this.d=n*d+r*f;return}case Yi.OnlyTranslation:{const a=(v+h)*Ge.degRad,s=(v+90+w)*Ge.degRad;this.a=Math.cos(a)*x,this.b=Math.cos(s)*b,this.c=Math.sin(a)*x,this.d=Math.sin(s)*b;break}case Yi.NoRotationOrReflection:{let a=1/this.skeleton.scaleX,s=1/this.skeleton.scaleY;i*=a,n*=s;let o=i*i+n*n,d=0;o>1e-4?(o=Math.abs(i*r*s-u*a*n)/o,u=n*o,r=i*o,d=Math.atan2(n,i)*Ge.radDeg):(i=0,n=0,d=90-Math.atan2(r,u)*Ge.radDeg);const l=(v+h-d)*Ge.degRad,f=(v+w-d+90)*Ge.degRad,m=Math.cos(l)*x,g=Math.cos(f)*b,p=Math.sin(l)*x,y=Math.sin(f)*b;this.a=i*m-u*p,this.b=i*g-u*y,this.c=n*m+r*p,this.d=n*g+r*y;break}case Yi.NoScale:case Yi.NoScaleOrReflection:{v*=Ge.degRad;const a=Math.cos(v),s=Math.sin(v);let o=(i*a+u*s)/this.skeleton.scaleX,d=(n*a+r*s)/this.skeleton.scaleY,l=Math.sqrt(o*o+d*d);l>1e-5&&(l=1/l),o*=l,d*=l,l=Math.sqrt(o*o+d*d),this.inherit==Yi.NoScale&&i*r-u*n<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(l=-l),v=Math.PI/2+Math.atan2(d,o);const f=Math.cos(v)*l,m=Math.sin(v)*l;h*=Ge.degRad,w=(90+w)*Ge.degRad;const g=Math.cos(h)*x,p=Math.cos(w)*b,y=Math.sin(h)*x,S=Math.sin(w)*b;this.a=o*g+f*y,this.b=o*p+f*S,this.c=d*g+m*y,this.d=d*p+m*S;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY,this.inherit=t.inherit}updateAppliedTransform(){let t=this.parent;if(!t){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*Ge.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*Ge.radDeg;return}let c=t.a,v=t.b,x=t.c,b=t.d,h=1/(c*b-v*x),w=b*h,e=v*h,i=x*h,u=c*h,n=this.worldX-t.worldX,r=this.worldY-t.worldY;this.ax=n*w-r*e,this.ay=r*u-n*i;let a,s,o,d;if(this.inherit==Yi.OnlyTranslation)a=this.a,s=this.b,o=this.c,d=this.d;else{switch(this.inherit){case Yi.NoRotationOrReflection:{let p=Math.abs(c*b-v*x)/(c*c+x*x);v=-x*this.skeleton.scaleX*p/this.skeleton.scaleY,b=c*this.skeleton.scaleY*p/this.skeleton.scaleX,h=1/(c*b-v*x),w=b*h,e=v*h;break}case Yi.NoScale:case Yi.NoScaleOrReflection:let l=Ge.cosDeg(this.rotation),f=Ge.sinDeg(this.rotation);c=(c*l+v*f)/this.skeleton.scaleX,x=(x*l+b*f)/this.skeleton.scaleY;let m=Math.sqrt(c*c+x*x);m>1e-5&&(m=1/m),c*=m,x*=m,m=Math.sqrt(c*c+x*x),this.inherit==Yi.NoScale&&h<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(m=-m);let g=Ge.PI/2+Math.atan2(x,c);v=Math.cos(g)*m,b=Math.sin(g)*m,h=1/(c*b-v*x),w=b*h,e=v*h,i=x*h,u=c*h}a=w*this.a-e*this.c,s=w*this.b-e*this.d,o=u*this.c-i*this.a,d=u*this.d-i*this.b}if(this.ashearX=0,this.ascaleX=Math.sqrt(a*a+o*o),this.ascaleX>1e-4){let l=a*d-s*o;this.ascaleY=l/this.ascaleX,this.ashearY=-Math.atan2(a*s+o*d,l)*Ge.radDeg,this.arotation=Math.atan2(o,a)*Ge.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(s*s+d*d),this.ashearY=0,this.arotation=90-Math.atan2(d,s)*Ge.radDeg}getWorldRotationX(){return Math.atan2(this.c,this.a)*Ge.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*Ge.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}worldToLocal(t){let c=1/(this.a*this.d-this.b*this.c),v=t.x-this.worldX,x=t.y-this.worldY;return t.x=v*this.d*c-x*this.b*c,t.y=x*this.a*c-v*this.c*c,t}localToWorld(t){let c=t.x,v=t.y;return t.x=c*this.a+v*this.b+this.worldX,t.y=c*this.c+v*this.d+this.worldY,t}worldToParent(t){if(t==null)throw new Error("world cannot be null.");return this.parent==null?t:this.parent.worldToLocal(t)}parentToWorld(t){if(t==null)throw new Error("world cannot be null.");return this.parent==null?t:this.parent.localToWorld(t)}worldToLocalRotation(t){let c=Ge.sinDeg(t),v=Ge.cosDeg(t);return Math.atan2(this.a*c-this.c*v,this.d*v-this.b*c)*Ge.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let c=Ge.sinDeg(t),v=Ge.cosDeg(t);return Math.atan2(v*this.c+c*this.d,v*this.a+c*this.b)*Ge.radDeg}rotateWorld(t){t*=Ge.degRad;const c=Math.sin(t),v=Math.cos(t),x=this.a,b=this.b;this.a=v*x-c*this.c,this.b=v*b-c*this.d,this.c=c*x+v*this.c,this.d=c*b+v*this.d}}class Pc{constructor(t,c,v){G(this,"name");G(this,"order");G(this,"skinRequired");this.name=t,this.order=c,this.skinRequired=v}}class U8{constructor(t,c="",v=new f2,x=new Kg){G(this,"pathPrefix","");G(this,"textureLoader");G(this,"downloader");G(this,"cache");G(this,"errors",{});G(this,"toLoad",0);G(this,"loaded",0);this.textureLoader=t,this.pathPrefix=c,this.downloader=v,this.cache=x}start(t){return this.toLoad++,this.pathPrefix+t}success(t,c,v){this.toLoad--,this.loaded++,this.cache.assets[c]=v,this.cache.assetsRefCount[c]=(this.cache.assetsRefCount[c]||0)+1,t&&t(c,v)}error(t,c,v){this.toLoad--,this.loaded++,this.errors[c]=v,t&&t(c,v)}loadAll(){return new Promise((c,v)=>{let x=()=>{if(this.isLoadingComplete()){this.hasErrors()?v(this.errors):c(this);return}requestAnimationFrame(x)};requestAnimationFrame(x)})}setRawDataURI(t,c){this.downloader.rawDataUris[this.pathPrefix+t]=c}loadBinary(t,c=()=>{},v=()=>{}){t=this.start(t),!this.reuseAssets(t,c,v)&&(this.cache.assetsLoaded[t]=new Promise((x,b)=>{this.downloader.downloadBinary(t,h=>{this.success(c,t,h),x(h)},(h,w)=>{const e=`Couldn't load binary ${t}: status ${h}, ${w}`;this.error(v,t,e),b(e)})}))}loadText(t,c=()=>{},v=()=>{}){t=this.start(t),this.downloader.downloadText(t,x=>{this.success(c,t,x)},(x,b)=>{this.error(v,t,`Couldn't load text ${t}: status ${x}, ${b}`)})}loadJson(t,c=()=>{},v=()=>{}){t=this.start(t),!this.reuseAssets(t,c,v)&&(this.cache.assetsLoaded[t]=new Promise((x,b)=>{this.downloader.downloadJson(t,h=>{this.success(c,t,h),x(h)},(h,w)=>{const e=`Couldn't load JSON ${t}: status ${h}, ${w}`;this.error(v,t,e),b(e)})}))}reuseAssets(t,c=()=>{},v=()=>{}){const x=this.cache.assetsLoaded[t],b=x!==void 0;return b&&(this.cache.assetsLoaded[t]=x.then(h=>(h=h instanceof Image||h instanceof ImageBitmap?this.textureLoader(h):h,this.success(c,t,h),h)).catch(h=>this.error(v,t,h))),b}loadTexture(t,c=()=>{},v=()=>{}){t=this.start(t),!this.reuseAssets(t,c,v)&&(this.cache.assetsLoaded[t]=new Promise((x,b)=>{if(!!!(typeof window<"u"&&typeof navigator<"u"&&window.document))fetch(t,{mode:"cors"}).then(e=>{if(e.ok)return e.blob();const i=`Couldn't load image: ${t}`;this.error(v,t,`Couldn't load image: ${t}`),b(i)}).then(e=>e?createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(e=>{if(e){const i=this.textureLoader(e);this.success(c,t,i),x(i)}});else{let e=new Image;e.crossOrigin="anonymous",e.onload=()=>{const i=this.textureLoader(e);this.success(c,t,i),x(i)},e.onerror=()=>{const i=`Couldn't load image: ${t}`;this.error(v,t,i),b(i)},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),e.src=t}}))}loadTextureAtlas(t,c=()=>{},v=()=>{},x){let b=t.lastIndexOf("/"),h=b>=0?t.substring(0,b+1):"";t=this.start(t),!this.reuseAssets(t,c,v)&&(this.cache.assetsLoaded[t]=new Promise((w,e)=>{this.downloader.downloadText(t,i=>{try{let u=new k1(i),n=u.pages.length,r=!1;for(let a of u.pages)this.loadTexture(x?x[a.name]:h+a.name,(s,o)=>{r||(a.setTexture(o),--n==0&&(this.success(c,t,u),w(u)))},(s,o)=>{if(!r){const d=`Couldn't load texture ${t} page image: ${s}`;this.error(v,t,d),e(d)}r=!0})}catch(u){const n=`Couldn't parse texture atlas ${t}: ${u.message}`;this.error(v,t,n),e(n)}},(i,u)=>{const n=`Couldn't load texture atlas ${t}: status ${i}, ${u}`;this.error(v,t,n),e(n)})}))}loadTextureAtlasButNoTextures(t,c=()=>{},v=()=>{},x){t=this.start(t),!this.reuseAssets(t,c,v)&&(this.cache.assetsLoaded[t]=new Promise((b,h)=>{this.downloader.downloadText(t,w=>{try{const e=new k1(w);this.success(c,t,e),b(e)}catch(e){const i=`Couldn't parse texture atlas ${t}: ${e.message}`;this.error(v,t,i),h(i)}},(w,e)=>{const i=`Couldn't load texture atlas ${t}: status ${w}, ${e}`;this.error(v,t,i),h(i)})}))}async loadBinaryAsync(t){return new Promise((c,v)=>{this.loadBinary(t,(x,b)=>c(b),(x,b)=>v(b))})}async loadJsonAsync(t){return new Promise((c,v)=>{this.loadJson(t,(x,b)=>c(b),(x,b)=>v(b))})}async loadTextureAsync(t){return new Promise((c,v)=>{this.loadTexture(t,(x,b)=>c(b),(x,b)=>v(b))})}async loadTextureAtlasAsync(t){return new Promise((c,v)=>{this.loadTextureAtlas(t,(x,b)=>c(b),(x,b)=>v(b))})}async loadTextureAtlasButNoTexturesAsync(t){return new Promise((c,v)=>{this.loadTextureAtlasButNoTextures(t,(x,b)=>c(b),(x,b)=>v(b))})}setCache(t){this.cache=t}get(t){return this.cache.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;let c=this.cache.assets[t];if(c)return c;let v=this.errors[t];throw Error("Asset not found: "+t+(v?`
`+v:""))}remove(t){t=this.pathPrefix+t;let c=this.cache.assets[t];return c.dispose&&c.dispose(),delete this.cache.assets[t],delete this.cache.assetsRefCount[t],delete this.cache.assetsLoaded[t],c}removeAll(){for(let t in this.cache.assets){let c=this.cache.assets[t];c.dispose&&c.dispose()}this.cache.assets={},this.cache.assetsLoaded={},this.cache.assetsRefCount={}}isLoadingComplete(){return this.toLoad==0}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}disposeAsset(t){--this.cache.assetsRefCount[t]===0&&this.remove(t)}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}}const ll=class ll{constructor(){G(this,"assets",{});G(this,"assetsRefCount",{});G(this,"assetsLoaded",{})}static getCache(t){const c=ll.AVAILABLE_CACHES.get(t);if(c)return c;const v=new ll;return ll.AVAILABLE_CACHES.set(t,v),v}async addAsset(t,c){this.assetsLoaded[t]=Promise.resolve(c),this.assets[t]=await c}};G(ll,"AVAILABLE_CACHES",new Map);let Kg=ll;class f2{constructor(){G(this,"callbacks",{});G(this,"rawDataUris",{})}dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let c=t.indexOf("base64,");return c!=-1?(c+=7,atob(t.substr(c))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var c=window.atob(t),v=c.length,x=new Uint8Array(v),b=0;b<v;b++)x[b]=c.charCodeAt(b);return x}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let c=t.indexOf("base64,");if(c==-1)throw new Error("Not a binary data URI.");return c+=7,this.base64ToUint8Array(t.substr(c))}downloadText(t,c,v){if(this.start(t,c,v))return;const x=this.rawDataUris[t];if(x&&!x.includes(".")){try{this.finish(t,200,this.dataUriToString(x))}catch(w){this.finish(t,400,JSON.stringify(w))}return}let b=new XMLHttpRequest;b.overrideMimeType("text/html"),b.open("GET",x||t,!0);let h=()=>{this.finish(t,b.status,b.responseText)};b.onload=h,b.onerror=h,b.send()}downloadJson(t,c,v){this.downloadText(t,x=>{c(JSON.parse(x))},v)}downloadBinary(t,c,v){if(this.start(t,c,v))return;const x=this.rawDataUris[t];if(x&&!x.includes(".")){try{this.finish(t,200,this.dataUriToUint8Array(x))}catch(w){this.finish(t,400,JSON.stringify(w))}return}let b=new XMLHttpRequest;b.open("GET",x||t,!0),b.responseType="arraybuffer";let h=()=>{this.finish(t,b.status,b.response)};b.onload=()=>{b.status==200||b.status==0?this.finish(t,200,new Uint8Array(b.response)):h()},b.onerror=h,b.send()}start(t,c,v){let x=this.callbacks[t];try{if(x)return!0;this.callbacks[t]=x=[]}finally{x.push(c,v)}}finish(t,c,v){let x=this.callbacks[t];delete this.callbacks[t];let b=c==200||c==0?[v]:[c,v];for(let h=b.length-1,w=x.length;h<w;h+=2)x[h].apply(null,b)}}class V8{constructor(t,c){G(this,"data");G(this,"intValue",0);G(this,"floatValue",0);G(this,"stringValue",null);G(this,"time",0);G(this,"volume",0);G(this,"balance",0);if(!c)throw new Error("data cannot be null.");this.time=t,this.data=c}}class Y8{constructor(t){G(this,"name");G(this,"intValue",0);G(this,"floatValue",0);G(this,"stringValue",null);G(this,"audioPath",null);G(this,"volume",0);G(this,"balance",0);this.name=t}}class X8{constructor(t,c){G(this,"data");G(this,"bones");G(this,"target");G(this,"bendDirection",0);G(this,"compress",!1);G(this,"stretch",!1);G(this,"mix",1);G(this,"softness",0);G(this,"active",!1);if(!t)throw new Error("data cannot be null.");if(!c)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let x=0;x<t.bones.length;x++){let b=c.findBone(t.bones[x].name);if(!b)throw new Error(`Couldn't find bone ${t.bones[x].name}`);this.bones.push(b)}let v=c.findBone(t.target.name);if(!v)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=v,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch}isActive(){return this.active}setToSetupPose(){const t=this.data;this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch}update(t){if(this.mix==0)return;let c=this.target,v=this.bones;switch(v.length){case 1:this.apply1(v[0],c.worldX,c.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(v[0],v[1],c.worldX,c.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(t,c,v,x,b,h,w){let e=t.parent;if(!e)throw new Error("IK bone must have parent.");let i=e.a,u=e.b,n=e.c,r=e.d,a=-t.ashearX-t.arotation,s=0,o=0;switch(t.inherit){case Yi.OnlyTranslation:s=(c-t.worldX)*Ge.signum(t.skeleton.scaleX),o=(v-t.worldY)*Ge.signum(t.skeleton.scaleY);break;case Yi.NoRotationOrReflection:let f=Math.abs(i*r-u*n)/Math.max(1e-4,i*i+n*n),m=i/t.skeleton.scaleX,g=n/t.skeleton.scaleY;u=-g*f*t.skeleton.scaleX,r=m*f*t.skeleton.scaleY,a+=Math.atan2(g,m)*Ge.radDeg;default:let p=c-e.worldX,y=v-e.worldY,S=i*r-u*n;Math.abs(S)<=1e-4?(s=0,o=0):(s=(p*r-y*u)/S-t.ax,o=(y*i-p*n)/S-t.ay)}a+=Math.atan2(o,s)*Ge.radDeg,t.ascaleX<0&&(a+=180),a>180?a-=360:a<-180&&(a+=360);let d=t.ascaleX,l=t.ascaleY;if(x||b){switch(t.inherit){case Yi.NoScale:case Yi.NoScaleOrReflection:s=c-t.worldX,o=v-t.worldY}const f=t.data.length*d;if(f>1e-4){const m=s*s+o*o;if(x&&m<f*f||b&&m>f*f){const g=(Math.sqrt(m)/f-1)*w+1;d*=g,h&&(l*=g)}}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+a*w,d,l,t.ashearX,t.ashearY)}apply2(t,c,v,x,b,h,w,e,i){if(t.inherit!=Yi.Normal||c.inherit!=Yi.Normal)return;let u=t.ax,n=t.ay,r=t.ascaleX,a=t.ascaleY,s=r,o=a,d=c.ascaleX,l=0,f=0,m=0;r<0?(r=-r,l=180,m=-1):(l=0,m=1),a<0&&(a=-a,m=-m),d<0?(d=-d,f=180):f=0;let g=c.ax,p=0,y=0,S=0,C=t.a,A=t.b,M=t.c,L=t.d,P=Math.abs(r-a)<=1e-4;!P||h?(p=0,y=C*g+t.worldX,S=M*g+t.worldY):(p=c.ay,y=C*g+A*p+t.worldX,S=M*g+L*p+t.worldY);let O=t.parent;if(!O)throw new Error("IK parent must itself have a parent.");C=O.a,A=O.b,M=O.c,L=O.d;let D=C*L-A*M,I=y-O.worldX,F=S-O.worldY;D=Math.abs(D)<=1e-4?0:1/D;let H=(I*L-F*A)*D-u,k=(F*C-I*M)*D-n,W=Math.sqrt(H*H+k*k),$=c.data.length*d,K,Z;if(W<1e-4){this.apply1(t,v,x,!1,h,!1,i),c.updateWorldTransformWith(g,p,0,c.ascaleX,c.ascaleY,c.ashearX,c.ashearY);return}I=v-O.worldX,F=x-O.worldY;let X=(I*L-F*A)*D-u,j=(F*C-I*M)*D-n,Y=X*X+j*j;if(e!=0){e*=r*(d+1)*.5;let q=Math.sqrt(Y),_=q-W-$*r+e;if(_>0){let te=Math.min(1,_/(e*2))-1;te=(_-e*(1-te*te))/q,X-=te*X,j-=te*j,Y=X*X+j*j}}e:if(P){$*=r;let q=(Y-W*W-$*$)/(2*W*$);q<-1?(q=-1,Z=Math.PI*b):q>1?(q=1,Z=0,h&&(C=(Math.sqrt(Y)/(W+$)-1)*i+1,s*=C,w&&(o*=C))):Z=Math.acos(q)*b,C=W+$*q,A=$*Math.sin(Z),K=Math.atan2(j*C-X*A,X*C+j*A)}else{C=r*$,A=a*$;let q=C*C,_=A*A,te=Math.atan2(j,X);M=_*W*W+q*Y-q*_;let se=-2*_*W,ne=_-q;if(L=se*se-4*ne*M,L>=0){let Fe=Math.sqrt(L);se<0&&(Fe=-Fe),Fe=-(se+Fe)*.5;let Se=Fe/ne,Oe=M/Fe,Be=Math.abs(Se)<Math.abs(Oe)?Se:Oe;if(Se=Y-Be*Be,Se>=0){F=Math.sqrt(Se)*b,K=te-Math.atan2(F,Be),Z=Math.atan2(F/a,(Be-W)/r);break e}}let he=Ge.PI,le=W-C,ge=le*le,re=0,fe=0,Ae=W+C,Ie=Ae*Ae,Ne=0;M=-C*W/(q-_),M>=-1&&M<=1&&(M=Math.acos(M),I=C*Math.cos(M)+W,F=A*Math.sin(M),L=I*I+F*F,L<ge&&(he=M,ge=L,le=I,re=F),L>Ie&&(fe=M,Ie=L,Ae=I,Ne=F)),Y<=(ge+Ie)*.5?(K=te-Math.atan2(re*b,le),Z=he*b):(K=te-Math.atan2(Ne*b,Ae),Z=fe*b)}let U=Math.atan2(p,g)*m,J=t.arotation;K=(K-U)*Ge.radDeg+l-J,K>180?K-=360:K<-180&&(K+=360),t.updateWorldTransformWith(u,n,J+K*i,s,o,0,0),J=c.arotation,Z=((Z+U)*Ge.radDeg-c.ashearX)*m+f-J,Z>180?Z-=360:Z<-180&&(Z+=360),c.updateWorldTransformWith(g,p,J+Z*i,c.ascaleX,c.ascaleY,c.ashearX,c.ashearY)}}class z8 extends Pc{constructor(c){super(c,0,!1);G(this,"bones",new Array);G(this,"_target",null);G(this,"bendDirection",0);G(this,"compress",!1);G(this,"stretch",!1);G(this,"uniform",!1);G(this,"mix",0);G(this,"softness",0)}set target(c){this._target=c}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class W8 extends Pc{constructor(c){super(c,0,!1);G(this,"bones",new Array);G(this,"_target",null);G(this,"positionMode",io.Fixed);G(this,"spacingMode",Us.Fixed);G(this,"rotateMode",ml.Chain);G(this,"offsetRotation",0);G(this,"position",0);G(this,"spacing",0);G(this,"mixRotate",0);G(this,"mixX",0);G(this,"mixY",0)}set target(c){this._target=c}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}}var io;(function(R){R[R.Fixed=0]="Fixed",R[R.Percent=1]="Percent"})(io||(io={}));var Us;(function(R){R[R.Length=0]="Length",R[R.Fixed=1]="Fixed",R[R.Percent=2]="Percent",R[R.Proportional=3]="Proportional"})(Us||(Us={}));var ml;(function(R){R[R.Tangent=0]="Tangent",R[R.Chain=1]="Chain",R[R.ChainScale=2]="ChainScale"})(ml||(ml={}));const _s=class _s{constructor(t,c){G(this,"data");G(this,"bones");G(this,"target");G(this,"position",0);G(this,"spacing",0);G(this,"mixRotate",0);G(this,"mixX",0);G(this,"mixY",0);G(this,"spaces",new Array);G(this,"positions",new Array);G(this,"world",new Array);G(this,"curves",new Array);G(this,"lengths",new Array);G(this,"segments",new Array);G(this,"active",!1);if(!t)throw new Error("data cannot be null.");if(!c)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let x=0,b=t.bones.length;x<b;x++){let h=c.findBone(t.bones[x].name);if(!h)throw new Error(`Couldn't find bone ${t.bones[x].name}.`);this.bones.push(h)}let v=c.findSlot(t.target.name);if(!v)throw new Error(`Couldn't find target bone ${t.target.name}`);this.target=v,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}setToSetupPose(){const t=this.data;this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}update(t){let c=this.target.getAttachment();if(!(c instanceof to))return;let v=this.mixRotate,x=this.mixX,b=this.mixY;if(v==0&&x==0&&b==0)return;let h=this.data,w=h.rotateMode==ml.Tangent,e=h.rotateMode==ml.ChainScale,i=this.bones,u=i.length,n=w?u:u+1,r=Ye.setArraySize(this.spaces,n),a=e?this.lengths=Ye.setArraySize(this.lengths,u):[],s=this.spacing;switch(h.spacingMode){case Us.Percent:if(e)for(let y=0,S=n-1;y<S;y++){let C=i[y],A=C.data.length,M=A*C.a,L=A*C.c;a[y]=Math.sqrt(M*M+L*L)}Ye.arrayFill(r,1,n,s);break;case Us.Proportional:let g=0;for(let y=0,S=n-1;y<S;){let C=i[y],A=C.data.length;if(A<_s.epsilon)e&&(a[y]=0),r[++y]=s;else{let M=A*C.a,L=A*C.c,P=Math.sqrt(M*M+L*L);e&&(a[y]=P),r[++y]=P,g+=P}}if(g>0){g=n/g*s;for(let y=1;y<n;y++)r[y]*=g}break;default:let p=h.spacingMode==Us.Length;for(let y=0,S=n-1;y<S;){let C=i[y],A=C.data.length;if(A<_s.epsilon)e&&(a[y]=0),r[++y]=s;else{let M=A*C.a,L=A*C.c,P=Math.sqrt(M*M+L*L);e&&(a[y]=P),r[++y]=(p?A+s:s)*P/A}}}let o=this.computeWorldPositions(c,n,w),d=o[0],l=o[1],f=h.offsetRotation,m=!1;if(f==0)m=h.rotateMode==ml.Chain;else{m=!1;let g=this.target.bone;f*=g.a*g.d-g.b*g.c>0?Ge.degRad:-.01745329277777778}for(let g=0,p=3;g<u;g++,p+=3){let y=i[g];y.worldX+=(d-y.worldX)*x,y.worldY+=(l-y.worldY)*b;let S=o[p],C=o[p+1],A=S-d,M=C-l;if(e){let L=a[g];if(L!=0){let P=(Math.sqrt(A*A+M*M)/L-1)*v+1;y.a*=P,y.c*=P}}if(d=S,l=C,v>0){let L=y.a,P=y.b,O=y.c,D=y.d,I=0,F=0,H=0;if(w?I=o[p-1]:r[g+1]==0?I=o[p+2]:I=Math.atan2(M,A),I-=Math.atan2(O,L),m){F=Math.cos(I),H=Math.sin(I);let k=y.data.length;d+=(k*(F*L-H*O)-A)*v,l+=(k*(H*L+F*O)-M)*v}else I+=f;I>Ge.PI?I-=Ge.PI2:I<-3.1415927&&(I+=Ge.PI2),I*=v,F=Math.cos(I),H=Math.sin(I),y.a=F*L-H*O,y.b=F*P-H*D,y.c=H*L+F*O,y.d=H*P+F*D}y.updateAppliedTransform()}}computeWorldPositions(t,c,v){let x=this.target,b=this.position,h=this.spaces,w=Ye.setArraySize(this.positions,c*3+2),e=this.world,i=t.closed,u=t.worldVerticesLength,n=u/6,r=_s.NONE;if(!t.constantSpeed){let k=t.lengths;n-=i?1:2;let W=k[n];this.data.positionMode==io.Percent&&(b*=W);let $;switch(this.data.spacingMode){case Us.Percent:$=W;break;case Us.Proportional:$=W/c;break;default:$=1}e=Ye.setArraySize(this.world,8);for(let K=0,Z=0,X=0;K<c;K++,Z+=3){let j=h[K]*$;b+=j;let Y=b;if(i)Y%=W,Y<0&&(Y+=W),X=0;else if(Y<0){r!=_s.BEFORE&&(r=_s.BEFORE,t.computeWorldVertices(x,2,4,e,0,2)),this.addBeforePosition(Y,e,0,w,Z);continue}else if(Y>W){r!=_s.AFTER&&(r=_s.AFTER,t.computeWorldVertices(x,u-6,4,e,0,2)),this.addAfterPosition(Y-W,e,0,w,Z);continue}for(;;X++){let U=k[X];if(!(Y>U)){if(X==0)Y/=U;else{let J=k[X-1];Y=(Y-J)/(U-J)}break}}X!=r&&(r=X,i&&X==n?(t.computeWorldVertices(x,u-4,4,e,0,2),t.computeWorldVertices(x,0,4,e,4,2)):t.computeWorldVertices(x,X*6+2,8,e,0,2)),this.addCurvePosition(Y,e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],w,Z,v||K>0&&j==0)}return w}i?(u+=2,e=Ye.setArraySize(this.world,u),t.computeWorldVertices(x,2,u-4,e,0,2),t.computeWorldVertices(x,0,2,e,u-4,2),e[u-2]=e[0],e[u-1]=e[1]):(n--,u-=4,e=Ye.setArraySize(this.world,u),t.computeWorldVertices(x,2,u,e,0,2));let a=Ye.setArraySize(this.curves,n),s=0,o=e[0],d=e[1],l=0,f=0,m=0,g=0,p=0,y=0,S=0,C=0,A=0,M=0,L=0,P=0,O=0,D=0;for(let k=0,W=2;k<n;k++,W+=6)l=e[W],f=e[W+1],m=e[W+2],g=e[W+3],p=e[W+4],y=e[W+5],S=(o-l*2+m)*.1875,C=(d-f*2+g)*.1875,A=((l-m)*3-o+p)*.09375,M=((f-g)*3-d+y)*.09375,L=S*2+A,P=C*2+M,O=(l-o)*.75+S+A*.16666667,D=(f-d)*.75+C+M*.16666667,s+=Math.sqrt(O*O+D*D),O+=L,D+=P,L+=A,P+=M,s+=Math.sqrt(O*O+D*D),O+=L,D+=P,s+=Math.sqrt(O*O+D*D),O+=L+A,D+=P+M,s+=Math.sqrt(O*O+D*D),a[k]=s,o=p,d=y;this.data.positionMode==io.Percent&&(b*=s);let I;switch(this.data.spacingMode){case Us.Percent:I=s;break;case Us.Proportional:I=s/c;break;default:I=1}let F=this.segments,H=0;for(let k=0,W=0,$=0,K=0;k<c;k++,W+=3){let Z=h[k]*I;b+=Z;let X=b;if(i)X%=s,X<0&&(X+=s),$=0;else if(X<0){this.addBeforePosition(X,e,0,w,W);continue}else if(X>s){this.addAfterPosition(X-s,e,u-4,w,W);continue}for(;;$++){let j=a[$];if(!(X>j)){if($==0)X/=j;else{let Y=a[$-1];X=(X-Y)/(j-Y)}break}}if($!=r){r=$;let j=$*6;for(o=e[j],d=e[j+1],l=e[j+2],f=e[j+3],m=e[j+4],g=e[j+5],p=e[j+6],y=e[j+7],S=(o-l*2+m)*.03,C=(d-f*2+g)*.03,A=((l-m)*3-o+p)*.006,M=((f-g)*3-d+y)*.006,L=S*2+A,P=C*2+M,O=(l-o)*.3+S+A*.16666667,D=(f-d)*.3+C+M*.16666667,H=Math.sqrt(O*O+D*D),F[0]=H,j=1;j<8;j++)O+=L,D+=P,L+=A,P+=M,H+=Math.sqrt(O*O+D*D),F[j]=H;O+=L,D+=P,H+=Math.sqrt(O*O+D*D),F[8]=H,O+=L+A,D+=P+M,H+=Math.sqrt(O*O+D*D),F[9]=H,K=0}for(X*=H;;K++){let j=F[K];if(!(X>j)){if(K==0)X/=j;else{let Y=F[K-1];X=K+(X-Y)/(j-Y)}break}}this.addCurvePosition(X*.1,o,d,l,f,m,g,p,y,w,W,v||k>0&&Z==0)}return w}addBeforePosition(t,c,v,x,b){let h=c[v],w=c[v+1],e=c[v+2]-h,i=c[v+3]-w,u=Math.atan2(i,e);x[b]=h+t*Math.cos(u),x[b+1]=w+t*Math.sin(u),x[b+2]=u}addAfterPosition(t,c,v,x,b){let h=c[v+2],w=c[v+3],e=h-c[v],i=w-c[v+1],u=Math.atan2(i,e);x[b]=h+t*Math.cos(u),x[b+1]=w+t*Math.sin(u),x[b+2]=u}addCurvePosition(t,c,v,x,b,h,w,e,i,u,n,r){if(t==0||isNaN(t)){u[n]=c,u[n+1]=v,u[n+2]=Math.atan2(b-v,x-c);return}let a=t*t,s=a*t,o=1-t,d=o*o,l=d*o,f=o*t,m=f*3,g=o*m,p=m*t,y=c*l+x*g+h*p+e*s,S=v*l+b*g+w*p+i*s;u[n]=y,u[n+1]=S,r&&(t<.001?u[n+2]=Math.atan2(b-v,x-c):u[n+2]=Math.atan2(S-(v*d+b*f*2+w*a),y-(c*d+x*f*2+h*a)))}};G(_s,"NONE",-1),G(_s,"BEFORE",-2),G(_s,"AFTER",-3),G(_s,"epsilon",1e-5);let $g=_s;class j8{constructor(t,c){G(this,"data");G(this,"_bone",null);G(this,"inertia",0);G(this,"strength",0);G(this,"damping",0);G(this,"massInverse",0);G(this,"wind",0);G(this,"gravity",0);G(this,"mix",0);G(this,"_reset",!0);G(this,"ux",0);G(this,"uy",0);G(this,"cx",0);G(this,"cy",0);G(this,"tx",0);G(this,"ty",0);G(this,"xOffset",0);G(this,"xVelocity",0);G(this,"yOffset",0);G(this,"yVelocity",0);G(this,"rotateOffset",0);G(this,"rotateVelocity",0);G(this,"scaleOffset",0);G(this,"scaleVelocity",0);G(this,"active",!1);G(this,"skeleton");G(this,"remaining",0);G(this,"lastTime",0);this.data=t,this.skeleton=c,this.bone=c.bones[t.bone.index],this.inertia=t.inertia,this.strength=t.strength,this.damping=t.damping,this.massInverse=t.massInverse,this.wind=t.wind,this.gravity=t.gravity,this.mix=t.mix}set bone(t){this._bone=t}get bone(){if(this._bone)return this._bone;throw new Error("Bone not set.")}reset(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=!0,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0}setToSetupPose(){const t=this.data;this.inertia=t.inertia,this.strength=t.strength,this.damping=t.damping,this.massInverse=t.massInverse,this.wind=t.wind,this.gravity=t.gravity,this.mix=t.mix}isActive(){return this.active}update(t){const c=this.mix;if(c==0)return;const v=this.data.x>0,x=this.data.y>0,b=this.data.rotate>0||this.data.shearX>0,h=this.data.scaleX>0,w=this.bone,e=w.data.length;switch(t){case or.none:return;case or.reset:this.reset();case or.update:const i=this.skeleton,u=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=u,this.lastTime=i.time;const n=w.worldX,r=w.worldY;if(this._reset)this._reset=!1,this.ux=n,this.uy=r;else{let a=this.remaining,s=this.inertia,o=this.data.step,d=this.skeleton.data.referenceScale,l=-1,f=this.data.limit*u,m=f*Math.abs(i.scaleY);if(f*=Math.abs(i.scaleX),v||x){if(v){const g=(this.ux-n)*s;this.xOffset+=g>f?f:g<-f?-f:g,this.ux=n}if(x){const g=(this.uy-r)*s;this.yOffset+=g>m?m:g<-m?-m:g,this.uy=r}if(a>=o){l=Math.pow(this.damping,60*o);const g=this.massInverse*o,p=this.strength,y=this.wind*d*i.scaleX,S=this.gravity*d*i.scaleY;do v&&(this.xVelocity+=(y-this.xOffset*p)*g,this.xOffset+=this.xVelocity*o,this.xVelocity*=l),x&&(this.yVelocity-=(S+this.yOffset*p)*g,this.yOffset+=this.yVelocity*o,this.yVelocity*=l),a-=o;while(a>=o)}v&&(w.worldX+=this.xOffset*c*this.data.x),x&&(w.worldY+=this.yOffset*c*this.data.y)}if(b||h){let g=Math.atan2(w.c,w.a),p=0,y=0,S=0,C=this.cx-w.worldX,A=this.cy-w.worldY;if(C>f?C=f:C<-f&&(C=-f),A>m?A=m:A<-m&&(A=-m),b){S=(this.data.rotate+this.data.shearX)*c;let M=Math.atan2(A+this.ty,C+this.tx)-g-this.rotateOffset*S;this.rotateOffset+=(M-Math.ceil(M*Ge.invPI2-.5)*Ge.PI2)*s,M=this.rotateOffset*S+g,p=Math.cos(M),y=Math.sin(M),h&&(M=e*w.getWorldScaleX(),M>0&&(this.scaleOffset+=(C*p+A*y)*s/M))}else{p=Math.cos(g),y=Math.sin(g);const M=e*w.getWorldScaleX();M>0&&(this.scaleOffset+=(C*p+A*y)*s/M)}if(a=this.remaining,a>=o){l==-1&&(l=Math.pow(this.damping,60*o));const M=this.massInverse*o,L=this.strength,P=this.wind,O=this.gravity,D=e/d;for(;;)if(a-=o,h&&(this.scaleVelocity+=(P*p-O*y-this.scaleOffset*L)*M,this.scaleOffset+=this.scaleVelocity*o,this.scaleVelocity*=l),b){if(this.rotateVelocity-=((P*y+O*p)*D+this.rotateOffset*L)*M,this.rotateOffset+=this.rotateVelocity*o,this.rotateVelocity*=l,a<o)break;const I=this.rotateOffset*S+g;p=Math.cos(I),y=Math.sin(I)}else if(a<o)break}}this.remaining=a}this.cx=w.worldX,this.cy=w.worldY;break;case or.pose:v&&(w.worldX+=this.xOffset*c*this.data.x),x&&(w.worldY+=this.yOffset*c*this.data.y)}if(b){let i=this.rotateOffset*c,u=0,n=0,r=0;if(this.data.shearX>0){let a=0;this.data.rotate>0&&(a=i*this.data.rotate,u=Math.sin(a),n=Math.cos(a),r=w.b,w.b=n*r-u*w.d,w.d=u*r+n*w.d),a+=i*this.data.shearX,u=Math.sin(a),n=Math.cos(a),r=w.a,w.a=n*r-u*w.c,w.c=u*r+n*w.c}else i*=this.data.rotate,u=Math.sin(i),n=Math.cos(i),r=w.a,w.a=n*r-u*w.c,w.c=u*r+n*w.c,r=w.b,w.b=n*r-u*w.d,w.d=u*r+n*w.d}if(h){const i=1+this.scaleOffset*c*this.data.scaleX;w.a*=i,w.c*=i}t!=or.pose&&(this.tx=e*w.a,this.ty=e*w.c),w.updateAppliedTransform()}translate(t,c){this.ux-=t,this.uy-=c,this.cx-=t,this.cy-=c}rotate(t,c,v){const x=v*Ge.degRad,b=Math.cos(x),h=Math.sin(x),w=this.cx-t,e=this.cy-c;this.translate(w*b-e*h-w,w*h+e*b-e)}}class K8{constructor(t,c){G(this,"data");G(this,"bone");G(this,"color");G(this,"darkColor",null);G(this,"attachment",null);G(this,"attachmentState",0);G(this,"sequenceIndex",-1);G(this,"deform",new Array);if(!t)throw new Error("data cannot be null.");if(!c)throw new Error("bone cannot be null.");this.data=t,this.bone=c,this.color=new Vt,this.darkColor=t.darkColor?new Vt:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&((!(t instanceof Ma)||!(this.attachment instanceof Ma)||t.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class $8{constructor(t,c){G(this,"data");G(this,"bones");G(this,"target");G(this,"mixRotate",0);G(this,"mixX",0);G(this,"mixY",0);G(this,"mixScaleX",0);G(this,"mixScaleY",0);G(this,"mixShearY",0);G(this,"temp",new Sl);G(this,"active",!1);if(!t)throw new Error("data cannot be null.");if(!c)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let x=0;x<t.bones.length;x++){let b=c.findBone(t.bones[x].name);if(!b)throw new Error(`Couldn't find bone ${t.bones[x].name}.`);this.bones.push(b)}let v=c.findBone(t.target.name);if(!v)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=v,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY}isActive(){return this.active}setToSetupPose(){const t=this.data;this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY}update(t){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleY==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,c=this.mixX,v=this.mixY,x=this.mixScaleX,b=this.mixScaleY,h=this.mixShearY,w=c!=0||v!=0,e=this.target,i=e.a,u=e.b,n=e.c,r=e.d,a=i*r-u*n>0?Ge.degRad:-.01745329277777778,s=this.data.offsetRotation*a,o=this.data.offsetShearY*a,d=this.bones;for(let l=0,f=d.length;l<f;l++){let m=d[l];if(t!=0){let g=m.a,p=m.b,y=m.c,S=m.d,C=Math.atan2(n,i)-Math.atan2(y,g)+s;C>Ge.PI?C-=Ge.PI2:C<-3.1415927&&(C+=Ge.PI2),C*=t;let A=Math.cos(C),M=Math.sin(C);m.a=A*g-M*y,m.b=A*p-M*S,m.c=M*g+A*y,m.d=M*p+A*S}if(w){let g=this.temp;e.localToWorld(g.set(this.data.offsetX,this.data.offsetY)),m.worldX+=(g.x-m.worldX)*c,m.worldY+=(g.y-m.worldY)*v}if(x!=0){let g=Math.sqrt(m.a*m.a+m.c*m.c);g!=0&&(g=(g+(Math.sqrt(i*i+n*n)-g+this.data.offsetScaleX)*x)/g),m.a*=g,m.c*=g}if(b!=0){let g=Math.sqrt(m.b*m.b+m.d*m.d);g!=0&&(g=(g+(Math.sqrt(u*u+r*r)-g+this.data.offsetScaleY)*b)/g),m.b*=g,m.d*=g}if(h>0){let g=m.b,p=m.d,y=Math.atan2(p,g),S=Math.atan2(r,u)-Math.atan2(n,i)-(y-Math.atan2(m.c,m.a));S>Ge.PI?S-=Ge.PI2:S<-3.1415927&&(S+=Ge.PI2),S=y+(S+o)*h;let C=Math.sqrt(g*g+p*p);m.b=Math.cos(S)*C,m.d=Math.sin(S)*C}m.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,c=this.mixX,v=this.mixY,x=this.mixScaleX,b=this.mixScaleY,h=this.mixShearY,w=c!=0||v!=0,e=this.target,i=e.a,u=e.b,n=e.c,r=e.d,a=i*r-u*n>0?Ge.degRad:-.01745329277777778,s=this.data.offsetRotation*a,o=this.data.offsetShearY*a,d=this.bones;for(let l=0,f=d.length;l<f;l++){let m=d[l];if(t!=0){let g=m.a,p=m.b,y=m.c,S=m.d,C=Math.atan2(n,i)+s;C>Ge.PI?C-=Ge.PI2:C<-3.1415927&&(C+=Ge.PI2),C*=t;let A=Math.cos(C),M=Math.sin(C);m.a=A*g-M*y,m.b=A*p-M*S,m.c=M*g+A*y,m.d=M*p+A*S}if(w){let g=this.temp;e.localToWorld(g.set(this.data.offsetX,this.data.offsetY)),m.worldX+=g.x*c,m.worldY+=g.y*v}if(x!=0){let g=(Math.sqrt(i*i+n*n)-1+this.data.offsetScaleX)*x+1;m.a*=g,m.c*=g}if(b!=0){let g=(Math.sqrt(u*u+r*r)-1+this.data.offsetScaleY)*b+1;m.b*=g,m.d*=g}if(h>0){let g=Math.atan2(r,u)-Math.atan2(n,i);g>Ge.PI?g-=Ge.PI2:g<-3.1415927&&(g+=Ge.PI2);let p=m.b,y=m.d;g=Math.atan2(y,p)+(g-Ge.PI/2+o)*h;let S=Math.sqrt(p*p+y*y);m.b=Math.cos(g)*S,m.d=Math.sin(g)*S}m.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,c=this.mixX,v=this.mixY,x=this.mixScaleX,b=this.mixScaleY,h=this.mixShearY,w=this.target,e=this.bones;for(let i=0,u=e.length;i<u;i++){let n=e[i],r=n.arotation;t!=0&&(r+=(w.arotation-r+this.data.offsetRotation)*t);let a=n.ax,s=n.ay;a+=(w.ax-a+this.data.offsetX)*c,s+=(w.ay-s+this.data.offsetY)*v;let o=n.ascaleX,d=n.ascaleY;x!=0&&o!=0&&(o=(o+(w.ascaleX-o+this.data.offsetScaleX)*x)/o),b!=0&&d!=0&&(d=(d+(w.ascaleY-d+this.data.offsetScaleY)*b)/d);let l=n.ashearY;h!=0&&(l+=(w.ashearY-l+this.data.offsetShearY)*h),n.updateWorldTransformWith(a,s,r,o,d,n.ashearX,l)}}applyRelativeLocal(){let t=this.mixRotate,c=this.mixX,v=this.mixY,x=this.mixScaleX,b=this.mixScaleY,h=this.mixShearY,w=this.target,e=this.bones;for(let i=0,u=e.length;i<u;i++){let n=e[i],r=n.arotation+(w.arotation+this.data.offsetRotation)*t,a=n.ax+(w.ax+this.data.offsetX)*c,s=n.ay+(w.ay+this.data.offsetY)*v,o=n.ascaleX*((w.ascaleX-1+this.data.offsetScaleX)*x+1),d=n.ascaleY*((w.ascaleY-1+this.data.offsetScaleY)*b+1),l=n.ashearY+(w.ashearY+this.data.offsetShearY)*h;n.updateWorldTransformWith(a,s,r,o,d,n.ashearX,l)}}}const hl=class hl{constructor(t){G(this,"data");G(this,"bones");G(this,"slots");G(this,"drawOrder");G(this,"ikConstraints");G(this,"transformConstraints");G(this,"pathConstraints");G(this,"physicsConstraints");G(this,"_updateCache",new Array);G(this,"skin",null);G(this,"color");G(this,"scaleX",1);G(this,"_scaleY",1);G(this,"x",0);G(this,"y",0);G(this,"time",0);if(!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let c=0;c<t.bones.length;c++){let v=t.bones[c],x;if(!v.parent)x=new U1(v,this,null);else{let b=this.bones[v.parent.index];x=new U1(v,this,b),b.children.push(x)}this.bones.push(x)}this.slots=new Array,this.drawOrder=new Array;for(let c=0;c<t.slots.length;c++){let v=t.slots[c],x=this.bones[v.boneData.index],b=new K8(v,x);this.slots.push(b),this.drawOrder.push(b)}this.ikConstraints=new Array;for(let c=0;c<t.ikConstraints.length;c++){let v=t.ikConstraints[c];this.ikConstraints.push(new X8(v,this))}this.transformConstraints=new Array;for(let c=0;c<t.transformConstraints.length;c++){let v=t.transformConstraints[c];this.transformConstraints.push(new $8(v,this))}this.pathConstraints=new Array;for(let c=0;c<t.pathConstraints.length;c++){let v=t.pathConstraints[c];this.pathConstraints.push(new $g(v,this))}this.physicsConstraints=new Array;for(let c=0;c<t.physicsConstraints.length;c++){let v=t.physicsConstraints[c];this.physicsConstraints.push(new j8(v,this))}this.color=new Vt(1,1,1,1),this.updateCache()}get scaleY(){return hl.yDown?-this._scaleY:this._scaleY}set scaleY(t){this._scaleY=t}updateCache(){let t=this._updateCache;t.length=0;let c=this.bones;for(let r=0,a=c.length;r<a;r++){let s=c[r];s.sorted=s.data.skinRequired,s.active=!s.sorted}if(this.skin){let r=this.skin.bones;for(let a=0,s=this.skin.bones.length;a<s;a++){let o=this.bones[r[a].index];do o.sorted=!1,o.active=!0,o=o.parent;while(o)}}let v=this.ikConstraints,x=this.transformConstraints,b=this.pathConstraints,h=this.physicsConstraints,w=v.length,e=x.length,i=b.length,u=this.physicsConstraints.length,n=w+e+i+u;e:for(let r=0;r<n;r++){for(let a=0;a<w;a++){let s=v[a];if(s.data.order==r){this.sortIkConstraint(s);continue e}}for(let a=0;a<e;a++){let s=x[a];if(s.data.order==r){this.sortTransformConstraint(s);continue e}}for(let a=0;a<i;a++){let s=b[a];if(s.data.order==r){this.sortPathConstraint(s);continue e}}for(let a=0;a<u;a++){const s=h[a];if(s.data.order==r){this.sortPhysicsConstraint(s);continue e}}}for(let r=0,a=c.length;r<a;r++)this.sortBone(c[r])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&Ye.contains(this.skin.constraints,t.data,!0)),!t.active)return;let c=t.target;this.sortBone(c);let v=t.bones,x=v[0];if(this.sortBone(x),v.length==1)this._updateCache.push(t),this.sortReset(x.children);else{let b=v[v.length-1];this.sortBone(b),this._updateCache.push(t),this.sortReset(x.children),b.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&Ye.contains(this.skin.constraints,t.data,!0)),!t.active)return;let c=t.target,v=c.data.index,x=c.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,v,x),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,v,x);for(let e=0,i=this.data.skins.length;e<i;e++)this.sortPathConstraintAttachment(this.data.skins[e],v,x);let b=c.getAttachment();b instanceof to&&this.sortPathConstraintAttachmentWith(b,x);let h=t.bones,w=h.length;for(let e=0;e<w;e++)this.sortBone(h[e]);this._updateCache.push(t);for(let e=0;e<w;e++)this.sortReset(h[e].children);for(let e=0;e<w;e++)h[e].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&Ye.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let c=t.bones,v=c.length;if(t.data.local)for(let x=0;x<v;x++){let b=c[x];this.sortBone(b.parent),this.sortBone(b)}else for(let x=0;x<v;x++)this.sortBone(c[x]);this._updateCache.push(t);for(let x=0;x<v;x++)this.sortReset(c[x].children);for(let x=0;x<v;x++)c[x].sorted=!0}sortPathConstraintAttachment(t,c,v){let x=t.attachments[c];if(x)for(let b in x)this.sortPathConstraintAttachmentWith(x[b],v)}sortPathConstraintAttachmentWith(t,c){if(!(t instanceof to))return;let v=t.bones;if(!v)this.sortBone(c);else{let x=this.bones;for(let b=0,h=v.length;b<h;){let w=v[b++];for(w+=b;b<w;)this.sortBone(x[v[b++]])}}}sortPhysicsConstraint(t){const c=t.bone;t.active=c.active&&(!t.data.skinRequired||this.skin!=null&&Ye.contains(this.skin.constraints,t.data,!0)),t.active&&(this.sortBone(c),this._updateCache.push(t),this.sortReset(c.children),c.sorted=!0)}sortBone(t){if(!t||t.sorted)return;let c=t.parent;c&&this.sortBone(c),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let c=0,v=t.length;c<v;c++){let x=t[c];x.active&&(x.sorted&&this.sortReset(x.children),x.sorted=!1)}}updateWorldTransform(t){if(t==null)throw new Error("physics is undefined");let c=this.bones;for(let x=0,b=c.length;x<b;x++){let h=c[x];h.ax=h.x,h.ay=h.y,h.arotation=h.rotation,h.ascaleX=h.scaleX,h.ascaleY=h.scaleY,h.ashearX=h.shearX,h.ashearY=h.shearY}let v=this._updateCache;for(let x=0,b=v.length;x<b;x++)v[x].update(t)}updateWorldTransformWith(t,c){if(!c)throw new Error("parent cannot be null.");let v=this.bones;for(let d=1,l=v.length;d<l;d++){let f=v[d];f.ax=f.x,f.ay=f.y,f.arotation=f.rotation,f.ascaleX=f.scaleX,f.ascaleY=f.scaleY,f.ashearX=f.shearX,f.ashearY=f.shearY}let x=this.getRootBone();if(!x)throw new Error("Root bone must not be null.");let b=c.a,h=c.b,w=c.c,e=c.d;x.worldX=b*this.x+h*this.y+c.worldX,x.worldY=w*this.x+e*this.y+c.worldY;const i=(x.rotation+x.shearX)*Ge.degRad,u=(x.rotation+90+x.shearY)*Ge.degRad,n=Math.cos(i)*x.scaleX,r=Math.cos(u)*x.scaleY,a=Math.sin(i)*x.scaleX,s=Math.sin(u)*x.scaleY;x.a=(b*n+h*a)*this.scaleX,x.b=(b*r+h*s)*this.scaleX,x.c=(w*n+e*a)*this.scaleY,x.d=(w*r+e*s)*this.scaleY;let o=this._updateCache;for(let d=0,l=o.length;d<l;d++){let f=o[d];f!=x&&f.update(t)}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){for(const t of this.bones)t.setToSetupPose();for(const t of this.ikConstraints)t.setToSetupPose();for(const t of this.transformConstraints)t.setToSetupPose();for(const t of this.pathConstraints)t.setToSetupPose();for(const t of this.physicsConstraints)t.setToSetupPose()}setSlotsToSetupPose(){let t=this.slots;Ye.arrayCopy(t,0,this.drawOrder,0,t.length);for(let c=0,v=t.length;c<v;c++)t[c].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let c=this.bones;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.data.name==t)return b}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let c=this.slots;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.data.name==t)return b}return null}setSkinByName(t){let c=this.data.findSkin(t);if(!c)throw new Error("Skin not found: "+t);this.setSkin(c)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{let c=this.slots;for(let v=0,x=c.length;v<x;v++){let b=c[v],h=b.data.attachmentName;if(h){let w=t.getAttachment(v,h);w&&b.setAttachment(w)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,c){let v=this.data.findSlot(t);if(!v)throw new Error(`Can't find slot with name ${t}`);return this.getAttachment(v.index,c)}getAttachment(t,c){if(!c)throw new Error("attachmentName cannot be null.");if(this.skin){let v=this.skin.getAttachment(t,c);if(v)return v}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,c):null}setAttachment(t,c){if(!t)throw new Error("slotName cannot be null.");let v=this.slots;for(let x=0,b=v.length;x<b;x++){let h=v[x];if(h.data.name==t){let w=null;if(c&&(w=this.getAttachment(x,c),!w))throw new Error("Attachment not found: "+c+", for slot: "+t);h.setAttachment(w);return}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");return this.ikConstraints.find(c=>c.data.name==t)??null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");return this.transformConstraints.find(c=>c.data.name==t)??null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");return this.pathConstraints.find(c=>c.data.name==t)??null}findPhysicsConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");return this.physicsConstraints.find(c=>c.data.name==t)??null}getBoundsRect(t){let c=new Sl,v=new Sl;return this.getBounds(c,v,void 0,t),{x:c.x,y:c.y,width:v.x,height:v.y}}getBounds(t,c,v=new Array(2),x=null){if(!t)throw new Error("offset cannot be null.");if(!c)throw new Error("size cannot be null.");let b=this.drawOrder,h=Number.POSITIVE_INFINITY,w=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(let u=0,n=b.length;u<n;u++){let r=b[u];if(!r.bone.active)continue;let a=0,s=null,o=null,d=r.getAttachment();if(d instanceof Cl)a=8,s=Ye.setArraySize(v,a,0),d.computeWorldVertices(r,s,0,2),o=hl.quadTriangles;else if(d instanceof fr){let l=d;a=l.worldVerticesLength,s=Ye.setArraySize(v,a,0),l.computeWorldVertices(r,0,a,s,0,2),o=l.triangles}else if(d instanceof Rl&&x!=null){x.clipStart(r,d);continue}if(s&&o){x!=null&&x.isClipping()&&(x.clipTriangles(s,o,o.length),s=x.clippedVertices,a=x.clippedVertices.length);for(let l=0,f=s.length;l<f;l+=2){let m=s[l],g=s[l+1];h=Math.min(h,m),w=Math.min(w,g),e=Math.max(e,m),i=Math.max(i,g)}}x!=null&&x.clipEndWithSlot(r)}x!=null&&x.clipEnd(),t.set(h,w),c.set(e-h,i-w)}update(t){this.time+=t}physicsTranslate(t,c){const v=this.physicsConstraints;for(let x=0,b=v.length;x<b;x++)v[x].translate(t,c)}physicsRotate(t,c,v){const x=this.physicsConstraints;for(let b=0,h=x.length;b<h;b++)x[b].rotate(t,c,v)}};G(hl,"quadTriangles",[0,1,2,2,3,0]),G(hl,"yDown",!1);let Qg=hl;var or;(function(R){R[R.none=0]="none",R[R.reset=1]="reset",R[R.update=2]="update",R[R.pose=3]="pose"})(or||(or={}));class Q8 extends Pc{constructor(c){super(c,0,!1);G(this,"_bone",null);G(this,"x",0);G(this,"y",0);G(this,"rotate",0);G(this,"scaleX",0);G(this,"shearX",0);G(this,"limit",0);G(this,"step",0);G(this,"inertia",0);G(this,"strength",0);G(this,"damping",0);G(this,"massInverse",0);G(this,"wind",0);G(this,"gravity",0);G(this,"mix",0);G(this,"inertiaGlobal",!1);G(this,"strengthGlobal",!1);G(this,"dampingGlobal",!1);G(this,"massGlobal",!1);G(this,"windGlobal",!1);G(this,"gravityGlobal",!1);G(this,"mixGlobal",!1)}set bone(c){this._bone=c}get bone(){if(this._bone)return this._bone;throw new Error("BoneData not set.")}}class J8{constructor(){G(this,"name",null);G(this,"bones",new Array);G(this,"slots",new Array);G(this,"skins",new Array);G(this,"defaultSkin",null);G(this,"events",new Array);G(this,"animations",new Array);G(this,"ikConstraints",new Array);G(this,"transformConstraints",new Array);G(this,"pathConstraints",new Array);G(this,"physicsConstraints",new Array);G(this,"x",0);G(this,"y",0);G(this,"width",0);G(this,"height",0);G(this,"referenceScale",100);G(this,"version",null);G(this,"hash",null);G(this,"fps",0);G(this,"imagesPath",null);G(this,"audioPath",null)}findBone(t){if(!t)throw new Error("boneName cannot be null.");let c=this.bones;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.name==t)return b}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let c=this.slots;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.name==t)return b}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let c=this.skins;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.name==t)return b}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let c=this.events;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.name==t)return b}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let c=this.animations;for(let v=0,x=c.length;v<x;v++){let b=c[v];if(b.name==t)return b}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const c=this.ikConstraints;for(let v=0,x=c.length;v<x;v++){const b=c[v];if(b.name==t)return b}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const c=this.transformConstraints;for(let v=0,x=c.length;v<x;v++){const b=c[v];if(b.name==t)return b}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const c=this.pathConstraints;for(let v=0,x=c.length;v<x;v++){const b=c[v];if(b.name==t)return b}return null}findPhysicsConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const c=this.physicsConstraints;for(let v=0,x=c.length;v<x;v++){const b=c[v];if(b.name==t)return b}return null}}class V1{constructor(t=0,c,v){G(this,"slotIndex");G(this,"name");G(this,"attachment");this.slotIndex=t,this.name=c,this.attachment=v}}class Y1{constructor(t){G(this,"name");G(this,"attachments",new Array);G(this,"bones",Array());G(this,"constraints",new Array);G(this,"color",new Vt(.99607843,.61960787,.30980393,1));if(!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,c,v){if(!v)throw new Error("attachment cannot be null.");let x=this.attachments;t>=x.length&&(x.length=t+1),x[t]||(x[t]={}),x[t][c]=v}addSkin(t){for(let x=0;x<t.bones.length;x++){let b=t.bones[x],h=!1;for(let w=0;w<this.bones.length;w++)if(this.bones[w]==b){h=!0;break}h||this.bones.push(b)}for(let x=0;x<t.constraints.length;x++){let b=t.constraints[x],h=!1;for(let w=0;w<this.constraints.length;w++)if(this.constraints[w]==b){h=!0;break}h||this.constraints.push(b)}let c=t.getAttachments();for(let x=0;x<c.length;x++){var v=c[x];this.setAttachment(v.slotIndex,v.name,v.attachment)}}copySkin(t){for(let x=0;x<t.bones.length;x++){let b=t.bones[x],h=!1;for(let w=0;w<this.bones.length;w++)if(this.bones[w]==b){h=!0;break}h||this.bones.push(b)}for(let x=0;x<t.constraints.length;x++){let b=t.constraints[x],h=!1;for(let w=0;w<this.constraints.length;w++)if(this.constraints[w]==b){h=!0;break}h||this.constraints.push(b)}let c=t.getAttachments();for(let x=0;x<c.length;x++){var v=c[x];v.attachment&&(v.attachment instanceof fr?(v.attachment=v.attachment.newLinkedMesh(),this.setAttachment(v.slotIndex,v.name,v.attachment)):(v.attachment=v.attachment.copy(),this.setAttachment(v.slotIndex,v.name,v.attachment)))}}getAttachment(t,c){let v=this.attachments[t];return v?v[c]:null}removeAttachment(t,c){let v=this.attachments[t];v&&delete v[c]}getAttachments(){let t=new Array;for(var c=0;c<this.attachments.length;c++){let v=this.attachments[c];if(v)for(let x in v){let b=v[x];b&&t.push(new V1(c,x,b))}}return t}getAttachmentsForSlot(t,c){let v=this.attachments[t];if(v)for(let x in v){let b=v[x];b&&c.push(new V1(t,x,b))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,c){let v=0;for(let x=0;x<t.slots.length;x++){let b=t.slots[x],h=b.getAttachment();if(h&&v<c.attachments.length){let w=c.attachments[v];for(let e in w){let i=w[e];if(h==i){let u=this.getAttachment(v,e);u&&b.setAttachment(u);break}}}v++}}}class Z8{constructor(t,c,v){G(this,"index",0);G(this,"name");G(this,"boneData");G(this,"color",new Vt(1,1,1,1));G(this,"darkColor",null);G(this,"attachmentName",null);G(this,"blendMode",Jg.Normal);G(this,"visible",!0);if(t<0)throw new Error("index must be >= 0.");if(!c)throw new Error("name cannot be null.");if(!v)throw new Error("boneData cannot be null.");this.index=t,this.name=c,this.boneData=v}}var Jg;(function(R){R[R.Normal=0]="Normal",R[R.Additive=1]="Additive",R[R.Multiply=2]="Multiply",R[R.Screen=3]="Screen"})(Jg||(Jg={}));class q8 extends Pc{constructor(c){super(c,0,!1);G(this,"bones",new Array);G(this,"_target",null);G(this,"mixRotate",0);G(this,"mixX",0);G(this,"mixY",0);G(this,"mixScaleX",0);G(this,"mixScaleY",0);G(this,"mixShearY",0);G(this,"offsetRotation",0);G(this,"offsetX",0);G(this,"offsetY",0);G(this,"offsetScaleX",0);G(this,"offsetScaleY",0);G(this,"offsetShearY",0);G(this,"relative",!1);G(this,"local",!1)}set target(c){this._target=c}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class _8{constructor(t){G(this,"scale",1);G(this,"attachmentLoader");G(this,"linkedMeshes",new Array);this.attachmentLoader=t}readSkeletonData(t){let c=this.scale,v=new J8;v.name="";let x=new eN(t),b=x.readInt32(),h=x.readInt32();v.hash=h==0&&b==0?null:h.toString(16)+b.toString(16),v.version=x.readString(),v.x=x.readFloat(),v.y=x.readFloat(),v.width=x.readFloat(),v.height=x.readFloat(),v.referenceScale=x.readFloat()*c;let w=x.readBoolean();w&&(v.fps=x.readFloat(),v.imagesPath=x.readString(),v.audioPath=x.readString());let e=0;e=x.readInt(!0);for(let u=0;u<e;u++){let n=x.readString();if(!n)throw new Error("String in string table must not be null.");x.strings.push(n)}e=x.readInt(!0);for(let u=0;u<e;u++){let n=x.readString();if(!n)throw new Error("Bone name must not be null.");let r=u==0?null:v.bones[x.readInt(!0)],a=new k8(u,n,r);a.rotation=x.readFloat(),a.x=x.readFloat()*c,a.y=x.readFloat()*c,a.scaleX=x.readFloat(),a.scaleY=x.readFloat(),a.shearX=x.readFloat(),a.shearY=x.readFloat(),a.length=x.readFloat()*c,a.inherit=x.readByte(),a.skinRequired=x.readBoolean(),w&&(Vt.rgba8888ToColor(a.color,x.readInt32()),a.icon=x.readString()??void 0,a.visible=x.readBoolean()),v.bones.push(a)}e=x.readInt(!0);for(let u=0;u<e;u++){let n=x.readString();if(!n)throw new Error("Slot name must not be null.");let r=v.bones[x.readInt(!0)],a=new Z8(u,n,r);Vt.rgba8888ToColor(a.color,x.readInt32());let s=x.readInt32();s!=-1&&Vt.rgb888ToColor(a.darkColor=new Vt,s),a.attachmentName=x.readStringRef(),a.blendMode=x.readInt(!0),w&&(a.visible=x.readBoolean()),v.slots.push(a)}e=x.readInt(!0);for(let u=0,n;u<e;u++){let r=x.readString();if(!r)throw new Error("IK constraint data name must not be null.");let a=new z8(r);a.order=x.readInt(!0),n=x.readInt(!0);for(let o=0;o<n;o++)a.bones.push(v.bones[x.readInt(!0)]);a.target=v.bones[x.readInt(!0)];let s=x.readByte();a.skinRequired=(s&1)!=0,a.bendDirection=s&2?1:-1,a.compress=(s&4)!=0,a.stretch=(s&8)!=0,a.uniform=(s&16)!=0,s&32&&(a.mix=s&64?x.readFloat():1),s&128&&(a.softness=x.readFloat()*c),v.ikConstraints.push(a)}e=x.readInt(!0);for(let u=0,n;u<e;u++){let r=x.readString();if(!r)throw new Error("Transform constraint data name must not be null.");let a=new q8(r);a.order=x.readInt(!0),n=x.readInt(!0);for(let o=0;o<n;o++)a.bones.push(v.bones[x.readInt(!0)]);a.target=v.bones[x.readInt(!0)];let s=x.readByte();a.skinRequired=(s&1)!=0,a.local=(s&2)!=0,a.relative=(s&4)!=0,s&8&&(a.offsetRotation=x.readFloat()),s&16&&(a.offsetX=x.readFloat()*c),s&32&&(a.offsetY=x.readFloat()*c),s&64&&(a.offsetScaleX=x.readFloat()),s&128&&(a.offsetScaleY=x.readFloat()),s=x.readByte(),s&1&&(a.offsetShearY=x.readFloat()),s&2&&(a.mixRotate=x.readFloat()),s&4&&(a.mixX=x.readFloat()),s&8&&(a.mixY=x.readFloat()),s&16&&(a.mixScaleX=x.readFloat()),s&32&&(a.mixScaleY=x.readFloat()),s&64&&(a.mixShearY=x.readFloat()),v.transformConstraints.push(a)}e=x.readInt(!0);for(let u=0,n;u<e;u++){let r=x.readString();if(!r)throw new Error("Path constraint data name must not be null.");let a=new W8(r);a.order=x.readInt(!0),a.skinRequired=x.readBoolean(),n=x.readInt(!0);for(let o=0;o<n;o++)a.bones.push(v.bones[x.readInt(!0)]);a.target=v.slots[x.readInt(!0)];const s=x.readByte();a.positionMode=s&1,a.spacingMode=s>>1&3,a.rotateMode=s>>3&3,s&128&&(a.offsetRotation=x.readFloat()),a.position=x.readFloat(),a.positionMode==io.Fixed&&(a.position*=c),a.spacing=x.readFloat(),(a.spacingMode==Us.Length||a.spacingMode==Us.Fixed)&&(a.spacing*=c),a.mixRotate=x.readFloat(),a.mixX=x.readFloat(),a.mixY=x.readFloat(),v.pathConstraints.push(a)}e=x.readInt(!0);for(let u=0,n;u<e;u++){const r=x.readString();if(!r)throw new Error("Physics constraint data name must not be null.");const a=new Q8(r);a.order=x.readInt(!0),a.bone=v.bones[x.readInt(!0)];let s=x.readByte();a.skinRequired=(s&1)!=0,s&2&&(a.x=x.readFloat()),s&4&&(a.y=x.readFloat()),s&8&&(a.rotate=x.readFloat()),s&16&&(a.scaleX=x.readFloat()),s&32&&(a.shearX=x.readFloat()),a.limit=(s&64?x.readFloat():5e3)*c,a.step=1/x.readUnsignedByte(),a.inertia=x.readFloat(),a.strength=x.readFloat(),a.damping=x.readFloat(),a.massInverse=s&128?x.readFloat():1,a.wind=x.readFloat(),a.gravity=x.readFloat(),s=x.readByte(),s&1&&(a.inertiaGlobal=!0),s&2&&(a.strengthGlobal=!0),s&4&&(a.dampingGlobal=!0),s&8&&(a.massGlobal=!0),s&16&&(a.windGlobal=!0),s&32&&(a.gravityGlobal=!0),s&64&&(a.mixGlobal=!0),a.mix=s&128?x.readFloat():1,v.physicsConstraints.push(a)}let i=this.readSkin(x,v,!0,w);i&&(v.defaultSkin=i,v.skins.push(i));{let u=v.skins.length;for(Ye.setArraySize(v.skins,e=u+x.readInt(!0));u<e;u++){let n=this.readSkin(x,v,!1,w);if(!n)throw new Error("readSkin() should not have returned null.");v.skins[u]=n}}e=this.linkedMeshes.length;for(let u=0;u<e;u++){let n=this.linkedMeshes[u];const r=v.skins[n.skinIndex];if(!n.parent)throw new Error("Linked mesh parent must not be null");let a=r.getAttachment(n.slotIndex,n.parent);if(!a)throw new Error(`Parent mesh not found: ${n.parent}`);n.mesh.timelineAttachment=n.inheritTimeline?a:n.mesh,n.mesh.setParentMesh(a),n.mesh.region!=null&&n.mesh.updateRegion()}this.linkedMeshes.length=0,e=x.readInt(!0);for(let u=0;u<e;u++){let n=x.readString();if(!n)throw new Error("Event data name must not be null");let r=new Y8(n);r.intValue=x.readInt(!1),r.floatValue=x.readFloat(),r.stringValue=x.readString(),r.audioPath=x.readString(),r.audioPath&&(r.volume=x.readFloat(),r.balance=x.readFloat()),v.events.push(r)}e=x.readInt(!0);for(let u=0;u<e;u++){let n=x.readString();if(!n)throw new Error("Animatio name must not be null.");v.animations.push(this.readAnimation(x,n,v))}return v}readSkin(t,c,v,x){let b=null,h=0;if(v){if(h=t.readInt(!0),h==0)return null;b=new Y1("default")}else{let w=t.readString();if(!w)throw new Error("Skin name must not be null.");b=new Y1(w),x&&Vt.rgba8888ToColor(b.color,t.readInt32()),b.bones.length=t.readInt(!0);for(let e=0,i=b.bones.length;e<i;e++)b.bones[e]=c.bones[t.readInt(!0)];for(let e=0,i=t.readInt(!0);e<i;e++)b.constraints.push(c.ikConstraints[t.readInt(!0)]);for(let e=0,i=t.readInt(!0);e<i;e++)b.constraints.push(c.transformConstraints[t.readInt(!0)]);for(let e=0,i=t.readInt(!0);e<i;e++)b.constraints.push(c.pathConstraints[t.readInt(!0)]);for(let e=0,i=t.readInt(!0);e<i;e++)b.constraints.push(c.physicsConstraints[t.readInt(!0)]);h=t.readInt(!0)}for(let w=0;w<h;w++){let e=t.readInt(!0);for(let i=0,u=t.readInt(!0);i<u;i++){let n=t.readStringRef();if(!n)throw new Error("Attachment name must not be null");let r=this.readAttachment(t,c,b,e,n,x);r&&b.setAttachment(e,n,r)}}return b}readAttachment(t,c,v,x,b,h){let w=this.scale,e=t.readByte();const i=e&8?t.readStringRef():b;if(!i)throw new Error("Attachment name must not be null");switch(e&7){case pn.Region:{let u=e&16?t.readStringRef():null;const n=e&32?t.readInt32():4294967295,r=e&64?this.readSequence(t):null;let a=e&128?t.readFloat():0,s=t.readFloat(),o=t.readFloat(),d=t.readFloat(),l=t.readFloat(),f=t.readFloat(),m=t.readFloat();u||(u=i);let g=this.attachmentLoader.newRegionAttachment(v,i,u,r);return g?(g.path=u,g.x=s*w,g.y=o*w,g.scaleX=d,g.scaleY=l,g.rotation=a,g.width=f*w,g.height=m*w,Vt.rgba8888ToColor(g.color,n),g.sequence=r,r==null&&g.updateRegion(),g):null}case pn.BoundingBox:{let u=this.readVertices(t,(e&16)!=0),n=h?t.readInt32():0,r=this.attachmentLoader.newBoundingBoxAttachment(v,i);return r?(r.worldVerticesLength=u.length,r.vertices=u.vertices,r.bones=u.bones,h&&Vt.rgba8888ToColor(r.color,n),r):null}case pn.Mesh:{let u=e&16?t.readStringRef():i;const n=e&32?t.readInt32():4294967295,r=e&64?this.readSequence(t):null,a=t.readInt(!0),s=this.readVertices(t,(e&128)!=0),o=this.readFloatArray(t,s.length,1),d=this.readShortArray(t,(s.length-a-2)*3);let l=[],f=0,m=0;h&&(l=this.readShortArray(t,t.readInt(!0)),f=t.readFloat(),m=t.readFloat()),u||(u=i);let g=this.attachmentLoader.newMeshAttachment(v,i,u,r);return g?(g.path=u,Vt.rgba8888ToColor(g.color,n),g.bones=s.bones,g.vertices=s.vertices,g.worldVerticesLength=s.length,g.triangles=d,g.regionUVs=o,r==null&&g.updateRegion(),g.hullLength=a<<1,g.sequence=r,h&&(g.edges=l,g.width=f*w,g.height=m*w),g):null}case pn.LinkedMesh:{const u=e&16?t.readStringRef():i;if(u==null)throw new Error("Path of linked mesh must not be null");const n=e&32?t.readInt32():4294967295,r=e&64?this.readSequence(t):null,a=(e&128)!=0,s=t.readInt(!0),o=t.readStringRef();let d=0,l=0;h&&(d=t.readFloat(),l=t.readFloat());let f=this.attachmentLoader.newMeshAttachment(v,i,u,r);return f?(f.path=u,Vt.rgba8888ToColor(f.color,n),f.sequence=r,h&&(f.width=d*w,f.height=l*w),this.linkedMeshes.push(new tN(f,s,x,o,a)),f):null}case pn.Path:{const u=(e&16)!=0,n=(e&32)!=0,r=this.readVertices(t,(e&64)!=0),a=Ye.newArray(r.length/6,0);for(let d=0,l=a.length;d<l;d++)a[d]=t.readFloat()*w;const s=h?t.readInt32():0,o=this.attachmentLoader.newPathAttachment(v,i);return o?(o.closed=u,o.constantSpeed=n,o.worldVerticesLength=r.length,o.vertices=r.vertices,o.bones=r.bones,o.lengths=a,h&&Vt.rgba8888ToColor(o.color,s),o):null}case pn.Point:{const u=t.readFloat(),n=t.readFloat(),r=t.readFloat(),a=h?t.readInt32():0,s=this.attachmentLoader.newPointAttachment(v,i);return s?(s.x=n*w,s.y=r*w,s.rotation=u,h&&Vt.rgba8888ToColor(s.color,a),s):null}case pn.Clipping:{const u=t.readInt(!0),n=this.readVertices(t,(e&16)!=0);let r=h?t.readInt32():0,a=this.attachmentLoader.newClippingAttachment(v,i);return a?(a.endSlot=c.slots[u],a.worldVerticesLength=n.length,a.vertices=n.vertices,a.bones=n.bones,h&&Vt.rgba8888ToColor(a.color,r),a):null}}return null}readSequence(t){let c=new Yg(t.readInt(!0));return c.start=t.readInt(!0),c.digits=t.readInt(!0),c.setupIndex=t.readInt(!0),c}readVertices(t,c){const v=this.scale,x=t.readInt(!0),b=new iN;if(b.length=x<<1,!c)return b.vertices=this.readFloatArray(t,b.length,v),b;let h=new Array,w=new Array;for(let e=0;e<x;e++){let i=t.readInt(!0);w.push(i);for(let u=0;u<i;u++)w.push(t.readInt(!0)),h.push(t.readFloat()*v),h.push(t.readFloat()*v),h.push(t.readFloat())}return b.vertices=Ye.toFloatArray(h),b.bones=w,b}readFloatArray(t,c,v){let x=new Array(c);if(v==1)for(let b=0;b<c;b++)x[b]=t.readFloat();else for(let b=0;b<c;b++)x[b]=t.readFloat()*v;return x}readShortArray(t,c){let v=new Array(c);for(let x=0;x<c;x++)v[x]=t.readInt(!0);return v}readAnimation(t,c,v){t.readInt(!0);let x=new Array,b=this.scale;for(let i=0,u=t.readInt(!0);i<u;i++){let n=t.readInt(!0);for(let r=0,a=t.readInt(!0);r<a;r++){let s=t.readByte(),o=t.readInt(!0),d=o-1;switch(s){case mN:{let l=new kh(o,n);for(let f=0;f<o;f++)l.setFrame(f,t.readFloat(),t.readStringRef());x.push(l);break}case gN:{let l=t.readInt(!0),f=new c8(o,l,n),m=t.readFloat(),g=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255;for(let C=0,A=0;f.setFrame(C,m,g,p,y,S),C!=d;C++){let M=t.readFloat(),L=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255;switch(t.readByte()){case Ha:f.setStepped(C);break;case ka:ii(t,f,A++,C,0,m,M,g,L,1),ii(t,f,A++,C,1,m,M,p,P,1),ii(t,f,A++,C,2,m,M,y,O,1),ii(t,f,A++,C,3,m,M,S,D,1)}m=M,g=L,p=P,y=O,S=D}x.push(f);break}case pN:{let l=t.readInt(!0),f=new f8(o,l,n),m=t.readFloat(),g=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255;for(let S=0,C=0;f.setFrame(S,m,g,p,y),S!=d;S++){let A=t.readFloat(),M=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255;switch(t.readByte()){case Ha:f.setStepped(S);break;case ka:ii(t,f,C++,S,0,m,A,g,M,1),ii(t,f,C++,S,1,m,A,p,L,1),ii(t,f,C++,S,2,m,A,y,P,1)}m=A,g=M,p=L,y=P}x.push(f);break}case vN:{let l=t.readInt(!0),f=new g8(o,l,n),m=t.readFloat(),g=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255;for(let L=0,P=0;f.setFrame(L,m,g,p,y,S,C,A,M),L!=d;L++){let O=t.readFloat(),D=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255,W=t.readUnsignedByte()/255,$=t.readUnsignedByte()/255;switch(t.readByte()){case Ha:f.setStepped(L);break;case ka:ii(t,f,P++,L,0,m,O,g,D,1),ii(t,f,P++,L,1,m,O,p,I,1),ii(t,f,P++,L,2,m,O,y,F,1),ii(t,f,P++,L,3,m,O,S,H,1),ii(t,f,P++,L,4,m,O,C,k,1),ii(t,f,P++,L,5,m,O,A,W,1),ii(t,f,P++,L,6,m,O,M,$,1)}m=O,g=D,p=I,y=F,S=H,C=k,A=W,M=$}x.push(f);break}case yN:{let l=t.readInt(!0),f=new p8(o,l,n),m=t.readFloat(),g=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255;for(let M=0,L=0;f.setFrame(M,m,g,p,y,S,C,A),M!=d;M++){let P=t.readFloat(),O=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255;switch(t.readByte()){case Ha:f.setStepped(M);break;case ka:ii(t,f,L++,M,0,m,P,g,O,1),ii(t,f,L++,M,1,m,P,p,D,1),ii(t,f,L++,M,2,m,P,y,I,1),ii(t,f,L++,M,3,m,P,S,F,1),ii(t,f,L++,M,4,m,P,C,H,1),ii(t,f,L++,M,5,m,P,A,k,1)}m=P,g=O,p=D,y=I,S=F,C=H,A=k}x.push(f);break}case xN:{let l=new m8(o,t.readInt(!0),n),f=t.readFloat(),m=t.readUnsignedByte()/255;for(let g=0,p=0;l.setFrame(g,f,m),g!=d;g++){let y=t.readFloat(),S=t.readUnsignedByte()/255;switch(t.readByte()){case Ha:l.setStepped(g);break;case ka:ii(t,l,p++,g,0,f,y,m,S,1)}f=y,m=S}x.push(l)}}}}for(let i=0,u=t.readInt(!0);i<u;i++){let n=t.readInt(!0);for(let r=0,a=t.readInt(!0);r<a;r++){let s=t.readByte(),o=t.readInt(!0);if(s==fN){let l=new u8(o,n);for(let f=0;f<o;f++)l.setFrame(f,t.readFloat(),t.readByte());x.push(l);continue}let d=t.readInt(!0);switch(s){case sN:x.push(gs(t,new Xg(o,d,n),1));break;case aN:x.push(yg(t,new i8(o,d,n),b));break;case nN:x.push(gs(t,new s8(o,d,n),b));break;case rN:x.push(gs(t,new a8(o,d,n),b));break;case oN:x.push(yg(t,new n8(o,d,n),1));break;case lN:x.push(gs(t,new r8(o,d,n),1));break;case hN:x.push(gs(t,new o8(o,d,n),1));break;case dN:x.push(yg(t,new l8(o,d,n),1));break;case uN:x.push(gs(t,new h8(o,d,n),1));break;case cN:x.push(gs(t,new d8(o,d,n),1))}}}for(let i=0,u=t.readInt(!0);i<u;i++){let n=t.readInt(!0),r=t.readInt(!0),a=r-1,s=new y8(r,t.readInt(!0),n),o=t.readByte(),d=t.readFloat(),l=o&1?o&2?t.readFloat():1:0,f=o&4?t.readFloat()*b:0;for(let m=0,g=0;s.setFrame(m,d,l,f,o&8?1:-1,(o&16)!=0,(o&32)!=0),m!=a;m++){o=t.readByte();const p=t.readFloat(),y=o&1?o&2?t.readFloat():1:0,S=o&4?t.readFloat()*b:0;o&64?s.setStepped(m):o&128&&(ii(t,s,g++,m,0,d,p,l,y,1),ii(t,s,g++,m,1,d,p,f,S,b)),d=p,l=y,f=S}x.push(s)}for(let i=0,u=t.readInt(!0);i<u;i++){let n=t.readInt(!0),r=t.readInt(!0),a=r-1,s=new x8(r,t.readInt(!0),n),o=t.readFloat(),d=t.readFloat(),l=t.readFloat(),f=t.readFloat(),m=t.readFloat(),g=t.readFloat(),p=t.readFloat();for(let y=0,S=0;s.setFrame(y,o,d,l,f,m,g,p),y!=a;y++){let C=t.readFloat(),A=t.readFloat(),M=t.readFloat(),L=t.readFloat(),P=t.readFloat(),O=t.readFloat(),D=t.readFloat();switch(t.readByte()){case Ha:s.setStepped(y);break;case ka:ii(t,s,S++,y,0,o,C,d,A,1),ii(t,s,S++,y,1,o,C,l,M,1),ii(t,s,S++,y,2,o,C,f,L,1),ii(t,s,S++,y,3,o,C,m,P,1),ii(t,s,S++,y,4,o,C,g,O,1),ii(t,s,S++,y,5,o,C,p,D,1)}o=C,d=A,l=M,f=L,m=P,g=O,p=D}x.push(s)}for(let i=0,u=t.readInt(!0);i<u;i++){let n=t.readInt(!0),r=v.pathConstraints[n];for(let a=0,s=t.readInt(!0);a<s;a++){const o=t.readByte(),d=t.readInt(!0),l=t.readInt(!0);switch(o){case TN:x.push(gs(t,new w8(d,l,n),r.positionMode==io.Fixed?b:1));break;case CN:x.push(gs(t,new S8(d,l,n),r.spacingMode==Us.Length||r.spacingMode==Us.Fixed?b:1));break;case AN:let f=new T8(d,l,n),m=t.readFloat(),g=t.readFloat(),p=t.readFloat(),y=t.readFloat();for(let S=0,C=0,A=f.getFrameCount()-1;f.setFrame(S,m,g,p,y),S!=A;S++){let M=t.readFloat(),L=t.readFloat(),P=t.readFloat(),O=t.readFloat();switch(t.readByte()){case Ha:f.setStepped(S);break;case ka:ii(t,f,C++,S,0,m,M,g,L,1),ii(t,f,C++,S,1,m,M,p,P,1),ii(t,f,C++,S,2,m,M,y,O,1)}m=M,g=L,p=P,y=O}x.push(f)}}}for(let i=0,u=t.readInt(!0);i<u;i++){const n=t.readInt(!0)-1;for(let r=0,a=t.readInt(!0);r<a;r++){const s=t.readByte(),o=t.readInt(!0);if(s==DN){const l=new zg(o,n);for(let f=0;f<o;f++)l.setFrame(f,t.readFloat());x.push(l);continue}const d=t.readInt(!0);switch(s){case bN:x.push(gs(t,new C8(o,d,n),1));break;case EN:x.push(gs(t,new A8(o,d,n),1));break;case MN:x.push(gs(t,new b8(o,d,n),1));break;case LN:x.push(gs(t,new E8(o,d,n),1));break;case RN:x.push(gs(t,new M8(o,d,n),1));break;case PN:x.push(gs(t,new L8(o,d,n),1));break;case BN:x.push(gs(t,new R8(o,d,n),1))}}}for(let i=0,u=t.readInt(!0);i<u;i++){let n=v.skins[t.readInt(!0)];for(let r=0,a=t.readInt(!0);r<a;r++){let s=t.readInt(!0);for(let o=0,d=t.readInt(!0);o<d;o++){let l=t.readStringRef();if(!l)throw new Error("attachmentName must not be null.");let f=n.getAttachment(s,l),m=t.readByte(),g=t.readInt(!0),p=g-1;switch(m){case wN:{let y=f,S=y.bones,C=y.vertices,A=S?C.length/3*2:C.length,M=t.readInt(!0),L=new v8(g,M,s,y),P=t.readFloat();for(let O=0,D=0;;O++){let I,F=t.readInt(!0);if(F==0)I=S?Ye.newFloatArray(A):C;else{I=Ye.newFloatArray(A);let k=t.readInt(!0);if(F+=k,b==1)for(let W=k;W<F;W++)I[W]=t.readFloat();else for(let W=k;W<F;W++)I[W]=t.readFloat()*b;if(!S)for(let W=0,$=I.length;W<$;W++)I[W]+=C[W]}if(L.setFrame(O,P,I),O==p)break;let H=t.readFloat();switch(t.readByte()){case Ha:L.setStepped(O);break;case ka:ii(t,L,D++,O,0,P,H,0,1,1)}P=H}x.push(L);break}case SN:{let y=new Wg(g,s,f);for(let S=0;S<g;S++){let C=t.readFloat(),A=t.readInt32();y.setFrame(S,C,h2[A&15],A>>4,t.readFloat())}x.push(y);break}}}}}let h=t.readInt(!0);if(h>0){let i=new fl(h),u=v.slots.length;for(let n=0;n<h;n++){let r=t.readFloat(),a=t.readInt(!0),s=Ye.newArray(u,0);for(let f=u-1;f>=0;f--)s[f]=-1;let o=Ye.newArray(u-a,0),d=0,l=0;for(let f=0;f<a;f++){let m=t.readInt(!0);for(;d!=m;)o[l++]=d++;s[d+t.readInt(!0)]=d++}for(;d<u;)o[l++]=d++;for(let f=u-1;f>=0;f--)s[f]==-1&&(s[f]=o[--l]);i.setFrame(n,r,s)}x.push(i)}let w=t.readInt(!0);if(w>0){let i=new rc(w);for(let u=0;u<w;u++){let n=t.readFloat(),r=v.events[t.readInt(!0)],a=new V8(n,r);a.intValue=t.readInt(!1),a.floatValue=t.readFloat(),a.stringValue=t.readString(),a.stringValue==null&&(a.stringValue=r.stringValue),a.data.audioPath&&(a.volume=t.readFloat(),a.balance=t.readFloat()),i.setFrame(u,a)}x.push(i)}let e=0;for(let i=0,u=x.length;i<u;i++)e=Math.max(e,x[i].getDuration());return new d2(c,x,e)}}class eN{constructor(t,c=new Array,v=0,x=new DataView(t instanceof ArrayBuffer?t:t.buffer)){G(this,"strings");G(this,"index");G(this,"buffer");this.strings=c,this.index=v,this.buffer=x}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let c=this.readByte(),v=c&127;return c&128&&(c=this.readByte(),v|=(c&127)<<7,c&128&&(c=this.readByte(),v|=(c&127)<<14,c&128&&(c=this.readByte(),v|=(c&127)<<21,c&128&&(c=this.readByte(),v|=(c&127)<<28)))),t?v:v>>>1^-(v&1)}readStringRef(){let t=this.readInt(!0);return t==0?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let c="";for(let v=0;v<t;){let x=this.readUnsignedByte();switch(x>>4){case 12:case 13:c+=String.fromCharCode((x&31)<<6|this.readByte()&63),v+=2;break;case 14:c+=String.fromCharCode((x&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),v+=3;break;default:c+=String.fromCharCode(x),v++}}return c}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return this.readByte()!=0}}class tN{constructor(t,c,v,x,b){G(this,"parent");G(this,"skinIndex");G(this,"slotIndex");G(this,"mesh");G(this,"inheritTimeline");this.mesh=t,this.skinIndex=c,this.slotIndex=v,this.parent=x,this.inheritTimeline=b}}class iN{constructor(t=null,c=null,v=0){G(this,"bones");G(this,"vertices");G(this,"length");this.bones=t,this.vertices=c,this.length=v}}var pn;(function(R){R[R.Region=0]="Region",R[R.BoundingBox=1]="BoundingBox",R[R.Mesh=2]="Mesh",R[R.LinkedMesh=3]="LinkedMesh",R[R.Path=4]="Path",R[R.Point=5]="Point",R[R.Clipping=6]="Clipping"})(pn||(pn={}));function gs(R,t,c){let v=R.readFloat(),x=R.readFloat()*c;for(let b=0,h=0,w=t.getFrameCount()-1;t.setFrame(b,v,x),b!=w;b++){let e=R.readFloat(),i=R.readFloat()*c;switch(R.readByte()){case Ha:t.setStepped(b);break;case ka:ii(R,t,h++,b,0,v,e,x,i,c)}v=e,x=i}return t}function yg(R,t,c){let v=R.readFloat(),x=R.readFloat()*c,b=R.readFloat()*c;for(let h=0,w=0,e=t.getFrameCount()-1;t.setFrame(h,v,x,b),h!=e;h++){let i=R.readFloat(),u=R.readFloat()*c,n=R.readFloat()*c;switch(R.readByte()){case Ha:t.setStepped(h);break;case ka:ii(R,t,w++,h,0,v,i,x,u,c),ii(R,t,w++,h,1,v,i,b,n,c)}v=i,x=u,b=n}return t}function ii(R,t,c,v,x,b,h,w,e,i){t.setBezier(c,v,x,b,w,R.readFloat(),R.readFloat()*i,R.readFloat(),R.readFloat()*i,h,e)}const sN=0,aN=1,nN=2,rN=3,oN=4,lN=5,hN=6,dN=7,uN=8,cN=9,fN=10,mN=0,gN=1,pN=2,vN=3,yN=4,xN=5,wN=0,SN=1,TN=0,CN=1,AN=2,bN=0,EN=1,MN=2,LN=4,RN=5,PN=6,BN=7,DN=8,Ha=1,ka=2;class FN{constructor(){G(this,"minX",0);G(this,"minY",0);G(this,"maxX",0);G(this,"maxY",0);G(this,"boundingBoxes",new Array);G(this,"polygons",new Array);G(this,"polygonPool",new nc(()=>Ye.newFloatArray(16)))}update(t,c){if(!t)throw new Error("skeleton cannot be null.");let v=this.boundingBoxes,x=this.polygons,b=this.polygonPool,h=t.slots,w=h.length;v.length=0,b.freeAll(x),x.length=0;for(let e=0;e<w;e++){let i=h[e];if(!i.bone.active)continue;let u=i.getAttachment();if(u instanceof Rc){let n=u;v.push(n);let r=b.obtain();r.length!=n.worldVerticesLength&&(r=Ye.newFloatArray(n.worldVerticesLength)),x.push(r),n.computeWorldVertices(i,0,n.worldVerticesLength,r,0,2)}}c?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,x=Number.NEGATIVE_INFINITY,b=this.polygons;for(let h=0,w=b.length;h<w;h++){let e=b[h],i=e;for(let u=0,n=e.length;u<n;u+=2){let r=i[u],a=i[u+1];t=Math.min(t,r),c=Math.min(c,a),v=Math.max(v,r),x=Math.max(x,a)}}this.minX=t,this.minY=c,this.maxX=v,this.maxY=x}aabbContainsPoint(t,c){return t>=this.minX&&t<=this.maxX&&c>=this.minY&&c<=this.maxY}aabbIntersectsSegment(t,c,v,x){let b=this.minX,h=this.minY,w=this.maxX,e=this.maxY;if(t<=b&&v<=b||c<=h&&x<=h||t>=w&&v>=w||c>=e&&x>=e)return!1;let i=(x-c)/(v-t),u=i*(b-t)+c;if(u>h&&u<e||(u=i*(w-t)+c,u>h&&u<e))return!0;let n=(h-c)/i+t;return n>b&&n<w||(n=(e-c)/i+t,n>b&&n<w)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,c){let v=this.polygons;for(let x=0,b=v.length;x<b;x++)if(this.containsPointPolygon(v[x],t,c))return this.boundingBoxes[x];return null}containsPointPolygon(t,c,v){let x=t,b=t.length,h=b-2,w=!1;for(let e=0;e<b;e+=2){let i=x[e+1],u=x[h+1];if(i<v&&u>=v||u<v&&i>=v){let n=x[e];n+(v-i)/(u-i)*(x[h]-n)<c&&(w=!w)}h=e}return w}intersectsSegment(t,c,v,x){let b=this.polygons;for(let h=0,w=b.length;h<w;h++)if(this.intersectsSegmentPolygon(b[h],t,c,v,x))return this.boundingBoxes[h];return null}intersectsSegmentPolygon(t,c,v,x,b){let h=t,w=t.length,e=c-x,i=v-b,u=c*b-v*x,n=h[w-2],r=h[w-1];for(let a=0;a<w;a+=2){let s=h[a],o=h[a+1],d=n*o-r*s,l=n-s,f=r-o,m=e*f-i*l,g=(u*l-e*d)/m;if((g>=n&&g<=s||g>=s&&g<=n)&&(g>=c&&g<=x||g>=x&&g<=c)){let p=(u*f-i*d)/m;if((p>=r&&p<=o||p>=o&&p<=r)&&(p>=v&&p<=b||p>=b&&p<=v))return!0}n=s,r=o}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let c=this.boundingBoxes.indexOf(t);return c==-1?null:this.polygons[c]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}class Hs{constructor(){G(this,"convexPolygons",new Array);G(this,"convexPolygonsIndices",new Array);G(this,"indicesArray",new Array);G(this,"isConcaveArray",new Array);G(this,"triangles",new Array);G(this,"polygonPool",new nc(()=>new Array));G(this,"polygonIndicesPool",new nc(()=>new Array))}triangulate(t){let c=t,v=t.length>>1,x=this.indicesArray;x.length=0;for(let w=0;w<v;w++)x[w]=w;let b=this.isConcaveArray;b.length=0;for(let w=0,e=v;w<e;++w)b[w]=Hs.isConcave(w,v,c,x);let h=this.triangles;for(h.length=0;v>3;){let w=v-1,e=0,i=1;for(;;){e:if(!b[e]){let r=x[w]<<1,a=x[e]<<1,s=x[i]<<1,o=c[r],d=c[r+1],l=c[a],f=c[a+1],m=c[s],g=c[s+1];for(let p=(i+1)%v;p!=w;p=(p+1)%v){if(!b[p])continue;let y=x[p]<<1,S=c[y],C=c[y+1];if(Hs.positiveArea(m,g,o,d,S,C)&&Hs.positiveArea(o,d,l,f,S,C)&&Hs.positiveArea(l,f,m,g,S,C))break e}break}if(i==0){do{if(!b[e])break;e--}while(e>0);break}w=e,e=i,i=(i+1)%v}h.push(x[(v+e-1)%v]),h.push(x[e]),h.push(x[(e+1)%v]),x.splice(e,1),b.splice(e,1),v--;let u=(v+e-1)%v,n=e==v?0:e;b[u]=Hs.isConcave(u,v,c,x),b[n]=Hs.isConcave(n,v,c,x)}return v==3&&(h.push(x[2]),h.push(x[0]),h.push(x[1])),h}decompose(t,c){let v=t,x=this.convexPolygons;this.polygonPool.freeAll(x),x.length=0;let b=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(b),b.length=0;let h=this.polygonIndicesPool.obtain();h.length=0;let w=this.polygonPool.obtain();w.length=0;let e=-1,i=0;for(let u=0,n=c.length;u<n;u+=3){let r=c[u]<<1,a=c[u+1]<<1,s=c[u+2]<<1,o=v[r],d=v[r+1],l=v[a],f=v[a+1],m=v[s],g=v[s+1],p=!1;if(e==r){let y=w.length-4,S=Hs.winding(w[y],w[y+1],w[y+2],w[y+3],m,g),C=Hs.winding(m,g,w[0],w[1],w[2],w[3]);S==i&&C==i&&(w.push(m),w.push(g),h.push(s),p=!0)}p||(w.length>0?(x.push(w),b.push(h)):(this.polygonPool.free(w),this.polygonIndicesPool.free(h)),w=this.polygonPool.obtain(),w.length=0,w.push(o),w.push(d),w.push(l),w.push(f),w.push(m),w.push(g),h=this.polygonIndicesPool.obtain(),h.length=0,h.push(r),h.push(a),h.push(s),i=Hs.winding(o,d,l,f,m,g),e=r)}w.length>0&&(x.push(w),b.push(h));for(let u=0,n=x.length;u<n;u++){if(h=b[u],h.length==0)continue;let r=h[0],a=h[h.length-1];w=x[u];let s=w.length-4,o=w[s],d=w[s+1],l=w[s+2],f=w[s+3],m=w[0],g=w[1],p=w[2],y=w[3],S=Hs.winding(o,d,l,f,m,g);for(let C=0;C<n;C++){if(C==u)continue;let A=b[C];if(A.length!=3)continue;let M=A[0],L=A[1],P=A[2],O=x[C],D=O[O.length-2],I=O[O.length-1];if(M!=r||L!=a)continue;let F=Hs.winding(o,d,l,f,D,I),H=Hs.winding(D,I,m,g,p,y);F==S&&H==S&&(O.length=0,A.length=0,w.push(D),w.push(I),h.push(P),o=l,d=f,l=D,f=I,C=0)}}for(let u=x.length-1;u>=0;u--)w=x[u],w.length==0&&(x.splice(u,1),this.polygonPool.free(w),h=b[u],b.splice(u,1),this.polygonIndicesPool.free(h));return x}static isConcave(t,c,v,x){let b=x[(c+t-1)%c]<<1,h=x[t]<<1,w=x[(t+1)%c]<<1;return!this.positiveArea(v[b],v[b+1],v[h],v[h+1],v[w],v[w+1])}static positiveArea(t,c,v,x,b,h){return t*(h-x)+v*(c-h)+b*(x-c)>=0}static winding(t,c,v,x,b,h){let w=v-t,e=x-c;return b*e-h*w+w*c-t*e>=0?1:-1}}class oc{constructor(){G(this,"triangulator",new Hs);G(this,"clippingPolygon",new Array);G(this,"clipOutput",new Array);G(this,"clippedVertices",new Array);G(this,"clippedUVs",new Array);G(this,"clippedTriangles",new Array);G(this,"scratch",new Array);G(this,"clipAttachment",null);G(this,"clippingPolygons",null)}clipStart(t,c){if(this.clipAttachment)return 0;this.clipAttachment=c;let v=c.worldVerticesLength,x=Ye.setArraySize(this.clippingPolygon,v);c.computeWorldVertices(t,0,v,x,0,2);let b=this.clippingPolygon;oc.makeClockwise(b);let h=this.clippingPolygons=this.triangulator.decompose(b,this.triangulator.triangulate(b));for(let w=0,e=h.length;w<e;w++){let i=h[w];oc.makeClockwise(i),i.push(i[0]),i.push(i[1])}return h.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return this.clipAttachment!=null}clipTriangles(t,c,v,x,b,h,w,e){let i,u,n,r,a,s;typeof c=="number"?(i=v,u=x,n=b,r=h,a=w,s=e):(i=c,u=v,n=x,r=b,a=h,s=w),n&&r&&a&&typeof s=="boolean"?this.clipTrianglesRender(t,i,u,n,r,a,s):this.clipTrianglesNoRender(t,i,u)}clipTrianglesNoRender(t,c,v){let x=this.clipOutput,b=this.clippedVertices,h=this.clippedTriangles,w=this.clippingPolygons,e=w.length,i=0;b.length=0,h.length=0;for(let u=0;u<v;u+=3){let n=c[u]<<1,r=t[n],a=t[n+1];n=c[u+1]<<1;let s=t[n],o=t[n+1];n=c[u+2]<<1;let d=t[n],l=t[n+1];for(let f=0;f<e;f++){let m=b.length;if(this.clip(r,a,s,o,d,l,w[f],x)){let g=x.length;if(g==0)continue;let p=g>>1,y=this.clipOutput,S=Ye.setArraySize(b,m+p*2);for(let A=0;A<g;A+=2,m+=2){let M=y[A],L=y[A+1];S[m]=M,S[m+1]=L}m=h.length;let C=Ye.setArraySize(h,m+3*(p-2));p--;for(let A=1;A<p;A++,m+=3)C[m]=i,C[m+1]=i+A,C[m+2]=i+A+1;i+=p+1}else{let g=Ye.setArraySize(b,m+6);g[m]=r,g[m+1]=a,g[m+2]=s,g[m+3]=o,g[m+4]=d,g[m+5]=l,m=h.length;let p=Ye.setArraySize(h,m+3);p[m]=i,p[m+1]=i+1,p[m+2]=i+2,i+=3;break}}}}clipTrianglesRender(t,c,v,x,b,h,w){let e=this.clipOutput,i=this.clippedVertices,u=this.clippedTriangles,n=this.clippingPolygons,r=n.length,a=w?12:8,s=0;i.length=0,u.length=0;for(let o=0;o<v;o+=3){let d=c[o]<<1,l=t[d],f=t[d+1],m=x[d],g=x[d+1];d=c[o+1]<<1;let p=t[d],y=t[d+1],S=x[d],C=x[d+1];d=c[o+2]<<1;let A=t[d],M=t[d+1],L=x[d],P=x[d+1];for(let O=0;O<r;O++){let D=i.length;if(this.clip(l,f,p,y,A,M,n[O],e)){let I=e.length;if(I==0)continue;let F=y-M,H=A-p,k=l-A,W=M-f,$=1/(F*k+H*(f-M)),K=I>>1,Z=this.clipOutput,X=Ye.setArraySize(i,D+K*a);for(let Y=0;Y<I;Y+=2,D+=a){let U=Z[Y],J=Z[Y+1];X[D]=U,X[D+1]=J,X[D+2]=b.r,X[D+3]=b.g,X[D+4]=b.b,X[D+5]=b.a;let q=U-A,_=J-M,te=(F*q+H*_)*$,se=(W*q+k*_)*$,ne=1-te-se;X[D+6]=m*te+S*se+L*ne,X[D+7]=g*te+C*se+P*ne,w&&(X[D+8]=h.r,X[D+9]=h.g,X[D+10]=h.b,X[D+11]=h.a)}D=u.length;let j=Ye.setArraySize(u,D+3*(K-2));K--;for(let Y=1;Y<K;Y++,D+=3)j[D]=s,j[D+1]=s+Y,j[D+2]=s+Y+1;s+=K+1}else{let I=Ye.setArraySize(i,D+3*a);I[D]=l,I[D+1]=f,I[D+2]=b.r,I[D+3]=b.g,I[D+4]=b.b,I[D+5]=b.a,w?(I[D+6]=m,I[D+7]=g,I[D+8]=h.r,I[D+9]=h.g,I[D+10]=h.b,I[D+11]=h.a,I[D+12]=p,I[D+13]=y,I[D+14]=b.r,I[D+15]=b.g,I[D+16]=b.b,I[D+17]=b.a,I[D+18]=S,I[D+19]=C,I[D+20]=h.r,I[D+21]=h.g,I[D+22]=h.b,I[D+23]=h.a,I[D+24]=A,I[D+25]=M,I[D+26]=b.r,I[D+27]=b.g,I[D+28]=b.b,I[D+29]=b.a,I[D+30]=L,I[D+31]=P,I[D+32]=h.r,I[D+33]=h.g,I[D+34]=h.b,I[D+35]=h.a):(I[D+6]=m,I[D+7]=g,I[D+8]=p,I[D+9]=y,I[D+10]=b.r,I[D+11]=b.g,I[D+12]=b.b,I[D+13]=b.a,I[D+14]=S,I[D+15]=C,I[D+16]=A,I[D+17]=M,I[D+18]=b.r,I[D+19]=b.g,I[D+20]=b.b,I[D+21]=b.a,I[D+22]=L,I[D+23]=P),D=u.length;let F=Ye.setArraySize(u,D+3);F[D]=s,F[D+1]=s+1,F[D+2]=s+2,s+=3;break}}}}clipTrianglesUnpacked(t,c,v,x){let b=this.clipOutput,h=this.clippedVertices,w=this.clippedUVs,e=this.clippedTriangles,i=this.clippingPolygons,u=i.length,n=0;h.length=0,w.length=0,e.length=0;for(let r=0;r<v;r+=3){let a=c[r]<<1,s=t[a],o=t[a+1],d=x[a],l=x[a+1];a=c[r+1]<<1;let f=t[a],m=t[a+1],g=x[a],p=x[a+1];a=c[r+2]<<1;let y=t[a],S=t[a+1],C=x[a],A=x[a+1];for(let M=0;M<u;M++){let L=h.length;if(this.clip(s,o,f,m,y,S,i[M],b)){let P=b.length;if(P==0)continue;let O=m-S,D=y-f,I=s-y,F=S-o,H=1/(O*I+D*(o-S)),k=P>>1,W=this.clipOutput,$=Ye.setArraySize(h,L+k*2),K=Ye.setArraySize(w,L+k*2);for(let X=0;X<P;X+=2,L+=2){let j=W[X],Y=W[X+1];$[L]=j,$[L+1]=Y;let U=j-y,J=Y-S,q=(O*U+D*J)*H,_=(F*U+I*J)*H,te=1-q-_;K[L]=d*q+g*_+C*te,K[L+1]=l*q+p*_+A*te}L=e.length;let Z=Ye.setArraySize(e,L+3*(k-2));k--;for(let X=1;X<k;X++,L+=3)Z[L]=n,Z[L+1]=n+X,Z[L+2]=n+X+1;n+=k+1}else{let P=Ye.setArraySize(h,L+6);P[L]=s,P[L+1]=o,P[L+2]=f,P[L+3]=m,P[L+4]=y,P[L+5]=S;let O=Ye.setArraySize(w,L+3*2);O[L]=d,O[L+1]=l,O[L+2]=g,O[L+3]=p,O[L+4]=C,O[L+5]=A,L=e.length;let D=Ye.setArraySize(e,L+3);D[L]=n,D[L+1]=n+1,D[L+2]=n+2,n+=3;break}}}}clip(t,c,v,x,b,h,w,e){let i=e,u=!1,n;w.length%4>=2?(n=e,e=this.scratch):n=this.scratch,n.length=0,n.push(t),n.push(c),n.push(v),n.push(x),n.push(b),n.push(h),n.push(t),n.push(c),e.length=0;let r=w.length-4,a=w;for(let s=0;;s+=2){let o=a[s],d=a[s+1],l=o-a[s+2],f=d-a[s+3],m=e.length,g=n;for(let y=0,S=n.length-2;y<S;){let C=g[y],A=g[y+1];y+=2;let M=g[y],L=g[y+1],P=f*(o-M)>l*(d-L),O=f*(o-C)-l*(d-A);if(O>0){if(P){e.push(M),e.push(L);continue}let D=M-C,I=L-A,F=O/(D*f-I*l);if(F>=0&&F<=1)e.push(C+D*F),e.push(A+I*F);else{e.push(M),e.push(L);continue}}else if(P){let D=M-C,I=L-A,F=O/(D*f-I*l);if(F>=0&&F<=1)e.push(C+D*F),e.push(A+I*F),e.push(M),e.push(L);else{e.push(M),e.push(L);continue}}u=!0}if(m==e.length)return i.length=0,!0;if(e.push(e[0]),e.push(e[1]),s==r)break;let p=e;e=n,e.length=0,n=p}if(i!=e){i.length=0;for(let s=0,o=e.length-2;s<o;s++)i[s]=e[s]}else i.length=i.length-2;return u}static makeClockwise(t){let c=t,v=t.length,x=c[v-2]*c[1]-c[0]*c[v-1],b=0,h=0,w=0,e=0;for(let i=0,u=v-3;i<u;i+=2)b=c[i],h=c[i+1],w=c[i+2],e=c[i+3],x+=b*e-w*h;if(!(x<0))for(let i=0,u=v-2,n=v>>1;i<n;i+=2){let r=c[i],a=c[i+1],s=u-i;c[i]=c[s],c[i+1]=c[s+1],c[s]=r,c[s+1]=a}}}typeof Math.fround>"u"&&(Math.fround=function(R){return function(t){return R[0]=t,R[0]}}(new Float32Array(1)));class Rs{constructor(t,c={alpha:!0}){G(this,"canvas");G(this,"gl");G(this,"restorables",[]);G(this,"contextLostHandler",t=>{t&&t.preventDefault()});G(this,"contextRestoredHandler",()=>{for(let t=0,c=this.restorables.length;t<c;t++)this.restorables[t].restore()});if(t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext)this.gl=t,this.canvas=this.gl.canvas;else{const v=t;this.gl=v.getContext("webgl2",c)||v.getContext("webgl",c),this.canvas=v,v.addEventListener("webglcontextlost",this.contextLostHandler),v.addEventListener("webglcontextrestored",this.contextRestoredHandler)}}dispose(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler)}addRestorable(t){this.restorables.push(t)}removeRestorable(t){const c=this.restorables.indexOf(t);c>-1&&this.restorables.splice(c,1)}}const Wh=class Wh extends O8{constructor(c,v,x=!1){super(v);G(this,"context");G(this,"texture",null);G(this,"boundUnit",0);G(this,"useMipMaps",!1);this.context=c instanceof Rs?c:new Rs(c),this.useMipMaps=x,this.restore(),this.context.addRestorable(this)}setFilters(c,v){let x=this.context.gl;this.bind(),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,Wh.validateMagFilter(v)),this.useMipMaps=Wh.usesMipMaps(c),this.useMipMaps&&x.generateMipmap(x.TEXTURE_2D)}static validateMagFilter(c){switch(c){case Zi.MipMapLinearLinear:case Zi.MipMapLinearNearest:case Zi.MipMapNearestLinear:case Zi.MipMapNearestNearest:return Zi.Linear;default:return c}}static usesMipMaps(c){switch(c){case Zi.MipMapLinearLinear:case Zi.MipMapLinearNearest:case Zi.MipMapNearestLinear:case Zi.MipMapNearestNearest:return!0;default:return!1}}setWraps(c,v){let x=this.context.gl;this.bind(),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,v)}update(c){let v=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,this._image),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,c?v.LINEAR_MIPMAP_LINEAR:v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),c&&v.generateMipmap(v.TEXTURE_2D)}restore(){this.texture=null,this.update(this.useMipMaps)}bind(c=0){let v=this.context.gl;this.boundUnit=c,v.activeTexture(v.TEXTURE0+c),v.bindTexture(v.TEXTURE_2D,this.texture)}unbind(){let c=this.context.gl;c.activeTexture(c.TEXTURE0+this.boundUnit),c.bindTexture(c.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}};G(Wh,"DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL",!1);let Zh=Wh;class IN extends U8{constructor(t,c="",v=new f2){super(x=>new Zh(t,x),c,v)}}class gl{constructor(t=0,c=0,v=0){G(this,"x",0);G(this,"y",0);G(this,"z",0);this.x=t,this.y=c,this.z=v}setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,c,v){return this.x=t,this.y=c,this.z=v,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}normalize(){let t=this.length();return t==0?this:(t=1/t,this.x*=t,this.y*=t,this.z*=t,this)}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){let c=t.values;return this.set(this.x*c[_e]+this.y*c[ut]+this.z*c[ct]+c[et],this.x*c[ft]+this.y*c[tt]+this.z*c[mt]+c[it],this.x*c[gt]+this.y*c[pt]+this.z*c[st]+c[at])}project(t){let c=t.values,v=1/(this.x*c[Ct]+this.y*c[At]+this.z*c[bt]+c[xt]);return this.set((this.x*c[_e]+this.y*c[ut]+this.z*c[ct]+c[et])*v,(this.x*c[ft]+this.y*c[tt]+this.z*c[mt]+c[it])*v,(this.x*c[gt]+this.y*c[pt]+this.z*c[st]+c[at])*v)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let c=t.x-this.x,v=t.y-this.y,x=t.z-this.z;return Math.sqrt(c*c+v*v+x*x)}}const _e=0,ut=4,ct=8,et=12,ft=1,tt=5,mt=9,it=13,gt=2,pt=6,st=10,at=14,Ct=3,At=7,bt=11,xt=15,vs=class vs{constructor(){G(this,"temp",new Float32Array(16));G(this,"values",new Float32Array(16));let t=this.values;t[_e]=1,t[tt]=1,t[st]=1,t[xt]=1}set(t){return this.values.set(t),this}transpose(){let t=this.temp,c=this.values;return t[_e]=c[_e],t[ut]=c[ft],t[ct]=c[gt],t[et]=c[Ct],t[ft]=c[ut],t[tt]=c[tt],t[mt]=c[pt],t[it]=c[At],t[gt]=c[ct],t[pt]=c[mt],t[st]=c[st],t[at]=c[bt],t[Ct]=c[et],t[At]=c[it],t[bt]=c[at],t[xt]=c[xt],this.set(t)}identity(){let t=this.values;return t[_e]=1,t[ut]=0,t[ct]=0,t[et]=0,t[ft]=0,t[tt]=1,t[mt]=0,t[it]=0,t[gt]=0,t[pt]=0,t[st]=1,t[at]=0,t[Ct]=0,t[At]=0,t[bt]=0,t[xt]=1,this}invert(){let t=this.values,c=this.temp,v=t[Ct]*t[pt]*t[mt]*t[et]-t[gt]*t[At]*t[mt]*t[et]-t[Ct]*t[tt]*t[st]*t[et]+t[ft]*t[At]*t[st]*t[et]+t[gt]*t[tt]*t[bt]*t[et]-t[ft]*t[pt]*t[bt]*t[et]-t[Ct]*t[pt]*t[ct]*t[it]+t[gt]*t[At]*t[ct]*t[it]+t[Ct]*t[ut]*t[st]*t[it]-t[_e]*t[At]*t[st]*t[it]-t[gt]*t[ut]*t[bt]*t[it]+t[_e]*t[pt]*t[bt]*t[it]+t[Ct]*t[tt]*t[ct]*t[at]-t[ft]*t[At]*t[ct]*t[at]-t[Ct]*t[ut]*t[mt]*t[at]+t[_e]*t[At]*t[mt]*t[at]+t[ft]*t[ut]*t[bt]*t[at]-t[_e]*t[tt]*t[bt]*t[at]-t[gt]*t[tt]*t[ct]*t[xt]+t[ft]*t[pt]*t[ct]*t[xt]+t[gt]*t[ut]*t[mt]*t[xt]-t[_e]*t[pt]*t[mt]*t[xt]-t[ft]*t[ut]*t[st]*t[xt]+t[_e]*t[tt]*t[st]*t[xt];if(v==0)throw new Error("non-invertible matrix");let x=1/v;return c[_e]=t[mt]*t[at]*t[At]-t[it]*t[st]*t[At]+t[it]*t[pt]*t[bt]-t[tt]*t[at]*t[bt]-t[mt]*t[pt]*t[xt]+t[tt]*t[st]*t[xt],c[ut]=t[et]*t[st]*t[At]-t[ct]*t[at]*t[At]-t[et]*t[pt]*t[bt]+t[ut]*t[at]*t[bt]+t[ct]*t[pt]*t[xt]-t[ut]*t[st]*t[xt],c[ct]=t[ct]*t[it]*t[At]-t[et]*t[mt]*t[At]+t[et]*t[tt]*t[bt]-t[ut]*t[it]*t[bt]-t[ct]*t[tt]*t[xt]+t[ut]*t[mt]*t[xt],c[et]=t[et]*t[mt]*t[pt]-t[ct]*t[it]*t[pt]-t[et]*t[tt]*t[st]+t[ut]*t[it]*t[st]+t[ct]*t[tt]*t[at]-t[ut]*t[mt]*t[at],c[ft]=t[it]*t[st]*t[Ct]-t[mt]*t[at]*t[Ct]-t[it]*t[gt]*t[bt]+t[ft]*t[at]*t[bt]+t[mt]*t[gt]*t[xt]-t[ft]*t[st]*t[xt],c[tt]=t[ct]*t[at]*t[Ct]-t[et]*t[st]*t[Ct]+t[et]*t[gt]*t[bt]-t[_e]*t[at]*t[bt]-t[ct]*t[gt]*t[xt]+t[_e]*t[st]*t[xt],c[mt]=t[et]*t[mt]*t[Ct]-t[ct]*t[it]*t[Ct]-t[et]*t[ft]*t[bt]+t[_e]*t[it]*t[bt]+t[ct]*t[ft]*t[xt]-t[_e]*t[mt]*t[xt],c[it]=t[ct]*t[it]*t[gt]-t[et]*t[mt]*t[gt]+t[et]*t[ft]*t[st]-t[_e]*t[it]*t[st]-t[ct]*t[ft]*t[at]+t[_e]*t[mt]*t[at],c[gt]=t[tt]*t[at]*t[Ct]-t[it]*t[pt]*t[Ct]+t[it]*t[gt]*t[At]-t[ft]*t[at]*t[At]-t[tt]*t[gt]*t[xt]+t[ft]*t[pt]*t[xt],c[pt]=t[et]*t[pt]*t[Ct]-t[ut]*t[at]*t[Ct]-t[et]*t[gt]*t[At]+t[_e]*t[at]*t[At]+t[ut]*t[gt]*t[xt]-t[_e]*t[pt]*t[xt],c[st]=t[ut]*t[it]*t[Ct]-t[et]*t[tt]*t[Ct]+t[et]*t[ft]*t[At]-t[_e]*t[it]*t[At]-t[ut]*t[ft]*t[xt]+t[_e]*t[tt]*t[xt],c[at]=t[et]*t[tt]*t[gt]-t[ut]*t[it]*t[gt]-t[et]*t[ft]*t[pt]+t[_e]*t[it]*t[pt]+t[ut]*t[ft]*t[at]-t[_e]*t[tt]*t[at],c[Ct]=t[mt]*t[pt]*t[Ct]-t[tt]*t[st]*t[Ct]-t[mt]*t[gt]*t[At]+t[ft]*t[st]*t[At]+t[tt]*t[gt]*t[bt]-t[ft]*t[pt]*t[bt],c[At]=t[ut]*t[st]*t[Ct]-t[ct]*t[pt]*t[Ct]+t[ct]*t[gt]*t[At]-t[_e]*t[st]*t[At]-t[ut]*t[gt]*t[bt]+t[_e]*t[pt]*t[bt],c[bt]=t[ct]*t[tt]*t[Ct]-t[ut]*t[mt]*t[Ct]-t[ct]*t[ft]*t[At]+t[_e]*t[mt]*t[At]+t[ut]*t[ft]*t[bt]-t[_e]*t[tt]*t[bt],c[xt]=t[ut]*t[mt]*t[gt]-t[ct]*t[tt]*t[gt]+t[ct]*t[ft]*t[pt]-t[_e]*t[mt]*t[pt]-t[ut]*t[ft]*t[st]+t[_e]*t[tt]*t[st],t[_e]=c[_e]*x,t[ut]=c[ut]*x,t[ct]=c[ct]*x,t[et]=c[et]*x,t[ft]=c[ft]*x,t[tt]=c[tt]*x,t[mt]=c[mt]*x,t[it]=c[it]*x,t[gt]=c[gt]*x,t[pt]=c[pt]*x,t[st]=c[st]*x,t[at]=c[at]*x,t[Ct]=c[Ct]*x,t[At]=c[At]*x,t[bt]=c[bt]*x,t[xt]=c[xt]*x,this}determinant(){let t=this.values;return t[Ct]*t[pt]*t[mt]*t[et]-t[gt]*t[At]*t[mt]*t[et]-t[Ct]*t[tt]*t[st]*t[et]+t[ft]*t[At]*t[st]*t[et]+t[gt]*t[tt]*t[bt]*t[et]-t[ft]*t[pt]*t[bt]*t[et]-t[Ct]*t[pt]*t[ct]*t[it]+t[gt]*t[At]*t[ct]*t[it]+t[Ct]*t[ut]*t[st]*t[it]-t[_e]*t[At]*t[st]*t[it]-t[gt]*t[ut]*t[bt]*t[it]+t[_e]*t[pt]*t[bt]*t[it]+t[Ct]*t[tt]*t[ct]*t[at]-t[ft]*t[At]*t[ct]*t[at]-t[Ct]*t[ut]*t[mt]*t[at]+t[_e]*t[At]*t[mt]*t[at]+t[ft]*t[ut]*t[bt]*t[at]-t[_e]*t[tt]*t[bt]*t[at]-t[gt]*t[tt]*t[ct]*t[xt]+t[ft]*t[pt]*t[ct]*t[xt]+t[gt]*t[ut]*t[mt]*t[xt]-t[_e]*t[pt]*t[mt]*t[xt]-t[ft]*t[ut]*t[st]*t[xt]+t[_e]*t[tt]*t[st]*t[xt]}translate(t,c,v){let x=this.values;return x[et]+=t,x[it]+=c,x[at]+=v,this}copy(){return new vs().set(this.values)}projection(t,c,v,x){this.identity();let b=1/Math.tan(v*(Math.PI/180)/2),h=(c+t)/(t-c),w=2*c*t/(t-c),e=this.values;return e[_e]=b/x,e[ft]=0,e[gt]=0,e[Ct]=0,e[ut]=0,e[tt]=b,e[pt]=0,e[At]=0,e[ct]=0,e[mt]=0,e[st]=h,e[bt]=-1,e[et]=0,e[it]=0,e[at]=w,e[xt]=0,this}ortho2d(t,c,v,x){return this.ortho(t,t+v,c,c+x,0,1)}ortho(t,c,v,x,b,h){this.identity();let w=2/(c-t),e=2/(x-v),i=-2/(h-b),u=-(c+t)/(c-t),n=-(x+v)/(x-v),r=-(h+b)/(h-b),a=this.values;return a[_e]=w,a[ft]=0,a[gt]=0,a[Ct]=0,a[ut]=0,a[tt]=e,a[pt]=0,a[At]=0,a[ct]=0,a[mt]=0,a[st]=i,a[bt]=0,a[et]=u,a[it]=n,a[at]=r,a[xt]=1,this}multiply(t){let c=this.temp,v=this.values,x=t.values;return c[_e]=v[_e]*x[_e]+v[ut]*x[ft]+v[ct]*x[gt]+v[et]*x[Ct],c[ut]=v[_e]*x[ut]+v[ut]*x[tt]+v[ct]*x[pt]+v[et]*x[At],c[ct]=v[_e]*x[ct]+v[ut]*x[mt]+v[ct]*x[st]+v[et]*x[bt],c[et]=v[_e]*x[et]+v[ut]*x[it]+v[ct]*x[at]+v[et]*x[xt],c[ft]=v[ft]*x[_e]+v[tt]*x[ft]+v[mt]*x[gt]+v[it]*x[Ct],c[tt]=v[ft]*x[ut]+v[tt]*x[tt]+v[mt]*x[pt]+v[it]*x[At],c[mt]=v[ft]*x[ct]+v[tt]*x[mt]+v[mt]*x[st]+v[it]*x[bt],c[it]=v[ft]*x[et]+v[tt]*x[it]+v[mt]*x[at]+v[it]*x[xt],c[gt]=v[gt]*x[_e]+v[pt]*x[ft]+v[st]*x[gt]+v[at]*x[Ct],c[pt]=v[gt]*x[ut]+v[pt]*x[tt]+v[st]*x[pt]+v[at]*x[At],c[st]=v[gt]*x[ct]+v[pt]*x[mt]+v[st]*x[st]+v[at]*x[bt],c[at]=v[gt]*x[et]+v[pt]*x[it]+v[st]*x[at]+v[at]*x[xt],c[Ct]=v[Ct]*x[_e]+v[At]*x[ft]+v[bt]*x[gt]+v[xt]*x[Ct],c[At]=v[Ct]*x[ut]+v[At]*x[tt]+v[bt]*x[pt]+v[xt]*x[At],c[bt]=v[Ct]*x[ct]+v[At]*x[mt]+v[bt]*x[st]+v[xt]*x[bt],c[xt]=v[Ct]*x[et]+v[At]*x[it]+v[bt]*x[at]+v[xt]*x[xt],this.set(this.temp)}multiplyLeft(t){let c=this.temp,v=this.values,x=t.values;return c[_e]=x[_e]*v[_e]+x[ut]*v[ft]+x[ct]*v[gt]+x[et]*v[Ct],c[ut]=x[_e]*v[ut]+x[ut]*v[tt]+x[ct]*v[pt]+x[et]*v[At],c[ct]=x[_e]*v[ct]+x[ut]*v[mt]+x[ct]*v[st]+x[et]*v[bt],c[et]=x[_e]*v[et]+x[ut]*v[it]+x[ct]*v[at]+x[et]*v[xt],c[ft]=x[ft]*v[_e]+x[tt]*v[ft]+x[mt]*v[gt]+x[it]*v[Ct],c[tt]=x[ft]*v[ut]+x[tt]*v[tt]+x[mt]*v[pt]+x[it]*v[At],c[mt]=x[ft]*v[ct]+x[tt]*v[mt]+x[mt]*v[st]+x[it]*v[bt],c[it]=x[ft]*v[et]+x[tt]*v[it]+x[mt]*v[at]+x[it]*v[xt],c[gt]=x[gt]*v[_e]+x[pt]*v[ft]+x[st]*v[gt]+x[at]*v[Ct],c[pt]=x[gt]*v[ut]+x[pt]*v[tt]+x[st]*v[pt]+x[at]*v[At],c[st]=x[gt]*v[ct]+x[pt]*v[mt]+x[st]*v[st]+x[at]*v[bt],c[at]=x[gt]*v[et]+x[pt]*v[it]+x[st]*v[at]+x[at]*v[xt],c[Ct]=x[Ct]*v[_e]+x[At]*v[ft]+x[bt]*v[gt]+x[xt]*v[Ct],c[At]=x[Ct]*v[ut]+x[At]*v[tt]+x[bt]*v[pt]+x[xt]*v[At],c[bt]=x[Ct]*v[ct]+x[At]*v[mt]+x[bt]*v[st]+x[xt]*v[bt],c[xt]=x[Ct]*v[et]+x[At]*v[it]+x[bt]*v[at]+x[xt]*v[xt],this.set(this.temp)}lookAt(t,c,v){let x=vs.xAxis,b=vs.yAxis,h=vs.zAxis;h.setFrom(c).normalize(),x.setFrom(c).normalize(),x.cross(v).normalize(),b.setFrom(x).cross(h).normalize(),this.identity();let w=this.values;return w[_e]=x.x,w[ut]=x.y,w[ct]=x.z,w[ft]=b.x,w[tt]=b.y,w[mt]=b.z,w[gt]=-h.x,w[pt]=-h.y,w[st]=-h.z,vs.tmpMatrix.identity(),vs.tmpMatrix.values[et]=-t.x,vs.tmpMatrix.values[it]=-t.y,vs.tmpMatrix.values[at]=-t.z,this.multiply(vs.tmpMatrix),this}};G(vs,"xAxis",new gl),G(vs,"yAxis",new gl),G(vs,"zAxis",new gl),G(vs,"tmpMatrix",new vs);let al=vs;class ON{constructor(t,c){G(this,"position",new gl(0,0,0));G(this,"direction",new gl(0,0,-1));G(this,"up",new gl(0,1,0));G(this,"near",0);G(this,"far",100);G(this,"zoom",1);G(this,"viewportWidth",0);G(this,"viewportHeight",0);G(this,"projectionView",new al);G(this,"inverseProjectionView",new al);G(this,"projection",new al);G(this,"view",new al);this.viewportWidth=t,this.viewportHeight=c,this.update()}update(){let t=this.projection,c=this.view,v=this.projectionView,x=this.inverseProjectionView,b=this.zoom,h=this.viewportWidth,w=this.viewportHeight;t.ortho(b*(-h/2),b*(h/2),b*(-w/2),b*(w/2),this.near,this.far),c.lookAt(this.position,this.direction,this.up),v.set(t.values),v.multiply(c),x.set(v.values).invert()}screenToWorld(t,c,v){let x=t.x,b=v-t.y-1;return t.x=2*x/c-1,t.y=2*b/v-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}worldToScreen(t,c,v){return t.project(this.projectionView),t.x=c*(t.x+1)/2,t.y=v*(t.y+1)/2,t.z=(t.z+1)/2,t}setViewport(t,c){this.viewportWidth=t,this.viewportHeight=c}}class NN{constructor(t,c=!0){G(this,"element");G(this,"mouseX",0);G(this,"mouseY",0);G(this,"buttonDown",!1);G(this,"touch0",null);G(this,"touch1",null);G(this,"initialPinchDistance",0);G(this,"listeners",new Array);G(this,"autoPreventDefault");G(this,"isTouch",!1);G(this,"callbacks");this.element=t,this.autoPreventDefault=c,this.callbacks=this.setupCallbacks(t)}setupCallbacks(t){const c=i=>{if(i instanceof MouseEvent&&!this.isTouch){let u=t.getBoundingClientRect();this.mouseX=i.clientX-u.left,this.mouseY=i.clientY-u.top,this.buttonDown=!0,this.listeners.map(n=>{n.down&&n.down(this.mouseX,this.mouseY,i)})}},v=i=>{if(i instanceof MouseEvent&&!this.isTouch){let u=t.getBoundingClientRect();this.mouseX=i.clientX-u.left,this.mouseY=i.clientY-u.top,this.listeners.map(n=>{this.buttonDown?n.dragged&&n.dragged(this.mouseX,this.mouseY,i):n.moved&&n.moved(this.mouseX,this.mouseY,i)})}},x=i=>{if(i instanceof MouseEvent&&!this.isTouch){let u=t.getBoundingClientRect();this.mouseX=i.clientX-u.left,this.mouseY=i.clientY-u.top,this.buttonDown=!1,this.listeners.map(n=>{n.up&&n.up(this.mouseX,this.mouseY,i)})}},b=i=>{this.autoPreventDefault&&i.preventDefault(),i.deltaY,i.deltaMode==WheelEvent.DOM_DELTA_LINE,i.deltaMode==WheelEvent.DOM_DELTA_PAGE,this.listeners.map(u=>{u.wheel&&u.wheel(i.deltaY,i)})},h=i=>{if(this.isTouch=!0,!this.touch0||!this.touch1){var u=i.changedTouches;let n=u.item(0);if(!n)return;let r=t.getBoundingClientRect(),a=n.clientX-r.left,s=n.clientY-r.top,o=new GN(n.identifier,a,s);if(this.mouseX=a,this.mouseY=s,this.buttonDown=!0,!this.touch0)this.touch0=o,this.listeners.map(d=>{d.down&&d.down(o.x,o.y,i)});else if(!this.touch1){this.touch1=o;let d=this.touch1.x-this.touch0.x,l=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(d*d+l*l),this.listeners.map(f=>{f.zoom&&f.zoom(this.initialPinchDistance,this.initialPinchDistance,i)})}}this.autoPreventDefault&&i.preventDefault()},w=i=>{if(this.isTouch=!0,this.touch0){var u=i.changedTouches;let a=t.getBoundingClientRect();for(var n=0;n<u.length;n++){var r=u[n];let s=r.clientX-a.left,o=r.clientY-a.top;this.touch0.identifier===r.identifier&&(this.touch0.x=this.mouseX=s,this.touch0.y=this.mouseY=o,this.listeners.map(d=>{d.dragged&&d.dragged(s,o,i)})),this.touch1&&this.touch1.identifier===r.identifier&&(this.touch1.x=this.mouseX=s,this.touch1.y=this.mouseY=o)}if(this.touch0&&this.touch1){let s=this.touch1.x-this.touch0.x,o=this.touch1.x-this.touch0.x,d=Math.sqrt(s*s+o*o);this.listeners.map(l=>{l.zoom&&l.zoom(this.initialPinchDistance,d,i)})}}this.autoPreventDefault&&i.preventDefault()},e=i=>{if(this.isTouch=!0,this.touch0){var u=i.changedTouches;let a=t.getBoundingClientRect();for(var n=0;n<u.length;n++){var r=u[n];let s=r.clientX-a.left,o=r.clientY-a.top;if(this.touch0.identifier===r.identifier)if(this.touch0=null,this.mouseX=s,this.mouseY=o,this.listeners.map(d=>{d.up&&d.up(s,o,i)}),this.touch1)this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=!0,this.listeners.map(d=>{d.down&&d.down(this.touch0.x,this.touch0.y,i)});else{this.buttonDown=!1;break}this.touch1&&this.touch1.identifier&&(this.touch1=null)}}this.autoPreventDefault&&i.preventDefault()};return t.addEventListener("mousedown",c,!0),t.addEventListener("mousemove",v,!0),t.addEventListener("mouseup",x,!0),t.addEventListener("wheel",b,!0),t.addEventListener("touchstart",h,{passive:!1,capture:!1}),t.addEventListener("touchmove",w,{passive:!1,capture:!1}),t.addEventListener("touchend",e,{passive:!1,capture:!1}),t.addEventListener("touchcancel",e),{mouseDown:c,mouseMove:v,mouseUp:x,mouseWheel:b,touchStart:h,touchMove:w,touchEnd:e}}dispose(){const t=this.element;t.removeEventListener("mousedown",this.callbacks.mouseDown,!0),t.removeEventListener("mousemove",this.callbacks.mouseMove,!0),t.removeEventListener("mouseup",this.callbacks.mouseUp,!0),t.removeEventListener("wheel",this.callbacks.mouseWheel,!0),t.removeEventListener("touchstart",this.callbacks.touchStart,{capture:!1}),t.removeEventListener("touchmove",this.callbacks.touchMove,{capture:!1}),t.removeEventListener("touchend",this.callbacks.touchEnd,{capture:!1}),t.removeEventListener("touchcancel",this.callbacks.touchEnd),this.listeners.length=0}addListener(t){this.listeners.push(t)}removeListener(t){let c=this.listeners.indexOf(t);c>-1&&this.listeners.splice(c,1)}}class GN{constructor(t,c,v){G(this,"identifier");G(this,"x");G(this,"y");this.identifier=t,this.x=c,this.y=v}}const ri=class ri{constructor(t,c,v){G(this,"vertexShader");G(this,"fragmentShader");G(this,"context");G(this,"vs",null);G(this,"vsSource");G(this,"fs",null);G(this,"fsSource");G(this,"program",null);G(this,"tmp2x2",new Float32Array(2*2));G(this,"tmp3x3",new Float32Array(3*3));G(this,"tmp4x4",new Float32Array(4*4));this.vertexShader=c,this.fragmentShader=v,this.vsSource=c,this.fsSource=v,this.context=t instanceof Rs?t:new Rs(t),this.context.addRestorable(this),this.compile()}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let t=this.context.gl;try{if(this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs)}catch(c){throw this.dispose(),c}}compileShader(t,c){let v=this.context.gl,x=v.createShader(t);if(!x)throw new Error("Couldn't create shader.");if(v.shaderSource(x,c),v.compileShader(x),!v.getShaderParameter(x,v.COMPILE_STATUS)){let b="Couldn't compile shader: "+v.getShaderInfoLog(x);if(v.deleteShader(x),!v.isContextLost())throw new Error(b)}return x}compileProgram(t,c){let v=this.context.gl,x=v.createProgram();if(!x)throw new Error("Couldn't compile program.");if(v.attachShader(x,t),v.attachShader(x,c),v.linkProgram(x),!v.getProgramParameter(x,v.LINK_STATUS)){let b="Couldn't compile shader program: "+v.getProgramInfoLog(x);if(v.deleteProgram(x),!v.isContextLost())throw new Error(b)}return x}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(t,c){this.context.gl.uniform1i(this.getUniformLocation(t),c)}setUniformf(t,c){this.context.gl.uniform1f(this.getUniformLocation(t),c)}setUniform2f(t,c,v){this.context.gl.uniform2f(this.getUniformLocation(t),c,v)}setUniform3f(t,c,v,x){this.context.gl.uniform3f(this.getUniformLocation(t),c,v,x)}setUniform4f(t,c,v,x,b){this.context.gl.uniform4f(this.getUniformLocation(t),c,v,x,b)}setUniform2x2f(t,c){let v=this.context.gl;this.tmp2x2.set(c),v.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}setUniform3x3f(t,c){let v=this.context.gl;this.tmp3x3.set(c),v.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}setUniform4x4f(t,c){let v=this.context.gl;this.tmp4x4.set(c),v.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}getUniformLocation(t){let c=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let v=c.getUniformLocation(this.program,t);if(!v&&!c.isContextLost())throw new Error(`Couldn't find location for uniform ${t}`);return v}getAttributeLocation(t){let c=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let v=c.getAttribLocation(this.program,t);if(v==-1&&!c.isContextLost())throw new Error(`Couldn't find location for attribute ${t}`);return v}dispose(){this.context.removeRestorable(this);let t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}static newColoredTextured(t){let c=`
attribute vec4 ${ri.POSITION};
attribute vec4 ${ri.COLOR};
attribute vec2 ${ri.TEXCOORDS};
uniform mat4 ${ri.MVP_MATRIX};
varying vec4 v_color;
varying vec2 v_texCoords;

void main () {
	v_color = ${ri.COLOR};
	v_texCoords = ${ri.TEXCOORDS};
	gl_Position = ${ri.MVP_MATRIX} * ${ri.POSITION};
}
`,v=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_color;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main () {
	gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
}
`;return new ri(t,c,v)}static newTwoColoredTextured(t){let c=`
attribute vec4 ${ri.POSITION};
attribute vec4 ${ri.COLOR};
attribute vec4 ${ri.COLOR2};
attribute vec2 ${ri.TEXCOORDS};
uniform mat4 ${ri.MVP_MATRIX};
varying vec4 v_light;
varying vec4 v_dark;
varying vec2 v_texCoords;

void main () {
	v_light = ${ri.COLOR};
	v_dark = ${ri.COLOR2};
	v_texCoords = ${ri.TEXCOORDS};
	gl_Position = ${ri.MVP_MATRIX} * ${ri.POSITION};
}
`,v=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_light;
varying LOWP vec4 v_dark;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main () {
	vec4 texColor = texture2D(u_texture, v_texCoords);
	gl_FragColor.a = texColor.a * v_light.a;
	gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
}
`;return new ri(t,c,v)}static newColored(t){let c=`
attribute vec4 ${ri.POSITION};
attribute vec4 ${ri.COLOR};
uniform mat4 ${ri.MVP_MATRIX};
varying vec4 v_color;

void main () {
	v_color = ${ri.COLOR};
	gl_Position = ${ri.MVP_MATRIX} * ${ri.POSITION};
}
`,v=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_color;

void main () {
	gl_FragColor = v_color;
}
`;return new ri(t,c,v)}};G(ri,"MVP_MATRIX","u_projTrans"),G(ri,"POSITION","a_position"),G(ri,"COLOR","a_color"),G(ri,"COLOR2","a_color2"),G(ri,"TEXCOORDS","a_texCoords"),G(ri,"SAMPLER","u_texture");let Ca=ri;class m2{constructor(t,c,v,x){G(this,"attributes");G(this,"context");G(this,"vertices");G(this,"verticesBuffer",null);G(this,"verticesLength",0);G(this,"dirtyVertices",!1);G(this,"indices");G(this,"indicesBuffer",null);G(this,"indicesLength",0);G(this,"dirtyIndices",!1);G(this,"elementsPerVertex",0);this.attributes=c,this.context=t instanceof Rs?t:new Rs(t),this.elementsPerVertex=0;for(let b=0;b<c.length;b++)this.elementsPerVertex+=c[b].numElements;this.vertices=new Float32Array(v*this.elementsPerVertex),this.indices=new Uint16Array(x),this.context.addRestorable(this)}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=!0,this.verticesLength=t}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=!0,this.indicesLength=t}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(var c=0;c<this.attributes.length;c++){let v=this.attributes[c];t+=v.numElements}return t}setVertices(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length}setIndices(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length}draw(t,c){this.drawWithOffset(t,c,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(t,c,v,x){let b=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?b.drawElements(c,x,b.UNSIGNED_SHORT,v*2):b.drawArrays(c,v,x),this.unbind(t)}bind(t){let c=this.context.gl;c.bindBuffer(c.ARRAY_BUFFER,this.verticesBuffer);let v=0;for(let x=0;x<this.attributes.length;x++){let b=this.attributes[x],h=t.getAttributeLocation(b.name);c.enableVertexAttribArray(h),c.vertexAttribPointer(h,b.numElements,c.FLOAT,!1,this.elementsPerVertex*4,v*4),v+=b.numElements}this.indicesLength>0&&c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}unbind(t){let c=this.context.gl;for(let v=0;v<this.attributes.length;v++){let x=this.attributes[v],b=t.getAttributeLocation(x.name);c.disableVertexAttribArray(b)}c.bindBuffer(c.ARRAY_BUFFER,null),this.indicesLength>0&&c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null)}update(){let t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)}}class Bc{constructor(t,c,v){G(this,"name");G(this,"type");G(this,"numElements");this.name=t,this.type=c,this.numElements=v}}class Zg extends Bc{constructor(){super(Ca.POSITION,Al.Float,2)}}class X1 extends Bc{constructor(t=0){super(Ca.TEXCOORDS+(t==0?"":t),Al.Float,2)}}class qg extends Bc{constructor(){super(Ca.COLOR,Al.Float,4)}}class HN extends Bc{constructor(){super(Ca.COLOR2,Al.Float,4)}}var Al;(function(R){R[R.Float=0]="Float"})(Al||(Al={}));const fn=1,kN=769,z1=770,W1=771,j1=774,vn=class vn{constructor(t,c=!0,v=10920){G(this,"context");G(this,"drawCalls",0);G(this,"isDrawing",!1);G(this,"mesh");G(this,"shader",null);G(this,"lastTexture",null);G(this,"verticesLength",0);G(this,"indicesLength",0);G(this,"srcColorBlend");G(this,"srcAlphaBlend");G(this,"dstBlend");G(this,"cullWasEnabled",!1);if(v>10920)throw new Error("Can't have more than 10920 triangles per batch: "+v);this.context=t instanceof Rs?t:new Rs(t);let x=c?[new Zg,new qg,new X1,new HN]:[new Zg,new qg,new X1];this.mesh=new m2(t,x,v,v*3);let b=this.context.gl;this.srcColorBlend=b.SRC_ALPHA,this.srcAlphaBlend=b.ONE,this.dstBlend=b.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0;let c=this.context.gl;c.enable(c.BLEND),c.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,c){const v=vn.blendModesGL[t],x=c?v.srcRgbPma:v.srcRgb,b=v.srcAlpha,h=v.dstRgb;if(this.srcColorBlend==x&&this.srcAlphaBlend==b&&this.dstBlend==h)return;this.srcColorBlend=x,this.srcAlphaBlend=b,this.dstBlend=h,this.isDrawing&&this.flush(),this.context.gl.blendFuncSeparate(x,h,b,h)}draw(t,c,v){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+c.length>this.mesh.getVertices().length||this.indicesLength+v.length>this.mesh.getIndices().length)&&this.flush();let x=this.mesh.numVertices();this.mesh.getVertices().set(c,this.verticesLength),this.verticesLength+=c.length,this.mesh.setVerticesLength(this.verticesLength);let b=this.mesh.getIndices();for(let h=this.indicesLength,w=0;w<v.length;h++,w++)b[h]=v[w]+x;this.indicesLength+=v.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){if(this.verticesLength!=0){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++,vn.globalDrawCalls++}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;let t=this.context.gl;t.disable(t.BLEND)}getDrawCalls(){return this.drawCalls}static getAndResetGlobalDrawCalls(){let t=vn.globalDrawCalls;return vn.globalDrawCalls=0,t}dispose(){this.mesh.dispose()}};G(vn,"disableCulling",!1),G(vn,"globalDrawCalls",0),G(vn,"blendModesGL",[{srcRgb:z1,srcRgbPma:fn,dstRgb:W1,srcAlpha:fn},{srcRgb:z1,srcRgbPma:fn,dstRgb:fn,srcAlpha:fn},{srcRgb:j1,srcRgbPma:j1,dstRgb:W1,srcAlpha:fn},{srcRgb:fn,srcRgbPma:fn,dstRgb:kN,srcAlpha:fn}]);let lc=vn;class K1{constructor(t,c=10920){G(this,"context");G(this,"isDrawing",!1);G(this,"mesh");G(this,"shapeType",As.Filled);G(this,"color",new Vt(1,1,1,1));G(this,"shader",null);G(this,"vertexIndex",0);G(this,"tmp",new Sl);G(this,"srcColorBlend");G(this,"srcAlphaBlend");G(this,"dstBlend");if(c>10920)throw new Error("Can't have more than 10920 triangles per batch: "+c);this.context=t instanceof Rs?t:new Rs(t),this.mesh=new m2(t,[new Zg,new qg],c,0);let v=this.context.gl;this.srcColorBlend=v.SRC_ALPHA,this.srcAlphaBlend=v.ONE,this.dstBlend=v.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;let c=this.context.gl;c.enable(c.BLEND),c.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,c,v){this.srcColorBlend=t,this.srcAlphaBlend=c,this.dstBlend=v,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,v,c,v))}setColor(t){this.color.setFromColor(t)}setColorWith(t,c,v,x){this.color.set(t,c,v,x)}point(t,c,v){this.check(As.Point,1),v||(v=this.color),this.vertex(t,c,v)}line(t,c,v,x,b){this.check(As.Line,2),this.mesh.getVertices(),this.vertexIndex,b||(b=this.color),this.vertex(t,c,b),this.vertex(v,x,b)}triangle(t,c,v,x,b,h,w,e,i,u){this.check(t?As.Filled:As.Line,3),this.mesh.getVertices(),this.vertexIndex,e||(e=this.color),i||(i=this.color),u||(u=this.color),t?(this.vertex(c,v,e),this.vertex(x,b,i),this.vertex(h,w,u)):(this.vertex(c,v,e),this.vertex(x,b,i),this.vertex(x,b,e),this.vertex(h,w,i),this.vertex(h,w,e),this.vertex(c,v,i))}quad(t,c,v,x,b,h,w,e,i,u,n,r,a){this.check(t?As.Filled:As.Line,3),this.mesh.getVertices(),this.vertexIndex,u||(u=this.color),n||(n=this.color),r||(r=this.color),a||(a=this.color),t?(this.vertex(c,v,u),this.vertex(x,b,n),this.vertex(h,w,r),this.vertex(h,w,r),this.vertex(e,i,a),this.vertex(c,v,u)):(this.vertex(c,v,u),this.vertex(x,b,n),this.vertex(x,b,n),this.vertex(h,w,r),this.vertex(h,w,r),this.vertex(e,i,a),this.vertex(e,i,a),this.vertex(c,v,u))}rect(t,c,v,x,b,h){this.quad(t,c,v,c+x,v,c+x,v+b,c,v+b,h,h,h,h)}rectLine(t,c,v,x,b,h,w){this.check(t?As.Filled:As.Line,8),w||(w=this.color);let e=this.tmp.set(b-v,c-x);e.normalize(),h*=.5;let i=e.x*h,u=e.y*h;t?(this.vertex(c+i,v+u,w),this.vertex(c-i,v-u,w),this.vertex(x+i,b+u,w),this.vertex(x-i,b-u,w),this.vertex(x+i,b+u,w),this.vertex(c-i,v-u,w)):(this.vertex(c+i,v+u,w),this.vertex(c-i,v-u,w),this.vertex(x+i,b+u,w),this.vertex(x-i,b-u,w),this.vertex(x+i,b+u,w),this.vertex(c+i,v+u,w),this.vertex(x-i,b-u,w),this.vertex(c-i,v-u,w))}x(t,c,v){this.line(t-v,c-v,t+v,c+v),this.line(t-v,c+v,t+v,c-v)}polygon(t,c,v,x){if(v<3)throw new Error("Polygon must contain at least 3 vertices");this.check(As.Line,v*2),x||(x=this.color),this.mesh.getVertices(),this.vertexIndex,c<<=1,v<<=1;let b=t[c],h=t[c+1],w=c+v;for(let e=c,i=c+v-2;e<i;e+=2){let u=t[e],n=t[e+1],r=0,a=0;e+2>=w?(r=b,a=h):(r=t[e+2],a=t[e+3]),this.vertex(u,n,x),this.vertex(r,a,x)}}circle(t,c,v,x,b,h=0){if(h==0&&(h=Math.max(1,6*Ge.cbrt(x)|0)),h<=0)throw new Error("segments must be > 0.");b||(b=this.color);let w=2*Ge.PI/h,e=Math.cos(w),i=Math.sin(w),u=x,n=0;if(t){this.check(As.Filled,h*3+3),h--;for(let r=0;r<h;r++){this.vertex(c,v,b),this.vertex(c+u,v+n,b);let a=u;u=e*u-i*n,n=i*a+e*n,this.vertex(c+u,v+n,b)}this.vertex(c,v,b),this.vertex(c+u,v+n,b)}else{this.check(As.Line,h*2+2);for(let r=0;r<h;r++){this.vertex(c+u,v+n,b);let a=u;u=e*u-i*n,n=i*a+e*n,this.vertex(c+u,v+n,b)}this.vertex(c+u,v+n,b)}u=x,n=0,this.vertex(c+u,v+n,b)}curve(t,c,v,x,b,h,w,e,i,u){this.check(As.Line,i*2+2),u||(u=this.color);let n=1/i,r=n*n,a=n*n*n,s=3*n,o=3*r,d=6*r,l=6*a,f=t-v*2+b,m=c-x*2+h,g=(v-b)*3-t+w,p=(x-h)*3-c+e,y=t,S=c,C=(v-t)*s+f*o+g*a,A=(x-c)*s+m*o+p*a,M=f*d+g*l,L=m*d+p*l,P=g*l,O=p*l;for(;i-- >0;)this.vertex(y,S,u),y+=C,S+=A,C+=M,A+=L,M+=P,L+=O,this.vertex(y,S,u);this.vertex(y,S,u),this.vertex(w,e,u)}vertex(t,c,v){let x=this.vertexIndex,b=this.mesh.getVertices();b[x++]=t,b[x++]=c,b[x++]=v.r,b[x++]=v.g,b[x++]=v.b,b[x++]=v.a,this.vertexIndex=x}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let t=this.context.gl;t.disable(t.BLEND),this.isDrawing=!1}flush(){if(this.vertexIndex!=0){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0}}check(t,c){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t)if(this.mesh.maxVertices()-this.mesh.numVertices()<c)this.flush();else return;else this.flush(),this.shapeType=t}dispose(){this.mesh.dispose()}}var As;(function(R){R[R.Point=0]="Point",R[R.Line=1]="Line",R[R.Filled=4]="Filled"})(As||(As={}));const dl=class dl{constructor(t){G(this,"boneLineColor",new Vt(1,0,0,1));G(this,"boneOriginColor",new Vt(0,1,0,1));G(this,"attachmentLineColor",new Vt(0,0,1,.5));G(this,"triangleLineColor",new Vt(1,.64,0,.5));G(this,"pathColor",new Vt().setFromString("FF7F00"));G(this,"clipColor",new Vt(.8,0,0,2));G(this,"aabbColor",new Vt(0,1,0,.5));G(this,"drawBones",!0);G(this,"drawRegionAttachments",!0);G(this,"drawBoundingBoxes",!0);G(this,"drawMeshHull",!0);G(this,"drawMeshTriangles",!0);G(this,"drawPaths",!0);G(this,"drawSkeletonXY",!1);G(this,"drawClipping",!0);G(this,"premultipliedAlpha",!1);G(this,"scale",1);G(this,"boneWidth",2);G(this,"context");G(this,"bounds",new FN);G(this,"temp",new Array);G(this,"vertices",Ye.newFloatArray(2*1024));this.context=t instanceof Rs?t:new Rs(t)}draw(t,c,v){let x=c.x,b=c.y,h=this.context.gl,w=this.premultipliedAlpha?h.ONE:h.SRC_ALPHA;t.setBlendMode(w,h.ONE,h.ONE_MINUS_SRC_ALPHA);let e=c.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let i=0,u=e.length;i<u;i++){let n=e[i];if(v&&v.indexOf(n.data.name)>-1||!n.parent)continue;let r=n.data.length*n.a+n.worldX,a=n.data.length*n.c+n.worldY;t.rectLine(!0,n.worldX,n.worldY,r,a,this.boneWidth*this.scale)}this.drawSkeletonXY&&t.x(x,b,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let i=c.slots;for(let u=0,n=i.length;u<n;u++){let r=i[u],a=r.getAttachment();if(a instanceof Cl){let s=a,o=this.vertices;s.computeWorldVertices(r,o,0,2),t.line(o[0],o[1],o[2],o[3]),t.line(o[2],o[3],o[4],o[5]),t.line(o[4],o[5],o[6],o[7]),t.line(o[6],o[7],o[0],o[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let i=c.slots;for(let u=0,n=i.length;u<n;u++){let r=i[u];if(!r.bone.active)continue;let a=r.getAttachment();if(!(a instanceof fr))continue;let s=a,o=this.vertices;s.computeWorldVertices(r,0,s.worldVerticesLength,o,0,2);let d=s.triangles,l=s.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let f=0,m=d.length;f<m;f+=3){let g=d[f]*2,p=d[f+1]*2,y=d[f+2]*2;t.triangle(!1,o[g],o[g+1],o[p],o[p+1],o[y],o[y+1])}}if(this.drawMeshHull&&l>0){t.setColor(this.attachmentLineColor),l=(l>>1)*2;let f=o[l-2],m=o[l-1];for(let g=0,p=l;g<p;g+=2){let y=o[g],S=o[g+1];t.line(y,S,f,m),f=y,m=S}}}}if(this.drawBoundingBoxes){let i=this.bounds;i.update(c,!0),t.setColor(this.aabbColor),t.rect(!1,i.minX,i.minY,i.getWidth(),i.getHeight());let u=i.polygons,n=i.boundingBoxes;for(let r=0,a=u.length;r<a;r++){let s=u[r];t.setColor(n[r].color),t.polygon(s,0,s.length)}}if(this.drawPaths){let i=c.slots;for(let u=0,n=i.length;u<n;u++){let r=i[u];if(!r.bone.active)continue;let a=r.getAttachment();if(!(a instanceof to))continue;let s=a,o=s.worldVerticesLength,d=this.temp=Ye.setArraySize(this.temp,o,0);s.computeWorldVertices(r,0,o,d,0,2);let l=this.pathColor,f=d[2],m=d[3],g=0,p=0;if(s.closed){t.setColor(l);let y=d[0],S=d[1],C=d[o-2],A=d[o-1];g=d[o-4],p=d[o-3],t.curve(f,m,y,S,C,A,g,p,32),t.setColor(dl.LIGHT_GRAY),t.line(f,m,y,S),t.line(g,p,C,A)}o-=4;for(let y=4;y<o;y+=6){let S=d[y],C=d[y+1],A=d[y+2],M=d[y+3];g=d[y+4],p=d[y+5],t.setColor(l),t.curve(f,m,S,C,A,M,g,p,32),t.setColor(dl.LIGHT_GRAY),t.line(f,m,S,C),t.line(g,p,A,M),f=g,m=p}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let i=0,u=e.length;i<u;i++){let n=e[i];v&&v.indexOf(n.data.name)>-1||t.circle(!0,n.worldX,n.worldY,3*this.scale,this.boneOriginColor,8)}}if(this.drawClipping){let i=c.slots;t.setColor(this.clipColor);for(let u=0,n=i.length;u<n;u++){let r=i[u];if(!r.bone.active)continue;let a=r.getAttachment();if(!(a instanceof Rl))continue;let s=a,o=s.worldVerticesLength,d=this.temp=Ye.setArraySize(this.temp,o,0);s.computeWorldVertices(r,0,o,d,0,2);for(let l=0,f=d.length;l<f;l+=2){let m=d[l],g=d[l+1],p=d[(l+2)%d.length],y=d[(l+3)%d.length];t.line(m,g,p,y)}}}}dispose(){}};G(dl,"LIGHT_GRAY",new Vt(192/255,192/255,192/255,1)),G(dl,"GREEN",new Vt(0,1,0,1));let _g=dl;class UN{constructor(t,c,v){G(this,"vertices");G(this,"numVertices");G(this,"numFloats");this.vertices=t,this.numVertices=c,this.numFloats=v}}const mc=class mc{constructor(t,c=!0){G(this,"premultipliedAlpha",!1);G(this,"tempColor",new Vt);G(this,"tempColor2",new Vt);G(this,"vertices");G(this,"vertexSize",8);G(this,"twoColorTint",!1);G(this,"renderable",new UN([],0,0));G(this,"clipper",new oc);G(this,"temp",new Sl);G(this,"temp2",new Sl);G(this,"temp3",new Vt);G(this,"temp4",new Vt);this.twoColorTint=c,c&&(this.vertexSize+=4),this.vertices=Ye.newFloatArray(this.vertexSize*1024)}draw(t,c,v=-1,x=-1,b=null){let h=this.clipper,w=this.premultipliedAlpha,e=this.twoColorTint,i=null,u=this.renderable,n,r,a=c.drawOrder,s,o=c.color,d=e?12:8,l=!1;v==-1&&(l=!0);for(let f=0,m=a.length;f<m;f++){let g=h.isClipping()?2:d,p=a[f];if(!p.bone.active){h.clipEndWithSlot(p);continue}if(v>=0&&v==p.data.index&&(l=!0),!l){h.clipEndWithSlot(p);continue}x>=0&&x==p.data.index&&(l=!1);let y=p.getAttachment(),S;if(y instanceof Cl){let C=y;u.vertices=this.vertices,u.numVertices=4,u.numFloats=g<<2,C.computeWorldVertices(p,u.vertices,0,g),r=mc.QUAD_TRIANGLES,n=C.uvs,S=C.region.texture,s=C.color}else if(y instanceof fr){let C=y;u.vertices=this.vertices,u.numVertices=C.worldVerticesLength>>1,u.numFloats=u.numVertices*g,u.numFloats>u.vertices.length&&(u.vertices=this.vertices=Ye.newFloatArray(u.numFloats)),C.computeWorldVertices(p,0,C.worldVerticesLength,u.vertices,0,g),r=C.triangles,S=C.region.texture,n=C.uvs,s=C.color}else if(y instanceof Rl){let C=y;h.clipStart(p,C);continue}else{h.clipEndWithSlot(p);continue}if(S){let C=p.color,A=this.tempColor;A.r=o.r*C.r*s.r,A.g=o.g*C.g*s.g,A.b=o.b*C.b*s.b,A.a=o.a*C.a*s.a,w&&(A.r*=A.a,A.g*=A.a,A.b*=A.a);let M=this.tempColor2;p.darkColor?(w?(M.r=p.darkColor.r*A.a,M.g=p.darkColor.g*A.a,M.b=p.darkColor.b*A.a):M.setFromColor(p.darkColor),M.a=w?1:0):M.set(0,0,0,1);let L=p.data.blendMode;if(L!=i&&(i=L,t.setBlendMode(i,w)),h.isClipping()){h.clipTriangles(u.vertices,r,r.length,n,A,M,e);let P=new Float32Array(h.clippedVertices),O=h.clippedTriangles;b&&b(P,P.length,d),t.draw(S,P,O)}else{let P=u.vertices;if(e)for(let D=2,I=0,F=u.numFloats;D<F;D+=d,I+=2)P[D]=A.r,P[D+1]=A.g,P[D+2]=A.b,P[D+3]=A.a,P[D+4]=n[I],P[D+5]=n[I+1],P[D+6]=M.r,P[D+7]=M.g,P[D+8]=M.b,P[D+9]=M.a;else for(let D=2,I=0,F=u.numFloats;D<F;D+=d,I+=2)P[D]=A.r,P[D+1]=A.g,P[D+2]=A.b,P[D+3]=A.a,P[D+4]=n[I],P[D+5]=n[I+1];let O=u.vertices.subarray(0,u.numFloats);b&&b(u.vertices,u.numFloats,d),t.draw(S,O,r)}}h.clipEndWithSlot(p)}h.clipEnd()}getSkeletonClipping(){return this.clipper}};G(mc,"QUAD_TRIANGLES",[0,1,2,2,3,0]);let ep=mc;const ce=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],Au=[0,1,2,2,3,0],bu=new Vt(1,1,1,1);class VN{constructor(t,c,v=!0){G(this,"context");G(this,"canvas");G(this,"camera");G(this,"batcher");G(this,"twoColorTint",!1);G(this,"batcherShader");G(this,"shapes");G(this,"shapesShader");G(this,"activeRenderer",null);G(this,"skeletonRenderer");G(this,"skeletonDebugRenderer");this.canvas=t,this.context=c instanceof Rs?c:new Rs(c),this.twoColorTint=v,this.camera=new ON(t.width,t.height),this.batcherShader=v?Ca.newTwoColoredTextured(this.context):Ca.newColoredTextured(this.context),this.batcher=new lc(this.context,v),this.shapesShader=Ca.newColored(this.context),this.shapes=new K1(this.context),this.skeletonRenderer=new ep(this.context,v),this.skeletonDebugRenderer=new _g(this.context)}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(t,c=!1,v=-1,x=-1,b=null){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=c,this.skeletonRenderer.draw(this.batcher,t,v,x,b)}drawSkeletonDebug(t,c=!1,v){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=c,this.skeletonDebugRenderer.draw(this.shapes,t,v)}drawTexture(t,c,v,x,b,h){this.enableRenderer(this.batcher),h||(h=bu);var w=0;ce[w++]=c,ce[w++]=v,ce[w++]=h.r,ce[w++]=h.g,ce[w++]=h.b,ce[w++]=h.a,ce[w++]=0,ce[w++]=1,this.twoColorTint&&(ce[w++]=0,ce[w++]=0,ce[w++]=0,ce[w++]=0),ce[w++]=c+x,ce[w++]=v,ce[w++]=h.r,ce[w++]=h.g,ce[w++]=h.b,ce[w++]=h.a,ce[w++]=1,ce[w++]=1,this.twoColorTint&&(ce[w++]=0,ce[w++]=0,ce[w++]=0,ce[w++]=0),ce[w++]=c+x,ce[w++]=v+b,ce[w++]=h.r,ce[w++]=h.g,ce[w++]=h.b,ce[w++]=h.a,ce[w++]=1,ce[w++]=0,this.twoColorTint&&(ce[w++]=0,ce[w++]=0,ce[w++]=0,ce[w++]=0),ce[w++]=c,ce[w++]=v+b,ce[w++]=h.r,ce[w++]=h.g,ce[w++]=h.b,ce[w++]=h.a,ce[w++]=0,ce[w++]=0,this.twoColorTint&&(ce[w++]=0,ce[w++]=0,ce[w++]=0,ce[w]=0),this.batcher.draw(t,ce,Au)}drawTextureUV(t,c,v,x,b,h,w,e,i,u){this.enableRenderer(this.batcher),u||(u=bu);var n=0;ce[n++]=c,ce[n++]=v,ce[n++]=u.r,ce[n++]=u.g,ce[n++]=u.b,ce[n++]=u.a,ce[n++]=h,ce[n++]=w,this.twoColorTint&&(ce[n++]=0,ce[n++]=0,ce[n++]=0,ce[n++]=0),ce[n++]=c+x,ce[n++]=v,ce[n++]=u.r,ce[n++]=u.g,ce[n++]=u.b,ce[n++]=u.a,ce[n++]=e,ce[n++]=w,this.twoColorTint&&(ce[n++]=0,ce[n++]=0,ce[n++]=0,ce[n++]=0),ce[n++]=c+x,ce[n++]=v+b,ce[n++]=u.r,ce[n++]=u.g,ce[n++]=u.b,ce[n++]=u.a,ce[n++]=e,ce[n++]=i,this.twoColorTint&&(ce[n++]=0,ce[n++]=0,ce[n++]=0,ce[n++]=0),ce[n++]=c,ce[n++]=v+b,ce[n++]=u.r,ce[n++]=u.g,ce[n++]=u.b,ce[n++]=u.a,ce[n++]=h,ce[n++]=i,this.twoColorTint&&(ce[n++]=0,ce[n++]=0,ce[n++]=0,ce[n]=0),this.batcher.draw(t,ce,Au)}drawTextureRotated(t,c,v,x,b,h,w,e,i){this.enableRenderer(this.batcher),i||(i=bu);let u=c+h,n=v+w,r=-h,a=-w,s=x-h,o=b-w,d=r,l=a,f=r,m=o,g=s,p=o,y=s,S=a,C=0,A=0,M=0,L=0,P=0,O=0,D=0,I=0;if(e!=0){let H=Ge.cosDeg(e),k=Ge.sinDeg(e);C=H*d-k*l,A=k*d+H*l,D=H*f-k*m,I=k*f+H*m,P=H*g-k*p,O=k*g+H*p,M=P+(C-D),L=O+(A-I)}else C=d,A=l,D=f,I=m,P=g,O=p,M=y,L=S;C+=u,A+=n,M+=u,L+=n,P+=u,O+=n,D+=u,I+=n;var F=0;ce[F++]=C,ce[F++]=A,ce[F++]=i.r,ce[F++]=i.g,ce[F++]=i.b,ce[F++]=i.a,ce[F++]=0,ce[F++]=1,this.twoColorTint&&(ce[F++]=0,ce[F++]=0,ce[F++]=0,ce[F++]=0),ce[F++]=M,ce[F++]=L,ce[F++]=i.r,ce[F++]=i.g,ce[F++]=i.b,ce[F++]=i.a,ce[F++]=1,ce[F++]=1,this.twoColorTint&&(ce[F++]=0,ce[F++]=0,ce[F++]=0,ce[F++]=0),ce[F++]=P,ce[F++]=O,ce[F++]=i.r,ce[F++]=i.g,ce[F++]=i.b,ce[F++]=i.a,ce[F++]=1,ce[F++]=0,this.twoColorTint&&(ce[F++]=0,ce[F++]=0,ce[F++]=0,ce[F++]=0),ce[F++]=D,ce[F++]=I,ce[F++]=i.r,ce[F++]=i.g,ce[F++]=i.b,ce[F++]=i.a,ce[F++]=0,ce[F++]=0,this.twoColorTint&&(ce[F++]=0,ce[F++]=0,ce[F++]=0,ce[F]=0),this.batcher.draw(t,ce,Au)}drawRegion(t,c,v,x,b,h){this.enableRenderer(this.batcher),h||(h=bu);var w=0;ce[w++]=c,ce[w++]=v,ce[w++]=h.r,ce[w++]=h.g,ce[w++]=h.b,ce[w++]=h.a,ce[w++]=t.u,ce[w++]=t.v2,this.twoColorTint&&(ce[w++]=0,ce[w++]=0,ce[w++]=0,ce[w++]=0),ce[w++]=c+x,ce[w++]=v,ce[w++]=h.r,ce[w++]=h.g,ce[w++]=h.b,ce[w++]=h.a,ce[w++]=t.u2,ce[w++]=t.v2,this.twoColorTint&&(ce[w++]=0,ce[w++]=0,ce[w++]=0,ce[w++]=0),ce[w++]=c+x,ce[w++]=v+b,ce[w++]=h.r,ce[w++]=h.g,ce[w++]=h.b,ce[w++]=h.a,ce[w++]=t.u2,ce[w++]=t.v,this.twoColorTint&&(ce[w++]=0,ce[w++]=0,ce[w++]=0,ce[w++]=0),ce[w++]=c,ce[w++]=v+b,ce[w++]=h.r,ce[w++]=h.g,ce[w++]=h.b,ce[w++]=h.a,ce[w++]=t.u,ce[w++]=t.v,this.twoColorTint&&(ce[w++]=0,ce[w++]=0,ce[w++]=0,ce[w]=0),this.batcher.draw(t.page.texture,ce,Au)}line(t,c,v,x,b,h){this.enableRenderer(this.shapes),this.shapes.line(t,c,v,x,b)}triangle(t,c,v,x,b,h,w,e,i,u){this.enableRenderer(this.shapes),this.shapes.triangle(t,c,v,x,b,h,w,e,i,u)}quad(t,c,v,x,b,h,w,e,i,u,n,r,a){this.enableRenderer(this.shapes),this.shapes.quad(t,c,v,x,b,h,w,e,i,u,n,r,a)}rect(t,c,v,x,b,h){this.enableRenderer(this.shapes),this.shapes.rect(t,c,v,x,b,h)}rectLine(t,c,v,x,b,h,w){this.enableRenderer(this.shapes),this.shapes.rectLine(t,c,v,x,b,h,w)}polygon(t,c,v,x){this.enableRenderer(this.shapes),this.shapes.polygon(t,c,v,x)}circle(t,c,v,x,b,h=0){this.enableRenderer(this.shapes),this.shapes.circle(t,c,v,x,b,h)}curve(t,c,v,x,b,h,w,e,i,u){this.enableRenderer(this.shapes),this.shapes.curve(t,c,v,x,b,h,w,e,i,u)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(t){let c=this.canvas;var v=window.devicePixelRatio||1,x=Math.round(c.clientWidth*v),b=Math.round(c.clientHeight*v);if((c.width!=x||c.height!=b)&&(c.width=x,c.height=b),this.context.gl.viewport(0,0,c.width,c.height),t===hc.Expand)this.camera.setViewport(x,b);else if(t===hc.Fit){let h=c.width,w=c.height,e=this.camera.viewportWidth,i=this.camera.viewportHeight,u=i/e,n=w/h,r=u<n?e/h:i/w;this.camera.setViewport(h*r,w*r)}this.camera.update()}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof lc?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(Ca.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof K1?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(Ca.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}}var hc;(function(R){R[R.Stretch=0]="Stretch",R[R.Expand=1]="Expand",R[R.Fit=2]="Fit"})(hc||(hc={}));class YN{constructor(t,c){G(this,"config");G(this,"context");G(this,"time",new t8);G(this,"htmlCanvas");G(this,"gl");G(this,"renderer");G(this,"assetManager");G(this,"input");G(this,"disposed",!1);this.config=c,c.pathPrefix||(c.pathPrefix=""),c.app||(c.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{},dispose:()=>{}}),c.webglConfig||(c.webglConfig={alpha:!0}),this.htmlCanvas=t,this.context=new Rs(t,c.webglConfig),this.renderer=new VN(t,this.context),this.gl=this.context.gl,this.assetManager=new IN(this.context,c.pathPrefix),this.input=new NN(t),c.app.loadAssets&&c.app.loadAssets(this);let v=()=>{this.disposed||(requestAnimationFrame(v),this.time.update(),c.app.update&&c.app.update(this,this.time.delta),c.app.render&&c.app.render(this))},x=()=>{if(!this.disposed){if(this.assetManager.isLoadingComplete()){this.assetManager.hasErrors()?c.app.error&&c.app.error(this,this.assetManager.getErrors()):(c.app.initialize&&c.app.initialize(this),v());return}requestAnimationFrame(x)}};requestAnimationFrame(x)}clear(t,c,v,x){this.gl.clearColor(t,c,v,x),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}dispose(){this.config.app.dispose&&this.config.app.dispose(this),this.disposed=!0}}class XN{constructor(){this.skeleton=null,this.animationState=null,this.spineCanvas=null,this.initializationPromise=null,this.isInitialized=!1}loadAssets(t){t.assetManager.loadTextureAtlas("frogPlayer.atlas"),t.assetManager.loadBinary("frogPlayer.skel")}initialize(t){this.spineCanvas=t;const c=t.assetManager.require("frogPlayer.atlas"),v=new H8(c),b=new _8(v).readSkeletonData(t.assetManager.require("frogPlayer.skel"));this.skeleton=new Qg(b),this.skeleton.setToSetupPose();const h=new I8(b);this.animationState=new jg(h),this.animationState.setAnimation(0,"idle",!0),this.skeleton.x=0,this.skeleton.y=-80,this.skeleton.scaleX=-.175,this.skeleton.scaleY=.175,this.isInitialized=!0}async waitForInitialization(){for(;!this.isInitialized||!this.skeleton||!this.spineCanvas;)await new Promise(t=>setTimeout(t,50))}async equipItem(t,c){if(await this.waitForInitialization(),!this.spineCanvas||!this.skeleton){console.warn("Cannot equip item: SpineCanvas or skeleton not initialized");return}await KN(this.spineCanvas,this.skeleton,t,c)}async syncAllEquipment(t){if(await this.waitForInitialization(),!this.spineCanvas||!this.skeleton){console.warn("Cannot sync equipment: SpineCanvas or skeleton not initialized");return}const c=Object.keys(Lc);for(const v of c){const x=t[v],b=x==null?void 0:x.definition;await this.equipItem(b,v)}}update(t,c){!this.skeleton||!this.animationState||(this.animationState.update(c),this.animationState.apply(this.skeleton),this.skeleton.updateWorldTransform(or.update))}render(t){this.skeleton&&(t.clear(0,0,0,0),t.renderer.begin(),t.renderer.drawSkeleton(this.skeleton,!0),t.renderer.end())}error(t,c){console.error("Failed to load Spine character:",c)}}const zN=({width:R=250,height:t=250,equipmentSlots:c={},className:v})=>{const x=ve.useRef(null),b=ve.useRef(null),h=ve.useRef(null);return ve.useEffect(()=>{if(!x.current)return;const w=x.current,e=new XN,i=new YN(w,{app:e,pathPrefix:"/assets/spine/",webglConfig:{alpha:!0,antialias:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!1,powerPreference:"default",stencil:!1,depth:!1,desynchronized:!1}});return b.current=i,h.current=e,()=>{i.dispose(),b.current=null,h.current=null}},[]),ve.useEffect(()=>{const w=h.current;if(!w||!w.skeleton){console.log("Equipment to apply (waiting for skeleton):",c);return}const e=Object.entries(c).map(([i,u])=>w.equipItem(u,i));Promise.all(e).catch(i=>{console.error("Failed to apply equipment:",i)})},[c]),V.jsx("canvas",{ref:x,width:R,height:t,className:v,style:{width:`${R}px`,height:`${t}px`,imageRendering:"auto"}})};async function $1(R){return new Promise((t,c)=>{const v=new Image;v.onload=()=>t(v),v.onerror=()=>c(new Error(`Failed to load texture: ${R}`)),v.crossOrigin="anonymous",v.src=R})}async function WN(R,t,c){const v=Lc[c]||[],x=[];for(const b of v){const h=WS(t,b.defaultAsset),w=Hg(b,h);try{const e=await $1(w),i=new Zh(R.gl,e);i.setFilters(Zi.Linear,Zi.Linear),x.push({config:b,glTexture:i,image:e})}catch{console.warn(`Failed to load ${c} texture: ${h}, trying default`);try{const i=Hg(b,b.defaultAsset),u=await $1(i),n=new Zh(R.gl,u);n.setFilters(Zi.Linear,Zi.Linear),x.push({config:b,glTexture:n,image:u})}catch(i){console.error(`Failed to load default texture for ${c}:`,i)}}}return x}function jN(R,t){const c=R.findSlot(t.config.attachmentName);if(!c||!c.getAttachment())return console.warn(`Slot '${t.config.attachmentName}' not found or has no attachment`),!1;try{const v=c.getAttachment();if(v){const x=new u2;x.texture=t.glTexture,x.u=0,x.v=0,x.u2=1,x.v2=1,x.width=t.image.width,x.height=t.image.height,x.originalWidth=t.image.width,x.originalHeight=t.image.height;const b=v.copy();return b.region=x,b.updateRegion(),c.setAttachment(b),!0}else return console.warn(`Attachment '${t.config.attachmentName}' is not a RegionAttachment, type:`,typeof v),!1}catch(v){return console.error(`Failed to apply texture for ${t.config.attachmentName}:`,v),!1}}async function KN(R,t,c,v){const x=await WN(R,c,v);for(const b of x)jN(t,b)||console.warn(`Failed to apply texture for ${v} attachment: ${b.config.attachmentName}`)}const $N=({equipmentSlots:R,cosmeticSlots:t,upgradeAvailability:c,currentView:v,onViewChange:x})=>{const[b,h]=ve.useState("equipment"),w=v!==void 0?v:b,e=S=>{x?x(S):h(S)},i=["Head","Chest","Amulet"],u=["Weapon","Ring","Belt"],n=["Hat","Cloak"],r=["Shirt"],a=Me(S=>S.playerCombatCharacter),s=Me(S=>S.playerStats),o=Object.values(R).filter(S=>!!S);let d=0,l=0,f=0;a&&s&&(d=hr(s.stats.MaxHp.value,"MaxHp",o,a.getSkillEffects()),l=hr(s.stats.Attack.value,"Attack",o,a.getSkillEffects()),f=hr(s.stats.Defense.value,"Defense",o,a.getSkillEffects()));const m=w==="equipment"?i:n,g=w==="equipment"?u:r,p=w==="equipment"?R:t,y={};return Object.entries(p).forEach(([S,C])=>{y[S]=C==null?void 0:C.definition}),V.jsxs("div",{className:"paperdoll-view",children:[V.jsxs("div",{className:"view-toggle-buttons",children:[V.jsx("button",{className:`view-toggle-button ${w==="equipment"?"active":""}`,onClick:()=>e("equipment"),children:"Equip"}),V.jsx("button",{className:`view-toggle-button ${w==="cosmetic"?"active":""}`,onClick:()=>e("cosmetic"),children:"Appearance"})]}),V.jsxs("div",{className:`equipment-container ${w}`,children:[V.jsx("div",{className:"equipment-slots left-slots",children:m.map(S=>{var C;return V.jsx(eo,{type:S,item:p[S]||null,isEquipped:!!p[S],canUpgrade:c.get(((C=p[S])==null?void 0:C.id)||"")||!1},S)})}),V.jsx("div",{className:"character-container",children:V.jsx(zN,{width:300,height:250,equipmentSlots:y,className:"spine-character"})}),V.jsx("div",{className:"equipment-slots right-slots",children:g.map(S=>{var C;return V.jsx(eo,{type:S,item:p[S]||null,isEquipped:!!p[S],canUpgrade:c.get(((C=p[S])==null?void 0:C.id)||"")||!1},S)})})]}),w==="equipment"&&V.jsxs("div",{className:"character-stats",children:[V.jsxs("div",{className:"paperdoll-stat-item",children:[V.jsx("img",{src:Et.stats.health,alt:"HP"}),V.jsx("span",{children:d})]}),V.jsxs("div",{className:"paperdoll-stat-item",children:[V.jsx("img",{src:Et.stats.attack,alt:"Attack"}),V.jsx("span",{children:l})]}),V.jsxs("div",{className:"paperdoll-stat-item",children:[V.jsx("img",{src:Et.stats.defense,alt:"Defense"}),V.jsx("span",{children:f})]})]})]})};function tp(){return tp=Object.assign?Object.assign.bind():function(R){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var v in c)({}).hasOwnProperty.call(c,v)&&(R[v]=c[v])}return R},tp.apply(null,arguments)}function Q1(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function ip(R,t){return ip=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,v){return c.__proto__=v,c},ip(R,t)}function QN(R,t){R.prototype=Object.create(t.prototype),R.prototype.constructor=R,ip(R,t)}var J1=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function JN(R,t){return!!(R===t||J1(R)&&J1(t))}function ZN(R,t){if(R.length!==t.length)return!1;for(var c=0;c<R.length;c++)if(!JN(R[c],t[c]))return!1;return!0}function xg(R,t){t===void 0&&(t=ZN);var c,v=[],x,b=!1;function h(){for(var w=[],e=0;e<arguments.length;e++)w[e]=arguments[e];return b&&c===this&&t(w,v)||(x=R.apply(this,w),b=!0,c=this,v=w),x}return h}var qN=typeof performance=="object"&&typeof performance.now=="function",Z1=qN?function(){return performance.now()}:function(){return Date.now()};function q1(R){cancelAnimationFrame(R.id)}function _N(R,t){var c=Z1();function v(){Z1()-c>=t?R.call(null):x.id=requestAnimationFrame(v)}var x={id:requestAnimationFrame(v)};return x}var wg=-1;function e9(R){if(R===void 0&&(R=!1),wg===-1||R){var t=document.createElement("div"),c=t.style;c.width="50px",c.height="50px",c.overflow="scroll",document.body.appendChild(t),wg=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return wg}var _o=null;function _1(R){if(R===void 0&&(R=!1),_o===null||R){var t=document.createElement("div"),c=t.style;c.width="50px",c.height="50px",c.overflow="scroll",c.direction="rtl";var v=document.createElement("div"),x=v.style;return x.width="100px",x.height="100px",t.appendChild(v),document.body.appendChild(t),t.scrollLeft>0?_o="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?_o="negative":_o="positive-ascending"),document.body.removeChild(t),_o}return _o}var t9=150,i9=function(t){var c=t.columnIndex;t.data;var v=t.rowIndex;return v+":"+c};function s9(R){var t,c=R.getColumnOffset,v=R.getColumnStartIndexForOffset,x=R.getColumnStopIndexForStartIndex,b=R.getColumnWidth,h=R.getEstimatedTotalHeight,w=R.getEstimatedTotalWidth,e=R.getOffsetForColumnAndAlignment,i=R.getOffsetForRowAndAlignment,u=R.getRowHeight,n=R.getRowOffset,r=R.getRowStartIndexForOffset,a=R.getRowStopIndexForStartIndex,s=R.initInstanceProps,o=R.shouldResetStyleCacheOnItemSizeChange,d=R.validateProps;return t=function(l){QN(f,l);function f(g){var p;return p=l.call(this,g)||this,p._instanceProps=s(p.props,Q1(p)),p._resetIsScrollingTimeoutId=null,p._outerRef=void 0,p.state={instance:Q1(p),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof p.props.initialScrollLeft=="number"?p.props.initialScrollLeft:0,scrollTop:typeof p.props.initialScrollTop=="number"?p.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},p._callOnItemsRendered=void 0,p._callOnItemsRendered=xg(function(y,S,C,A,M,L,P,O){return p.props.onItemsRendered({overscanColumnStartIndex:y,overscanColumnStopIndex:S,overscanRowStartIndex:C,overscanRowStopIndex:A,visibleColumnStartIndex:M,visibleColumnStopIndex:L,visibleRowStartIndex:P,visibleRowStopIndex:O})}),p._callOnScroll=void 0,p._callOnScroll=xg(function(y,S,C,A,M){return p.props.onScroll({horizontalScrollDirection:C,scrollLeft:y,scrollTop:S,verticalScrollDirection:A,scrollUpdateWasRequested:M})}),p._getItemStyle=void 0,p._getItemStyle=function(y,S){var C=p.props,A=C.columnWidth,M=C.direction,L=C.rowHeight,P=p._getItemStyleCache(o&&A,o&&M,o&&L),O=y+":"+S,D;if(P.hasOwnProperty(O))D=P[O];else{var I=c(p.props,S,p._instanceProps),F=M==="rtl";P[O]=D={position:"absolute",left:F?void 0:I,right:F?I:void 0,top:n(p.props,y,p._instanceProps),height:u(p.props,y,p._instanceProps),width:b(p.props,S,p._instanceProps)}}return D},p._getItemStyleCache=void 0,p._getItemStyleCache=xg(function(y,S,C){return{}}),p._onScroll=function(y){var S=y.currentTarget,C=S.clientHeight,A=S.clientWidth,M=S.scrollLeft,L=S.scrollTop,P=S.scrollHeight,O=S.scrollWidth;p.setState(function(D){if(D.scrollLeft===M&&D.scrollTop===L)return null;var I=p.props.direction,F=M;if(I==="rtl")switch(_1()){case"negative":F=-M;break;case"positive-descending":F=O-A-M;break}F=Math.max(0,Math.min(F,O-A));var H=Math.max(0,Math.min(L,P-C));return{isScrolling:!0,horizontalScrollDirection:D.scrollLeft<M?"forward":"backward",scrollLeft:F,scrollTop:H,verticalScrollDirection:D.scrollTop<L?"forward":"backward",scrollUpdateWasRequested:!1}},p._resetIsScrollingDebounced)},p._outerRefSetter=function(y){var S=p.props.outerRef;p._outerRef=y,typeof S=="function"?S(y):S!=null&&typeof S=="object"&&S.hasOwnProperty("current")&&(S.current=y)},p._resetIsScrollingDebounced=function(){p._resetIsScrollingTimeoutId!==null&&q1(p._resetIsScrollingTimeoutId),p._resetIsScrollingTimeoutId=_N(p._resetIsScrolling,t9)},p._resetIsScrolling=function(){p._resetIsScrollingTimeoutId=null,p.setState({isScrolling:!1},function(){p._getItemStyleCache(-1)})},p}f.getDerivedStateFromProps=function(p,y){return a9(p,y),d(p),null};var m=f.prototype;return m.scrollTo=function(p){var y=p.scrollLeft,S=p.scrollTop;y!==void 0&&(y=Math.max(0,y)),S!==void 0&&(S=Math.max(0,S)),this.setState(function(C){return y===void 0&&(y=C.scrollLeft),S===void 0&&(S=C.scrollTop),C.scrollLeft===y&&C.scrollTop===S?null:{horizontalScrollDirection:C.scrollLeft<y?"forward":"backward",scrollLeft:y,scrollTop:S,scrollUpdateWasRequested:!0,verticalScrollDirection:C.scrollTop<S?"forward":"backward"}},this._resetIsScrollingDebounced)},m.scrollToItem=function(p){var y=p.align,S=y===void 0?"auto":y,C=p.columnIndex,A=p.rowIndex,M=this.props,L=M.columnCount,P=M.height,O=M.rowCount,D=M.width,I=this.state,F=I.scrollLeft,H=I.scrollTop,k=e9();C!==void 0&&(C=Math.max(0,Math.min(C,L-1))),A!==void 0&&(A=Math.max(0,Math.min(A,O-1)));var W=h(this.props,this._instanceProps),$=w(this.props,this._instanceProps),K=$>D?k:0,Z=W>P?k:0;this.scrollTo({scrollLeft:C!==void 0?e(this.props,C,S,F,this._instanceProps,Z):F,scrollTop:A!==void 0?i(this.props,A,S,H,this._instanceProps,K):H})},m.componentDidMount=function(){var p=this.props,y=p.initialScrollLeft,S=p.initialScrollTop;if(this._outerRef!=null){var C=this._outerRef;typeof y=="number"&&(C.scrollLeft=y),typeof S=="number"&&(C.scrollTop=S)}this._callPropsCallbacks()},m.componentDidUpdate=function(){var p=this.props.direction,y=this.state,S=y.scrollLeft,C=y.scrollTop,A=y.scrollUpdateWasRequested;if(A&&this._outerRef!=null){var M=this._outerRef;if(p==="rtl")switch(_1()){case"negative":M.scrollLeft=-S;break;case"positive-ascending":M.scrollLeft=S;break;default:var L=M.clientWidth,P=M.scrollWidth;M.scrollLeft=P-L-S;break}else M.scrollLeft=Math.max(0,S);M.scrollTop=Math.max(0,C)}this._callPropsCallbacks()},m.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&q1(this._resetIsScrollingTimeoutId)},m.render=function(){var p=this.props,y=p.children,S=p.className,C=p.columnCount,A=p.direction,M=p.height,L=p.innerRef,P=p.innerElementType,O=p.innerTagName,D=p.itemData,I=p.itemKey,F=I===void 0?i9:I,H=p.outerElementType,k=p.outerTagName,W=p.rowCount,$=p.style,K=p.useIsScrolling,Z=p.width,X=this.state.isScrolling,j=this._getHorizontalRangeToRender(),Y=j[0],U=j[1],J=this._getVerticalRangeToRender(),q=J[0],_=J[1],te=[];if(C>0&&W)for(var se=q;se<=_;se++)for(var ne=Y;ne<=U;ne++)te.push(ve.createElement(y,{columnIndex:ne,data:D,isScrolling:K?X:void 0,key:F({columnIndex:ne,data:D,rowIndex:se}),rowIndex:se,style:this._getItemStyle(se,ne)}));var he=h(this.props,this._instanceProps),le=w(this.props,this._instanceProps);return ve.createElement(H||k||"div",{className:S,onScroll:this._onScroll,ref:this._outerRefSetter,style:tp({position:"relative",height:M,width:Z,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:A},$)},ve.createElement(P||O||"div",{children:te,ref:L,style:{height:he,pointerEvents:X?"none":void 0,width:le}}))},m._callPropsCallbacks=function(){var p=this.props,y=p.columnCount,S=p.onItemsRendered,C=p.onScroll,A=p.rowCount;if(typeof S=="function"&&y>0&&A>0){var M=this._getHorizontalRangeToRender(),L=M[0],P=M[1],O=M[2],D=M[3],I=this._getVerticalRangeToRender(),F=I[0],H=I[1],k=I[2],W=I[3];this._callOnItemsRendered(L,P,F,H,O,D,k,W)}if(typeof C=="function"){var $=this.state,K=$.horizontalScrollDirection,Z=$.scrollLeft,X=$.scrollTop,j=$.scrollUpdateWasRequested,Y=$.verticalScrollDirection;this._callOnScroll(Z,X,K,Y,j)}},m._getHorizontalRangeToRender=function(){var p=this.props,y=p.columnCount,S=p.overscanColumnCount,C=p.overscanColumnsCount,A=p.overscanCount,M=p.rowCount,L=this.state,P=L.horizontalScrollDirection,O=L.isScrolling,D=L.scrollLeft,I=S||C||A||1;if(y===0||M===0)return[0,0,0,0];var F=v(this.props,D,this._instanceProps),H=x(this.props,F,D,this._instanceProps),k=!O||P==="backward"?Math.max(1,I):1,W=!O||P==="forward"?Math.max(1,I):1;return[Math.max(0,F-k),Math.max(0,Math.min(y-1,H+W)),F,H]},m._getVerticalRangeToRender=function(){var p=this.props,y=p.columnCount,S=p.overscanCount,C=p.overscanRowCount,A=p.overscanRowsCount,M=p.rowCount,L=this.state,P=L.isScrolling,O=L.verticalScrollDirection,D=L.scrollTop,I=C||A||S||1;if(y===0||M===0)return[0,0,0,0];var F=r(this.props,D,this._instanceProps),H=a(this.props,F,D,this._instanceProps),k=!P||O==="backward"?Math.max(1,I):1,W=!P||O==="forward"?Math.max(1,I):1;return[Math.max(0,F-k),Math.max(0,Math.min(M-1,H+W)),F,H]},f}(ve.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},t}var a9=function(t,c){t.children,t.direction,t.height,t.innerTagName,t.outerTagName,t.overscanColumnsCount,t.overscanCount,t.overscanRowsCount,t.width,c.instance},n9=s9({getColumnOffset:function(t,c){var v=t.columnWidth;return c*v},getColumnWidth:function(t,c){var v=t.columnWidth;return v},getRowOffset:function(t,c){var v=t.rowHeight;return c*v},getRowHeight:function(t,c){var v=t.rowHeight;return v},getEstimatedTotalHeight:function(t){var c=t.rowCount,v=t.rowHeight;return v*c},getEstimatedTotalWidth:function(t){var c=t.columnCount,v=t.columnWidth;return v*c},getOffsetForColumnAndAlignment:function(t,c,v,x,b,h){var w=t.columnCount,e=t.columnWidth,i=t.width,u=Math.max(0,w*e-i),n=Math.min(u,c*e),r=Math.max(0,c*e-i+h+e);switch(v==="smart"&&(x>=r-i&&x<=n+i?v="auto":v="center"),v){case"start":return n;case"end":return r;case"center":var a=Math.round(r+(n-r)/2);return a<Math.ceil(i/2)?0:a>u+Math.floor(i/2)?u:a;case"auto":default:return x>=r&&x<=n?x:r>n||x<r?r:n}},getOffsetForRowAndAlignment:function(t,c,v,x,b,h){var w=t.rowHeight,e=t.height,i=t.rowCount,u=Math.max(0,i*w-e),n=Math.min(u,c*w),r=Math.max(0,c*w-e+h+w);switch(v==="smart"&&(x>=r-e&&x<=n+e?v="auto":v="center"),v){case"start":return n;case"end":return r;case"center":var a=Math.round(r+(n-r)/2);return a<Math.ceil(e/2)?0:a>u+Math.floor(e/2)?u:a;case"auto":default:return x>=r&&x<=n?x:r>n||x<r?r:n}},getColumnStartIndexForOffset:function(t,c){var v=t.columnWidth,x=t.columnCount;return Math.max(0,Math.min(x-1,Math.floor(c/v)))},getColumnStopIndexForStartIndex:function(t,c,v){var x=t.columnWidth,b=t.columnCount,h=t.width,w=c*x,e=Math.ceil((h+v-w)/x);return Math.max(0,Math.min(b-1,c+e-1))},getRowStartIndexForOffset:function(t,c){var v=t.rowHeight,x=t.rowCount;return Math.max(0,Math.min(x-1,Math.floor(c/v)))},getRowStopIndexForStartIndex:function(t,c,v){var x=t.rowHeight,b=t.rowCount,h=t.height,w=c*x,e=Math.ceil((h+v-w)/x);return Math.max(0,Math.min(b-1,c+e-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){t.columnWidth,t.rowHeight}});function r9(R){const t=new Map;R.forEach(v=>{if(!v)return;const x=v.definition.id,b=t.get(x)||[];b.push(v),t.set(x,b)});const c=[];return t.forEach((v,x)=>{const b=v[0];b.definition.isStackable?v.forEach(w=>{c.push({id:w.id,definition:w.definition,displayCount:w.amount,actualItems:[w],isVirtualStack:!1,representativeItem:w})}):v.length>1?c.push({id:`${x}_virtual_stack`,definition:b.definition,displayCount:v.length,actualItems:v,isVirtualStack:!0,representativeItem:b}):c.push({id:b.id,definition:b.definition,displayCount:1,actualItems:[b],isVirtualStack:!1,representativeItem:b})}),c}function o9(R){return R.representativeItem}const l9=fi.memo(({columnIndex:R,rowIndex:t,style:c,data:v})=>{const{virtualStacks:x,columnCount:b,onUse:h,upgradeAvailability:w}=v,e=t*b+R,i=x[e];if(!i)return V.jsx("div",{style:c});const u=o9(i);return V.jsx("div",{style:{...c,display:"flex",justifyContent:"center",alignItems:"center",padding:"0px"},children:V.jsx(eo,{virtualStack:i,item:u,onUse:h,isEquipped:!1,canUpgrade:w.get(i.id)||!1},i.id)})}),h9=({virtualStacks:R,items:t,upgradeAvailability:c,onUse:v,activeFilterTab:x})=>{const b=R||t||[],h=82,w=12,e=ve.useRef(null),[i,u]=ve.useState(400),[n,r]=ve.useState("newest");ve.useEffect(()=>{const g=()=>{if(e.current){const p=e.current.clientHeight;u(p)}};return g(),window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const a=ve.useMemo(()=>{if(!b||b.length===0)return[];const g=[...b];switch(n){case"newest":return g.sort((y,S)=>{const C="representativeItem"in y?y.representativeItem.createdAt:y.createdAt;return("representativeItem"in S?S.representativeItem.createdAt:S.createdAt)-C});case"oldest":return g.sort((y,S)=>{const C="representativeItem"in y?y.representativeItem.createdAt:y.createdAt,A="representativeItem"in S?S.representativeItem.createdAt:S.createdAt;return C-A});case"rarity":const p={legendary:0,epic:1,rare:2,uncommon:3,common:4};return g.sort((y,S)=>{const C=p[y.definition.rarity],A=p[S.definition.rarity];return C-A});case"alphabetical":return g.sort((y,S)=>{const C=y.definition.name.toLowerCase(),A=S.definition.name.toLowerCase();return C.localeCompare(A)});default:return g}},[b,n]),s=()=>{r(g=>{switch(g){case"newest":return"rarity";case"rarity":return"alphabetical";case"alphabetical":return"oldest";case"oldest":return"newest";default:return"newest"}})},o=()=>{switch(n){case"newest":return"Sort: New";case"rarity":return"Sort: Rarity";case"alphabetical":return"Sort: A-Z";case"oldest":return"Sort: Old";default:return"Sort: New"}},d=()=>{Me.getState().setShopShown(!0)},{columnCount:l,gridWidth:f}=ve.useMemo(()=>{const y=480-w*2-15,S=Math.floor(y/h);return{columnCount:Math.max(1,S),gridWidth:y}},[a.length]),m=ve.useMemo(()=>({virtualStacks:a,columnCount:l,onUse:v,upgradeAvailability:c}),[a,l,v,c]);return V.jsx("div",{className:"equipment-bag",children:b.length===0?V.jsx("div",{className:"empty-bag-message",children:Me.getState().inventoryTab==="map"?V.jsx("div",{onClick:d,className:"more-maps-button",children:V.jsx("img",{src:"assets/ui/button_moremaps.png",alt:"More Maps"})}):V.jsx("div",{children:x?"No items of this type in the bag":"No items in bag"})}):V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"sort-controls",children:V.jsx("button",{className:"sort-button",onClick:s,title:"Toggle between sort methods",children:o()})}),V.jsx("div",{className:"scrolling-view-virtual",ref:e,children:V.jsx(n9,{columnCount:l,columnWidth:h,height:i-w*2,rowCount:Math.ceil(a.length/l)+1,rowHeight:h,width:f,className:"virtual-items-grid",itemData:m,children:l9})})]})})},d9=Lt.EquipmentTags,u9=Lt.BlueprintTags,c9=Lt.MapTags,f9=Lt.ResourceTags,m9=Lt.CosmeticTags;function g9(R,t,c,v){return ve.useMemo(()=>{var h;const x=v.find(w=>w.id===t);if(!x)return[];const b=(h=x.filterTabs)==null?void 0:h.find(w=>w.id===c);return R.filter(w=>{const e=w.definition;if(x.id==="equipment"){const u=e.tags.some(r=>x.tags.includes(r));if(!b)return e.equipSlots.length>0&&u;const n=b.id.charAt(0).toUpperCase()+b.id.slice(1);return e.equipSlots.includes(n)&&u}const i=b?b.tags:x.tags;return e.tags.some(u=>i.includes(u))})},[R,t,c,v])}const el=[{id:"equipment",tags:d9,image:Et.inventory.tabs.sword,filterTabs:[{id:"head",label:"Head",tags:["head"],icon:Et.inventory.filter.head},{id:"chest",label:"Chest",tags:["chest"],icon:Et.inventory.filter.chest},{id:"amulet",label:"Amulet",tags:["amulet"],icon:Et.inventory.filter.amulet},{id:"weapon",label:"Weapon",tags:["weapon"],icon:Et.inventory.filter.weapon},{id:"ring",label:"Ring",tags:["ring"],icon:Et.inventory.filter.ring},{id:"belt",label:"Belt",tags:["belt"],icon:Et.inventory.filter.belt}]},{id:"blueprints",tags:u9,image:Et.inventory.tabs.blueprint},{id:"cosmetics",tags:m9,image:Et.inventory.tabs.hanger},{id:"map",tags:c9,image:Et.inventory.tabs.map},{id:"resources",tags:f9,image:Et.inventory.tabs.wood}],p9=R=>{el.some(v=>v.id===R)||(console.warn(`Invalid tab ID: ${R}. Defaulting to 'equipment' tab.`),R="equipment");const c=Te();c.setInventoryTab(R),c.setEquipmentShown(!0)};function v9({shown:R,dismiss:t,inventoryClient:c}){var M,L,P,O;const[v,x]=ve.useState(!1);ve.useEffect(()=>{R?requestAnimationFrame(()=>x(!0)):x(!1)},[R]);const b=Me(D=>D.inventory),h=Me(D=>D.inventoryTab),w=Me(D=>D.setInventoryTab),e=Me(D=>D.itemDetailShown),i=Me(D=>D.setItemDetailShown),u=ve.useRef(null),[n,r]=ve.useState(0),[a,s]=ve.useState(null),[o,d]=ve.useState("equipment");ve.useEffect(()=>{R||i(!1)},[R,i]),ve.useEffect(()=>{var I,F;const D=el.find(H=>H.id===h);(D==null?void 0:D.id)!=="equipment"?s(((F=(I=D==null?void 0:D.filterTabs)==null?void 0:I[0])==null?void 0:F.id)??null):s(null)},[h]),ve.useEffect(()=>{h==="cosmetics"?d("cosmetic"):h==="equipment"&&d("equipment")},[h]);const l=(((M=b.bags[Lt.DEFAULT_BAG_ID])==null?void 0:M.items)||[]).filter(D=>!!D),f=ve.useMemo(()=>r9(l),[l]),m=g9(f,h,a,el),g=D=>{d(D),D==="cosmetic"&&h!=="cosmetics"?w("cosmetics"):D==="equipment"&&h!=="equipment"&&w("equipment")},p=D=>{if(console.log("Using item:",D),D.definition.tags.includes(vw)){const I=new bl(D.id);OB(I),Te().setMissionCreateWithMapItem(D)}},y=D=>new Set(D.flatMap(F=>F.definition.equipSlots)).size,S=ve.useMemo(()=>{const D=new Map;return[...Object.values(b.bags).flatMap(F=>F.items).filter(Boolean),...Object.values(b.equippedItems).filter(Boolean)].forEach(F=>{if(F){const H=D.get(F.definition.id)||0,k=F.definition.isStackable?F.amount:1;D.set(F.definition.id,H+k)}}),D},[b]),C=ve.useMemo(()=>{const D=new Map;return[...f.flatMap(F=>F.actualItems),...Object.values(b.equippedItems).filter(Boolean)].filter(Boolean).forEach(F=>{if(!F||!F.definition.upgrades||F.definition.upgrades.length===0){F&&D.set(F.id,!1);return}const H=F.definition.upgrades.some(k=>k.requires.every(W=>(S.get(W.id)||0)>=W.amount));D.set(F.id,H)}),f.forEach(F=>{const H=D.get(F.representativeItem.id)||!1;D.set(F.id,H)}),D},[f,S,b.equippedItems]),A=()=>{i(!1),t()};return V.jsx(wp,{shown:R,dismiss:A,children:V.jsxs("div",{className:`equipment-management ${v?"shown":""}`,children:[V.jsxs("div",{className:"layout",children:[V.jsx("button",{className:"dismiss-button",onClick:A,children:V.jsx("img",{src:"assets/ui/button_close_corner.png",alt:"Close"})}),V.jsx($N,{equipmentSlots:b.equippedItems,cosmeticSlots:b.equippedItems,upgradeAvailability:C,currentView:o,onViewChange:g}),V.jsx("div",{className:"nav",ref:u,children:el.map(D=>V.jsx("div",{className:`nav-item ${h===D.id?"selected-tab":""}`,onClick:()=>{w(D.id),D.id==="equipment"&&s(null)},children:V.jsx("img",{src:D.image,alt:D.id})},D.id))}),h==="map"&&!e&&V.jsx("div",{className:"map-tooltip",style:{top:`${n}px`},children:"Select a map and then USE it to discover a new mission!"}),((L=el.find(D=>D.id===h))==null?void 0:L.filterTabs)&&(h==="equipment"?y(l)>1:!0)&&V.jsx("div",{className:"filter-tabs",children:(O=(P=el.find(D=>D.id===h))==null?void 0:P.filterTabs)==null?void 0:O.map(D=>V.jsx("button",{className:`filter-tab ${a===D.id?"selected":""}`,onClick:()=>s(D.id),children:V.jsx("img",{src:D.icon,alt:D.label})},D.id))}),V.jsx(h9,{virtualStacks:m,upgradeAvailability:C,onUse:p,activeFilterTab:a})]}),V.jsx("div",{id:"equipment-modal-container"})]})})}const y9=({onSubscribe:R,disabled:t=!1})=>{const c=iA();return V.jsx("div",{className:"subscribe-toast",children:V.jsx("div",{className:"subscribe-toast-content",children:V.jsxs("div",{className:"subscribe-toast-main",children:[V.jsxs("div",{className:"subscribe-toast-text",children:[V.jsx("div",{className:"subscribe-toast-title",children:"Join the Community!"}),V.jsxs("div",{className:"subscribe-toast-message",children:["Subscribe to get ",c.gem," Gems and stay updated!"]})]}),V.jsxs("div",{className:"subscribe-toast-actions",children:[V.jsx("div",{className:"subscribe-toast-reward",children:V.jsx("div",{className:"subscribe-toast-gem-container",children:V.jsx(eo,{item:null,itemDefinition:Lt.ItemDefinitions.Gem,quantity:c.gem,isEquipped:!1},"Gem")})}),V.jsx("button",{className:`subscribe-toast-button ${t?"disabled":""}`,onClick:R,disabled:t,children:"Subscribe and Claim"})]})]})})})};function x9({status:R,dismiss:t,statsProvider:c,playerStats:v}){const[x,b]=ve.useState(0),[h,w]=ve.useState(!1),[e,i]=ve.useState(!1),u=Me(y=>y.setShowNextEncounterButton),n=Me(y=>{var S;return(S=y.missionMetadata.mission)==null?void 0:S.foodName});ve.useEffect(()=>{v.hasSubscribed&&i(!0)},[]),ve.useEffect(()=>{u(!1)});const r=()=>{p9("map")},a=()=>{Te().setRecentMissionMode("playNext"),Te().setRecentMissionLinksShown(!0)},s=async()=>{b(1),await new Promise(y=>setTimeout(y,1e3)),e?E6("Enjoyed this mission? Consider giving it an upvote!",{duration:5e3,autoHide:!0}):M6(V.jsx(y9,{onSubscribe:d,disabled:h}),{autoHide:!1})},o=()=>Te().missionRewards.some(y=>{const S=Lt.ItemDefinitions[y.id];return S.tags&&S.tags.includes("map")}),d=()=>{c.subscribeSubRedditAsync(),w(!0),ed("Reward claimed!")},l=R==="victory"?"assets/ui/Badge_Victory.png":"assets/ui/Badge_Defeat.png",f=R==="victory"?V.jsxs("div",{className:"victory-reward",children:[V.jsxs("div",{className:"victory-reward-info",children:["You found the ",V.jsx("em",{children:n}),` recommended by u/${Te().missionMetadata.missionAuthorName}!`]}),V.jsxs("div",{className:"victory-reward-text",children:[V.jsx("img",{src:"assets/ui/Text_Decoration.png",className:"victory-reward-decoration"}),"Flavor Essences",V.jsx("img",{className:"victory-reward-decoration flip-x",src:"assets/ui/Text_Decoration.png"})]}),V.jsx("div",{className:"victory-reward-grid",children:Te().missionRewards.filter(y=>{const S=Lt.ItemDefinitions[y.id];return!S.tags||S.tags.includes("essence")}).map(y=>V.jsx(eo,{item:null,itemDefinition:Lt.ItemDefinitions[y.id],quantity:y.quantity,isEquipped:!1},y.id))}),V.jsx("div",{className:"button-container",children:V.jsx("div",{className:"continue-button-container",children:V.jsx("button",{className:"continue-button",onClick:s,children:V.jsx("img",{src:"assets/ui/button_continue.png",alt:"Continue"})})})})]}):null,m=R==="victory"?V.jsxs("div",{className:"victory-reward",children:[V.jsxs("div",{className:"victory-reward-text",children:[V.jsx("img",{src:"assets/ui/Text_Decoration.png",className:"victory-reward-decoration"}),"Mission Rewards",V.jsx("img",{className:"victory-reward-decoration flip-x",src:"assets/ui/Text_Decoration.png"})]}),V.jsx("div",{className:"victory-reward-grid",children:Te().missionRewards.filter(y=>{const S=Lt.ItemDefinitions[y.id];return!S.tags||!S.tags.includes("essence")}).map(y=>V.jsx(eo,{item:null,itemDefinition:Lt.ItemDefinitions[y.id],quantity:y.quantity,isEquipped:!1},y.id))}),o()&&V.jsxs("div",{className:"victory-reward-info",children:["You have a new ",V.jsx("em",{children:"Map"})," in your inventory!",V.jsx("br",{}),"Use it to discover a new mission."]})]}):null,g=x===1||R==="defeat"?V.jsxs("div",{className:"mission-end-footer",children:[R==="victory"&&o()&&V.jsx("div",{className:"end-mission-button",onClick:r,children:V.jsx("img",{src:"assets/ui/Button_Discover.png"})}),V.jsx("div",{className:"end-mission-button",onClick:a,children:V.jsx("img",{src:"assets/ui/button_playnext.png"})})]}):null,p=x===0?f:m;return V.jsxs("div",{className:"overlay-screen mission-end-screen",children:[V.jsx("button",{className:"dismiss-button",onClick:t,children:V.jsx("img",{src:"assets/ui/button_close_corner.png",alt:"Close"})}),V.jsxs("div",{className:"mission-end-screen-content",children:[V.jsx("div",{className:"mission-end-badge",children:V.jsx("img",{src:l})}),V.jsxs("div",{className:"rewards-container",children:[p,g]})]})]})}const g2=ve.forwardRef(({engine:R,onComplete:t,onEdit:c,onTextChange:v},x)=>{const[b,h]=ve.useState(!1),[w,e]=ve.useState(""),[i,u]=ve.useState(0);ve.useImperativeHandle(x,()=>({clearCustomInput:()=>{h(!1),e("")}}));const n=R.getCurrentNode(),r=n?R.getAvailableOptions():[],a=R.getChosenPath();ve.useEffect(()=>{(!n||n.options.length===0)&&!b&&t(),b&&w.trim().length>0&&t()},[n,b,w,t]),ve.useEffect(()=>{if(v){const l=R.getFinalText(b?w:void 0);v(l)}},[a,b,w,v,R]);const s=l=>{if(l==="__custom__"){h(!0);return}R.chooseOption(l),u(f=>f+1)},o=l=>{R.rewindTo(l),h(!1),u(f=>f+1),c==null||c()},d=l=>l.replace(/FOOD_NAME/g,"delicious food");return V.jsx("div",{className:"scenario-editor",children:V.jsxs("div",{className:"scenario-text",children:[a.map((l,f)=>{const m=R.getScenario().nodes[l.nodeId];return V.jsxs("span",{children:[m.textBeforeChoice,V.jsx("span",{className:"scenario-choice",onClick:()=>o(f),children:d(l.optionLabel)}),m.textAfterChoice," "]},f)}),n&&!b&&n.options.length>0&&V.jsxs("span",{children:[n.textBeforeChoice,V.jsxs("select",{onChange:l=>s(l.target.value),defaultValue:"",children:[V.jsx("option",{value:"",children:"Choose..."}),r.map(l=>V.jsx("option",{value:l,children:d(l)},l)),V.jsx("option",{value:"__custom__",children:"Write my own..."})]}),n.textAfterChoice," "]}),b&&V.jsxs("span",{children:[n==null?void 0:n.textBeforeChoice,V.jsxs("div",{className:"custom-input-container",children:[V.jsx("textarea",{value:w,onChange:l=>e(l.target.value),placeholder:"Enter your own text...",className:"custom-input-textarea",rows:3}),V.jsx("button",{className:"custom-input-close",onClick:()=>{h(!1),e(""),c==null||c()},"aria-label":"Cancel custom input",children:"×"})]}),n==null?void 0:n.textAfterChoice," "]})]})})});g2.displayName="ScenarioEditor";function ew({scenario:R,semantics:t,username:c,questItem:v,rng:x=Rn}){if(!R.titleTemplates||R.titleTemplates.length===0)return"An Untitled Mission";const b=R.locationPoetic.length>0&&x.next()<.3?R.locationPoetic[Math.floor(x.next()*R.locationPoetic.length)]:R.locationName,h=u=>{switch(u){case"theme":return!t.theme||t.theme.length===0||!R.semanticFragments.theme?!1:t.theme.some(n=>{const r=R.semanticFragments.theme[n];return r&&r.length>0});case"mood":return!t.mood||t.mood.length===0||!R.semanticFragments.mood?!1:t.mood.some(n=>{const r=R.semanticFragments.mood[n];return r&&r.adjective&&r.adjective.length>0});case"moodNoun":return!t.mood||t.mood.length===0||!R.semanticFragments.mood?!1:t.mood.some(n=>{const r=R.semanticFragments.mood[n];return r&&r.noun&&r.noun.length>0});case"details":return!t.details||t.details.length===0||!R.semanticFragments.details?!1:t.details.some(n=>{const r=R.semanticFragments.details[n];return r&&r.length>0});case"questItem":return!!v;case"location":return!0;default:return!1}},w=R.titleTemplates.filter(u=>{var a;return(((a=u.pattern.match(/\{(\w+)\}/g))==null?void 0:a.map(s=>s.slice(1,-1)))||[]).every(s=>h(s))});if(w.length===0)return v?`${v} ${b}`:`A Mission ${b}`;let i=Tc(w.map(u=>({value:u,weight:u.weight||1})),x).pattern;if(t.mood&&t.mood.length>0){const u=R.semanticFragments.mood;if(u){const n=t.mood.filter(r=>u[r]);if(n.length>0){const r=n[Math.floor(x.next()*n.length)],a=u[r];if(a){if(a.adjective&&a.adjective.length>0){const s=a.adjective[Math.floor(x.next()*a.adjective.length)];i=i.replace(/\{mood\}/g,s)}if(a.noun&&a.noun.length>0){const s=a.noun[Math.floor(x.next()*a.noun.length)];i=i.replace(/\{moodNoun\}/g,s)}}}}}return["theme","details"].forEach(u=>{const n=t[u];if(n&&n.length>0){const r=R.semanticFragments[u];if(r){const a=n.filter(s=>r[s]);if(a.length>0){const s=a[Math.floor(x.next()*a.length)],o=r[s];if(o&&Array.isArray(o)&&o.length>0){const d=o[Math.floor(x.next()*o.length)];i=i.replace(new RegExp(`\\{${u}\\}`,"g"),d)}}}}}),i=i.replace(/\{location\}/g,b),v&&(i=i.replace(/\{questItem\}/g,v)),i=i.replace(/\{[^}]+\}/g,"").replace(/\s+/g," ").trim(),c&&(i+=` — by ${c}`),i}class w9{constructor(t,c=[],v={}){this.scenario=t,this.initialTags=c,this.state={currentNodeId:"",chosenOptions:[],tags:new Set(c),semantics:{theme:v.theme||[],mood:v.mood||[],details:v.details||[]}},this.startNodeId=this.pickStartNode(),this.state.currentNodeId=this.startNodeId}pickStartNode(){const t=this.scenario.startNodes,c=t.reduce((b,h)=>b+h.weight,0),v=Math.random()*c;let x=0;for(const b of t)if(x+=b.weight,v<=x)return b.nodeId;return t[0].nodeId}getCurrentNode(){return this.findValidNode(this.state.currentNodeId)}getScenario(){return this.scenario}findValidNode(t){const c=this.scenario.nodes[t];return!c||c.requires&&c.requires.some(v=>!this.state.tags.has(v))||c.excludes&&c.excludes.some(v=>this.state.tags.has(v))?null:c}getAvailableOptions(){const t=this.getCurrentNode();return t?t.options.filter(v=>{const x=!v.requires||v.requires.every(h=>this.state.tags.has(h)),b=!v.excludes||!v.excludes.some(h=>this.state.tags.has(h));return x&&b}).map(v=>v.label):[]}chooseOption(t){const c=this.getCurrentNode();if(!c)throw new Error("No valid node found");const x=c.options.filter(h=>!(h.requires&&h.requires.some(w=>!this.state.tags.has(w))||h.excludes&&h.excludes.some(w=>this.state.tags.has(w)))).find(h=>h.label===t);if(!x)throw new Error("Invalid option selected");this.state.chosenOptions.push({nodeId:c.id,optionLabel:x.label}),x.addsTags&&x.addsTags.forEach(h=>this.state.tags.add(h)),x.semantics&&Object.entries(x.semantics).forEach(([h,w])=>{if(w){const e=this.state.semantics[h]||[];this.state.semantics[h]=[...e,...w]}});const b=this.findValidNode(x.next);if(!b)throw new Error(`Next node ${x.next} is not valid based on current tags`);this.state.currentNodeId=b.id}getChosenPath(){return this.state.chosenOptions}rewindTo(t){if(t<0||t>this.state.chosenOptions.length)throw new Error("Invalid rewind index");const c=this.state.chosenOptions.slice(0,t);this.state.chosenOptions=[],this.state.tags=new Set(this.initialTags),this.state.semantics={theme:[],mood:[],details:[]},this.state.currentNodeId=this.startNodeId;for(const v of c)this.chooseOption(v.optionLabel)}getCurrentTags(){return Array.from(this.state.tags)}getCurrentSemantics(){return{...this.state.semantics}}getFinalText(t){let c="";for(const x of this.state.chosenOptions){const b=this.scenario.nodes[x.nodeId];c+=b.textBeforeChoice,c+=x.optionLabel,b.textAfterChoice&&(c+=b.textAfterChoice),c+=" "}const v=this.getCurrentNode();return v&&t&&(c+=v.textBeforeChoice,c+=t,v.textAfterChoice&&(c+=v.textAfterChoice),c+=" "),c=c.replace(/\s+/g," "),c.trim()}generateRandomPath(){this.state.chosenOptions=[],this.state.tags=new Set(this.initialTags),this.state.semantics={theme:[],mood:[],details:[]},this.state.currentNodeId=this.startNodeId;let t=0;const c=100;for(;t<c;){const v=this.getCurrentNode();if(!v||v.options.length===0)break;const x=this.getAvailableOptions();if(x.length===0)break;const b=x[Math.floor(Math.random()*x.length)];this.chooseOption(b),t++}t>=c&&console.warn("Random path generation hit max attempts limit")}}const tw={id:"ruined_path",locationName:"on the Ruined Path",locationPoetic:["Under Shadows","by the Ruins","on the Path to Ruin","Among Mangled Concrete"],startNodes:[{nodeId:"start_history",weight:50},{nodeId:"start_magic",weight:50},{nodeId:"start_reason",weight:50},{nodeId:"start_hunger",weight:50},{nodeId:"start_risk",weight:50}],titleTemplates:[{pattern:"The {mood} {theme} of {questItem}",weight:3},{pattern:"{moodNoun}, {theme}, and {questItem}",weight:3},{pattern:"{mood} {theme} and {questItem}",weight:3},{pattern:"{mood} {questItem}",weight:2},{pattern:"{questItem}: {theme} and {details}",weight:3},{pattern:"{theme} and {details} {location}",weight:3},{pattern:"{details} and {questItem} {location}",weight:3},{pattern:"{details} and {questItem}",weight:2},{pattern:"{mood} {theme} and {details}",weight:2},{pattern:"{moodNoun}: {theme} and {details}",weight:3},{pattern:"{moodNoun}: {details} and {questItem}",weight:3},{pattern:"{questItem} and {details}",weight:2},{pattern:"{moodNoun} and {questItem}",weight:2},{pattern:"{moodNoun} and {questItem}: a Journey {location}",weight:2},{pattern:"A Tale of {moodNoun} {location}",weight:2},{pattern:"{questItem} and {moodNoun}",weight:2},{pattern:"In Search of {questItem}",weight:2},{pattern:"{questItem} {location}",weight:1}],semanticFragments:{theme:{revenge:["Vengeance","Retribution","Reckoning","Wrath","Beef"],discovery:["Search","Hunt","Quest","Investigation"],journey:["Journey","Path","Way","Road","Trek"],hunger:["Hunger","Appetite","Empty Belly","Hankering"],nostalgia:["Memory","Remembrance","Echoes","Ghosts"],history:["History","History Lesson","The Past","Legacy"]},mood:{dark:{adjective:["Dark","Shadowy","Grim","Bleak"],noun:["Darkness","Shadow","Gloom"]},mysterious:{adjective:["Hidden","Secret","Strange","Cryptic"],noun:["Mystery","Secrecy","Enigmas","Riddles"]},melancholic:{adjective:["Lost","Forgotten","Faded","Wistful"],noun:["Sorrow","Loss","Melancholy","Grief"]},desperate:{adjective:["Desperate","Urgent","Driven","Frantic"],noun:["Desperation","Urgency","Struggle","Challenges"]},whimsical:{adjective:["Froggy","Hangry","Curious","Peculiar"],noun:["Way of the Swordsfrog","The Meaning of Life","My Philosophy","My Weird Day"]}},details:{boss:["A Fateful Battle","A Dangerous Foe","The Guardian"],master:["The Master","The Teacher","The Mentor","The Guide"],creatures:["Skeletons","Wizards","Bothersome Creatures","Shadows"],magic:["Shadow Magic","Dark Arts","Ancient Power","Forbidden Knowledge"],battle:["Fight","Combat","Conflict","The Blade"],personal:["Personal Stakes","Private Matters","Inner Conflict","Deep Purpose"]}},nodes:{start_history:{id:"start_history",textBeforeChoice:"The ruined path was where ",options:[{label:"you last saw your parents. ",next:"nowadays",semantics:{theme:["nostalgia"],mood:["melancholic"],details:["personal"]}},{label:"your first master died in a duel. ",next:"dead_master",semantics:{theme:["revenge"],mood:["melancholic"],details:["master"]}},{label:"you ate your first truly perfect slice of pizza. ",next:"nowadays",semantics:{theme:["nostalgia","hunger"],mood:["whimsical"]}},{label:"you slayed",next:"slayed"},{label:"great ",next:"great"}]},start_magic:{id:"start_magic",textBeforeChoice:"They say shadow magic  ",options:[{label:"was meant to save the world. ",next:"nowadays",semantics:{theme:["history"],mood:["mysterious"],details:["magic"]}},{label:"corrupts its users. ",next:"investigate",semantics:{theme:["discovery"],mood:["dark"],details:["magic"]}},{label:"is what feeds these creatures. ",next:"nowadays",semantics:{theme:["discovery"],mood:["dark"],details:["magic","creatures"]}},{label:"smells like popcorn. ",next:"deflation",addsTags:["popcorn"],semantics:{mood:["whimsical"],details:["magic"]}},{label:"is poisonous but delicious in small amounts. ",next:"deflation",semantics:{mood:["whimsical"],details:["magic"],theme:["hunger"]}},{label:"makes you slightly taller. ",next:"investigate",semantics:{mood:["whimsical"],details:["magic"]}},{label:"is easy to learn but hard to master. ",next:"investigate",semantics:{theme:["discovery"],mood:["mysterious"],details:["magic"]}}]},start_reason:{id:"start_reason",textBeforeChoice:"Why are you here? ",options:[{label:"Some words muttered by a dying golem. ",next:"regret",semantics:{theme:["discovery"],mood:["mysterious","dark"],details:["creatures"]}},{label:"The promise of a rare delicacy brought you to this desolate place. ",next:"regret",semantics:{theme:["hunger","discovery"],mood:["desperate"]}},{label:"The path to the city is long, but this way provides shelter. ",next:"rumor",semantics:{theme:["journey"]}}]},start_hunger:{id:"start_hunger",textBeforeChoice:"You are hungry",options:[{label:" for revenge. ",next:"revenge",semantics:{theme:["revenge"],mood:["dark","desperate"],details:["personal"]}},{label:" and only FOOD_NAME will satisfy you. ",next:"rumor",addsTags:["food_name"],semantics:{theme:["hunger"],mood:["desperate"]}},{label:". The path has been long. The rumor had better be true: ",next:"rumor",semantics:{theme:["journey","hunger"],mood:["desperate"]}}]},start_risk:{id:"start_risk",textBeforeChoice:"The way ahead looks ",options:[{label:"treacherous. ",next:"regret",semantics:{mood:["dark"]}},{label:"deserted. Suspiciously deserted. ",next:"regret",semantics:{mood:["mysterious"]}},{label:"strewn with artifacts of a dark past. This was where great",next:"great",semantics:{theme:["history"],mood:["mysterious"]}}]},regret:{id:"regret",textBeforeChoice:"Perhaps you shouldn't have ",options:[{label:"taken that shortcut. ",next:"rumor"},{label:"trusted that signpost. ",next:"rumor"},{label:"skipped breakfast. ",next:"rumor"},{label:"taken that bet. ",next:"rumor"}]},investigate:{id:"investigate",textBeforeChoice:"It makes you think  ",options:[{label:"you should do your own research.",next:"anyway"},{label:"you can't trust what you hear.",next:"anyway"},{label:"you'll only learn the truth by pressing on.",next:"final"}]},revenge:{id:"revenge",textBeforeChoice:"You swore to avenge ",options:[{label:"your parents' death. ",next:"nowadays",semantics:{theme:["revenge"],mood:["dark"],details:["personal"]}},{label:"your first master. ",next:"dead_master",semantics:{theme:["revenge"],mood:["dark"],details:["master","personal"]}},{label:"the citizens of Duskridge. ",next:"cryptic",semantics:{theme:["revenge"],mood:["dark"]}},{label:"your stomach. The last time you ate here you had incredible indigestion. ",next:"anyway",addsTags:["food_name"],semantics:{theme:["revenge","hunger"],mood:["whimsical"]}}]},rumor:{id:"rumor",textBeforeChoice:"Rumor has it ",options:[{label:"the creatures found here are massing before moving onward to... somewhere.",next:"final",semantics:{theme:["discovery"],mood:["dark","mysterious"],details:["creatures"]}},{label:"this was some kind of ancient roadway before the cataclysm.",next:"final",semantics:{theme:["history"],mood:["mysterious"]}},{label:"if you line up early enough, you'll get a taste of some FOOD_NAME like no other.",next:"final",excludes:["food_name"],addsTags:["food_name"],semantics:{theme:["hunger"],mood:["desperate"]}},{label:"it's just a short stroll in the shade and then some FOOD_NAME.",next:"anyway",excludes:["food_name"],addsTags:["food_name"],semantics:{theme:["hunger"],mood:["whimsical"]}},{label:"there's nothing better than battle to whet your appetite for FOOD_NAME.",excludes:["food_name"],addsTags:["food_name"],next:"anyway",semantics:{theme:["hunger"],mood:["dark"]}}]},great:{id:"great",textBeforeChoice:"",options:[{label:"contraptions once rumbled above, on the way to the Forbidden City.",next:"nowadays",semantics:{theme:["history"],mood:["mysterious"]}},{label:"battles raged for years without end.",next:"cryptic",semantics:{theme:["history"],details:["battle"],mood:["dark"]}},{label:"throngs of pilgrims once gathered.",next:"cryptic",semantics:{theme:["history"],mood:["mysterious"]}},{label:"treasures are fabled to lie.",next:"deflation",semantics:{theme:["discovery"],mood:["mysterious"]}},{label:"heroes got their start.",next:"deflation",semantics:{mood:["mysterious"]}}]},slayed:{id:"slayed",textBeforeChoice:"",options:[{label:" your master in a duel.",next:"cryptic",semantics:{theme:["revenge"],mood:["dark"],details:["master"]}},{label:" your first skeleton.",next:"nowadays",semantics:{details:["creatures","battle"]}},{label:" an entire bucket of chicken.",next:"cryptic",semantics:{theme:["hunger"],mood:["whimsical"]}},{label:" an army of wizards because they called you ",next:"names",semantics:{mood:["whimsical"],details:["battle"]}},{label:" a malevolent rival",next:"anyway",semantics:{mood:["dark"],details:["battle","personal"]}}]},names:{id:"names",textBeforeChoice:"",options:[{label:"a coward.",next:"cryptic"},{label:"short.",next:"cryptic"},{label:"a toad.",next:"cryptic"},{label:"for jury duty.",next:"cryptic"},{label:"baby.",next:"cryptic"}]},cryptic:{id:"cryptic",textBeforeChoice:" ",options:[{label:"Just like in the stories your master used to tell.",next:"anyway",excludes:["dead_master"]},{label:"But we don't talk about that anymore.",next:"final"},{label:"Sometimes it seems that no-one but you remembers.",next:"final"},{label:"At least, that's the story they tell in taverns.",next:"final"}]},deflation:{id:"deflation",textBeforeChoice:" ",options:[{label:"Maybe they just say that to scare the little ones.",next:"conclusion",addsTags:["deflation"],excludes:["popcorn","treasures"]},{label:"It's the kind of thing only a child would believe.",next:"conclusion",addsTags:["deflation"],requires:["popcorn"]},{label:"But you don't believe that.",next:"conclusion",addsTags:["deflation"],requires:["popcorn"]},{label:"Probably not though, knowing your luck.",next:"conclusion",addsTags:["deflation"]},{label:"Small comfort, given the dangers ahead.",next:"conclusion",addsTags:["deflation"],excludes:["popcorn"]}]},dead_master:{id:"dead_master",textBeforeChoice:"",options:[{label:"The foul creature that slayed him lies ahead.",next:"conclusion",requires:["boss"],semantics:{details:["boss"]}},{label:"But some say he survived that day, and turned away from the blade and toward the stove.",next:"conclusion",addsTags:["master_chef"]},{label:"Something inside you died that day as well.",next:"final"},{label:"You remember his lessons well. But what would he think of this life you've chosen?",next:"final"}]},nowadays:{id:"nowadays",textBeforeChoice:"But that was a long time ago. Nowadays ",options:[{label:"it's mostly skeletons.",next:"anyway"},{label:"it's been gentrified.",next:"anyway",semantics:{mood:["whimsical"]}},{label:"it's nothing but tourists.",next:"anyway",semantics:{mood:["whimsical"]}},{label:"it's practically safe.",next:"anyway"},{label:"the shattered husks of a lost civilization stand vigil beside the path.",next:"conclusion"}]},anyway:{id:"anyway",textBeforeChoice:"Anyway ",options:[{label:"supposedly that's what makes the FOOD_NAME here so good.",next:"final",excludes:["food_name"]},{label:"you'd better ready your sword.",next:"final"},{label:"you've got no excuse to delay.",next:"final"},{label:"all that stands in your way is a bunch of monsters and a huge boss.",next:"final",requires:["boss"],semantics:{details:["boss"]}},{label:"if the boss here is as tough as they say, then then FOOD_NAME must be excellent.",next:"final",requires:["boss"],semantics:{details:["boss"]}}]},conclusion:{id:"conclusion",textBeforeChoice:" ",options:[{label:"Ahead is the only prize you crave: a delicious meal.",next:"final",excludes:["master_chef","deflation"]},{label:"You check your blade is sharp and press on.",next:"final"},{label:"You do some quick stretches: there's a fight ahead.",next:"final"},{label:"Whatever. You're not here to save the world, just to eat your fill.",next:"final"}]},final:{id:"final",textBeforeChoice:"",options:[]}}},S9={id:"seaside_cliffs",locationName:"at the Seaside Cliffs",locationPoetic:["Above Rocky Shores","by the Sea","Above the Waves","in the Sea Air"],startNodes:[{nodeId:"start_location",weight:50},{nodeId:"start_memory",weight:50},{nodeId:"start_senses",weight:50},{nodeId:"start_relax",weight:50}],titleTemplates:[{pattern:"The {mood} {theme} of {questItem}",weight:3},{pattern:"{moodNoun}, {theme}, and {questItem}",weight:3},{pattern:"{mood} {theme} and {questItem}",weight:3},{pattern:"{mood} {questItem}",weight:2},{pattern:"{questItem}: {theme} and {details}",weight:3},{pattern:"{theme} and {details} {location}",weight:3},{pattern:"{details} and {questItem} {location}",weight:3},{pattern:"{details} and {questItem}",weight:2},{pattern:"{mood} {theme} and {details}",weight:2},{pattern:"{moodNoun}: {theme} and {details}",weight:3},{pattern:"{moodNoun}: {details} and {questItem}",weight:3},{pattern:"{questItem} and {details}",weight:2},{pattern:"{moodNoun} and {questItem}",weight:2},{pattern:"{moodNoun} and {questItem}: a Journey {location}",weight:2},{pattern:"A Tale of {moodNoun} {location}",weight:2},{pattern:"{questItem} and {moodNoun}",weight:2},{pattern:"In Search of {questItem}",weight:2},{pattern:"{questItem} {location}",weight:1}],semanticFragments:{theme:{hardship:["Hard Times","Hardship","Saltiness","Struggle"],seafood:["Seafood","Bounties of the Deep","Fresh Catch"],harvest:["Harvest","Gathering","Bounty"],seamonsters:["Leviathans","Monsters of the Deep","Frightening Depths"],location:["Solitude","Warm Vistas","Rugged Beauty","A Setting Sun"],hunger:["Hunger","Craving","Desire","Appetite"]},mood:{grateful:{adjective:["Grateful","Thankful","Reflective"],noun:["Gratitude","Thanks","Appreciation"]},peace:{adjective:["Peaceful","Calm","Serene","Relaxing","Tranquil"],noun:["Peace","Calm","Serenity","Relaxation","Tranquility","Quiet Time","Stillness"]},bittersweet:{adjective:["Bittersweet","Melancholic","Nostalgic"],noun:["Bittersweetness","Melancholy","Nostalgia"]},danger:{adjective:["Dangerous","Perilous","Threatening","Fright"],noun:["Danger","Peril","Threat","Fright"]}},details:{fishermen:["Hardy Folk","Fishermen","Brave Souls","Sea Adventurers"],chefs:["Salty Gourmets","Salt-Caked Cooks","Hardy Chefs","Friends"],waves:["Waves","Ocean's Embrace","Sea Spray"],boss:["A Dangerous Foe","Voracious Maw","Corrupted Elite"]}},nodes:{start_location:{id:"start_location",textBeforeChoice:"These cliffs are ",options:[{label:"hard to get to. ",next:"chefs",semantics:{}},{label:"bathed in beautiful light. ",next:"peace",semantics:{theme:["location"],mood:["peace"]}},{label:"dangerous but stunning. ",next:"breathe",semantics:{theme:["location"]}},{label:"home to incredible seafood. ",next:"fishermen",semantics:{theme:["seafood"]}}]},start_memory:{id:"start_memory",textBeforeChoice:"You remember  ",options:[{label:"coming here to train and meditate in your youth. ",next:"hard_times",semantics:{}},{label:"catching a glimpse of one of the corrupted seamonsters that swim below. ",next:"fishermen",semantics:{theme:["seamonsters"],mood:["danger"]}},{label:"a story about what this place was like in ancient times. ",next:"history",semantics:{theme:["location"]}},{label:"what your master told you about this place: ",addsTags:["master"],next:"the_sea",semantics:{theme:["location"]}}]},start_senses:{id:"start_senses",textBeforeChoice:"The sea air  ",options:[{label:"fills your lungs. ",next:"breathe",semantics:{theme:["location"]}},{label:"is briny, but carries the faint whiff of FOOD_NAME. ",next:"fishermen",semantics:{theme:["location"]}},{label:"carries a sense of dread: something very dangerous lies ahead. ",requires:["boss"],next:"boss",semantics:{}},{label:"has a way of reinvigorating you. ",next:"peace",semantics:{theme:["location"],mood:["peace"]}}]},start_relax:{id:"start_relax",textBeforeChoice:"You came here to relax ",options:[{label:"and a big helping of FOOD_NAME will surely help. ",next:"chefs",semantics:{theme:["hunger"]}},{label:"just as you have since you were young. ",next:"hard_times",semantics:{theme:["location"]}},{label:"but what lies ahead is worse than you feared. ",requires:["boss"],next:"boss",semantics:{details:["boss"],mood:["danger"]}},{label:"and you won't let a few monsters ruin that. ",next:"monsters",semantics:{mood:["danger"]}}]},fishermen:{id:"fishermen",textBeforeChoice:"Intrepid fishermen ",options:[{label:"supply local chefs with the freshest ingredients. ",next:"chefs",addsTags:["friends"],semantics:{theme:["harvest","seafood"],details:["fishermen"]}},{label:"brave the seas in spite of the corrupted leviathans that lurk in the deep. ",next:"history",addsTags:["friends"],semantics:{theme:["seamonsters"],details:["fishermen"]}},{label:"fight their way through monsters each day on the way to work. ",next:"monsters",addsTags:["friends"],semantics:{theme:["hardship","harvest"],details:["fishermen"]}},{label:"are becoming harder and harder to find. ",next:"the_sea",addsTags:["friends"],semantics:{details:["fishermen"]}}]},the_sea:{id:"the_sea",textBeforeChoice:"The sea ",options:[{label:"provides, but can extract a terrible price. ",next:"focus",semantics:{mood:["bittersweet"],theme:["location"]}},{label:"has a great and mysterious power. ",next:"breathe",semantics:{theme:["location"]}},{label:"roils with as many monsters as fish these days. ",requires:["fishermen"],next:"history",semantics:{theme:["location"]}},{label:"will provide answers if you stare long enough. ",requires:["master"],next:"history",semantics:{theme:["location"]}}]},chefs:{id:"chefs",textBeforeChoice:"A number of chefs ",options:[{label:"have set up shop here, in spite of the dangers. ",next:"friends",semantics:{details:["chefs"]}},{label:"claim to serve Leviathan Sashimi but you doubt that. ",next:"friends",semantics:{details:["chefs"]}},{label:"have learned to cater to the lost souls who find their way up here. ",next:"quest",semantics:{details:["chefs"]}},{label:"have disappeared mysteriously over the years. ",next:"monsters",semantics:{details:["chefs"]}}]},history:{id:"history",textBeforeChoice:"Before the coruption ",options:[{label:"this place must have been a paradise.",next:"final",semantics:{theme:["location"],mood:["bittersweet"]}},{label:"you doubt things were this hard.",next:"final",semantics:{theme:["location"],mood:["hardship"]}},{label:"beings flocked here for fun and recreation. ",next:"today",addsTags:["good_times"],excludes:["friends"],semantics:{}},{label:"one could stroll therse cliffs for hours without fighting a single monster. ",addsTags:["good_times"],excludes:["friends"],next:"today",semantics:{mood:["bittersweet"]}},{label:"this must have been prime real estate. ",excludes:["friends"],next:"breathe",semantics:{}},{label:"a hungry frog with a sword must have been a strange sight. ",next:"quest",excludes:["friends"],semantics:{theme:["hunger"]}}]},today:{id:"today",textBeforeChoice:"Today ",options:[{label:"that's hard to imagine. ",requires:["good_times"],next:"conclusion"},{label:"is just another day. Monsters and FOOD_NAME. ",next:"conclusion",semantics:{mood:["danger"]}},{label:"the cliffs are a place of peace and solitude. ",next:"conclusion",semantics:{mood:["peace"],theme:["location"]}},{label:"the cliffs are a place of danger and adventure. ",next:"conclusion",semantics:{mood:["danger"]}}]},friends:{id:"friends",textBeforeChoice:"You've befriended a few over the years ",options:[{label:"and come here for the company as well as the FOOD_NAME. ",next:"final",addsTags:["friends"],semantics:{details:["chefs"]}},{label:"but they never last long. ",next:"monsters",addsTags:["friends"],semantics:{}},{label:"and they always have a meal ready for you. ",next:"final",addsTags:["friends"],semantics:{details:["chefs"]}},{label:"but they are all gone now. ",next:"conclusion",addsTags:["friends"],semantics:{mood:["bittersweet"],details:["chefs"]}}]},peace:{id:"peace",textBeforeChoice:"Filled with a sense of peace, ",options:[{label:"you aren't looking for a fight. ",next:"focus",semantics:{mood:["peace"]}},{label:"you feel grateful. ",next:"conclusion",semantics:{mood:["grateful"]}},{label:"you consider a nap but you're too hungry. ",next:"quest",semantics:{theme:["hunger"]}},{label:"you test your blade for sharpness, just in case. ",next:"monsters",semantics:{mood:["peace"]}}]},hard_times:{id:"hard_times",textBeforeChoice:"Those were hard times: ",options:[{label:"your body ached and you were tired all the time. ",addsTags:["hard_times"],next:"focus",semantics:{}},{label:"but sometimes you miss them. ",addsTags:["hard_times"],next:"breathe",semantics:{}},{label:"but hard times don't last forever. ",next:"peace",semantics:{}},{label:"they made you into a weapon. Life is easier now. ",next:"quest",semantics:{}}]},breathe:{id:"breathe",textBeforeChoice:"You breathe deep ",options:[{label:"and prepare for battle, in spite of the lovely scenery. ",next:"conclusion",semantics:{mood:["danger"]}},{label:"try to remember your training. ",next:"focus",requires:["hard_times"],semantics:{mood:["peace"]}},{label:"and smell FOOD_NAME. ",next:"focus",excludes:["hard_times"],semantics:{theme:["hunger"]}},{label:"and feel grateful. ",next:"fishermen",excludes:["hard_times"],semantics:{mood:["grateful"]}}]},focus:{id:"focus",textBeforeChoice:"You focus on ",options:[{label:"the meal ahead, and quiet your mind. ",next:"final",semantics:{}},{label:"the little things, to keep your mind off the madness all around. ",next:"final",semantics:{}},{label:"the blade in your hands and the grumbling in your belly. ",next:"final",semantics:{}},{label:"the sound of the waves. ",next:"final",semantics:{details:["waves"]}}]},monsters:{id:"monsters",textBeforeChoice:"Monsters ",options:[{label:"are very annoying. ",next:"final",semantics:{}},{label:"are tireless. ",next:"final",semantics:{mood:["danger"]}},{label:"aren't the worst thing out here. ",next:"boss",requires:["boss"],semantics:{}},{label:"keep coming, no matter how many fall to your blade. ",next:"final",semantics:{}},{label:"also like seafood. ",next:"final",semantics:{theme:["seafood"]}}]},quest:{id:"quest",textBeforeChoice:"Your quest for delicious meals ",options:[{label:"keeps you busy. ",next:"conclusion",semantics:{}},{label:"is pointless. ",next:"conclusion",semantics:{mood:["bittersweet"]}},{label:"is more rewarding than trying to be a hero. ",next:"final",semantics:{}},{label:"allows you to meet some incredible people. ",next:"final",requires:["friends"],semantics:{details:["chefs","fishermen"]}}]},boss:{id:"boss",textBeforeChoice:"The massive creature that blocks your path ",options:[{label:"may be the one responsible for terrorizing the local chefs. ",next:"conclusion",semantics:{details:["boss"]}},{label:"lets off a foul stench you can smell from here. ",next:"conclusion",semantics:{details:["boss"]}},{label:"has so far evaded your wrath. ",next:"conclusion",semantics:{details:["boss"]}},{label:"stand between you and some nice FOOD_NAME. ",next:"conclusion",semantics:{theme:["hunger"],details:["boss"]}}]},conclusion:{id:"conclusion",textBeforeChoice:"",options:[{label:"As the sun dips below the horizon, you press on.",next:"final"},{label:"You feel sea mist on your face. Or is that monster blood?",next:"final",semantics:{details:["waves"]}},{label:"Fighting and eating. What else is there?",next:"final"},{label:"There are worse places to fight for your supper.",next:"final"},{label:"Waves crashing below. Monsters shriek maddening cries. Brief respite lies ahead.",next:"final"}]},final:{id:"final",textBeforeChoice:"",options:[]}}},T9={id:"outer_temple",locationName:"at the Outer Temple",locationPoetic:["Outside the Temple","by the Wall","Beside Ancient Stones","Near Holy Ground"],startNodes:[{nodeId:"start_goal",weight:50},{nodeId:"start_today",weight:50},{nodeId:"start_monsters",weight:50},{nodeId:"start_equipment",weight:50},{nodeId:"start_food",weight:50}],titleTemplates:[{pattern:"The {mood} {theme} of {questItem}",weight:3},{pattern:"{moodNoun}, {theme}, and {questItem}",weight:3},{pattern:"{mood} {theme} and {questItem}",weight:3},{pattern:"{mood} {questItem}",weight:2},{pattern:"{questItem}: {theme} and {details}",weight:3},{pattern:"{theme} and {details} {location}",weight:3},{pattern:"{details} and {questItem} {location}",weight:3},{pattern:"{details} and {questItem}",weight:2},{pattern:"{mood} {theme} and {details}",weight:2},{pattern:"{moodNoun}: {theme} and {details}",weight:3},{pattern:"{moodNoun}: {details} and {questItem}",weight:3},{pattern:"{questItem} and {details}",weight:2},{pattern:"{moodNoun} and {questItem}",weight:2},{pattern:"{moodNoun} and {questItem}: a Journey {location}",weight:2},{pattern:"A Tale of {moodNoun} {location}",weight:2},{pattern:"{questItem} and {moodNoun}",weight:2},{pattern:"In Search of {questItem}",weight:1},{pattern:"{questItem} {location}",weight:1}],semanticFragments:{theme:{resolve:["Determination","Resolve","Tenacity"],philosophy:["The Way","The Path","Solitude"],food:["Cuisine","Gourmet","A Refined Palate","Delicacies","Feast"],battle:["Violence","Conflict","Combat","Blade"],answers:["The Truth","Secrets","Forbidden Knowledge"],past:["The Past","Buried Memories"]},mood:{melancholy:{adjective:["Regretful","Nostalgic","Wistful","Somber"],noun:["Regret","Nostalgia","Bitterness","Doubt","Longing"]},optimism:{adjective:["Hopeful","Chill","Satisfying","Upbeat"],noun:["Hope","Renewal","Joy","Good Vibes"]},pensive:{adjective:[],noun:["Thoughts","Reflection","Realizations","Meditations","Uncertainty"]}},details:{monster_gold:["Wealthy Monsters","Monster Pockets"],magic:["Magic","Mystical Forces","Strange Ways"],loot:["Treasure","Loot","Shiny Objects"]}},nodes:{start_goal:{id:"start_goal",textBeforeChoice:"You came here ",options:[{label:"to kick butt and eat FOOD_NAME and you're all out of FOOD_NAME. ",next:"conclusion",semantics:{theme:["resolve"]}},{label:"with violence in your heart. ",next:"boss",requires:["boss"],semantics:{theme:["resolve","battle"]}},{label:"against your better judgment. ",next:"maps",semantics:{}},{label:"without a plan. ",next:"lifestyle",semantics:{}},{label:"as a child and saw something you would never forget. ",next:"memory",semantics:{}}]},start_today:{id:"start_today",textBeforeChoice:"Today is different. Today ",options:[{label:"you come here with map in hand.  ",next:"maps",semantics:{}},{label:"you awoke rested. ",next:"memory",semantics:{mood:["pensive"]}},{label:"you've cast aside all doubt. ",next:"lifestyle",semantics:{theme:["resolve"],mood:["pensive"]}},{label:"you know exactly what you're looking for: FOOD_NAME. ",next:"food_magic",semantics:{}}]},start_monsters:{id:"start_monsters",textBeforeChoice:"There are monsters here, and they ",options:[{label:"will mindlessly attack whoever they see. ",next:"history",semantics:{}},{label:"honestly might have a point. ",next:"monster_questions",semantics:{mood:["pensive"]}},{label:"carry coins, for some reason. ",addsTags:["monster_gold"],next:"monster_questions",semantics:{details:["monster_gold"]}},{label:"seem to gather in greater numbers each year. ",next:"history",semantics:{}},{label:"bleed just the same as anything else. Usually. ",next:"shrines",semantics:{theme:["battle"]}}]},start_equipment:{id:"start_equipment",textBeforeChoice:"You travel light, ",options:[{label:"but you're always in the market for a new weapon, or maybe a nice hat. ",next:"shrines",semantics:{details:["loot"]}},{label:"or at least you mean to. ",next:"maps",semantics:{}},{label:"but if you see some nice wood, ore, or whatever, yeah you'll take it. ",next:"maps",semantics:{details:["loot"]}},{label:"as you must. Such is the life of a traveling gourmet. ",addsTags:["itinerant"],next:"memory",semantics:{theme:["philosophy"]}}]},start_food:{id:"start_food",textBeforeChoice:"Why do you seek remote restaurants? ",options:[{label:"Because you love FOOD_NAME. ",next:"food_magic",semantics:{theme:["food"],mood:["optimism"]}},{label:"Everyone's gotta eat. ",next:"food_magic",semantics:{theme:["food"]}},{label:"Being a hero wasn't all it's cracked up to be. ",next:"regrets",semantics:{theme:["past"],mood:["melancholy"]}},{label:"In truth, there's a kind of magic in food prepared with love. ",next:"food_magic",semantics:{theme:["food"],details:["magic"]}},{label:"In a scary world, it's the only thing that brings you happiness. ",next:"lifestyle",semantics:{theme:["philosophy"]}}]},food_magic:{id:"food_magic",textBeforeChoice:"Food is ",options:[{label:"secretly composed of Essences. ",next:"food_conclusion",semantics:{}},{label:"the secret to your beautiful skin. ",next:"food_conclusion",semantics:{theme:["food"]}},{label:"a funny thing to devote your life to. ",next:"food_conclusion",semantics:{theme:["food","philosophy"]}}]},shrines:{id:"shrines",textBeforeChoice:"The shrines and artifacts here ",options:[{label:"give you strange new powers. ",next:"maybe",semantics:{details:["magic"]}},{label:"fill you with unease. ",next:"maybe",semantics:{mood:["pensive"]}},{label:"were built by whom, exactly? ",next:"maybe",semantics:{details:["magic"],mood:["pensive"]}},{label:"are a reminder of the world that was. ",next:"maybe",semantics:{details:["magic"]}}]},history:{id:"history",textBeforeChoice:"Scholars and lorekeepers claim ",options:[{label:"that monsters didn't always haunt this place. ",next:"monster_questions",semantics:{theme:["answers"]}},{label:"that Shadow Magic was originally intended for good. ",next:"conclusion",semantics:{theme:["answers"],details:["magic"]}},{label:"another civilization once stood year, ages ago. ",next:"shrines",semantics:{theme:["answers"]}},{label:"a great war raged here. ",next:"conclusion",semantics:{theme:["answers","battle"]}}]},memory:{id:"memory",textBeforeChoice:"Long ago ",options:[{label:"you trained every day, until your hands were raw. ",next:"final",semantics:{theme:["resolve","past"]}},{label:"this world was different. ",next:"final",semantics:{theme:["answers","past"]}},{label:"you went to sleep hungry every night. ",next:"final",semantics:{mood:["melancholy"]}}]},lifestyle:{id:"lifestyle",textBeforeChoice:"Since becoming an itinerant gourmet, ",options:[{label:"you've gained ",next:"gained",semantics:{}},{label:"you sleep easier. ",next:"memory",semantics:{mood:["optimism"]}},{label:"your swordfighting abilities have actually improved. ",next:"memory",semantics:{theme:["resolve","battle"]}},{label:"there's no returning to your old life. ",next:"maybe",semantics:{theme:["philosophy","past"],mood:["melancholy"]}}]},regrets:{id:"regrets",textBeforeChoice:"Looking back, you wish you ",options:[{label:"had said goodbye. ",next:"maybe",addsTags:["regret"],semantics:{mood:["melancholy"]}},{label:"had chosen this life sooner. ",next:"maybe",addsTags:["regret","lifestyle"],semantics:{}},{label:"had listened to your master's advice. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}},{label:"had never insulted that wizard. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}}]},gained:{id:"gained",textBeforeChoice:"",options:[{label:"an awareness that there's more to life than survival. ",next:"final",semantics:{mood:["optimism"]}},{label:"quite a bit of weight. ",next:"final",semantics:{}},{label:"access to maps leading to incredible places. ",next:"final",semantics:{}},{label:"a large amount of wood. ",next:"final",semantics:{details:["loot"]}}]},maps:{id:"maps",textBeforeChoice:"The map that pointed you here ",options:[{label:"promised FOOD_NAME just ahead. ",next:"conclusion",semantics:{}},{label:"mentioned nothing about monsters. ",next:"maybe",addsTags:["monster_questions","maps"],semantics:{theme:["battle"]}},{label:"was probably accurate, right? ",next:"conclusion",semantics:{}},{label:"was pried from the fingers of an undead warrior. ",next:"conclusion",semantics:{}}]},monster_questions:{id:"monster_questions",textBeforeChoice:"Do monsters ",options:[{label:"hold grudges? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"have feelings? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"really use money? ",next:"maybe",addsTags:["monster_questions"],semantics:{details:["monster_gold"]}},{label:"only exist because of Shadow Magic? ",addsTags:["monster_questions"],next:"maybe",semantics:{}},{label:"just stand around all day hoping someone will walk this way? ",addsTags:["monster_questions"],next:"maybe",semantics:{}}]},maybe:{id:"maybe",textBeforeChoice:"Maybe ",options:[{label:"we're the real monsters. ",next:"final",requires:["monster_questions"],semantics:{}},{label:"you should try asking one, instead of slaying it. ",next:"final",requires:["monster_questions"],semantics:{mood:["pensive"]}},{label:"you should just forget it and push forward. ",requires:["regret"],next:"final",semantics:{}},{label:"you'll see them again some day. ",next:"final",requires:["regret"],excludes:["lifestyle"],semantics:{}},{label:"some nice delicious FOOD_NAME is all you need. ",next:"final",semantics:{}},{label:"nothing really matters. ",next:"final",semantics:{}},{label:"you should level up before starting the next fight. ",next:"final",semantics:{}}]},boss:{id:"boss",textBeforeChoice:"A terrible foe awaits just ahead. The beast will surely ",options:[{label:"fall to your blade, as so many have before it. ",next:"conclusion",semantics:{}},{label:"drop some sweet loot. ",next:"conclusion",semantics:{}},{label:"get the best of you. ",next:"conclusion",semantics:{}},{label:"step aside if you ask nicely. ",next:"conclusion",semantics:{}}]},food_conclusion:{id:"food_conclusion",textBeforeChoice:"Remember: ",options:[{label:"you only live once. ",next:"final",semantics:{}},{label:"you're not hurting anyone. Aside from all these monsters. ",next:"final",semantics:{}},{label:"FOOD_NAME is just ahead and nothing will stop you. ",next:"final",semantics:{}}]},conclusion:{id:"conclusion",textBeforeChoice:"",options:[{label:"Your feet ache, but you press on.",next:"final"},{label:"Just a few more fights and then rest.",next:"final"},{label:"You look into the distance and visualize your goal.",next:"final"},{label:"You clear your mind of all thoughts but FOOD_NAME.",next:"final"}]},final:{id:"final",textBeforeChoice:"",options:[]}}},C9={id:"mossy_forest",locationName:"In the Mossy Forest",locationPoetic:["Shaded by Giants","Bathed in Green","Where Forest Spirits Lurk","Under the Canopy"],startNodes:[{nodeId:"start_goal",weight:50},{nodeId:"start_today",weight:50},{nodeId:"start_monsters",weight:50},{nodeId:"start_equipment",weight:50},{nodeId:"start_food",weight:50}],titleTemplates:[{pattern:"The {mood} {theme} of {questItem}",weight:3},{pattern:"{moodNoun}, {theme}, and {questItem}",weight:3},{pattern:"{mood} {theme} and {questItem}",weight:3},{pattern:"{mood} {questItem}",weight:2},{pattern:"{questItem}: {theme} and {details}",weight:3},{pattern:"{theme} and {details} {location}",weight:3},{pattern:"{details} and {questItem} {location}",weight:3},{pattern:"{details} and {questItem}",weight:2},{pattern:"{mood} {theme} and {details}",weight:2},{pattern:"{moodNoun}: {theme} and {details}",weight:3},{pattern:"{moodNoun}: {details} and {questItem}",weight:3},{pattern:"{questItem} and {details}",weight:2},{pattern:"{moodNoun} and {questItem}",weight:2},{pattern:"{moodNoun} and {questItem}: a Journey {location}",weight:2},{pattern:"A Tale of {moodNoun} {location}",weight:2},{pattern:"{questItem} and {moodNoun}",weight:2},{pattern:"In Search of {questItem}",weight:1},{pattern:"{questItem} {location}",weight:1}],semanticFragments:{theme:{resolve:["Determination","Resolve","Tenacity"],philosophy:["The Way","The Path","Solitude"],food:["Cuisine","Gourmet","A Refined Palate","Delicacies","Feast"],battle:["Violence","Conflict","Combat","Blade"],answers:["The Truth","Secrets","Forbidden Knowledge"],past:["The Past","Buried Memories"]},mood:{melancholy:{adjective:["Regretful","Nostalgic","Wistful","Somber"],noun:["Regret","Nostalgia","Bitterness","Doubt","Longing"]},optimism:{adjective:["Hopeful","Chill","Satisfying","Upbeat"],noun:["Hope","Renewal","Joy","Good Vibes"]},pensive:{adjective:[],noun:["Thoughts","Reflection","Realizations","Meditations","Uncertainty"]}},details:{monster_gold:["Wealthy Monsters","Monster Pockets"],magic:["Magic","Mystical Forces","Strange Ways"],loot:["Treasure","Loot","Shiny Objects"]}},nodes:{start_goal:{id:"start_goal",textBeforeChoice:"You came here ",options:[{label:"to kick butt and eat FOOD_NAME and you're all out of FOOD_NAME. ",next:"conclusion",semantics:{theme:["resolve"]}},{label:"with violence in your heart. ",next:"boss",requires:["boss"],semantics:{theme:["resolve","battle"]}},{label:"against your better judgment. ",next:"maps",semantics:{}},{label:"without a plan. ",next:"lifestyle",semantics:{}},{label:"as a child and saw something you would never forget. ",next:"memory",semantics:{}}]},start_today:{id:"start_today",textBeforeChoice:"Today is different. Today ",options:[{label:"you come here with map in hand.  ",next:"maps",semantics:{}},{label:"you awoke rested. ",next:"memory",semantics:{mood:["pensive"]}},{label:"you've cast aside all doubt. ",next:"lifestyle",semantics:{theme:["resolve"],mood:["pensive"]}},{label:"you know exactly what you're looking for: FOOD_NAME. ",next:"food_magic",semantics:{}}]},start_monsters:{id:"start_monsters",textBeforeChoice:"There are monsters here, and they ",options:[{label:"will mindlessly attack whoever they see. ",next:"history",semantics:{}},{label:"honestly might have a point. ",next:"monster_questions",semantics:{mood:["pensive"]}},{label:"carry coins, for some reason. ",addsTags:["monster_gold"],next:"monster_questions",semantics:{details:["monster_gold"]}},{label:"seem to gather in greater numbers each year. ",next:"history",semantics:{}},{label:"bleed just the same as anything else. Usually. ",next:"shrines",semantics:{theme:["battle"]}}]},start_equipment:{id:"start_equipment",textBeforeChoice:"You travel light, ",options:[{label:"but you're always in the market for a new weapon, or maybe a nice hat. ",next:"shrines",semantics:{details:["loot"]}},{label:"or at least you mean to. ",next:"maps",semantics:{}},{label:"but if you see some nice wood, ore, or whatever, yeah you'll take it. ",next:"maps",semantics:{details:["loot"]}},{label:"as you must. Such is the life of a traveling gourmet. ",addsTags:["itinerant"],next:"memory",semantics:{theme:["philosophy"]}}]},start_food:{id:"start_food",textBeforeChoice:"Why do you seek remote restaurants? ",options:[{label:"Because you love FOOD_NAME. ",next:"food_magic",semantics:{theme:["food"],mood:["optimism"]}},{label:"Everyone's gotta eat. ",next:"food_magic",semantics:{theme:["food"]}},{label:"Being a hero wasn't all it's cracked up to be. ",next:"regrets",semantics:{theme:["past"],mood:["melancholy"]}},{label:"In truth, there's a kind of magic in food prepared with love. ",next:"food_magic",semantics:{theme:["food"],details:["magic"]}},{label:"In a scary world, it's the only thing that brings you happiness. ",next:"lifestyle",semantics:{theme:["philosophy"]}}]},food_magic:{id:"food_magic",textBeforeChoice:"Food is ",options:[{label:"secretly composed of Essences. ",next:"food_conclusion",semantics:{}},{label:"the secret to your beautiful skin. ",next:"food_conclusion",semantics:{theme:["food"]}},{label:"a funny thing to devote your life to. ",next:"food_conclusion",semantics:{theme:["food","philosophy"]}}]},shrines:{id:"shrines",textBeforeChoice:"The shrines and artifacts here ",options:[{label:"give you strange new powers. ",next:"maybe",semantics:{details:["magic"]}},{label:"fill you with unease. ",next:"maybe",semantics:{mood:["pensive"]}},{label:"were built by whom, exactly? ",next:"maybe",semantics:{details:["magic"],mood:["pensive"]}},{label:"are a reminder of the world that was. ",next:"maybe",semantics:{details:["magic"]}}]},history:{id:"history",textBeforeChoice:"Scholars and lorekeepers claim ",options:[{label:"that monsters didn't always haunt this place. ",next:"monster_questions",semantics:{theme:["answers"]}},{label:"that Shadow Magic was originally intended for good. ",next:"conclusion",semantics:{theme:["answers"],details:["magic"]}},{label:"another civilization once stood year, ages ago. ",next:"shrines",semantics:{theme:["answers"]}},{label:"a great war raged here. ",next:"conclusion",semantics:{theme:["answers","battle"]}}]},memory:{id:"memory",textBeforeChoice:"Long ago ",options:[{label:"you trained every day, until your hands were raw. ",next:"final",semantics:{theme:["resolve","past"]}},{label:"this world was different. ",next:"final",semantics:{theme:["answers","past"]}},{label:"you went to sleep hungry every night. ",next:"final",semantics:{mood:["melancholy"]}}]},lifestyle:{id:"lifestyle",textBeforeChoice:"Since becoming an itinerant gourmet, ",options:[{label:"you've gained ",next:"gained",semantics:{}},{label:"you sleep easier. ",next:"memory",semantics:{mood:["optimism"]}},{label:"your swordfighting abilities have actually improved. ",next:"memory",semantics:{theme:["resolve","battle"]}},{label:"there's no returning to your old life. ",next:"maybe",semantics:{theme:["philosophy","past"],mood:["melancholy"]}}]},regrets:{id:"regrets",textBeforeChoice:"Looking back, you wish you ",options:[{label:"had said goodbye. ",next:"maybe",addsTags:["regret"],semantics:{mood:["melancholy"]}},{label:"had chosen this life sooner. ",next:"maybe",addsTags:["regret","lifestyle"],semantics:{}},{label:"had listened to your master's advice. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}},{label:"had never insulted that wizard. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}}]},gained:{id:"gained",textBeforeChoice:"",options:[{label:"an awareness that there's more to life than survival. ",next:"final",semantics:{mood:["optimism"]}},{label:"quite a bit of weight. ",next:"final",semantics:{}},{label:"access to maps leading to incredible places. ",next:"final",semantics:{}},{label:"a large amount of wood. ",next:"final",semantics:{details:["loot"]}}]},maps:{id:"maps",textBeforeChoice:"The map that pointed you here ",options:[{label:"promised FOOD_NAME just ahead. ",next:"conclusion",semantics:{}},{label:"mentioned nothing about monsters. ",next:"maybe",addsTags:["monster_questions","maps"],semantics:{theme:["battle"]}},{label:"was probably accurate, right? ",next:"conclusion",semantics:{}},{label:"was pried from the fingers of an undead warrior. ",next:"conclusion",semantics:{}}]},monster_questions:{id:"monster_questions",textBeforeChoice:"Do monsters ",options:[{label:"hold grudges? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"have feelings? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"really use money? ",next:"maybe",addsTags:["monster_questions"],semantics:{details:["monster_gold"]}},{label:"only exist because of Shadow Magic? ",addsTags:["monster_questions"],next:"maybe",semantics:{}},{label:"just stand around all day hoping someone will walk this way? ",addsTags:["monster_questions"],next:"maybe",semantics:{}}]},maybe:{id:"maybe",textBeforeChoice:"Maybe ",options:[{label:"we're the real monsters. ",next:"final",requires:["monster_questions"],semantics:{}},{label:"you should try asking one, instead of slaying it. ",next:"final",requires:["monster_questions"],semantics:{mood:["pensive"]}},{label:"you should just forget it and push forward. ",requires:["regret"],next:"final",semantics:{}},{label:"you'll see them again some day. ",next:"final",requires:["regret"],excludes:["lifestyle"],semantics:{}},{label:"some nice delicious FOOD_NAME is all you need. ",next:"final",semantics:{}},{label:"nothing really matters. ",next:"final",semantics:{}},{label:"you should level up before starting the next fight. ",next:"final",semantics:{}}]},boss:{id:"boss",textBeforeChoice:"A terrible foe awaits just ahead. The beast will surely ",options:[{label:"fall to your blade, as so many have before it. ",next:"conclusion",semantics:{}},{label:"drop some sweet loot. ",next:"conclusion",semantics:{}},{label:"get the best of you. ",next:"conclusion",semantics:{}},{label:"step aside if you ask nicely. ",next:"conclusion",semantics:{}}]},food_conclusion:{id:"food_conclusion",textBeforeChoice:"Remember: ",options:[{label:"you only live once. ",next:"final",semantics:{}},{label:"you're not hurting anyone. Aside from all these monsters. ",next:"final",semantics:{}},{label:"FOOD_NAME is just ahead and nothing will stop you. ",next:"final",semantics:{}}]},conclusion:{id:"conclusion",textBeforeChoice:"",options:[{label:"Your feet ache, but you press on.",next:"final"},{label:"Just a few more fights and then rest.",next:"final"},{label:"You look into the distance and visualize your goal.",next:"final"},{label:"You clear your mind of all thoughts but FOOD_NAME.",next:"final"}]},final:{id:"final",textBeforeChoice:"",options:[]}}},A9={id:"mountain_pass",locationName:"Along the Mountain Pass",locationPoetic:["In the Clouds","Among Giants","Above the World","At the Sky's Edge"],startNodes:[{nodeId:"start_goal",weight:50},{nodeId:"start_today",weight:50},{nodeId:"start_monsters",weight:50},{nodeId:"start_equipment",weight:50},{nodeId:"start_food",weight:50}],titleTemplates:[{pattern:"The {mood} {theme} of {questItem}",weight:3},{pattern:"{moodNoun}, {theme}, and {questItem}",weight:3},{pattern:"{mood} {theme} and {questItem}",weight:3},{pattern:"{mood} {questItem}",weight:2},{pattern:"{questItem}: {theme} and {details}",weight:3},{pattern:"{theme} and {details} {location}",weight:3},{pattern:"{details} and {questItem} {location}",weight:3},{pattern:"{details} and {questItem}",weight:2},{pattern:"{mood} {theme} and {details}",weight:2},{pattern:"{moodNoun}: {theme} and {details}",weight:3},{pattern:"{moodNoun}: {details} and {questItem}",weight:3},{pattern:"{questItem} and {details}",weight:2},{pattern:"{moodNoun} and {questItem}",weight:2},{pattern:"{moodNoun} and {questItem}: a Journey {location}",weight:2},{pattern:"A Tale of {moodNoun} {location}",weight:2},{pattern:"{questItem} and {moodNoun}",weight:2},{pattern:"In Search of {questItem}",weight:1},{pattern:"{questItem} {location}",weight:1}],semanticFragments:{theme:{resolve:["Determination","Resolve","Tenacity"],philosophy:["The Way","The Path","Solitude"],food:["Cuisine","Gourmet","A Refined Palate","Delicacies","Feast"],battle:["Violence","Conflict","Combat","Blade"],answers:["The Truth","Secrets","Forbidden Knowledge"],past:["The Past","Buried Memories"]},mood:{melancholy:{adjective:["Regretful","Nostalgic","Wistful","Somber"],noun:["Regret","Nostalgia","Bitterness","Doubt","Longing"]},optimism:{adjective:["Hopeful","Chill","Satisfying","Upbeat"],noun:["Hope","Renewal","Joy","Good Vibes"]},pensive:{adjective:[],noun:["Thoughts","Reflection","Realizations","Meditations","Uncertainty"]}},details:{monster_gold:["Wealthy Monsters","Monster Pockets"],magic:["Magic","Mystical Forces","Strange Ways"],loot:["Treasure","Loot","Shiny Objects"]}},nodes:{start_goal:{id:"start_goal",textBeforeChoice:"You came here ",options:[{label:"to kick butt and eat FOOD_NAME and you're all out of FOOD_NAME. ",next:"conclusion",semantics:{theme:["resolve"]}},{label:"with violence in your heart. ",next:"boss",requires:["boss"],semantics:{theme:["resolve","battle"]}},{label:"against your better judgment. ",next:"maps",semantics:{}},{label:"without a plan. ",next:"lifestyle",semantics:{}},{label:"as a child and saw something you would never forget. ",next:"memory",semantics:{}}]},start_today:{id:"start_today",textBeforeChoice:"Today is different. Today ",options:[{label:"you come here with map in hand.  ",next:"maps",semantics:{}},{label:"you awoke rested. ",next:"memory",semantics:{mood:["pensive"]}},{label:"you've cast aside all doubt. ",next:"lifestyle",semantics:{theme:["resolve"],mood:["pensive"]}},{label:"you know exactly what you're looking for: FOOD_NAME. ",next:"food_magic",semantics:{}}]},start_monsters:{id:"start_monsters",textBeforeChoice:"There are monsters here, and they ",options:[{label:"will mindlessly attack whoever they see. ",next:"history",semantics:{}},{label:"honestly might have a point. ",next:"monster_questions",semantics:{mood:["pensive"]}},{label:"carry coins, for some reason. ",addsTags:["monster_gold"],next:"monster_questions",semantics:{details:["monster_gold"]}},{label:"seem to gather in greater numbers each year. ",next:"history",semantics:{}},{label:"bleed just the same as anything else. Usually. ",next:"shrines",semantics:{theme:["battle"]}}]},start_equipment:{id:"start_equipment",textBeforeChoice:"You travel light, ",options:[{label:"but you're always in the market for a new weapon, or maybe a nice hat. ",next:"shrines",semantics:{details:["loot"]}},{label:"or at least you mean to. ",next:"maps",semantics:{}},{label:"but if you see some nice wood, ore, or whatever, yeah you'll take it. ",next:"maps",semantics:{details:["loot"]}},{label:"as you must. Such is the life of a traveling gourmet. ",addsTags:["itinerant"],next:"memory",semantics:{theme:["philosophy"]}}]},start_food:{id:"start_food",textBeforeChoice:"Why do you seek remote restaurants? ",options:[{label:"Because you love FOOD_NAME. ",next:"food_magic",semantics:{theme:["food"],mood:["optimism"]}},{label:"Everyone's gotta eat. ",next:"food_magic",semantics:{theme:["food"]}},{label:"Being a hero wasn't all it's cracked up to be. ",next:"regrets",semantics:{theme:["past"],mood:["melancholy"]}},{label:"In truth, there's a kind of magic in food prepared with love. ",next:"food_magic",semantics:{theme:["food"],details:["magic"]}},{label:"In a scary world, it's the only thing that brings you happiness. ",next:"lifestyle",semantics:{theme:["philosophy"]}}]},food_magic:{id:"food_magic",textBeforeChoice:"Food is ",options:[{label:"secretly composed of Essences. ",next:"food_conclusion",semantics:{}},{label:"the secret to your beautiful skin. ",next:"food_conclusion",semantics:{theme:["food"]}},{label:"a funny thing to devote your life to. ",next:"food_conclusion",semantics:{theme:["food","philosophy"]}}]},shrines:{id:"shrines",textBeforeChoice:"The shrines and artifacts here ",options:[{label:"give you strange new powers. ",next:"maybe",semantics:{details:["magic"]}},{label:"fill you with unease. ",next:"maybe",semantics:{mood:["pensive"]}},{label:"were built by whom, exactly? ",next:"maybe",semantics:{details:["magic"],mood:["pensive"]}},{label:"are a reminder of the world that was. ",next:"maybe",semantics:{details:["magic"]}}]},history:{id:"history",textBeforeChoice:"Scholars and lorekeepers claim ",options:[{label:"that monsters didn't always haunt this place. ",next:"monster_questions",semantics:{theme:["answers"]}},{label:"that Shadow Magic was originally intended for good. ",next:"conclusion",semantics:{theme:["answers"],details:["magic"]}},{label:"another civilization once stood year, ages ago. ",next:"shrines",semantics:{theme:["answers"]}},{label:"a great war raged here. ",next:"conclusion",semantics:{theme:["answers","battle"]}}]},memory:{id:"memory",textBeforeChoice:"Long ago ",options:[{label:"you trained every day, until your hands were raw. ",next:"final",semantics:{theme:["resolve","past"]}},{label:"this world was different. ",next:"final",semantics:{theme:["answers","past"]}},{label:"you went to sleep hungry every night. ",next:"final",semantics:{mood:["melancholy"]}}]},lifestyle:{id:"lifestyle",textBeforeChoice:"Since becoming an itinerant gourmet, ",options:[{label:"you've gained ",next:"gained",semantics:{}},{label:"you sleep easier. ",next:"memory",semantics:{mood:["optimism"]}},{label:"your swordfighting abilities have actually improved. ",next:"memory",semantics:{theme:["resolve","battle"]}},{label:"there's no returning to your old life. ",next:"maybe",semantics:{theme:["philosophy","past"],mood:["melancholy"]}}]},regrets:{id:"regrets",textBeforeChoice:"Looking back, you wish you ",options:[{label:"had said goodbye. ",next:"maybe",addsTags:["regret"],semantics:{mood:["melancholy"]}},{label:"had chosen this life sooner. ",next:"maybe",addsTags:["regret","lifestyle"],semantics:{}},{label:"had listened to your master's advice. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}},{label:"had never insulted that wizard. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}}]},gained:{id:"gained",textBeforeChoice:"",options:[{label:"an awareness that there's more to life than survival. ",next:"final",semantics:{mood:["optimism"]}},{label:"quite a bit of weight. ",next:"final",semantics:{}},{label:"access to maps leading to incredible places. ",next:"final",semantics:{}},{label:"a large amount of wood. ",next:"final",semantics:{details:["loot"]}}]},maps:{id:"maps",textBeforeChoice:"The map that pointed you here ",options:[{label:"promised FOOD_NAME just ahead. ",next:"conclusion",semantics:{}},{label:"mentioned nothing about monsters. ",next:"maybe",addsTags:["monster_questions","maps"],semantics:{theme:["battle"]}},{label:"was probably accurate, right? ",next:"conclusion",semantics:{}},{label:"was pried from the fingers of an undead warrior. ",next:"conclusion",semantics:{}}]},monster_questions:{id:"monster_questions",textBeforeChoice:"Do monsters ",options:[{label:"hold grudges? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"have feelings? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"really use money? ",next:"maybe",addsTags:["monster_questions"],semantics:{details:["monster_gold"]}},{label:"only exist because of Shadow Magic? ",addsTags:["monster_questions"],next:"maybe",semantics:{}},{label:"just stand around all day hoping someone will walk this way? ",addsTags:["monster_questions"],next:"maybe",semantics:{}}]},maybe:{id:"maybe",textBeforeChoice:"Maybe ",options:[{label:"we're the real monsters. ",next:"final",requires:["monster_questions"],semantics:{}},{label:"you should try asking one, instead of slaying it. ",next:"final",requires:["monster_questions"],semantics:{mood:["pensive"]}},{label:"you should just forget it and push forward. ",requires:["regret"],next:"final",semantics:{}},{label:"you'll see them again some day. ",next:"final",requires:["regret"],excludes:["lifestyle"],semantics:{}},{label:"some nice delicious FOOD_NAME is all you need. ",next:"final",semantics:{}},{label:"nothing really matters. ",next:"final",semantics:{}},{label:"you should level up before starting the next fight. ",next:"final",semantics:{}}]},boss:{id:"boss",textBeforeChoice:"A terrible foe awaits just ahead. The beast will surely ",options:[{label:"fall to your blade, as so many have before it. ",next:"conclusion",semantics:{}},{label:"drop some sweet loot. ",next:"conclusion",semantics:{}},{label:"get the best of you. ",next:"conclusion",semantics:{}},{label:"step aside if you ask nicely. ",next:"conclusion",semantics:{}}]},food_conclusion:{id:"food_conclusion",textBeforeChoice:"Remember: ",options:[{label:"you only live once. ",next:"final",semantics:{}},{label:"you're not hurting anyone. Aside from all these monsters. ",next:"final",semantics:{}},{label:"FOOD_NAME is just ahead and nothing will stop you. ",next:"final",semantics:{}}]},conclusion:{id:"conclusion",textBeforeChoice:"",options:[{label:"Your feet ache, but you press on.",next:"final"},{label:"Just a few more fights and then rest.",next:"final"},{label:"You look into the distance and visualize your goal.",next:"final"},{label:"You clear your mind of all thoughts but FOOD_NAME.",next:"final"}]},final:{id:"final",textBeforeChoice:"",options:[]}}},b9={id:"fields",locationName:"In the Fields",locationPoetic:["Beneath the Great Sword","On Grassy Plains","In Waves of Green","Under a Bright Sky"],startNodes:[{nodeId:"start_goal",weight:50},{nodeId:"start_today",weight:50},{nodeId:"start_monsters",weight:50},{nodeId:"start_equipment",weight:50},{nodeId:"start_food",weight:50}],titleTemplates:[{pattern:"The {mood} {theme} of {questItem}",weight:3},{pattern:"{moodNoun}, {theme}, and {questItem}",weight:3},{pattern:"{mood} {theme} and {questItem}",weight:3},{pattern:"{mood} {questItem}",weight:2},{pattern:"{questItem}: {theme} and {details}",weight:3},{pattern:"{theme} and {details} {location}",weight:3},{pattern:"{details} and {questItem} {location}",weight:3},{pattern:"{details} and {questItem}",weight:2},{pattern:"{mood} {theme} and {details}",weight:2},{pattern:"{moodNoun}: {theme} and {details}",weight:3},{pattern:"{moodNoun}: {details} and {questItem}",weight:3},{pattern:"{questItem} and {details}",weight:2},{pattern:"{moodNoun} and {questItem}",weight:2},{pattern:"{moodNoun} and {questItem}: a Journey {location}",weight:2},{pattern:"A Tale of {moodNoun} {location}",weight:2},{pattern:"{questItem} and {moodNoun}",weight:2},{pattern:"In Search of {questItem}",weight:1},{pattern:"{questItem} {location}",weight:1}],semanticFragments:{theme:{resolve:["Determination","Resolve","Tenacity"],philosophy:["The Way","The Path","Solitude"],food:["Cuisine","Gourmet","A Refined Palate","Delicacies","Feast"],battle:["Violence","Conflict","Combat","Blade"],answers:["The Truth","Secrets","Forbidden Knowledge"],past:["The Past","Buried Memories"]},mood:{melancholy:{adjective:["Regretful","Nostalgic","Wistful","Somber"],noun:["Regret","Nostalgia","Bitterness","Doubt","Longing"]},optimism:{adjective:["Hopeful","Chill","Satisfying","Upbeat"],noun:["Hope","Renewal","Joy","Good Vibes"]},pensive:{adjective:[],noun:["Thoughts","Reflection","Realizations","Meditations","Uncertainty"]}},details:{monster_gold:["Wealthy Monsters","Monster Pockets"],magic:["Magic","Mystical Forces","Strange Ways"],loot:["Treasure","Loot","Shiny Objects"]}},nodes:{start_goal:{id:"start_goal",textBeforeChoice:"You came here ",options:[{label:"to kick butt and eat FOOD_NAME and you're all out of FOOD_NAME. ",next:"conclusion",semantics:{theme:["resolve"]}},{label:"with violence in your heart. ",next:"boss",requires:["boss"],semantics:{theme:["resolve","battle"]}},{label:"against your better judgment. ",next:"maps",semantics:{}},{label:"without a plan. ",next:"lifestyle",semantics:{}},{label:"as a child and saw something you would never forget. ",next:"memory",semantics:{}}]},start_today:{id:"start_today",textBeforeChoice:"Today is different. Today ",options:[{label:"you come here with map in hand.  ",next:"maps",semantics:{}},{label:"you awoke rested. ",next:"memory",semantics:{mood:["pensive"]}},{label:"you've cast aside all doubt. ",next:"lifestyle",semantics:{theme:["resolve"],mood:["pensive"]}},{label:"you know exactly what you're looking for: FOOD_NAME. ",next:"food_magic",semantics:{}}]},start_monsters:{id:"start_monsters",textBeforeChoice:"There are monsters here, and they ",options:[{label:"will mindlessly attack whoever they see. ",next:"history",semantics:{}},{label:"honestly might have a point. ",next:"monster_questions",semantics:{mood:["pensive"]}},{label:"carry coins, for some reason. ",addsTags:["monster_gold"],next:"monster_questions",semantics:{details:["monster_gold"]}},{label:"seem to gather in greater numbers each year. ",next:"history",semantics:{}},{label:"bleed just the same as anything else. Usually. ",next:"shrines",semantics:{theme:["battle"]}}]},start_equipment:{id:"start_equipment",textBeforeChoice:"You travel light, ",options:[{label:"but you're always in the market for a new weapon, or maybe a nice hat. ",next:"shrines",semantics:{details:["loot"]}},{label:"or at least you mean to. ",next:"maps",semantics:{}},{label:"but if you see some nice wood, ore, or whatever, yeah you'll take it. ",next:"maps",semantics:{details:["loot"]}},{label:"as you must. Such is the life of a traveling gourmet. ",addsTags:["itinerant"],next:"memory",semantics:{theme:["philosophy"]}}]},start_food:{id:"start_food",textBeforeChoice:"Why do you seek remote restaurants? ",options:[{label:"Because you love FOOD_NAME. ",next:"food_magic",semantics:{theme:["food"],mood:["optimism"]}},{label:"Everyone's gotta eat. ",next:"food_magic",semantics:{theme:["food"]}},{label:"Being a hero wasn't all it's cracked up to be. ",next:"regrets",semantics:{theme:["past"],mood:["melancholy"]}},{label:"In truth, there's a kind of magic in food prepared with love. ",next:"food_magic",semantics:{theme:["food"],details:["magic"]}},{label:"In a scary world, it's the only thing that brings you happiness. ",next:"lifestyle",semantics:{theme:["philosophy"]}}]},food_magic:{id:"food_magic",textBeforeChoice:"Food is ",options:[{label:"secretly composed of Essences. ",next:"food_conclusion",semantics:{}},{label:"the secret to your beautiful skin. ",next:"food_conclusion",semantics:{theme:["food"]}},{label:"a funny thing to devote your life to. ",next:"food_conclusion",semantics:{theme:["food","philosophy"]}}]},shrines:{id:"shrines",textBeforeChoice:"The shrines and artifacts here ",options:[{label:"give you strange new powers. ",next:"maybe",semantics:{details:["magic"]}},{label:"fill you with unease. ",next:"maybe",semantics:{mood:["pensive"]}},{label:"were built by whom, exactly? ",next:"maybe",semantics:{details:["magic"],mood:["pensive"]}},{label:"are a reminder of the world that was. ",next:"maybe",semantics:{details:["magic"]}}]},history:{id:"history",textBeforeChoice:"Scholars and lorekeepers claim ",options:[{label:"that monsters didn't always haunt this place. ",next:"monster_questions",semantics:{theme:["answers"]}},{label:"that Shadow Magic was originally intended for good. ",next:"conclusion",semantics:{theme:["answers"],details:["magic"]}},{label:"another civilization once stood year, ages ago. ",next:"shrines",semantics:{theme:["answers"]}},{label:"a great war raged here. ",next:"conclusion",semantics:{theme:["answers","battle"]}}]},memory:{id:"memory",textBeforeChoice:"Long ago ",options:[{label:"you trained every day, until your hands were raw. ",next:"final",semantics:{theme:["resolve","past"]}},{label:"this world was different. ",next:"final",semantics:{theme:["answers","past"]}},{label:"you went to sleep hungry every night. ",next:"final",semantics:{mood:["melancholy"]}}]},lifestyle:{id:"lifestyle",textBeforeChoice:"Since becoming an itinerant gourmet, ",options:[{label:"you've gained ",next:"gained",semantics:{}},{label:"you sleep easier. ",next:"memory",semantics:{mood:["optimism"]}},{label:"your swordfighting abilities have actually improved. ",next:"memory",semantics:{theme:["resolve","battle"]}},{label:"there's no returning to your old life. ",next:"maybe",semantics:{theme:["philosophy","past"],mood:["melancholy"]}}]},regrets:{id:"regrets",textBeforeChoice:"Looking back, you wish you ",options:[{label:"had said goodbye. ",next:"maybe",addsTags:["regret"],semantics:{mood:["melancholy"]}},{label:"had chosen this life sooner. ",next:"maybe",addsTags:["regret","lifestyle"],semantics:{}},{label:"had listened to your master's advice. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}},{label:"had never insulted that wizard. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}}]},gained:{id:"gained",textBeforeChoice:"",options:[{label:"an awareness that there's more to life than survival. ",next:"final",semantics:{mood:["optimism"]}},{label:"quite a bit of weight. ",next:"final",semantics:{}},{label:"access to maps leading to incredible places. ",next:"final",semantics:{}},{label:"a large amount of wood. ",next:"final",semantics:{details:["loot"]}}]},maps:{id:"maps",textBeforeChoice:"The map that pointed you here ",options:[{label:"promised FOOD_NAME just ahead. ",next:"conclusion",semantics:{}},{label:"mentioned nothing about monsters. ",next:"maybe",addsTags:["monster_questions","maps"],semantics:{theme:["battle"]}},{label:"was probably accurate, right? ",next:"conclusion",semantics:{}},{label:"was pried from the fingers of an undead warrior. ",next:"conclusion",semantics:{}}]},monster_questions:{id:"monster_questions",textBeforeChoice:"Do monsters ",options:[{label:"hold grudges? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"have feelings? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"really use money? ",next:"maybe",addsTags:["monster_questions"],semantics:{details:["monster_gold"]}},{label:"only exist because of Shadow Magic? ",addsTags:["monster_questions"],next:"maybe",semantics:{}},{label:"just stand around all day hoping someone will walk this way? ",addsTags:["monster_questions"],next:"maybe",semantics:{}}]},maybe:{id:"maybe",textBeforeChoice:"Maybe ",options:[{label:"we're the real monsters. ",next:"final",requires:["monster_questions"],semantics:{}},{label:"you should try asking one, instead of slaying it. ",next:"final",requires:["monster_questions"],semantics:{mood:["pensive"]}},{label:"you should just forget it and push forward. ",requires:["regret"],next:"final",semantics:{}},{label:"you'll see them again some day. ",next:"final",requires:["regret"],excludes:["lifestyle"],semantics:{}},{label:"some nice delicious FOOD_NAME is all you need. ",next:"final",semantics:{}},{label:"nothing really matters. ",next:"final",semantics:{}},{label:"you should level up before starting the next fight. ",next:"final",semantics:{}}]},boss:{id:"boss",textBeforeChoice:"A terrible foe awaits just ahead. The beast will surely ",options:[{label:"fall to your blade, as so many have before it. ",next:"conclusion",semantics:{}},{label:"drop some sweet loot. ",next:"conclusion",semantics:{}},{label:"get the best of you. ",next:"conclusion",semantics:{}},{label:"step aside if you ask nicely. ",next:"conclusion",semantics:{}}]},food_conclusion:{id:"food_conclusion",textBeforeChoice:"Remember: ",options:[{label:"you only live once. ",next:"final",semantics:{}},{label:"you're not hurting anyone. Aside from all these monsters. ",next:"final",semantics:{}},{label:"FOOD_NAME is just ahead and nothing will stop you. ",next:"final",semantics:{}}]},conclusion:{id:"conclusion",textBeforeChoice:"",options:[{label:"Your feet ache, but you press on.",next:"final"},{label:"Just a few more fights and then rest.",next:"final"},{label:"You look into the distance and visualize your goal.",next:"final"},{label:"You clear your mind of all thoughts but FOOD_NAME.",next:"final"}]},final:{id:"final",textBeforeChoice:"",options:[]}}},E9={id:"outer_temple",locationName:"in the Forbidden City",locationPoetic:["Among Concrete Skeletons","Amidst Ghostly Towers","in Canyons of Steel","in a Desolate Metropolis","on Haunted Streets"],startNodes:[{nodeId:"start_goal",weight:50},{nodeId:"start_today",weight:50},{nodeId:"start_monsters",weight:50},{nodeId:"start_equipment",weight:50},{nodeId:"start_food",weight:50}],titleTemplates:[{pattern:"The {mood} {theme} of {questItem}",weight:3},{pattern:"{moodNoun}, {theme}, and {questItem}",weight:3},{pattern:"{mood} {theme} and {questItem}",weight:3},{pattern:"{mood} {questItem}",weight:2},{pattern:"{questItem}: {theme} and {details}",weight:3},{pattern:"{theme} and {details} {location}",weight:3},{pattern:"{details} and {questItem} {location}",weight:3},{pattern:"{details} and {questItem}",weight:2},{pattern:"{mood} {theme} and {details}",weight:2},{pattern:"{moodNoun}: {theme} and {details}",weight:3},{pattern:"{moodNoun}: {details} and {questItem}",weight:3},{pattern:"{questItem} and {details}",weight:2},{pattern:"{moodNoun} and {questItem}",weight:2},{pattern:"{moodNoun} and {questItem}: a Journey {location}",weight:2},{pattern:"A Tale of {moodNoun} {location}",weight:2},{pattern:"{questItem} and {moodNoun}",weight:2},{pattern:"In Search of {questItem}",weight:1},{pattern:"{questItem} {location}",weight:1}],semanticFragments:{theme:{resolve:["Determination","Resolve","Tenacity"],philosophy:["The Way","The Path","Solitude"],food:["Cuisine","Gourmet","A Refined Palate","Delicacies","Feast"],battle:["Violence","Conflict","Combat","Blade"],answers:["The Truth","Secrets","Forbidden Knowledge"],past:["The Past","Buried Memories"]},mood:{melancholy:{adjective:["Regretful","Nostalgic","Wistful","Somber"],noun:["Regret","Nostalgia","Bitterness","Doubt","Longing"]},optimism:{adjective:["Hopeful","Chill","Satisfying","Upbeat"],noun:["Hope","Renewal","Joy","Good Vibes"]},pensive:{adjective:[],noun:["Thoughts","Reflection","Realizations","Meditations","Uncertainty"]}},details:{monster_gold:["Wealthy Monsters","Monster Pockets"],magic:["Magic","Mystical Forces","Strange Ways"],loot:["Treasure","Loot","Shiny Objects"]}},nodes:{start_goal:{id:"start_goal",textBeforeChoice:"You came here ",options:[{label:"to kick butt and eat FOOD_NAME and you're all out of FOOD_NAME. ",next:"conclusion",semantics:{theme:["resolve"]}},{label:"with violence in your heart. ",next:"boss",requires:["boss"],semantics:{theme:["resolve","battle"]}},{label:"against your better judgment. ",next:"maps",semantics:{}},{label:"without a plan. ",next:"lifestyle",semantics:{}},{label:"as a child and saw something you would never forget. ",next:"memory",semantics:{}}]},start_today:{id:"start_today",textBeforeChoice:"Today is different. Today ",options:[{label:"you come here with map in hand.  ",next:"maps",semantics:{}},{label:"you awoke rested. ",next:"memory",semantics:{mood:["pensive"]}},{label:"you've cast aside all doubt. ",next:"lifestyle",semantics:{theme:["resolve"],mood:["pensive"]}},{label:"you know exactly what you're looking for: FOOD_NAME. ",next:"food_magic",semantics:{}}]},start_monsters:{id:"start_monsters",textBeforeChoice:"There are monsters here, and they ",options:[{label:"will mindlessly attack whoever they see. ",next:"history",semantics:{}},{label:"honestly might have a point. ",next:"monster_questions",semantics:{mood:["pensive"]}},{label:"carry coins, for some reason. ",addsTags:["monster_gold"],next:"monster_questions",semantics:{details:["monster_gold"]}},{label:"seem to gather in greater numbers each year. ",next:"history",semantics:{}},{label:"bleed just the same as anything else. Usually. ",next:"shrines",semantics:{theme:["battle"]}}]},start_equipment:{id:"start_equipment",textBeforeChoice:"You travel light, ",options:[{label:"but you're always in the market for a new weapon, or maybe a nice hat. ",next:"shrines",semantics:{details:["loot"]}},{label:"or at least you mean to. ",next:"maps",semantics:{}},{label:"but if you see some nice wood, ore, or whatever, yeah you'll take it. ",next:"maps",semantics:{details:["loot"]}},{label:"as you must. Such is the life of a traveling gourmet. ",addsTags:["itinerant"],next:"memory",semantics:{theme:["philosophy"]}}]},start_food:{id:"start_food",textBeforeChoice:"Why do you seek remote restaurants? ",options:[{label:"Because you love FOOD_NAME. ",next:"food_magic",semantics:{theme:["food"],mood:["optimism"]}},{label:"Everyone's gotta eat. ",next:"food_magic",semantics:{theme:["food"]}},{label:"Being a hero wasn't all it's cracked up to be. ",next:"regrets",semantics:{theme:["past"],mood:["melancholy"]}},{label:"In truth, there's a kind of magic in food prepared with love. ",next:"food_magic",semantics:{theme:["food"],details:["magic"]}},{label:"In a scary world, it's the only thing that brings you happiness. ",next:"lifestyle",semantics:{theme:["philosophy"]}}]},food_magic:{id:"food_magic",textBeforeChoice:"Food is ",options:[{label:"secretly composed of Essences. ",next:"food_conclusion",semantics:{}},{label:"the secret to your beautiful skin. ",next:"food_conclusion",semantics:{theme:["food"]}},{label:"a funny thing to devote your life to. ",next:"food_conclusion",semantics:{theme:["food","philosophy"]}}]},shrines:{id:"shrines",textBeforeChoice:"The shrines and artifacts here ",options:[{label:"give you strange new powers. ",next:"maybe",semantics:{details:["magic"]}},{label:"fill you with unease. ",next:"maybe",semantics:{mood:["pensive"]}},{label:"were built by whom, exactly? ",next:"maybe",semantics:{details:["magic"],mood:["pensive"]}},{label:"are a reminder of the world that was. ",next:"maybe",semantics:{details:["magic"]}}]},history:{id:"history",textBeforeChoice:"Scholars and lorekeepers claim ",options:[{label:"that monsters didn't always haunt this place. ",next:"monster_questions",semantics:{theme:["answers"]}},{label:"that Shadow Magic was originally intended for good. ",next:"conclusion",semantics:{theme:["answers"],details:["magic"]}},{label:"another civilization once stood year, ages ago. ",next:"shrines",semantics:{theme:["answers"]}},{label:"a great war raged here. ",next:"conclusion",semantics:{theme:["answers","battle"]}}]},memory:{id:"memory",textBeforeChoice:"Long ago ",options:[{label:"you trained every day, until your hands were raw. ",next:"final",semantics:{theme:["resolve","past"]}},{label:"this world was different. ",next:"final",semantics:{theme:["answers","past"]}},{label:"you went to sleep hungry every night. ",next:"final",semantics:{mood:["melancholy"]}}]},lifestyle:{id:"lifestyle",textBeforeChoice:"Since becoming an itinerant gourmet, ",options:[{label:"you've gained ",next:"gained",semantics:{}},{label:"you sleep easier. ",next:"memory",semantics:{mood:["optimism"]}},{label:"your swordfighting abilities have actually improved. ",next:"memory",semantics:{theme:["resolve","battle"]}},{label:"there's no returning to your old life. ",next:"maybe",semantics:{theme:["philosophy","past"],mood:["melancholy"]}}]},regrets:{id:"regrets",textBeforeChoice:"Looking back, you wish you ",options:[{label:"had said goodbye. ",next:"maybe",addsTags:["regret"],semantics:{mood:["melancholy"]}},{label:"had chosen this life sooner. ",next:"maybe",addsTags:["regret","lifestyle"],semantics:{}},{label:"had listened to your master's advice. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}},{label:"had never insulted that wizard. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}}]},gained:{id:"gained",textBeforeChoice:"",options:[{label:"an awareness that there's more to life than survival. ",next:"final",semantics:{mood:["optimism"]}},{label:"quite a bit of weight. ",next:"final",semantics:{}},{label:"access to maps leading to incredible places. ",next:"final",semantics:{}},{label:"a large amount of wood. ",next:"final",semantics:{details:["loot"]}}]},maps:{id:"maps",textBeforeChoice:"The map that pointed you here ",options:[{label:"promised FOOD_NAME just ahead. ",next:"conclusion",semantics:{}},{label:"mentioned nothing about monsters. ",next:"maybe",addsTags:["monster_questions","maps"],semantics:{theme:["battle"]}},{label:"was probably accurate, right? ",next:"conclusion",semantics:{}},{label:"was pried from the fingers of an undead warrior. ",next:"conclusion",semantics:{}}]},monster_questions:{id:"monster_questions",textBeforeChoice:"Do monsters ",options:[{label:"hold grudges? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"have feelings? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"really use money? ",next:"maybe",addsTags:["monster_questions"],semantics:{details:["monster_gold"]}},{label:"only exist because of Shadow Magic? ",addsTags:["monster_questions"],next:"maybe",semantics:{}},{label:"just stand around all day hoping someone will walk this way? ",addsTags:["monster_questions"],next:"maybe",semantics:{}}]},maybe:{id:"maybe",textBeforeChoice:"Maybe ",options:[{label:"we're the real monsters. ",next:"final",requires:["monster_questions"],semantics:{}},{label:"you should try asking one, instead of slaying it. ",next:"final",requires:["monster_questions"],semantics:{mood:["pensive"]}},{label:"you should just forget it and push forward. ",requires:["regret"],next:"final",semantics:{}},{label:"you'll see them again some day. ",next:"final",requires:["regret"],excludes:["lifestyle"],semantics:{}},{label:"some nice delicious FOOD_NAME is all you need. ",next:"final",semantics:{}},{label:"nothing really matters. ",next:"final",semantics:{}},{label:"you should level up before starting the next fight. ",next:"final",semantics:{}}]},boss:{id:"boss",textBeforeChoice:"A terrible foe awaits just ahead. The beast will surely ",options:[{label:"fall to your blade, as so many have before it. ",next:"conclusion",semantics:{}},{label:"drop some sweet loot. ",next:"conclusion",semantics:{}},{label:"get the best of you. ",next:"conclusion",semantics:{}},{label:"step aside if you ask nicely. ",next:"conclusion",semantics:{}}]},food_conclusion:{id:"food_conclusion",textBeforeChoice:"Remember: ",options:[{label:"you only live once. ",next:"final",semantics:{}},{label:"you're not hurting anyone. Aside from all these monsters. ",next:"final",semantics:{}},{label:"FOOD_NAME is just ahead and nothing will stop you. ",next:"final",semantics:{}}]},conclusion:{id:"conclusion",textBeforeChoice:"",options:[{label:"Your feet ache, but you press on.",next:"final"},{label:"Just a few more fights and then rest.",next:"final"},{label:"You look into the distance and visualize your goal.",next:"final"},{label:"You clear your mind of all thoughts but FOOD_NAME.",next:"final"}]},final:{id:"final",textBeforeChoice:"",options:[]}}},M9={id:"new_eden",locationName:"in New Eden",locationPoetic:["Among Empty Abodes","in the Hopeful Encampment","in the Abandoned Settlement","in Cozy Environs"],startNodes:[{nodeId:"start_goal",weight:50},{nodeId:"start_today",weight:50},{nodeId:"start_monsters",weight:50},{nodeId:"start_equipment",weight:50},{nodeId:"start_food",weight:50}],titleTemplates:[{pattern:"The {mood} {theme} of {questItem}",weight:3},{pattern:"{moodNoun}, {theme}, and {questItem}",weight:3},{pattern:"{mood} {theme} and {questItem}",weight:3},{pattern:"{mood} {questItem}",weight:2},{pattern:"{questItem}: {theme} and {details}",weight:3},{pattern:"{theme} and {details} {location}",weight:3},{pattern:"{details} and {questItem} {location}",weight:3},{pattern:"{details} and {questItem}",weight:2},{pattern:"{mood} {theme} and {details}",weight:2},{pattern:"{moodNoun}: {theme} and {details}",weight:3},{pattern:"{moodNoun}: {details} and {questItem}",weight:3},{pattern:"{questItem} and {details}",weight:2},{pattern:"{moodNoun} and {questItem}",weight:2},{pattern:"{moodNoun} and {questItem}: a Journey {location}",weight:2},{pattern:"A Tale of {moodNoun} {location}",weight:2},{pattern:"{questItem} and {moodNoun}",weight:2},{pattern:"In Search of {questItem}",weight:1},{pattern:"{questItem} {location}",weight:1}],semanticFragments:{theme:{resolve:["Determination","Resolve","Tenacity"],philosophy:["The Way","The Path","Solitude"],food:["Cuisine","Gourmet","A Refined Palate","Delicacies","Feast"],battle:["Violence","Conflict","Combat","Blade"],answers:["The Truth","Secrets","Forbidden Knowledge"],past:["The Past","Buried Memories"]},mood:{melancholy:{adjective:["Regretful","Nostalgic","Wistful","Somber"],noun:["Regret","Nostalgia","Bitterness","Doubt","Longing"]},optimism:{adjective:["Hopeful","Chill","Satisfying","Upbeat"],noun:["Hope","Renewal","Joy","Good Vibes"]},pensive:{adjective:[],noun:["Thoughts","Reflection","Realizations","Meditations","Uncertainty"]}},details:{monster_gold:["Wealthy Monsters","Monster Pockets"],magic:["Magic","Mystical Forces","Strange Ways"],loot:["Treasure","Loot","Shiny Objects"]}},nodes:{start_goal:{id:"start_goal",textBeforeChoice:"You came here ",options:[{label:"to kick butt and eat FOOD_NAME and you're all out of FOOD_NAME. ",next:"conclusion",semantics:{theme:["resolve"]}},{label:"with violence in your heart. ",next:"boss",requires:["boss"],semantics:{theme:["resolve","battle"]}},{label:"against your better judgment. ",next:"maps",semantics:{}},{label:"without a plan. ",next:"lifestyle",semantics:{}},{label:"as a child and saw something you would never forget. ",next:"memory",semantics:{}}]},start_today:{id:"start_today",textBeforeChoice:"Today is different. Today ",options:[{label:"you come here with map in hand.  ",next:"maps",semantics:{}},{label:"you awoke rested. ",next:"memory",semantics:{mood:["pensive"]}},{label:"you've cast aside all doubt. ",next:"lifestyle",semantics:{theme:["resolve"],mood:["pensive"]}},{label:"you know exactly what you're looking for: FOOD_NAME. ",next:"food_magic",semantics:{}}]},start_monsters:{id:"start_monsters",textBeforeChoice:"There are monsters here, and they ",options:[{label:"will mindlessly attack whoever they see. ",next:"history",semantics:{}},{label:"honestly might have a point. ",next:"monster_questions",semantics:{mood:["pensive"]}},{label:"carry coins, for some reason. ",addsTags:["monster_gold"],next:"monster_questions",semantics:{details:["monster_gold"]}},{label:"seem to gather in greater numbers each year. ",next:"history",semantics:{}},{label:"bleed just the same as anything else. Usually. ",next:"shrines",semantics:{theme:["battle"]}}]},start_equipment:{id:"start_equipment",textBeforeChoice:"You travel light, ",options:[{label:"but you're always in the market for a new weapon, or maybe a nice hat. ",next:"shrines",semantics:{details:["loot"]}},{label:"or at least you mean to. ",next:"maps",semantics:{}},{label:"but if you see some nice wood, ore, or whatever, yeah you'll take it. ",next:"maps",semantics:{details:["loot"]}},{label:"as you must. Such is the life of a traveling gourmet. ",addsTags:["itinerant"],next:"memory",semantics:{theme:["philosophy"]}}]},start_food:{id:"start_food",textBeforeChoice:"Why do you seek remote restaurants? ",options:[{label:"Because you love FOOD_NAME. ",next:"food_magic",semantics:{theme:["food"],mood:["optimism"]}},{label:"Everyone's gotta eat. ",next:"food_magic",semantics:{theme:["food"]}},{label:"Being a hero wasn't all it's cracked up to be. ",next:"regrets",semantics:{theme:["past"],mood:["melancholy"]}},{label:"In truth, there's a kind of magic in food prepared with love. ",next:"food_magic",semantics:{theme:["food"],details:["magic"]}},{label:"In a scary world, it's the only thing that brings you happiness. ",next:"lifestyle",semantics:{theme:["philosophy"]}}]},food_magic:{id:"food_magic",textBeforeChoice:"Food is ",options:[{label:"secretly composed of Essences. ",next:"food_conclusion",semantics:{}},{label:"the secret to your beautiful skin. ",next:"food_conclusion",semantics:{theme:["food"]}},{label:"a funny thing to devote your life to. ",next:"food_conclusion",semantics:{theme:["food","philosophy"]}}]},shrines:{id:"shrines",textBeforeChoice:"The shrines and artifacts here ",options:[{label:"give you strange new powers. ",next:"maybe",semantics:{details:["magic"]}},{label:"fill you with unease. ",next:"maybe",semantics:{mood:["pensive"]}},{label:"were built by whom, exactly? ",next:"maybe",semantics:{details:["magic"],mood:["pensive"]}},{label:"are a reminder of the world that was. ",next:"maybe",semantics:{details:["magic"]}}]},history:{id:"history",textBeforeChoice:"Scholars and lorekeepers claim ",options:[{label:"that monsters didn't always haunt this place. ",next:"monster_questions",semantics:{theme:["answers"]}},{label:"that Shadow Magic was originally intended for good. ",next:"conclusion",semantics:{theme:["answers"],details:["magic"]}},{label:"another civilization once stood year, ages ago. ",next:"shrines",semantics:{theme:["answers"]}},{label:"a great war raged here. ",next:"conclusion",semantics:{theme:["answers","battle"]}}]},memory:{id:"memory",textBeforeChoice:"Long ago ",options:[{label:"you trained every day, until your hands were raw. ",next:"final",semantics:{theme:["resolve","past"]}},{label:"this world was different. ",next:"final",semantics:{theme:["answers","past"]}},{label:"you went to sleep hungry every night. ",next:"final",semantics:{mood:["melancholy"]}}]},lifestyle:{id:"lifestyle",textBeforeChoice:"Since becoming an itinerant gourmet, ",options:[{label:"you've gained ",next:"gained",semantics:{}},{label:"you sleep easier. ",next:"memory",semantics:{mood:["optimism"]}},{label:"your swordfighting abilities have actually improved. ",next:"memory",semantics:{theme:["resolve","battle"]}},{label:"there's no returning to your old life. ",next:"maybe",semantics:{theme:["philosophy","past"],mood:["melancholy"]}}]},regrets:{id:"regrets",textBeforeChoice:"Looking back, you wish you ",options:[{label:"had said goodbye. ",next:"maybe",addsTags:["regret"],semantics:{mood:["melancholy"]}},{label:"had chosen this life sooner. ",next:"maybe",addsTags:["regret","lifestyle"],semantics:{}},{label:"had listened to your master's advice. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}},{label:"had never insulted that wizard. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}}]},gained:{id:"gained",textBeforeChoice:"",options:[{label:"an awareness that there's more to life than survival. ",next:"final",semantics:{mood:["optimism"]}},{label:"quite a bit of weight. ",next:"final",semantics:{}},{label:"access to maps leading to incredible places. ",next:"final",semantics:{}},{label:"a large amount of wood. ",next:"final",semantics:{details:["loot"]}}]},maps:{id:"maps",textBeforeChoice:"The map that pointed you here ",options:[{label:"promised FOOD_NAME just ahead. ",next:"conclusion",semantics:{}},{label:"mentioned nothing about monsters. ",next:"maybe",addsTags:["monster_questions","maps"],semantics:{theme:["battle"]}},{label:"was probably accurate, right? ",next:"conclusion",semantics:{}},{label:"was pried from the fingers of an undead warrior. ",next:"conclusion",semantics:{}}]},monster_questions:{id:"monster_questions",textBeforeChoice:"Do monsters ",options:[{label:"hold grudges? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"have feelings? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"really use money? ",next:"maybe",addsTags:["monster_questions"],semantics:{details:["monster_gold"]}},{label:"only exist because of Shadow Magic? ",addsTags:["monster_questions"],next:"maybe",semantics:{}},{label:"just stand around all day hoping someone will walk this way? ",addsTags:["monster_questions"],next:"maybe",semantics:{}}]},maybe:{id:"maybe",textBeforeChoice:"Maybe ",options:[{label:"we're the real monsters. ",next:"final",requires:["monster_questions"],semantics:{}},{label:"you should try asking one, instead of slaying it. ",next:"final",requires:["monster_questions"],semantics:{mood:["pensive"]}},{label:"you should just forget it and push forward. ",requires:["regret"],next:"final",semantics:{}},{label:"you'll see them again some day. ",next:"final",requires:["regret"],excludes:["lifestyle"],semantics:{}},{label:"some nice delicious FOOD_NAME is all you need. ",next:"final",semantics:{}},{label:"nothing really matters. ",next:"final",semantics:{}},{label:"you should level up before starting the next fight. ",next:"final",semantics:{}}]},boss:{id:"boss",textBeforeChoice:"A terrible foe awaits just ahead. The beast will surely ",options:[{label:"fall to your blade, as so many have before it. ",next:"conclusion",semantics:{}},{label:"drop some sweet loot. ",next:"conclusion",semantics:{}},{label:"get the best of you. ",next:"conclusion",semantics:{}},{label:"step aside if you ask nicely. ",next:"conclusion",semantics:{}}]},food_conclusion:{id:"food_conclusion",textBeforeChoice:"Remember: ",options:[{label:"you only live once. ",next:"final",semantics:{}},{label:"you're not hurting anyone. Aside from all these monsters. ",next:"final",semantics:{}},{label:"FOOD_NAME is just ahead and nothing will stop you. ",next:"final",semantics:{}}]},conclusion:{id:"conclusion",textBeforeChoice:"",options:[{label:"Your feet ache, but you press on.",next:"final"},{label:"Just a few more fights and then rest.",next:"final"},{label:"You look into the distance and visualize your goal.",next:"final"},{label:"You clear your mind of all thoughts but FOOD_NAME.",next:"final"}]},final:{id:"final",textBeforeChoice:"",options:[]}}},L9={id:"haunted_forest",locationName:"In the Haunted Forest",locationPoetic:["Stalked by Ghouls","In the Cursed Woods","Where Spirits Linger","In Spooky Environs"],startNodes:[{nodeId:"start_goal",weight:50},{nodeId:"start_today",weight:50},{nodeId:"start_monsters",weight:50},{nodeId:"start_equipment",weight:50},{nodeId:"start_food",weight:50}],titleTemplates:[{pattern:"The {mood} {theme} of {questItem}",weight:3},{pattern:"{moodNoun}, {theme}, and {questItem}",weight:3},{pattern:"{mood} {theme} and {questItem}",weight:3},{pattern:"{mood} {questItem}",weight:2},{pattern:"{questItem}: {theme} and {details}",weight:3},{pattern:"{theme} and {details} {location}",weight:3},{pattern:"{details} and {questItem} {location}",weight:3},{pattern:"{details} and {questItem}",weight:2},{pattern:"{mood} {theme} and {details}",weight:2},{pattern:"{moodNoun}: {theme} and {details}",weight:3},{pattern:"{moodNoun}: {details} and {questItem}",weight:3},{pattern:"{questItem} and {details}",weight:2},{pattern:"{moodNoun} and {questItem}",weight:2},{pattern:"{moodNoun} and {questItem}: a Journey {location}",weight:2},{pattern:"A Spooky Tale of {moodNoun} {location}",weight:2},{pattern:"{questItem} and {moodNoun}",weight:2},{pattern:"A Spooky Search for {questItem}",weight:1},{pattern:"{questItem} {location}",weight:1}],semanticFragments:{theme:{resolve:["Determination","Resolve","Fear"],philosophy:["The Way","The Path","Solitude"],food:["Cuisine","Gourmet","A Refined Palate","Delicacies","Feast"],battle:["Violence","Conflict","Combat","Blade"],answers:["Hidden Truths","Dark Secrets","Forbidden Knowledge"],past:["The Past","Buried Memories"]},mood:{melancholy:{adjective:["Scary","Haunting","Chilling","Eerie"],noun:["Regret","Nostalgia","Bitterness","Doubt","Longing"]},optimism:{adjective:["Hopeful","Chill","Satisfying","Upbeat"],noun:["Hope","Renewal","Joy","Good Vibes"]},pensive:{adjective:[],noun:["Thoughts","Reflection","Realizations","Meditations","Uncertainty"]}},details:{monster_gold:["Wealthy Monsters","Monster Pockets"],magic:["Magic","Mystical Forces","Strange Ways"],loot:["Treasure","Loot","Treats"]}},nodes:{start_goal:{id:"start_goal",textBeforeChoice:"You came here ",options:[{label:"to kick butt and eat FOOD_NAME and you're all out of FOOD_NAME. ",next:"conclusion",semantics:{theme:["resolve"]}},{label:"with violence in your heart. ",next:"boss",requires:["boss"],semantics:{theme:["resolve","battle"]}},{label:"against your better judgment. ",next:"maps",semantics:{}},{label:"without a plan. ",next:"lifestyle",semantics:{}},{label:"as a child and saw something you would never forget. ",next:"memory",semantics:{}}]},start_today:{id:"start_today",textBeforeChoice:"Today is different. Today ",options:[{label:"you come here with map in hand.  ",next:"maps",semantics:{}},{label:"you awoke rested. ",next:"memory",semantics:{mood:["pensive"]}},{label:"you've cast aside all doubt. ",next:"lifestyle",semantics:{theme:["resolve"],mood:["pensive"]}},{label:"you know exactly what you're looking for: FOOD_NAME. ",next:"food_magic",semantics:{}}]},start_monsters:{id:"start_monsters",textBeforeChoice:"There are monsters here, and they ",options:[{label:"will mindlessly attack whoever they see. ",next:"history",semantics:{}},{label:"honestly might have a point. ",next:"monster_questions",semantics:{mood:["pensive"]}},{label:"carry coins, for some reason. ",addsTags:["monster_gold"],next:"monster_questions",semantics:{details:["monster_gold"]}},{label:"seem to gather in greater numbers each year. ",next:"history",semantics:{}},{label:"bleed just the same as anything else. Usually. ",next:"shrines",semantics:{theme:["battle"]}}]},start_equipment:{id:"start_equipment",textBeforeChoice:"You travel light, ",options:[{label:"but you're always in the market for a new weapon, or maybe a nice hat. ",next:"shrines",semantics:{details:["loot"]}},{label:"or at least you mean to. ",next:"maps",semantics:{}},{label:"but if you see some nice wood, ore, or whatever, yeah you'll take it. ",next:"maps",semantics:{details:["loot"]}},{label:"as you must. Such is the life of a traveling gourmet. ",addsTags:["itinerant"],next:"memory",semantics:{theme:["philosophy"]}}]},start_food:{id:"start_food",textBeforeChoice:"Why do you seek remote restaurants? ",options:[{label:"Because you love FOOD_NAME. ",next:"food_magic",semantics:{theme:["food"],mood:["optimism"]}},{label:"Everyone's gotta eat. ",next:"food_magic",semantics:{theme:["food"]}},{label:"Being a hero wasn't all it's cracked up to be. ",next:"regrets",semantics:{theme:["past"],mood:["melancholy"]}},{label:"In truth, there's a kind of magic in food prepared with love. ",next:"food_magic",semantics:{theme:["food"],details:["magic"]}},{label:"In a scary world, it's the only thing that brings you happiness. ",next:"lifestyle",semantics:{theme:["philosophy"]}}]},food_magic:{id:"food_magic",textBeforeChoice:"Food is ",options:[{label:"secretly composed of Essences. ",next:"food_conclusion",semantics:{}},{label:"the secret to your beautiful skin. ",next:"food_conclusion",semantics:{theme:["food"]}},{label:"a funny thing to devote your life to. ",next:"food_conclusion",semantics:{theme:["food","philosophy"]}}]},shrines:{id:"shrines",textBeforeChoice:"The shrines and artifacts here ",options:[{label:"give you strange new powers. ",next:"maybe",semantics:{details:["magic"]}},{label:"fill you with unease. ",next:"maybe",semantics:{mood:["pensive"]}},{label:"were built by whom, exactly? ",next:"maybe",semantics:{details:["magic"],mood:["pensive"]}},{label:"are a reminder of the world that was. ",next:"maybe",semantics:{details:["magic"]}}]},history:{id:"history",textBeforeChoice:"Scholars and lorekeepers claim ",options:[{label:"that monsters didn't always haunt this place. ",next:"monster_questions",semantics:{theme:["answers"]}},{label:"that Shadow Magic was originally intended for good. ",next:"conclusion",semantics:{theme:["answers"],details:["magic"]}},{label:"another civilization once stood year, ages ago. ",next:"shrines",semantics:{theme:["answers"]}},{label:"a great war raged here. ",next:"conclusion",semantics:{theme:["answers","battle"]}}]},memory:{id:"memory",textBeforeChoice:"Long ago ",options:[{label:"you trained every day, until your hands were raw. ",next:"final",semantics:{theme:["resolve","past"]}},{label:"this world was different. ",next:"final",semantics:{theme:["answers","past"]}},{label:"you went to sleep hungry every night. ",next:"final",semantics:{mood:["melancholy"]}}]},lifestyle:{id:"lifestyle",textBeforeChoice:"Since becoming an itinerant gourmet, ",options:[{label:"you've gained ",next:"gained",semantics:{}},{label:"you sleep easier. ",next:"memory",semantics:{mood:["optimism"]}},{label:"your swordfighting abilities have actually improved. ",next:"memory",semantics:{theme:["resolve","battle"]}},{label:"there's no returning to your old life. ",next:"maybe",semantics:{theme:["philosophy","past"],mood:["melancholy"]}}]},regrets:{id:"regrets",textBeforeChoice:"Looking back, you wish you ",options:[{label:"had said goodbye. ",next:"maybe",addsTags:["regret"],semantics:{mood:["melancholy"]}},{label:"had chosen this life sooner. ",next:"maybe",addsTags:["regret","lifestyle"],semantics:{}},{label:"had listened to your master's advice. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}},{label:"had never insulted that wizard. ",next:"maybe",addsTags:["regret"],semantics:{mood:["pensive"]}}]},gained:{id:"gained",textBeforeChoice:"",options:[{label:"an awareness that there's more to life than survival. ",next:"final",semantics:{mood:["optimism"]}},{label:"quite a bit of weight. ",next:"final",semantics:{}},{label:"access to maps leading to incredible places. ",next:"final",semantics:{}},{label:"a large amount of wood. ",next:"final",semantics:{details:["loot"]}}]},maps:{id:"maps",textBeforeChoice:"The map that pointed you here ",options:[{label:"promised FOOD_NAME just ahead. ",next:"conclusion",semantics:{}},{label:"mentioned nothing about monsters. ",next:"maybe",addsTags:["monster_questions","maps"],semantics:{theme:["battle"]}},{label:"was probably accurate, right? ",next:"conclusion",semantics:{}},{label:"was pried from the fingers of an undead warrior. ",next:"conclusion",semantics:{}}]},monster_questions:{id:"monster_questions",textBeforeChoice:"Do monsters ",options:[{label:"hold grudges? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"have feelings? ",next:"maybe",addsTags:["monster_questions"],semantics:{}},{label:"really use money? ",next:"maybe",addsTags:["monster_questions"],semantics:{details:["monster_gold"]}},{label:"only exist because of Shadow Magic? ",addsTags:["monster_questions"],next:"maybe",semantics:{}},{label:"just stand around all day hoping someone will walk this way? ",addsTags:["monster_questions"],next:"maybe",semantics:{}}]},maybe:{id:"maybe",textBeforeChoice:"Maybe ",options:[{label:"we're the real monsters. ",next:"final",requires:["monster_questions"],semantics:{}},{label:"you should try asking one, instead of slaying it. ",next:"final",requires:["monster_questions"],semantics:{mood:["pensive"]}},{label:"you should just forget it and push forward. ",requires:["regret"],next:"final",semantics:{}},{label:"you'll see them again some day. ",next:"final",requires:["regret"],excludes:["lifestyle"],semantics:{}},{label:"some nice delicious FOOD_NAME is all you need. ",next:"final",semantics:{}},{label:"nothing really matters. ",next:"final",semantics:{}},{label:"you should level up before starting the next fight. ",next:"final",semantics:{}}]},boss:{id:"boss",textBeforeChoice:"A terrible foe awaits just ahead. The beast will surely ",options:[{label:"fall to your blade, as so many have before it. ",next:"conclusion",semantics:{}},{label:"drop some sweet loot. ",next:"conclusion",semantics:{}},{label:"get the best of you. ",next:"conclusion",semantics:{}},{label:"step aside if you ask nicely. ",next:"conclusion",semantics:{}}]},food_conclusion:{id:"food_conclusion",textBeforeChoice:"Remember: ",options:[{label:"you only live once. ",next:"final",semantics:{}},{label:"you're not hurting anyone. Aside from all these monsters. ",next:"final",semantics:{}},{label:"FOOD_NAME is just ahead and nothing will stop you. ",next:"final",semantics:{}}]},conclusion:{id:"conclusion",textBeforeChoice:"",options:[{label:"Your feet ache, but you press on.",next:"final"},{label:"Just a few more fights and then rest.",next:"final"},{label:"You look into the distance and visualize your goal.",next:"final"},{label:"You clear your mind of all thoughts but FOOD_NAME.",next:"final"}]},final:{id:"final",textBeforeChoice:"",options:[]}}},R9=R=>({fields:b9,mossy_forest:C9,mountain_pass:A9,ruined_path:tw,seaside_cliffs:S9,outer_temple:T9,forbidden_city:E9,new_eden:M9,haunted_forest:L9})[R]||tw;function P9({shown:R,dismiss:t,inventoryClient:c}){const v=Me(U=>U.missionCreateMapItem),[x,b]=ve.useState(""),[h,w]=ve.useState(""),[e,i]=ve.useState(!1),[u,n]=ve.useState(""),[r,a]=ve.useState("create_scenario"),[s,o]=ve.useState(),[d,l]=ve.useState(!0),[f,m]=ve.useState(),[g,p]=ve.useState(!1),[y,S]=ve.useState(""),[C,A]=ve.useState(""),M=ve.useRef(null);if(ve.useEffect(()=>{var U;if(R){a("create_scenario"),b(""),w(""),n(""),i(!1),l(!0),p(!1),S("");const J=(v==null?void 0:v.id)||"",q=(v==null?void 0:v.definition.rarity)||"uncommon",_=((U=Te().playerStats)==null?void 0:U.Level)??1,te=r1(v),se=new up().generateMission(J,_,q,te);o(se);let ne=[],he={};se.encounters.some(ge=>ge.type==="boss")&&(ne.push("boss"),he.details=["boss"]);const le=R9(te);m(new w9(le,ne,he))}},[R,v]),!v||!R)return null;const L={fields:"Fields",mossy_forest:"Mossy Forest",mountain_pass:"Mountain Pass",ruined_path:"Ruined Path",seaside_cliffs:"Seaside Cliffs",outer_temple:"Outer Temple",forbidden_city:"Forbidden City",new_eden:"New Eden",haunted_forest:"Haunted Forest"},P=r1(v),O=L[P],D=()=>{switch(r){case"create_scenario":return g;case"food_choice":return u!==""&&h.trim()!=="";case"mission_naming":return x.trim()!=="";default:return!1}},I=Te().foodChoices,F=U=>{n(J=>J===U?"":U)},H=()=>{if(!u||!f1[u])return;const U=f1[u],J=U[Math.floor(Math.random()*U.length)];w(J)},k=async()=>{var J,q;if(x.length===0||h.length===0||u.length===0||e||!v)return;const U={title:x,seed:v.id,level:((J=Te().playerStats)==null?void 0:J.Level)||1,environment:P,foodName:h,foodImage:u,authorWeaponId:((q=Te().inventory.equippedItems.Weapon)==null?void 0:q.definition.id)||void 0,scenarioText:y.replace(/FOOD_NAME/g,h),doRedirect:d,rarity:v.definition.rarity};if(ss({type:"createMission",data:U}),v){const _=await c.dispatch({type:"itemDropped",itemId:v.id,amount:v.amount});_.ok?console.log("Item dropped successfully"):console.error("Failed to drop item:",_.error)}i(!0),ed(`Mission "${x}" created!`),t()},W=U=>{U.preventDefault(),r==="mission_naming"&&k()},$=()=>{if(r==="create_scenario")console.log("Scenario text: ",y),a("food_choice");else if(r==="food_choice"&&u&&h){if(f){const U={scenario:f.getScenario(),semantics:f.getCurrentSemantics(),questItem:h};b(ew(U)),A(ew(U))}a("mission_naming")}},K=V.jsxs("div",{className:"mission-create-header",children:[V.jsx("div",{className:"title",children:"Discover New Mission"}),V.jsx("button",{className:"dismiss-button",onClick:t,children:V.jsx("img",{src:"assets/ui/button_close_corner.png",alt:"Close"})})]}),Z={backgroundColor:"#2c2d44",justifyContent:"flex-start"},X={backgroundColor:"#2c2d44"},j=D()?"assets/ui/Button_Create_Active.png":"assets/ui/Button_Create_Inactive.png",Y=()=>{switch(r){case"create_scenario":return V.jsxs(V.Fragment,{children:[v&&V.jsx("div",{className:"mission-create-map-highlight",children:V.jsx(ac,{itemDefinition:v.definition})}),V.jsxs("div",{className:"mission-create-location",style:{marginTop:-60},children:[O,": Scenario",V.jsx(ds,{inline:!0,content:"Provide a short bit of lore or story to set up this mission."})]}),V.jsx("div",{className:"scenario-wrapper",children:f&&V.jsx(g2,{ref:M,engine:f,onComplete:()=>{p(!0)},onEdit:()=>{p(!1)},onTextChange:U=>{S(U)}})}),V.jsxs("div",{className:"randomize-scenario-section",children:[V.jsx("button",{type:"button",className:"autocomplete-button",style:{marginLeft:"22px"},onClick:()=>{var U;f&&(f.generateRandomPath(),(U=M.current)==null||U.clearCustomInput(),p(!0))},children:V.jsx("img",{src:"assets/ui/PictoIcon_Dice.png",alt:"Randomize scenario"})}),V.jsx(ds,{content:"Autocomplete a random scenario"})]}),V.jsx("div",{className:"button-section",children:V.jsx("div",{className:"mission-create-submit-button",onClick:D()?$:void 0,style:{opacity:D()?1:.5},children:V.jsx("img",{src:"assets/ui/button_continue.png",alt:"Continue"})})})]});case"food_choice":return V.jsx(V.Fragment,{children:V.jsxs("form",{className:"mission-create-form",onSubmit:U=>U.preventDefault(),children:[V.jsxs("div",{className:"food-instructions",children:["A hidden restaurant waits at the end of this mission. Describe their famous dish.",V.jsxs("div",{className:"note",children:["(Food determines Flavor Essences",V.jsx(ds,{content:"Rare crafting resources used for upgrading equipment and more"})," rewarded at end of mission)"]})]}),V.jsx("div",{className:"food-choices",children:I.map(U=>{const J=`${Nw}${U}`;return V.jsx("button",{type:"button",className:`food-choice ${u===U?"selected":""}`,onClick:q=>{q.preventDefault(),F(U)},children:V.jsx("img",{src:J,alt:U})},U)})}),V.jsx("div",{className:"food-instructions note",style:{marginTop:0},children:V.jsx("span",{className:"note",children:"(select one)"})}),V.jsx("div",{className:"input-section",children:V.jsxs("div",{className:"button-container",children:[V.jsx("input",{type:"text",name:"foodName",placeholder:"Name the specialty",maxLength:60,value:h,onChange:U=>w(U.target.value)}),V.jsx("button",{type:"button",className:`autocomplete-button ${u?"":"disabled"}`,onClick:H,disabled:!u,children:V.jsx("img",{src:"assets/ui/PictoIcon_Dice.png",alt:"Random suggestion"})})]})}),V.jsx("div",{className:"button-section",children:V.jsx("div",{className:"mission-create-submit-button",onClick:$,style:{opacity:D()?1:.5},children:V.jsx("img",{src:"assets/ui/button_continue.png",alt:"Continue"})})})]})});case"mission_naming":return V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"mission-create-summary",style:{marginTop:20},children:[V.jsx("img",{src:"assets/ui/ItemIcon_Map.png",alt:"Map Icon"}),V.jsxs("span",{className:"summary-text",children:["Target: ",O]})]}),V.jsxs("div",{className:"mission-create-summary",children:[V.jsx("img",{src:"assets/ui/create/ItemIcon_Skull.png",alt:"Boss Icon"}),(s==null?void 0:s.type)==="bossRush"?V.jsx(V.Fragment,{children:"BOSS RUSH!!!"}):V.jsxs(V.Fragment,{children:["Difficulty: ",Array(5).fill(0).map((U,J)=>V.jsx("span",{style:{color:J<((s==null?void 0:s.difficulty)||0)?"gold":"gray"},children:"★"},J))]})]}),V.jsxs("div",{className:"mission-create-summary",children:[V.jsx("img",{src:"assets/ui/create/ItemIcon_Badge_Crown.png",alt:"Level Icon"}),V.jsxs("span",{className:"summary-text",children:["Rec. Level: ",s==null?void 0:s.minLevel," ~ ",s==null?void 0:s.maxLevel]})]}),V.jsxs("div",{className:"mission-create-summary",children:[V.jsx("img",{src:"assets/ui/create/ItemIcon_Meat.png",alt:"Map Icon"}),V.jsxs("span",{className:"summary-text",children:["Food: ",h]})]}),V.jsxs("form",{className:"mission-create-form",onSubmit:W,children:[x===C&&V.jsx("div",{className:"food-instructions",children:"Use the suggested post title or create your own"}),V.jsx("div",{className:"input-section",children:V.jsx("input",{type:"text",name:"title",placeholder:"Name the mission",value:x,max:200,onChange:U=>b(U.target.value),onKeyDown:U=>{U.key==="Enter"&&(U.preventDefault(),k())}})}),V.jsxs("div",{className:"redirect-option",children:[V.jsx("input",{type:"checkbox",id:"doRedirect",name:"doRedirect",checked:d,onChange:()=>l(!d)}),V.jsx("label",{htmlFor:"doRedirect",children:"Take me directly to the new mission (leave this mission)"})]}),V.jsx("div",{className:"post-note",children:"Note: Creating a Mission will submit a new public post, authored by you."}),V.jsx("div",{className:"button-section",children:V.jsx("div",{className:"mission-create-submit-button",onClick:k,style:{opacity:D()?1:.5},children:V.jsx("img",{src:j,alt:"Create Mission"})})})]})]})}};return V.jsx(Pn,{shown:R,dismiss:t,headerContent:K,renderBackButton:!1,contentStyle:Z,footerContentStyle:X,children:V.jsx("div",{className:"mission-create-container",style:{backgroundImage:`url(assets/ui/create/preview_${P}.jpg)`,backgroundSize:"100% auto",backgroundPosition:"top center",backgroundRepeat:"no-repeat"},children:Y()})})}function B9({label:R,onClick:t,disabled:c=!1}){return V.jsx("div",{className:`skill-button ${c?"disabled":""}`,onClick:c?void 0:t,children:V.jsx("div",{className:"skill-button-label",children:R})})}function li({children:R,onClick:t,className:c,disabled:v}){const x=c||"button";return V.jsx("button",{onClick:t,className:x,disabled:v,children:R})}function ir({label:R,onClick:t,active:c=!1}){return V.jsx("div",{className:`tab-button ${c?"active":""}`,onClick:t,children:V.jsx("div",{className:"tab-button-label",children:R})})}const Hh=({option:R})=>ve.useMemo(()=>{switch(R.type){case"multiplier":return V.jsxs("div",{className:"skill-choice-option",children:[V.jsxs("div",{children:["Type: ",R.type]}),V.jsxs("div",{children:["Stat: ",R.stat]}),V.jsxs("div",{children:["Amount: ",R.amount]})]});case"health":return V.jsxs("div",{className:"skill-choice-option",children:[V.jsxs("div",{children:["Type: ",R.type]}),V.jsxs("div",{children:["Amt: ",R.amount]})]});case"ability":return V.jsxs("div",{className:"skill-choice-option",children:[V.jsxs("div",{children:["Type: ",R.type]}),V.jsxs("div",{children:["Ability ID: ",R.abilityId]})]});default:return null}},[R]),D9=({missionMetadata:R,setMissionMetaData:t,gameStatus:c})=>{var f,m,g,p,y;const v=ve.useMemo(()=>new up(Date.now().toString()),[Date.now().toString()]),x=((f=Te().playerStats)==null?void 0:f.Level)??1;v.debugPopulateMissionAbilities(x);const[b,h]=ve.useState(1e3),w=(S,C)=>{S.dataTransfer.setData("text/plain",C.toString())},e=S=>{S.preventDefault(),S.currentTarget.classList.add("drag-over")},i=(S,C)=>{var D,I,F,H,k,W,$,K,Z,X,j;S.preventDefault(),S.currentTarget.classList.remove("drag-over");const A=Number(S.dataTransfer.getData("text/plain"));if(isNaN(A))return;const M=(I=(D=R.mission)==null?void 0:D.encounters)==null?void 0:I[A],L=(H=(F=R.mission)==null?void 0:F.encounters)==null?void 0:H[C];if((L==null?void 0:L.type)==="treasure"||(M==null?void 0:M.type)==="treasure"){console.log("Cannot move treasure encounters.");return}const P=[...((k=R.mission)==null?void 0:k.encounters)??[]],[O]=P.splice(A,1);P.splice(C,0,O),t({...R,mission:{...R.mission,encounters:P,environment:((W=R.mission)==null?void 0:W.environment)||"default_environment",minLevel:(($=R.mission)==null?void 0:$.minLevel)??1,maxLevel:((K=R.mission)==null?void 0:K.maxLevel)??100,difficulty:((Z=R.mission)==null?void 0:Z.difficulty)??1,foodImage:((X=R.mission)==null?void 0:X.foodImage)||"default_food_image",foodName:((j=R.mission)==null?void 0:j.foodName)||"default_food_name"}})},u=S=>{var A,M,L,P,O,D,I;const C=[...((A=R.mission)==null?void 0:A.encounters)??[]];C.splice(S,1),t({...R,mission:{...R.mission,encounters:C,environment:((M=R.mission)==null?void 0:M.environment)||"default_environment",minLevel:((L=R.mission)==null?void 0:L.minLevel)??1,maxLevel:((P=R.mission)==null?void 0:P.maxLevel)??100,difficulty:((O=R.mission)==null?void 0:O.difficulty)??1,foodImage:((D=R.mission)==null?void 0:D.foodImage)||"default_food_image",foodName:((I=R.mission)==null?void 0:I.foodName)||"default_food_name"}}),console.log(`Encounter at index ${S} removed.`)},n=async()=>{var M,L,P,O,D,I,F,H;const S=v.debugGenerateEnemyEncounter(((M=R.mission)==null?void 0:M.environment)??"",1,b);h(b+1),await cr.getInstance().loadEnemiesAssets(S.enemies);const A=[S,...((L=R.mission)==null?void 0:L.encounters)??[]];t({...R,mission:{...R.mission,encounters:A,environment:((P=R.mission)==null?void 0:P.environment)||"default_environment",minLevel:((O=R.mission)==null?void 0:O.minLevel)??1,maxLevel:((D=R.mission)==null?void 0:D.maxLevel)??100,difficulty:((I=R.mission)==null?void 0:I.difficulty)??1,foodImage:((F=R.mission)==null?void 0:F.foodImage)||"default_food_image",foodName:((H=R.mission)==null?void 0:H.foodName)||"default_food_name"}})},r=()=>{var A,M,L,P,O,D,I;const S=v.debugGenerateStatsChoiceEncounter();h(b+1);const C=[S,...((A=R.mission)==null?void 0:A.encounters)??[]];t({...R,mission:{...R.mission,encounters:C,environment:((M=R.mission)==null?void 0:M.environment)||"default_environment",minLevel:((L=R.mission)==null?void 0:L.minLevel)??1,maxLevel:((P=R.mission)==null?void 0:P.maxLevel)??100,difficulty:((O=R.mission)==null?void 0:O.difficulty)??1,foodImage:((D=R.mission)==null?void 0:D.foodImage)||"default_food_image",foodName:((I=R.mission)==null?void 0:I.foodName)||"default_food_name"}})},a=()=>{var A,M,L,P,O,D,I;const S=v.debugGenerateAbilityChoiceEncounter();h(b+1);const C=[S,...((A=R.mission)==null?void 0:A.encounters)??[]];t({...R,mission:{...R.mission,encounters:C,environment:((M=R.mission)==null?void 0:M.environment)||"default_environment",minLevel:((L=R.mission)==null?void 0:L.minLevel)??1,maxLevel:((P=R.mission)==null?void 0:P.maxLevel)??100,difficulty:((O=R.mission)==null?void 0:O.difficulty)??1,foodImage:((D=R.mission)==null?void 0:D.foodImage)||"default_food_image",foodName:((I=R.mission)==null?void 0:I.foodName)||"default_food_name"}})},s=()=>{var A,M,L,P,O,D,I;const S=v.debugGenerateSkillBargainEncounter();h(b+1);const C=[S,...((A=R.mission)==null?void 0:A.encounters)??[]];t({...R,mission:{...R.mission,encounters:C,environment:((M=R.mission)==null?void 0:M.environment)||"default_environment",minLevel:((L=R.mission)==null?void 0:L.minLevel)??1,maxLevel:((P=R.mission)==null?void 0:P.maxLevel)??100,difficulty:((O=R.mission)==null?void 0:O.difficulty)??1,foodImage:((D=R.mission)==null?void 0:D.foodImage)||"default_food_image",foodName:((I=R.mission)==null?void 0:I.foodName)||"default_food_name"}})},o=()=>{var A,M,L,P,O,D,I;const S=v.debugGenerateInvestigateEncounter();h(b+1);const C=[S,...((A=R.mission)==null?void 0:A.encounters)??[]];t({...R,mission:{...R.mission,encounters:C,environment:((M=R.mission)==null?void 0:M.environment)||"default_environment",minLevel:((L=R.mission)==null?void 0:L.minLevel)??1,maxLevel:((P=R.mission)==null?void 0:P.maxLevel)??100,difficulty:((O=R.mission)==null?void 0:O.difficulty)??1,foodImage:((D=R.mission)==null?void 0:D.foodImage)||"default_food_image",foodName:((I=R.mission)==null?void 0:I.foodName)||"default_food_name"}})},d=async()=>{var L,P,O,D,I,F,H,k;const S=((L=Te().playerStats)==null?void 0:L.Level)??1,C=v.debugGenerateCrossroadsFightEncounter(S);h(b+1),await cr.getInstance().loadBossAssets(C.enemies[0].type);const M=[C,...((P=R.mission)==null?void 0:P.encounters)??[]];t({...R,mission:{...R.mission,encounters:M,environment:((O=R.mission)==null?void 0:O.environment)||"default_environment",minLevel:((D=R.mission)==null?void 0:D.minLevel)??1,maxLevel:((I=R.mission)==null?void 0:I.maxLevel)??100,difficulty:((F=R.mission)==null?void 0:F.difficulty)??1,foodImage:((H=R.mission)==null?void 0:H.foodImage)||"default_food_image",foodName:((k=R.mission)==null?void 0:k.foodName)||"default_food_name"}})},l=async()=>{var L,P,O,D,I,F,H,k,W,$,K;let S;((L=R.mission)==null?void 0:L.type)==="bossRush"?S=v.debugGenerateRushBossEncounter(((P=R.mission)==null?void 0:P.minLevel)??1,b):S=v.debugGenerateBossEncounter(((O=R.mission)==null?void 0:O.environment)??"default_environment",((D=R.mission)==null?void 0:D.minLevel)??1,b),h(b+1);const C=[...((I=R.mission)==null?void 0:I.encounters)??[]],A=Math.max(0,C.length-1);if(!S){console.warn("No boss encounter generated, skipping addition.");return}C.splice(A,0,S),t({...R,mission:{...R.mission,encounters:C,environment:((F=R.mission)==null?void 0:F.environment)||"default_environment",minLevel:((H=R.mission)==null?void 0:H.minLevel)??1,maxLevel:((k=R.mission)==null?void 0:k.maxLevel)??100,difficulty:((W=R.mission)==null?void 0:W.difficulty)??1,foodImage:(($=R.mission)==null?void 0:$.foodImage)||"default_food_image",foodName:((K=R.mission)==null?void 0:K.foodName)||"default_food_name"}}),await cr.getInstance().loadBossAssets(S.enemies[0].type),setTimeout(()=>{const Z=document.querySelector(".debug-menu-encounter-wrapper");Z==null||Z.scrollTo({top:Z.scrollHeight,behavior:"smooth"})},100)};return V.jsxs("div",{className:"debug-menu-content",children:[c===Ci.Loading&&V.jsxs("div",{className:"debug-menu-encounter-container",children:[V.jsx("div",{className:"debug-menu-encounter-wrapper",children:((m=R.mission)==null?void 0:m.encounters)&&((g=R.mission)==null?void 0:g.encounters.length)>0&&((p=R.mission)==null?void 0:p.encounters.map((S,C)=>V.jsxs("div",{className:"debug-encounter",draggable:S.type===He.Treasure?"false":"true",onDragStart:A=>w(A,C),onDragOver:e,onDrop:A=>i(A,C),children:[S.type!==He.Treasure&&V.jsxs("div",{className:"debug-encounter-header",children:[C+1,". ",S.type,V.jsx(li,{onClick:()=>u(C),className:"encounter-button",children:"Delete"})]}),(S.type===He.Enemy||S.type===He.Boss||S.type===He.RushBoss||S.type===He.CrossroadsFight)&&S.enemies&&S.enemies.length>0&&V.jsx("div",{className:"enemy-list",children:S.enemies.map((A,M)=>V.jsxs("div",{className:"enemy-data",children:[V.jsxs("div",{children:["ID: ",A.id]}),V.jsxs("div",{children:["Level: ",A.level]}),V.jsxs("div",{children:["Type: ",A.type]})]},M))}),(S.type===He.SkillChoice||S.type===He.StatsChoice||S.type===He.AbilityChoice)&&V.jsxs("div",{className:"skill-choice-list",children:[V.jsx(Hh,{option:S.optionA}),V.jsx(Hh,{option:S.optionB}),S.type===He.AbilityChoice&&V.jsx(Hh,{option:S.optionC})]}),S.type===He.SkillBargain&&V.jsxs("div",{className:"skill-choice-list",children:[V.jsx(Hh,{option:S.positiveEffect}),V.jsx(Hh,{option:S.negativeEffect})]}),S.type===He.Investigate&&V.jsxs("div",{className:"investigation-data",children:[V.jsxs("div",{children:["Chance: ",S.bonusChance,"%"]}),V.jsxs("div",{children:["Gold Get:",S.bonusGold]}),V.jsxs("div",{children:["Fail HP:",S.failHpPenaltyPct,"%"]})]})]},C)))}),V.jsxs("div",{className:"debug-menu-encounter-footer",children:[V.jsx(li,{className:"debug-add-button",onClick:n,children:"Add enemy"}),V.jsx(li,{className:"debug-add-button",onClick:r,children:"Add Stats Choice"}),V.jsx(li,{className:"debug-add-button",onClick:a,children:"Add Ability Choice"}),V.jsx(li,{className:"debug-add-button",onClick:s,children:"Add Skill Bargain"}),V.jsx(li,{className:"debug-add-button",onClick:o,children:"Add Investigate"}),V.jsx(li,{className:"debug-add-button",onClick:d,children:"Add CrossRoad"}),V.jsx(li,{className:"debug-add-button",onClick:l,disabled:(((y=R.mission)==null?void 0:y.minLevel)??1)<=5,children:"Add Boss"})]})]}),c!==Ci.Loading&&V.jsx("div",{className:"debug-menu-encounter-container",children:"Can only be modified before game starts"})]})};function F9(){const R=Me(n=>n.allQuests),t=new Date().getTimezoneOffset()*60*1e3,[c,v]=ve.useState(Date.now()),x=n=>new Date(n).toISOString().slice(0,16),b=n=>n-t,h=n=>n+t,w=n=>{ss(n)};ve.useEffect(()=>{w({type:"debugRetrieveAllQuests"})},[]);const e=n=>{n.preventDefault(),n.stopPropagation();const a=n.currentTarget.elements.namedItem("questId").value;if(a==="select"){console.error("Please select a quest");return}console.log(`Scheduling quest ${a} to start at ${new Date(c).toLocaleString()}`),w({type:"debugAddQuest",questId:a,timestamp:c})},i=n=>{const r=new Date(`${n.currentTarget.value}Z`).getTime();isNaN(r)?console.error("Invalid GMT start time"):v(r)},u=n=>{const r=new Date(n.currentTarget.value).getTime();isNaN(r)?console.error("Invalid local start time"):v(r)};return V.jsxs("div",{className:"debug-quests-container",children:[V.jsx("div",{className:"quest-input-container",children:V.jsxs("form",{className:"quest-input-form",onSubmit:e,children:[V.jsxs("select",{id:"questId",defaultValue:"select",children:[V.jsx("option",{value:"",disabled:!0,children:"Select Quest"}),Object.entries(ur).filter(([n])=>!R.some(r=>r.questId===n)).map(([n,r])=>V.jsx("option",{value:n,children:r.id},n))]}),V.jsxs("div",{className:"quest-start-time-input",children:["Local Start Time",V.jsx("input",{type:"datetime-local",name:"questStartTime",id:"questStartTime",onChange:u,value:x(b(c))})]}),V.jsxs("div",{className:"quest-start-time-input",children:["GMT Start Time",V.jsx("input",{type:"datetime-local",name:"questStartTime",id:"questStartTime",onChange:i,value:x(c)})]}),V.jsx("input",{type:"submit",value:"Schedule Quest",onClick:n=>{var r,a;n.preventDefault(),n.stopPropagation(),(a=(r=n.currentTarget)==null?void 0:r.form)==null||a.requestSubmit()}})]})}),R.map(n=>{const r=ur[n.questId],a=()=>{console.log(`Deleting quest ${n.questId}`),w({type:"debugRemoveQuest",questId:n.questId})};return V.jsxs("div",{className:"quest-item",children:[V.jsxs("div",{className:"quest-description",children:[r.description??r.id,V.jsx("img",{onClick:a,className:"quest-delete-button",src:"assets/ui/button_close_corner.png",alt:"Delete"})]}),V.jsxs("div",{className:"quest-time-group",children:[V.jsxs("div",{className:"quest-start-time",children:[V.jsx("div",{className:"quest-start-time-label",children:"Start Time: "}),V.jsx("div",{className:"quest-start-time-value",children:new Date(n.timestamp).toLocaleString()})]}),V.jsxs("div",{className:"quest-end-time",children:[V.jsx("span",{className:"quest-end-time-label",children:"End Time: "}),V.jsx("span",{className:"quest-end-time-value",children:new Date(n.timestamp+r.expiresSeconds*1e3).toLocaleString()})]})]}),V.jsxs("div",{className:"quest-time-group",children:[V.jsxs("div",{className:"quest-start-time",children:[V.jsx("div",{className:"quest-start-time-label",children:"GMT Start Time: "}),V.jsx("div",{className:"quest-start-time-value",children:new Date(h(n.timestamp)).toLocaleString()})]}),V.jsxs("div",{className:"quest-end-time",children:[V.jsx("span",{className:"quest-end-time-label",children:"GMT End Time: "}),V.jsx("span",{className:"quest-end-time-value",children:new Date(h(n.timestamp+r.expiresSeconds*1e3)).toLocaleString()})]})]}),V.jsx("div",{className:"quest-reward-tiers",children:r.rewardTiers.map((s,o)=>V.jsxs("div",{className:"quest-reward-tier",children:[V.jsxs("div",{className:"quest-reward-tier-label",children:["Tier ",o+1]}),V.jsxs("div",{className:"quest-reward-tier-info",children:[V.jsxs("div",{className:"quest-reward-tier-goal",children:["Goal: ",s.goal]}),V.jsxs("div",{className:"quest-reward-tier-reward",children:["Reward: ",s.rewardValue," ",s.rewardItem]})]})]},o))})]},n.questId)})]})}function I9({shown:R,dismiss:t,statsProvider:c,inventoryClient:v}){var le,ge;const[x,b]=ve.useState("general"),[h,w]=ve.useState("all"),[e,i]=ve.useState(""),[u,n]=ve.useState(""),[r,a]=ve.useState(""),[s,o]=ve.useState(""),[d,l]=ve.useState(null),[f,m]=ve.useState({dryRun:!0,excludeRecentDays:7,delayBetweenUsers:25,maxUsersToProcess:500,batchSize:1e3}),g=re=>{ss(re)},p=$D();p.sort((re,fe)=>re.name.localeCompare(fe.name));const y=Me(re=>re.playerAbilities),S=Me(re=>re.missionMetadata),C=Me(re=>re.setMissionMetaData),A=Me(re=>re.inventory),M=Me(re=>re.unequipItem),L=Me(re=>re.questProgress),P=Me(re=>re.allQuests),O=Me(re=>re.setPlayerStats),D=Me(re=>re.appVersion),I=(re,fe)=>v.dispatch({type:"itemAdded",id:Jr.generate(),itemDefinitionId:re.id,amount:fe,bagId:Lt.DEFAULT_BAG_ID}),F=re=>v.dispatch({type:"itemAdded",id:Jr.generate(),itemDefinitionId:"Gold",amount:re,bagId:Lt.CURRENCY_BAG_ID}),H=re=>v.dispatch({type:"itemAdded",id:Jr.generate(),itemDefinitionId:"Gem",amount:re,bagId:Lt.CURRENCY_BAG_ID}),k=Me(re=>re.gameStatus),W=re=>()=>{console.log(`Resetting ${re}`),c.profileResetAsync(re).then(O)},$=re=>()=>{console.log(`Adding ${re} life`),c.updateLivesAsync(re).then(O)},K=()=>{console.log("Zeroing gold");const re=A.bags[En].items.find(fe=>fe&&fe.definition.id==="Gold");re&&v.dispatch({type:"itemDropped",itemId:re.id,amount:re.amount})},Z=()=>{console.log("Zeroing gem");const re=A.bags[En].items.find(fe=>fe&&fe.definition.id==="Gem");re&&v.dispatch({type:"itemDropped",itemId:re.id,amount:re.amount})},X=()=>{const re=Object.values(A.equippedItems).filter(Ie=>!!Ie);re.forEach(Ie=>{M(Ie.definition.equipSlots[0])});const fe=Object.values(A.bags).flatMap(Ie=>Ie.items).filter(Ie=>!!Ie);[...re,...fe].forEach(Ie=>{v.dispatch({type:"itemDropped",itemId:Ie.id,amount:Ie.amount})})},j=re=>{Me.getState().setPlayerAbilities([...y,re])},Y=re=>{Me.getState().setPlayerAbilities(y.filter(fe=>fe.name!==re.name))},U=()=>{console.log(`Requesting dump for username: ${e}`);const re={type:"requestDataDump",data:{username:e}},fe=async Ae=>{const{type:Ie,data:Ne}=Ae.data??{};if(Ie==="devvit-message"){const{message:Fe}=Ne;if((Fe==null?void 0:Fe.type)==="dataDumpResponse")try{let Se=Fe.data.dump;if(Fe.data.compressed){console.log("Data is compressed, decompressing... (GZIP data size: "+Fe.data.dump.length+" bytes)"),o(Fe.data.dump),g({type:"dumpData",data:{username:e,gzipData:Fe.data.dump}});const Oe=atob(Se),Be=new Uint8Array(Oe.length);for(let Ot=0;Ot<Oe.length;Ot++)Be[Ot]=Oe.charCodeAt(Ot);const Pt=new DecompressionStream("gzip"),Gt=Pt.writable.getWriter(),si=Pt.readable.getReader();Gt.write(Be),Gt.close();const It=[];let Ht=!1;for(;!Ht;){const{value:Ot,done:qt}=await si.read();Ht=qt,Ot&&It.push(Ot)}const hi=new Uint8Array(It.reduce((Ot,qt)=>Ot+qt.length,0));let Ai=0;for(const Ot of It)hi.set(Ot,Ai),Ai+=Ot.length;Se=new TextDecoder().decode(hi)}n(Se),console.log("Data dump processed successfully")}catch(Se){console.error("Failed to process data dump:",Se),n(`Error processing data dump: ${Se}`)}window.removeEventListener("message",fe)}};window.addEventListener("message",fe),g(re)},J=()=>{if(!s.length){console.error("No gzip data to restore");return}console.log(`Restoring data for username: ${r}, gzip data size : ${s.length} bytes`),g({type:"restorePlayerData",data:{username:r,gzipData:s}})},q=()=>{console.log("Starting inventory cleanup with options:",f);const re={type:"inventoryCleanupRequest",data:{action:"start",options:f}},fe=Ae=>{const{type:Ie,data:Ne}=Ae.data??{};if(Ie==="devvit-message"){const{message:Fe}=Ne;(Fe==null?void 0:Fe.type)==="inventoryCleanupResponse"&&(console.log("Cleanup response:",Fe.data),l(Fe.data.progress),window.removeEventListener("message",fe),Fe.data.success&&_())}};window.addEventListener("message",fe),g(re)},_=()=>{const re=setInterval(()=>{const fe={type:"inventoryCleanupRequest",data:{action:"status"}},Ae=Ie=>{const{type:Ne,data:Fe}=Ie.data??{};if(Ne==="devvit-message"){const{message:Se}=Fe;if((Se==null?void 0:Se.type)==="inventoryCleanupResponse"){const Oe=Se.data.progress;l(Oe),((Oe==null?void 0:Oe.status)==="completed"||(Oe==null?void 0:Oe.status)==="failed")&&clearInterval(re),window.removeEventListener("message",Ae)}}};window.addEventListener("message",Ae),g(fe)},2e3)},te=()=>{const re={type:"inventoryCleanupRequest",data:{action:"clear"}},fe=Ae=>{const{type:Ie,data:Ne}=Ae.data??{};if(Ie==="devvit-message"){const{message:Fe}=Ne;(Fe==null?void 0:Fe.type)==="inventoryCleanupResponse"&&(l(null),window.removeEventListener("message",fe))}};window.addEventListener("message",fe),g(re)},se=()=>{const re={type:"inventoryCleanupRequest",data:{action:"reset"}},fe=Ae=>{const{type:Ie,data:Ne}=Ae.data??{};if(Ie==="devvit-message"){const{message:Fe}=Ne;(Fe==null?void 0:Fe.type)==="inventoryCleanupResponse"&&(console.log("Users reset to unprocessed state"),window.removeEventListener("message",fe))}};window.addEventListener("message",fe),g(re)},ne=Object.values(A.bags).flatMap(re=>re.items).filter(re=>!!re),he=V.jsxs("div",{className:"debug-footer-content",children:[V.jsxs("div",{children:["Min Level: ",((le=Te().missionMetadata.mission)==null?void 0:le.minLevel)||0]}),V.jsxs("div",{children:["Max Level: ",((ge=Te().missionMetadata.mission)==null?void 0:ge.maxLevel)||0]})]});return V.jsxs(Pn,{shown:R,dismiss:t,headerContent:V.jsx("div",{className:"debug-menu-header",children:"DEBUG MENU"}),footerContent:x==="encounters"?he:V.jsx(V.Fragment,{}),children:[V.jsxs("div",{className:"modal-tabs",children:[V.jsx(ir,{label:"General",onClick:()=>b("general"),active:x==="general"}),V.jsx(ir,{label:"Items",onClick:()=>b("items"),active:x==="items"}),V.jsx(ir,{label:"Abilities",onClick:()=>b("abilities"),active:x==="abilities"}),V.jsx(ir,{label:"Encounters",onClick:()=>b("encounters"),active:x==="encounters"}),V.jsx(ir,{label:"Admin",onClick:()=>b("admin"),active:x==="admin"})]}),V.jsxs("div",{className:"modal-content",children:[x==="general"&&V.jsxs("div",{className:"debug-menu-content",children:[V.jsxs("div",{className:"debug-menu-content-combat-container",children:[V.jsx(li,{onClick:()=>mg(Yu.One),children:"1 HP"}),V.jsx(li,{onClick:()=>mg(Yu.Half),children:"Half HP"}),V.jsx(li,{onClick:()=>mg(Yu.Full),children:"Full HP"}),V.jsx(li,{onClick:$(1),children:"+1 Life"}),V.jsx(li,{onClick:$(-1),children:"-1 Life"})]}),V.jsx(li,{onClick:X,children:"Drop All Items"}),V.jsx(li,{onClick:W("stats"),children:"Reset Stats"}),V.jsx(li,{onClick:W("Level"),children:"Reset Level"}),V.jsx(li,{onClick:W("clearedMissions"),children:"Reset Missions"}),V.jsx(li,{onClick:W("all"),children:"Reset All"}),V.jsx(li,{onClick:()=>F(100),children:"Add 100 Gold"}),V.jsx(li,{onClick:()=>F(1e4),children:"Add 10000 Gold"}),V.jsx(li,{onClick:()=>H(1e4),children:"Add 10000 Gem"}),V.jsx(li,{onClick:K,children:"Zero Gold"}),V.jsx(li,{onClick:Z,children:"Zero Gem"}),V.jsx(li,{onClick:()=>Te().setAnimationDisabled(!0),children:"Disable Combat Animations"}),V.jsx("div",{children:"Quests"}),V.jsx(F9,{}),V.jsx("div",{children:"Debug Quests"}),V.jsx("div",{className:"debug-quests-list",children:Object.entries(ur).map(([re,fe])=>{const Ae=fe.id,Ie=L[Ae],Ne=!!Ie&&P.some(Be=>Be.questId===re),Fe=Ne?` Tier ${Ie.tierIndex+1}`:"",Se=Ne?` (${Ie.progress}/${Ie.goal})`:"",Oe=Ne?Ie.goal-Ie.progress-1:0;return V.jsxs("div",{className:"debug-quests-list-item",children:[V.jsxs(li,{children:[re,Fe,Se]}),Ne&&V.jsxs("div",{className:"debug-quest-actions",children:[V.jsx(li,{onClick:()=>g({type:"debugAdvanceQuest",questId:re,progressChange:1}),children:"+1"}),V.jsx(li,{onClick:()=>g({type:"debugAdvanceQuest",questId:re,progressChange:Oe}),children:"Goal - 1"}),V.jsx(li,{onClick:()=>g({type:"claimQuestReward",questId:re}),children:"Claim"})]})]},re)})})]}),x==="abilities"&&V.jsx("div",{className:"debug-menu-content",children:V.jsx("div",{className:"debug-menu-abilities-container",children:p.map((re,fe)=>V.jsx(li,{onClick:()=>y.some(Ae=>Ae.name===re.name)?Y(re):j(re),className:`button ${y.some(Ae=>Ae.name===re.name)?"acquired":""}`,children:re.name},`${re.name}-${fe}`))})}),x==="items"&&V.jsxs("div",{className:"debug-menu-content",children:[V.jsxs("div",{className:"items-tabs",children:[Object.values(so).map(re=>V.jsx(ir,{label:re,onClick:()=>w(re),active:h===re},re)),V.jsx(ir,{label:"All",onClick:()=>w("all"),active:h==="all"},"all"),V.jsx(ir,{label:"Etc",onClick:()=>w("etc"),active:h==="etc"},"etc")]}),V.jsxs("div",{className:"debug-menu-items-container",children:[V.jsx("div",{children:"Take Item"}),Object.values(Lt.ItemDefinitions).filter(re=>!re.tags.includes("currency")).filter(re=>h==="all"?!0:h==="etc"?re.equipSlots.length===0:re.equipSlots.includes(h)).map(re=>{const fe=re.isStackable?re.tags.includes("material")?100:1:void 0,Ae=ne.reduce((Ie,Ne)=>re.id===Ne.definition.id?Ie+(Ne.amount??1):Ie,0);return V.jsxs(li,{onClick:()=>I(re,fe),children:[re.name,Ae>0?` (${Ae})`:""]},re.id)})]})]}),x==="encounters"&&V.jsx(D9,{missionMetadata:S,setMissionMetaData:C,gameStatus:k}),x==="admin"&&V.jsxs("div",{className:"debug-menu-content",children:[V.jsxs("div",{className:`admin-section ${u?"has-dump-data":""}`,children:[V.jsxs("div",{className:"admin-input-group",children:[V.jsx("label",{htmlFor:"admin-username",children:"Username:"}),V.jsx("input",{id:"admin-username",type:"text",value:e,onChange:re=>i(re.target.value),placeholder:"Enter username"})]}),V.jsx(li,{disabled:!e,onClick:U,children:"Dump Data"}),V.jsxs("div",{className:"admin-input-group",children:[V.jsx("label",{htmlFor:"admin-username",children:"Dest User:"}),V.jsx("input",{id:"admin-username",type:"text",value:r,onChange:re=>a(re.target.value),placeholder:"Enter username"})]}),V.jsx(li,{disabled:!r.length||!s.length,onClick:J,children:"Restore User"}),(u||!!r)&&V.jsxs("div",{className:"dump-data-section",children:[V.jsx("label",{htmlFor:"dump-output",children:"Data Dump (Copy from here):"}),V.jsx("textarea",{id:"dump-output",value:u,onClick:re=>{re.target.select()},onChange:re=>{n(re.target.value),o(re.target.value)}}),V.jsx("div",{className:"dump-instructions",children:"Click the textarea to select all text, then copy (Ctrl+C / Cmd+C)"})]})]}),V.jsxs("div",{className:"admin-section inventory-cleanup-section",children:[V.jsx("p",{children:V.jsx("strong",{children:"Inventory Database Cleanup"})}),V.jsx("p",{children:"Clean up old inventory actions for all users (one-time maintenance)"}),V.jsxs("div",{className:"cleanup-options",children:[V.jsx("div",{className:"admin-input-group",children:V.jsxs("label",{children:[V.jsx("input",{type:"checkbox",checked:f.dryRun,onChange:re=>m({...f,dryRun:re.target.checked})}),"Dry Run (simulate only, don't make changes)"]})}),V.jsxs("div",{className:"admin-input-group",children:[V.jsx("label",{htmlFor:"exclude-recent-days",children:"Exclude users active in last N days:"}),V.jsx("input",{id:"exclude-recent-days",type:"number",value:f.excludeRecentDays,onChange:re=>m({...f,excludeRecentDays:parseInt(re.target.value)||0}),min:"0",max:"365"})]}),V.jsxs("div",{className:"admin-input-group",children:[V.jsx("label",{htmlFor:"delay-between-users",children:"Delay between users (ms):"}),V.jsx("input",{id:"delay-between-users",type:"number",value:f.delayBetweenUsers,onChange:re=>m({...f,delayBetweenUsers:parseInt(re.target.value)||100}),min:"0",max:"5000"})]}),V.jsxs("div",{className:"admin-input-group",children:[V.jsx("label",{htmlFor:"max-users",children:"Max users to process (safety limit):"}),V.jsx("input",{id:"max-users",type:"number",value:f.maxUsersToProcess,onChange:re=>m({...f,maxUsersToProcess:parseInt(re.target.value)||100}),min:"1",max:"10000"})]}),V.jsxs("div",{className:"admin-input-group",children:[V.jsx("label",{htmlFor:"batch-size",children:"Batch size for Redis scan (hScan):"}),V.jsx("input",{id:"batch-size",type:"number",value:f.batchSize,onChange:re=>m({...f,batchSize:parseInt(re.target.value)||100}),min:"10",max:"1000"})]})]}),d&&V.jsxs("div",{className:"cleanup-progress",children:[V.jsx("h4",{children:"Cleanup Progress"}),V.jsxs("div",{className:"progress-stats",children:[V.jsxs("div",{children:["Status: ",V.jsx("strong",{children:d.status})]}),V.jsxs("div",{children:["Progress: ",d.usersProcessed," / ",d.totalUsers]}),V.jsxs("div",{children:["Successful: ",d.successfulCleanups]}),V.jsxs("div",{children:["Skipped: ",d.skippedCleanups]}),V.jsxs("div",{children:["Failed: ",d.failedCleanups]}),V.jsxs("div",{children:["Actions Pruned: ",d.actionsPruned.toLocaleString()]}),d.currentUser&&V.jsxs("div",{children:["Processing: ",d.currentUser]}),d.estimatedTimeRemaining&&V.jsxs("div",{children:["ETA: ",Math.round(d.estimatedTimeRemaining/1e3),"s"]})]}),V.jsx("div",{className:"progress-bar",children:V.jsx("div",{className:"progress-fill",style:{width:`${d.usersProcessed/d.totalUsers*100}%`,backgroundColor:d.status==="completed"?"#4CAF50":d.status==="failed"?"#f44336":"#2196F3"}})})]}),V.jsxs("div",{className:"cleanup-actions",children:[V.jsx(li,{onClick:q,disabled:(d==null?void 0:d.status)==="running",children:f.dryRun?"Preview Cleanup":"Start Cleanup"}),d&&V.jsx(li,{onClick:te,children:"Clear Progress"}),V.jsx(li,{onClick:se,disabled:(d==null?void 0:d.status)==="running",children:"Reset All Users"})]})]}),V.jsxs("div",{className:"app-info",children:[V.jsxs("div",{children:["App version: ",D]}),V.jsxs("div",{children:["Commit: ","de6015c"]})]})]})]})]})}function O9({children:R,shown:t,dismiss:c,headerContent:v=null}){return V.jsxs(wp,{shown:t,dismiss:c,children:[V.jsxs("div",{className:"simpleModal",children:[V.jsx("div",{className:"simpleModal-header",children:v}),V.jsx("div",{className:"simpleModal-content",children:R})]}),V.jsx("div",{className:"simpleModal-footer",children:V.jsx("button",{className:"back-button",onClick:c,children:"Cancel"})})]})}function N9({shown:R,dismiss:t,enemyId:c}){const[v,x]=ve.useState(""),[b,h]=ve.useState(!1),w=v.length>0&&!b,e=()=>{if(!v.length||b)return;const r=K4(Te().missionMetadata.enemyTauntData,c,v),a={newTaunts:r};console.log("EnemyTauntForm onSubmitFn",r),ss({type:"setEnemyTaunts",data:a}),Te().setShowEnemyTauntForm(!1,""),h(!0)},i=r=>{r.preventDefault(),e()},u=V.jsxs("div",{className:"tauntForm-header",children:[V.jsx("div",{className:"badge",children:V.jsx("img",{src:"assets/ui/ItemIcon_Skull.png"})}),V.jsx("div",{className:"title",children:"Create enemy taunt"})]}),n=w?"assets/ui/Button_Create_Active.png":"assets/ui/Button_Create_Inactive.png";return V.jsx(O9,{shown:R,dismiss:t,headerContent:u,children:V.jsxs("form",{className:"tauntForm-form",onSubmit:i,children:[V.jsxs("div",{className:"input-prompt",children:["You got me this time, adventurer...",V.jsx("br",{}),"What should I say to the next chump who rolls through here?"]}),V.jsxs("div",{className:"input-section",children:[V.jsx("div",{className:"button-container",children:V.jsx("input",{type:"text",name:"title",placeholder:"grrrr...",value:v,onChange:r=>x(r.target.value),maxLength:50})}),V.jsx("button",{type:"submit",style:{visibility:"hidden"},children:"Create Mission"})]}),V.jsx("div",{className:"button-section",children:V.jsx("div",{className:"tauntForm-submit-button",onClick:e,children:V.jsx("img",{src:n})})})]})})}function G9(R){const t=yB.find(c=>c.day===R);if(!t)throw new Error(`No reward found for day ${R}`);return t.gold}const kr=({day:R,wide:t=!1,loginDay:c=1})=>{const v=R===c,x=R<c;return V.jsxs("div",{className:`login-day ${t?"wide":""} ${x?"dimmed-overlay":""}`,children:[v?V.jsx("div",{className:"login-day-styled-text-alt",children:"TODAY"}):V.jsxs("div",{className:"login-day-styled-text",children:["DAY ",R]}),V.jsx("div",{className:`background-overlay${t?"wide":""} ${v?"greenbackground":""} `}),V.jsxs("div",{className:"image-container",children:[t&&V.jsxs(V.Fragment,{children:[V.jsx("img",{src:Et.loginrewards.leafLeft,style:{width:`${t?"20%":"80%"}`,objectFit:"contain",zIndex:2,position:"absolute",left:"15%",top:"8px"}}),V.jsx("img",{src:Et.loginrewards.leafRight,style:{width:`${t?"20%":"80%"}`,objectFit:"contain",zIndex:2,position:"absolute",right:"15%",top:"8px"}})]}),v&&V.jsx("img",{src:Et.loginrewards.claimEffect,style:{width:`${t?"30%":"80%"}`,objectFit:"contain",zIndex:2,position:"absolute"}}),V.jsx("img",{src:Et.loginrewards[`day${R}`],style:{width:`${t?"25%":"60%"}`,objectFit:"contain",zIndex:3,position:"absolute",top:"10px"}}),x&&V.jsx("img",{src:Et.loginrewards.tickMark,style:{width:`${t?"20%":"40%"}`,objectFit:"contain",zIndex:3,position:"absolute",top:"25px"}})]}),V.jsx("div",{className:`login-day-styled-text imagetop${t?"wide":""} text-align-right`,children:G9(R)})]})};function H9({loginDay:R=1,shown:t,claim:c,dismiss:v=()=>{}}){return V.jsx(Pn,{shown:t,dismiss:v,maxHeight:720,headerContent:V.jsxs("div",{className:"login-menu-header",children:[V.jsx("img",{src:"assets/ui/ItemIcon_Calendar.png",style:{width:"42px",objectFit:"contain"}}),V.jsx("div",{className:"login-day-menu-header-styled-text",children:"DAILY TREATS"})]}),renderBackButton:!1,footerContent:null,children:V.jsx("div",{className:"login-menu-content",children:V.jsxs("div",{className:"login-container",children:[V.jsxs("div",{className:"row",children:[kr({day:1,loginDay:R}),kr({day:2,loginDay:R}),kr({day:3,loginDay:R})]}),V.jsxs("div",{className:"row",children:[kr({day:4,loginDay:R}),kr({day:5,loginDay:R}),kr({day:6,loginDay:R})]}),V.jsx("div",{className:"row",children:kr({day:7,wide:!0,loginDay:R})}),V.jsx("div",{className:"rowflex center",onClick:c,children:V.jsx(ga,{onClick:()=>{},imageSrc:"assets/ui/Button_Claim.png"})}),V.jsx("div",{className:"rowflex center"})]})})})}const sp=({lives:R,currGameStatus:t})=>{const c=Me(v=>v.setShopWithDeepLink);return R<0?null:V.jsxs("div",{className:"heart-container",children:[t===Ci.Loading&&Array.from({length:tl}).map((v,x)=>V.jsx("div",{className:"liveheart",children:V.jsx("img",{src:x>=(R??0)?"assets/ui/Heart_Empty.png":"assets/ui/Heart_Full.png"})},x)),R-tl>0&&V.jsxs("div",{className:"bonusLives",children:["+ ",R-tl]}),R===0&&V.jsx("div",{className:"store-link",children:V.jsx("img",{src:"assets/ui/button_morehearts.png",className:"store-button",onClick:()=>c("game_refill_5lives"),style:{cursor:"pointer"}})}),t===Ci.Defeat&&Array.from({length:tl}).map((v,x)=>V.jsx("div",{className:"liveheart",children:V.jsx("img",{src:x>=(R??0)-1?"assets/ui/Heart_Empty.png":"assets/ui/Heart_Full.png"})},x))]})},zu=()=>V.jsx("div",{className:"ui-notification-indicator",children:"!"}),k9=({bShowOnlyPlayerHealth:R=!1,playerHealth:t=0,playerMaxHealth:c=0,playerAttack:v=0,playerDefense:x=0})=>{const b=c>0?Math.min(100,Math.max(0,t/c*100)):0;return V.jsxs("div",{className:"player-stats-container",children:[V.jsxs("div",{className:"mini-stat-wrapper",children:[V.jsx("div",{className:"stat-icon stat-hp-icon",children:V.jsx("img",{src:"assets/ui/Heart_Full.png",alt:"HP",className:"stat-image"})}),V.jsxs("div",{className:"stat-bar-container",children:[V.jsx("div",{className:"stat-bar empty-hp-bar"}),V.jsx("div",{className:"stat-bar hp-bar",style:{width:`${b}%`}}),V.jsxs("div",{className:"stat-text",children:[t," / ",c]})]})]}),!R&&V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"mini-stat-wrapper",children:[V.jsx("div",{className:"stat-bar atk-bar"}),V.jsx("div",{className:"stat-icon",children:V.jsx("img",{src:Et.stats.attack,alt:"ATK",className:"stat-image"})}),V.jsx("div",{className:"stat-value atk-value",children:v})]}),V.jsxs("div",{className:"mini-stat-wrapper",children:[V.jsx("div",{className:"stat-bar def-bar"}),V.jsx("div",{className:"stat-icon",children:V.jsx("img",{src:Et.stats.defense,alt:"DEF",className:"stat-image"})}),V.jsx("div",{className:"stat-value def-value",children:x})]})]})]})},Eu=({children:R,isVisible:t,arrowPosition:c="center",textStyle:v,targetRef:x})=>{const b=ve.useRef(null),[h,w]=ve.useState("50%");return ve.useEffect(()=>{if(!t||!b.current||!(x!=null&&x.current))return;const e=()=>{const u=b.current,n=x.current,r=u.getBoundingClientRect(),a=n.getBoundingClientRect(),s=a.left+a.width/2,o=r.left,d=r.width;let l=(s-o)/d*100;const f=24/d*100;l=Math.max(f/2,Math.min(100-f/2,l)),w(`${l}%`)},i=setTimeout(e,0);return window.addEventListener("resize",e),()=>{clearTimeout(i),window.removeEventListener("resize",e)}},[t,x,R]),t?V.jsxs("div",{ref:b,className:`navbar-tooltip ${c}`,style:v,children:[R,V.jsx("div",{className:"tooltip-arrow",style:{left:x?h:void 0,transform:x?"translateX(-50%)":void 0}})]}):null},U9=({handleStatsClicked:R=()=>console.log("Button 1 clicked"),handleShopClicked:t=()=>console.log("Button 2 clicked"),handleBattleClicked:c=()=>console.log("Button 3 clicked"),handleMapClicked:v=()=>console.log("Button 4 clicked"),handleBagClicked:x=()=>console.log("Button 5 clicked"),bStatsNotification:b=!1,bShopNotification:h=!1,bBattleNotification:w=!1,bMapNotification:e=!1,bBagNotification:i=!1,bInCombat:u=!0,bShowSkillOptions:n=!0,bShowOnlyPlayerHealth:r=!1})=>{const[a,s]=ve.useState(null),[o,d]=ve.useState(()=>!localStorage.getItem("didClickBattle")),l=ve.useRef(null),f=ve.useRef(null),m=ve.useRef(null),g=Me(H=>H.playerCombatCharacter),p=Me(H=>H.playerStats),y=Me(H=>H.inventory.equippedItems),S=Me(H=>H.gameStatus),C=Me(H=>H.showNavTooltips),A=Object.values(y).filter(H=>!!H),M=Me(H=>H.gameMode),L=Me(H=>H.inventory);let P=0,O=0,D=0,I=0;g&&p&&(P=hr(p.stats.MaxHp.value,"MaxHp",A,g.getSkillEffects()),O=hr(p.stats.Attack.value,"Attack",A,g.getSkillEffects()),D=hr(p.stats.Defense.value,"Defense",A,g.getSkillEffects()),I=g.getCurrentHp());const F=()=>{c(),d(!1),localStorage.setItem("didClickBattle","true")};return V.jsxs("div",{className:"navi-bar",children:[V.jsxs("div",{className:`image-icon ${u?"dimmed":""}`,ref:l,onClick:u?void 0:R,onMouseEnter:()=>s("stats"),onMouseLeave:()=>s(null),style:{position:"relative"},children:[V.jsx(ga,{onClick:u?void 0:R,imageSrc:Et.navibar.stats,imageContainerClassName:"square-image-container",toolTipText:"View Stats & Abilities"}),b&&V.jsx(zu,{}),V.jsx(Eu,{isVisible:S=="loading"&&C,arrowPosition:"left",targetRef:l,children:"Level up with coins and check your stats here!"}),V.jsxs(Eu,{isVisible:(p==null?void 0:p.Level)===1&&L.Gold>=rp(p==null?void 0:p.Level),arrowPosition:"left",targetRef:l,textStyle:{fontSize:"18px",width:"300px"},children:["You have enough coins to level up!",V.jsx("p",{}),"Tap here to view and upgrade your stats!"]})]}),(u||n)&&V.jsx("div",{className:"navibar-overlay",children:V.jsx(k9,{bShowOnlyPlayerHealth:r,playerHealth:I,playerMaxHealth:P,playerAttack:O,playerDefense:D})}),!(u||n)&&V.jsxs(V.Fragment,{children:[V.jsx("div",{className:`image-icon ${u||n?"dimmed":""}`,onClick:!u&&!n?t:void 0,children:V.jsx(ga,{onClick:!u&&!n?t:void 0,imageSrc:Et.navibar.shop,imageContainerClassName:"square-image-container"})}),V.jsxs("div",{className:`image-icon ${M===_r.Inn?"":"dimmed"}`,ref:f,onClick:F,children:[V.jsx(ga,{onClick:F,imageSrc:Et.navibar.battle,imageContainerClassName:"square-image-container"}),M===_r.Inn&&V.jsx(Eu,{isVisible:o,arrowPosition:"center",targetRef:f,children:"Find and play missions"})]}),V.jsxs("div",{className:`image-icon ${u?"dimmed":""}`,onClick:!u&&!n?v:void 0,children:[V.jsx(ga,{onClick:v,imageSrc:Et.navibar.map,imageContainerClassName:"square-image-container"}),e&&V.jsx(zu,{})]})]}),V.jsxs("div",{className:`image-icon ${u?"dimmed":""}`,ref:m,onClick:u?void 0:x,children:[V.jsx(ga,{onClick:u?void 0:x,imageSrc:Et.navibar.bag,imageContainerClassName:"square-image-container",toolTipText:"View Inventory"}),i&&V.jsx(zu,{}),V.jsx(Eu,{isVisible:S=="loading"&&C,arrowPosition:"right",targetRef:m,children:"Equip gear and check your inventory here!"})]})]})},p2=250,V9=125,Y9=180,X9=()=>{const[R,t]=ve.useState(!1),[c,v]=ve.useState(!1),[x,b]=ve.useState(!0),h=()=>{const w=document.getElementById("app"),e=document.getElementById("game-container");if(!w||!e)return;const i=window.innerWidth/window.innerHeight>=4/3,u=w.getBoundingClientRect(),n=e.getBoundingClientRect();if(i){const r=u.width,a=n.width;b(!0),r-a>=p2?t(!0):t(!1)}else{b(!1);const r=u.height,a=n.height;r-a>=V9?t(!0):t(!1),r-a>=Y9?v(!0):v(!1)}};return ve.useEffect(()=>(h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)),[]),{isLandscape:x,setIsLandscape:b,showBattleLog:R,showPortraitBattleLog:c,setShowBattleLog:t}},z9=R=>{const t=Math.floor(R/1e3),c=Math.floor(t/3600),v=Math.floor(t%3600/60),x=t%60,b=h=>String(h).padStart(2,"0");return`${b(c)}:${b(v)}:${b(x)}`},v2=({remainingTime:R})=>{if(!(R<0))return V.jsxs("div",{className:"recover-container",children:["Recover in ",z9(R)]})},iw=({playerLives:R,gameStatus:t,advanceButtonLabel:c,showAdvanceButton:v,tauntFormShown:x,advance:b,battleLogData:h,livesTimer:w})=>{const e=R>0,{battleLogMessages:i,showBattleLog:u,showPortraitBattleLog:n,isLandscape:r}=h,a=r?u:n,s=document.getElementById("ui-container"),o=(s==null?void 0:s.getBoundingClientRect().width)??p2,d=ve.useRef(null);ve.useEffect(()=>{d.current&&d.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[i]),ve.useEffect(()=>{d.current&&d.current.scrollIntoView({behavior:"instant",block:"end"})},[a]);const l=f=>typeof f=="string"&&Object.keys(Xi).includes(f);return V.jsxs("div",{className:"battle-log-container",style:r?{maxWidth:o*.45}:void 0,children:[a&&i.length>0&&V.jsxs("div",{className:"battle-log-area",children:[i.map((f,m)=>Object.entries(f).filter(([p])=>l(p)).filter(([,p])=>p.length>0).map(([p,y],S)=>l(p)?V.jsxs("div",{className:"battle-log-message",children:[p===Xi.SystemMessage&&y.map((C,A)=>C.message!==""&&V.jsx("div",{className:"battle-log-message-inner",children:C.message},`${A}-${C.type}`)),p===Xi.AbilityTriggered&&V.jsxs("div",{className:"battle-log-message-inner",children:[V.jsxs("span",{className:y[0].sourceIsPlayer?"playerName":"characterName",children:[y[0].sourceName," "]}),y.map((C,A)=>V.jsxs(fi.Fragment,{children:[A>0?" and ":""," ",C.message,V.jsx(ds,{content:V.jsxs("div",{children:["Triggered by ",C.abilityName??"Unknown Ability"]})})]},A))]},`${S}-${p}`),p===Xi.Heal&&V.jsx("div",{className:"battle-log-message-inner",children:y==null?void 0:y.map((C,A)=>V.jsxs(fi.Fragment,{children:[A>0?" and ":"",V.jsx("span",{className:C.sourceIsPlayer?"playerName":"characterName",children:C.sourceName})," healed",V.jsx("span",{className:C.targetIsPlayer?"playerName":"characterName",children:C.targetName===C.sourceName?" self":C.targetName})," for ",C.healAmount,V.jsx(ds,{content:V.jsxs("div",{children:["Triggered by ",C.abilityName??"Unknown Ability"]})})]},A))},`${S}-${p}`),p===Xi.Shield&&V.jsx("div",{className:"battle-log-message-inner",children:y.map((C,A)=>V.jsxs(fi.Fragment,{children:[A>0?" and ":"",V.jsx("span",{className:C.sourceIsPlayer?"playerName":"characterName",children:C.sourceName})," shield",V.jsx("span",{className:C.targetIsPlayer?"playerName":"characterName",children:C.targetName===C.sourceName?" self":C.targetName})," for ",C.shieldAmount,V.jsx(ds,{content:V.jsxs("div",{children:["Triggered by ",C.abilityName??"Unknown Ability"]})})]},A))},`${S}-${p}`),p===Xi.Damage&&V.jsxs("div",{className:"battle-log-message-inner",children:[V.jsx("span",{className:y[0].sourceIsPlayer?"playerName":"characterName",children:y[0].sourceName})," hit ",V.jsx("span",{className:y[0].targetIsPlayer?"playerName":"characterName",children:y[0].targetName})," for ",y==null?void 0:y.map((C,A)=>{var M;return V.jsxs(fi.Fragment,{children:[A>0?" and ":"",ng(C)," with ",C.actionName??"Unknown Ability",C.isCritical?" (CRITICAL)":"",C.wasDodged?" (dodged)":"",C.abilitySource&&V.jsx(ds,{content:V.jsxs("div",{children:["Triggered by ",((M=C.abilitySource)==null?void 0:M.name)??"Unknown Ability"]})})]},A)})]},`${S}-${p}`),p===Xi.Drain&&V.jsxs("div",{className:"battle-log-message-inner",children:[V.jsx("span",{className:y[0].sourceIsPlayer?"playerName":"characterName",children:y[0].sourceName})," drained ",ng(y[0])," hp from ",V.jsx("span",{className:y[0].targetIsPlayer?"playerName":"characterName",children:y[0].targetName})," with ",y[0].actionName??"Unknown Ability",y==null?void 0:y.map((C,A)=>{var M;return V.jsxs(fi.Fragment,{children:[A>0?" and ":"",C.abilitySource&&V.jsx(ds,{content:V.jsxs("div",{children:["Triggered by ",((M=C.abilitySource)==null?void 0:M.name)??"Unknown Ability"]})})]},A)})]},`${S}-${p}`),p===Xi.MutualDamage&&V.jsxs("div",{className:"battle-log-message-inner",children:[V.jsx("span",{className:y[0].sourceIsPlayer?"playerName":"characterName",children:y[0].sourceName})," sacrificed power to do ",ng(y[0])," damage to ",V.jsx("span",{className:y[0].targetIsPlayer?"playerName":"characterName",children:y[0].targetName})," with ",y[0].actionName??"Unknown Ability",y==null?void 0:y.map((C,A)=>{var M;return V.jsxs(fi.Fragment,{children:[A>0?" and ":"",C.abilitySource&&V.jsx(ds,{content:V.jsxs("div",{children:["Triggered by ",((M=C.abilitySource)==null?void 0:M.name)??"Unknown Ability"]})})]},A)})]},`${S}-${p}`)]},`${m}-${S}-${p}`):null)),V.jsx("div",{ref:d})]}),V.jsxs("div",{className:"bottom-container",children:[v&&!x&&t===Ci.Loading&&V.jsxs("div",{className:"lives-container",children:[V.jsxs("h1",{children:["Lives",V.jsx(ds,{content:"You must have at least 1 life to start a mission. Lives recover over time."})]}),V.jsx(sp,{lives:R,currGameStatus:t}),t===Ci.Loading&&!e&&V.jsx(v2,{remainingTime:w})]}),V.jsxs("div",{className:`advance-button-wrapper ${v&&!x?"":"button-hidden"}`,children:[t===Ci.Loading&&e&&V.jsx(Ug,{disabled:!e,label:e?c:"Resting..",onClick:b}),t===Ci.Playing&&V.jsx(Ug,{disabled:!1,label:c,onClick:b})]})]})]})};function W9(){const R=Me(n=>n.recentMissionLinksShown),t=Me(n=>n.setRecentMissionLinksShown),c=Me(n=>n.recentMissionMode)??"underlevel",v=Me(n=>n.recentMissionLinks),x=()=>{t(!1)},b=()=>c==="playNext"?V.jsxs(V.Fragment,{children:["Keep adventuring!",V.jsx("br",{}),V.jsx("br",{}),"Select a mission below:"]}):V.jsxs(V.Fragment,{children:["Whoa, looks like this mission might be a bit tough for you...",V.jsx("br",{}),V.jsx("br",{}),"Click one of these links to play a mission that might be more your speed:"]}),h=()=>c==="playNext"?"assets/ui/ItemIcon_Map_big.png":"assets/ui/ItemIcon_Skull_big.png",w={height:"500px"},e={backgroundColor:"#36364e",justifyContent:"flex-start"},i={display:"flex",flexDirection:"row",width:"100%",height:"auto",alignItems:"flex-start",backgroundColor:"#36364e",borderRadius:"20px"},u=V.jsx("div",{className:"recent-missions-top",children:V.jsx("button",{className:"dismiss-button",onClick:x,children:V.jsx("img",{src:"assets/ui/button_close_corner.png",alt:"Close"})})});return V.jsxs(V.Fragment,{children:[V.jsx(Pn,{shown:R,dismiss:x,headerContent:u,contentStyle:e,footerContentStyle:i,renderBackButton:!1,modalStyle:w,children:V.jsxs("div",{className:"other-missions-content",children:[V.jsx("p",{className:"other-missions-intro",children:b()}),V.jsx("div",{className:"mission-links-container",children:(v==null?void 0:v.length)===0?V.jsx("p",{className:"no-missions-message",children:"Sorry we couldn't find any recent missions at your level"}):v==null?void 0:v.map((n,r)=>V.jsxs("div",{className:"mission-link-item",children:[V.jsx("a",{href:"#",className:"mission-link",onClick:a=>{a.preventDefault(),ss({type:"navigateTo",data:{postId:n.postId}})},children:n.title||`Mission ${r+1}`}),V.jsxs("div",{className:"mission-difficulty",children:["Difficulty: ",Array.from({length:5},(a,s)=>V.jsx("span",{className:`star ${s<n.difficulty?"filled":"empty"}`,children:"★"},s))]})]},r))})]})}),R&&V.jsx("div",{className:"header-image-breakout",children:V.jsx("img",{src:h(),alt:"Header"})})]})}function j9({shown:R,dismiss:t}){const{musicVolume:c,sfxVolume:v,setMusicVolume:x,setSfxVolume:b,animationSpeed:h,setAnimationSpeed:w}=Me(),e=Me(r=>r.appVersion),i=V.jsxs("div",{className:"settings-top",children:["Settings",V.jsx("button",{className:"dismiss-button",onClick:t,children:V.jsx("img",{src:"assets/ui/button_close_corner.png",alt:"Close"})})]}),u={display:"flex",flexDirection:"row",width:"100%",height:"auto",alignItems:"flex-start",backgroundColor:"#36364e"},n={backgroundColor:"#36364e",height:"70%"};return V.jsx(Pn,{shown:R,dismiss:t,modalStyle:n,headerContent:i,contentStyle:{padding:"20px"},footerContentStyle:u,renderBackButton:!1,children:V.jsxs("div",{className:"settings-content",children:[V.jsxs("div",{className:"settings-volume-section",children:[V.jsx("div",{className:"settings-volume-icon",children:V.jsx("img",{src:"assets/ui/icon_music.png",alt:"Music"})}),V.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:c,onChange:r=>x(parseFloat(r.target.value)),className:"settings-volume-slider"})]}),V.jsxs("div",{className:"settings-volume-section",children:[V.jsx("div",{className:"settings-volume-icon",children:V.jsx("img",{src:"assets/ui/icon_sound.png",alt:"Sound Effects"})}),V.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:v,onChange:r=>b(parseFloat(r.target.value)),className:"settings-volume-slider"})]}),(Me(r=>{var a;return(a=r.playerStats)==null?void 0:a.battlePassExpiration})??0)>Date.now()&&V.jsx(V.Fragment,{children:V.jsx("div",{className:"settings-checkbox-section",children:V.jsxs("label",{className:"settings-checkbox-label",children:[V.jsx("input",{type:"checkbox",checked:h===2,onChange:r=>w(r.target.checked?2:1),className:"settings-checkbox"}),V.jsx("span",{className:"settings-checkbox-text",children:"Speed up gameplay"})]})})}),V.jsx("div",{className:"settings-credits-text",children:V.jsx("p",{children:"Spooky Music credit: David KBD. License: CC By 4.0. Edited for length."})}),V.jsxs("div",{className:"settings-credits-text",children:[V.jsx("p",{children:e}),V.jsxs("p",{children:["Build: ","de6015c"]})]})]})})}function K9({shown:R,dismiss:t}){const c=V.jsxs("div",{className:"settings-top",children:["Your Missions",V.jsx("button",{className:"dismiss-button",onClick:t,children:V.jsx("img",{src:"assets/ui/button_close_corner.png",alt:"Close"})})]}),v={backgroundColor:"#36364e"},x={backgroundColor:"#36364e"},{authorRewardData:b}=Me(),h=(i,u)=>{ss({type:"claimAuthorReward",data:{postId:i,rewardIndex:u}});const n=b.map(r=>r.postId===i?{...r,rewardCollectedIndex:u}:r);Me.getState().setAuthorRewardData(n)},w=i=>{ss({type:"navigateTo",data:{postId:i}})},e=i=>{let u=-1;for(let n=0;n<ps.length&&i>=ps[n].requiredPlays;n++)u=n;if(u===-1)return i/ps[0].requiredPlays*11;if(u===ps.length-1)return 91;{const n=ps[u],r=ps[u+1],a=(i-n.requiredPlays)/(r.requiredPlays-n.requiredPlays),s=11+u/(ps.length-1)*80,o=11+(u+1)/(ps.length-1)*80;return s+a*(o-s)}};return V.jsx(Pn,{shown:R,dismiss:t,modalStyle:x,headerContent:c,contentStyle:{padding:"20px"},footerContentStyle:v,renderBackButton:!1,children:V.jsx("div",{className:"author-rewards-container",children:V.jsxs("div",{className:"author-rewards-list",children:[V.jsx("div",{className:"instructions-section",children:V.jsxs("p",{children:["The more Redditors who play the missions you create, the more rewards you earn!",V.jsx("br",{}),V.jsx("br",{}),"Check in here to see how many plays your missions have received and claim rewards."]})}),b.map((i,u)=>{const n=e(i.plays),r=Bw(i);return V.jsxs("div",{className:"author-reward-entry",children:[V.jsx("div",{className:"mission-info",children:V.jsx("a",{href:"#",className:"mission-title-link",onClick:a=>{a.preventDefault(),w(i.postId)},children:i.title})}),V.jsxs("div",{className:"progress-section",children:[V.jsxs("div",{className:"progress-container",children:[V.jsx("div",{className:"reward-slots",children:ps.map((a,s)=>{const o=10+s/(ps.length-1)*80,d=i.rewardCollectedIndex>=s;return V.jsxs("div",{className:"reward-slot-container",style:{left:`${o}%`},children:[V.jsx(eo,{item:null,itemDefinition:ba[a.reward],quantity:a.amount},`reward-slot-${s}`),d&&V.jsx("img",{src:"assets/ui/checkmark_green.png",alt:"Claimed",className:"claimed-overlay"})]},s)})}),V.jsx("div",{className:"progress-dots",children:ps.map((a,s)=>{const o=10+s/(ps.length-1)*80,d=i.plays>=a.requiredPlays;return V.jsx("div",{className:`progress-dot ${d?"achieved":""}`,style:{left:`${o}%`}},s)})}),V.jsxs("div",{className:"progress-meter-bg",children:[V.jsx("div",{className:"progress-meter-fill",style:{width:`${n}%`}}),ps.map((a,s)=>{const o=10+s/(ps.length-1)*80;return V.jsx("div",{className:"plays-label",style:{left:`${o}%`},children:a.requiredPlays},s)})]})]}),V.jsx("button",{className:`claim-button ${r?"active":"inactive"}`,disabled:!r,onClick:()=>h(i.postId,i.rewardCollectedIndex+1),children:"Claim"})]})]},u)})]})})})}class $9{constructor(t){this.encounterState=aB,this.questProgress={},this.allQuests=[],this.inventoryProvider=Q9(),this.encounterRequiredProps=t,this.messageHandlerFn=()=>{}}updateQuestProgressAsync(t,c){const v=ur[t];if(!v)throw new Error(`Quest ${t} not found`);const x=this.questProgress[t]||{questId:t,timestamp:Date.now(),progress:0,goal:v.rewardTiers[0].goal,tierIndex:0},b={...x,progress:x.progress+c};return this.questProgress[t]=b,Promise.resolve(this.questProgress)}start(){console.log("Devvit simulator started"),this.messageHandlerFn=async t=>{var x;const c=t.data;if(t.source!==window||!c||(x=c==null?void 0:c.source)!=null&&x.startsWith("react-devtools")||t.type==="devtools-message"||(c==null?void 0:c.type)==="devvit-message")return;console.log("Received message from webview:",c);const v=b=>{console.log("Posting message to webview:",b),window.postMessage({type:"devvit-message",data:{message:b}},"*")};if(c.type==="getPlayerProfile"){const b=pl();v({type:"playerProfile",data:{stats:b}})}else if(c.type==="encounterAction"){const b=await nB({...this.encounterRequiredProps,updateQuestProgressAsync:this.updateQuestProgressAsync.bind(this),quests:Object.keys(this.questProgress),inventoryProvider:this.inventoryProvider,state:this.encounterState,action:c,postMessage:v});this.encounterState=b}else if(c.type==="inventoryClientAction"){const b=c;this.inventoryProvider.persistActionsAsync([b])}else if(c.type==="inventoryClientQuery"){const b=await this.inventoryProvider.queryAsync(),h=Lt.toCompactInventory(b);console.log("Compact inventory size (bytes):",JSON.stringify(h).length),v({type:"inventoryQueryResponse",ok:!0,cInv:h,transactionId:c.transactionId})}else if(c.type==="debugAddQuest"){const b=c.questId,h=c.timestamp,w=Date.now(),e=r=>{const a=ur[r.questId];return w-r.timestamp<a.expiresSeconds*1e3};this.allQuests.push({questId:b,timestamp:h});const i=this.allQuests.filter(e);console.log("Active quests:",i),v({type:"allQuests",quests:i});const u=ur[b],n={questId:b,timestamp:h,progress:0,goal:u.rewardTiers[0].goal,tierIndex:0};this.questProgress={...this.questProgress,[b]:n},v({type:"questProgressUpdate",questProgress:this.questProgress})}else if(c.type==="debugRemoveQuest"){const b=c.questId;this.allQuests=this.allQuests.filter(h=>h.questId!==b),v({type:"allQuests",quests:this.allQuests}),this.questProgress={...this.questProgress},delete this.questProgress[b],v({type:"questProgressUpdate",questProgress:this.questProgress})}else if(c.type==="debugAdvanceQuest"){const b=c.questId,h=c.progressChange;if(!this.questProgress[b]){console.warn(`Quest ${b} not found in progress map`);return}this.questProgress=await this.updateQuestProgressAsync(b,h),v({type:"questProgressUpdate",questProgress:this.questProgress})}},window.addEventListener("message",this.messageHandlerFn)}stop(){console.log("DevvitSimulator stopped"),window.removeEventListener("message",this.messageHandlerFn)}}function Q9(){const R=[];return Lt.createInventoryProvider({postMessageFn:window.postMessage.bind(window),persistFn:async c=>(c.push(...c),{ok:!0}),queryFn:async()=>R.reduce(Lt.reducer,Lt.initialState)})}const J9=({onClick:R})=>{const t=Me(e=>e.playerStats);if(!t)return null;const c=t.battlePassExpiration||0,v=Date.now(),x=c>v,b=c-v;let h="";if(x&&b>0){const e=b/864e5,i=b/(1e3*60*60),u=b/(1e3*60);e>=1?h=`${Math.ceil(e)}d`:i>=1?h=`${Math.ceil(i)}h`:h=`${Math.ceil(u)}m`}const w=x?Et.ui.battlepassActive:Et.ui.battlepassInactive;return V.jsxs("div",{className:"ui-battlepass-nav",onClick:R,style:{cursor:"pointer"},children:[V.jsx("img",{src:w,alt:"Battle Pass"}),x&&h&&V.jsxs("div",{className:"ui-battlepass-time",children:[V.jsx("div",{children:"Remaining"}),V.jsx("div",{children:h})]})]})},Z9=["assets/ui/button_sell.png","assets/ui/button_cancel.png","assets/ui/button_equip.png","assets/ui/button_unequip.png","assets/ui/button_upgrade.png","/assets/ui/equip_bg_common.png","/assets/ui/equip_bg_uncommon.png","/assets/ui/equip_bg_rare.png","/assets/ui/equip_bg_epic.png","/assets/ui/equip_bg_legendary.png","/assets/ui/equip_bg_mythic.png","/assets/ui/notification/icon_check.png","/assets/ui/notification/icon_warning.png","/assets/ui/notification/icon_info.png","/assets/ui/shop/Buttons.png"],q9=()=>(ve.useEffect(()=>{const R=t=>new Promise((c,v)=>{const x=new Image;x.src=t,x.onload=()=>{c(t)},x.onerror=v});Promise.all(Z9.map(R)).then(()=>console.log("Preload images completed")).catch(console.error)},[]),V.jsx(V.Fragment,{})),_9=({shown:R,onClick:t})=>R?V.jsxs("div",{className:"skip-button",onClick:t,children:[V.jsx("span",{className:"skip-text",children:"SKIP"}),V.jsx("div",{className:"skip-triangle"})]}):null,e7=({notification:R,onDismiss:t})=>{ve.useEffect(()=>{if(R.autoHide){const v=setTimeout(()=>{t(R.id)},R.duration||4e3);return()=>clearTimeout(v)}},[R,t]);const c=()=>{t(R.id)};return V.jsx("div",{className:`notification-item notification-${R.type}`,onClick:c,role:"alert","aria-live":"polite",children:V.jsxs("div",{className:"notification-content",children:[R.type==="custom"&&R.customContent?V.jsx("div",{className:"notification-custom-content",children:R.customContent}):V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"notification-icon",children:[R.type==="success"&&V.jsx("img",{src:"assets/ui/notification/icon_check.png"}),R.type==="warning"&&V.jsx("img",{src:"assets/ui/notification/icon_warning.png"}),R.type==="reminder"&&V.jsx("img",{src:"assets/ui/notification/icon_info.png"})]}),V.jsxs("div",{className:"notification-text",children:[R.title&&V.jsx("div",{className:"notification-title",children:R.title}),R.message&&V.jsx("div",{className:"notification-message",children:R.message})]})]}),V.jsx("button",{className:"notification-dismiss",onClick:v=>{v.stopPropagation(),t(R.id)},"aria-label":"Dismiss notification",children:"×"})]})})},t7=()=>{const{notifications:R,removeNotification:t}=n2();return R.length===0?null:V.jsx("div",{className:"notification-container",children:R.map(c=>V.jsx(e7,{notification:c,onDismiss:t},c.id))})},i7=({current:R,total:t,tier:c,onClaim:v})=>{const x=typeof R=="number"&&typeof t=="number"&&t>0,b=x?Math.min(R/t*100,100):0,h=R>=t,w=`assets/ui/quest_tier${c}.png`,e=`assets/ui/quest_claim${c}.png`;return V.jsxs("div",{className:"quest-progress-bar-wrapper",children:[!h&&V.jsx("img",{src:w,className:"quest-tier-icon",alt:"Progress Icon"}),V.jsx("div",{className:`quest-claim-button ${h?"visible":""}`,children:h&&V.jsx(ga,{onClick:v,imageSrc:e})}),V.jsxs("div",{className:`quest-progress-bar ${h?"hidden":""}`,children:[!h&&V.jsx("div",{className:"quest-progress-fill",style:{width:`${b}%`}}),!h&&x&&V.jsxs("span",{className:"quest-progress-text",children:[R," / ",t]})]})]})},s7=({currentCount:R,totalCount:t,id:c,name:v,expiry:x,tier:b=1,rewardDescription:h})=>{const[w,e]=ve.useState(!1),i=()=>{e(!w)},u=()=>{console.log(`Claiming quest reward for quest: ${c}`),ss({type:"claimQuestReward",questId:c}),ed(`${v}: Quest reward Tier ${4-b} claimed!`)},n=R>=t;return V.jsxs("div",{className:`quest-progress-wrapper ${w?"collapsed":""}`,children:[V.jsxs("div",{className:"quest-widget-icon-container",onClick:i,children:[V.jsx("img",{src:"assets/ui/ItemIcon_MemoPad.png",className:"quest-widget-icon",alt:"Quest Icon"}),w&&n&&V.jsx(zu,{})]}),!w&&V.jsxs("div",{className:"quest-content",children:[V.jsx("div",{className:"quest-name",children:V.jsxs("span",{children:[v,V.jsx(ds,{inline:!0,content:h})]})}),V.jsxs("div",{className:"quest-progress-data",children:[V.jsxs("div",{className:"quest-expiry",children:[V.jsx("img",{src:"assets/ui/Icon_Timer.png",alt:"Timer Icon"}),x]}),V.jsx(i7,{current:R,total:t,tier:b,onClaim:u})]})]})]})};function a7(R){const t=R.rewardTiers.length;return R.rewardTiers.map((c,v)=>`Tier ${t-v}: ${c.rewardValue}x ${Lt.ItemDefinitions[c.rewardItem].name}`).join(`
`)}const n7=()=>{const R=Me(v=>v.questProgress),t=Date.now(),c=Object.values(R).map(v=>{const x=ur[v.questId],b=t-v.timestamp,h=x.expiresSeconds*1e3,w=Math.max(0,h-b),e=w/(1e3*60*60*24),i=w/(1e3*60*60),u=w/(1e3*60),n=e>1?`${Math.round(e)}d`:i>1?`${Math.round(i)}h`:u>1?`${Math.round(u)}m`:"< 1m",r=w<=0,a=v.tierIndex+1,s=a7(x);return{id:v.questId,name:x.description??v.questId,current:v.progress,total:v.goal,expiry:`${r?"(Expired)":n}`,expired:r,tier:a,rewardDescription:s}});return V.jsx("div",{className:"quest-list",children:c.map(v=>v.expired?null:V.jsx(s7,{id:v.id,name:v.name,currentCount:v.current,totalCount:v.total,expiry:v.expiry,tier:v.tier,rewardDescription:v.rewardDescription},v.id))})},Mu=window.location.hostname==="localhost";function r7(){const R=Me(ye=>ye.setStatsShown),t=Me(ye=>ye.statsShown),c=Me(ye=>ye.setPlayerStats),v=Me(ye=>ye.playerStats),x=Me(ye=>ye.inventory),b=Me(ye=>ye.setInventory),h=Me(ye=>ye.setMissionCreateShown),w=Me(ye=>ye.missionCreateShown),e=Me(ye=>ye.postId),i=Me(ye=>ye.setShowEnemyTauntForm),u=Me(ye=>ye.showEnemyTauntForm),n=Me(ye=>ye.tauntEnemyId),r=Me(ye=>ye.setShowNextEncounterButton),s=Me(ye=>ye.showNextEncounterButton)&&!!v&&x.loaded,o=Me(ye=>ye.skillOptions),d=Me(ye=>ye.setShowSkillOptions),l=Me(ye=>ye.showSkillOptions),f=Me(ye=>ye.skillOptionHeader),m=Me(ye=>ye.setSelectedOptionIndex),g=Me(ye=>ye.gameStatus),p=Me(ye=>ye.setGameStatus),y=ve.useMemo(()=>Vh(),[]),S=ve.useMemo(()=>Lt.createInventoryClient(y),[]),C=Me(ye=>ye.inCombat),[A,M]=ve.useState(!1),[L,P]=ve.useState(!1),[O,D]=ve.useState(Date.now()),[I,F]=ve.useState(!0),H=v?v.Lives>0:!1,k=v?v.LoginCombo%vB+1:0,W=(v==null?void 0:v.clearedMissionsCount)||0,$=Me(ye=>ye.setEquipmentShown),K=Me(ye=>ye.equipmentShown),Z=Me(ye=>ye.hasNewInventoryItem),X=Me(ye=>ye.setHasNewInventoryItem),j=Me(ye=>ye.advanceButtonLabel),Y=Me(ye=>ye.questMessageShown),U=Me(ye=>ye.questMessage),{showBattleLog:J,showPortraitBattleLog:q,isLandscape:_}=X9(),[te,se]=ve.useState(!0),ne=_&&!J||!J&&!q,[he,le]=ve.useState(!0),[ge,re]=ve.useState("0%"),fe=Me(ye=>ye.setCropTopPixels),[Ae,Ie]=ve.useState("0%"),[Ne,Fe]=ve.useState("0%"),[Se,Oe]=ve.useState(0),Be=ve.useRef(null),[Pt,Gt]=ve.useState(!1),[si,It]=ve.useState(0),Ht=Me(ye=>ye.battleLogMessages),hi=Me(ye=>ye.setGameDevState),Ai=Me(ye=>ye.settingsShown),Ot=Me(ye=>ye.setSettingsShown),qt=Me(ye=>ye.authorRewardsShown),jt=Me(ye=>ye.setAuthorRewardsShown),Si=Me(ye=>ye.setAuthorRewardData),Di=Me(ye=>ye.canClaimAuthorReward),ea=Me(ye=>ye.setCanClaimAuthorReward),es=Me(ye=>ye.missionMetadata),ta=Me(ye=>ye.sessionId),cs=Me(ye=>ye.setShopShown),Bn=Me(ye=>ye.shopShown),lo=Me(ye=>ye.setSkipButtonShown),ja=Me(ye=>ye.skipButtonShown),ho=Me(ye=>ye.setQuestProgress),yr=Me(ye=>ye.setAllQuests),Pl=Me(ye=>ye.gameMode),td=Me(ye=>ye.setRecentMissionLinksShown),Bl=Me(ye=>ye.setRecentMissionLinks),xr=Me(ye=>ye.showQuestUI),Dc=Me(ye=>ye.setShopWithDeepLink),Dl=()=>{const ye=Be.current,Qt=document.getElementById("ui-container");if(!Qt||!ye)return;const Ii=Qt.getBoundingClientRect().height,Pa=ye.getBoundingClientRect().height;Oe(Math.min(Pa,Ii))},id=()=>{const ye=document.getElementById("ui-container");if(!ye)return;const Qt=ye.getBoundingClientRect(),Ii=Qt.width,Pa=Qt.height;if(Ii>Pa){const as=Ii-Pa;re(`-${as}px`),fe(as),Ie("0px"),Fe("0px")}else re("0%"),Ie("0%"),Fe("0%")};ve.useEffect(()=>{if(v){const ye=v?v.LastClaimLoginBonusTimeStamp>=dr.getLocalStartOfDay()&&v.LastClaimLoginBonusTimeStamp<=dr.getLocalEndOfDay():!1;v.clearedMissionsCount===0&&F(!1),ye&&F(!1)}},[v==null?void 0:v.LastClaimLoginBonusTimeStamp,v==null?void 0:v.clearedMissionsCount]),ve.useEffect(()=>{g===Ci.Victory&&te||g===Ci.Defeat&&te||t||K||w||u||Bn?Gt(!0):Gt(!1)},[t,K,Bn,w,u,g]),ve.useEffect(()=>{const ye=()=>{id(),Dl()};return window.addEventListener("resize",ye),ye(),()=>window.removeEventListener("resize",ye)},[]),ve.useEffect(()=>{const ye=y.registerStatsListener(Qt=>{console.log("Received player stats update:",Qt),c(Qt)});return y.getPlayerStatsAsync(),ye},[]),ve.useEffect(()=>{v&&v.LastClaimLoginBonusTimeStamp<dr.getLocalStartOfDay()&&y.initialLoginAsync()},[v]),ve.useEffect(()=>{g===Ci.Loading?v&&v.Lives>0?le(!0):le(!1):g===Ci.Playing&&le(!0)},[v,g]),ve.useEffect(()=>{Dl()},[v,s,ne,l]),ve.useEffect(()=>{(A||Mu)&&hi(!0)},[A]),ve.useEffect(()=>{if(!Mu||!es.mission)return;const ye=new $9({postId:e,sessionId:ta,playerLevel:(v==null?void 0:v.Level)||1,mission:es.mission,battlePassExpiration:(v==null?void 0:v.battlePassExpiration)||0});return ye.start(),()=>{ye.stop()}},[Mu,es.mission,v,e,ta]),ve.useEffect(()=>{const ye=S.subscribe(b);return S.query({type:"getPlayerInventory"}).then(b),()=>{ye()}},[]),ve.useEffect(()=>{v&&Uu({equipItem:async ye=>{const Qt=Lt.validatePlayerCanEquipItem(x,v,ye);if(!Qt.ok)return Qt;const Ii=ye.definition.equipSlots[0];if(x.equippedItems[Ii]){const Pa={type:"itemUnequipped",slot:Ii,destination:{type:"bag",id:Lt.DEFAULT_BAG_ID}},as=await S.dispatch(Pa);if(!as.ok)return as}return S.dispatch({type:"itemEquipped",itemId:ye.id,slot:Ii})},unequipItem:ye=>S.dispatch({type:"itemUnequipped",slot:ye,destination:{type:"bag",id:Lt.DEFAULT_BAG_ID}}),sellItem:(ye,Qt)=>{const Ii={type:"itemSold",itemId:ye.id,amount:Qt};return S.dispatch(Ii)},upgradeItem:(ye,Qt)=>{const Ii={type:"itemUpgraded",itemId:ye,upgradeId:Qt};return S.dispatch(Ii)},buyItem:async(ye,Qt)=>{const Ii={type:"shopBuy",shopItemId:ye,shopItemType:Qt};return S.dispatch(Ii)}})},[S,x,v]),ve.useEffect(()=>{const ye=Qt=>{const{type:Ii,data:Pa}=Qt.data;if(Ii==="devvit-message"){const{message:as}=Pa;switch(as.type){case"options":as.data.devMode&&M(!0);break;case"recentMissions":const mo=as.data.recentMissions;if(mo&&mo.length>0){const Ba=mo.slice(0,3);Bl(Ba)}break;case"authorRewardData":console.log("Received author rewards from Devvit:",as.data.rewardData);const va=as.data.rewardData;va&&va.length>0&&Si(va);const Ol=va&&va.some(Ba=>Bw(Ba));ea(Ol);break;case"questProgressUpdate":console.log("Received quest progress from Devvit:",as.questProgress),ho(as.questProgress);break;case"allQuests":console.log("Received all quests from Devvit:",as.quests),yr(as.quests);break}}};return window.addEventListener("message",ye),ss({type:"options"}),ss({type:"requestQuestProgress"}),()=>{window.removeEventListener("message",ye)}},[]),ve.useEffect(()=>{const ye=setInterval(()=>{g===Ci.Loading&&v&&v.Lives<tl&&D(Date.now())},1e3);return()=>clearInterval(ye)},[v==null?void 0:v.Lives,g]),ve.useEffect(()=>{if(g===Ci.Loading&&v&&v.Lives<tl){const ye=v.LastLifeTimeStamp+pB-O;It(ye),ye<0&&y.initialLoginAsync().then(Qt=>{c(Qt)})}},[g,O,v==null?void 0:v.LastLifeTimeStamp,v==null?void 0:v.Lives]);const[Fl,uo]=ve.useState(!1);ve.useEffect(()=>{var Qt;if(!v||Fl||Pl===_r.Battle&&es.mission===void 0)return;const ye=((Qt=es==null?void 0:es.mission)==null?void 0:Qt.minLevel)||1;if(Pl===_r.Inn||ye-v.Level>=10){const Ii={minLevel:Yh(v.Level),count:10};ss({type:"requestRecentMissions",data:Ii})}uo(!0)},[v,Fl,uo,es,Pl]);const[co,Il]=ve.useState(!1);ve.useEffect(()=>{v&&!co&&(ss({type:"requestAuthorRewardData",data:{}}),Il(!0),console.log("Requested author reward data from Devvit"))},[v,co,Il]);const fo=ye=>{ye.stopPropagation()},ia=ye=>{ye.stopPropagation()},ki=()=>{g!==Ci.Playing&&(p(Ci.Playing),y.startMissionAsync(e)),r(!1)};return V.jsxs(V.Fragment,{children:[V.jsx(q9,{}),V.jsxs("div",{className:"ui-container",id:"ui-container",children:[V.jsx("div",{className:"volume-control-wrapper",children:V.jsx(r6,{})}),V.jsxs("div",{className:"phaser-game-wrapper",ref:Be,onMouseDown:fo,onTouchStart:ia,children:[V.jsxs("div",{className:"aspect-wrapper",onMouseDown:fo,onTouchStart:ia,children:[V.jsx("div",{className:"game-wrapper",style:{clipPath:`inset(${Ae} 0% ${Ne} 0%)`,top:`${ge}`},onMouseDown:fo,onTouchStart:ia,children:V.jsx(s6,{})}),V.jsxs("div",{className:"ui-overlay-wrapper",style:{pointerEvents:Pt?"auto":"none"},children:[v&&V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"ui-top-bar",children:[V.jsxs("div",{className:"ui-left-section",children:[V.jsxs("div",{className:"ui-level-display",children:[V.jsx("img",{src:Et.ui.levelBadge}),V.jsx("div",{className:"ui-level-number",children:v.Level})]}),V.jsx(J9,{onClick:()=>Dc("game_gold_frog_pass_30days")})]}),V.jsxs("div",{className:"ui-gold-gem-container",children:[V.jsxs("div",{className:"ui-gem-display",children:[V.jsx("img",{src:Et.ui.gemIcon}),V.jsx("div",{className:"ui-gem-number",children:x.Gem}),V.jsx("div",{className:"ui-gem-button",style:{pointerEvents:"auto"},children:V.jsx("img",{src:Et.ui.gemButton,onClick:()=>{cs(!0)},style:{cursor:"pointer"}})})]}),V.jsxs("div",{className:"ui-gold-and-settings-container",children:[V.jsxs("div",{className:"ui-gold-display",children:[V.jsx("img",{src:Et.ui.goldIcon}),V.jsx("div",{className:"ui-gold-number",children:x.Gold})]}),V.jsx("div",{className:"ui-settings-wrapper",style:{pointerEvents:"auto"},children:V.jsx("button",{className:"ui-settings-button",onClick:()=>Ot(!0),children:V.jsx("img",{src:Et.ui.settingsIcon})})})]})]})]})," ",V.jsx("div",{className:"ui-quest-wrapper",style:{pointerEvents:"auto"},children:xr&&V.jsx(n7,{})})]}),V.jsx("div",{}),v&&te&&(g===Ci.Victory||g===Ci.Defeat)?V.jsx(x9,{status:g,statsProvider:y,playerStats:v,dismiss:()=>{Gt(!1),se(!1)}}):null,Y&&V.jsx("div",{className:"quest-ui-panel",children:V.jsx("div",{className:"ui-panel-header",children:U})}),ge!=="0%"&&V.jsx("div",{className:"ui-panel"}),v&&V.jsxs(V.Fragment,{children:[V.jsx(v9,{shown:K,dismiss:()=>$(!1),inventoryClient:S}),V.jsx(m6,{shown:t,dismiss:()=>R(!1),statsProvider:y,playerStats:v,inventory:x}),V.jsx(I6,{playerGems:x.Gem,shown:Bn,dismiss:()=>cs(!1)})]})]})," ",V.jsx(P9,{shown:w,dismiss:()=>h(!1),inventoryClient:S}),V.jsx(N9,{shown:u,enemyId:n,dismiss:()=>i(!1,"")}),V.jsx(W9,{}),V.jsx(j9,{shown:Ai,dismiss:()=>Ot(!1)}),V.jsx(K9,{shown:qt,dismiss:()=>jt(!1)}),v&&I&&W>0&&V.jsx(H9,{loginDay:k,shown:I,claim:async()=>{F(!1),await y.getNextRewardAsync()&&await y.claimLoginBonusAsync().then(Qt=>{c(Qt)})}}),(A||Mu)&&V.jsxs(V.Fragment,{children:[V.jsx("div",{onClick:()=>P(!0),style:{position:"fixed",top:0,left:0,width:"10px",height:"10px",zIndex:1}}),V.jsx(I9,{shown:L,dismiss:()=>P(!1),statsProvider:y,inventoryClient:S})]})]})," "]})," ",v&&V.jsxs("div",{className:"bottom-ui-wrapper",style:{height:Se},children:[V.jsx(U9,{bInCombat:C,bShowSkillOptions:l,handleStatsClicked:()=>R(!0),bStatsNotification:(x==null?void 0:x.Gold)>=y.getUpgradeCost((v==null?void 0:v.Level)||0),handleShopClicked:()=>cs(!0),handleBagClicked:()=>{$(!0),X(!1)},bBagNotification:Z,bShowOnlyPlayerHealth:!_&&J,handleMapClicked:()=>{jt(!0),ea(!1)},bMapNotification:Di,handleBattleClicked:()=>td(!0)}),l&&V.jsx(V.Fragment,{children:V.jsxs("div",{className:o.length>2?"ui-panel-vertical":"ui-panel",children:[V.jsx("div",{className:"ui-panel-header",children:f}),V.jsx("div",{className:o.length>2?"ui-panel-content-skills-vertical":"ui-panel-content-skills",children:o.map((ye,Qt)=>V.jsx(B9,{label:ye,onClick:()=>{m(Qt),d(!1)}},Qt))})]})}),V.jsxs("div",{className:"ui-panel-content",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},children:[V.jsx(_9,{shown:ja,onClick:()=>{lo(!1)}}),g===Ci.Defeat?V.jsx(sp,{lives:v.Lives,currGameStatus:g}):s&&!u&&ne&&V.jsxs(V.Fragment,{children:[g===Ci.Loading&&V.jsxs("div",{className:"lives-container",children:[V.jsxs("h1",{children:["Lives",V.jsx(ds,{content:"You must have at least 1 life to start a mission. Lives recover over time."})]}),g===Ci.Loading&&V.jsx(sp,{lives:v.Lives,currGameStatus:g}),g===Ci.Loading&&!H&&V.jsx(v2,{remainingTime:si})]}),V.jsx("div",{className:"main-ui-button-wrapper",children:he&&V.jsx(Ug,{disabled:!he,label:he?j:"Resting..",onClick:ki})})]})]})," "]}),v&&!_&&J&&V.jsx(iw,{playerLives:v.Lives,gameStatus:g,advance:ki,showAdvanceButton:s&&!I,tauntFormShown:u,livesTimer:si,battleLogData:{battleLogMessages:Ht,showBattleLog:J,showPortraitBattleLog:q,isLandscape:_},advanceButtonLabel:j})]}),"  ",v&&_&&J&&V.jsx(iw,{playerLives:v.Lives,gameStatus:g,advance:ki,showAdvanceButton:s&&!I,tauntFormShown:u,livesTimer:si,battleLogData:{battleLogMessages:Ht,showBattleLog:J,showPortraitBattleLog:q,isLandscape:_},advanceButtonLabel:j}),V.jsx(t7,{})]})}HC.createRoot(document.getElementById("app-wrapper")).render(V.jsx(ve.StrictMode,{children:V.jsx(r7,{})}));
